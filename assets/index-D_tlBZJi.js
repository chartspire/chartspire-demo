(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Gf={exports:{}},g0={},qf={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function _6(){if(em)return $t;em=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;function m(Y){return Y===null||typeof Y!="object"?null:(Y=f&&Y[f]||Y["@@iterator"],typeof Y=="function"?Y:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function _(Y,U,de){this.props=Y,this.context=U,this.refs=C,this.updater=de||x}_.prototype.isReactComponent={},_.prototype.setState=function(Y,U){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,U,"setState")},_.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function k(){}k.prototype=_.prototype;function M(Y,U,de){this.props=Y,this.context=U,this.refs=C,this.updater=de||x}var L=M.prototype=new k;L.constructor=M,b(L,_.prototype),L.isPureReactComponent=!0;var A=Array.isArray,P=Object.prototype.hasOwnProperty,W={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function $(Y,U,de){var X,fe={},ue=null,Fe=null;if(U!=null)for(X in U.ref!==void 0&&(Fe=U.ref),U.key!==void 0&&(ue=""+U.key),U)P.call(U,X)&&!D.hasOwnProperty(X)&&(fe[X]=U[X]);var Te=arguments.length-2;if(Te===1)fe.children=de;else if(1<Te){for(var Pe=Array(Te),Ce=0;Ce<Te;Ce++)Pe[Ce]=arguments[Ce+2];fe.children=Pe}if(Y&&Y.defaultProps)for(X in Te=Y.defaultProps,Te)fe[X]===void 0&&(fe[X]=Te[X]);return{$$typeof:e,type:Y,key:ue,ref:Fe,props:fe,_owner:W.current}}function z(Y,U){return{$$typeof:e,type:Y.type,key:U,ref:Y.ref,props:Y.props,_owner:Y._owner}}function B(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function Z(Y){var U={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(de){return U[de]})}var J=/\/+/g;function H(Y,U){return typeof Y=="object"&&Y!==null&&Y.key!=null?Z(""+Y.key):U.toString(36)}function ee(Y,U,de,X,fe){var ue=typeof Y;(ue==="undefined"||ue==="boolean")&&(Y=null);var Fe=!1;if(Y===null)Fe=!0;else switch(ue){case"string":case"number":Fe=!0;break;case"object":switch(Y.$$typeof){case e:case t:Fe=!0}}if(Fe)return Fe=Y,fe=fe(Fe),Y=X===""?"."+H(Fe,0):X,A(fe)?(de="",Y!=null&&(de=Y.replace(J,"$&/")+"/"),ee(fe,U,de,"",function(Ce){return Ce})):fe!=null&&(B(fe)&&(fe=z(fe,de+(!fe.key||Fe&&Fe.key===fe.key?"":(""+fe.key).replace(J,"$&/")+"/")+Y)),U.push(fe)),1;if(Fe=0,X=X===""?".":X+":",A(Y))for(var Te=0;Te<Y.length;Te++){ue=Y[Te];var Pe=X+H(ue,Te);Fe+=ee(ue,U,de,Pe,fe)}else if(Pe=m(Y),typeof Pe=="function")for(Y=Pe.call(Y),Te=0;!(ue=Y.next()).done;)ue=ue.value,Pe=X+H(ue,Te++),Fe+=ee(ue,U,de,Pe,fe);else if(ue==="object")throw U=String(Y),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Fe}function le(Y,U,de){if(Y==null)return Y;var X=[],fe=0;return ee(Y,X,"","",function(ue){return U.call(de,ue,fe++)}),X}function ce(Y){if(Y._status===-1){var U=Y._result;U=U(),U.then(function(de){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=de)},function(de){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=de)}),Y._status===-1&&(Y._status=0,Y._result=U)}if(Y._status===1)return Y._result.default;throw Y._result}var ae={current:null},re={transition:null},ve={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:re,ReactCurrentOwner:W};function pe(){throw Error("act(...) is not supported in production builds of React.")}return $t.Children={map:le,forEach:function(Y,U,de){le(Y,function(){U.apply(this,arguments)},de)},count:function(Y){var U=0;return le(Y,function(){U++}),U},toArray:function(Y){return le(Y,function(U){return U})||[]},only:function(Y){if(!B(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},$t.Component=_,$t.Fragment=r,$t.Profiler=i,$t.PureComponent=M,$t.StrictMode=n,$t.Suspense=d,$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,$t.act=pe,$t.cloneElement=function(Y,U,de){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var X=b({},Y.props),fe=Y.key,ue=Y.ref,Fe=Y._owner;if(U!=null){if(U.ref!==void 0&&(ue=U.ref,Fe=W.current),U.key!==void 0&&(fe=""+U.key),Y.type&&Y.type.defaultProps)var Te=Y.type.defaultProps;for(Pe in U)P.call(U,Pe)&&!D.hasOwnProperty(Pe)&&(X[Pe]=U[Pe]===void 0&&Te!==void 0?Te[Pe]:U[Pe])}var Pe=arguments.length-2;if(Pe===1)X.children=de;else if(1<Pe){Te=Array(Pe);for(var Ce=0;Ce<Pe;Ce++)Te[Ce]=arguments[Ce+2];X.children=Te}return{$$typeof:e,type:Y.type,key:fe,ref:ue,props:X,_owner:Fe}},$t.createContext=function(Y){return Y={$$typeof:s,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:o,_context:Y},Y.Consumer=Y},$t.createElement=$,$t.createFactory=function(Y){var U=$.bind(null,Y);return U.type=Y,U},$t.createRef=function(){return{current:null}},$t.forwardRef=function(Y){return{$$typeof:u,render:Y}},$t.isValidElement=B,$t.lazy=function(Y){return{$$typeof:p,_payload:{_status:-1,_result:Y},_init:ce}},$t.memo=function(Y,U){return{$$typeof:h,type:Y,compare:U===void 0?null:U}},$t.startTransition=function(Y){var U=re.transition;re.transition={};try{Y()}finally{re.transition=U}},$t.unstable_act=pe,$t.useCallback=function(Y,U){return ae.current.useCallback(Y,U)},$t.useContext=function(Y){return ae.current.useContext(Y)},$t.useDebugValue=function(){},$t.useDeferredValue=function(Y){return ae.current.useDeferredValue(Y)},$t.useEffect=function(Y,U){return ae.current.useEffect(Y,U)},$t.useId=function(){return ae.current.useId()},$t.useImperativeHandle=function(Y,U,de){return ae.current.useImperativeHandle(Y,U,de)},$t.useInsertionEffect=function(Y,U){return ae.current.useInsertionEffect(Y,U)},$t.useLayoutEffect=function(Y,U){return ae.current.useLayoutEffect(Y,U)},$t.useMemo=function(Y,U){return ae.current.useMemo(Y,U)},$t.useReducer=function(Y,U,de){return ae.current.useReducer(Y,U,de)},$t.useRef=function(Y){return ae.current.useRef(Y)},$t.useState=function(Y){return ae.current.useState(Y)},$t.useSyncExternalStore=function(Y,U,de){return ae.current.useSyncExternalStore(Y,U,de)},$t.useTransition=function(){return ae.current.useTransition()},$t.version="18.3.1",$t}var tm;function Yg(){return tm||(tm=1,qf.exports=_6()),qf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function S6(){if(rm)return g0;rm=1;var e=Yg(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(u,d,h){var p,f={},m=null,x=null;h!==void 0&&(m=""+h),d.key!==void 0&&(m=""+d.key),d.ref!==void 0&&(x=d.ref);for(p in d)n.call(d,p)&&!o.hasOwnProperty(p)&&(f[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)f[p]===void 0&&(f[p]=d[p]);return{$$typeof:t,type:u,key:m,ref:x,props:f,_owner:i.current}}return g0.Fragment=r,g0.jsx=s,g0.jsxs=s,g0}var nm;function k6(){return nm||(nm=1,Gf.exports=S6()),Gf.exports}var Ll=k6(),I0=Yg(),tp={},Qf={exports:{}},Vi={},Kf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im;function M6(){return im||(im=1,(function(e){function t(re,ve){var pe=re.length;re.push(ve);e:for(;0<pe;){var Y=pe-1>>>1,U=re[Y];if(0<i(U,ve))re[Y]=ve,re[pe]=U,pe=Y;else break e}}function r(re){return re.length===0?null:re[0]}function n(re){if(re.length===0)return null;var ve=re[0],pe=re.pop();if(pe!==ve){re[0]=pe;e:for(var Y=0,U=re.length,de=U>>>1;Y<de;){var X=2*(Y+1)-1,fe=re[X],ue=X+1,Fe=re[ue];if(0>i(fe,pe))ue<U&&0>i(Fe,fe)?(re[Y]=Fe,re[ue]=pe,Y=ue):(re[Y]=fe,re[X]=pe,Y=X);else if(ue<U&&0>i(Fe,pe))re[Y]=Fe,re[ue]=pe,Y=ue;else break e}}return ve}function i(re,ve){var pe=re.sortIndex-ve.sortIndex;return pe!==0?pe:re.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var d=[],h=[],p=1,f=null,m=3,x=!1,b=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(re){for(var ve=r(h);ve!==null;){if(ve.callback===null)n(h);else if(ve.startTime<=re)n(h),ve.sortIndex=ve.expirationTime,t(d,ve);else break;ve=r(h)}}function A(re){if(C=!1,L(re),!b)if(r(d)!==null)b=!0,ce(P);else{var ve=r(h);ve!==null&&ae(A,ve.startTime-re)}}function P(re,ve){b=!1,C&&(C=!1,k($),$=-1),x=!0;var pe=m;try{for(L(ve),f=r(d);f!==null&&(!(f.expirationTime>ve)||re&&!Z());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,m=f.priorityLevel;var U=Y(f.expirationTime<=ve);ve=e.unstable_now(),typeof U=="function"?f.callback=U:f===r(d)&&n(d),L(ve)}else n(d);f=r(d)}if(f!==null)var de=!0;else{var X=r(h);X!==null&&ae(A,X.startTime-ve),de=!1}return de}finally{f=null,m=pe,x=!1}}var W=!1,D=null,$=-1,z=5,B=-1;function Z(){return!(e.unstable_now()-B<z)}function J(){if(D!==null){var re=e.unstable_now();B=re;var ve=!0;try{ve=D(!0,re)}finally{ve?H():(W=!1,D=null)}}else W=!1}var H;if(typeof M=="function")H=function(){M(J)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,le=ee.port2;ee.port1.onmessage=J,H=function(){le.postMessage(null)}}else H=function(){_(J,0)};function ce(re){D=re,W||(W=!0,H())}function ae(re,ve){$=_(function(){re(e.unstable_now())},ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,ce(P))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(re){switch(m){case 1:case 2:case 3:var ve=3;break;default:ve=m}var pe=m;m=ve;try{return re()}finally{m=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,ve){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var pe=m;m=re;try{return ve()}finally{m=pe}},e.unstable_scheduleCallback=function(re,ve,pe){var Y=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Y+pe:Y):pe=Y,re){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=pe+U,re={id:p++,callback:ve,priorityLevel:re,startTime:pe,expirationTime:U,sortIndex:-1},pe>Y?(re.sortIndex=pe,t(h,re),r(d)===null&&re===r(h)&&(C?(k($),$=-1):C=!0,ae(A,pe-Y))):(re.sortIndex=U,t(d,re),b||x||(b=!0,ce(P))),re},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(re){var ve=m;return function(){var pe=m;m=ve;try{return re.apply(this,arguments)}finally{m=pe}}}})(Jf)),Jf}var om;function T6(){return om||(om=1,Kf.exports=M6()),Kf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am;function E6(){if(am)return Vi;am=1;var e=Yg(),t=T6();function r(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,v=1;v<arguments.length;v++)l+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(a,l){s(a,l),s(a+"Capture",l)}function s(a,l){for(i[a]=l,a=0;a<l.length;a++)n.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(a){return d.call(f,a)?!0:d.call(p,a)?!1:h.test(a)?f[a]=!0:(p[a]=!0,!1)}function x(a,l,v,y){if(v!==null&&v.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:v!==null?!v.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function b(a,l,v,y){if(l===null||typeof l>"u"||x(a,l,v,y))return!0;if(y)return!1;if(v!==null)switch(v.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(a,l,v,y,S,T,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=v,this.propertyName=a,this.type=l,this.sanitizeURL=T,this.removeEmptyString=O}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){_[a]=new C(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];_[l]=new C(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){_[a]=new C(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){_[a]=new C(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){_[a]=new C(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){_[a]=new C(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){_[a]=new C(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){_[a]=new C(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){_[a]=new C(a,5,!1,a.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(k,M);_[l]=new C(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(k,M);_[l]=new C(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(k,M);_[l]=new C(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){_[a]=new C(a,1,!1,a.toLowerCase(),null,!1,!1)}),_.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){_[a]=new C(a,1,!1,a.toLowerCase(),null,!0,!0)});function L(a,l,v,y){var S=_.hasOwnProperty(l)?_[l]:null;(S!==null?S.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(b(l,v,S,y)&&(v=null),y||S===null?m(l)&&(v===null?a.removeAttribute(l):a.setAttribute(l,""+v)):S.mustUseProperty?a[S.propertyName]=v===null?S.type===3?!1:"":v:(l=S.attributeName,y=S.attributeNamespace,v===null?a.removeAttribute(l):(S=S.type,v=S===3||S===4&&v===!0?"":""+v,y?a.setAttributeNS(y,l,v):a.setAttribute(l,v))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),W=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),Z=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),re=Symbol.iterator;function ve(a){return a===null||typeof a!="object"?null:(a=re&&a[re]||a["@@iterator"],typeof a=="function"?a:null)}var pe=Object.assign,Y;function U(a){if(Y===void 0)try{throw Error()}catch(v){var l=v.stack.trim().match(/\n( *(at )?)/);Y=l&&l[1]||""}return`
`+Y+a}var de=!1;function X(a,l){if(!a||de)return"";de=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(be){var y=be}Reflect.construct(a,[],l)}else{try{l.call()}catch(be){y=be}a.call(l.prototype)}else{try{throw Error()}catch(be){y=be}a()}}catch(be){if(be&&y&&typeof be.stack=="string"){for(var S=be.stack.split(`
`),T=y.stack.split(`
`),O=S.length-1,Q=T.length-1;1<=O&&0<=Q&&S[O]!==T[Q];)Q--;for(;1<=O&&0<=Q;O--,Q--)if(S[O]!==T[Q]){if(O!==1||Q!==1)do if(O--,Q--,0>Q||S[O]!==T[Q]){var te=`
`+S[O].replace(" at new "," at ");return a.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",a.displayName)),te}while(1<=O&&0<=Q);break}}}finally{de=!1,Error.prepareStackTrace=v}return(a=a?a.displayName||a.name:"")?U(a):""}function fe(a){switch(a.tag){case 5:return U(a.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return a=X(a.type,!1),a;case 11:return a=X(a.type.render,!1),a;case 1:return a=X(a.type,!0),a;default:return""}}function ue(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case D:return"Fragment";case W:return"Portal";case z:return"Profiler";case $:return"StrictMode";case H:return"Suspense";case ee:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Z:return(a.displayName||"Context")+".Consumer";case B:return(a._context.displayName||"Context")+".Provider";case J:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case le:return l=a.displayName||null,l!==null?l:ue(a.type)||"Memo";case ce:l=a._payload,a=a._init;try{return ue(a(l))}catch{}}return null}function Fe(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(l);case 8:return l===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Te(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Pe(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ce(a){var l=Pe(a)?"checked":"value",v=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var S=v.get,T=v.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return S.call(this)},set:function(O){y=""+O,T.call(this,O)}}),Object.defineProperty(a,l,{enumerable:v.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Ee(a){a._valueTracker||(a._valueTracker=Ce(a))}function Je(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var v=l.getValue(),y="";return a&&(y=Pe(a)?a.checked?"true":"false":a.value),a=y,a!==v?(l.setValue(a),!0):!1}function Qe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function nt(a,l){var v=l.checked;return pe({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??a._wrapperState.initialChecked})}function Ue(a,l){var v=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;v=Te(l.value!=null?l.value:v),a._wrapperState={initialChecked:y,initialValue:v,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ct(a,l){l=l.checked,l!=null&&L(a,"checked",l,!1)}function ut(a,l){ct(a,l);var v=Te(l.value),y=l.type;if(v!=null)y==="number"?(v===0&&a.value===""||a.value!=v)&&(a.value=""+v):a.value!==""+v&&(a.value=""+v);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?Kt(a,l.type,v):l.hasOwnProperty("defaultValue")&&Kt(a,l.type,Te(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Qt(a,l,v){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,v||l===a.value||(a.value=l),a.defaultValue=l}v=a.name,v!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,v!==""&&(a.name=v)}function Kt(a,l,v){(l!=="number"||Qe(a.ownerDocument)!==a)&&(v==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+v&&(a.defaultValue=""+v))}var Mt=Array.isArray;function gt(a,l,v,y){if(a=a.options,l){l={};for(var S=0;S<v.length;S++)l["$"+v[S]]=!0;for(v=0;v<a.length;v++)S=l.hasOwnProperty("$"+a[v].value),a[v].selected!==S&&(a[v].selected=S),S&&y&&(a[v].defaultSelected=!0)}else{for(v=""+Te(v),l=null,S=0;S<a.length;S++){if(a[S].value===v){a[S].selected=!0,y&&(a[S].defaultSelected=!0);return}l!==null||a[S].disabled||(l=a[S])}l!==null&&(l.selected=!0)}}function jt(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(r(91));return pe({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function ln(a,l){var v=l.value;if(v==null){if(v=l.children,l=l.defaultValue,v!=null){if(l!=null)throw Error(r(92));if(Mt(v)){if(1<v.length)throw Error(r(93));v=v[0]}l=v}l==null&&(l=""),v=l}a._wrapperState={initialValue:Te(v)}}function mn(a,l){var v=Te(l.value),y=Te(l.defaultValue);v!=null&&(v=""+v,v!==a.value&&(a.value=v),l.defaultValue==null&&a.defaultValue!==v&&(a.defaultValue=v)),y!=null&&(a.defaultValue=""+y)}function dr(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Ft(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zt(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Ft(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var nr,Gr=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,v,y,S){MSApp.execUnsafeLocalFunction(function(){return a(l,v,y,S)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(nr=nr||document.createElement("div"),nr.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=nr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function hr(a,l){if(l){var v=a.firstChild;if(v&&v===a.lastChild&&v.nodeType===3){v.nodeValue=l;return}}a.textContent=l}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tt=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(a){Tt.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Vr[l]=Vr[a]})});function We(a,l,v){return l==null||typeof l=="boolean"||l===""?"":v||typeof l!="number"||l===0||Vr.hasOwnProperty(a)&&Vr[a]?(""+l).trim():l+"px"}function _t(a,l){a=a.style;for(var v in l)if(l.hasOwnProperty(v)){var y=v.indexOf("--")===0,S=We(v,l[v],y);v==="float"&&(v="cssFloat"),y?a.setProperty(v,S):a[v]=S}}var wt=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function St(a,l){if(l){if(wt[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(r(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(r(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(r(61))}if(l.style!=null&&typeof l.style!="object")throw Error(r(62))}}function Ct(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wt=null;function Gt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yr=null,pr=null,cr=null;function Jn(a){if(a=Dn(a)){if(typeof yr!="function")throw Error(r(280));var l=a.stateNode;l&&(l=Su(l),yr(a.stateNode,a.type,l))}}function Ur(a){pr?cr?cr.push(a):cr=[a]:pr=a}function Hr(){if(pr){var a=pr,l=cr;if(cr=pr=null,Jn(a),l)for(a=0;a<l.length;a++)Jn(l[a])}}function ei(a,l){return a(l)}function Pt(){}var Pr=!1;function kt(a,l,v){if(Pr)return a(l,v);Pr=!0;try{return ei(a,l,v)}finally{Pr=!1,(pr!==null||cr!==null)&&(Pt(),Hr())}}function Ar(a,l){var v=a.stateNode;if(v===null)return null;var y=Su(v);if(y===null)return null;v=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(v&&typeof v!="function")throw Error(r(231,l,typeof v));return v}var wr=!1;if(u)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){wr=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{wr=!1}function tn(a,l,v,y,S,T,O,Q,te){var be=Array.prototype.slice.call(arguments,3);try{l.apply(v,be)}catch(Le){this.onError(Le)}}var Yr=!1,rn=null,yn=!1,Ln=null,Hi={onError:function(a){Yr=!0,rn=a}};function lo(a,l,v,y,S,T,O,Q,te){Yr=!1,rn=null,tn.apply(Hi,arguments)}function Xa(a,l,v,y,S,T,O,Q,te){if(lo.apply(this,arguments),Yr){if(Yr){var be=rn;Yr=!1,rn=null}else throw Error(r(198));yn||(yn=!0,Ln=be)}}function fi(a){var l=a,v=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(v=l.return),a=l.return;while(a)}return l.tag===3?v:null}function ca(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function Bs(a){if(fi(a)!==a)throw Error(r(188))}function ua(a){var l=a.alternate;if(!l){if(l=fi(a),l===null)throw Error(r(188));return l!==a?null:a}for(var v=a,y=l;;){var S=v.return;if(S===null)break;var T=S.alternate;if(T===null){if(y=S.return,y!==null){v=y;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===v)return Bs(S),a;if(T===y)return Bs(S),l;T=T.sibling}throw Error(r(188))}if(v.return!==y.return)v=S,y=T;else{for(var O=!1,Q=S.child;Q;){if(Q===v){O=!0,v=S,y=T;break}if(Q===y){O=!0,y=S,v=T;break}Q=Q.sibling}if(!O){for(Q=T.child;Q;){if(Q===v){O=!0,v=T,y=S;break}if(Q===y){O=!0,y=T,v=S;break}Q=Q.sibling}if(!O)throw Error(r(189))}}if(v.alternate!==y)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?a:l}function ja(a){return a=ua(a),a!==null?Za(a):null}function Za(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Za(a);if(l!==null)return l;a=a.sibling}return null}var Bl=t.unstable_scheduleCallback,Vl=t.unstable_cancelCallback,Ga=t.unstable_shouldYield,Gc=t.unstable_requestPaint,br=t.unstable_now,qc=t.unstable_getCurrentPriorityLevel,Vs=t.unstable_ImmediatePriority,Wl=t.unstable_UserBlockingPriority,da=t.unstable_NormalPriority,Qc=t.unstable_LowPriority,Ws=t.unstable_IdlePriority,qa=null,Oe=null;function Kc(a){if(Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(qa,a,void 0,(a.current.flags&128)===128)}catch{}}var ti=Math.clz32?Math.clz32:Yl,Ul=Math.log,Hl=Math.LN2;function Yl(a){return a>>>=0,a===0?32:31-(Ul(a)/Hl|0)|0}var Oo=64,Qa=4194304;function No(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function co(a,l){var v=a.pendingLanes;if(v===0)return 0;var y=0,S=a.suspendedLanes,T=a.pingedLanes,O=v&268435455;if(O!==0){var Q=O&~S;Q!==0?y=No(Q):(T&=O,T!==0&&(y=No(T)))}else O=v&~S,O!==0?y=No(O):T!==0&&(y=No(T));if(y===0)return 0;if(l!==0&&l!==y&&(l&S)===0&&(S=y&-y,T=l&-l,S>=T||S===16&&(T&4194240)!==0))return l;if((y&4)!==0&&(y|=v&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=y;0<l;)v=31-ti(l),S=1<<v,y|=a[v],l&=~S;return y}function Xl(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jc(a,l){for(var v=a.suspendedLanes,y=a.pingedLanes,S=a.expirationTimes,T=a.pendingLanes;0<T;){var O=31-ti(T),Q=1<<O,te=S[O];te===-1?((Q&v)===0||(Q&y)!==0)&&(S[O]=Xl(Q,l)):te<=l&&(a.expiredLanes|=Q),T&=~Q}}function Ka(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Us(){var a=Oo;return Oo<<=1,(Oo&4194240)===0&&(Oo=64),a}function ha(a){for(var l=[],v=0;31>v;v++)l.push(a);return l}function pa(a,l,v){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-ti(l),a[l]=v}function jl(a,l){var v=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<v;){var S=31-ti(v),T=1<<S;l[S]=0,y[S]=-1,a[S]=-1,v&=~T}}function fa(a,l){var v=a.entangledLanes|=l;for(a=a.entanglements;v;){var y=31-ti(v),S=1<<y;S&l|a[y]&l&&(a[y]|=l),v&=~S}}var qt=0;function uo(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Hs,Ja,Zl,Ys,Xs,es=!1,ga=[],Yi=null,Xi=null,ji=null,zo=new Map,va=new Map,Zi=[],eu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gl(a,l){switch(a){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":zo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(l.pointerId)}}function ho(a,l,v,y,S,T){return a===null||a.nativeEvent!==T?(a={blockedOn:l,domEventName:v,eventSystemFlags:y,nativeEvent:T,targetContainers:[S]},l!==null&&(l=Dn(l),l!==null&&Ja(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),a)}function tu(a,l,v,y,S){switch(l){case"focusin":return Yi=ho(Yi,a,l,v,y,S),!0;case"dragenter":return Xi=ho(Xi,a,l,v,y,S),!0;case"mouseover":return ji=ho(ji,a,l,v,y,S),!0;case"pointerover":var T=S.pointerId;return zo.set(T,ho(zo.get(T)||null,a,l,v,y,S)),!0;case"gotpointercapture":return T=S.pointerId,va.set(T,ho(va.get(T)||null,a,l,v,y,S)),!0}return!1}function ql(a){var l=vo(a.target);if(l!==null){var v=fi(l);if(v!==null){if(l=v.tag,l===13){if(l=ca(v),l!==null){a.blockedOn=l,Xs(a.priority,function(){Zl(v)});return}}else if(l===3&&v.stateNode.current.memoizedState.isDehydrated){a.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ts(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var v=ou(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(v===null){v=a.nativeEvent;var y=new v.constructor(v.type,v);Wt=y,v.target.dispatchEvent(y),Wt=null}else return l=Dn(v),l!==null&&Ja(l),a.blockedOn=v,!1;l.shift()}return!0}function Ql(a,l,v){ts(a)&&v.delete(l)}function ru(){es=!1,Yi!==null&&ts(Yi)&&(Yi=null),Xi!==null&&ts(Xi)&&(Xi=null),ji!==null&&ts(ji)&&(ji=null),zo.forEach(Ql),va.forEach(Ql)}function ir(a,l){a.blockedOn===l&&(a.blockedOn=null,es||(es=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ru)))}function Jt(a){function l(S){return ir(S,a)}if(0<ga.length){ir(ga[0],a);for(var v=1;v<ga.length;v++){var y=ga[v];y.blockedOn===a&&(y.blockedOn=null)}}for(Yi!==null&&ir(Yi,a),Xi!==null&&ir(Xi,a),ji!==null&&ir(ji,a),zo.forEach(l),va.forEach(l),v=0;v<Zi.length;v++)y=Zi[v],y.blockedOn===a&&(y.blockedOn=null);for(;0<Zi.length&&(v=Zi[0],v.blockedOn===null);)ql(v),v.blockedOn===null&&Zi.shift()}var js=A.ReactCurrentBatchConfig,nu=!0;function tf(a,l,v,y){var S=qt,T=js.transition;js.transition=null;try{qt=1,th(a,l,v,y)}finally{qt=S,js.transition=T}}function rf(a,l,v,y){var S=qt,T=js.transition;js.transition=null;try{qt=4,th(a,l,v,y)}finally{qt=S,js.transition=T}}function th(a,l,v,y){if(nu){var S=ou(a,l,v,y);if(S===null)yh(a,l,y,iu,v),Gl(a,y);else if(tu(S,a,l,v,y))y.stopPropagation();else if(Gl(a,y),l&4&&-1<eu.indexOf(a)){for(;S!==null;){var T=Dn(S);if(T!==null&&Hs(T),T=ou(a,l,v,y),T===null&&yh(a,l,y,iu,v),T===S)break;S=T}S!==null&&y.stopPropagation()}else yh(a,l,y,null,v)}}var iu=null;function ou(a,l,v,y){if(iu=null,a=Gt(y),a=vo(a),a!==null)if(l=fi(a),l===null)a=null;else if(v=l.tag,v===13){if(a=ca(l),a!==null)return a;a=null}else if(v===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return iu=a,null}function U0(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qc()){case Vs:return 1;case Wl:return 4;case da:case Qc:return 16;case Ws:return 536870912;default:return 16}default:return 16}}var Dr=null,Kl=null,po=null;function rh(){if(po)return po;var a,l=Kl,v=l.length,y,S="value"in Dr?Dr.value:Dr.textContent,T=S.length;for(a=0;a<v&&l[a]===S[a];a++);var O=v-a;for(y=1;y<=O&&l[v-y]===S[T-y];y++);return po=S.slice(a,1<y?1-y:void 0)}function Zs(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Wn(){return!0}function nh(){return!1}function ri(a){function l(v,y,S,T,O){this._reactName=v,this._targetInst=S,this.type=y,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var Q in a)a.hasOwnProperty(Q)&&(v=a[Q],this[Q]=v?v(T):T[Q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Wn:nh,this.isPropagationStopped=nh,this}return pe(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),l}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},au=ri(rs),Gs=pe({},rs,{view:0,detail:0}),H0=ri(Gs),Un,ih,Pn,su=pe({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ch,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Pn&&(Pn&&a.type==="mousemove"?(Un=a.screenX-Pn.screenX,ih=a.screenY-Pn.screenY):ih=Un=0,Pn=a),Un)},movementY:function(a){return"movementY"in a?a.movementY:ih}}),oh=ri(su),ma=pe({},su,{dataTransfer:0}),lu=ri(ma),ah=pe({},Gs,{relatedTarget:0}),Cr=ri(ah),ya=pe({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),sh=ri(ya),nf=pe({},rs,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),lh=ri(nf),of=pe({},rs,{data:0}),Y0=ri(of),af={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qs(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=cu[a])?!!l[a]:!1}function ch(){return qs}var j0=pe({},Gs,{key:function(a){if(a.key){var l=af[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Zs(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?X0[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ch,charCode:function(a){return a.type==="keypress"?Zs(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Zs(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Z0=ri(j0),uh=pe({},su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uu=ri(uh),G0=pe({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ch}),sf=ri(G0),dh=pe({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),hh=ri(dh),lf=pe({},su,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),q0=ri(lf),gi=[9,13,27,32],Jl=u&&"CompositionEvent"in window,$o=null;u&&"documentMode"in document&&($o=document.documentMode);var Q0=u&&"TextEvent"in window&&!$o,ph=u&&(!Jl||$o&&8<$o&&11>=$o),K0=" ",J0=!1;function e1(a,l){switch(a){case"keyup":return gi.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Qs=!1;function Ks(a,l){switch(a){case"compositionend":return t1(l);case"keypress":return l.which!==32?null:(J0=!0,K0);case"textInput":return a=l.data,a===K0&&J0?null:a;default:return null}}function cf(a,l){if(Qs)return a==="compositionend"||!Jl&&e1(a,l)?(a=rh(),po=Kl=Dr=null,Qs=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ph&&l.locale!=="ko"?null:l.data;default:return null}}var uf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function du(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!uf[a.type]:l==="textarea"}function fh(a,l,v,y){Ur(y),l=xu(l,"onChange"),0<l.length&&(v=new au("onChange","change",null,v,y),a.push({event:v,listeners:l}))}var Mi=null,ba=null;function df(a){l1(a,0)}function hu(a){var l=Et(a);if(Je(l))return a}function hf(a,l){if(a==="change")return l}var ns=!1;if(u){var vi;if(u){var pu="oninput"in document;if(!pu){var r1=document.createElement("div");r1.setAttribute("oninput","return;"),pu=typeof r1.oninput=="function"}vi=pu}else vi=!1;ns=vi&&(!document.documentMode||9<document.documentMode)}function n1(){Mi&&(Mi.detachEvent("onpropertychange",i1),ba=Mi=null)}function i1(a){if(a.propertyName==="value"&&hu(ba)){var l=[];fh(l,ba,a,Gt(a)),kt(df,l)}}function pf(a,l,v){a==="focusin"?(n1(),Mi=l,ba=v,Mi.attachEvent("onpropertychange",i1)):a==="focusout"&&n1()}function ff(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return hu(ba)}function Js(a,l){if(a==="click")return hu(l)}function oe(a,l){if(a==="input"||a==="change")return hu(l)}function _e(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var me=typeof Object.is=="function"?Object.is:_e;function Ye(a,l){if(me(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var v=Object.keys(a),y=Object.keys(l);if(v.length!==y.length)return!1;for(y=0;y<v.length;y++){var S=v[y];if(!d.call(l,S)||!me(a[S],l[S]))return!1}return!0}function xt(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function or(a,l){var v=xt(a);a=0;for(var y;v;){if(v.nodeType===3){if(y=a+v.textContent.length,a<=l&&y>=l)return{node:v,offset:l-a};a=y}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=xt(v)}}function qr(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?qr(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function gr(){for(var a=window,l=Qe();l instanceof a.HTMLIFrameElement;){try{var v=typeof l.contentWindow.location.href=="string"}catch{v=!1}if(v)a=l.contentWindow;else break;l=Qe(a.document)}return l}function ec(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function gf(a){var l=gr(),v=a.focusedElem,y=a.selectionRange;if(l!==v&&v&&v.ownerDocument&&qr(v.ownerDocument.documentElement,v)){if(y!==null&&ec(v)){if(l=y.start,a=y.end,a===void 0&&(a=l),"selectionStart"in v)v.selectionStart=l,v.selectionEnd=Math.min(a,v.value.length);else if(a=(l=v.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var S=v.textContent.length,T=Math.min(y.start,S);y=y.end===void 0?T:Math.min(y.end,S),!a.extend&&T>y&&(S=y,y=T,T=S),S=or(v,T);var O=or(v,y);S&&O&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),a.removeAllRanges(),T>y?(a.addRange(l),a.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),a.addRange(l)))}}for(l=[],a=v;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<l.length;v++)a=l[v],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Ti=u&&"documentMode"in document&&11>=document.documentMode,Bo=null,gh=null,fo=null,el=!1;function tc(a,l,v){var y=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;el||Bo==null||Bo!==Qe(y)||(y=Bo,"selectionStart"in y&&ec(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),fo&&Ye(fo,y)||(fo=y,y=xu(gh,"onSelect"),0<y.length&&(l=new au("onSelect","select",null,l,v),a.push({event:l,listeners:y}),l.target=Bo)))}function ar(a,l){var v={};return v[a.toLowerCase()]=l.toLowerCase(),v["Webkit"+a]="webkit"+l,v["Moz"+a]="moz"+l,v}var tl={animationend:ar("Animation","AnimationEnd"),animationiteration:ar("Animation","AnimationIteration"),animationstart:ar("Animation","AnimationStart"),transitionend:ar("Transition","TransitionEnd")},fu={},rc={};u&&(rc=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function gu(a){if(fu[a])return fu[a];if(!tl[a])return a;var l=tl[a],v;for(v in l)if(l.hasOwnProperty(v)&&v in rc)return fu[a]=l[v];return a}var o1=gu("animationend"),a1=gu("animationiteration"),nc=gu("animationstart"),Vo=gu("transitionend"),ic=new Map,vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(a,l){ic.set(a,l),o(l,[a])}for(var vu=0;vu<vh.length;vu++){var mu=vh[vu],yu=mu.toLowerCase(),s1=mu[0].toUpperCase()+mu.slice(1);Gi(yu,"on"+s1)}Gi(o1,"onAnimationEnd"),Gi(a1,"onAnimationIteration"),Gi(nc,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(Vo,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),is=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function oc(a,l,v){var y=a.type||"unknown-event";a.currentTarget=v,Xa(y,l,void 0,a),a.currentTarget=null}function l1(a,l){l=(l&4)!==0;for(var v=0;v<a.length;v++){var y=a[v],S=y.event;y=y.listeners;e:{var T=void 0;if(l)for(var O=y.length-1;0<=O;O--){var Q=y[O],te=Q.instance,be=Q.currentTarget;if(Q=Q.listener,te!==T&&S.isPropagationStopped())break e;oc(S,Q,be),T=te}else for(O=0;O<y.length;O++){if(Q=y[O],te=Q.instance,be=Q.currentTarget,Q=Q.listener,te!==T&&S.isPropagationStopped())break e;oc(S,Q,be),T=te}}}if(yn)throw a=Ln,yn=!1,Ln=null,a}function Mr(a,l){var v=l[_u];v===void 0&&(v=l[_u]=new Set);var y=a+"__bubble";v.has(y)||(bu(l,a,2,!1),v.add(y))}function mh(a,l,v){var y=0;l&&(y|=4),bu(v,a,y,l)}var os="_reactListening"+Math.random().toString(36).slice(2);function xa(a){if(!a[os]){a[os]=!0,n.forEach(function(v){v!=="selectionchange"&&(is.has(v)||mh(v,!1,a),mh(v,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[os]||(l[os]=!0,mh("selectionchange",!1,l))}}function bu(a,l,v,y){switch(U0(l)){case 1:var S=tf;break;case 4:S=rf;break;default:S=th}v=S.bind(null,l,v,a),S=void 0,!wr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),y?S!==void 0?a.addEventListener(l,v,{capture:!0,passive:S}):a.addEventListener(l,v,!0):S!==void 0?a.addEventListener(l,v,{passive:S}):a.addEventListener(l,v,!1)}function yh(a,l,v,y,S){var T=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var Q=y.stateNode.containerInfo;if(Q===S||Q.nodeType===8&&Q.parentNode===S)break;if(O===4)for(O=y.return;O!==null;){var te=O.tag;if((te===3||te===4)&&(te=O.stateNode.containerInfo,te===S||te.nodeType===8&&te.parentNode===S))return;O=O.return}for(;Q!==null;){if(O=vo(Q),O===null)return;if(te=O.tag,te===5||te===6){y=T=O;continue e}Q=Q.parentNode}}y=y.return}kt(function(){var be=T,Le=Gt(v),Re=[];e:{var Ie=ic.get(a);if(Ie!==void 0){var Xe=au,Ke=a;switch(a){case"keypress":if(Zs(v)===0)break e;case"keydown":case"keyup":Xe=Z0;break;case"focusin":Ke="focus",Xe=Cr;break;case"focusout":Ke="blur",Xe=Cr;break;case"beforeblur":case"afterblur":Xe=Cr;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=sf;break;case o1:case a1:case nc:Xe=sh;break;case Vo:Xe=hh;break;case"scroll":Xe=H0;break;case"wheel":Xe=q0;break;case"copy":case"cut":case"paste":Xe=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=uu}var et=(l&4)!==0,jr=!et&&a==="scroll",he=et?Ie!==null?Ie+"Capture":null:Ie;et=[];for(var ie=be,ge;ie!==null;){ge=ie;var ze=ge.stateNode;if(ge.tag===5&&ze!==null&&(ge=ze,he!==null&&(ze=Ar(ie,he),ze!=null&&et.push(rl(ie,ze,ge)))),jr)break;ie=ie.return}0<et.length&&(Ie=new Xe(Ie,Ke,null,v,Le),Re.push({event:Ie,listeners:et}))}}if((l&7)===0){e:{if(Ie=a==="mouseover"||a==="pointerover",Xe=a==="mouseout"||a==="pointerout",Ie&&v!==Wt&&(Ke=v.relatedTarget||v.fromElement)&&(vo(Ke)||Ke[mi]))break e;if((Xe||Ie)&&(Ie=Le.window===Le?Le:(Ie=Le.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Xe?(Ke=v.relatedTarget||v.toElement,Xe=be,Ke=Ke?vo(Ke):null,Ke!==null&&(jr=fi(Ke),Ke!==jr||Ke.tag!==5&&Ke.tag!==6)&&(Ke=null)):(Xe=null,Ke=be),Xe!==Ke)){if(et=oh,ze="onMouseLeave",he="onMouseEnter",ie="mouse",(a==="pointerout"||a==="pointerover")&&(et=uu,ze="onPointerLeave",he="onPointerEnter",ie="pointer"),jr=Xe==null?Ie:Et(Xe),ge=Ke==null?Ie:Et(Ke),Ie=new et(ze,ie+"leave",Xe,v,Le),Ie.target=jr,Ie.relatedTarget=ge,ze=null,vo(Le)===be&&(et=new et(he,ie+"enter",Ke,v,Le),et.target=ge,et.relatedTarget=jr,ze=et),jr=ze,Xe&&Ke)t:{for(et=Xe,he=Ke,ie=0,ge=et;ge;ge=nl(ge))ie++;for(ge=0,ze=he;ze;ze=nl(ze))ge++;for(;0<ie-ge;)et=nl(et),ie--;for(;0<ge-ie;)he=nl(he),ge--;for(;ie--;){if(et===he||he!==null&&et===he.alternate)break t;et=nl(et),he=nl(he)}et=null}else et=null;Xe!==null&&Qr(Re,Ie,Xe,et,!1),Ke!==null&&jr!==null&&Qr(Re,jr,Ke,et,!0)}}e:{if(Ie=be?Et(be):window,Xe=Ie.nodeName&&Ie.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Ie.type==="file")var it=hf;else if(du(Ie))if(ns)it=oe;else{it=ff;var dt=pf}else(Xe=Ie.nodeName)&&Xe.toLowerCase()==="input"&&(Ie.type==="checkbox"||Ie.type==="radio")&&(it=Js);if(it&&(it=it(a,be))){fh(Re,it,v,Le);break e}dt&&dt(a,Ie,be),a==="focusout"&&(dt=Ie._wrapperState)&&dt.controlled&&Ie.type==="number"&&Kt(Ie,"number",Ie.value)}switch(dt=be?Et(be):window,a){case"focusin":(du(dt)||dt.contentEditable==="true")&&(Bo=dt,gh=be,fo=null);break;case"focusout":fo=gh=Bo=null;break;case"mousedown":el=!0;break;case"contextmenu":case"mouseup":case"dragend":el=!1,tc(Re,v,Le);break;case"selectionchange":if(Ti)break;case"keydown":case"keyup":tc(Re,v,Le)}var lt;if(Jl)e:{switch(a){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else Qs?e1(a,v)&&(vt="onCompositionEnd"):a==="keydown"&&v.keyCode===229&&(vt="onCompositionStart");vt&&(ph&&v.locale!=="ko"&&(Qs||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Qs&&(lt=rh()):(Dr=Le,Kl="value"in Dr?Dr.value:Dr.textContent,Qs=!0)),dt=xu(be,vt),0<dt.length&&(vt=new Y0(vt,a,null,v,Le),Re.push({event:vt,listeners:dt}),lt?vt.data=lt:(lt=t1(v),lt!==null&&(vt.data=lt)))),(lt=Q0?Ks(a,v):cf(a,v))&&(be=xu(be,"onBeforeInput"),0<be.length&&(Le=new Y0("onBeforeInput","beforeinput",null,v,Le),Re.push({event:Le,listeners:be}),Le.data=lt))}l1(Re,l)})}function rl(a,l,v){return{instance:a,listener:l,currentTarget:v}}function xu(a,l){for(var v=l+"Capture",y=[];a!==null;){var S=a,T=S.stateNode;S.tag===5&&T!==null&&(S=T,T=Ar(a,v),T!=null&&y.unshift(rl(a,T,S)),T=Ar(a,l),T!=null&&y.push(rl(a,T,S))),a=a.return}return y}function nl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Qr(a,l,v,y,S){for(var T=l._reactName,O=[];v!==null&&v!==y;){var Q=v,te=Q.alternate,be=Q.stateNode;if(te!==null&&te===y)break;Q.tag===5&&be!==null&&(Q=be,S?(te=Ar(v,T),te!=null&&O.unshift(rl(v,te,Q))):S||(te=Ar(v,T),te!=null&&O.push(rl(v,te,Q)))),v=v.return}O.length!==0&&a.push({event:l,listeners:O})}var An=/\r\n?/g,vf=/\u0000|\uFFFD/g;function c1(a){return(typeof a=="string"?a:""+a).replace(An,`
`).replace(vf,"")}function ac(a,l,v){if(l=c1(l),c1(a)!==l&&v)throw Error(r(425))}function wu(){}var sc=null,as=null;function lc(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var wa=typeof setTimeout=="function"?setTimeout:void 0,cc=typeof clearTimeout=="function"?clearTimeout:void 0,il=typeof Promise=="function"?Promise:void 0,Cu=typeof queueMicrotask=="function"?queueMicrotask:typeof il<"u"?function(a){return il.resolve(null).then(a).catch(ol)}:wa;function ol(a){setTimeout(function(){throw a})}function bh(a,l){var v=l,y=0;do{var S=v.nextSibling;if(a.removeChild(v),S&&S.nodeType===8)if(v=S.data,v==="/$"){if(y===0){a.removeChild(S),Jt(l);return}y--}else v!=="$"&&v!=="$?"&&v!=="$!"||y++;v=S}while(v);Jt(l)}function Ca(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function u1(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var v=a.data;if(v==="$"||v==="$!"||v==="$?"){if(l===0)return a;l--}else v==="/$"&&l++}a=a.previousSibling}return null}var al=Math.random().toString(36).slice(2),go="__reactFiber$"+al,_a="__reactProps$"+al,mi="__reactContainer$"+al,_u="__reactEvents$"+al,N="__reactListeners$"+al,sl="__reactHandles$"+al;function vo(a){var l=a[go];if(l)return l;for(var v=a.parentNode;v;){if(l=v[mi]||v[go]){if(v=l.alternate,l.child!==null||v!==null&&v.child!==null)for(a=u1(a);a!==null;){if(v=a[go])return v;a=u1(a)}return l}a=v,v=a.parentNode}return null}function Dn(a){return a=a[go]||a[mi],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Et(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(r(33))}function Su(a){return a[_a]||null}var xh=[],ll=-1;function ni(a){return{current:a}}function Tr(a){0>ll||(a.current=xh[ll],xh[ll]=null,ll--)}function _r(a,l){ll++,xh[ll]=a.current,a.current=l}var Sa={},Fn=ni(Sa),ii=ni(!1),Hn=Sa;function cl(a,l){var v=a.type.contextTypes;if(!v)return Sa;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var S={},T;for(T in v)S[T]=l[T];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=S),S}function oi(a){return a=a.childContextTypes,a!=null}function ku(){Tr(ii),Tr(Fn)}function d1(a,l,v){if(Fn.current!==Sa)throw Error(r(168));_r(Fn,l),_r(ii,v)}function h1(a,l,v){var y=a.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return v;y=y.getChildContext();for(var S in y)if(!(S in l))throw Error(r(108,Fe(a)||"Unknown",S));return pe({},v,y)}function Ei(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Sa,Hn=Fn.current,_r(Fn,a),_r(ii,ii.current),!0}function p1(a,l,v){var y=a.stateNode;if(!y)throw Error(r(169));v?(a=h1(a,l,Hn),y.__reactInternalMemoizedMergedChildContext=a,Tr(ii),Tr(Fn),_r(Fn,a)):Tr(ii),_r(ii,v)}var Uo=null,Mu=!1,wh=!1;function f1(a){Uo===null?Uo=[a]:Uo.push(a)}function ss(a){Mu=!0,f1(a)}function ka(){if(!wh&&Uo!==null){wh=!0;var a=0,l=qt;try{var v=Uo;for(qt=1;a<v.length;a++){var y=v[a];do y=y(!0);while(y!==null)}Uo=null,Mu=!1}catch(S){throw Uo!==null&&(Uo=Uo.slice(a+1)),Bl(Vs,ka),S}finally{qt=l,wh=!1}}return null}var ul=[],Rn=0,Tu=null,Eu=0,Ii=[],Li=0,ls=null,mo=1,yo="";function cs(a,l){ul[Rn++]=Eu,ul[Rn++]=Tu,Tu=a,Eu=l}function g1(a,l,v){Ii[Li++]=mo,Ii[Li++]=yo,Ii[Li++]=ls,ls=a;var y=mo;a=yo;var S=32-ti(y)-1;y&=~(1<<S),v+=1;var T=32-ti(l)+S;if(30<T){var O=S-S%5;T=(y&(1<<O)-1).toString(32),y>>=O,S-=O,mo=1<<32-ti(l)+S|v<<S|y,yo=T+a}else mo=1<<T|v<<S|y,yo=a}function uc(a){a.return!==null&&(cs(a,1),g1(a,1,0))}function us(a){for(;a===Tu;)Tu=ul[--Rn],ul[Rn]=null,Eu=ul[--Rn],ul[Rn]=null;for(;a===ls;)ls=Ii[--Li],Ii[Li]=null,yo=Ii[--Li],Ii[Li]=null,mo=Ii[--Li],Ii[Li]=null}var On=null,yi=null,Er=!1,qi=null;function bo(a,l){var v=Ni(5,null,null,0);v.elementType="DELETED",v.stateNode=l,v.return=a,l=a.deletions,l===null?(a.deletions=[v],a.flags|=16):l.push(v)}function Iu(a,l){switch(a.tag){case 5:var v=a.type;return l=l.nodeType!==1||v.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,On=a,yi=Ca(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,On=a,yi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(v=ls!==null?{id:mo,overflow:yo}:null,a.memoizedState={dehydrated:l,treeContext:v,retryLane:1073741824},v=Ni(18,null,null,0),v.stateNode=l,v.return=a,a.child=v,On=a,yi=null,!0):!1;default:return!1}}function Ho(a){return(a.mode&1)!==0&&(a.flags&128)===0}function ai(a){if(Er){var l=yi;if(l){var v=l;if(!Iu(a,l)){if(Ho(a))throw Error(r(418));l=Ca(v.nextSibling);var y=On;l&&Iu(a,l)?bo(y,v):(a.flags=a.flags&-4097|2,Er=!1,On=a)}}else{if(Ho(a))throw Error(r(418));a.flags=a.flags&-4097|2,Er=!1,On=a}}}function v1(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;On=a}function dc(a){if(a!==On)return!1;if(!Er)return v1(a),Er=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!lc(a.type,a.memoizedProps)),l&&(l=yi)){if(Ho(a))throw Ch(),Error(r(418));for(;l;)bo(a,l),l=Ca(l.nextSibling)}if(v1(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var v=a.data;if(v==="/$"){if(l===0){yi=Ca(a.nextSibling);break e}l--}else v!=="$"&&v!=="$!"&&v!=="$?"||l++}a=a.nextSibling}yi=null}}else yi=On?Ca(a.stateNode.nextSibling):null;return!0}function Ch(){for(var a=yi;a;)a=Ca(a.nextSibling)}function xo(){yi=On=null,Er=!1}function wo(a){qi===null?qi=[a]:qi.push(a)}var m1=A.ReactCurrentBatchConfig;function hc(a,l,v){if(a=v.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(r(309));var y=v.stateNode}if(!y)throw Error(r(147,a));var S=y,T=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(O){var Q=S.refs;O===null?delete Q[T]:Q[T]=O},l._stringRef=T,l)}if(typeof a!="string")throw Error(r(284));if(!v._owner)throw Error(r(290,a))}return a}function ds(a,l){throw a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function y1(a){var l=a._init;return l(a._payload)}function _h(a){function l(he,ie){if(a){var ge=he.deletions;ge===null?(he.deletions=[ie],he.flags|=16):ge.push(ie)}}function v(he,ie){if(!a)return null;for(;ie!==null;)l(he,ie),ie=ie.sibling;return null}function y(he,ie){for(he=new Map;ie!==null;)ie.key!==null?he.set(ie.key,ie):he.set(ie.index,ie),ie=ie.sibling;return he}function S(he,ie){return he=no(he,ie),he.index=0,he.sibling=null,he}function T(he,ie,ge){return he.index=ge,a?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ie?(he.flags|=2,ie):ge):(he.flags|=2,ie)):(he.flags|=1048576,ie)}function O(he){return a&&he.alternate===null&&(he.flags|=2),he}function Q(he,ie,ge,ze){return ie===null||ie.tag!==6?(ie=c0(ge,he.mode,ze),ie.return=he,ie):(ie=S(ie,ge),ie.return=he,ie)}function te(he,ie,ge,ze){var it=ge.type;return it===D?Le(he,ie,ge.props.children,ze,ge.key):ie!==null&&(ie.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===ce&&y1(it)===ie.type)?(ze=S(ie,ge.props),ze.ref=hc(he,ie,ge),ze.return=he,ze):(ze=ud(ge.type,ge.key,ge.props,null,he.mode,ze),ze.ref=hc(he,ie,ge),ze.return=he,ze)}function be(he,ie,ge,ze){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ge.containerInfo||ie.stateNode.implementation!==ge.implementation?(ie=u0(ge,he.mode,ze),ie.return=he,ie):(ie=S(ie,ge.children||[]),ie.return=he,ie)}function Le(he,ie,ge,ze,it){return ie===null||ie.tag!==7?(ie=Cs(ge,he.mode,ze,it),ie.return=he,ie):(ie=S(ie,ge),ie.return=he,ie)}function Re(he,ie,ge){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=c0(""+ie,he.mode,ge),ie.return=he,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:return ge=ud(ie.type,ie.key,ie.props,null,he.mode,ge),ge.ref=hc(he,null,ie),ge.return=he,ge;case W:return ie=u0(ie,he.mode,ge),ie.return=he,ie;case ce:var ze=ie._init;return Re(he,ze(ie._payload),ge)}if(Mt(ie)||ve(ie))return ie=Cs(ie,he.mode,ge,null),ie.return=he,ie;ds(he,ie)}return null}function Ie(he,ie,ge,ze){var it=ie!==null?ie.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return it!==null?null:Q(he,ie,""+ge,ze);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:return ge.key===it?te(he,ie,ge,ze):null;case W:return ge.key===it?be(he,ie,ge,ze):null;case ce:return it=ge._init,Ie(he,ie,it(ge._payload),ze)}if(Mt(ge)||ve(ge))return it!==null?null:Le(he,ie,ge,ze,null);ds(he,ge)}return null}function Xe(he,ie,ge,ze,it){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return he=he.get(ge)||null,Q(ie,he,""+ze,it);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case P:return he=he.get(ze.key===null?ge:ze.key)||null,te(ie,he,ze,it);case W:return he=he.get(ze.key===null?ge:ze.key)||null,be(ie,he,ze,it);case ce:var dt=ze._init;return Xe(he,ie,ge,dt(ze._payload),it)}if(Mt(ze)||ve(ze))return he=he.get(ge)||null,Le(ie,he,ze,it,null);ds(ie,ze)}return null}function Ke(he,ie,ge,ze){for(var it=null,dt=null,lt=ie,vt=ie=0,dn=null;lt!==null&&vt<ge.length;vt++){lt.index>vt?(dn=lt,lt=null):dn=lt.sibling;var sr=Ie(he,lt,ge[vt],ze);if(sr===null){lt===null&&(lt=dn);break}a&&lt&&sr.alternate===null&&l(he,lt),ie=T(sr,ie,vt),dt===null?it=sr:dt.sibling=sr,dt=sr,lt=dn}if(vt===ge.length)return v(he,lt),Er&&cs(he,vt),it;if(lt===null){for(;vt<ge.length;vt++)lt=Re(he,ge[vt],ze),lt!==null&&(ie=T(lt,ie,vt),dt===null?it=lt:dt.sibling=lt,dt=lt);return Er&&cs(he,vt),it}for(lt=y(he,lt);vt<ge.length;vt++)dn=Xe(lt,he,vt,ge[vt],ze),dn!==null&&(a&&dn.alternate!==null&&lt.delete(dn.key===null?vt:dn.key),ie=T(dn,ie,vt),dt===null?it=dn:dt.sibling=dn,dt=dn);return a&&lt.forEach(function(Na){return l(he,Na)}),Er&&cs(he,vt),it}function et(he,ie,ge,ze){var it=ve(ge);if(typeof it!="function")throw Error(r(150));if(ge=it.call(ge),ge==null)throw Error(r(151));for(var dt=it=null,lt=ie,vt=ie=0,dn=null,sr=ge.next();lt!==null&&!sr.done;vt++,sr=ge.next()){lt.index>vt?(dn=lt,lt=null):dn=lt.sibling;var Na=Ie(he,lt,sr.value,ze);if(Na===null){lt===null&&(lt=dn);break}a&&lt&&Na.alternate===null&&l(he,lt),ie=T(Na,ie,vt),dt===null?it=Na:dt.sibling=Na,dt=Na,lt=dn}if(sr.done)return v(he,lt),Er&&cs(he,vt),it;if(lt===null){for(;!sr.done;vt++,sr=ge.next())sr=Re(he,sr.value,ze),sr!==null&&(ie=T(sr,ie,vt),dt===null?it=sr:dt.sibling=sr,dt=sr);return Er&&cs(he,vt),it}for(lt=y(he,lt);!sr.done;vt++,sr=ge.next())sr=Xe(lt,he,vt,sr.value,ze),sr!==null&&(a&&sr.alternate!==null&&lt.delete(sr.key===null?vt:sr.key),ie=T(sr,ie,vt),dt===null?it=sr:dt.sibling=sr,dt=sr);return a&&lt.forEach(function(Nf){return l(he,Nf)}),Er&&cs(he,vt),it}function jr(he,ie,ge,ze){if(typeof ge=="object"&&ge!==null&&ge.type===D&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:e:{for(var it=ge.key,dt=ie;dt!==null;){if(dt.key===it){if(it=ge.type,it===D){if(dt.tag===7){v(he,dt.sibling),ie=S(dt,ge.props.children),ie.return=he,he=ie;break e}}else if(dt.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===ce&&y1(it)===dt.type){v(he,dt.sibling),ie=S(dt,ge.props),ie.ref=hc(he,dt,ge),ie.return=he,he=ie;break e}v(he,dt);break}else l(he,dt);dt=dt.sibling}ge.type===D?(ie=Cs(ge.props.children,he.mode,ze,ge.key),ie.return=he,he=ie):(ze=ud(ge.type,ge.key,ge.props,null,he.mode,ze),ze.ref=hc(he,ie,ge),ze.return=he,he=ze)}return O(he);case W:e:{for(dt=ge.key;ie!==null;){if(ie.key===dt)if(ie.tag===4&&ie.stateNode.containerInfo===ge.containerInfo&&ie.stateNode.implementation===ge.implementation){v(he,ie.sibling),ie=S(ie,ge.children||[]),ie.return=he,he=ie;break e}else{v(he,ie);break}else l(he,ie);ie=ie.sibling}ie=u0(ge,he.mode,ze),ie.return=he,he=ie}return O(he);case ce:return dt=ge._init,jr(he,ie,dt(ge._payload),ze)}if(Mt(ge))return Ke(he,ie,ge,ze);if(ve(ge))return et(he,ie,ge,ze);ds(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ie!==null&&ie.tag===6?(v(he,ie.sibling),ie=S(ie,ge),ie.return=he,he=ie):(v(he,ie),ie=c0(ge,he.mode,ze),ie.return=he,he=ie),O(he)):v(he,ie)}return jr}var Wr=_h(!0),Lu=_h(!1),pc=ni(null),bi=null,Ma=null,dl=null;function Yo(){dl=Ma=bi=null}function Pu(a){var l=pc.current;Tr(pc),a._currentValue=l}function bn(a,l,v){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===v)break;a=a.return}}function Ta(a,l){bi=a,dl=Ma=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Xn=!0),a.firstContext=null)}function Pi(a){var l=a._currentValue;if(dl!==a)if(a={context:a,memoizedValue:l,next:null},Ma===null){if(bi===null)throw Error(r(308));Ma=a,bi.dependencies={lanes:0,firstContext:a}}else Ma=Ma.next=a;return l}var hs=null;function Sh(a){hs===null?hs=[a]:hs.push(a)}function Au(a,l,v,y){var S=l.interleaved;return S===null?(v.next=v,Sh(l)):(v.next=S.next,S.next=v),l.interleaved=v,Xo(a,y)}function Xo(a,l){a.lanes|=l;var v=a.alternate;for(v!==null&&(v.lanes|=l),v=a,a=a.return;a!==null;)a.childLanes|=l,v=a.alternate,v!==null&&(v.childLanes|=l),v=a,a=a.return;return v.tag===3?v.stateNode:null}var Ai=!1;function Du(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b1(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function jo(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Di(a,l,v){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(er&2)!==0){var S=y.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),y.pending=l,Xo(a,v)}return S=y.interleaved,S===null?(l.next=l,Sh(y)):(l.next=S.next,S.next=l),y.interleaved=l,Xo(a,v)}function Fu(a,l,v){if(l=l.updateQueue,l!==null&&(l=l.shared,(v&4194240)!==0)){var y=l.lanes;y&=a.pendingLanes,v|=y,l.lanes=v,fa(a,v)}}function x1(a,l){var v=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,v===y)){var S=null,T=null;if(v=v.firstBaseUpdate,v!==null){do{var O={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};T===null?S=T=O:T=T.next=O,v=v.next}while(v!==null);T===null?S=T=l:T=T.next=l}else S=T=l;v={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:y.shared,effects:y.effects},a.updateQueue=v;return}a=v.lastBaseUpdate,a===null?v.firstBaseUpdate=l:a.next=l,v.lastBaseUpdate=l}function hl(a,l,v,y){var S=a.updateQueue;Ai=!1;var T=S.firstBaseUpdate,O=S.lastBaseUpdate,Q=S.shared.pending;if(Q!==null){S.shared.pending=null;var te=Q,be=te.next;te.next=null,O===null?T=be:O.next=be,O=te;var Le=a.alternate;Le!==null&&(Le=Le.updateQueue,Q=Le.lastBaseUpdate,Q!==O&&(Q===null?Le.firstBaseUpdate=be:Q.next=be,Le.lastBaseUpdate=te))}if(T!==null){var Re=S.baseState;O=0,Le=be=te=null,Q=T;do{var Ie=Q.lane,Xe=Q.eventTime;if((y&Ie)===Ie){Le!==null&&(Le=Le.next={eventTime:Xe,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Ke=a,et=Q;switch(Ie=l,Xe=v,et.tag){case 1:if(Ke=et.payload,typeof Ke=="function"){Re=Ke.call(Xe,Re,Ie);break e}Re=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=et.payload,Ie=typeof Ke=="function"?Ke.call(Xe,Re,Ie):Ke,Ie==null)break e;Re=pe({},Re,Ie);break e;case 2:Ai=!0}}Q.callback!==null&&Q.lane!==0&&(a.flags|=64,Ie=S.effects,Ie===null?S.effects=[Q]:Ie.push(Q))}else Xe={eventTime:Xe,lane:Ie,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Le===null?(be=Le=Xe,te=Re):Le=Le.next=Xe,O|=Ie;if(Q=Q.next,Q===null){if(Q=S.shared.pending,Q===null)break;Ie=Q,Q=Ie.next,Ie.next=null,S.lastBaseUpdate=Ie,S.shared.pending=null}}while(!0);if(Le===null&&(te=Re),S.baseState=te,S.firstBaseUpdate=be,S.lastBaseUpdate=Le,l=S.shared.interleaved,l!==null){S=l;do O|=S.lane,S=S.next;while(S!==l)}else T===null&&(S.shared.lanes=0);Aa|=O,a.lanes=O,a.memoizedState=Re}}function kh(a,l,v){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var y=a[l],S=y.callback;if(S!==null){if(y.callback=null,y=v,typeof S!="function")throw Error(r(191,S));S.call(y)}}}var fc={},Co=ni(fc),gc=ni(fc),pl=ni(fc);function Zo(a){if(a===fc)throw Error(r(174));return a}function Mh(a,l){switch(_r(pl,l),_r(gc,a),_r(Co,fc),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Zt(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Zt(l,a)}Tr(Co),_r(Co,l)}function Ea(){Tr(Co),Tr(gc),Tr(pl)}function Th(a){Zo(pl.current);var l=Zo(Co.current),v=Zt(l,a.type);l!==v&&(_r(gc,a),_r(Co,v))}function Ru(a){gc.current===a&&(Tr(Co),Tr(gc))}var Fr=ni(0);function ps(a){for(var l=a;l!==null;){if(l.tag===13){var v=l.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Eh=[];function Ou(){for(var a=0;a<Eh.length;a++)Eh[a]._workInProgressVersionPrimary=null;Eh.length=0}var vc=A.ReactCurrentDispatcher,Ih=A.ReactCurrentBatchConfig,Ia=0,Nr=null,Xr=null,nn=null,fl=!1,mc=!1,fs=0,Rt=0;function Nn(){throw Error(r(321))}function Lh(a,l){if(l===null)return!1;for(var v=0;v<l.length&&v<a.length;v++)if(!me(a[v],l[v]))return!1;return!0}function gs(a,l,v,y,S,T){if(Ia=T,Nr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,vc.current=a===null||a.memoizedState===null?yf:Uu,a=v(y,S),mc){T=0;do{if(mc=!1,fs=0,25<=T)throw Error(r(301));T+=1,nn=Xr=null,l.updateQueue=null,vc.current=yl,a=v(y,S)}while(mc)}if(vc.current=Wu,l=Xr!==null&&Xr.next!==null,Ia=0,nn=Xr=Nr=null,fl=!1,l)throw Error(r(300));return a}function Nu(){var a=fs!==0;return fs=0,a}function _o(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Nr.memoizedState=nn=a:nn=nn.next=a,nn}function Fi(){if(Xr===null){var a=Nr.alternate;a=a!==null?a.memoizedState:null}else a=Xr.next;var l=nn===null?Nr.memoizedState:nn.next;if(l!==null)nn=l,Xr=a;else{if(a===null)throw Error(r(310));Xr=a,a={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},nn===null?Nr.memoizedState=nn=a:nn=nn.next=a}return nn}function zn(a,l){return typeof l=="function"?l(a):l}function Ph(a){var l=Fi(),v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=a;var y=Xr,S=y.baseQueue,T=v.pending;if(T!==null){if(S!==null){var O=S.next;S.next=T.next,T.next=O}y.baseQueue=S=T,v.pending=null}if(S!==null){T=S.next,y=y.baseState;var Q=O=null,te=null,be=T;do{var Le=be.lane;if((Ia&Le)===Le)te!==null&&(te=te.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),y=be.hasEagerState?be.eagerState:a(y,be.action);else{var Re={lane:Le,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};te===null?(Q=te=Re,O=y):te=te.next=Re,Nr.lanes|=Le,Aa|=Le}be=be.next}while(be!==null&&be!==T);te===null?O=y:te.next=Q,me(y,l.memoizedState)||(Xn=!0),l.memoizedState=y,l.baseState=O,l.baseQueue=te,v.lastRenderedState=y}if(a=v.interleaved,a!==null){S=a;do T=S.lane,Nr.lanes|=T,Aa|=T,S=S.next;while(S!==a)}else S===null&&(v.lanes=0);return[l.memoizedState,v.dispatch]}function gl(a){var l=Fi(),v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=a;var y=v.dispatch,S=v.pending,T=l.memoizedState;if(S!==null){v.pending=null;var O=S=S.next;do T=a(T,O.action),O=O.next;while(O!==S);me(T,l.memoizedState)||(Xn=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),v.lastRenderedState=T}return[T,y]}function zu(){}function Ah(a,l){var v=Nr,y=Fi(),S=l(),T=!me(y.memoizedState,S);if(T&&(y.memoizedState=S,Xn=!0),y=y.queue,So(Go.bind(null,v,y,a),[a]),y.getSnapshot!==l||T||nn!==null&&nn.memoizedState.tag&1){if(v.flags|=2048,vl(9,si.bind(null,v,y,S,l),void 0,null),un===null)throw Error(r(349));(Ia&30)!==0||Dh(v,l,S)}return S}function Dh(a,l,v){a.flags|=16384,a={getSnapshot:l,value:v},l=Nr.updateQueue,l===null?(l={lastEffect:null,stores:null},Nr.updateQueue=l,l.stores=[a]):(v=l.stores,v===null?l.stores=[a]:v.push(a))}function si(a,l,v,y){l.value=v,l.getSnapshot=y,$u(l)&&Fh(a)}function Go(a,l,v){return v(function(){$u(l)&&Fh(a)})}function $u(a){var l=a.getSnapshot;a=a.value;try{var v=l();return!me(a,v)}catch{return!0}}function Fh(a){var l=Xo(a,1);l!==null&&ro(l,a,1,-1)}function yc(a){var l=_o();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zn,lastRenderedState:a},l.queue=a,a=a.dispatch=M1.bind(null,Nr,a),[l.memoizedState,a]}function vl(a,l,v,y){return a={tag:a,create:l,destroy:v,deps:y,next:null},l=Nr.updateQueue,l===null?(l={lastEffect:null,stores:null},Nr.updateQueue=l,l.lastEffect=a.next=a):(v=l.lastEffect,v===null?l.lastEffect=a.next=a:(y=v.next,v.next=a,a.next=y,l.lastEffect=a)),a}function Bu(){return Fi().memoizedState}function bc(a,l,v,y){var S=_o();Nr.flags|=a,S.memoizedState=vl(1|l,v,void 0,y===void 0?null:y)}function ml(a,l,v,y){var S=Fi();y=y===void 0?null:y;var T=void 0;if(Xr!==null){var O=Xr.memoizedState;if(T=O.destroy,y!==null&&Lh(y,O.deps)){S.memoizedState=vl(l,v,T,y);return}}Nr.flags|=a,S.memoizedState=vl(1|l,v,T,y)}function Vu(a,l){return bc(8390656,8,a,l)}function So(a,l){return ml(2048,8,a,l)}function w1(a,l){return ml(4,2,a,l)}function qo(a,l){return ml(4,4,a,l)}function Rh(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Oh(a,l,v){return v=v!=null?v.concat([a]):null,ml(4,4,Rh.bind(null,l,a),v)}function xc(){}function C1(a,l){var v=Fi();l=l===void 0?null:l;var y=v.memoizedState;return y!==null&&l!==null&&Lh(l,y[1])?y[0]:(v.memoizedState=[a,l],a)}function _1(a,l){var v=Fi();l=l===void 0?null:l;var y=v.memoizedState;return y!==null&&l!==null&&Lh(l,y[1])?y[0]:(a=a(),v.memoizedState=[a,l],a)}function S1(a,l,v){return(Ia&21)===0?(a.baseState&&(a.baseState=!1,Xn=!0),a.memoizedState=v):(me(v,l)||(v=Us(),Nr.lanes|=v,Aa|=v,a.baseState=!0),l)}function k1(a,l){var v=qt;qt=v!==0&&4>v?v:4,a(!0);var y=Ih.transition;Ih.transition={};try{a(!1),l()}finally{qt=v,Ih.transition=y}}function Nh(){return Fi().memoizedState}function mf(a,l,v){var y=Ra(a);if(v={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null},zh(a))Yn(l,v);else if(v=Au(a,l,v,y),v!==null){var S=Gn();ro(v,a,y,S),Qi(v,l,y)}}function M1(a,l,v){var y=Ra(a),S={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null};if(zh(a))Yn(l,S);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var O=l.lastRenderedState,Q=T(O,v);if(S.hasEagerState=!0,S.eagerState=Q,me(Q,O)){var te=l.interleaved;te===null?(S.next=S,Sh(l)):(S.next=te.next,te.next=S),l.interleaved=S;return}}catch{}finally{}v=Au(a,l,S,y),v!==null&&(S=Gn(),ro(v,a,y,S),Qi(v,l,y))}}function zh(a){var l=a.alternate;return a===Nr||l!==null&&l===Nr}function Yn(a,l){mc=fl=!0;var v=a.pending;v===null?l.next=l:(l.next=v.next,v.next=l),a.pending=l}function Qi(a,l,v){if((v&4194240)!==0){var y=l.lanes;y&=a.pendingLanes,v|=y,l.lanes=v,fa(a,v)}}var Wu={readContext:Pi,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},yf={readContext:Pi,useCallback:function(a,l){return _o().memoizedState=[a,l===void 0?null:l],a},useContext:Pi,useEffect:Vu,useImperativeHandle:function(a,l,v){return v=v!=null?v.concat([a]):null,bc(4194308,4,Rh.bind(null,l,a),v)},useLayoutEffect:function(a,l){return bc(4194308,4,a,l)},useInsertionEffect:function(a,l){return bc(4,2,a,l)},useMemo:function(a,l){var v=_o();return l=l===void 0?null:l,a=a(),v.memoizedState=[a,l],a},useReducer:function(a,l,v){var y=_o();return l=v!==void 0?v(l):l,y.memoizedState=y.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},y.queue=a,a=a.dispatch=mf.bind(null,Nr,a),[y.memoizedState,a]},useRef:function(a){var l=_o();return a={current:a},l.memoizedState=a},useState:yc,useDebugValue:xc,useDeferredValue:function(a){return _o().memoizedState=a},useTransition:function(){var a=yc(!1),l=a[0];return a=k1.bind(null,a[1]),_o().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,v){var y=Nr,S=_o();if(Er){if(v===void 0)throw Error(r(407));v=v()}else{if(v=l(),un===null)throw Error(r(349));(Ia&30)!==0||Dh(y,l,v)}S.memoizedState=v;var T={value:v,getSnapshot:l};return S.queue=T,Vu(Go.bind(null,y,T,a),[a]),y.flags|=2048,vl(9,si.bind(null,y,T,v,l),void 0,null),v},useId:function(){var a=_o(),l=un.identifierPrefix;if(Er){var v=yo,y=mo;v=(y&~(1<<32-ti(y)-1)).toString(32)+v,l=":"+l+"R"+v,v=fs++,0<v&&(l+="H"+v.toString(32)),l+=":"}else v=Rt++,l=":"+l+"r"+v.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},Uu={readContext:Pi,useCallback:C1,useContext:Pi,useEffect:So,useImperativeHandle:Oh,useInsertionEffect:w1,useLayoutEffect:qo,useMemo:_1,useReducer:Ph,useRef:Bu,useState:function(){return Ph(zn)},useDebugValue:xc,useDeferredValue:function(a){var l=Fi();return S1(l,Xr.memoizedState,a)},useTransition:function(){var a=Ph(zn)[0],l=Fi().memoizedState;return[a,l]},useMutableSource:zu,useSyncExternalStore:Ah,useId:Nh,unstable_isNewReconciler:!1},yl={readContext:Pi,useCallback:C1,useContext:Pi,useEffect:So,useImperativeHandle:Oh,useInsertionEffect:w1,useLayoutEffect:qo,useMemo:_1,useReducer:gl,useRef:Bu,useState:function(){return gl(zn)},useDebugValue:xc,useDeferredValue:function(a){var l=Fi();return Xr===null?l.memoizedState=a:S1(l,Xr.memoizedState,a)},useTransition:function(){var a=gl(zn)[0],l=Fi().memoizedState;return[a,l]},useMutableSource:zu,useSyncExternalStore:Ah,useId:Nh,unstable_isNewReconciler:!1};function Ri(a,l){if(a&&a.defaultProps){l=pe({},l),a=a.defaultProps;for(var v in a)l[v]===void 0&&(l[v]=a[v]);return l}return l}function Hu(a,l,v,y){l=a.memoizedState,v=v(y,l),v=v==null?l:pe({},l,v),a.memoizedState=v,a.lanes===0&&(a.updateQueue.baseState=v)}var Yu={isMounted:function(a){return(a=a._reactInternals)?fi(a)===a:!1},enqueueSetState:function(a,l,v){a=a._reactInternals;var y=Gn(),S=Ra(a),T=jo(y,S);T.payload=l,v!=null&&(T.callback=v),l=Di(a,T,S),l!==null&&(ro(l,a,S,y),Fu(l,a,S))},enqueueReplaceState:function(a,l,v){a=a._reactInternals;var y=Gn(),S=Ra(a),T=jo(y,S);T.tag=1,T.payload=l,v!=null&&(T.callback=v),l=Di(a,T,S),l!==null&&(ro(l,a,S,y),Fu(l,a,S))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var v=Gn(),y=Ra(a),S=jo(v,y);S.tag=2,l!=null&&(S.callback=l),l=Di(a,S,y),l!==null&&(ro(l,a,y,v),Fu(l,a,y))}};function $h(a,l,v,y,S,T,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,T,O):l.prototype&&l.prototype.isPureReactComponent?!Ye(v,y)||!Ye(S,T):!0}function vs(a,l,v){var y=!1,S=Sa,T=l.contextType;return typeof T=="object"&&T!==null?T=Pi(T):(S=oi(l)?Hn:Fn.current,y=l.contextTypes,T=(y=y!=null)?cl(a,S):Sa),l=new l(v,T),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Yu,a.stateNode=l,l._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=T),l}function bl(a,l,v,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(v,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(v,y),l.state!==a&&Yu.enqueueReplaceState(l,l.state,null)}function Bh(a,l,v,y){var S=a.stateNode;S.props=v,S.state=a.memoizedState,S.refs={},Du(a);var T=l.contextType;typeof T=="object"&&T!==null?S.context=Pi(T):(T=oi(l)?Hn:Fn.current,S.context=cl(a,T)),S.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Hu(a,l,T,v),S.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&Yu.enqueueReplaceState(S,S.state,null),hl(a,v,S,y),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function ms(a,l){try{var v="",y=l;do v+=fe(y),y=y.return;while(y);var S=v}catch(T){S=`
Error generating stack: `+T.message+`
`+T.stack}return{value:a,source:l,stack:S,digest:null}}function Xu(a,l,v){return{value:a,source:null,stack:v??null,digest:l??null}}function xl(a,l){try{console.error(l.value)}catch(v){setTimeout(function(){throw v})}}var T1=typeof WeakMap=="function"?WeakMap:Map;function wc(a,l,v){v=jo(-1,v),v.tag=3,v.payload={element:null};var y=l.value;return v.callback=function(){nd||(nd=!0,r0=y),xl(a,l)},v}function ju(a,l,v){v=jo(-1,v),v.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var S=l.value;v.payload=function(){return y(S)},v.callback=function(){xl(a,l)}}var T=a.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(v.callback=function(){xl(a,l),typeof y!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),v}function Cc(a,l,v){var y=a.pingCache;if(y===null){y=a.pingCache=new T1;var S=new Set;y.set(l,S)}else S=y.get(l),S===void 0&&(S=new Set,y.set(l,S));S.has(v)||(S.add(v),a=Mf.bind(null,a,l,v),l.then(a,a))}function E1(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function Vh(a,l,v,y,S){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(l=jo(-1,1),l.tag=2,Di(v,l,1))),v.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var Zu=A.ReactCurrentOwner,Xn=!1;function xn(a,l,v,y){l.child=a===null?Lu(l,null,v,y):Wr(l,a.child,v,y)}function I1(a,l,v,y,S){v=v.render;var T=l.ref;return Ta(l,S),y=gs(a,l,v,y,T,S),v=Nu(),a!==null&&!Xn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,Ki(a,l,S)):(Er&&v&&uc(l),l.flags|=1,xn(a,l,y,S),l.child)}function Wh(a,l,v,y,S){if(a===null){var T=v.type;return typeof T=="function"&&!cd(T)&&T.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(l.tag=15,l.type=T,ko(a,l,T,y,S)):(a=ud(v.type,null,y,l,l.mode,S),a.ref=l.ref,a.return=l,l.child=a)}if(T=a.child,(a.lanes&S)===0){var O=T.memoizedProps;if(v=v.compare,v=v!==null?v:Ye,v(O,y)&&a.ref===l.ref)return Ki(a,l,S)}return l.flags|=1,a=no(T,y),a.ref=l.ref,a.return=l,l.child=a}function ko(a,l,v,y,S){if(a!==null){var T=a.memoizedProps;if(Ye(T,y)&&a.ref===l.ref)if(Xn=!1,l.pendingProps=y=T,(a.lanes&S)!==0)(a.flags&131072)!==0&&(Xn=!0);else return l.lanes=a.lanes,Ki(a,l,S)}return Yh(a,l,v,y,S)}function Uh(a,l,v){var y=l.pendingProps,S=y.children,T=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(Sl,wi),wi|=v;else{if((v&1073741824)===0)return a=T!==null?T.baseLanes|v:v,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,_r(Sl,wi),wi|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=T!==null?T.baseLanes:v,_r(Sl,wi),wi|=y}else T!==null?(y=T.baseLanes|v,l.memoizedState=null):y=v,_r(Sl,wi),wi|=y;return xn(a,l,S,v),l.child}function Hh(a,l){var v=l.ref;(a===null&&v!==null||a!==null&&a.ref!==v)&&(l.flags|=512,l.flags|=2097152)}function Yh(a,l,v,y,S){var T=oi(v)?Hn:Fn.current;return T=cl(l,T),Ta(l,S),v=gs(a,l,v,y,T,S),y=Nu(),a!==null&&!Xn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,Ki(a,l,S)):(Er&&y&&uc(l),l.flags|=1,xn(a,l,v,S),l.child)}function Xh(a,l,v,y,S){if(oi(v)){var T=!0;Ei(l)}else T=!1;if(Ta(l,S),l.stateNode===null)qu(a,l),vs(l,v,y),Bh(l,v,y,S),y=!0;else if(a===null){var O=l.stateNode,Q=l.memoizedProps;O.props=Q;var te=O.context,be=v.contextType;typeof be=="object"&&be!==null?be=Pi(be):(be=oi(v)?Hn:Fn.current,be=cl(l,be));var Le=v.getDerivedStateFromProps,Re=typeof Le=="function"||typeof O.getSnapshotBeforeUpdate=="function";Re||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q!==y||te!==be)&&bl(l,O,y,be),Ai=!1;var Ie=l.memoizedState;O.state=Ie,hl(l,y,O,S),te=l.memoizedState,Q!==y||Ie!==te||ii.current||Ai?(typeof Le=="function"&&(Hu(l,v,Le,y),te=l.memoizedState),(Q=Ai||$h(l,v,Q,y,Ie,te,be))?(Re||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=te),O.props=y,O.state=te,O.context=be,y=Q):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{O=l.stateNode,b1(a,l),Q=l.memoizedProps,be=l.type===l.elementType?Q:Ri(l.type,Q),O.props=be,Re=l.pendingProps,Ie=O.context,te=v.contextType,typeof te=="object"&&te!==null?te=Pi(te):(te=oi(v)?Hn:Fn.current,te=cl(l,te));var Xe=v.getDerivedStateFromProps;(Le=typeof Xe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q!==Re||Ie!==te)&&bl(l,O,y,te),Ai=!1,Ie=l.memoizedState,O.state=Ie,hl(l,y,O,S);var Ke=l.memoizedState;Q!==Re||Ie!==Ke||ii.current||Ai?(typeof Xe=="function"&&(Hu(l,v,Xe,y),Ke=l.memoizedState),(be=Ai||$h(l,v,be,y,Ie,Ke,te)||!1)?(Le||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,Ke,te),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,Ke,te)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||Q===a.memoizedProps&&Ie===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&Ie===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Ke),O.props=y,O.state=Ke,O.context=te,y=be):(typeof O.componentDidUpdate!="function"||Q===a.memoizedProps&&Ie===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&Ie===a.memoizedState||(l.flags|=1024),y=!1)}return jh(a,l,v,y,T,S)}function jh(a,l,v,y,S,T){Hh(a,l);var O=(l.flags&128)!==0;if(!y&&!O)return S&&p1(l,v,!1),Ki(a,l,T);y=l.stateNode,Zu.current=l;var Q=O&&typeof v.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,a!==null&&O?(l.child=Wr(l,a.child,null,T),l.child=Wr(l,null,Q,T)):xn(a,l,Q,T),l.memoizedState=y.state,S&&p1(l,v,!0),l.child}function L1(a){var l=a.stateNode;l.pendingContext?d1(a,l.pendingContext,l.pendingContext!==l.context):l.context&&d1(a,l.context,!1),Mh(a,l.containerInfo)}function Mo(a,l,v,y,S){return xo(),wo(S),l.flags|=256,xn(a,l,v,y),l.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function Sc(a){return{baseLanes:a,cachePool:null,transitions:null}}function Gu(a,l,v){var y=l.pendingProps,S=Fr.current,T=!1,O=(l.flags&128)!==0,Q;if((Q=O)||(Q=a!==null&&a.memoizedState===null?!1:(S&2)!==0),Q?(T=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),_r(Fr,S&1),a===null)return ai(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=y.children,a=y.fallback,T?(y=l.mode,T=l.child,O={mode:"hidden",children:O},(y&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=O):T=dd(O,y,0,null),a=Cs(a,y,v,null),T.return=l,a.return=l,T.sibling=a,l.child=T,l.child.memoizedState=Sc(v),l.memoizedState=_c,a):wl(l,O));if(S=a.memoizedState,S!==null&&(Q=S.dehydrated,Q!==null))return pt(a,l,O,y,Q,S,v);if(T){T=y.fallback,O=l.mode,S=a.child,Q=S.sibling;var te={mode:"hidden",children:y.children};return(O&1)===0&&l.child!==S?(y=l.child,y.childLanes=0,y.pendingProps=te,l.deletions=null):(y=no(S,te),y.subtreeFlags=S.subtreeFlags&14680064),Q!==null?T=no(Q,T):(T=Cs(T,O,v,null),T.flags|=2),T.return=l,y.return=l,y.sibling=T,l.child=y,y=T,T=l.child,O=a.child.memoizedState,O=O===null?Sc(v):{baseLanes:O.baseLanes|v,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=a.childLanes&~v,l.memoizedState=_c,y}return T=a.child,a=T.sibling,y=no(T,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=v),y.return=l,y.sibling=null,a!==null&&(v=l.deletions,v===null?(l.deletions=[a],l.flags|=16):v.push(a)),l.child=y,l.memoizedState=null,y}function wl(a,l){return l=dd({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Qo(a,l,v,y){return y!==null&&wo(y),Wr(l,a.child,null,v),a=wl(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function pt(a,l,v,y,S,T,O){if(v)return l.flags&256?(l.flags&=-257,y=Xu(Error(r(422))),Qo(a,l,O,y)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(T=y.fallback,S=l.mode,y=dd({mode:"visible",children:y.children},S,0,null),T=Cs(T,S,O,null),T.flags|=2,y.return=l,T.return=l,y.sibling=T,l.child=y,(l.mode&1)!==0&&Wr(l,a.child,null,O),l.child.memoizedState=Sc(O),l.memoizedState=_c,T);if((l.mode&1)===0)return Qo(a,l,O,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var Q=y.dgst;return y=Q,T=Error(r(419)),y=Xu(T,y,void 0),Qo(a,l,O,y)}if(Q=(O&a.childLanes)!==0,Xn||Q){if(y=un,y!==null){switch(O&-O){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|O))!==0?0:S,S!==0&&S!==T.retryLane&&(T.retryLane=S,Xo(a,S),ro(y,a,S,-1))}return l0(),y=Xu(Error(r(421))),Qo(a,l,O,y)}return S.data==="$?"?(l.flags|=128,l.child=a.child,l=Tf.bind(null,a),S._reactRetry=l,null):(a=T.treeContext,yi=Ca(S.nextSibling),On=l,Er=!0,qi=null,a!==null&&(Ii[Li++]=mo,Ii[Li++]=yo,Ii[Li++]=ls,mo=a.id,yo=a.overflow,ls=l),l=wl(l,y.children),l.flags|=4096,l)}function kc(a,l,v){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),bn(a.return,l,v)}function Mc(a,l,v,y,S){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:v,tailMode:S}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=v,T.tailMode=S)}function La(a,l,v){var y=l.pendingProps,S=y.revealOrder,T=y.tail;if(xn(a,l,y.children,v),y=Fr.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&kc(a,v,l);else if(a.tag===19)kc(a,v,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(_r(Fr,y),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(v=l.child,S=null;v!==null;)a=v.alternate,a!==null&&ps(a)===null&&(S=v),v=v.sibling;v=S,v===null?(S=l.child,l.child=null):(S=v.sibling,v.sibling=null),Mc(l,!1,S,v,T);break;case"backwards":for(v=null,S=l.child,l.child=null;S!==null;){if(a=S.alternate,a!==null&&ps(a)===null){l.child=S;break}a=S.sibling,S.sibling=v,v=S,S=a}Mc(l,!0,v,null,T);break;case"together":Mc(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function qu(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Ki(a,l,v){if(a!==null&&(l.dependencies=a.dependencies),Aa|=l.lanes,(v&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,v=no(a,a.pendingProps),l.child=v,v.return=l;a.sibling!==null;)a=a.sibling,v=v.sibling=no(a,a.pendingProps),v.return=l;v.sibling=null}return l.child}function P1(a,l,v){switch(l.tag){case 3:L1(l),xo();break;case 5:Th(l);break;case 1:oi(l.type)&&Ei(l);break;case 4:Mh(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,S=l.memoizedProps.value;_r(pc,y._currentValue),y._currentValue=S;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(_r(Fr,Fr.current&1),l.flags|=128,null):(v&l.child.childLanes)!==0?Gu(a,l,v):(_r(Fr,Fr.current&1),a=Ki(a,l,v),a!==null?a.sibling:null);_r(Fr,Fr.current&1);break;case 19:if(y=(v&l.childLanes)!==0,(a.flags&128)!==0){if(y)return La(a,l,v);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),_r(Fr,Fr.current),y)break;return null;case 22:case 23:return l.lanes=0,Uh(a,l,v)}return Ki(a,l,v)}var wn,Zh,A1,Gh;wn=function(a,l){for(var v=l.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break;for(;v.sibling===null;){if(v.return===null||v.return===l)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Zh=function(){},A1=function(a,l,v,y){var S=a.memoizedProps;if(S!==y){a=l.stateNode,Zo(Co.current);var T=null;switch(v){case"input":S=nt(a,S),y=nt(a,y),T=[];break;case"select":S=pe({},S,{value:void 0}),y=pe({},y,{value:void 0}),T=[];break;case"textarea":S=jt(a,S),y=jt(a,y),T=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=wu)}St(v,y);var O;v=null;for(be in S)if(!y.hasOwnProperty(be)&&S.hasOwnProperty(be)&&S[be]!=null)if(be==="style"){var Q=S[be];for(O in Q)Q.hasOwnProperty(O)&&(v||(v={}),v[O]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(i.hasOwnProperty(be)?T||(T=[]):(T=T||[]).push(be,null));for(be in y){var te=y[be];if(Q=S!=null?S[be]:void 0,y.hasOwnProperty(be)&&te!==Q&&(te!=null||Q!=null))if(be==="style")if(Q){for(O in Q)!Q.hasOwnProperty(O)||te&&te.hasOwnProperty(O)||(v||(v={}),v[O]="");for(O in te)te.hasOwnProperty(O)&&Q[O]!==te[O]&&(v||(v={}),v[O]=te[O])}else v||(T||(T=[]),T.push(be,v)),v=te;else be==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,Q=Q?Q.__html:void 0,te!=null&&Q!==te&&(T=T||[]).push(be,te)):be==="children"?typeof te!="string"&&typeof te!="number"||(T=T||[]).push(be,""+te):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(i.hasOwnProperty(be)?(te!=null&&be==="onScroll"&&Mr("scroll",a),T||Q===te||(T=[])):(T=T||[]).push(be,te))}v&&(T=T||[]).push("style",v);var be=T;(l.updateQueue=be)&&(l.flags|=4)}},Gh=function(a,l,v,y){v!==y&&(l.flags|=4)};function Tc(a,l){if(!Er)switch(a.tailMode){case"hidden":l=a.tail;for(var v=null;l!==null;)l.alternate!==null&&(v=l),l=l.sibling;v===null?a.tail=null:v.sibling=null;break;case"collapsed":v=a.tail;for(var y=null;v!==null;)v.alternate!==null&&(y=v),v=v.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Cn(a){var l=a.alternate!==null&&a.alternate.child===a.child,v=0,y=0;if(l)for(var S=a.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=y,a.childLanes=v,l}function bf(a,l,v){var y=l.pendingProps;switch(us(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(l),null;case 1:return oi(l.type)&&ku(),Cn(l),null;case 3:return y=l.stateNode,Ea(),Tr(ii),Tr(Fn),Ou(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(dc(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,qi!==null&&(o0(qi),qi=null))),Zh(a,l),Cn(l),null;case 5:Ru(l);var S=Zo(pl.current);if(v=l.type,a!==null&&l.stateNode!=null)A1(a,l,v,y,S),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(r(166));return Cn(l),null}if(a=Zo(Co.current),dc(l)){y=l.stateNode,v=l.type;var T=l.memoizedProps;switch(y[go]=l,y[_a]=T,a=(l.mode&1)!==0,v){case"dialog":Mr("cancel",y),Mr("close",y);break;case"iframe":case"object":case"embed":Mr("load",y);break;case"video":case"audio":for(S=0;S<Wo.length;S++)Mr(Wo[S],y);break;case"source":Mr("error",y);break;case"img":case"image":case"link":Mr("error",y),Mr("load",y);break;case"details":Mr("toggle",y);break;case"input":Ue(y,T),Mr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!T.multiple},Mr("invalid",y);break;case"textarea":ln(y,T),Mr("invalid",y)}St(v,T),S=null;for(var O in T)if(T.hasOwnProperty(O)){var Q=T[O];O==="children"?typeof Q=="string"?y.textContent!==Q&&(T.suppressHydrationWarning!==!0&&ac(y.textContent,Q,a),S=["children",Q]):typeof Q=="number"&&y.textContent!==""+Q&&(T.suppressHydrationWarning!==!0&&ac(y.textContent,Q,a),S=["children",""+Q]):i.hasOwnProperty(O)&&Q!=null&&O==="onScroll"&&Mr("scroll",y)}switch(v){case"input":Ee(y),Qt(y,T,!0);break;case"textarea":Ee(y),dr(y);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(y.onclick=wu)}y=S,l.updateQueue=y,y!==null&&(l.flags|=4)}else{O=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Ft(v)),a==="http://www.w3.org/1999/xhtml"?v==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=O.createElement(v,{is:y.is}):(a=O.createElement(v),v==="select"&&(O=a,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):a=O.createElementNS(a,v),a[go]=l,a[_a]=y,wn(a,l,!1,!1),l.stateNode=a;e:{switch(O=Ct(v,y),v){case"dialog":Mr("cancel",a),Mr("close",a),S=y;break;case"iframe":case"object":case"embed":Mr("load",a),S=y;break;case"video":case"audio":for(S=0;S<Wo.length;S++)Mr(Wo[S],a);S=y;break;case"source":Mr("error",a),S=y;break;case"img":case"image":case"link":Mr("error",a),Mr("load",a),S=y;break;case"details":Mr("toggle",a),S=y;break;case"input":Ue(a,y),S=nt(a,y),Mr("invalid",a);break;case"option":S=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},S=pe({},y,{value:void 0}),Mr("invalid",a);break;case"textarea":ln(a,y),S=jt(a,y),Mr("invalid",a);break;default:S=y}St(v,S),Q=S;for(T in Q)if(Q.hasOwnProperty(T)){var te=Q[T];T==="style"?_t(a,te):T==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Gr(a,te)):T==="children"?typeof te=="string"?(v!=="textarea"||te!=="")&&hr(a,te):typeof te=="number"&&hr(a,""+te):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(i.hasOwnProperty(T)?te!=null&&T==="onScroll"&&Mr("scroll",a):te!=null&&L(a,T,te,O))}switch(v){case"input":Ee(a),Qt(a,y,!1);break;case"textarea":Ee(a),dr(a);break;case"option":y.value!=null&&a.setAttribute("value",""+Te(y.value));break;case"select":a.multiple=!!y.multiple,T=y.value,T!=null?gt(a,!!y.multiple,T,!1):y.defaultValue!=null&&gt(a,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=wu)}switch(v){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Cn(l),null;case 6:if(a&&l.stateNode!=null)Gh(a,l,a.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(r(166));if(v=Zo(pl.current),Zo(Co.current),dc(l)){if(y=l.stateNode,v=l.memoizedProps,y[go]=l,(T=y.nodeValue!==v)&&(a=On,a!==null))switch(a.tag){case 3:ac(y.nodeValue,v,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&ac(y.nodeValue,v,(a.mode&1)!==0)}T&&(l.flags|=4)}else y=(v.nodeType===9?v:v.ownerDocument).createTextNode(y),y[go]=l,l.stateNode=y}return Cn(l),null;case 13:if(Tr(Fr),y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Er&&yi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Ch(),xo(),l.flags|=98560,T=!1;else if(T=dc(l),y!==null&&y.dehydrated!==null){if(a===null){if(!T)throw Error(r(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[go]=l}else xo(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Cn(l),T=!1}else qi!==null&&(o0(qi),qi=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=v,l):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Fr.current&1)!==0?on===0&&(on=3):l0())),l.updateQueue!==null&&(l.flags|=4),Cn(l),null);case 4:return Ea(),Zh(a,l),a===null&&xa(l.stateNode.containerInfo),Cn(l),null;case 10:return Pu(l.type._context),Cn(l),null;case 17:return oi(l.type)&&ku(),Cn(l),null;case 19:if(Tr(Fr),T=l.memoizedState,T===null)return Cn(l),null;if(y=(l.flags&128)!==0,O=T.rendering,O===null)if(y)Tc(T,!1);else{if(on!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(O=ps(a),O!==null){for(l.flags|=128,Tc(T,!1),y=O.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=v,v=l.child;v!==null;)T=v,a=y,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=a,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,a=O.dependencies,T.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),v=v.sibling;return _r(Fr,Fr.current&1|2),l.child}a=a.sibling}T.tail!==null&&br()>ys&&(l.flags|=128,y=!0,Tc(T,!1),l.lanes=4194304)}else{if(!y)if(a=ps(O),a!==null){if(l.flags|=128,y=!0,v=a.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),Tc(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!Er)return Cn(l),null}else 2*br()-T.renderingStartTime>ys&&v!==1073741824&&(l.flags|=128,y=!0,Tc(T,!1),l.lanes=4194304);T.isBackwards?(O.sibling=l.child,l.child=O):(v=T.last,v!==null?v.sibling=O:l.child=O,T.last=O)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=br(),l.sibling=null,v=Fr.current,_r(Fr,y?v&1|2:v&1),l):(Cn(l),null);case 22:case 23:return s0(),y=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(wi&1073741824)!==0&&(Cn(l),l.subtreeFlags&6&&(l.flags|=8192)):Cn(l),null;case 24:return null;case 25:return null}throw Error(r(156,l.tag))}function xf(a,l){switch(us(l),l.tag){case 1:return oi(l.type)&&ku(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Ea(),Tr(ii),Tr(Fn),Ou(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Ru(l),null;case 13:if(Tr(Fr),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));xo()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Tr(Fr),null;case 4:return Ea(),null;case 10:return Pu(l.type._context),null;case 22:case 23:return s0(),null;case 24:return null;default:return null}}var Qu=!1,Rr=!1,jn=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Cl(a,l){var v=a.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(y){zr(a,l,y)}else v.current=null}function Ec(a,l,v){try{v()}catch(y){zr(a,l,y)}}var D1=!1;function wf(a,l){if(sc=nu,a=gr(),ec(a)){if("selectionStart"in a)var v={start:a.selectionStart,end:a.selectionEnd};else e:{v=(v=a.ownerDocument)&&v.defaultView||window;var y=v.getSelection&&v.getSelection();if(y&&y.rangeCount!==0){v=y.anchorNode;var S=y.anchorOffset,T=y.focusNode;y=y.focusOffset;try{v.nodeType,T.nodeType}catch{v=null;break e}var O=0,Q=-1,te=-1,be=0,Le=0,Re=a,Ie=null;t:for(;;){for(var Xe;Re!==v||S!==0&&Re.nodeType!==3||(Q=O+S),Re!==T||y!==0&&Re.nodeType!==3||(te=O+y),Re.nodeType===3&&(O+=Re.nodeValue.length),(Xe=Re.firstChild)!==null;)Ie=Re,Re=Xe;for(;;){if(Re===a)break t;if(Ie===v&&++be===S&&(Q=O),Ie===T&&++Le===y&&(te=O),(Xe=Re.nextSibling)!==null)break;Re=Ie,Ie=Re.parentNode}Re=Xe}v=Q===-1||te===-1?null:{start:Q,end:te}}else v=null}v=v||{start:0,end:0}}else v=null;for(as={focusedElem:a,selectionRange:v},nu=!1,Ge=l;Ge!==null;)if(l=Ge,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Ge=a;else for(;Ge!==null;){l=Ge;try{var Ke=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ke!==null){var et=Ke.memoizedProps,jr=Ke.memoizedState,he=l.stateNode,ie=he.getSnapshotBeforeUpdate(l.elementType===l.type?et:Ri(l.type,et),jr);he.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ge=l.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ze){zr(l,l.return,ze)}if(a=l.sibling,a!==null){a.return=l.return,Ge=a;break}Ge=l.return}return Ke=D1,D1=!1,Ke}function Ko(a,l,v){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&a)===a){var T=S.destroy;S.destroy=void 0,T!==void 0&&Ec(l,v,T)}S=S.next}while(S!==y)}}function Ic(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var v=l=l.next;do{if((v.tag&a)===a){var y=v.create;v.destroy=y()}v=v.next}while(v!==l)}}function Ku(a){var l=a.ref;if(l!==null){var v=a.stateNode;switch(a.tag){case 5:a=v;break;default:a=v}typeof l=="function"?l(a):l.current=a}}function F1(a){var l=a.alternate;l!==null&&(a.alternate=null,F1(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[go],delete l[_a],delete l[_u],delete l[N],delete l[sl])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function R1(a){return a.tag===5||a.tag===3||a.tag===4}function O1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||R1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function qh(a,l,v){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?v.nodeType===8?v.parentNode.insertBefore(a,l):v.insertBefore(a,l):(v.nodeType===8?(l=v.parentNode,l.insertBefore(a,v)):(l=v,l.appendChild(a)),v=v._reactRootContainer,v!=null||l.onclick!==null||(l.onclick=wu));else if(y!==4&&(a=a.child,a!==null))for(qh(a,l,v),a=a.sibling;a!==null;)qh(a,l,v),a=a.sibling}function Ju(a,l,v){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?v.insertBefore(a,l):v.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(Ju(a,l,v),a=a.sibling;a!==null;)Ju(a,l,v),a=a.sibling}var cn=null,Ji=!1;function To(a,l,v){for(v=v.child;v!==null;)Qh(a,l,v),v=v.sibling}function Qh(a,l,v){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(qa,v)}catch{}switch(v.tag){case 5:Rr||Cl(v,l);case 6:var y=cn,S=Ji;cn=null,To(a,l,v),cn=y,Ji=S,cn!==null&&(Ji?(a=cn,v=v.stateNode,a.nodeType===8?a.parentNode.removeChild(v):a.removeChild(v)):cn.removeChild(v.stateNode));break;case 18:cn!==null&&(Ji?(a=cn,v=v.stateNode,a.nodeType===8?bh(a.parentNode,v):a.nodeType===1&&bh(a,v),Jt(a)):bh(cn,v.stateNode));break;case 4:y=cn,S=Ji,cn=v.stateNode.containerInfo,Ji=!0,To(a,l,v),cn=y,Ji=S;break;case 0:case 11:case 14:case 15:if(!Rr&&(y=v.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var T=S,O=T.destroy;T=T.tag,O!==void 0&&((T&2)!==0||(T&4)!==0)&&Ec(v,l,O),S=S.next}while(S!==y)}To(a,l,v);break;case 1:if(!Rr&&(Cl(v,l),y=v.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=v.memoizedProps,y.state=v.memoizedState,y.componentWillUnmount()}catch(Q){zr(v,l,Q)}To(a,l,v);break;case 21:To(a,l,v);break;case 22:v.mode&1?(Rr=(y=Rr)||v.memoizedState!==null,To(a,l,v),Rr=y):To(a,l,v);break;default:To(a,l,v)}}function _l(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var v=a.stateNode;v===null&&(v=a.stateNode=new jn),l.forEach(function(y){var S=Ef.bind(null,a,y);v.has(y)||(v.add(y),y.then(S,S))})}}function xi(a,l){var v=l.deletions;if(v!==null)for(var y=0;y<v.length;y++){var S=v[y];try{var T=a,O=l,Q=O;e:for(;Q!==null;){switch(Q.tag){case 5:cn=Q.stateNode,Ji=!1;break e;case 3:cn=Q.stateNode.containerInfo,Ji=!0;break e;case 4:cn=Q.stateNode.containerInfo,Ji=!0;break e}Q=Q.return}if(cn===null)throw Error(r(160));Qh(T,O,S),cn=null,Ji=!1;var te=S.alternate;te!==null&&(te.return=null),S.return=null}catch(be){zr(S,l,be)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Kh(l,a),l=l.sibling}function Kh(a,l){var v=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(xi(l,a),eo(a),y&4){try{Ko(3,a,a.return),Ic(3,a)}catch(et){zr(a,a.return,et)}try{Ko(5,a,a.return)}catch(et){zr(a,a.return,et)}}break;case 1:xi(l,a),eo(a),y&512&&v!==null&&Cl(v,v.return);break;case 5:if(xi(l,a),eo(a),y&512&&v!==null&&Cl(v,v.return),a.flags&32){var S=a.stateNode;try{hr(S,"")}catch(et){zr(a,a.return,et)}}if(y&4&&(S=a.stateNode,S!=null)){var T=a.memoizedProps,O=v!==null?v.memoizedProps:T,Q=a.type,te=a.updateQueue;if(a.updateQueue=null,te!==null)try{Q==="input"&&T.type==="radio"&&T.name!=null&&ct(S,T),Ct(Q,O);var be=Ct(Q,T);for(O=0;O<te.length;O+=2){var Le=te[O],Re=te[O+1];Le==="style"?_t(S,Re):Le==="dangerouslySetInnerHTML"?Gr(S,Re):Le==="children"?hr(S,Re):L(S,Le,Re,be)}switch(Q){case"input":ut(S,T);break;case"textarea":mn(S,T);break;case"select":var Ie=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!T.multiple;var Xe=T.value;Xe!=null?gt(S,!!T.multiple,Xe,!1):Ie!==!!T.multiple&&(T.defaultValue!=null?gt(S,!!T.multiple,T.defaultValue,!0):gt(S,!!T.multiple,T.multiple?[]:"",!1))}S[_a]=T}catch(et){zr(a,a.return,et)}}break;case 6:if(xi(l,a),eo(a),y&4){if(a.stateNode===null)throw Error(r(162));S=a.stateNode,T=a.memoizedProps;try{S.nodeValue=T}catch(et){zr(a,a.return,et)}}break;case 3:if(xi(l,a),eo(a),y&4&&v!==null&&v.memoizedState.isDehydrated)try{Jt(l.containerInfo)}catch(et){zr(a,a.return,et)}break;case 4:xi(l,a),eo(a);break;case 13:xi(l,a),eo(a),S=a.child,S.flags&8192&&(T=S.memoizedState!==null,S.stateNode.isHidden=T,!T||S.alternate!==null&&S.alternate.memoizedState!==null||(t0=br())),y&4&&_l(a);break;case 22:if(Le=v!==null&&v.memoizedState!==null,a.mode&1?(Rr=(be=Rr)||Le,xi(l,a),Rr=be):xi(l,a),eo(a),y&8192){if(be=a.memoizedState!==null,(a.stateNode.isHidden=be)&&!Le&&(a.mode&1)!==0)for(Ge=a,Le=a.child;Le!==null;){for(Re=Ge=Le;Ge!==null;){switch(Ie=Ge,Xe=Ie.child,Ie.tag){case 0:case 11:case 14:case 15:Ko(4,Ie,Ie.return);break;case 1:Cl(Ie,Ie.return);var Ke=Ie.stateNode;if(typeof Ke.componentWillUnmount=="function"){y=Ie,v=Ie.return;try{l=y,Ke.props=l.memoizedProps,Ke.state=l.memoizedState,Ke.componentWillUnmount()}catch(et){zr(y,v,et)}}break;case 5:Cl(Ie,Ie.return);break;case 22:if(Ie.memoizedState!==null){Pa(Re);continue}}Xe!==null?(Xe.return=Ie,Ge=Xe):Pa(Re)}Le=Le.sibling}e:for(Le=null,Re=a;;){if(Re.tag===5){if(Le===null){Le=Re;try{S=Re.stateNode,be?(T=S.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(Q=Re.stateNode,te=Re.memoizedProps.style,O=te!=null&&te.hasOwnProperty("display")?te.display:null,Q.style.display=We("display",O))}catch(et){zr(a,a.return,et)}}}else if(Re.tag===6){if(Le===null)try{Re.stateNode.nodeValue=be?"":Re.memoizedProps}catch(et){zr(a,a.return,et)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===a)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===a)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===a)break e;Le===Re&&(Le=null),Re=Re.return}Le===Re&&(Le=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:xi(l,a),eo(a),y&4&&_l(a);break;case 21:break;default:xi(l,a),eo(a)}}function eo(a){var l=a.flags;if(l&2){try{e:{for(var v=a.return;v!==null;){if(R1(v)){var y=v;break e}v=v.return}throw Error(r(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(hr(S,""),y.flags&=-33);var T=O1(a);Ju(a,T,S);break;case 3:case 4:var O=y.stateNode.containerInfo,Q=O1(a);qh(a,Q,O);break;default:throw Error(r(161))}}catch(te){zr(a,a.return,te)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function ed(a,l,v){Ge=a,Jh(a)}function Jh(a,l,v){for(var y=(a.mode&1)!==0;Ge!==null;){var S=Ge,T=S.child;if(S.tag===22&&y){var O=S.memoizedState!==null||Qu;if(!O){var Q=S.alternate,te=Q!==null&&Q.memoizedState!==null||Rr;Q=Qu;var be=Rr;if(Qu=O,(Rr=te)&&!be)for(Ge=S;Ge!==null;)O=Ge,te=O.child,O.tag===22&&O.memoizedState!==null?N1(S):te!==null?(te.return=O,Ge=te):N1(S);for(;T!==null;)Ge=T,Jh(T),T=T.sibling;Ge=S,Qu=Q,Rr=be}to(a)}else(S.subtreeFlags&8772)!==0&&T!==null?(T.return=S,Ge=T):to(a)}}function to(a){for(;Ge!==null;){var l=Ge;if((l.flags&8772)!==0){var v=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Rr||Ic(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Rr)if(v===null)y.componentDidMount();else{var S=l.elementType===l.type?v.memoizedProps:Ri(l.type,v.memoizedProps);y.componentDidUpdate(S,v.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&kh(l,T,y);break;case 3:var O=l.updateQueue;if(O!==null){if(v=null,l.child!==null)switch(l.child.tag){case 5:v=l.child.stateNode;break;case 1:v=l.child.stateNode}kh(l,O,v)}break;case 5:var Q=l.stateNode;if(v===null&&l.flags&4){v=Q;var te=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&v.focus();break;case"img":te.src&&(v.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var be=l.alternate;if(be!==null){var Le=be.memoizedState;if(Le!==null){var Re=Le.dehydrated;Re!==null&&Jt(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Rr||l.flags&512&&Ku(l)}catch(Ie){zr(l,l.return,Ie)}}if(l===a){Ge=null;break}if(v=l.sibling,v!==null){v.return=l.return,Ge=v;break}Ge=l.return}}function Pa(a){for(;Ge!==null;){var l=Ge;if(l===a){Ge=null;break}var v=l.sibling;if(v!==null){v.return=l.return,Ge=v;break}Ge=l.return}}function N1(a){for(;Ge!==null;){var l=Ge;try{switch(l.tag){case 0:case 11:case 15:var v=l.return;try{Ic(4,l)}catch(te){zr(l,v,te)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var S=l.return;try{y.componentDidMount()}catch(te){zr(l,S,te)}}var T=l.return;try{Ku(l)}catch(te){zr(l,T,te)}break;case 5:var O=l.return;try{Ku(l)}catch(te){zr(l,O,te)}}}catch(te){zr(l,l.return,te)}if(l===a){Ge=null;break}var Q=l.sibling;if(Q!==null){Q.return=l.return,Ge=Q;break}Ge=l.return}}var z1=Math.ceil,td=A.ReactCurrentDispatcher,e0=A.ReactCurrentOwner,Oi=A.ReactCurrentBatchConfig,er=0,un=null,Kr=null,_n=0,wi=0,Sl=ni(0),on=0,Lc=null,Aa=0,Pc=0,rd=0,Ac=null,li=null,t0=0,ys=1/0,Jo=null,nd=!1,r0=null,Da=null,id=!1,Fa=null,Zn=0,Dc=0,n0=null,od=-1,Fc=0;function Gn(){return(er&6)!==0?br():od!==-1?od:od=br()}function Ra(a){return(a.mode&1)===0?1:(er&2)!==0&&_n!==0?_n&-_n:m1.transition!==null?(Fc===0&&(Fc=Us()),Fc):(a=qt,a!==0||(a=window.event,a=a===void 0?16:U0(a.type)),a)}function ro(a,l,v,y){if(50<Dc)throw Dc=0,n0=null,Error(r(185));pa(a,v,y),((er&2)===0||a!==un)&&(a===un&&((er&2)===0&&(Pc|=v),on===4&&Oa(a,_n)),ci(a,y),v===1&&er===0&&(l.mode&1)===0&&(ys=br()+500,Mu&&ka()))}function ci(a,l){var v=a.callbackNode;Jc(a,l);var y=co(a,a===un?_n:0);if(y===0)v!==null&&Vl(v),a.callbackNode=null,a.callbackPriority=0;else if(l=y&-y,a.callbackPriority!==l){if(v!=null&&Vl(v),l===1)a.tag===0?ss($1.bind(null,a)):f1($1.bind(null,a)),Cu(function(){(er&6)===0&&ka()}),v=null;else{switch(uo(y)){case 1:v=Vs;break;case 4:v=Wl;break;case 16:v=da;break;case 536870912:v=Ws;break;default:v=da}v=X1(v,ad.bind(null,a))}a.callbackPriority=l,a.callbackNode=v}}function ad(a,l){if(od=-1,Fc=0,(er&6)!==0)throw Error(r(327));var v=a.callbackNode;if(kl()&&a.callbackNode!==v)return null;var y=co(a,a===un?_n:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||l)l=sd(a,y);else{l=y;var S=er;er|=2;var T=V1();(un!==a||_n!==l)&&(Jo=null,ys=br()+500,xs(a,l));do try{Sf();break}catch(Q){B1(a,Q)}while(!0);Yo(),td.current=T,er=S,Kr!==null?l=0:(un=null,_n=0,l=on)}if(l!==0){if(l===2&&(S=Ka(a),S!==0&&(y=S,l=i0(a,S))),l===1)throw v=Lc,xs(a,0),Oa(a,y),ci(a,br()),v;if(l===6)Oa(a,y);else{if(S=a.current.alternate,(y&30)===0&&!Cf(S)&&(l=sd(a,y),l===2&&(T=Ka(a),T!==0&&(y=T,l=i0(a,T))),l===1))throw v=Lc,xs(a,0),Oa(a,y),ci(a,br()),v;switch(a.finishedWork=S,a.finishedLanes=y,l){case 0:case 1:throw Error(r(345));case 2:ws(a,li,Jo);break;case 3:if(Oa(a,y),(y&130023424)===y&&(l=t0+500-br(),10<l)){if(co(a,0)!==0)break;if(S=a.suspendedLanes,(S&y)!==y){Gn(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=wa(ws.bind(null,a,li,Jo),l);break}ws(a,li,Jo);break;case 4:if(Oa(a,y),(y&4194240)===y)break;for(l=a.eventTimes,S=-1;0<y;){var O=31-ti(y);T=1<<O,O=l[O],O>S&&(S=O),y&=~T}if(y=S,y=br()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*z1(y/1960))-y,10<y){a.timeoutHandle=wa(ws.bind(null,a,li,Jo),y);break}ws(a,li,Jo);break;case 5:ws(a,li,Jo);break;default:throw Error(r(329))}}}return ci(a,br()),a.callbackNode===v?ad.bind(null,a):null}function i0(a,l){var v=Ac;return a.current.memoizedState.isDehydrated&&(xs(a,l).flags|=256),a=sd(a,l),a!==2&&(l=li,li=v,l!==null&&o0(l)),a}function o0(a){li===null?li=a:li.push.apply(li,a)}function Cf(a){for(var l=a;;){if(l.flags&16384){var v=l.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var y=0;y<v.length;y++){var S=v[y],T=S.getSnapshot;S=S.value;try{if(!me(T(),S))return!1}catch{return!1}}}if(v=l.child,l.subtreeFlags&16384&&v!==null)v.return=l,l=v;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Oa(a,l){for(l&=~rd,l&=~Pc,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var v=31-ti(l),y=1<<v;a[v]=-1,l&=~y}}function $1(a){if((er&6)!==0)throw Error(r(327));kl();var l=co(a,0);if((l&1)===0)return ci(a,br()),null;var v=sd(a,l);if(a.tag!==0&&v===2){var y=Ka(a);y!==0&&(l=y,v=i0(a,y))}if(v===1)throw v=Lc,xs(a,0),Oa(a,l),ci(a,br()),v;if(v===6)throw Error(r(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,ws(a,li,Jo),ci(a,br()),null}function a0(a,l){var v=er;er|=1;try{return a(l)}finally{er=v,er===0&&(ys=br()+500,Mu&&ka())}}function bs(a){Fa!==null&&Fa.tag===0&&(er&6)===0&&kl();var l=er;er|=1;var v=Oi.transition,y=qt;try{if(Oi.transition=null,qt=1,a)return a()}finally{qt=y,Oi.transition=v,er=l,(er&6)===0&&ka()}}function s0(){wi=Sl.current,Tr(Sl)}function xs(a,l){a.finishedWork=null,a.finishedLanes=0;var v=a.timeoutHandle;if(v!==-1&&(a.timeoutHandle=-1,cc(v)),Kr!==null)for(v=Kr.return;v!==null;){var y=v;switch(us(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&ku();break;case 3:Ea(),Tr(ii),Tr(Fn),Ou();break;case 5:Ru(y);break;case 4:Ea();break;case 13:Tr(Fr);break;case 19:Tr(Fr);break;case 10:Pu(y.type._context);break;case 22:case 23:s0()}v=v.return}if(un=a,Kr=a=no(a.current,null),_n=wi=l,on=0,Lc=null,rd=Pc=Aa=0,li=Ac=null,hs!==null){for(l=0;l<hs.length;l++)if(v=hs[l],y=v.interleaved,y!==null){v.interleaved=null;var S=y.next,T=v.pending;if(T!==null){var O=T.next;T.next=S,y.next=O}v.pending=y}hs=null}return a}function B1(a,l){do{var v=Kr;try{if(Yo(),vc.current=Wu,fl){for(var y=Nr.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}fl=!1}if(Ia=0,nn=Xr=Nr=null,mc=!1,fs=0,e0.current=null,v===null||v.return===null){on=1,Lc=l,Kr=null;break}e:{var T=a,O=v.return,Q=v,te=l;if(l=_n,Q.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var be=te,Le=Q,Re=Le.tag;if((Le.mode&1)===0&&(Re===0||Re===11||Re===15)){var Ie=Le.alternate;Ie?(Le.updateQueue=Ie.updateQueue,Le.memoizedState=Ie.memoizedState,Le.lanes=Ie.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var Xe=E1(O);if(Xe!==null){Xe.flags&=-257,Vh(Xe,O,Q,T,l),Xe.mode&1&&Cc(T,be,l),l=Xe,te=be;var Ke=l.updateQueue;if(Ke===null){var et=new Set;et.add(te),l.updateQueue=et}else Ke.add(te);break e}else{if((l&1)===0){Cc(T,be,l),l0();break e}te=Error(r(426))}}else if(Er&&Q.mode&1){var jr=E1(O);if(jr!==null){(jr.flags&65536)===0&&(jr.flags|=256),Vh(jr,O,Q,T,l),wo(ms(te,Q));break e}}T=te=ms(te,Q),on!==4&&(on=2),Ac===null?Ac=[T]:Ac.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var he=wc(T,te,l);x1(T,he);break e;case 1:Q=te;var ie=T.type,ge=T.stateNode;if((T.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Da===null||!Da.has(ge)))){T.flags|=65536,l&=-l,T.lanes|=l;var ze=ju(T,Q,l);x1(T,ze);break e}}T=T.return}while(T!==null)}U1(v)}catch(it){l=it,Kr===v&&v!==null&&(Kr=v=v.return);continue}break}while(!0)}function V1(){var a=td.current;return td.current=Wu,a===null?Wu:a}function l0(){(on===0||on===3||on===2)&&(on=4),un===null||(Aa&268435455)===0&&(Pc&268435455)===0||Oa(un,_n)}function sd(a,l){var v=er;er|=2;var y=V1();(un!==a||_n!==l)&&(Jo=null,xs(a,l));do try{_f();break}catch(S){B1(a,S)}while(!0);if(Yo(),er=v,td.current=y,Kr!==null)throw Error(r(261));return un=null,_n=0,on}function _f(){for(;Kr!==null;)W1(Kr)}function Sf(){for(;Kr!==null&&!Ga();)W1(Kr)}function W1(a){var l=Y1(a.alternate,a,wi);a.memoizedProps=a.pendingProps,l===null?U1(a):Kr=l,e0.current=null}function U1(a){var l=a;do{var v=l.alternate;if(a=l.return,(l.flags&32768)===0){if(v=bf(v,l,wi),v!==null){Kr=v;return}}else{if(v=xf(v,l),v!==null){v.flags&=32767,Kr=v;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{on=6,Kr=null;return}}if(l=l.sibling,l!==null){Kr=l;return}Kr=l=a}while(l!==null);on===0&&(on=5)}function ws(a,l,v){var y=qt,S=Oi.transition;try{Oi.transition=null,qt=1,kf(a,l,v,y)}finally{Oi.transition=S,qt=y}return null}function kf(a,l,v,y){do kl();while(Fa!==null);if((er&6)!==0)throw Error(r(327));v=a.finishedWork;var S=a.finishedLanes;if(v===null)return null;if(a.finishedWork=null,a.finishedLanes=0,v===a.current)throw Error(r(177));a.callbackNode=null,a.callbackPriority=0;var T=v.lanes|v.childLanes;if(jl(a,T),a===un&&(Kr=un=null,_n=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||id||(id=!0,X1(da,function(){return kl(),null})),T=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||T){T=Oi.transition,Oi.transition=null;var O=qt;qt=1;var Q=er;er|=4,e0.current=null,wf(a,v),Kh(v,a),gf(as),nu=!!sc,as=sc=null,a.current=v,ed(v),Gc(),er=Q,qt=O,Oi.transition=T}else a.current=v;if(id&&(id=!1,Fa=a,Zn=S),T=a.pendingLanes,T===0&&(Da=null),Kc(v.stateNode),ci(a,br()),l!==null)for(y=a.onRecoverableError,v=0;v<l.length;v++)S=l[v],y(S.value,{componentStack:S.stack,digest:S.digest});if(nd)throw nd=!1,a=r0,r0=null,a;return(Zn&1)!==0&&a.tag!==0&&kl(),T=a.pendingLanes,(T&1)!==0?a===n0?Dc++:(Dc=0,n0=a):Dc=0,ka(),null}function kl(){if(Fa!==null){var a=uo(Zn),l=Oi.transition,v=qt;try{if(Oi.transition=null,qt=16>a?16:a,Fa===null)var y=!1;else{if(a=Fa,Fa=null,Zn=0,(er&6)!==0)throw Error(r(331));var S=er;for(er|=4,Ge=a.current;Ge!==null;){var T=Ge,O=T.child;if((Ge.flags&16)!==0){var Q=T.deletions;if(Q!==null){for(var te=0;te<Q.length;te++){var be=Q[te];for(Ge=be;Ge!==null;){var Le=Ge;switch(Le.tag){case 0:case 11:case 15:Ko(8,Le,T)}var Re=Le.child;if(Re!==null)Re.return=Le,Ge=Re;else for(;Ge!==null;){Le=Ge;var Ie=Le.sibling,Xe=Le.return;if(F1(Le),Le===be){Ge=null;break}if(Ie!==null){Ie.return=Xe,Ge=Ie;break}Ge=Xe}}}var Ke=T.alternate;if(Ke!==null){var et=Ke.child;if(et!==null){Ke.child=null;do{var jr=et.sibling;et.sibling=null,et=jr}while(et!==null)}}Ge=T}}if((T.subtreeFlags&2064)!==0&&O!==null)O.return=T,Ge=O;else e:for(;Ge!==null;){if(T=Ge,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:Ko(9,T,T.return)}var he=T.sibling;if(he!==null){he.return=T.return,Ge=he;break e}Ge=T.return}}var ie=a.current;for(Ge=ie;Ge!==null;){O=Ge;var ge=O.child;if((O.subtreeFlags&2064)!==0&&ge!==null)ge.return=O,Ge=ge;else e:for(O=ie;Ge!==null;){if(Q=Ge,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:Ic(9,Q)}}catch(it){zr(Q,Q.return,it)}if(Q===O){Ge=null;break e}var ze=Q.sibling;if(ze!==null){ze.return=Q.return,Ge=ze;break e}Ge=Q.return}}if(er=S,ka(),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(qa,a)}catch{}y=!0}return y}finally{qt=v,Oi.transition=l}}return!1}function ld(a,l,v){l=ms(v,l),l=wc(a,l,1),a=Di(a,l,1),l=Gn(),a!==null&&(pa(a,1,l),ci(a,l))}function zr(a,l,v){if(a.tag===3)ld(a,a,v);else for(;l!==null;){if(l.tag===3){ld(l,a,v);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Da===null||!Da.has(y))){a=ms(v,a),a=ju(l,a,1),l=Di(l,a,1),a=Gn(),l!==null&&(pa(l,1,a),ci(l,a));break}}l=l.return}}function Mf(a,l,v){var y=a.pingCache;y!==null&&y.delete(l),l=Gn(),a.pingedLanes|=a.suspendedLanes&v,un===a&&(_n&v)===v&&(on===4||on===3&&(_n&130023424)===_n&&500>br()-t0?xs(a,0):rd|=v),ci(a,l)}function H1(a,l){l===0&&((a.mode&1)===0?l=1:(l=Qa,Qa<<=1,(Qa&130023424)===0&&(Qa=4194304)));var v=Gn();a=Xo(a,l),a!==null&&(pa(a,l,v),ci(a,v))}function Tf(a){var l=a.memoizedState,v=0;l!==null&&(v=l.retryLane),H1(a,v)}function Ef(a,l){var v=0;switch(a.tag){case 13:var y=a.stateNode,S=a.memoizedState;S!==null&&(v=S.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(l),H1(a,v)}var Y1;Y1=function(a,l,v){if(a!==null)if(a.memoizedProps!==l.pendingProps||ii.current)Xn=!0;else{if((a.lanes&v)===0&&(l.flags&128)===0)return Xn=!1,P1(a,l,v);Xn=(a.flags&131072)!==0}else Xn=!1,Er&&(l.flags&1048576)!==0&&g1(l,Eu,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;qu(a,l),a=l.pendingProps;var S=cl(l,Fn.current);Ta(l,v),S=gs(null,l,y,a,S,v);var T=Nu();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,oi(y)?(T=!0,Ei(l)):T=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Du(l),S.updater=Yu,l.stateNode=S,S._reactInternals=l,Bh(l,y,a,v),l=jh(null,l,y,!0,T,v)):(l.tag=0,Er&&T&&uc(l),xn(null,l,S,v),l=l.child),l;case 16:y=l.elementType;e:{switch(qu(a,l),a=l.pendingProps,S=y._init,y=S(y._payload),l.type=y,S=l.tag=Lf(y),a=Ri(y,a),S){case 0:l=Yh(null,l,y,a,v);break e;case 1:l=Xh(null,l,y,a,v);break e;case 11:l=I1(null,l,y,a,v);break e;case 14:l=Wh(null,l,y,Ri(y.type,a),v);break e}throw Error(r(306,y,""))}return l;case 0:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ri(y,S),Yh(a,l,y,S,v);case 1:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ri(y,S),Xh(a,l,y,S,v);case 3:e:{if(L1(l),a===null)throw Error(r(387));y=l.pendingProps,T=l.memoizedState,S=T.element,b1(a,l),hl(l,y,null,v);var O=l.memoizedState;if(y=O.element,T.isDehydrated)if(T={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){S=ms(Error(r(423)),l),l=Mo(a,l,y,v,S);break e}else if(y!==S){S=ms(Error(r(424)),l),l=Mo(a,l,y,v,S);break e}else for(yi=Ca(l.stateNode.containerInfo.firstChild),On=l,Er=!0,qi=null,v=Lu(l,null,y,v),l.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(xo(),y===S){l=Ki(a,l,v);break e}xn(a,l,y,v)}l=l.child}return l;case 5:return Th(l),a===null&&ai(l),y=l.type,S=l.pendingProps,T=a!==null?a.memoizedProps:null,O=S.children,lc(y,S)?O=null:T!==null&&lc(y,T)&&(l.flags|=32),Hh(a,l),xn(a,l,O,v),l.child;case 6:return a===null&&ai(l),null;case 13:return Gu(a,l,v);case 4:return Mh(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=Wr(l,null,y,v):xn(a,l,y,v),l.child;case 11:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ri(y,S),I1(a,l,y,S,v);case 7:return xn(a,l,l.pendingProps,v),l.child;case 8:return xn(a,l,l.pendingProps.children,v),l.child;case 12:return xn(a,l,l.pendingProps.children,v),l.child;case 10:e:{if(y=l.type._context,S=l.pendingProps,T=l.memoizedProps,O=S.value,_r(pc,y._currentValue),y._currentValue=O,T!==null)if(me(T.value,O)){if(T.children===S.children&&!ii.current){l=Ki(a,l,v);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var Q=T.dependencies;if(Q!==null){O=T.child;for(var te=Q.firstContext;te!==null;){if(te.context===y){if(T.tag===1){te=jo(-1,v&-v),te.tag=2;var be=T.updateQueue;if(be!==null){be=be.shared;var Le=be.pending;Le===null?te.next=te:(te.next=Le.next,Le.next=te),be.pending=te}}T.lanes|=v,te=T.alternate,te!==null&&(te.lanes|=v),bn(T.return,v,l),Q.lanes|=v;break}te=te.next}}else if(T.tag===10)O=T.type===l.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(r(341));O.lanes|=v,Q=O.alternate,Q!==null&&(Q.lanes|=v),bn(O,v,l),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===l){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}xn(a,l,S.children,v),l=l.child}return l;case 9:return S=l.type,y=l.pendingProps.children,Ta(l,v),S=Pi(S),y=y(S),l.flags|=1,xn(a,l,y,v),l.child;case 14:return y=l.type,S=Ri(y,l.pendingProps),S=Ri(y.type,S),Wh(a,l,y,S,v);case 15:return ko(a,l,l.type,l.pendingProps,v);case 17:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ri(y,S),qu(a,l),l.tag=1,oi(y)?(a=!0,Ei(l)):a=!1,Ta(l,v),vs(l,y,S),Bh(l,y,S,v),jh(null,l,y,!0,a,v);case 19:return La(a,l,v);case 22:return Uh(a,l,v)}throw Error(r(156,l.tag))};function X1(a,l){return Bl(a,l)}function If(a,l,v,y){this.tag=a,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ni(a,l,v,y){return new If(a,l,v,y)}function cd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Lf(a){if(typeof a=="function")return cd(a)?1:0;if(a!=null){if(a=a.$$typeof,a===J)return 11;if(a===le)return 14}return 2}function no(a,l){var v=a.alternate;return v===null?(v=Ni(a.tag,l,a.key,a.mode),v.elementType=a.elementType,v.type=a.type,v.stateNode=a.stateNode,v.alternate=a,a.alternate=v):(v.pendingProps=l,v.type=a.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=a.flags&14680064,v.childLanes=a.childLanes,v.lanes=a.lanes,v.child=a.child,v.memoizedProps=a.memoizedProps,v.memoizedState=a.memoizedState,v.updateQueue=a.updateQueue,l=a.dependencies,v.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},v.sibling=a.sibling,v.index=a.index,v.ref=a.ref,v}function ud(a,l,v,y,S,T){var O=2;if(y=a,typeof a=="function")cd(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case D:return Cs(v.children,S,T,l);case $:O=8,S|=8;break;case z:return a=Ni(12,v,l,S|2),a.elementType=z,a.lanes=T,a;case H:return a=Ni(13,v,l,S),a.elementType=H,a.lanes=T,a;case ee:return a=Ni(19,v,l,S),a.elementType=ee,a.lanes=T,a;case ae:return dd(v,S,T,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case B:O=10;break e;case Z:O=9;break e;case J:O=11;break e;case le:O=14;break e;case ce:O=16,y=null;break e}throw Error(r(130,a==null?a:typeof a,""))}return l=Ni(O,v,l,S),l.elementType=a,l.type=y,l.lanes=T,l}function Cs(a,l,v,y){return a=Ni(7,a,y,l),a.lanes=v,a}function dd(a,l,v,y){return a=Ni(22,a,y,l),a.elementType=ae,a.lanes=v,a.stateNode={isHidden:!1},a}function c0(a,l,v){return a=Ni(6,a,null,l),a.lanes=v,a}function u0(a,l,v){return l=Ni(4,a.children!==null?a.children:[],a.key,l),l.lanes=v,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function Pf(a,l,v,y,S){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function d0(a,l,v,y,S,T,O,Q,te){return a=new Pf(a,l,v,Q,te),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Ni(3,null,null,l),a.current=T,T.stateNode=a,T.memoizedState={element:y,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},Du(T),a}function Af(a,l,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:y==null?null:""+y,children:a,containerInfo:l,implementation:v}}function j1(a){if(!a)return Sa;a=a._reactInternals;e:{if(fi(a)!==a||a.tag!==1)throw Error(r(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(oi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(r(171))}if(a.tag===1){var v=a.type;if(oi(v))return h1(a,v,l)}return l}function Z1(a,l,v,y,S,T,O,Q,te){return a=d0(v,y,!0,a,S,T,O,Q,te),a.context=j1(null),v=a.current,y=Gn(),S=Ra(v),T=jo(y,S),T.callback=l??null,Di(v,T,S),a.current.lanes=S,pa(a,S,y),ci(a,y),a}function hd(a,l,v,y){var S=l.current,T=Gn(),O=Ra(S);return v=j1(v),l.context===null?l.context=v:l.pendingContext=v,l=jo(T,O),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=Di(S,l,O),a!==null&&(ro(a,S,O,T),Fu(a,S,O)),O}function pd(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function G1(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var v=a.retryLane;a.retryLane=v!==0&&v<l?v:l}}function h0(a,l){G1(a,l),(a=a.alternate)&&G1(a,l)}function Df(){return null}var q1=typeof reportError=="function"?reportError:function(a){console.error(a)};function fd(a){this._internalRoot=a}Rc.prototype.render=fd.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));hd(a,l,null,null)},Rc.prototype.unmount=fd.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;bs(function(){hd(null,a,null,null)}),l[mi]=null}};function Rc(a){this._internalRoot=a}Rc.prototype.unstable_scheduleHydration=function(a){if(a){var l=Ys();a={blockedOn:null,target:a,priority:l};for(var v=0;v<Zi.length&&l!==0&&l<Zi[v].priority;v++);Zi.splice(v,0,a),v===0&&ql(a)}};function p0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function gd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Q1(){}function Ff(a,l,v,y,S){if(S){if(typeof y=="function"){var T=y;y=function(){var be=pd(O);T.call(be)}}var O=Z1(l,y,a,0,null,!1,!1,"",Q1);return a._reactRootContainer=O,a[mi]=O.current,xa(a.nodeType===8?a.parentNode:a),bs(),O}for(;S=a.lastChild;)a.removeChild(S);if(typeof y=="function"){var Q=y;y=function(){var be=pd(te);Q.call(be)}}var te=d0(a,0,!1,null,null,!1,!1,"",Q1);return a._reactRootContainer=te,a[mi]=te.current,xa(a.nodeType===8?a.parentNode:a),bs(function(){hd(l,te,v,y)}),te}function _s(a,l,v,y,S){var T=v._reactRootContainer;if(T){var O=T;if(typeof S=="function"){var Q=S;S=function(){var te=pd(O);Q.call(te)}}hd(l,O,a,S)}else O=Ff(v,l,a,S,y);return pd(O)}Hs=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var v=No(l.pendingLanes);v!==0&&(fa(l,v|1),ci(l,br()),(er&6)===0&&(ys=br()+500,ka()))}break;case 13:bs(function(){var y=Xo(a,1);if(y!==null){var S=Gn();ro(y,a,1,S)}}),h0(a,1)}},Ja=function(a){if(a.tag===13){var l=Xo(a,134217728);if(l!==null){var v=Gn();ro(l,a,134217728,v)}h0(a,134217728)}},Zl=function(a){if(a.tag===13){var l=Ra(a),v=Xo(a,l);if(v!==null){var y=Gn();ro(v,a,l,y)}h0(a,l)}},Ys=function(){return qt},Xs=function(a,l){var v=qt;try{return qt=a,l()}finally{qt=v}},yr=function(a,l,v){switch(l){case"input":if(ut(a,v),l=v.name,v.type==="radio"&&l!=null){for(v=a;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<v.length;l++){var y=v[l];if(y!==a&&y.form===a.form){var S=Su(y);if(!S)throw Error(r(90));Je(y),ut(y,S)}}}break;case"textarea":mn(a,v);break;case"select":l=v.value,l!=null&&gt(a,!!v.multiple,l,!1)}},ei=a0,Pt=bs;var Rf={usingClientEntryPoint:!1,Events:[Dn,Et,Su,Ur,Hr,a0]},Oc={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Of={bundleType:Oc.bundleType,version:Oc.version,rendererPackageName:Oc.rendererPackageName,rendererConfig:Oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ja(a),a===null?null:a.stateNode},findFiberByHostInstance:Oc.findFiberByHostInstance||Df,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vd.isDisabled&&vd.supportsFiber)try{qa=vd.inject(Of),Oe=vd}catch{}}return Vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rf,Vi.createPortal=function(a,l){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p0(l))throw Error(r(200));return Af(a,l,null,v)},Vi.createRoot=function(a,l){if(!p0(a))throw Error(r(299));var v=!1,y="",S=q1;return l!=null&&(l.unstable_strictMode===!0&&(v=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=d0(a,1,!1,null,null,v,!1,y,S),a[mi]=l.current,xa(a.nodeType===8?a.parentNode:a),new fd(l)},Vi.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=ja(l),a=a===null?null:a.stateNode,a},Vi.flushSync=function(a){return bs(a)},Vi.hydrate=function(a,l,v){if(!gd(l))throw Error(r(200));return _s(null,a,l,!0,v)},Vi.hydrateRoot=function(a,l,v){if(!p0(a))throw Error(r(405));var y=v!=null&&v.hydratedSources||null,S=!1,T="",O=q1;if(v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(T=v.identifierPrefix),v.onRecoverableError!==void 0&&(O=v.onRecoverableError)),l=Z1(l,null,a,1,v??null,S,!1,T,O),a[mi]=l.current,xa(a),y)for(a=0;a<y.length;a++)v=y[a],S=v._getVersion,S=S(v._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[v,S]:l.mutableSourceEagerHydrationData.push(v,S);return new Rc(l)},Vi.render=function(a,l,v){if(!gd(l))throw Error(r(200));return _s(null,a,l,!1,v)},Vi.unmountComponentAtNode=function(a){if(!gd(a))throw Error(r(40));return a._reactRootContainer?(bs(function(){_s(null,null,a,!1,function(){a._reactRootContainer=null,a[mi]=null})}),!0):!1},Vi.unstable_batchedUpdates=a0,Vi.unstable_renderSubtreeIntoContainer=function(a,l,v,y){if(!gd(v))throw Error(r(200));if(a==null||a._reactInternals===void 0)throw Error(r(38));return _s(a,l,v,!1,y)},Vi.version="18.3.1-next-f1338f8080-20240426",Vi}var sm;function I6(){if(sm)return Qf.exports;sm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Qf.exports=E6(),Qf.exports}var lm;function L6(){if(lm)return tp;lm=1;var e=I6();return tp.createRoot=e.createRoot,tp.hydrateRoot=e.hydrateRoot,tp}var P6=L6(),A6=Object.defineProperty,D6=(e,t,r)=>t in e?A6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xe=(e,t,r)=>(D6(e,typeof t!="symbol"?t+"":t,r),r);/**
     * @license
     * KLineChart v10.0.0-alpha8
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */var Mg=function(e,t){return Mg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Mg(e,t)};function At(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Mg(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var je=function(){return je=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},je.apply(this,arguments)};function Mp(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Ry(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(p){try{h(n.next(p))}catch(f){s(f)}}function d(p){try{h(n.throw(p))}catch(f){s(f)}}function h(p){p.done?o(p.value):i(p.value).then(u,d)}h((n=n.apply(e,[])).next())})}function Oy(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(h){return function(p){return d([h,p])}}function d(h){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(p){h=[6,p],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function sa(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function B0(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function Wp(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function vn(e,t){if(!(!na(e)&&!na(t))){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=e[r],i=t[r];na(i)&&na(n)?vn(n,i):we(t[r])&&(e[r]=$d(t[r]))}}}function $d(e){if(!na(e))return e;var t=null;Va(e)?t=[]:t={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=e[r];na(n)?t[r]=$d(n):t[r]=n}return t}function Va(e){return Object.prototype.toString.call(e)==="[object Array]"}function pi(e){return typeof e=="function"}function na(e){return typeof e=="object"&&we(e)}function ht(e){return typeof e=="number"&&Number.isFinite(e)}function we(e){return e!=null}function A0(e){return typeof e=="boolean"}function ur(e){return typeof e=="string"}function Bd(e){return e==="transparent"||e==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(e)||/^[hH][Ss][Ll][Aa]\(([\s]*(3603[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(e)}function Pl(e,t){var r=e.replace(/^#/,""),n=parseInt(r,16),i=n>>16&255,o=n>>8&255,s=n&255;return"rgba(".concat(i,", ").concat(o,", ").concat(s,", ").concat(t??1,")")}var ft={RED:"#F92855",GREEN:"#2DC08E",WHITE:"#FFFFFF",GREY:"#76808F",BLUE:"#1677FF"};function F6(){return{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]}}}function R6(){var e={show:!0,color:ft.GREY,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"};return{type:"candle_solid",bar:{compareRule:"current_open",upColor:ft.GREEN,downColor:ft.RED,noChangeColor:ft.GREY,upBorderColor:ft.GREEN,downBorderColor:ft.RED,noChangeBorderColor:ft.GREY,upWickColor:ft.GREEN,downWickColor:ft.RED,noChangeWickColor:ft.GREY},area:{lineSize:2,lineColor:ft.BLUE,smooth:!1,value:"close",backgroundColor:[{offset:0,color:Pl(ft.BLUE,.01)},{offset:1,color:Pl(ft.BLUE,.2)}],point:{show:!0,color:ft.BLUE,radius:4,rippleColor:Pl(ft.BLUE,.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:je({},e),low:je({},e),last:{show:!0,compareRule:"current_open",upColor:ft.GREEN,downColor:ft.RED,noChangeColor:ft.GREY,line:{show:!0,style:"dashed",dashedValue:[4,4],size:1},text:{show:!0,style:"fill",size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:"solid",borderSize:0,borderDashedValue:[2,2],color:ft.WHITE,family:"Helvetica Neue",weight:"normal",borderRadius:2},extendTexts:[]}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",rect:{position:"fixed",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},title:{show:!0,size:14,family:"Helvetica Neue",weight:"normal",color:ft.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,template:"{ticker}  {period}"},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:ft.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a",template:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}]},features:[]},renko:{brick:{size:10}}}}function O6(){var e=Pl(ft.GREEN,.7),t=Pl(ft.RED,.7);return{ohlc:{compareRule:"current_open",upColor:e,downColor:t,noChangeColor:ft.GREY},bars:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:e,downColor:t,noChangeColor:ft.GREY}],lines:["#FF9600","#935EBD",ft.BLUE,"#E11D74","#01C5C4"].map(function(r){return{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:r}}),circles:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:e,downColor:t,noChangeColor:ft.GREY}],lastValueMark:{show:!1,text:{show:!1,style:"fill",color:ft.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",title:{show:!0,showName:!0,showParams:!0,size:12,family:"Helvetica Neue",weight:"normal",color:ft.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:ft.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a"},features:[]}}}function cm(){return{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:ft.GREY,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}}}function N6(){return{show:!0,horizontal:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:ft.GREY},text:{show:!0,style:"fill",color:ft.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:ft.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:ft.GREY},features:[]},vertical:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:ft.GREY},text:{show:!0,style:"fill",color:ft.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:ft.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:ft.GREY}}}}function z6(){var e=Pl(ft.BLUE,.35),t=Pl(ft.BLUE,.25);function r(){return{style:"fill",color:ft.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:ft.BLUE,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:ft.BLUE}}return{point:{color:ft.BLUE,borderColor:e,borderSize:1,radius:5,activeColor:ft.BLUE,activeBorderColor:e,activeBorderSize:3,activeRadius:5},line:{style:"solid",smooth:!1,color:ft.BLUE,size:1,dashedValue:[2,2]},rect:{style:"fill",color:t,borderColor:ft.BLUE,borderSize:1,borderRadius:0,borderStyle:"solid",borderDashedValue:[2,2]},polygon:{style:"fill",color:ft.BLUE,borderColor:ft.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},circle:{style:"fill",color:t,borderColor:ft.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},arc:{style:"solid",color:ft.BLUE,size:1,dashedValue:[2,2]},text:r()}}function $6(){return{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:Pl(ft.BLUE,.08)}}function Ny(){return{grid:F6(),candle:R6(),indicator:O6(),xAxis:cm(),yAxis:cm(),separator:$6(),crosshair:N6(),overlay:z6()}}var B6=/\\(\\)?/g,V6=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function Mn(e,t,r){if(we(e)){var n=[];t.replace(V6,function(u){for(var d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];var p=u;return we(d[1])?p=d[2].replace(B6,"$1"):we(d[0])&&(p=d[0].trim()),n.push(p),""});for(var i=e,o=0,s=n.length;we(i)&&o<s;)i=i==null?void 0:i[n[o++]];return we(i)?i:r??"--"}return r??"--"}function W6(e,t){var r={};return e.formatToParts(new Date(t)).forEach(function(n){var i=n.type,o=n.value;switch(i){case"year":{r.YYYY=o;break}case"month":{r.MM=o;break}case"day":{r.DD=o;break}case"hour":{r.HH=o==="24"?"00":o;break}case"minute":{r.mm=o;break}case"second":{r.ss=o;break}}}),r}function zy(e,t,r){var n=W6(e,t);return r.replace(/YYYY|MM|DD|HH|mm|ss/g,function(i){return n[i]})}function Kn(e,t){var r=+e;return ht(r)?r.toFixed(t??2):"".concat(e)}function $y(e){var t=+e;if(ht(t)){if(t>1e9)return"".concat(+(t/1e9).toFixed(3),"B");if(t>1e6)return"".concat(+(t/1e6).toFixed(3),"M");if(t>1e3)return"".concat(+(t/1e3).toFixed(3),"K")}return"".concat(e)}function By(e,t){var r="".concat(e);if(t.length===0)return r;if(r.includes(".")){var n=r.split(".");return"".concat(n[0].replace(/(\d)(?=(\d{3})+$)/g,function(i){return"".concat(i).concat(t)}),".").concat(n[1])}return r.replace(/(\d)(?=(\d{3})+$)/g,function(i){return"".concat(i).concat(t)})}function Vy(e,t){var r="".concat(e),n=new RegExp("\\.0{"+t+",}[1-9][0-9]*$");if(n.test(r)){var i=r.split("."),o=i.length-1,s=i[o],u=/0*/.exec(s);if(we(u)){var d=u[0].length;return i[o]=s.replace(/0*/,"0{".concat(d,"}")),i.join(".")}}return r}function um(e,t){return e.replace(/\{(\w+)\}/g,function(r,n){var i=t[n];return we(i)?i:"{".concat(n,"}")})}var v0=null;function Al(e){var t,r;return(r=(t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.devicePixelRatio)!==null&&r!==void 0?r:1}function Xc(e,t,r){return"".concat(t??"normal"," ").concat(e??12,"px ").concat(r??"Helvetica Neue")}function ia(e,t,r,n){if(!we(v0)){var i=document.createElement("canvas"),o=Al(i);v0=i.getContext("2d"),v0.scale(o,o)}return v0.font=Xc(t,r,n),Math.round(v0.measureText(e).width)}function Tp(e){var t={width:0,height:0,left:0,right:0,top:0,bottom:0};return we(e)&&vn(t,e),t}var Fd=-1;function Ep(e){return pi(window.requestAnimationFrame)?window.requestAnimationFrame(e):window.setTimeout(e,20)}function dm(e){pi(window.cancelAnimationFrame)?window.cancelAnimationFrame(e):window.clearTimeout(e)}function hm(e){if(pi(window.requestIdleCallback))return window.requestIdleCallback(e);var t=performance.now();return window.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-t))}})},1)}function U6(e){pi(window.cancelIdleCallback)?window.cancelIdleCallback(e):window.clearTimeout(e)}var Tg=(function(){function e(t){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,vn(this._options,t)}return e.prototype._loop=function(){var t=this;this._running=!0;var r=function(){var n;if(t._running){var i=new Date().getTime()-t._time;i<t._options.duration?((n=t._doFrameCallback)===null||n===void 0||n.call(t,i),Ep(r)):(t.stop(),t._currentIterationCount++,t._currentIterationCount<t._options.iterationCount&&t.start())}};Ep(r)},e.prototype.doFrame=function(t){return this._doFrameCallback=t,this},e.prototype.setDuration=function(t){return this._options.duration=t,this},e.prototype.setIterationCount=function(t){return this._options.iterationCount=t,this},e.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},e.prototype.stop=function(){var t;this._running&&((t=this._doFrameCallback)===null||t===void 0||t.call(this,this._options.duration)),this._running=!1},e})(),eg=1,pm=new Date().getTime();function vp(e){var t=new Date().getTime();return t===pm?++eg:eg=1,pm=t,"".concat(e??"").concat(t,"_").concat(eg)}function Ns(e,t){var r,n=document.createElement(e),i=t??{};for(var o in i)n.style[o]=(r=i[o])!==null&&r!==void 0?r:"";return n}function Eg(e,t,r){var n=0,i=0;for(i=e.length-1;n!==i;){var o=Math.floor((i+n)/2),s=i-n,u=e[o][t];if(r===e[n][t])return n;if(r===e[i][t])return i;if(r===u)return o;if(r>u?n=o:i=o,s<=2)break}return n}function H6(e){var t=Math.floor(Es(e)),r=Uc(t),n=e/r,i=0;return n<1.5?i=1:n<2.5?i=2:n<3.5?i=3:n<4.5?i=4:n<5.5?i=5:n<6.5?i=6:i=8,e=i*r,+e.toFixed(Math.abs(t))}function fm(e,t){t=Math.max(0,t??0);var r=Math.pow(10,t);return Math.round(e*r)/r}function Y6(e){var t=e.toString(),r=t.indexOf("e");if(r>0){var n=+t.slice(r+1);return n<0?-n:0}var i=t.indexOf(".");return i<0?0:t.length-1-i}function Wy(e,t,r){for(var n,i,o=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],s=e.length,u=0;u<s;){var d=e[u];o[0]=Math.max((n=d[t])!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,o[0]),o[1]=Math.min((i=d[r])!==null&&i!==void 0?i:Number.MAX_SAFE_INTEGER,o[1]),++u}return o}function Es(e){return e===0?0:Math.log10(e)}function Uc(e){return Math.pow(10,e)}function gm(){return{from:0,to:0,realFrom:0,realTo:0}}function vm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join("_")}var X6=(function(){function e(t){this._requestIdleCallbackId=Fd,this._tasks=t??[],this._operateTasks()}return e.prototype._operateTasks=function(t){var r=this;this._requestIdleCallbackId!==Fd&&(U6(this._requestIdleCallbackId),this._requestIdleCallbackId=Fd),t==null||t(),this._requestIdleCallbackId=hm(function(n){r._runTasks(n)})},e.prototype._runTasks=function(t){for(var r=this;t.timeRemaining()>0&&this._tasks.length>0;){var n=this._tasks.shift();n==null||n.handler()}this._tasks.length>0&&(this._requestIdleCallbackId=hm(function(i){r._runTasks(i)}))},e.prototype.addTask=function(t){var r=this;return this._operateTasks(function(){var n=r._tasks.findIndex(function(i){return i.id===t.id});n>-1?r._tasks[n]=t:r._tasks.push(t)}),this},e.prototype.removeTask=function(t){var r=this;return we(t)&&this._operateTasks(function(){if(we(t)){var n=r._tasks.findIndex(function(i){return i.id===t});n>-1&&r._tasks.splice(n,1)}else r._tasks=[]}),this},e})(),j6=(function(){function e(){this._callbacks=[]}return e.prototype.subscribe=function(t){var r=this._callbacks.indexOf(t);r<0&&this._callbacks.push(t)},e.prototype.unsubscribe=function(t){if(pi(t)){var r=this._callbacks.indexOf(t);r>-1&&this._callbacks.splice(r,1)}else this._callbacks=[]},e.prototype.execute=function(t){this._callbacks.forEach(function(r){r(t)})},e.prototype.isEmpty=function(){return this._callbacks.length===0},e})();function Xg(e,t,r,n){var i=e.result,o=e.figures,s=e.styles,u=Mn(s,"circles",r.circles),d=u.length,h=Mn(s,"bars",r.bars),p=h.length,f=Mn(s,"lines",r.lines),m=f.length,x=0,b=0,C=0,_,k=0;o.forEach(function(M){var L,A,P,W;switch(M.type){case"circle":{k=x;var D=u[x%d];_=je(je({},D),{color:D.noChangeColor}),x++;break}case"bar":{k=b;var $=h[b%p];_=je(je({},$),{color:$.noChangeColor}),b++;break}case"line":{k=C,_=f[C%m],C++;break}}if(we(M.type)){var z=(L=M.styles)===null||L===void 0?void 0:L.call(M,{data:{prev:i[(A=t.prev)!==null&&A!==void 0?A:""],current:i[(P=t.current)!==null&&P!==void 0?P:""],next:i[(W=t.next)!==null&&W!==void 0?W:""]},indicator:e,defaultStyles:r});n(M,je(je({},_),z),k)}})}var Uy=(function(){function e(t){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series="normal",this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(r,n){var i=JSON.stringify(r.calcParams)!==JSON.stringify(n.calcParams)||r.figures!==n.figures||r.calc!==n.calc,o=i||r.shortName!==n.shortName||r.series!==n.series||r.minValue!==n.minValue||r.maxValue!==n.maxValue||r.precision!==n.precision||r.shouldOhlc!==n.shouldOhlc||r.shouldFormatBigNumber!==n.shouldFormatBigNumber||r.visible!==n.visible||r.zLevel!==n.zLevel||r.extendData!==n.extendData||r.regenerateFigures!==n.regenerateFigures||r.createTooltipDataSource!==n.createTooltipDataSource||r.draw!==n.draw;return{calc:i,draw:o}},this.calc=function(){return{}},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.onDataStateChange=null,this.result={},this._lockSeriesPrecision=!1,this.override(t),this._lockSeriesPrecision=!1}return e.prototype.override=function(t){var r,n,i=this,o=i.result,s=Mp(i,["result"]);this._prevIndicator=je(je({},$d(s)),{result:o});var u=t.id,d=t.name,h=t.shortName,p=t.precision,f=t.styles,m=t.figures,x=t.calcParams,b=Mp(t,["id","name","shortName","precision","styles","figures","calcParams"]);!ur(this.id)&&ur(u)&&(this.id=u),ur(this.name)||(this.name=d??""),this.shortName=(r=h??this.shortName)!==null&&r!==void 0?r:this.name,ht(p)&&(this.precision=p,this._lockSeriesPrecision=!0),we(f)&&((n=this.styles)!==null&&n!==void 0||(this.styles={}),vn(this.styles,f)),vn(this,b),we(x)&&(this.calcParams=x,pi(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=m??this.figures},e.prototype.setSeriesPrecision=function(t){this._lockSeriesPrecision||(this.precision=t)},e.prototype.shouldUpdateImp=function(){var t=this._prevIndicator.zLevel!==this.zLevel,r=this.shouldUpdate(this._prevIndicator,this);return A0(r)?{calc:r,draw:r,sort:t}:je(je({},r),{sort:t})},e.prototype.calcImp=function(t){return Ry(this,void 0,void 0,function(){var r;return Oy(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.calc(t,this)];case 1:return r=n.sent(),this.result=r,[2,!0];case 2:return n.sent(),[2,!1];case 3:return[2]}})})},e.extend=function(t){var r=(function(n){At(i,n);function i(){return n.call(this,t)||this}return i})(e);return r},e})(),Z6={name:"AVP",shortName:"AVP",series:"price",precision:2,styles:{lines:[{color:"#A020F0",size:1}]},figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(e){var t=0,r=0;return e.reduce(function(n,i){var o,s,u={},d=(o=i.turnover)!==null&&o!==void 0?o:0,h=(s=i.volume)!==null&&s!==void 0?s:0;return t+=d,r+=h,r!==0&&(u.avp=t/r),n[i.timestamp]=u,n},{})}},G6={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(e){var t,r,n=e.data,i=e.indicator,o=e.defaultStyles,s=n.prev,u=n.current,d=(t=s==null?void 0:s.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,h=(r=u==null?void 0:u.ao)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER,p="";h>d?p=Mn(i.styles,"bars[0].upColor",o.bars[0].upColor):p=Mn(i.styles,"bars[0].downColor",o.bars[0].downColor);var f=h>d?"stroke":"fill";return{color:p,style:f,borderColor:p}}}],calc:function(e,t){var r=t.calcParams,n=Math.max(r[0],r[1]),i=0,o=0,s=0,u=0;return e.reduce(function(d,h,p){var f={},m=(h.low+h.high)/2;if(i+=m,o+=m,p>=r[0]-1){s=i/r[0];var x=e[p-(r[0]-1)];i-=(x.low+x.high)/2}if(p>=r[1]-1){u=o/r[1];var x=e[p-(r[1]-1)];o-=(x.low+x.high)/2}return p>=n-1&&(f.ao=s-u),d[h.timestamp]=f,d},{})}},q6={name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#ff0000",size:1}]},figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"bias".concat(r+1),title:"BIAS".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[];return e.reduce(function(o,s,u){var d={},h=s.close;return r.forEach(function(p,f){var m;if(i[f]=((m=i[f])!==null&&m!==void 0?m:0)+h,u>=p-1){var x=i[f]/r[f];d[n[f].key]=(h-x)/x*100,i[f]-=e[u-(p-1)].close}}),o[s.timestamp]=d,o},{})}};function Q6(e,t){var r=e.length,n=0;return e.forEach(function(i){var o=i.close-t;n+=o*o}),n=Math.abs(n),Math.sqrt(n/r)}var K6={name:"BOLL",shortName:"BOLL",series:"price",calcParams:[20,2],precision:2,shouldOhlc:!0,styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=r[0]-1,i=0;return e.reduce(function(o,s,u){var d=s.close,h={};if(i+=d,u>=n){h.mid=i/r[0];var p=Q6(e.slice(u-n,u+1),h.mid);h.up=h.mid+r[1]*p,h.dn=h.mid-r[1]*p,i-=e[u-n].close}return o[s.timestamp]=h,o},{})}},J6={name:"BRAR",shortName:"BRAR",calcParams:[26],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0;return e.reduce(function(u,d,h){var p,f,m={},x=d.high,b=d.low,C=d.open,_=((p=e[h-1])!==null&&p!==void 0?p:d).close;if(o+=x-C,s+=C-b,n+=x-_,i+=_-b,h>=r[0]-1){s!==0?m.ar=o/s*100:m.ar=0,i!==0?m.br=n/i*100:m.br=0;var k=e[h-(r[0]-1)],M=k.high,L=k.low,A=k.open,P=((f=e[h-r[0]])!==null&&f!==void 0?f:e[h-(r[0]-1)]).close;n-=M-P,i-=P-L,o-=M-A,s-=A-L}return u[d.timestamp]=m,u},{})}},e8={name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=Math.max.apply(Math,Wp([],B0(r),!1)),i=[],o=[];return e.reduce(function(s,u,d){var h={},p=u.close;if(r.forEach(function(m,x){var b;i[x]=((b=i[x])!==null&&b!==void 0?b:0)+p,d>=m-1&&(o[x]=i[x]/m,i[x]-=e[d-(m-1)].close)}),d>=n-1){var f=0;o.forEach(function(m){f+=m}),h.bbi=f/4}return s[u.timestamp]=h,s},{})}},t8={name:"CCI",shortName:"CCI",calcParams:[20],styles:{lines:[{color:"#007FFF",size:1}]},figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=r[0]-1,i=0,o=[];return e.reduce(function(s,u,d){var h={},p=(u.high+u.low+u.close)/3;if(i+=p,o.push(p),d>=n){var f=i/r[0],m=o.slice(d-n,d+1),x=0;m.forEach(function(_){x+=Math.abs(_-f)});var b=x/r[0];h.cci=b!==0?(p-f)/b/.015:0;var C=(e[d-n].high+e[d-n].low+e[d-n].close)/3;i-=C}return s[u.timestamp]=h,s},{})}},r8={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#FFFF00",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=Math.ceil(r[1]/2.5+1),i=Math.ceil(r[2]/2.5+1),o=Math.ceil(r[3]/2.5+1),s=Math.ceil(r[4]/2.5+1),u=0,d=[],h=0,p=[],f=0,m=[],x=0,b=[],C=[],_={};return e.forEach(function(k,M){var L,A,P,W,D,$={},z=(L=e[M-1])!==null&&L!==void 0?L:k,B=(z.high+z.close+z.low+z.open)/4,Z=Math.max(0,k.high-B),J=Math.max(0,B-k.low);M>=r[0]-1&&(J!==0?$.cr=Z/J*100:$.cr=0,u+=$.cr,h+=$.cr,f+=$.cr,x+=$.cr,M>=r[0]+r[1]-2&&(d.push(u/r[1]),M>=r[0]+r[1]+n-3&&($.ma1=d[d.length-1-n]),u-=(A=C[M-(r[1]-1)].cr)!==null&&A!==void 0?A:0),M>=r[0]+r[2]-2&&(p.push(h/r[2]),M>=r[0]+r[2]+i-3&&($.ma2=p[p.length-1-i]),h-=(P=C[M-(r[2]-1)].cr)!==null&&P!==void 0?P:0),M>=r[0]+r[3]-2&&(m.push(f/r[3]),M>=r[0]+r[3]+o-3&&($.ma3=m[m.length-1-o]),f-=(W=C[M-(r[3]-1)].cr)!==null&&W!==void 0?W:0),M>=r[0]+r[4]-2&&(b.push(x/r[4]),M>=r[0]+r[4]+s-3&&($.ma4=b[b.length-1-s]),x-=(D=C[M-(r[4]-1)].cr)!==null&&D!==void 0?D:0)),C.push($),_[k.timestamp]=$}),_}},n8={name:"DMA",shortName:"DMA",calcParams:[10,50,10],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=Math.max(r[0],r[1]),i=0,o=0,s=0,u=[],d={};return e.forEach(function(h,p){var f,m={},x=h.close;i+=x,o+=x;var b=0,C=0;if(p>=r[0]-1&&(b=i/r[0],i-=e[p-(r[0]-1)].close),p>=r[1]-1&&(C=o/r[1],o-=e[p-(r[1]-1)].close),p>=n-1){var _=b-C;m.dma=_,s+=_,p>=n+r[2]-2&&(m.ama=s/r[2],s-=(f=u[p-(r[2]-1)].dma)!==null&&f!==void 0?f:0)}u.push(m),d[h.timestamp]=m}),d}},i8={name:"DMI",shortName:"DMI",calcParams:[14,6],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=0,f=[],m={};return e.forEach(function(x,b){var C,_,k={},M=(C=e[b-1])!==null&&C!==void 0?C:x,L=M.close,A=x.high,P=x.low,W=A-P,D=Math.abs(A-L),$=Math.abs(L-P),z=A-M.high,B=M.low-P,Z=Math.max(Math.max(W,D),$),J=z>0&&z>B?z:0,H=B>0&&B>z?B:0;if(n+=Z,i+=J,o+=H,b>=r[0]-1){b>r[0]-1?(s=s-s/r[0]+Z,u=u-u/r[0]+J,d=d-d/r[0]+H):(s=n,u=i,d=o);var ee=0,le=0;s!==0&&(ee=u*100/s,le=d*100/s),k.pdi=ee,k.mdi=le;var ce=0;le+ee!==0&&(ce=Math.abs(le-ee)/(le+ee)*100),h+=ce,b>=r[0]*2-2&&(b>r[0]*2-2?p=(p*(r[0]-1)+ce)/r[0]:p=h/r[0],k.adx=p,b>=r[0]*2+r[1]-3&&(k.adxr=(((_=f[b-(r[1]-1)].adx)!==null&&_!==void 0?_:0)+p)/2))}f.push(k),m[x.timestamp]=k}),m}},o8={name:"EMV",shortName:"EMV",calcParams:[14,9],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=[];return e.reduce(function(o,s,u){var d,h={};if(u>0){var p=e[u-1],f=s.high,m=s.low,x=(d=s.volume)!==null&&d!==void 0?d:0,b=(f+m)/2-(p.high+p.low)/2;if(x===0||f-m===0)h.emv=0;else{var C=x/1e8/(f-m);h.emv=b/C}n+=h.emv,i.push(h.emv),u>=r[0]&&(h.maEmv=n/r[0],n-=i[u-r[0]])}return o[s.timestamp]=h,o},{})}},a8={name:"EMA",shortName:"EMA",series:"price",calcParams:[6,12,20],styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"ema".concat(r+1),title:"EMA".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=0,o=[];return e.reduce(function(s,u,d){var h={},p=u.close;return i+=p,r.forEach(function(f,m){d>=f-1&&(d>f-1?o[m]=(2*p+(f-1)*o[m])/(f+1):o[m]=i/f,h[n[m].key]=o[m])}),s[u.timestamp]=h,s},{})}},s8={name:"MTM",shortName:"MTM",calcParams:[12,6],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=[],o={};return e.forEach(function(s,u){var d,h={};if(u>=r[0]){var p=s.close,f=e[u-r[0]].close;h.mtm=p-f,n+=h.mtm,u>=r[0]+r[1]-1&&(h.maMtm=n/r[1],n-=(d=i[u-(r[1]-1)].mtm)!==null&&d!==void 0?d:0)}i.push(h),o[s.timestamp]=h}),o}},l8={name:"MA",shortName:"MA",series:"price",calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"ma".concat(r+1),title:"MA".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[];return e.reduce(function(o,s,u){var d={},h=s.close;return r.forEach(function(p,f){var m;i[f]=((m=i[f])!==null&&m!==void 0?m:0)+h,u>=p-1&&(d[n[f].key]=i[f]/p,i[f]-=e[u-(p-1)].close)}),o[s.timestamp]=d,o},{})}},c8={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(e){var t,r,n=e.data,i=e.indicator,o=e.defaultStyles,s=n.prev,u=n.current,d=(t=s==null?void 0:s.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,h=(r=u==null?void 0:u.macd)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER,p="";h>0?p=Mn(i.styles,"bars[0].upColor",o.bars[0].upColor):h<0?p=Mn(i.styles,"bars[0].downColor",o.bars[0].downColor):p=Mn(i.styles,"bars[0].noChangeColor",o.bars[0].noChangeColor);var f=d<h?"stroke":"fill";return{style:f,color:p,borderColor:p}}}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=0,d=0,h=Math.max(r[0],r[1]);return e.reduce(function(p,f,m){var x={},b=f.close;return n+=b,m>=r[0]-1&&(m>r[0]-1?i=(2*b+(r[0]-1)*i)/(r[0]+1):i=n/r[0]),m>=r[1]-1&&(m>r[1]-1?o=(2*b+(r[1]-1)*o)/(r[1]+1):o=n/r[1]),m>=h-1&&(s=i-o,x.dif=s,u+=s,m>=h+r[2]-2&&(m>h+r[2]-2?d=(s*2+d*(r[2]-1))/(r[2]+1):d=u/r[2],x.macd=(s-d)*2,x.dea=d)),p[f.timestamp]=x,p},{})}},u8={name:"OBV",shortName:"OBV",calcParams:[30],styles:{lines:[{color:"#A020F0",size:1},{color:"#007FFF",size:1}]},figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=[],s={};return e.forEach(function(u,d){var h,p,f,m,x=(h=e[d-1])!==null&&h!==void 0?h:u;u.close<x.close?i-=(p=u.volume)!==null&&p!==void 0?p:0:u.close>x.close&&(i+=(f=u.volume)!==null&&f!==void 0?f:0);var b={obv:i};n+=i,d>=r[0]-1&&(b.maObv=n/r[0],n-=(m=o[d-(r[0]-1)].obv)!==null&&m!==void 0?m:0),o.push(b),s[u.timestamp]=b}),s}},d8={name:"PVT",shortName:"PVT",styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(e){var t=0;return e.reduce(function(r,n,i){var o,s,u={},d=n.close,h=(o=n.volume)!==null&&o!==void 0?o:1,p=((s=e[i-1])!==null&&s!==void 0?s:n).close,f=0,m=p*h;return m!==0&&(f=(d-p)/m),t+=f,u.pvt=t,r[n.timestamp]=u,r},{})}},h8={name:"PSY",shortName:"PSY",calcParams:[12,6],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=[],s=[],u={};return e.forEach(function(d,h){var p,f,m={},x=((p=e[h-1])!==null&&p!==void 0?p:d).close,b=d.close-x>0?1:0;o.push(b),n+=b,h>=r[0]-1&&(m.psy=n/r[0]*100,i+=m.psy,h>=r[0]+r[1]-2&&(m.maPsy=i/r[1],i-=(f=s[h-(r[1]-1)].psy)!==null&&f!==void 0?f:0),n-=o[h-(r[0]-1)]),s.push(m),u[d.timestamp]=m}),u}},p8={name:"ROC",shortName:"ROC",calcParams:[12,6],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=[],i={},o=0;return e.forEach(function(s,u){var d,h,p={};if(u>=r[0]-1){var f=s.close,m=((d=e[u-r[0]])!==null&&d!==void 0?d:e[u-(r[0]-1)]).close;m!==0?p.roc=(f-m)/m*100:p.roc=0,o+=p.roc,u>=r[0]-1+r[1]-1&&(p.maRoc=o/r[1],o-=(h=n[u-(r[1]-1)].roc)!==null&&h!==void 0?h:0)}n.push(p),i[s.timestamp]=p}),i}},f8={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){var n=r+1;return{key:"rsi".concat(n),title:"RSI".concat(n,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[],o=[];return e.reduce(function(s,u,d){var h,p={},f=((h=e[d-1])!==null&&h!==void 0?h:u).close,m=u.close-f;return r.forEach(function(x,b){var C,_,k;if(m>0?i[b]=((C=i[b])!==null&&C!==void 0?C:0)+m:o[b]=((_=o[b])!==null&&_!==void 0?_:0)+Math.abs(m),d>=x-1){o[b]!==0?p[n[b].key]=100-100/(1+i[b]/o[b]):p[n[b].key]=0;var M=e[d-(x-1)],L=(k=e[d-x])!==null&&k!==void 0?k:M,A=M.close-L.close;A>0?i[b]-=A:o[b]-=Math.abs(A)}}),s[u.timestamp]=p,s},{})}},g8={name:"SMA",shortName:"SMA",series:"price",calcParams:[12,2],precision:2,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(e,t){var r=t.calcParams,n=0,i=0;return e.reduce(function(o,s,u){var d={},h=s.close;return n+=h,u>=r[0]-1&&(u>r[0]-1?i=(h*r[1]+i*(r[0]-r[1]+1))/(r[0]+1):i=n/r[0],d.sma=i),o[s.timestamp]=d,o},{})}},v8={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=[],i={};return e.forEach(function(o,s){var u,d,h,p,f={},m=o.close;if(s>=r[0]-1){var x=Wy(e.slice(s-(r[0]-1),s+1),"high","low"),b=x[0],C=x[1],_=b-C,k=(m-C)/(_===0?1:_)*100;f.k=((r[1]-1)*((d=(u=n[s-1])===null||u===void 0?void 0:u.k)!==null&&d!==void 0?d:50)+k)/r[1],f.d=((r[2]-1)*((p=(h=n[s-1])===null||h===void 0?void 0:h.d)!==null&&p!==void 0?p:50)+f.k)/r[2],f.j=3*f.k-2*f.d}n.push(f),i[o.timestamp]=f}),i}},m8={name:"SAR",shortName:"SAR",series:"price",calcParams:[2,2,20],precision:2,shouldOhlc:!0,styles:{circles:[{upColor:"#FF7F50",downColor:"#A020F0",noChangeColor:"#A8A8A8"}]},figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(e){var t,r,n,i=e.data,o=e.indicator,s=e.defaultStyles,u=i.current,d=(t=u==null?void 0:u.sar)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,h=(((r=u==null?void 0:u.high)!==null&&r!==void 0?r:0)+((n=u==null?void 0:u.low)!==null&&n!==void 0?n:0))/2,p=d<h?Mn(o.styles,"circles[0].upColor",s.circles[0].upColor):Mn(o.styles,"circles[0].downColor",s.circles[0].downColor);return{color:p}}}],calc:function(e,t){var r=t.calcParams,n=r[0]/100,i=r[1]/100,o=r[2]/100,s=n,u=-100,d=!1,h=0;return e.reduce(function(p,f,m){var x=h,b=f.high,C=f.low;if(d){(u===-100||u<b)&&(u=b,s=Math.min(s+i,o)),h=x+s*(u-x);var _=Math.min(e[Math.max(1,m)-1].low,C);h>f.low?(h=u,s=n,u=-100,d=!d):h>_&&(h=_)}else{(u===-100||u>C)&&(u=C,s=Math.min(s+i,o)),h=x+s*(u-x);var k=Math.max(e[Math.max(1,m)-1].high,b);h<f.high?(h=u,s=0,u=-100,d=!d):h<k&&(h=k)}return p[f.timestamp]={high:b,low:C,sar:h},p},{})}},y8={name:"TRIX",shortName:"TRIX",calcParams:[12,9],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=[],f={};return e.forEach(function(m,x){var b,C={},_=m.close;if(n+=_,x>=r[0]-1&&(x>r[0]-1?i=(2*_+(r[0]-1)*i)/(r[0]+1):i=n/r[0],u+=i,x>=r[0]*2-2&&(x>r[0]*2-2?o=(2*i+(r[0]-1)*o)/(r[0]+1):o=u/r[0],d+=o,x>=r[0]*3-3))){var k=0,M=0;x>r[0]*3-3?(k=(2*o+(r[0]-1)*s)/(r[0]+1),M=(k-s)/s*100):k=d/r[0],s=k,C.trix=M,h+=M,x>=r[0]*3+r[1]-4&&(C.maTrix=h/r[1],h-=(b=p[x-(r[1]-1)].trix)!==null&&b!==void 0?b:0)}p.push(C),f[m.timestamp]=C}),f}};function mm(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(e){var t=e.data,r=e.indicator,n=e.defaultStyles,i=t.current,o=Mn(r.styles,"bars[0].noChangeColor",n.bars[0].noChangeColor);return we(i)&&(i.close>i.open?o=Mn(r.styles,"bars[0].upColor",n.bars[0].upColor):i.close<i.open&&(o=Mn(r.styles,"bars[0].downColor",n.bars[0].downColor))),{color:o}}}}var b8={name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},mm()],regenerateFigures:function(e){var t=e.map(function(r,n){return{key:"ma".concat(n+1),title:"MA".concat(r,": "),type:"line"}});return t.push(mm()),t},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[];return e.reduce(function(o,s,u){var d,h=(d=s.volume)!==null&&d!==void 0?d:0,p={volume:h,open:s.open,close:s.close};return r.forEach(function(f,m){var x,b;i[m]=((x=i[m])!==null&&x!==void 0?x:0)+h,u>=f-1&&(p[n[m].key]=i[m]/f,i[m]-=(b=e[u-(f-1)].volume)!==null&&b!==void 0?b:0)}),o[s.timestamp]=p,o},{})}},x8={name:"VR",shortName:"VR",calcParams:[26,6],styles:{lines:[{color:"#FF6E6E",size:2},{color:"#FFD700",size:4}]},figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=[],d={};return e.forEach(function(h,p){var f,m,x,b,C,_={},k=h.close,M=((f=e[p-1])!==null&&f!==void 0?f:h).close,L=(m=h.volume)!==null&&m!==void 0?m:0;if(k>M?n+=L:k<M?i+=L:o+=L,p>=r[0]-1){var A=o/2;i+A===0?_.vr=0:_.vr=(n+A)/(i+A)*100,s+=_.vr,p>=r[0]+r[1]-2&&(_.maVr=s/r[1],s-=(x=u[p-(r[1]-1)].vr)!==null&&x!==void 0?x:0);var P=e[p-(r[0]-1)],W=(b=e[p-r[0]])!==null&&b!==void 0?b:P,D=P.close,$=(C=P.volume)!==null&&C!==void 0?C:0;D>W.close?n-=$:D<W.close?i-=$:o-=$}u.push(_),d[h.timestamp]=_}),d}},w8={name:"WR",shortName:"WR",calcParams:[6,10,14],styles:{lines:[{color:"#A020F0",size:1},{color:"#FFD700",size:1},{color:"#FF6E6E",size:1}]},figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"wr".concat(r+1),title:"WR".concat(r+1,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures;return e.reduce(function(i,o,s){var u={},d=o.close;return r.forEach(function(h,p){var f=h-1;if(s>=f){var m=Wy(e.slice(s-f,s+1),"high","low"),x=m[0],b=m[1],C=x-b;u[n[p].key]=C===0?0:(d-x)/C*100}}),i[o.timestamp]=u,i},{})}},jg={},C8=[Z6,G6,q6,K6,J6,e8,t8,r8,n8,i8,o8,a8,s8,l8,c8,u8,d8,h8,p8,f8,g8,v8,m8,y8,b8,x8,w8];C8.forEach(function(e){jg[e.name]=Uy.extend(e)});function Hy(e){jg[e.name]=Uy.extend(e)}function Yy(e){var t;return(t=jg[e])!==null&&t!==void 0?t:null}function ra(e,t){var r,n=(r=t==null?void 0:t.ignoreEvent)!==null&&r!==void 0?r:!1;return A0(n)?!n:!n.includes(e)}var ym=1,m0=-1,_8="overlay_",bd="overlay_figure_",Xy=(function(){function e(t){this.groupId="",this.totalStep=1,this.currentStep=ym,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode="normal",this.modeSensitivity=8,this.points=[],this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseMove=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevZLevel=0,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(t)}return e.prototype.override=function(t){var r,n;this._prevOverlay=$d(this);var i=t.id,o=t.name;t.currentStep;var s=t.points,u=t.styles,d=Mp(t,["id","name","currentStep","points","styles"]);if(vn(this,d),ur(this.name)||(this.name=o??""),!ur(this.id)&&ur(i)&&(this.id=i),we(u)&&((r=this.styles)!==null&&r!==void 0||(this.styles={}),vn(this.styles,u)),Va(s)&&s.length>0){var h=0;if(this.points=Wp([],B0(s),!1),s.length>=this.totalStep-1?(this.currentStep=m0,h=this.totalStep-1):(this.currentStep=s.length+1,h=s.length),pi(this.performEventMoveForDrawing))for(var p=0;p<h;p++)this.performEventMoveForDrawing({currentStep:p+2,mode:this.mode,points:this.points,performPointIndex:p,performPoint:this.points[p]});this.currentStep===m0&&((n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},e.prototype.getPrevZLevel=function(){return this._prevZLevel},e.prototype.setPrevZLevel=function(t){this._prevZLevel=t},e.prototype.shouldUpdate=function(){var t=this._prevOverlay.zLevel!==this.zLevel,r=t||JSON.stringify(this._prevOverlay.points)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles;return{sort:t,draw:r}},e.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=m0:this.currentStep++},e.prototype.forceComplete=function(){this.currentStep=m0},e.prototype.isDrawing=function(){return this.currentStep!==m0},e.prototype.isStart=function(){return this.currentStep===ym},e.prototype.eventMoveForDrawing=function(t){var r,n=this.currentStep-1,i={};ht(t.timestamp)&&(i.timestamp=t.timestamp),ht(t.dataIndex)&&(i.dataIndex=t.dataIndex),ht(t.value)&&(i.value=t.value),this.points[n]=i,(r=this.performEventMoveForDrawing)===null||r===void 0||r.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:n,performPoint:i})},e.prototype.eventPressedPointMove=function(t,r){var n;this.points[r].timestamp=t.timestamp,ht(t.value)&&(this.points[r].value=t.value),(n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:r,performPoint:this.points[r]})},e.prototype.startPressedMove=function(t){this._prevPressedPoint=je({},t),this._prevPressedPoints=$d(this.points)},e.prototype.eventPressedOtherMove=function(t,r){if(this._prevPressedPoint!==null){var n=null;ht(t.dataIndex)&&ht(this._prevPressedPoint.dataIndex)&&(n=t.dataIndex-this._prevPressedPoint.dataIndex);var i=null;ht(t.value)&&ht(this._prevPressedPoint.value)&&(i=t.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(o){var s;ht(o.timestamp)&&(o.dataIndex=r.timestampToDataIndex(o.timestamp));var u=je({},o);return ht(n)&&ht(o.dataIndex)&&(u.dataIndex=o.dataIndex+n,u.timestamp=(s=r.dataIndexToTimestamp(u.dataIndex))!==null&&s!==void 0?s:void 0),ht(i)&&ht(o.value)&&(u.value=o.value+i),u})}},e.extend=function(t){var r=(function(n){At(i,n);function i(){return n.call(this,t)||this}return i})(e);return r},e})(),S8={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t,r,n,i=e.chart,o=e.coordinates,s=e.bounding,u=e.overlay,d=e.yAxis,h=u.points;if(o.length>0){var p=0;if(!((t=d==null?void 0:d.isInCandle())!==null&&t!==void 0)||t)p=(n=(r=i.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2;else{var f=i.getIndicators({paneId:u.paneId});f.forEach(function(L){p=Math.max(p,L.precision)})}var m=[],x=[],b=0,C=s.width;if(o.length>1&&ht(h[0].value)&&ht(h[1].value)){var _=[1,.786,.618,.5,.382,.236,0],k=o[0].y-o[1].y,M=h[0].value-h[1].value;_.forEach(function(L){var A,P=o[1].y+k*L,W=i.getDecimalFold().format(i.getThousandsSeparator().format((((A=h[1].value)!==null&&A!==void 0?A:0)+M*L).toFixed(p)));m.push({coordinates:[{x:b,y:P},{x:C,y:P}]}),x.push({x:b,y:P,text:"".concat(W," (").concat((L*100).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:m},{type:"text",isCheckEvent:!1,attrs:x}]}return[]}},k8={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding,n={x:0,y:t[0].y};return we(t[1])&&t[0].x<t[1].x&&(n.x=r.width),[{type:"line",attrs:{coordinates:[t[0],n]}}]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].value=r.value,t[1].value=r.value},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].value=n.value)}},M8={name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=[];return t.length===2&&r.push({coordinates:t}),[{type:"line",attrs:r}]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].value=r.value,t[1].value=r.value},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].value=n.value)}},T8={name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:r.width,y:t[0].y}]}}]}},Zg=(function(){function e(){this._children=[],this._callbacks=new Map}return e.prototype.registerEvent=function(t,r){return this._callbacks.set(t,r),this},e.prototype.onEvent=function(t,r){var n=this._callbacks.get(t);return we(n)&&this.checkEventOn(r)?n(r):!1},e.prototype.dispatchEventToChildren=function(t,r){var n=this._children.length-1;if(n>-1){for(var i=n;i>-1;i--)if(this._children[i].dispatchEvent(t,r))return!0}return!1},e.prototype.dispatchEvent=function(t,r){return this.dispatchEventToChildren(t,r)?!0:this.onEvent(t,r)},e.prototype.addChild=function(t){return this._children.push(t),this},e.prototype.clear=function(){this._children=[]},e})(),Bn=2,E8=(function(e){At(t,e);function t(r){var n=e.call(this)||this;return n.attrs=r.attrs,n.styles=r.styles,n}return t.prototype.checkEventOn=function(r){return this.checkEventOnImp(r,this.attrs,this.styles)},t.prototype.setAttrs=function(r){return this.attrs=r,this},t.prototype.setStyles=function(r){return this.styles=r,this},t.prototype.draw=function(r){this.drawImp(r,this.attrs,this.styles)},t.extend=function(r){var n=(function(i){At(o,i);function o(){return i!==null&&i.apply(this,arguments)||this}return o.prototype.checkEventOnImp=function(s,u,d){return r.checkEventOn(s,u,d)},o.prototype.drawImp=function(s,u,d){r.draw(s,u,d)},o})(t);return n},t})(Zg);function jy(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){var u=s.value,d=u.coordinates;if(d.length>1)for(var h=1;h<d.length;h++){var p=d[h-1],f=d[h];if(p.x===f.x){if(Math.abs(p.y-e.y)+Math.abs(f.y-e.y)-Math.abs(p.y-f.y)<Bn+Bn&&Math.abs(e.x-p.x)<Bn)return!0}else{var m=Up(p,f),x=Gg(m,e),b=Math.abs(x-e.y);if(Math.abs(p.x-e.x)+Math.abs(f.x-e.x)-Math.abs(p.x-f.x)<Bn+Bn&&b*b/(m[0]*m[0]+1)<Bn*Bn)return!0}}}}catch(C){r={error:C}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function Gg(e,t){return e!==null?t.x*e[0]+e[1]:t.y}function D0(e,t,r){var n=Up(e,t);return Gg(n,r)}function Up(e,t){var r=e.x-t.x;if(r!==0){var n=(e.y-t.y)/r,i=e.y-n*e.x;return[n,i]}return null}function Zy(e,t,r){var n=t.length,i=ht(r)?r>0&&r<1?r:0:r?.5:0;if(i>0&&n>2){for(var o=t[0].x,s=t[0].y,u=1;u<n-1;u++){var d=t[u-1],h=t[u],p=t[u+1],f=h.x-d.x,m=h.y-d.y,x=p.x-h.x,b=p.y-h.y,C=p.x-d.x,_=p.y-d.y,k=Math.sqrt(f*f+m*m),M=Math.sqrt(x*x+b*b),L=M/(M+k),A=h.x+C*i*L,P=h.y+_*i*L;A=Math.min(A,Math.max(p.x,h.x)),P=Math.min(P,Math.max(p.y,h.y)),A=Math.max(A,Math.min(p.x,h.x)),P=Math.max(P,Math.min(p.y,h.y)),C=A-h.x,_=P-h.y;var W=h.x-C*k/M,D=h.y-_*k/M;W=Math.min(W,Math.max(d.x,h.x)),D=Math.min(D,Math.max(d.y,h.y)),W=Math.max(W,Math.min(d.x,h.x)),D=Math.max(D,Math.min(d.y,h.y)),C=h.x-W,_=h.y-D,A=h.x+C*M/k,P=h.y+_*M/k,e.bezierCurveTo(o,s,W,D,h.x,h.y),o=A,s=P}var $=t[n-1];e.bezierCurveTo(o,s,$.x,$.y,$.x,$.y)}else for(var u=1;u<n;u++)e.lineTo(t[u].x,t[u].y)}function I8(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"solid":i,s=r.smooth,u=s===void 0?!1:s,d=r.size,h=d===void 0?1:d,p=r.color,f=p===void 0?"currentColor":p,m=r.dashedValue,x=m===void 0?[2,2]:m;e.lineWidth=h,e.strokeStyle=f,o==="dashed"?e.setLineDash(x):e.setLineDash([]);var b=h%2===1?.5:0;n.forEach(function(C){var _=C.coordinates;_.length>1&&(_.length===2&&(_[0].x===_[1].x||_[0].y===_[1].y)?(e.beginPath(),_[0].x===_[1].x?(e.moveTo(_[0].x+b,_[0].y),e.lineTo(_[1].x+b,_[1].y)):(e.moveTo(_[0].x,_[0].y+b),e.lineTo(_[1].x,_[1].y+b)),e.stroke(),e.closePath()):(e.save(),h%2===1&&e.translate(.5,.5),e.beginPath(),e.moveTo(_[0].x,_[0].y),Zy(e,_,u),e.stroke(),e.closePath(),e.restore()))})}var L8={name:"line",checkEventOn:jy,draw:function(e,t,r){I8(e,t,r)}};function Gy(e,t,r){var n=r??0,i=[];if(e.length>1)if(e[0].x===e[1].x){var o=0,s=t.height;if(i.push({coordinates:[{x:e[0].x,y:o},{x:e[0].x,y:s}]}),e.length>2){i.push({coordinates:[{x:e[2].x,y:o},{x:e[2].x,y:s}]});for(var u=e[0].x-e[2].x,d=0;d<n;d++){var h=u*(d+1);i.push({coordinates:[{x:e[0].x+h,y:o},{x:e[0].x+h,y:s}]})}}}else{var p=0,f=t.width,m=Up(e[0],e[1]),x=m[0],b=m[1];if(i.push({coordinates:[{x:p,y:p*x+b},{x:f,y:f*x+b}]}),e.length>2){var C=e[2].y-x*e[2].x;i.push({coordinates:[{x:p,y:p*x+C},{x:f,y:f*x+C}]});for(var u=b-C,d=0;d<n;d++){var _=b+u*(d+1);i.push({coordinates:[{x:p,y:p*x+_},{x:f,y:f*x+_}]})}}}return i}var P8={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:Gy(t,r)}]}},A8={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:Gy(t,r,1)}]}},D8={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t,r,n,i=e.chart,o=e.coordinates,s=e.bounding,u=e.overlay,d=e.yAxis,h=0;if(!((t=d==null?void 0:d.isInCandle())!==null&&t!==void 0)||t)h=(n=(r=i.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2;else{var p=i.getIndicators({paneId:u.paneId});p.forEach(function(x){h=Math.max(h,x.precision)})}var f=u.points[0].value,m=f===void 0?0:f;return[{type:"line",attrs:{coordinates:[o[0],{x:s.width,y:o[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:o[0].x,y:o[0].y,text:i.getDecimalFold().format(i.getThousandsSeparator().format(m.toFixed(h))),baseline:"bottom"}}]}};function F8(e,t){if(e.length>1){var r={x:0,y:0};return e[0].x===e[1].x&&e[0].y!==e[1].y?e[0].y<e[1].y?r={x:e[0].x,y:t.height}:r={x:e[0].x,y:0}:e[0].x>e[1].x?r={x:0,y:D0(e[0],e[1],{x:0,y:e[0].y})}:r={x:t.width,y:D0(e[0],e[1],{x:t.width,y:e[0].y})},{coordinates:[e[0],r]}}return[]}var R8={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:F8(t,r)}]}},O8={name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]}},N8={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return t.length===2?t[0].x===t[1].x?[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:r.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:D0(t[0],t[1],{x:0,y:t[0].y})},{x:r.width,y:D0(t[0],t[1],{x:r.width,y:t[0].y})}]}}]:[]}},z8={name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;if(t.length===2){var n={x:t[0].x,y:0};return t[0].y<t[1].y&&(n.y=r.height),[{type:"line",attrs:{coordinates:[t[0],n]}}]}return[]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].timestamp=r.timestamp,t[0].dataIndex=r.dataIndex,t[1].timestamp=r.timestamp,t[1].dataIndex=r.dataIndex},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].timestamp=n.timestamp,r[0].dataIndex=n.dataIndex)}},$8={name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].timestamp=r.timestamp,t[0].dataIndex=r.dataIndex,t[1].timestamp=r.timestamp,t[1].dataIndex=r.dataIndex},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].timestamp=n.timestamp,r[0].dataIndex=n.dataIndex)}},B8={name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:r.height}]}}]}},V8={name:"simpleAnnotation",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(e){var t,r=e.overlay,n=e.coordinates,i="";we(r.extendData)&&(pi(r.extendData)?i=r.extendData(r):i=(t=r.extendData)!==null&&t!==void 0?t:"");var o=n[0].x,s=n[0].y-6,u=s-50,d=u-5;return[{type:"line",attrs:{coordinates:[{x:o,y:s},{x:o,y:u}]},ignoreEvent:!1},{type:"polygon",attrs:{coordinates:[{x:o,y:u},{x:o-4,y:d},{x:o+4,y:d}]},ignoreEvent:!1},{type:"text",attrs:{x:o,y:d,text:i,align:"center",baseline:"bottom"},ignoreEvent:!1}]}},W8={name:"simpleTag",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(e){var t=e.bounding,r=e.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:r[0].y},{x:t.width,y:r[0].y}]},ignoreEvent:!1}},createYAxisFigures:function(e){var t,r,n,i,o=e.chart,s=e.overlay,u=e.coordinates,d=e.bounding,h=e.yAxis,p=(t=h==null?void 0:h.isFromZero())!==null&&t!==void 0?t:!1,f="left",m=0;p?(f="left",m=0):(f="right",m=d.width);var x="";return we(s.extendData)&&(pi(s.extendData)?x=s.extendData(s):x=(r=s.extendData)!==null&&r!==void 0?r:""),!we(x)&&ht(s.points[0].value)&&(x=Kn(s.points[0].value,(i=(n=o.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&i!==void 0?i:2)),{type:"text",attrs:{x:m,y:u[0].y,text:x,align:f,baseline:"middle"}}}},qg={},U8=[S8,k8,M8,T8,P8,A8,D8,R8,O8,N8,z8,$8,B8,V8,W8];U8.forEach(function(e){qg[e.name]=Xy.extend(e)});function H8(e){qg[e.name]=Xy.extend(e)}function Y8(e){var t;return(t=qg[e])!==null&&t!==void 0?t:null}var X8={grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},title:{color:"#76808F"},legend:{color:"#76808F"}}},indicator:{tooltip:{title:{color:"#76808F"},legend:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},j8={grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},title:{color:"#929AA5"},legend:{color:"#929AA5"}}},indicator:{tooltip:{title:{color:"#929AA5"},legend:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}},Z8={light:X8,dark:j8};function G8(e){var t;return(t=Z8[e])!==null&&t!==void 0?t:null}var mp=30,qy=100,zt={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},bm={MIN:1,MAX:50},q8=10,Q8=80,K8=.2,Ig=10,J8=(function(){function e(t,r){var n=this;this._styles=Ny(),this._formatter={formatDate:function(f){var m=f.dateTimeFormat,x=f.timestamp,b=f.template;return zy(m,x,b)},formatBigNumber:$y,formatExtendText:function(f){return""}},this._innerFormatter={formatDate:function(f,m,x){return n._formatter.formatDate({dateTimeFormat:n._dateTimeFormat,timestamp:f,template:m,type:x})},formatBigNumber:function(f){return n._formatter.formatBigNumber(f)},formatExtendText:function(f){return n._formatter.formatExtendText(f)}},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(f){return By(f,n._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(f){return Vy(f,n._decimalFold.threshold)}},this._symbol=null,this._period=null,this._dataList=[],this._dataLoader=null,this._loading=!1,this._dataLoadMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=q8,this._offsetRightDistance=Q8,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole="bar_count",this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=gm(),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._actions=new Map,this._indicators=new Map,this._taskScheduler=new X6,this._overlays=new Map,this._progressOverlayInfo=null,this._lastPriceMarkExtendTextUpdateTimers=[],this._pressedOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._clickOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._chart=t,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var i=r??{},o=i.styles,s=i.locale,u=i.timezone,d=i.formatter,h=i.thousandsSeparator,p=i.decimalFold;we(o)&&this.setStyles(o),ur(s)&&this.setLocale(s),this.setTimezone(u??""),we(d)&&this.setFormatter(d),we(h)&&this.setThousandsSeparator(h),we(p)&&this.setDecimalFold(p)}return e.prototype.setStyles=function(t){var r=this,n,i,o,s,u,d,h=null;if(ur(t)?h=G8(t):h=t,vn(this._styles,h),Va((o=(i=(n=h==null?void 0:h.candle)===null||n===void 0?void 0:n.tooltip)===null||i===void 0?void 0:i.legend)===null||o===void 0?void 0:o.template)&&(this._styles.candle.tooltip.legend.template=h.candle.tooltip.legend.template),we((d=(u=(s=h==null?void 0:h.candle)===null||s===void 0?void 0:s.priceMark)===null||u===void 0?void 0:u.last)===null||d===void 0?void 0:d.extendTexts)){this._clearLastPriceMarkExtendTextUpdateTimer();var p=[];this._styles.candle.priceMark.last.extendTexts.forEach(function(f){var m=f.updateInterval;if(f.show&&m>0&&!p.includes(m)){p.push(m);var x=setInterval(function(){r._chart.updatePane(0,zt.CANDLE)},m);r._lastPriceMarkExtendTextUpdateTimers.push(x)}})}},e.prototype.getStyles=function(){return this._styles},e.prototype.setFormatter=function(t){vn(this._formatter,t)},e.prototype.getFormatter=function(){return this._formatter},e.prototype.getInnerFormatter=function(){return this._innerFormatter},e.prototype.setLocale=function(t){this._locale=t},e.prototype.getLocale=function(){return this._locale},e.prototype.setTimezone=function(t){if(!we(this._dateTimeFormat)||this.getTimezone()!==t){var r={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};t.length>0&&(r.timeZone=t);var n=null;try{n=new Intl.DateTimeFormat("en",r)}catch{}n!==null&&(this._dateTimeFormat=n)}},e.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},e.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},e.prototype.setThousandsSeparator=function(t){vn(this._thousandsSeparator,t)},e.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},e.prototype.setDecimalFold=function(t){vn(this._decimalFold,t)},e.prototype.getDecimalFold=function(){return this._decimalFold},e.prototype.setSymbol=function(t){this._processDataUnsubscribe(),this._symbol=t,this._synchronizeIndicatorSeriesPrecision(),this.resetData()},e.prototype.getSymbol=function(){return this._symbol},e.prototype.setPeriod=function(t){this._processDataUnsubscribe(),this._period=t,this.resetData()},e.prototype.getPeriod=function(){return this._period},e.prototype.getDataList=function(){return this._dataList},e.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},e.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},e.prototype._addData=function(t,r,n){var i=this,o,s,u=!1,d=!1,h=0;if(Va(t)){var p={backward:!1,forward:!1};switch(A0(n)?(p.backward=n,p.forward=n):(p.backward=(o=n==null?void 0:n.backward)!==null&&o!==void 0?o:!1,p.forward=(s=n==null?void 0:n.forward)!==null&&s!==void 0?s:!1),h=t.length,r){case"init":{this._clearData(),this._dataList=t,this._dataLoadMore.backward=p.backward,this._dataLoadMore.forward=p.forward,this.setOffsetRightDistance(this._offsetRightDistance),d=!0;break}case"backward":{this._dataList=this._dataList.concat(t),this._dataLoadMore.backward=p.backward,this._lastBarRightSideDiffBarCount-=h,d=h>0;break}case"forward":{this._dataList=t.concat(this._dataList),this._dataLoadMore.forward=p.forward,d=h>0;break}}u=!0}else{var f=this._dataList.length,m=t.timestamp,x=Mn(this._dataList[f-1],"timestamp",0);if(m>x){this._dataList.push(t);var b=this.getLastBarRightSideDiffBarCount();b<0&&this.setLastBarRightSideDiffBarCount(--b),h=1,u=!0,d=!0}else m===x&&(this._dataList[f-1]=t,u=!0,d=!0)}if(u&&d){this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0});var C=this.getIndicatorsByFilter({});C.forEach(function(_){i._addIndicatorCalcTask(_,r)}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:r!=="init"})}},e.prototype.setDataLoader=function(t){this._dataLoader=t,this.resetData()},e.prototype._calcOptimalBarSpace=function(){var t=4,r=1-K8*Math.atan(Math.max(t,this._barSpace)-t)/(Math.PI*.5),n=Math.min(Math.floor(this._barSpace*r),Math.floor(this._barSpace));n%2===0&&n+2>=this._barSpace&&--n,this._gapBarSpace=Math.max(1,n)},e.prototype._adjustVisibleRange=function(){var t,r,n=this._dataList.length,i=this._totalBarSpace/this._barSpace,o=0,s=0;this._scrollLimitRole==="distance"?(o=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,s=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(o=this._minVisibleBarCount.left,s=this._minVisibleBarCount.right),o=Math.max(0,o),s=Math.max(0,s);var u=i-Math.min(o,n);this._lastBarRightSideDiffBarCount>u&&(this._lastBarRightSideDiffBarCount=u);var d=-n+Math.min(s,n);this._lastBarRightSideDiffBarCount<d&&(this._lastBarRightSideDiffBarCount=d);var h=Math.round(this._lastBarRightSideDiffBarCount+n+.5),p=h;h>n&&(h=n);var f=Math.round(h-i)-1;f<0&&(f=0);var m=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-i)-1:f;this._visibleRange={from:f,to:h,realFrom:m,realTo:p},this.executeAction("onVisibleRangeChange",this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var x=m;x<p;x++){var b=this._dataList[x],C=this.dataIndexToCoordinate(x);this._visibleRangeDataList.push({dataIndex:x,x:C,data:{prev:(t=this._dataList[x-1])!==null&&t!==void 0?t:b,current:b,next:(r=this._dataList[x+1])!==null&&r!==void 0?r:b}}),we(b)&&(this._visibleRangeHighLowPrice[0].price<b.high&&(this._visibleRangeHighLowPrice[0].price=b.high,this._visibleRangeHighLowPrice[0].x=C),this._visibleRangeHighLowPrice[1].price>b.low&&(this._visibleRangeHighLowPrice[1].price=b.low,this._visibleRangeHighLowPrice[1].x=C))}f===0?this._dataLoadMore.forward&&this._processDataLoad("forward"):h===n&&this._dataLoadMore.backward&&this._processDataLoad("backward")},e.prototype._processDataLoad=function(t){var r=this,n,i,o,s;if(!this._loading&&we(this._dataLoader)&&we(this._symbol)&&we(this._period)){this._loading=!0;var u={type:t,symbol:this._symbol,period:this._period,timestamp:null,callback:function(d,h){var p,f;r._loading=!1,r._addData(d,t,h),t==="init"&&((f=(p=r._dataLoader)===null||p===void 0?void 0:p.subscribeBar)===null||f===void 0||f.call(p,{symbol:r._symbol,period:r._period,callback:function(m){r._addData(m,"update")}}))}};switch(t){case"backward":{u.timestamp=(i=(n=this._dataList[this._dataList.length-1])===null||n===void 0?void 0:n.timestamp)!==null&&i!==void 0?i:null;break}case"forward":{u.timestamp=(s=(o=this._dataList[0])===null||o===void 0?void 0:o.timestamp)!==null&&s!==void 0?s:null;break}}this._dataLoader.getBars(u)}},e.prototype._processDataUnsubscribe=function(){var t,r;we(this._dataLoader)&&we(this._symbol)&&we(this._period)&&((r=(t=this._dataLoader).unsubscribeBar)===null||r===void 0||r.call(t,{symbol:this._symbol,period:this._period}))},e.prototype.resetData=function(){this._loading=!1,this._processDataLoad("init")},e.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},e.prototype.setBarSpace=function(t,r){t<bm.MIN||t>bm.MAX||this._barSpace===t||(this._barSpace=t,this._calcOptimalBarSpace(),r==null||r(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0}))},e.prototype.setTotalBarSpace=function(t){this._totalBarSpace!==t&&(this._totalBarSpace=t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}))},e.prototype.setOffsetRightDistance=function(t,r){return this._offsetRightDistance=this._scrollLimitRole==="distance"?Math.min(this._maxOffsetDistance.right,t):t,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,(r??!1)&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0})),this},e.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},e.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},e.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},e.prototype.setLastBarRightSideDiffBarCount=function(t){this._lastBarRightSideDiffBarCount=t},e.prototype.setMaxOffsetLeftDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.left=t},e.prototype.setMaxOffsetRightDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.right=t},e.prototype.setLeftMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.left=t},e.prototype.setRightMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.right=t},e.prototype.getVisibleRange=function(){return this._visibleRange},e.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},e.prototype.scroll=function(t){if(this._scrollEnabled){var r=t/this._barSpace,n=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-r,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0});var i=Math.round(n-this._lastBarRightSideDiffBarCount*this._barSpace);i!==0&&this.executeAction("onScroll",{distance:i})}},e.prototype.getDataByDataIndex=function(t){var r;return(r=this._dataList[t])!==null&&r!==void 0?r:null},e.prototype.coordinateToFloatIndex=function(t){var r=this._dataList.length,n=(this._totalBarSpace-t)/this._barSpace,i=r+this._lastBarRightSideDiffBarCount-n;return Math.round(i*1e6)/1e6},e.prototype.dataIndexToTimestamp=function(t){var r=this._dataList.length;if(r===0)return null;var n=this.getDataByDataIndex(t);if(we(n))return n.timestamp;if(we(this._period)){var i=r-1,o=null,s=0;if(t>i?(o=this._dataList[i].timestamp,s=t-i):t<0&&(o=this._dataList[0].timestamp,s=t),ht(o)){var u=this._period,d=u.type,h=u.span;switch(d){case"second":return o+h*1e3*s;case"minute":return o+h*60*1e3*s;case"hour":return o+h*60*60*1e3*s;case"day":return o+h*24*60*60*1e3*s;case"week":return o+h*7*24*60*60*1e3*s;case"month":{var p=new Date(o),f=p.getDate();p.setDate(1),p.setMonth(p.getMonth()+h*s);var m=new Date(p.getFullYear(),p.getMonth()+1,0).getDate();return p.setDate(Math.min(f,m)),p.getTime()}case"year":{var p=new Date(o);return p.setFullYear(p.getFullYear()+h*s),p.getTime()}}}}return null},e.prototype.timestampToDataIndex=function(t){var r=this._dataList.length;if(r===0)return 0;if(we(this._period)){var n=null,i=0,o=r-1,s=this._dataList[o].timestamp;t>s&&(n=s,i=o);var u=this._dataList[0].timestamp;if(t<u&&(n=u,i=0),ht(n)){var d=this._period,h=d.type,p=d.span;switch(h){case"second":return i+Math.floor((t-n)/(p*1e3));case"minute":return i+Math.floor((t-n)/(p*60*1e3));case"hour":return i+Math.floor((t-n)/(p*60*60*1e3));case"day":return i+Math.floor((t-n)/(p*24*60*60*1e3));case"week":return i+Math.floor((t-n)/(p*7*24*60*60*1e3));case"month":{var f=new Date(n),m=new Date(t),x=f.getFullYear(),b=m.getFullYear(),C=f.getMonth(),_=m.getMonth();return i+Math.floor(((b-x)*12+(_-C))/p)}case"year":{var x=new Date(n).getFullYear(),b=new Date(t).getFullYear();return i+Math.floor((b-x)/p)}}}}return Eg(this._dataList,"timestamp",t)},e.prototype.dataIndexToCoordinate=function(t){var r=this._dataList.length,n=r+this._lastBarRightSideDiffBarCount-t;return Math.floor(this._totalBarSpace-(n-.5)*this._barSpace+.5)},e.prototype.coordinateToDataIndex=function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1},e.prototype.zoom=function(t,r){var n=this,i;if(this._zoomEnabled){var o=r??null;ht(o==null?void 0:o.x)||(o={x:(i=this._crosshair.x)!==null&&i!==void 0?i:this._totalBarSpace/2});var s=o.x,u=this.coordinateToFloatIndex(s),d=this._barSpace,h=this._barSpace+t*(this._barSpace/Ig);this.setBarSpace(h,function(){n._lastBarRightSideDiffBarCount+=u-n.coordinateToFloatIndex(s)});var p=this._barSpace/d;p!==1&&this.executeAction("onZoom",{scale:p})}},e.prototype.setZoomEnabled=function(t){this._zoomEnabled=t},e.prototype.isZoomEnabled=function(){return this._zoomEnabled},e.prototype.setScrollEnabled=function(t){this._scrollEnabled=t},e.prototype.isScrollEnabled=function(){return this._scrollEnabled},e.prototype.setCrosshair=function(t,r){var n,i=r??{},o=i.notInvalidate,s=i.notExecuteAction,u=i.forceInvalidate,d=t??{},h=0,p=0;ht(d.x)?(h=this.coordinateToDataIndex(d.x),h<0?p=0:h>this._dataList.length-1?p=this._dataList.length-1:p=h):(h=this._dataList.length-1,p=h);var f=this._dataList[p],m=this.dataIndexToCoordinate(h),x={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=je(je({},d),{realX:m,kLineData:f,realDataIndex:h,dataIndex:p,timestamp:(n=this.dataIndexToTimestamp(h))!==null&&n!==void 0?n:void 0}),(x.x!==d.x||x.y!==d.y||x.paneId!==d.paneId||(u??!1))&&(we(f)&&!(s??!1)&&this.hasAction("onCrosshairChange")&&ur(this._crosshair.paneId)&&this.executeAction("onCrosshairChange",t),(o??!1)||this._chart.updatePane(1))},e.prototype.getCrosshair=function(){return this._crosshair},e.prototype.executeAction=function(t,r){var n;(n=this._actions.get(t))===null||n===void 0||n.execute(r)},e.prototype.subscribeAction=function(t,r){var n;this._actions.has(t)||this._actions.set(t,new j6),(n=this._actions.get(t))===null||n===void 0||n.subscribe(r)},e.prototype.unsubscribeAction=function(t,r){var n=this._actions.get(t);we(n)&&(n.unsubscribe(r),n.isEmpty()&&this._actions.delete(t))},e.prototype.hasAction=function(t){var r=this._actions.get(t);return we(r)&&!r.isEmpty()},e.prototype._sortIndicators=function(t){var r;ur(t)?(r=this._indicators.get(t))===null||r===void 0||r.sort(function(n,i){return n.zLevel-i.zLevel}):this._indicators.forEach(function(n){n.sort(function(i,o){return i.zLevel-o.zLevel})})},e.prototype._addIndicatorCalcTask=function(t,r){var n=this;this._taskScheduler.addTask({id:vm(t.id),handler:function(){var i;(i=t.onDataStateChange)===null||i===void 0||i.call(t,{state:"loading",type:r,indicator:t}),t.calcImp(n._dataList).then(function(o){var s;o&&(n._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:r!=="init"}),(s=t.onDataStateChange)===null||s===void 0||s.call(t,{state:"ready",type:r,indicator:t}))}).catch(function(){var o;(o=t.onDataStateChange)===null||o===void 0||o.call(t,{state:"error",type:r,indicator:t})})}})},e.prototype.addIndicator=function(t,r,n){var i=t.name,o=this.getIndicatorsByFilter(t);if(o.length>0)return!1;var s=this.getIndicatorsByPaneId(r),u=Yy(i),d=new u;return this._synchronizeIndicatorSeriesPrecision(d),d.paneId=r,d.override(t),n||(this.removeIndicator({paneId:r}),s=[]),s.push(d),this._indicators.set(r,s),this._sortIndicators(r),this._addIndicatorCalcTask(d,"init"),!0},e.prototype.getIndicatorsByPaneId=function(t){var r;return(r=this._indicators.get(t))!==null&&r!==void 0?r:[]},e.prototype.getIndicatorsByFilter=function(t){var r=t.paneId,n=t.name,i=t.id,o=function(u){return we(i)?u.id===i:!we(n)||u.name===n},s=[];return we(r)?s=s.concat(this.getIndicatorsByPaneId(r).filter(o)):this._indicators.forEach(function(u){s=s.concat(u.filter(o))}),s},e.prototype.removeIndicator=function(t){var r=this,n=!1,i=this.getIndicatorsByFilter(t);return i.forEach(function(o){var s=r.getIndicatorsByPaneId(o.paneId),u=s.findIndex(function(d){return d.id===o.id});u>-1&&(r._taskScheduler.removeTask(vm(o.id)),s.splice(u,1),n=!0),s.length===0&&r._indicators.delete(o.paneId)}),n},e.prototype.hasIndicators=function(t){return this._indicators.has(t)},e.prototype._synchronizeIndicatorSeriesPrecision=function(t){if(we(this._symbol)){var r=this._symbol,n=r.pricePrecision,i=n===void 0?2:n,o=r.volumePrecision,s=o===void 0?0:o,u=function(d){switch(d.series){case"price":{d.setSeriesPrecision(i);break}case"volume":{d.setSeriesPrecision(s);break}}};we(t)?u(t):this._indicators.forEach(function(d){d.forEach(function(h){u(h)})})}},e.prototype.overrideIndicator=function(t){var r=this,n=!1,i=!1,o=this.getIndicatorsByFilter(t);return o.forEach(function(s){s.override(t);var u=s.shouldUpdateImp(),d=u.calc,h=u.draw,p=u.sort;p&&(i=!0),d?r._addIndicatorCalcTask(s,"update"):h&&(n=!0)}),i&&this._sortIndicators(),n?(this._chart.layout({update:!0}),!0):!1},e.prototype.getOverlaysByFilter=function(t){var r,n=t.id,i=t.groupId,o=t.paneId,s=t.name,u=function(p){return we(n)?p.id===n:we(i)?p.groupId===i&&(!we(s)||p.name===s):!we(s)||p.name===s},d=[];we(o)?d=d.concat(this.getOverlaysByPaneId(o).filter(u)):this._overlays.forEach(function(p){d=d.concat(p.filter(u))});var h=(r=this._progressOverlayInfo)===null||r===void 0?void 0:r.overlay;return we(h)&&u(h)&&d.push(h),d},e.prototype.getOverlaysByPaneId=function(t){var r;if(!ur(t)){var n=[];return this._overlays.forEach(function(i){n=n.concat(i)}),n}return(r=this._overlays.get(t))!==null&&r!==void 0?r:[]},e.prototype._sortOverlays=function(t){var r;ur(t)?(r=this._overlays.get(t))===null||r===void 0||r.sort(function(n,i){return n.zLevel-i.zLevel}):this._overlays.forEach(function(n){n.sort(function(i,o){return i.zLevel-o.zLevel})})},e.prototype.addOverlays=function(t,r){var n=this,i=[],o=t.map(function(s,u){var d,h,p,f,m,x,b,C;if(we(s.id)){var _=null;try{for(var k=sa(n._overlays),M=k.next();!M.done;M=k.next()){var L=M.value,A=L[1],P=A.find(function(B){return B.id===s.id});if(we(P)){_=P;break}}}catch(B){d={error:B}}finally{try{M&&!M.done&&(h=k.return)&&h.call(k)}finally{if(d)throw d.error}}if(we(_))return s.id}var W=Y8(s.name);if(we(W)){var D=(p=s.id)!==null&&p!==void 0?p:vp(_8),P=new W,$=(f=s.paneId)!==null&&f!==void 0?f:zt.CANDLE;s.id=D,(m=s.groupId)!==null&&m!==void 0||(s.groupId=D);var z=n.getOverlaysByPaneId($).length;return(x=s.zLevel)!==null&&x!==void 0||(s.zLevel=z),P.override(s),i.includes($)||i.push($),P.isDrawing()?n._progressOverlayInfo={paneId:$,overlay:P,appointPaneFlag:r[u]}:(n._overlays.has($)||n._overlays.set($,[]),(b=n._overlays.get($))===null||b===void 0||b.push(P)),P.isStart()&&((C=P.onDrawStart)===null||C===void 0||C.call(P,{overlay:P,chart:n._chart})),D}return null});return i.length>0&&(this._sortOverlays(),i.forEach(function(s){n._chart.updatePane(1,s)}),this._chart.updatePane(1,zt.X_AXIS)),o},e.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},e.prototype.progressOverlayComplete=function(){var t;if(this._progressOverlayInfo!==null){var r=this._progressOverlayInfo,n=r.overlay,i=r.paneId;n.isDrawing()||(this._overlays.has(i)||this._overlays.set(i,[]),(t=this._overlays.get(i))===null||t===void 0||t.push(n),this._sortOverlays(i),this._progressOverlayInfo=null)}},e.prototype.updateProgressOverlayInfo=function(t,r){this._progressOverlayInfo!==null&&(A0(r)&&r&&(this._progressOverlayInfo.appointPaneFlag=r),this._progressOverlayInfo.paneId=t,this._progressOverlayInfo.overlay.override({paneId:t}))},e.prototype.overrideOverlay=function(t){var r=this,n=!1,i=[],o=this.getOverlaysByFilter(t);return o.forEach(function(s){s.override(t);var u=s.shouldUpdate(),d=u.sort,h=u.draw;d&&(n=!0),(d||h)&&(i.includes(s.paneId)||i.push(s.paneId))}),n&&this._sortOverlays(),i.length>0?(i.forEach(function(s){r._chart.updatePane(1,s)}),this._chart.updatePane(1,zt.X_AXIS),!0):!1},e.prototype.removeOverlay=function(t){var r=this,n=[],i=this.getOverlaysByFilter(t);return i.forEach(function(o){var s,u=o.paneId,d=r.getOverlaysByPaneId(o.paneId);if((s=o.onRemoved)===null||s===void 0||s.call(o,{overlay:o,chart:r._chart}),n.includes(u)||n.push(u),o.isDrawing())r._progressOverlayInfo=null;else{var h=d.findIndex(function(p){return p.id===o.id});h>-1&&d.splice(h,1)}d.length===0&&r._overlays.delete(u)}),n.length>0?(n.forEach(function(o){r._chart.updatePane(1,o)}),this._chart.updatePane(1,zt.X_AXIS),!0):!1},e.prototype.setPressedOverlayInfo=function(t){this._pressedOverlayInfo=t},e.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},e.prototype.setHoverOverlayInfo=function(t,r,n){var i=this._hoverOverlayInfo,o=i.overlay,s=i.figureType,u=i.figureIndex,d=i.figure,h=t.overlay;if(((o==null?void 0:o.id)!==(h==null?void 0:h.id)||s!==t.figureType||u!==t.figureIndex)&&(this._hoverOverlayInfo=t,(o==null?void 0:o.id)!==(h==null?void 0:h.id))){var p=!1,f=!1;o!==null&&(o.override({zLevel:o.getPrevZLevel()}),f=!0,n(o,d)&&(p=!0)),h!==null&&(h.setPrevZLevel(h.zLevel),h.override({zLevel:Number.MAX_SAFE_INTEGER}),f=!0,r(h,t.figure)&&(p=!0)),f&&this._sortOverlays(),p||this._chart.updatePane(1)}},e.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},e.prototype.setClickOverlayInfo=function(t,r,n){var i=this._clickOverlayInfo,o=i.paneId,s=i.overlay,u=i.figureType,d=i.figure,h=i.figureIndex,p=t.overlay;((s==null?void 0:s.id)!==(p==null?void 0:p.id)||u!==t.figureType||h!==t.figureIndex)&&(this._clickOverlayInfo=t,(s==null?void 0:s.id)!==(p==null?void 0:p.id)&&(we(s)&&n(s,d),we(p)&&r(p,t.figure),this._chart.updatePane(1,t.paneId),o!==t.paneId&&this._chart.updatePane(1,o),this._chart.updatePane(1,zt.X_AXIS)))},e.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},e.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},e.prototype.isOverlayDrawing=function(){var t,r;return(r=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay.isDrawing())!==null&&r!==void 0?r:!1},e.prototype._clearLastPriceMarkExtendTextUpdateTimer=function(){this._lastPriceMarkExtendTextUpdateTimers.forEach(function(t){clearInterval(t)}),this._lastPriceMarkExtendTextUpdateTimers=[]},e.prototype._clearData=function(){this._dataLoadMore.backward=!1,this._dataLoadMore.forward=!1,this._loading=!1,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange=gm(),this._crosshair={}},e.prototype.getChart=function(){return this._chart},e.prototype.destroy=function(){this._clearData(),this._clearLastPriceMarkExtendTextUpdateTimer(),this._taskScheduler.removeTask(),this._overlays.clear(),this._indicators.clear(),this._actions.clear()},e})(),Bt={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"},L0=7;function eb(){return Ry(this,void 0,void 0,function(){return Oy(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t){var r=new ResizeObserver(function(n){t(n.every(function(i){return"devicePixelContentBoxSize"in i})),r.disconnect()});r.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,e.sent()]}})})}var xm=(function(){function e(t,r){var n=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=Fd,this._mediaQueryListener=function(){var i=Al(n._element);n._nextPixelWidth=Math.round(n._element.clientWidth*i),n._nextPixelHeight=Math.round(n._element.clientHeight*i),n._resetPixelRatio()},this._listener=r,this._element=Ns("canvas",t),this._ctx=this._element.getContext("2d"),eb().then(function(i){n._supportedDevicePixelContentBox=i,i?(n._resizeObserver=new ResizeObserver(function(o){var s=o.find(function(d){return d.target===n._element}),u=s==null?void 0:s.devicePixelContentBoxSize[0];we(u)&&(n._nextPixelWidth=u.inlineSize,n._nextPixelHeight=u.blockSize,(n._pixelWidth!==n._nextPixelWidth||n._pixelHeight!==n._nextPixelHeight)&&n._resetPixelRatio())}),n._resizeObserver.observe(n._element,{box:"device-pixel-content-box"})):(n._mediaQueryList=window.matchMedia("(resolution: ".concat(Al(n._element),"dppx)")),n._mediaQueryList.addListener(n._mediaQueryListener))}).catch(function(i){return!1})}return e.prototype._resetPixelRatio=function(){var t=this;this._executeListener(function(){var r=t._element.clientWidth,n=t._element.clientHeight;t._width=r,t._height=n,t._pixelWidth=t._nextPixelWidth,t._pixelHeight=t._nextPixelHeight,t._element.width=t._nextPixelWidth,t._element.height=t._nextPixelHeight;var i=t._nextPixelWidth/r,o=t._nextPixelHeight/n;t._ctx.scale(i,o)})},e.prototype._executeListener=function(t){var r=this;this._requestAnimationId===Fd&&(this._requestAnimationId=Ep(function(){r._ctx.clearRect(0,0,r._width,r._height),t==null||t(),r._listener(),r._requestAnimationId=Fd}))},e.prototype.update=function(t,r){if(this._width!==t||this._height!==r){if(this._element.style.width="".concat(t,"px"),this._element.style.height="".concat(r,"px"),!this._supportedDevicePixelContentBox){var n=Al(this._element);this._nextPixelWidth=Math.round(t*n),this._nextPixelHeight=Math.round(r*n),this._resetPixelRatio()}}else this._executeListener()},e.prototype.getElement=function(){return this._element},e.prototype.getContext=function(){return this._ctx},e.prototype.destroy=function(){we(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),we(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},e})(),Qy=(function(e){At(t,e);function t(r,n){var i=e.call(this)||this;return i._bounding=Tp(),i._cursor="crosshair",i._forceCursor=null,i._pane=n,i._rootContainer=r,i._container=i.createContainer(),r.appendChild(i._container),i}return t.prototype.setBounding=function(r){return vn(this._bounding,r),this},t.prototype.getContainer=function(){return this._container},t.prototype.getBounding=function(){return this._bounding},t.prototype.getPane=function(){return this._pane},t.prototype.checkEventOn=function(r){return!0},t.prototype.setCursor=function(r){ur(this._forceCursor)||r!==this._cursor&&(this._cursor=r,this._container.style.cursor=this._cursor)},t.prototype.setForceCursor=function(r){var n;r!==this._forceCursor&&(this._forceCursor=r,this._container.style.cursor=(n=this._forceCursor)!==null&&n!==void 0?n:this._cursor)},t.prototype.getForceCursor=function(){return this._forceCursor},t.prototype.update=function(r){this.updateImp(this._container,this._bounding,r??3)},t.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},t})(Zg),Qg=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;i._mainCanvas=new xm({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateMain(i._mainCanvas.getContext())}),i._overlayCanvas=new xm({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateOverlay(i._overlayCanvas.getContext())});var o=i.getContainer();return o.appendChild(i._mainCanvas.getElement()),o.appendChild(i._overlayCanvas.getElement()),i}return t.prototype.createContainer=function(){return Ns("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},t.prototype.updateImp=function(r,n,i){var o=n.width,s=n.height,u=n.left;r.style.left="".concat(u,"px");var d=i,h=r.clientWidth,p=r.clientHeight;switch((o!==h||s!==p)&&(r.style.width="".concat(o,"px"),r.style.height="".concat(s,"px"),d=3),d){case 0:{this._mainCanvas.update(o,s);break}case 1:{this._overlayCanvas.update(o,s);break}case 3:case 4:{this._mainCanvas.update(o,s),this._overlayCanvas.update(o,s);break}}},t.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},t.prototype.getImage=function(r){var n=this.getBounding(),i=n.width,o=n.height,s=Ns("canvas",{width:"".concat(i,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),u=s.getContext("2d"),d=Al(s);return s.width=i*d,s.height=o*d,u.scale(d,d),u.drawImage(this._mainCanvas.getElement(),0,0,i,o),r&&u.drawImage(this._overlayCanvas.getElement(),0,0,i,o),s},t})(Qy);function Ky(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){var u=s.value,d=u.x,h=u.y,p=u.r,f=e.x-d,m=e.y-h;if(!(f*f+m*m>p*p))return!0}}catch(x){r={error:x}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function tb(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"fill":i,s=r.color,u=s===void 0?"currentColor":s,d=r.borderSize,h=d===void 0?1:d,p=r.borderColor,f=p===void 0?"currentColor":p,m=r.borderStyle,x=m===void 0?"solid":m,b=r.borderDashedValue,C=b===void 0?[2,2]:b,_=(o==="fill"||r.style==="stroke_fill")&&(!ur(u)||!Bd(u));_&&(e.fillStyle=u,n.forEach(function(k){var M=k.x,L=k.y,A=k.r;e.beginPath(),e.arc(M,L,A,0,Math.PI*2),e.closePath(),e.fill()})),(o==="stroke"||r.style==="stroke_fill")&&h>0&&!Bd(f)&&(e.strokeStyle=f,e.lineWidth=h,x==="dashed"?e.setLineDash(C):e.setLineDash([]),n.forEach(function(k){var M=k.x,L=k.y,A=k.r;(!_||A>h)&&(e.beginPath(),e.arc(M,L,A,0,Math.PI*2),e.closePath(),e.stroke())}))}var rb={name:"circle",checkEventOn:Ky,draw:function(e,t,r){tb(e,t,r)}};function Jy(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){for(var u=s.value,d=!1,h=u.coordinates,p=0,f=h.length-1;p<h.length;f=p++)h[p].y>e.y!=h[f].y>e.y&&e.x<(h[f].x-h[p].x)*(e.y-h[p].y)/(h[f].y-h[p].y)+h[p].x&&(d=!d);if(d)return!0}}catch(m){r={error:m}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function nb(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"fill":i,s=r.color,u=s===void 0?"currentColor":s,d=r.borderSize,h=d===void 0?1:d,p=r.borderColor,f=p===void 0?"currentColor":p,m=r.borderStyle,x=m===void 0?"solid":m,b=r.borderDashedValue,C=b===void 0?[2,2]:b;(o==="fill"||r.style==="stroke_fill")&&(!ur(u)||!Bd(u))&&(e.fillStyle=u,n.forEach(function(_){var k=_.coordinates;e.beginPath(),e.moveTo(k[0].x,k[0].y);for(var M=1;M<k.length;M++)e.lineTo(k[M].x,k[M].y);e.closePath(),e.fill()})),(o==="stroke"||r.style==="stroke_fill")&&h>0&&!Bd(f)&&(e.strokeStyle=f,e.lineWidth=h,x==="dashed"?e.setLineDash(C):e.setLineDash([]),n.forEach(function(_){var k=_.coordinates;e.beginPath(),e.moveTo(k[0].x,k[0].y);for(var M=1;M<k.length;M++)e.lineTo(k[M].x,k[M].y);e.closePath(),e.stroke()}))}var ib={name:"polygon",checkEventOn:Jy,draw:function(e,t,r){nb(e,t,r)}};function Kg(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){var u=s.value,d=u.x,h=u.width;h<Bn*2&&(d-=Bn,h=Bn*2);var p=u.y,f=u.height;if(f<Bn*2&&(p-=Bn,f=Bn*2),e.x>=d&&e.x<=d+h&&e.y>=p&&e.y<=p+f)return!0}}catch(m){r={error:m}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function e2(e,t,r){var n,i=[];i=i.concat(t);var o=r.style,s=o===void 0?"fill":o,u=r.color,d=u===void 0?"transparent":u,h=r.borderSize,p=h===void 0?1:h,f=r.borderColor,m=f===void 0?"transparent":f,x=r.borderStyle,b=x===void 0?"solid":x,C=r.borderRadius,_=C===void 0?0:C,k=r.borderDashedValue,M=k===void 0?[2,2]:k,L=(n=e.roundRect)!==null&&n!==void 0?n:e.rect,A=(s==="fill"||r.style==="stroke_fill")&&(!ur(d)||!Bd(d));if(A&&(e.fillStyle=d,i.forEach(function(D){var $=D.x,z=D.y,B=D.width,Z=D.height;e.beginPath(),L.call(e,$,z,B,Z,_),e.closePath(),e.fill()})),(s==="stroke"||r.style==="stroke_fill")&&p>0&&!Bd(m)){e.strokeStyle=m,e.fillStyle=m,e.lineWidth=p,b==="dashed"?e.setLineDash(M):e.setLineDash([]);var P=p%2===1?.5:0,W=Math.round(P*2);i.forEach(function(D){var $=D.x,z=D.y,B=D.width,Z=D.height;B>p*2&&Z>p*2?(e.beginPath(),L.call(e,$+P,z+P,B-W,Z-W,_),e.closePath(),e.stroke()):A||e.fillRect($,z,B,Z)})}}var ob={name:"rect",checkEventOn:Kg,draw:function(e,t,r){e2(e,t,r)}};function t2(e,t){var r=t.size,n=r===void 0?12:r,i=t.paddingLeft,o=i===void 0?0:i,s=t.paddingTop,u=s===void 0?0:s,d=t.paddingRight,h=d===void 0?0:d,p=t.paddingBottom,f=p===void 0?0:p,m=t.weight,x=m===void 0?"normal":m,b=t.family,C=e.x,_=e.y,k=e.text,M=e.align,L=M===void 0?"left":M,A=e.baseline,P=A===void 0?"top":A,W=e.width,D=e.height,$=W??o+ia(k,n,x,b)+h,z=D??u+n+f,B=0;switch(L){case"left":case"start":{B=C;break}case"right":case"end":{B=C-$;break}default:{B=C-$/2;break}}var Z=0;switch(P){case"top":case"hanging":{Z=_;break}case"bottom":case"ideographic":case"alphabetic":{Z=_-z;break}default:{Z=_-z/2;break}}return{x:B,y:Z,width:$,height:z}}function r2(e,t,r){var n,i,o=[];o=o.concat(t);try{for(var s=sa(o),u=s.next();!u.done;u=s.next()){var d=u.value,h=t2(d,r),p=h.x,f=h.y,m=h.width,x=h.height;if(e.x>=p&&e.x<=p+m&&e.y>=f&&e.y<=f+x)return!0}}catch(b){n={error:b}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return!1}function ab(e,t,r){var n=[];n=n.concat(t);var i=r.color,o=i===void 0?"currentColor":i,s=r.size,u=s===void 0?12:s,d=r.family,h=r.weight,p=r.paddingLeft,f=p===void 0?0:p,m=r.paddingTop,x=m===void 0?0:m,b=r.paddingRight,C=b===void 0?0:b,_=n.map(function(k){return t2(k,r)});e2(e,_,je(je({},r),{color:r.backgroundColor})),e.textAlign="left",e.textBaseline="top",e.font=Xc(u,h,d),e.fillStyle=o,n.forEach(function(k,M){var L=_[M];e.fillText(k.text,L.x+f,L.y+x,L.width-f-C)})}var sb={name:"text",checkEventOn:r2,draw:function(e,t,r){ab(e,t,r)}};function lb(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}function n2(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){var u=s.value;if(Math.abs(lb(e,u)-u.r)<Bn){var d=u.r,h=u.startAngle,p=u.endAngle,f=d*Math.cos(h)+u.x,m=d*Math.sin(h)+u.y,x=d*Math.cos(p)+u.x,b=d*Math.sin(p)+u.y;if(e.x<=Math.max(f,x)+Bn&&e.x>=Math.min(f,x)-Bn&&e.y<=Math.max(m,b)+Bn&&e.y>=Math.min(m,b)-Bn)return!0}}}catch(C){r={error:C}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function cb(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"solid":i,s=r.size,u=s===void 0?1:s,d=r.color,h=d===void 0?"currentColor":d,p=r.dashedValue,f=p===void 0?[2,2]:p;e.lineWidth=u,e.strokeStyle=h,o==="dashed"?e.setLineDash(f):e.setLineDash([]),n.forEach(function(m){var x=m.x,b=m.y,C=m.r,_=m.startAngle,k=m.endAngle;e.beginPath(),e.arc(x,b,C,_,k),e.stroke(),e.closePath()})}var ub={name:"arc",checkEventOn:n2,draw:function(e,t,r){cb(e,t,r)}};function wm(e,t,r,n,i,o,s){var u=B0(n,7),d=u[0],h=u[1],p=u[2],f=u[3],m=u[4],x=u[5],b=u[6],C=s?t+x:x+i,_=s?r+b:b+o,k=db(t,r,d,h,p,f,m,C,_);k.forEach(function(M){e.bezierCurveTo(M[0],M[1],M[2],M[3],M[4],M[5])})}function db(e,t,r,n,i,o,s,u,d){for(var h=hb(e,t,r,n,i,o,s,u,d),p=h.cx,f=h.cy,m=h.startAngle,x=h.deltaAngle,b=[],C=Math.ceil(Math.abs(x)/(Math.PI/2)),_=0;_<C;_++){var k=m+_*x/C,M=m+(_+1)*x/C,L=pb(p,f,r,n,i,k,M);b.push(L)}return b}function hb(e,t,r,n,i,o,s,u,d){var h=i*Math.PI/180,p=(e-u)/2,f=(t-d)/2,m=Math.cos(h)*p+Math.sin(h)*f,x=-Math.sin(h)*p+Math.cos(h)*f,b=Math.pow(m,2)/Math.pow(r,2)+Math.pow(x,2)/Math.pow(n,2);b>1&&(r*=Math.sqrt(b),n*=Math.sqrt(b));var C=o===s?-1:1,_=Math.pow(r,2)*Math.pow(n,2)-Math.pow(r,2)*Math.pow(x,2)-Math.pow(n,2)*Math.pow(m,2),k=Math.pow(r,2)*Math.pow(x,2)+Math.pow(n,2)*Math.pow(m,2),M=C*Math.sqrt(Math.abs(_/k))*(r*x/n),L=C*Math.sqrt(Math.abs(_/k))*(-n*m/r),A=Math.cos(h)*M-Math.sin(h)*L+(e+u)/2,P=Math.sin(h)*M+Math.cos(h)*L+(t+d)/2,W=Math.atan2((x-L)/n,(m-M)/r),D=Math.atan2((-x-L)/n,(-m-M)/r)-W;return D<0&&s===1?D+=2*Math.PI:D>0&&s===0&&(D-=2*Math.PI),{cx:A,cy:P,startAngle:W,deltaAngle:D}}function pb(e,t,r,n,i,o,s){var u=Math.sin(s-o)*(Math.sqrt(4+3*Math.pow(Math.tan((s-o)/2),2))-1)/3,d=Math.cos(i),h=Math.sin(i),p=e+r*Math.cos(o)*d-n*Math.sin(o)*h,f=t+r*Math.cos(o)*h+n*Math.sin(o)*d,m=e+r*Math.cos(s)*d-n*Math.sin(s)*h,x=t+r*Math.cos(s)*h+n*Math.sin(s)*d,b=p+u*(-r*Math.sin(o)*d-n*Math.cos(o)*h),C=f+u*(-r*Math.sin(o)*h+n*Math.cos(o)*d),_=m-u*(-r*Math.sin(s)*d-n*Math.cos(s)*h),k=x-u*(-r*Math.sin(s)*h+n*Math.cos(s)*d);return[b,C,_,k,m,x]}function fb(e,t,r){var n=[];n=n.concat(t);var i=r.lineWidth,o=i===void 0?1:i,s=r.color,u=s===void 0?"currentColor":s;e.lineWidth=o,e.strokeStyle=u,e.setLineDash([]),n.forEach(function(d){var h=d.x,p=d.y,f=d.path,m=f.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi);if(we(m)){var x=h,b=p;e.beginPath(),m.forEach(function(C){var _=0,k=0,M=0,L=0,A=C[0],P=C.slice(1).trim().split(/[\s,]+/).map(Number);switch(A){case"M":_=P[0]+x,k=P[1]+b,e.moveTo(_,k),M=_,L=k;break;case"m":_+=P[0],k+=P[1],e.moveTo(_,k),M=_,L=k;break;case"L":_=P[0]+x,k=P[1]+b,e.lineTo(_,k);break;case"l":_+=P[0],k+=P[1],e.lineTo(_,k);break;case"H":_=P[0]+x,e.lineTo(_,k);break;case"h":_+=P[0],e.lineTo(_,k);break;case"V":k=P[0]+b,e.lineTo(_,k);break;case"v":k+=P[0],e.lineTo(_,k);break;case"C":e.bezierCurveTo(P[0]+x,P[1]+b,P[2]+x,P[3]+b,P[4]+x,P[5]+b),_=P[4]+x,k=P[5]+b;break;case"c":e.bezierCurveTo(_+P[0],k+P[1],_+P[2],k+P[3],_+P[4],k+P[5]),_+=P[4],k+=P[5];break;case"S":e.bezierCurveTo(_,k,P[0]+x,P[1]+b,P[2]+x,P[3]+b),_=P[2]+x,k=P[3]+b;break;case"s":e.bezierCurveTo(_,k,_+P[0],k+P[1],_+P[2],k+P[3]),_+=P[2],k+=P[3];break;case"Q":e.quadraticCurveTo(P[0]+x,P[1]+b,P[2]+x,P[3]+b),_=P[2]+x,k=P[3]+b;break;case"q":e.quadraticCurveTo(_+P[0],k+P[1],_+P[2],k+P[3]),_+=P[2],k+=P[3];break;case"T":e.quadraticCurveTo(_,k,P[0]+x,P[1]+b),_=P[0]+x,k=P[1]+b;break;case"t":e.quadraticCurveTo(_,k,_+P[0],k+P[1]),_+=P[0],k+=P[1];break;case"A":wm(e,_,k,P,x,b,!1),_=P[5]+x,k=P[6]+b;break;case"a":wm(e,_,k,P,x,b,!0),_+=P[5],k+=P[6];break;case"Z":case"z":e.closePath(),_=M,k=L;break}}),r.style==="fill"?e.fill():e.stroke()}})}var gb={name:"path",checkEventOn:Kg,draw:function(e,t,r){fb(e,t,r)}},Jg={},vb=[rb,L8,ib,ob,sb,ub,gb];vb.forEach(function(e){Jg[e.name]=E8.extend(e)});function mb(e){var t;return(t=Jg[e])!==null&&t!==void 0?t:null}function Vd(e){var t;return(t=Jg[e])!==null&&t!==void 0?t:null}var Ro=(function(e){At(t,e);function t(r){var n=e.call(this)||this;return n._widget=r,n}return t.prototype.getWidget=function(){return this._widget},t.prototype.createFigure=function(r,n){var i=mb(r.name);if(i!==null){var o=new i(r);if(we(n)){for(var s in n)n.hasOwnProperty(s)&&o.registerEvent(s,n[s]);this.addChild(o)}return o}return null},t.prototype.draw=function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.clear(),this.drawImp(r,n)},t.prototype.checkEventOn=function(r){return!0},t})(Zg),yb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i,o=this.getWidget(),s=this.getWidget().getPane(),u=s.getChart(),d=o.getBounding(),h=u.getStyles().grid,p=h.show;if(p){r.save(),r.globalCompositeOperation="destination-over";var f=h.horizontal,m=f.show;if(m){var x=s.getAxisComponent(),b=x.getTicks().map(function(M){return{coordinates:[{x:0,y:M.coord},{x:d.width,y:M.coord}]}});(n=this.createFigure({name:"line",attrs:b,styles:f}))===null||n===void 0||n.draw(r)}var C=h.vertical,_=C.show;if(_){var k=u.getXAxisPane().getAxisComponent(),b=k.getTicks().map(function(L){return{coordinates:[{x:L.coord,y:0},{x:L.coord,y:d.height}]}});(i=this.createFigure({name:"line",attrs:b,styles:C}))===null||i===void 0||i.draw(r)}r.restore()}},t})(Ro),i2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.eachChildren=function(r){for(var n=this.getWidget().getPane(),i=n.getChart().getChartStore(),o=i.getVisibleRangeDataList(),s=i.getBarSpace(),u=o.length,d=0;d<u;)r(o[d],s,d),++d},t})(Ro),Cm=1e-6,o2=(function(e){At(t,e);function t(){var r=e.apply(this,Wp([],B0(arguments),!1))||this;return r._heikinAshiCache=new Map,r._boundCandleBarClickEvent=function(n){return function(){return r.getWidget().getPane().getChart().getChartStore().executeAction("onCandleBarClick",n),!1}},r}return t.prototype.drawImp=function(r){var n=this,i=this.getWidget().getPane(),o=i.getId()===zt.CANDLE,s=i.getChart().getChartStore(),u=this.getCandleBarOptions();if(u!==null){var d=u.type,h=u.styles,p=0,f=0;if(u.type==="ohlc"){var m=s.getBarSpace().gapBar;p=Math.min(Math.max(Math.round(m*.2),1),8),p>2&&p%2===1&&p--,f=Math.floor(p/2)}u.type!=="heikin_ashi"&&this._heikinAshiCache.clear();var x=i.getAxisComponent();this.eachChildren(function(b,C){var _,k=b.x,M=b.data,L=M.current,A=M.prev;if(we(L)){var P=L.open,W=L.high,D=L.low,$=L.close,z=h.compareRule==="current_open"?P:(_=A==null?void 0:A.close)!==null&&_!==void 0?_:$,B=[];$>z?(B[0]=h.upColor,B[1]=h.upBorderColor,B[2]=h.upWickColor):$<z?(B[0]=h.downColor,B[1]=h.downBorderColor,B[2]=h.downWickColor):(B[0]=h.noChangeColor,B[1]=h.noChangeBorderColor,B[2]=h.noChangeWickColor);var Z=x.convertToPixel(P),J=x.convertToPixel($),H=[Z,J,x.convertToPixel(W),x.convertToPixel(D)];H.sort(function(ae,re){return ae-re});var ee=C.gapBar%2===0?1:0,le=[];switch(d){case"candle_solid":{le=n._createSolidBar(k,H,C,B,ee);break}case"candle_stroke":{le=n._createStrokeBar(k,H,C,B,ee);break}case"candle_up_stroke":{$>P?le=n._createStrokeBar(k,H,C,B,ee):le=n._createSolidBar(k,H,C,B,ee);break}case"candle_down_stroke":{P>$?le=n._createStrokeBar(k,H,C,B,ee):le=n._createSolidBar(k,H,C,B,ee);break}case"ohlc":{le=[{name:"rect",attrs:[{x:k-f,y:H[0],width:p,height:H[3]-H[0]},{x:k-C.halfGapBar,y:Z+p>H[3]?H[3]-p:Z,width:C.halfGapBar-f,height:p},{x:k+f,y:J+p>H[3]?H[3]-p:J,width:C.halfGapBar-f,height:p}],styles:{color:B[0]}}];break}case"heikin_ashi":{var ce=n._calculateHeikinAshi(b);B=n._getHeikinAshiColors(ce.haValues.open,ce.haValues.close,P,$,h),le=n._createSolidBar(k,ce.priceY,C,B,ee);break}}le.forEach(function(ae){var re,ve=null;o&&(ve={mouseClickEvent:n._boundCandleBarClickEvent(b)}),(re=n.createFigure(ae,ve??void 0))===null||re===void 0||re.draw(r)})}})}},t.prototype.getCandleBarOptions=function(){var r=this.getWidget().getPane().getChart().getStyles().candle;return{type:r.type,styles:r.bar}},t.prototype._createSolidBar=function(r,n,i,o,s){return[{name:"rect",attrs:{x:r,y:n[0],width:1,height:n[3]-n[0]},styles:{color:o[2]}},{name:"rect",attrs:{x:r-i.halfGapBar,y:n[1],width:i.gapBar+s,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke_fill",color:o[0],borderColor:o[1]}}]},t.prototype._createStrokeBar=function(r,n,i,o,s){return[{name:"rect",attrs:[{x:r,y:n[0],width:1,height:n[1]-n[0]},{x:r,y:n[2],width:1,height:n[3]-n[2]}],styles:{color:o[2]}},{name:"rect",attrs:{x:r-i.halfGapBar,y:n[1],width:i.gapBar+s,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke",borderColor:o[1]}}]},t.prototype._calculateHeikinAshi=function(r){var n=r.data,i=r.dataIndex,o=n.current,s=o.open,u=o.high,d=o.low,h=o.close,p=this._heikinAshiCache.get(i);if(p!==void 0){var f=this.getWidget().getPane().getAxisComponent(),m=[f.convertToPixel(p.open),f.convertToPixel(p.close),f.convertToPixel(p.high),f.convertToPixel(p.low)];return m.sort(function(W,D){return W-D}),{priceY:m,haValues:p}}var x=(s+u+d+h)/4,b=0;if(i>0){var C=this._getHeikinAshiValues(i-1);if(C!==null)b=(C.open+C.close)/2;else{var _=this.getPreviousData(i);_!==null?b=(_.open+_.close)/2:b=s}}else b=(s+h)/2;var k=Math.max(u,b,x),M=Math.min(d,b,x),L={open:b,high:k,low:M,close:x};this._heikinAshiCache.set(i,L);var A=this.getWidget().getPane().getAxisComponent(),P=[A.convertToPixel(b),A.convertToPixel(x),A.convertToPixel(k),A.convertToPixel(M)];return P.sort(function(W,D){return W-D}),{priceY:P,haValues:L}},t.prototype._getHeikinAshiValues=function(r){var n=this._heikinAshiCache.get(r);if(n!==void 0)return n;var i=this.getWidget().getPane().getChart().getChartStore().getDataList();if(r<0||r>=i.length)return null;var o=i[r],s=null;r>0&&(s=this._getHeikinAshiValues(r-1));var u=o.open,d=o.high,h=o.low,p=o.close,f=(u+d+h+p)/4,m=0;s!==null?m=(s.open+s.close)/2:m=(u+p)/2;var x=Math.max(d,m,f),b=Math.min(h,m,f),C={open:m,high:x,low:b,close:f};return this._heikinAshiCache.set(r,C),C},t.prototype.getPreviousData=function(r){var n=this.getWidget().getPane(),i=n.getChart().getChartStore(),o=i.getDataList();return r<=0||r>=o.length?null:r>0&&r<o.length?o[r-1]:null},t.prototype._getHeikinAshiColors=function(r,n,i,o,s){var u=[],d=n-r;return d>Cm?(u[0]=s.upColor,u[1]=s.upBorderColor,u[2]=s.upWickColor):d<-Cm?(u[0]=s.downColor,u[1]=s.downBorderColor,u[2]=s.downWickColor):o>i?(u[0]=s.upColor,u[1]=s.upBorderColor,u[2]=s.upWickColor):o<i?(u[0]=s.downColor,u[1]=s.downBorderColor,u[2]=s.downWickColor):(u[0]=s.noChangeColor,u[1]=s.noChangeBorderColor,u[2]=s.noChangeWickColor),u},t})(i2),bb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCandleBarOptions=function(){var r,n,i=this.getWidget().getPane(),o=i.getAxisComponent();if(!o.isInCandle()){var s=i.getChart().getChartStore(),u=s.getIndicatorsByPaneId(i.getId());try{for(var d=sa(u),h=d.next();!h.done;h=d.next()){var p=h.value;if(p.shouldOhlc&&p.visible){var f=p.styles,m=s.getStyles().indicator,x=Mn(f,"ohlc.compareRule",m.ohlc.compareRule),b=Mn(f,"ohlc.upColor",m.ohlc.upColor),C=Mn(f,"ohlc.downColor",m.ohlc.downColor),_=Mn(f,"ohlc.noChangeColor",m.ohlc.noChangeColor);return{type:"ohlc",styles:{compareRule:x,upColor:b,downColor:C,noChangeColor:_,upBorderColor:b,downBorderColor:C,noChangeBorderColor:_,upWickColor:b,downWickColor:C,noChangeWickColor:_}}}}}catch(k){r={error:k}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}}return null},t.prototype.drawImp=function(r){var n=this;e.prototype.drawImp.call(this,r);var i=this.getWidget(),o=i.getPane(),s=o.getChart(),u=i.getBounding(),d=s.getXAxisPane().getAxisComponent(),h=o.getAxisComponent(),p=s.getChartStore(),f=p.getIndicatorsByPaneId(o.getId()),m=p.getStyles().indicator;r.save(),f.forEach(function(x){if(x.visible){x.zLevel<0?r.globalCompositeOperation="destination-over":r.globalCompositeOperation="source-over";var b=!1;if(x.draw!==null&&(r.save(),b=x.draw({ctx:r,chart:s,indicator:x,bounding:u,xAxis:d,yAxis:h}),r.restore()),!b){var C=x.result,_=[];n.eachChildren(function(k,M){var L,A,P,W,D,$,z,B,Z,J,H,ee,le,ce,ae,re=M.halfGapBar,ve=k.dataIndex,pe=k.x,Y=k.data,U=d.convertToPixel(ve-1),de=d.convertToPixel(ve+1),X=(P=C[(A=(L=Y.prev)===null||L===void 0?void 0:L.timestamp)!==null&&A!==void 0?A:""])!==null&&P!==void 0?P:{},fe=($=C[(D=(W=Y.current)===null||W===void 0?void 0:W.timestamp)!==null&&D!==void 0?D:""])!==null&&$!==void 0?$:{},ue=(Z=C[(B=(z=Y.next)===null||z===void 0?void 0:z.timestamp)!==null&&B!==void 0?B:""])!==null&&Z!==void 0?Z:{},Fe={x:U},Te={x:pe},Pe={x:de};x.figures.forEach(function(Ce){var Ee=Ce.key,Je=X[Ee];ht(Je)&&(Fe[Ee]=h.convertToPixel(Je));var Qe=fe[Ee];ht(Qe)&&(Te[Ee]=h.convertToPixel(Qe));var nt=ue[Ee];ht(nt)&&(Pe[Ee]=h.convertToPixel(nt))}),Xg(x,{prev:(H=(J=Y.prev)===null||J===void 0?void 0:J.timestamp)!==null&&H!==void 0?H:null,current:(le=(ee=Y.current)===null||ee===void 0?void 0:ee.timestamp)!==null&&le!==void 0?le:null,next:(ae=(ce=Y.next)===null||ce===void 0?void 0:ce.timestamp)!==null&&ae!==void 0?ae:null},m,function(Ce,Ee,Je){var Qe,nt,Ue;if(we(fe[Ce.key])){var ct=Te[Ce.key],ut=(Qe=Ce.attrs)===null||Qe===void 0?void 0:Qe.call(Ce,{data:{prev:X,current:fe,next:ue},coordinate:{prev:Fe,current:Te,next:Pe},bounding:u,barSpace:M,xAxis:d,yAxis:h});if(!we(ut))switch(Ce.type){case"circle":{ut={x:pe,y:ct,r:Math.max(1,re)};break}case"rect":case"bar":{var Qt=(nt=Ce.baseValue)!==null&&nt!==void 0?nt:h.getRange().from,Kt=h.convertToPixel(Qt),Mt=Math.abs(Kt-ct);Qt!==fe[Ce.key]&&(Mt=Math.max(1,Mt));var gt=0;ct>Kt?gt=Kt:gt=ct,ut={x:pe-re,y:gt,width:Math.max(1,re*2),height:Mt};break}case"line":{we(_[Je])||(_[Je]=[]),ht(Te[Ce.key])&&ht(Pe[Ce.key])&&_[Je].push({coordinates:[{x:Te.x,y:Te[Ce.key]},{x:Pe.x,y:Pe[Ce.key]}],styles:Ee});break}}var jt=Ce.type;we(ut)&&jt!=="line"&&((Ue=n.createFigure({name:jt==="bar"?"rect":jt,attrs:ut,styles:Ee}))===null||Ue===void 0||Ue.draw(r))}})}),_.forEach(function(k){var M,L,A,P;if(k.length>1){for(var W=[{coordinates:[k[0].coordinates[0],k[0].coordinates[1]],styles:k[0].styles}],D=1;D<k.length;D++){var $=W[W.length-1],z=k[D],B=$.coordinates[$.coordinates.length-1];B.x===z.coordinates[0].x&&B.y===z.coordinates[0].y&&$.styles.style===z.styles.style&&$.styles.color===z.styles.color&&$.styles.size===z.styles.size&&$.styles.smooth===z.styles.smooth&&((M=$.styles.dashedValue)===null||M===void 0?void 0:M[0])===((L=z.styles.dashedValue)===null||L===void 0?void 0:L[0])&&((A=$.styles.dashedValue)===null||A===void 0?void 0:A[1])===((P=z.styles.dashedValue)===null||P===void 0?void 0:P[1])?$.coordinates.push(z.coordinates[1]):W.push({coordinates:[z.coordinates[0],z.coordinates[1]],styles:z.styles})}W.forEach(function(Z){var J,H=Z.coordinates,ee=Z.styles;(J=n.createFigure({name:"line",attrs:{coordinates:H},styles:ee}))===null||J===void 0||J.draw(r)})}})}}}),r.restore()},t})(o2),xb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this.getWidget(),i=n.getPane(),o=n.getBounding(),s=n.getPane().getChart().getChartStore(),u=s.getCrosshair(),d=s.getStyles().crosshair;if(ur(u.paneId)&&d.show){if(u.paneId===i.getId()){var h=u.y;this._drawLine(r,[{x:0,y:h},{x:o.width,y:h}],d.horizontal)}var p=u.realX;this._drawLine(r,[{x:p,y:0},{x:p,y:o.height}],d.vertical)}},t.prototype._drawLine=function(r,n,i){var o;if(i.show){var s=i.line;s.show&&((o=this.createFigure({name:"line",attrs:{coordinates:n},styles:s}))===null||o===void 0||o.draw(r))}},t})(Ro),a2=(function(e){At(t,e);function t(r){var n=e.call(this,r)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(i,o){return function(){var s=n.getWidget().getPane();return s.getChart().getChartStore().executeAction(i,o),!0}},n._featureMouseMoveEvent=function(i){return function(){return n._activeFeatureInfo=i,!0}},n.registerEvent("mouseMoveEvent",function(i){return n._activeFeatureInfo=null,!1}),n}return t.prototype.drawImp=function(r){var n=this.getWidget(),i=n.getPane(),o=i.getChart().getChartStore(),s=o.getCrosshair();if(we(s.kLineData)){var u=n.getBounding(),d=o.getStyles().indicator.tooltip,h=d.offsetLeft,p=d.offsetTop,f=d.offsetRight;this.drawIndicatorTooltip(r,h,p,u.width-f)}},t.prototype.drawIndicatorTooltip=function(r,n,i,o){var s=this,u=this.getWidget().getPane(),d=u.getChart().getChartStore(),h=d.getStyles().indicator,p=h.tooltip;if(this.isDrawTooltip(d.getCrosshair(),p)){var f=d.getIndicatorsByPaneId(u.getId()),m=p.title,x=p.legend;f.forEach(function(b){var C=0,_={x:n,y:i},k=s.getIndicatorTooltipData(b),M=k.name,L=k.calcParamsText,A=k.legends,P=k.features,W=M.length>0,D=A.length>0;if(W||D){var $=s.classifyTooltipFeatures(P);if(C=s.drawStandardTooltipFeatures(r,$[0],_,b,n,C,o),W){var z=M;L.length>0&&(z="".concat(z).concat(L));var B=m.color;C=s.drawStandardTooltipLegends(r,[{title:{text:"",color:B},value:{text:z,color:B}}],_,n,C,o,m)}C=s.drawStandardTooltipFeatures(r,$[1],_,b,n,C,o),D&&(C=s.drawStandardTooltipLegends(r,A,_,n,C,o,x)),C=s.drawStandardTooltipFeatures(r,$[2],_,b,n,C,o),i=_.y+C}})}return i},t.prototype.drawStandardTooltipFeatures=function(r,n,i,o,s,u,d){var h=this;if(n.length>0){var p=0,f=0;n.forEach(function(b){var C=b.marginLeft,_=C===void 0?0:C,k=b.marginTop,M=k===void 0?0:k,L=b.marginRight,A=L===void 0?0:L,P=b.marginBottom,W=P===void 0?0:P,D=b.paddingLeft,$=D===void 0?0:D,z=b.paddingTop,B=z===void 0?0:z,Z=b.paddingRight,J=Z===void 0?0:Z,H=b.paddingBottom,ee=H===void 0?0:H,le=b.size,ce=le===void 0?0:le,ae=b.type,re=b.content,ve=0;if(ae==="icon_font"){var pe=re;r.font=Xc(ce,"normal",pe.family),ve=r.measureText(pe.code).width}else ve=ce;p+=_+$+ve+J+A,f=Math.max(f,M+B+ce+ee+W)}),i.x+p>d?(i.x=s,i.y+=u,u=f):u=Math.max(u,f);var m=this.getWidget().getPane(),x=m.getId();n.forEach(function(b){var C,_,k,M,L,A=b.marginLeft,P=A===void 0?0:A,W=b.marginTop,D=W===void 0?0:W,$=b.marginRight,z=$===void 0?0:$,B=b.paddingLeft,Z=B===void 0?0:B,J=b.paddingTop,H=J===void 0?0:J,ee=b.paddingRight,le=ee===void 0?0:ee,ce=b.paddingBottom,ae=ce===void 0?0:ce,re=b.backgroundColor,ve=b.activeBackgroundColor,pe=b.borderRadius,Y=b.size,U=Y===void 0?0:Y,de=b.color,X=b.activeColor,fe=b.type,ue=b.content,Fe=de,Te=re;((C=h._activeFeatureInfo)===null||C===void 0?void 0:C.paneId)===x&&((_=h._activeFeatureInfo.indicator)===null||_===void 0?void 0:_.id)===(o==null?void 0:o.id)&&h._activeFeatureInfo.feature.id===b.id&&(Fe=X??de,Te=ve??re);var Pe="onCandleTooltipFeatureClick",Ce={paneId:x,feature:b};we(o)&&(Pe="onIndicatorTooltipFeatureClick",Ce.indicator=o);var Ee={mouseClickEvent:h._featureClickEvent(Pe,Ce),mouseMoveEvent:h._featureMouseMoveEvent(Ce)},Je=0;if(fe==="icon_font"){var Qe=ue;(k=h.createFigure({name:"text",attrs:{text:Qe.code,x:i.x+P,y:i.y+D},styles:{paddingLeft:Z,paddingTop:H,paddingRight:le,paddingBottom:ae,borderRadius:pe,size:U,family:Qe.family,color:Fe,backgroundColor:Te}},Ee))===null||k===void 0||k.draw(r),Je=r.measureText(Qe.code).width}else{(M=h.createFigure({name:"rect",attrs:{x:i.x+P,y:i.y+D,width:U,height:U},styles:{paddingLeft:Z,paddingTop:H,paddingRight:le,paddingBottom:ae,color:Te}},Ee))===null||M===void 0||M.draw(r);var nt=ue;(L=h.createFigure({name:"path",attrs:{path:nt.path,x:i.x+P+Z,y:i.y+D+H,width:U,height:U},styles:{style:nt.style,lineWidth:nt.lineWidth,color:Fe}}))===null||L===void 0||L.draw(r),Je=U}i.x+=P+Z+Je+le+z})}return u},t.prototype.drawStandardTooltipLegends=function(r,n,i,o,s,u,d){var h=this;if(n.length>0){var p=d.marginLeft,f=d.marginTop,m=d.marginRight,x=d.marginBottom,b=d.size,C=d.family,_=d.weight;r.font=Xc(b,_,C),n.forEach(function(k){var M,L,A=k.title,P=k.value,W=r.measureText(A.text).width,D=r.measureText(P.text).width,$=W+D,z=f+b+x;i.x+p+$+m>u?(i.x=o,i.y+=s,s=z):s=Math.max(s,z),A.text.length>0&&((M=h.createFigure({name:"text",attrs:{x:i.x+p,y:i.y+f,text:A.text},styles:{color:A.color,size:b,family:C,weight:_}}))===null||M===void 0||M.draw(r)),(L=h.createFigure({name:"text",attrs:{x:i.x+p+W,y:i.y+f,text:P.text},styles:{color:P.color,size:b,family:C,weight:_}}))===null||L===void 0||L.draw(r),i.x+=p+$+m})}return s},t.prototype.isDrawTooltip=function(r,n){var i=n.showRule;return i==="always"||i==="follow_cross"&&ur(r.paneId)},t.prototype.getIndicatorTooltipData=function(r){var n,i,o,s=this.getWidget().getPane().getChart().getChartStore(),u=s.getStyles().indicator,d=u.tooltip,h=d.title,p="",f="";if(h.show&&(h.showName&&(p=r.shortName),h.showParams)){var m=r.calcParams;m.length>0&&(f="(".concat(m.join(","),")"))}var x={name:p,calcParamsText:f,legends:[],features:d.features},b=s.getCrosshair().dataIndex,C=r.result,_=s.getInnerFormatter(),k=s.getDecimalFold(),M=s.getThousandsSeparator(),L=[];if(r.visible){var A=s.getDataList(),P=(n=A[b])!==null&&n!==void 0?n:{},W=(i=A[b-1])!==null&&i!==void 0?i:{},D=C[P.timestamp];!we(D)&&b===A.length-1&&(D=C[W.timestamp]);var $=d.legend.defaultValue;Xg(r,{prev:W.timestamp,current:P.timestamp,next:(o=A[b])===null||o===void 0?void 0:o.timestamp},u,function(ve,pe){if(ur(ve.title)){var Y=pe.color,U=D==null?void 0:D[ve.key];ht(U)&&(U=Kn(U,r.precision),r.shouldFormatBigNumber&&(U=_.formatBigNumber(U)),U=k.format(M.format(U))),L.push({title:{text:ve.title,color:Y},value:{text:U??$,color:Y}})}}),x.legends=L}if(pi(r.createTooltipDataSource)){var z=this.getWidget(),B=z.getPane(),Z=B.getChart(),J=r.createTooltipDataSource({chart:Z,indicator:r,crosshair:s.getCrosshair(),bounding:z.getBounding(),xAxis:B.getChart().getXAxisPane().getAxisComponent(),yAxis:B.getAxisComponent()}),H=J.name,ee=J.calcParamsText,le=J.legends,ce=J.features;if(h.show&&(ur(H)&&h.showName&&(x.name=H),ur(ee)&&h.showParams&&(x.calcParamsText=ee)),we(ce)&&(x.features=ce),we(le)&&r.visible){var ae=[],re=u.tooltip.legend.color;le.forEach(function(ve){var pe={text:"",color:re};na(ve.title)?pe=ve.title:pe.text=ve.title;var Y={text:"",color:re};na(ve.value)?Y=ve.value:Y.text=ve.value,ht(Number(Y.text))&&(Y.text=k.format(M.format(Y.text))),ae.push({title:pe,value:Y})}),x.legends=ae}}return x},t.prototype.classifyTooltipFeatures=function(r){var n=[],i=[],o=[];return r.forEach(function(s){switch(s.position){case"left":{n.push(s);break}case"middle":{i.push(s);break}case"right":{o.push(s);break}}}),[n,i,o]},t})(Ro),s2=(function(e){At(t,e);function t(r){var n=e.call(this,r)||this;return n._initEvent(),n}return t.prototype._initEvent=function(){var r=this,n=this.getWidget(),i=n.getPane(),o=i.getId(),s=i.getChart(),u=s.getChartStore();this.registerEvent("mouseMoveEvent",function(d){var h,p=u.getProgressOverlayInfo();if(p!==null){var f=p.overlay,m=p.paneId;f.isStart()&&(u.updateProgressOverlayInfo(o),m=o);var x=f.points.length-1;return f.isDrawing()&&m===o&&(f.eventMoveForDrawing(r._coordinateToPoint(f,d)),(h=f.onDrawing)===null||h===void 0||h.call(f,je({chart:s,overlay:f},d))),r._figureMouseMoveEvent(f,"point",x,{key:"".concat(bd,"point_").concat(x),type:"circle",attrs:{}})(d)}return u.setHoverOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(b,C){return r._processOverlayMouseEnterEvent(b,C,d)},function(b,C){return r._processOverlayMouseLeaveEvent(b,C,d)}),n.setForceCursor(null),!1}).registerEvent("mouseClickEvent",function(d){var h,p,f=u.getProgressOverlayInfo();if(f!==null){var m=f.overlay,x=f.paneId;m.isStart()&&(u.updateProgressOverlayInfo(o,!0),x=o);var b=m.points.length-1;return m.isDrawing()&&x===o&&(m.eventMoveForDrawing(r._coordinateToPoint(m,d)),(h=m.onDrawing)===null||h===void 0||h.call(m,je({chart:s,overlay:m},d)),m.nextStep(),m.isDrawing()||(u.progressOverlayComplete(),(p=m.onDrawEnd)===null||p===void 0||p.call(m,je({chart:s,overlay:m},d)))),r._figureMouseClickEvent(m,"point",b,{key:"".concat(bd,"point_").concat(b),type:"circle",attrs:{}})(d)}return u.setClickOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(C,_){return r._processOverlaySelectedEvent(C,_,d)},function(C,_){return r._processOverlayDeselectedEvent(C,_,d)}),!1}).registerEvent("mouseDoubleClickEvent",function(d){var h,p=u.getProgressOverlayInfo();if(p!==null){var f=p.overlay,m=p.paneId;f.isDrawing()&&m===o&&(f.forceComplete(),f.isDrawing()||(u.progressOverlayComplete(),(h=f.onDrawEnd)===null||h===void 0||h.call(f,je({chart:s,overlay:f},d))));var x=f.points.length-1;return r._figureMouseClickEvent(f,"point",x,{key:"".concat(bd,"point_").concat(x),type:"circle",attrs:{}})(d)}return!1}).registerEvent("mouseRightClickEvent",function(d){var h=u.getProgressOverlayInfo();if(h!==null){var p=h.overlay;if(p.isDrawing()){var f=p.points.length-1;return r._figureMouseRightClickEvent(p,"point",f,{key:"".concat(bd,"point_").concat(f),type:"circle",attrs:{}})(d)}}return!1}).registerEvent("mouseUpEvent",function(d){var h,p=u.getPressedOverlayInfo(),f=p.overlay,m=p.figure;return f!==null&&ra("onPressedMoveEnd",m)&&((h=f.onPressedMoveEnd)===null||h===void 0||h.call(f,je({chart:s,overlay:f,figure:m??void 0},d))),u.setPressedOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null}),!1}).registerEvent("pressedMouseMoveEvent",function(d){var h,p=u.getPressedOverlayInfo(),f=p.overlay,m=p.figureType,x=p.figureIndex,b=p.figure;if(f!==null&&ra("onPressedMoving",b)){if(!f.lock){var C=r._coordinateToPoint(f,d);m==="point"?f.eventPressedPointMove(C,x):f.eventPressedOtherMove(C,r.getWidget().getPane().getChart().getChartStore());var _=!1;(h=f.onPressedMoving)===null||h===void 0||h.call(f,je(je({chart:s,overlay:f,figure:b??void 0},d),{preventDefault:function(){_=!0}})),_?r.getWidget().setForceCursor(null):r.getWidget().setForceCursor("pointer")}return!0}return r.getWidget().setForceCursor(null),!1})},t.prototype._createFigureEvents=function(r,n,i,o){return r.isDrawing()?null:{mouseMoveEvent:this._figureMouseMoveEvent(r,n,i,o),mouseDownEvent:this._figureMouseDownEvent(r,n,i,o),mouseClickEvent:this._figureMouseClickEvent(r,n,i,o),mouseRightClickEvent:this._figureMouseRightClickEvent(r,n,i,o),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(r,n,i,o)}},t.prototype._processOverlayMouseEnterEvent=function(r,n,i){return pi(r.onMouseEnter)&&ra("onMouseEnter",n)?(r.onMouseEnter(je({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._processOverlayMouseLeaveEvent=function(r,n,i){return pi(r.onMouseLeave)&&ra("onMouseLeave",n)?(r.onMouseLeave(je({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._processOverlaySelectedEvent=function(r,n,i){var o;return ra("onSelected",n)?((o=r.onSelected)===null||o===void 0||o.call(r,je({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._processOverlayDeselectedEvent=function(r,n,i){var o;return ra("onDeselected",n)?((o=r.onDeselected)===null||o===void 0||o.call(r,je({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._figureMouseMoveEvent=function(r,n,i,o){var s=this;return function(u){var d,h=s.getWidget().getPane(),p=!r.isDrawing()&&ra("onMouseMove",o);if(p){var f=!1;(d=r.onMouseMove)===null||d===void 0||d.call(r,je(je({chart:h.getChart(),overlay:r,figure:o},u),{preventDefault:function(){f=!0}})),f?s.getWidget().setForceCursor(null):s.getWidget().setForceCursor("pointer")}return h.getChart().getChartStore().setHoverOverlayInfo({paneId:h.getId(),overlay:r,figureType:n,figure:o,figureIndex:i},function(m,x){return s._processOverlayMouseEnterEvent(m,x,u)},function(m,x){return s._processOverlayMouseLeaveEvent(m,x,u)}),p}},t.prototype._figureMouseDownEvent=function(r,n,i,o){var s=this;return function(u){var d,h=s.getWidget().getPane(),p=h.getId();return r.startPressedMove(s._coordinateToPoint(r,u)),ra("onPressedMoveStart",o)?((d=r.onPressedMoveStart)===null||d===void 0||d.call(r,je({chart:h.getChart(),overlay:r,figure:o},u)),h.getChart().getChartStore().setPressedOverlayInfo({paneId:p,overlay:r,figureType:n,figureIndex:i,figure:o}),!r.isDrawing()):!1}},t.prototype._figureMouseClickEvent=function(r,n,i,o){var s=this;return function(u){var d,h=s.getWidget().getPane(),p=h.getId(),f=!r.isDrawing()&&ra("onClick",o);return f&&((d=r.onClick)===null||d===void 0||d.call(r,je({chart:s.getWidget().getPane().getChart(),overlay:r,figure:o},u))),h.getChart().getChartStore().setClickOverlayInfo({paneId:p,overlay:r,figureType:n,figureIndex:i,figure:o},function(m,x){return s._processOverlaySelectedEvent(m,x,u)},function(m,x){return s._processOverlayDeselectedEvent(m,x,u)}),f}},t.prototype._figureMouseDoubleClickEvent=function(r,n,i,o){var s=this;return function(u){var d;return ra("onDoubleClick",o)?((d=r.onDoubleClick)===null||d===void 0||d.call(r,je(je({},u),{chart:s.getWidget().getPane().getChart(),figure:o,overlay:r})),!r.isDrawing()):!1}},t.prototype._figureMouseRightClickEvent=function(r,n,i,o){var s=this;return function(u){var d;if(ra("onRightClick",o)){var h=!1;return(d=r.onRightClick)===null||d===void 0||d.call(r,je(je({chart:s.getWidget().getPane().getChart(),overlay:r,figure:o},u),{preventDefault:function(){h=!0}})),h||s.getWidget().getPane().getChart().getChartStore().removeOverlay(r),!r.isDrawing()}return!1}},t.prototype._coordinateToPoint=function(r,n){var i,o={},s=this.getWidget().getPane(),u=s.getChart(),d=s.getId(),h=u.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var p=u.getXAxisPane().getAxisComponent(),f=p.convertFromPixel(n.x),m=(i=h.dataIndexToTimestamp(f))!==null&&i!==void 0?i:void 0;o.timestamp=m,o.dataIndex=f}if(this.coordinateToPointValueFlag()){var x=s.getAxisComponent(),b=x.convertFromPixel(n.y);if(r.mode!=="normal"&&d===zt.CANDLE&&ht(o.dataIndex)){var C=h.getDataByDataIndex(o.dataIndex);if(C!==null){var _=r.modeSensitivity;if(b>C.high)if(r.mode==="weak_magnet"){var k=x.convertToPixel(C.high),M=x.convertFromPixel(k-_);b<M&&(b=C.high)}else b=C.high;else if(b<C.low)if(r.mode==="weak_magnet"){var L=x.convertToPixel(C.low),M=x.convertFromPixel(L-_);b>M&&(b=C.low)}else b=C.low;else{var A=Math.max(C.open,C.close),P=Math.min(C.open,C.close);b>A?b-A<C.high-b?b=A:b=C.high:b<P?b-C.low<P-b?b=C.low:b=P:A-b<b-P?b=A:b=P}}}o.value=b}return o},t.prototype.coordinateToPointValueFlag=function(){return!0},t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.dispatchEvent=function(r,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(r,n):e.prototype.dispatchEvent.call(this,r,n)},t.prototype.drawImp=function(r){var n=this,i=this.getCompleteOverlays();i.forEach(function(s){s.visible&&n._drawOverlay(r,s)});var o=this.getProgressOverlay();we(o)&&o.visible&&this._drawOverlay(r,o)},t.prototype._drawOverlay=function(r,n){var i=n.points,o=this.getWidget().getPane(),s=o.getChart(),u=s.getChartStore(),d=o.getAxisComponent(),h=s.getXAxisPane().getAxisComponent(),p=i.map(function(m){var x,b=null;ht(m.timestamp)&&(b=u.timestampToDataIndex(m.timestamp));var C={x:0,y:0};return ht(b)&&(C.x=h.convertToPixel(b)),ht(m.value)&&(C.y=(x=d==null?void 0:d.convertToPixel(m.value))!==null&&x!==void 0?x:0),C});if(p.length>0){var f=[].concat(this.getFigures(n,p));this.drawFigures(r,n,f)}this.drawDefaultFigures(r,n,p)},t.prototype.drawFigures=function(r,n,i){var o=this,s=this.getWidget().getPane().getChart().getStyles().overlay;i.forEach(function(u,d){var h=u.type,p=u.styles,f=u.attrs,m=[].concat(f);m.forEach(function(x){var b,C,_=o._createFigureEvents(n,"other",d,u),k=je(je(je({},s[h]),(b=n.styles)===null||b===void 0?void 0:b[h]),p);(C=o.createFigure({name:h,attrs:x,styles:k},_??void 0))===null||C===void 0||C.draw(r)})})},t.prototype.getCompleteOverlays=function(){var r=this.getWidget().getPane();return r.getChart().getChartStore().getOverlaysByPaneId(r.getId())},t.prototype.getProgressOverlay=function(){var r=this.getWidget().getPane(),n=r.getChart().getChartStore().getProgressOverlayInfo();return we(n)&&n.paneId===r.getId()?n.overlay:null},t.prototype.getFigures=function(r,n){var i,o,s=this.getWidget(),u=s.getPane(),d=u.getChart(),h=u.getAxisComponent(),p=d.getXAxisPane().getAxisComponent(),f=s.getBounding();return(o=(i=r.createPointFigures)===null||i===void 0?void 0:i.call(r,{chart:d,overlay:r,coordinates:n,bounding:f,xAxis:p,yAxis:h}))!==null&&o!==void 0?o:[]},t.prototype.drawDefaultFigures=function(r,n,i){var o=this,s,u;if(n.needDefaultPointFigure){var d=this.getWidget().getPane().getChart().getChartStore(),h=d.getHoverOverlayInfo(),p=d.getClickOverlayInfo();if(((s=h.overlay)===null||s===void 0?void 0:s.id)===n.id&&h.figureType!=="none"||((u=p.overlay)===null||u===void 0?void 0:u.id)===n.id&&p.figureType!=="none"){var f=d.getStyles().overlay,m=n.styles,x=je(je({},f.point),m==null?void 0:m.point);i.forEach(function(b,C){var _,k,M,L,A,P=b.x,W=b.y,D=x.radius,$=x.color,z=x.borderColor,B=x.borderSize;((_=h.overlay)===null||_===void 0?void 0:_.id)===n.id&&h.figureType==="point"&&((k=h.figure)===null||k===void 0?void 0:k.key)==="".concat(bd,"point_").concat(C)&&(D=x.activeRadius,$=x.activeColor,z=x.activeBorderColor,B=x.activeBorderSize),(L=o.createFigure({name:"circle",attrs:{x:P,y:W,r:D+B},styles:{color:z}},(M=o._createFigureEvents(n,"point",C,{key:"".concat(bd,"point_").concat(C),type:"circle",attrs:{x:P,y:W,r:D+B},styles:{color:z}}))!==null&&M!==void 0?M:void 0))===null||L===void 0||L.draw(r),(A=o.createFigure({name:"circle",attrs:{x:P,y:W,r:D},styles:{color:$}}))===null||A===void 0||A.draw(r)})}}},t})(Ro),l2=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._gridView=new yb(i),i._indicatorView=new bb(i),i._crosshairLineView=new xb(i),i._tooltipView=i.createTooltipView(),i._overlayView=new s2(i),i.addChild(i._tooltipView),i.addChild(i._overlayView),i}return t.prototype.getName=function(){return Bt.MAIN},t.prototype.updateMain=function(r){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(r),this._indicatorView.draw(r),this._gridView.draw(r))},t.prototype.createTooltipView=function(){return new a2(this)},t.prototype.updateMainContent=function(r){},t.prototype.updateOverlayContent=function(r){},t.prototype.updateOverlay=function(r){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(r),this._crosshairLineView.draw(r),this.updateOverlayContent(r)),this._tooltipView.draw(r)},t})(Qg),wb=(function(e){At(t,e);function t(){var r=e.apply(this,Wp([],B0(arguments),!1))||this;return r._ripplePoint=r.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),r._animationFrameTime=0,r._animation=new Tg({iterationCount:1/0}).doFrame(function(n){r._animationFrameTime=n;var i=r.getWidget().getPane();i.getChart().updatePane(0,i.getId())}),r}return t.prototype.drawImp=function(r){var n,i,o,s=this.getWidget(),u=s.getPane(),d=u.getChart(),h=d.getDataList(),p=h.length-1,f=s.getBounding(),m=u.getAxisComponent(),x=d.getStyles().candle.area,b=[],C=Number.MAX_SAFE_INTEGER,_=Number.MIN_SAFE_INTEGER,k=null;if(this.eachChildren(function(D){var $=D.x,z=D.data.current,B=z==null?void 0:z[x.value];if(ht(B)){var Z=m.convertToPixel(B);_===Number.MIN_SAFE_INTEGER&&(_=$),b.push({x:$,y:Z}),C=Math.min(C,Z),D.dataIndex===p&&(k={x:$,y:Z})}}),b.length>0){(n=this.createFigure({name:"line",attrs:{coordinates:b},styles:{color:x.lineColor,size:x.lineSize,smooth:x.smooth}}))===null||n===void 0||n.draw(r);var M=x.backgroundColor,L="";if(Va(M)){var A=r.createLinearGradient(0,f.height,0,C);try{M.forEach(function(D){var $=D.offset,z=D.color;A.addColorStop($,z)})}catch{}L=A}else L=M;r.fillStyle=L,r.beginPath(),r.moveTo(_,f.height),r.lineTo(b[0].x,b[0].y),Zy(r,b,x.smooth),r.lineTo(b[b.length-1].x,f.height),r.closePath(),r.fill()}var P=x.point;if(P.show&&we(k)){(i=this.createFigure({name:"circle",attrs:{x:k.x,y:k.y,r:P.radius},styles:{style:"fill",color:P.color}}))===null||i===void 0||i.draw(r);var W=P.rippleRadius;P.animation&&(W=P.radius+this._animationFrameTime/P.animationDuration*(P.rippleRadius-P.radius),this._animation.setDuration(P.animationDuration).start()),(o=this._ripplePoint)===null||o===void 0||o.setAttrs({x:k.x,y:k.y,r:W}).setStyles({style:"fill",color:P.rippleColor}).draw(r)}else this.stopAnimation()},t.prototype.stopAnimation=function(){this._animation.stop()},t})(i2),Cb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i,o=this.getWidget(),s=o.getPane(),u=s.getChart().getChartStore(),d=u.getStyles().candle.priceMark,h=d.high,p=d.low;if(d.show&&(h.show||p.show)){var f=u.getVisibleRangeHighLowPrice(),m=(i=(n=u.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&i!==void 0?i:2,x=s.getAxisComponent(),b=f[0],C=b.price,_=b.x,k=f[1],M=k.price,L=k.x,A=x.convertToPixel(C),P=x.convertToPixel(M),W=u.getDecimalFold(),D=u.getThousandsSeparator();h.show&&C!==Number.MIN_SAFE_INTEGER&&this._drawMark(r,W.format(D.format(Kn(C,m))),{x:_,y:A},A<P?[-2,-5]:[2,5],h),p.show&&M!==Number.MAX_SAFE_INTEGER&&this._drawMark(r,W.format(D.format(Kn(M,m))),{x:L,y:P},A<P?[2,5]:[-2,-5],p)}},t.prototype._drawMark=function(r,n,i,o,s){var u,d,h,p=i.x,f=i.y+o[0];(u=this.createFigure({name:"line",attrs:{coordinates:[{x:p-2,y:f+o[0]},{x:p,y:f},{x:p+2,y:f+o[0]}]},styles:{color:s.color}}))===null||u===void 0||u.draw(r);var m=0,x=0,b="left",C=this.getWidget().getBounding().width;p>C/2?(m=p-5,x=m-s.textOffset,b="right"):(m=p+5,b="left",x=m+s.textOffset);var _=f+o[1];(d=this.createFigure({name:"line",attrs:{coordinates:[{x:p,y:f},{x:p,y:_},{x:m,y:_}]},styles:{color:s.color}}))===null||d===void 0||d.draw(r),(h=this.createFigure({name:"text",attrs:{x,y:_,text:n,align:b,baseline:"middle"},styles:{color:s.color,size:s.textSize,family:s.textFamily,weight:s.textWeight}}))===null||h===void 0||h.draw(r)},t})(Ro),_b=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i,o,s=this.getWidget(),u=s.getPane(),d=s.getBounding(),h=u.getChart().getChartStore(),p=h.getStyles().candle.priceMark,f=p.last,m=f.line;if(p.show&&f.show&&m.show){var x=u.getAxisComponent(),b=h.getDataList(),C=b[b.length-1];if(we(C)){var _=C.close,k=C.open,M=f.compareRule==="current_open"?k:(i=(n=b[b.length-2])===null||n===void 0?void 0:n.close)!==null&&i!==void 0?i:_,L=x.convertToNicePixel(_),A="";_>M?A=f.upColor:_<M?A=f.downColor:A=f.noChangeColor,(o=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:L},{x:d.width,y:L}]},styles:{style:m.style,color:A,size:m.size,dashedValue:m.dashedValue}}))===null||o===void 0||o.draw(r)}}},t})(Ro),Sb={second:"HH:mm:ss",minute:"HH:mm",hour:"MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},c2={second:"HH:mm:ss",minute:"YYYY-MM-DD HH:mm",hour:"YYYY-MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},kb={time:"",open:"",high:"",low:"",close:"",volume:"",turnover:"",change:"",second:"",minute:"",hour:"",day:"",week:"",month:"",year:""},Mb={time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: ",second:"S",minute:"",hour:"H",day:"D",week:"W",month:"M",year:"Y"},Tb={"zh-CN":kb,"en-US":Mb};function _m(e,t){var r;return(r=Tb[t][e])!==null&&r!==void 0?r:e}var Eb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this.getWidget(),i=n.getPane().getChart().getChartStore(),o=i.getCrosshair();if(we(o.kLineData)){var s=n.getBounding(),u=i.getStyles(),d=u.candle,h=u.indicator;if(d.tooltip.showType==="rect"&&h.tooltip.showType==="rect"){var p=this.isDrawTooltip(o,d.tooltip),f=this.isDrawTooltip(o,h.tooltip);this._drawRectTooltip(r,p,f,d.tooltip.offsetTop)}else if(d.tooltip.showType==="standard"&&h.tooltip.showType==="standard"){var m=d.tooltip,x=m.offsetLeft,b=m.offsetTop,C=m.offsetRight,_=s.width-C,k=this._drawCandleStandardTooltip(r,x,b,_);this.drawIndicatorTooltip(r,x,k,_)}else if(d.tooltip.showType==="rect"&&h.tooltip.showType==="standard"){var M=d.tooltip,x=M.offsetLeft,b=M.offsetTop,C=M.offsetRight,_=s.width-C,L=this.drawIndicatorTooltip(r,x,b,_),p=this.isDrawTooltip(o,d.tooltip);this._drawRectTooltip(r,p,!1,L)}else{var A=d.tooltip,x=A.offsetLeft,b=A.offsetTop,C=A.offsetRight,_=s.width-C,P=this._drawCandleStandardTooltip(r,x,b,_),f=this.isDrawTooltip(o,h.tooltip);this._drawRectTooltip(r,!1,f,P)}}},t.prototype._drawCandleStandardTooltip=function(r,n,i,o){var s,u=this.getWidget().getPane().getChart().getChartStore(),d=u.getStyles().candle,h=d.tooltip,p=h.legend,f=0,m={x:n,y:i},x=u.getCrosshair();if(this.isDrawTooltip(x,h)){var b=h.title;if(b.show){var C=(s=u.getPeriod())!==null&&s!==void 0?s:{},_=C.type,k=_===void 0?"":_,M=C.span,L=M===void 0?"":M,A=um(b.template,je(je({},u.getSymbol()),{period:"".concat(L).concat(_m(k,u.getLocale()))})),P=b.color,W=this.drawStandardTooltipLegends(r,[{title:{text:"",color:P},value:{text:A,color:P}}],{x:n,y:i},n,0,o,b);m.y=m.y+W}var D=this._getCandleTooltipLegends(),$=this.classifyTooltipFeatures(h.features);f=this.drawStandardTooltipFeatures(r,$[0],m,null,n,f,o),f=this.drawStandardTooltipFeatures(r,$[1],m,null,n,f,o),D.length>0&&(f=this.drawStandardTooltipLegends(r,D,m,n,f,o,p)),f=this.drawStandardTooltipFeatures(r,$[2],m,null,n,f,o)}return m.y+f},t.prototype._drawRectTooltip=function(r,n,i,o){var s=this,u,d,h=this.getWidget(),p=h.getPane(),f=p.getChart().getChartStore(),m=f.getStyles(),x=m.candle,b=m.indicator,C=x.tooltip,_=b.tooltip;if(n||i){var k=this._getCandleTooltipLegends(),M=C.offsetLeft,L=C.offsetTop,A=C.offsetRight,P=C.offsetBottom,W=C.legend,D=W.marginLeft,$=W.marginRight,z=W.marginTop,B=W.marginBottom,Z=W.size,J=W.weight,H=W.family,ee=C.rect,le=ee.position,ce=ee.paddingLeft,ae=ee.paddingRight,re=ee.paddingTop,ve=ee.paddingBottom,pe=ee.offsetLeft,Y=ee.offsetRight,U=ee.offsetTop,de=ee.offsetBottom,X=ee.borderSize,fe=ee.borderRadius,ue=ee.borderColor,Fe=ee.color,Te=0,Pe=0,Ce=0;n&&(r.font=Xc(Z,J,H),k.forEach(function(wt){var St=wt.title,Ct=wt.value,Wt="".concat(St.text).concat(Ct.text),Gt=r.measureText(Wt).width+D+$;Te=Math.max(Te,Gt)}),Ce+=(B+z+Z)*k.length);var Ee=_.legend,Je=Ee.marginLeft,Qe=Ee.marginRight,nt=Ee.marginTop,Ue=Ee.marginBottom,ct=Ee.size,ut=Ee.weight,Qt=Ee.family,Kt=[];if(i){var Mt=f.getIndicatorsByPaneId(p.getId());r.font=Xc(ct,ut,Qt),Mt.forEach(function(wt){var St=s.getIndicatorTooltipData(wt).legends;Kt.push(St),St.forEach(function(Ct){var Wt=Ct.title,Gt=Ct.value,yr="".concat(Wt.text).concat(Gt.text),pr=r.measureText(yr).width+Je+Qe;Te=Math.max(Te,pr),Ce+=nt+Ue+ct})})}if(Pe+=Te,Pe!==0&&Ce!==0){var gt=f.getCrosshair(),jt=h.getBounding(),ln=p.getYAxisWidget().getBounding();Pe+=X*2+ce+ae,Ce+=X*2+re+ve;var mn=jt.width/2,dr=le==="pointer"&&gt.paneId===zt.CANDLE,Ft=((u=gt.realX)!==null&&u!==void 0?u:0)>mn,Zt=0;if(dr){var nr=gt.realX;Ft?Zt=nr-Y-Pe:Zt=nr+pe}else{var Gr=this.getWidget().getPane().getAxisComponent();Ft?(Zt=pe+M,Gr.inside&&Gr.position==="left"&&(Zt+=ln.width)):(Zt=jt.width-Y-Pe-A,Gr.inside&&Gr.position==="right"&&(Zt-=ln.width))}var hr=o+U;if(dr){var Vr=gt.y;hr=Vr-Ce/2,hr+Ce>jt.height-de-P&&(hr=jt.height-de-Ce-P),hr<o+U&&(hr=o+U+L)}(d=this.createFigure({name:"rect",attrs:{x:Zt,y:hr,width:Pe,height:Ce},styles:{style:"stroke_fill",color:Fe,borderColor:ue,borderSize:X,borderRadius:fe}}))===null||d===void 0||d.draw(r);var Tt=Zt+X+ce+D,We=hr+X+re;if(n&&k.forEach(function(wt){var St,Ct;We+=z;var Wt=wt.title;(St=s.createFigure({name:"text",attrs:{x:Tt,y:We,text:Wt.text},styles:{color:Wt.color,size:Z,family:H,weight:J}}))===null||St===void 0||St.draw(r);var Gt=wt.value;(Ct=s.createFigure({name:"text",attrs:{x:Zt+Pe-X-$-ae,y:We,text:Gt.text,align:"right"},styles:{color:Gt.color,size:Z,family:H,weight:J}}))===null||Ct===void 0||Ct.draw(r),We+=Z+B}),i){var _t=Zt+X+ce+Je;Kt.forEach(function(wt){wt.forEach(function(St){var Ct,Wt;We+=nt;var Gt=St.title,yr=St.value;(Ct=s.createFigure({name:"text",attrs:{x:_t,y:We,text:Gt.text},styles:{color:Gt.color,size:ct,family:Qt,weight:ut}}))===null||Ct===void 0||Ct.draw(r),(Wt=s.createFigure({name:"text",attrs:{x:Zt+Pe-X-Qe-ae,y:We,text:yr.text,align:"right"},styles:{color:yr.color,size:ct,family:Qt,weight:ut}}))===null||Wt===void 0||Wt.draw(r),We+=ct+Ue})})}}}},t.prototype._getCandleTooltipLegends=function(){var r,n,i,o,s,u,d,h,p=this.getWidget().getPane().getChart().getChartStore(),f=p.getStyles().candle,m=p.getDataList(),x=p.getInnerFormatter(),b=p.getDecimalFold(),C=p.getThousandsSeparator(),_=p.getLocale(),k=(r=p.getSymbol())!==null&&r!==void 0?r:{},M=k.pricePrecision,L=M===void 0?2:M,A=k.volumePrecision,P=A===void 0?0:A,W=p.getPeriod(),D=(n=p.getCrosshair().dataIndex)!==null&&n!==void 0?n:0,$=f.tooltip,z=$.legend,B=z.color,Z=z.defaultValue,J=z.template,H=(i=m[D-1])!==null&&i!==void 0?i:null,ee=m[D],le=(o=H==null?void 0:H.close)!==null&&o!==void 0?o:ee.close,ce=ee.close-le,ae=je(je({},ee),{time:x.formatDate(ee.timestamp,c2[(s=W==null?void 0:W.type)!==null&&s!==void 0?s:"day"],"tooltip"),open:b.format(C.format(Kn(ee.open,L))),high:b.format(C.format(Kn(ee.high,L))),low:b.format(C.format(Kn(ee.low,L))),close:b.format(C.format(Kn(ee.close,L))),volume:b.format(C.format(x.formatBigNumber(Kn((u=ee.volume)!==null&&u!==void 0?u:Z,P)))),turnover:b.format(C.format(Kn((d=ee.turnover)!==null&&d!==void 0?d:Z,L))),change:le===0?Z:"".concat(C.format(Kn(ce/le*100)),"%")}),re=pi(J)?J({prev:H,current:ee,next:(h=m[D+1])!==null&&h!==void 0?h:null},f):J;return re.map(function(ve){var pe=ve.title,Y=ve.value,U={text:"",color:B};na(pe)?U=je({},pe):U.text=pe,U.text=_m(U.text,_);var de={text:Z,color:B};return na(Y)?de=je({},Y):de.text=Y,we(/{change}/.exec(de.text))&&(de.color=ce===0?f.priceMark.last.noChangeColor:ce>0?f.priceMark.last.upColor:f.priceMark.last.downColor),de.text=um(de.text,ae),{title:U,value:de}})},t})(a2),Ib=(function(e){At(t,e);function t(r){var n=e.call(this,r)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(i){return function(){var o=n.getWidget().getPane();return o.getChart().getChartStore().executeAction("onCrosshairFeatureClick",i),!0}},n._featureMouseMoveEvent=function(i){return function(){return n._activeFeatureInfo=i,n.getWidget().setForceCursor("pointer"),!0}},n.registerEvent("mouseMoveEvent",function(i){return n._activeFeatureInfo=null,n.getWidget().setForceCursor(null),!1}),n}return t.prototype.drawImp=function(r){var n=this,i,o,s=this.getWidget(),u=s.getPane(),d=s.getPane().getChart().getChartStore(),h=d.getCrosshair(),p=this.getWidget(),f=p.getPane().getAxisComponent();if(ur(h.paneId)&&h.paneId===u.getId()&&f.isInCandle()){var m=d.getStyles().crosshair,x=m.horizontal.features;if(m.show&&m.horizontal.show&&x.length>0){var b=f.position==="right",C=p.getBounding(),_=0,k=m.horizontal.text;if(f.inside&&k.show){var M=f.convertFromPixel(h.y),L=f.getRange(),A=f.displayValueToText(f.realValueToDisplayValue(f.valueToRealValue(M,{range:L}),{range:L}),(o=(i=d.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&o!==void 0?o:2);A=d.getDecimalFold().format(d.getThousandsSeparator().format(A)),_=k.paddingLeft+ia(A,k.size,k.weight,k.family)+k.paddingRight}var P=_;b&&(P=C.width-_);var W=h.y;x.forEach(function(D){var $,z,B,Z,J=D.marginLeft,H=J===void 0?0:J,ee=D.marginTop,le=ee===void 0?0:ee,ce=D.marginRight,ae=ce===void 0?0:ce,re=D.paddingLeft,ve=re===void 0?0:re,pe=D.paddingTop,Y=pe===void 0?0:pe,U=D.paddingRight,de=U===void 0?0:U,X=D.paddingBottom,fe=X===void 0?0:X,ue=D.color,Fe=D.activeColor,Te=D.backgroundColor,Pe=D.activeBackgroundColor,Ce=D.borderRadius,Ee=D.size,Je=Ee===void 0?0:Ee,Qe=D.type,nt=D.content,Ue=Je;if(Qe==="icon_font"){var ct=nt;Ue=ve+ia(ct.code,Je,"normal",ct.family)+de}b?P-=Ue+ae:P+=H;var ut=ue,Qt=Te;(($=n._activeFeatureInfo)===null||$===void 0?void 0:$.feature.id)===D.id&&(ut=Fe??ue,Qt=Pe??Te);var Kt={mouseClickEvent:n._featureClickEvent({crosshair:h,feature:D}),mouseMoveEvent:n._featureMouseMoveEvent({crosshair:h,feature:D})};if(Qe==="icon_font"){var ct=nt;(z=n.createFigure({name:"text",attrs:{text:ct.code,x:P,y:W+le,baseline:"middle"},styles:{paddingLeft:ve,paddingTop:Y,paddingRight:de,paddingBottom:fe,borderRadius:Ce,size:Je,family:ct.family,color:ut,backgroundColor:Qt}},Kt))===null||z===void 0||z.draw(r)}else{(B=n.createFigure({name:"rect",attrs:{x:P,y:W+le-Je/2,width:Je,height:Je},styles:{paddingLeft:ve,paddingTop:Y,paddingRight:de,paddingBottom:fe,color:Qt}},Kt))===null||B===void 0||B.draw(r);var Mt=nt;(Z=n.createFigure({name:"path",attrs:{path:Mt.path,x:P,y:W+le+Y-Je/2,width:Je,height:Je},styles:{style:Mt.style,lineWidth:Mt.lineWidth,color:ut}}))===null||Z===void 0||Z.draw(r)}b?P-=H:P+=Ue+ae})}}},t})(Ro),Lb=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._candleBarView=new o2(i),i._candleAreaView=new wb(i),i._candleHighLowPriceView=new Cb(i),i._candleLastPriceLineView=new _b(i),i._crosshairFeatureView=new Ib(i),i.addChild(i._candleBarView),i.addChild(i._crosshairFeatureView),i}return t.prototype.updateMainContent=function(r){var n=this.getPane().getChart().getStyles().candle;n.type!=="area"?(this._candleBarView.draw(r),this._candleHighLowPriceView.draw(r),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(r),this._candleLastPriceLineView.draw(r)},t.prototype.updateOverlayContent=function(r){this._crosshairFeatureView.draw(r)},t.prototype.createTooltipView=function(){return new Eb(this)},t})(l2),u2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r,n){var i=this,o,s,u=this.getWidget(),d=u.getPane(),h=u.getBounding(),p=d.getAxisComponent(),f=this.getAxisStyles(d.getChart().getStyles());if(f.show&&(f.axisLine.show&&((o=this.createFigure({name:"line",attrs:this.createAxisLine(h,f),styles:f.axisLine}))===null||o===void 0||o.draw(r)),!n[0])){var m=p.getTicks();if(f.tickLine.show){var x=this.createTickLines(m,h,f);x.forEach(function(C){var _;(_=i.createFigure({name:"line",attrs:C,styles:f.tickLine}))===null||_===void 0||_.draw(r)})}if(f.tickText.show){var b=this.createTickTexts(m,h,f);(s=this.createFigure({name:"text",attrs:b,styles:f.tickText}))===null||s===void 0||s.draw(r)}}},t})(Ro),Pb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(r){return r.yAxis},t.prototype.createAxisLine=function(r,n){var i=this.getWidget().getPane().getAxisComponent(),o=n.axisLine.size,s=0;return i.isFromZero()?s=0:s=r.width-o,{coordinates:[{x:s,y:0},{x:s,y:r.height}]}},t.prototype.createTickLines=function(r,n,i){var o=this.getWidget().getPane().getAxisComponent(),s=i.axisLine,u=i.tickLine,d=0,h=0;return o.isFromZero()?(d=0,s.show&&(d+=s.size),h=d+u.length):(d=n.width,s.show&&(d-=s.size),h=d-u.length),r.map(function(p){return{coordinates:[{x:d,y:p.coord},{x:h,y:p.coord}]}})},t.prototype.createTickTexts=function(r,n,i){var o=this.getWidget().getPane().getAxisComponent(),s=i.axisLine,u=i.tickLine,d=i.tickText,h=0;o.isFromZero()?(h=d.marginStart,s.show&&(h+=s.size),u.show&&(h+=u.length)):(h=n.width-d.marginEnd,s.show&&(h-=s.size),u.show&&(h-=u.length));var p=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return r.map(function(f){return{x:h,y:f.coord,text:f.text,align:p,baseline:"middle"}})},t})(u2),Ab=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this,i,o,s,u,d=this.getWidget(),h=d.getPane(),p=d.getBounding(),f=h.getChart().getChartStore(),m=f.getStyles().candle.priceMark,x=m.last,b=x.text;if(m.show&&x.show&&b.show){var C=(o=(i=f.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&o!==void 0?o:2,_=h.getAxisComponent(),k=f.getDataList(),M=k[k.length-1];if(we(M)){var L=M.close,A=M.open,P=x.compareRule==="current_open"?A:(u=(s=k[k.length-2])===null||s===void 0?void 0:s.close)!==null&&u!==void 0?u:L,W=_.convertToNicePixel(L),D="";L>P?D=x.upColor:L<P?D=x.downColor:D=x.noChangeColor;var $=0,z="left";_.isFromZero()?($=0,z="left"):($=p.width,z="right");var B=[],Z=_.getRange(),J=_.displayValueToText(_.realValueToDisplayValue(_.valueToRealValue(L,{range:Z}),{range:Z}),C);J=f.getDecimalFold().format(f.getThousandsSeparator().format(J));var H=b.paddingLeft,ee=b.paddingRight,le=b.paddingTop,ce=b.paddingBottom,ae=b.size,re=b.family,ve=b.weight,pe=H+ia(J,ae,ve,re)+ee,Y=le+ae+ce;B.push({name:"text",attrs:{x:$,y:W,width:pe,height:Y,text:J,align:z,baseline:"middle"},styles:je(je({},b),{backgroundColor:D})});var U=f.getInnerFormatter().formatExtendText,de=ae/2,X=W-de-le,fe=W+de+ce;x.extendTexts.forEach(function(ue,Fe){var Te=U({type:"last_price",data:M,index:Fe});if(Te.length>0&&ue.show){var Pe=ue.size/2,Ce=0;ue.position==="above_price"?(X-=ue.paddingBottom+Pe,Ce=X,X-=Pe+ue.paddingTop):(fe+=ue.paddingTop+Pe,Ce=fe,fe+=Pe+ue.paddingBottom),pe=Math.max(pe,ue.paddingLeft+ia(Te,ue.size,ue.weight,ue.family)+ue.paddingRight),B.push({name:"text",attrs:{x:$,y:Ce,width:pe,height:ue.paddingTop+ue.size+ue.paddingBottom,text:Te,align:z,baseline:"middle"},styles:je(je({},ue),{backgroundColor:D})})}}),B.forEach(function(ue){var Fe;ue.attrs.width=pe,(Fe=n.createFigure(ue))===null||Fe===void 0||Fe.draw(r)})}}},t})(Ro),Db=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this,i,o,s=this.getWidget(),u=s.getPane(),d=s.getBounding(),h=u.getChart().getChartStore(),p=h.getStyles().indicator,f=p.lastValueMark,m=f.text;if(f.show){var x=u.getAxisComponent(),b=x.getRange(),C=h.getDataList(),_=(i=C[C.length-1])!==null&&i!==void 0?i:{},k=(o=C[C.length-2])!==null&&o!==void 0?o:{},M=h.getIndicatorsByPaneId(u.getId()),L=h.getInnerFormatter(),A=h.getDecimalFold(),P=h.getThousandsSeparator();M.forEach(function(W){var D,$,z=W.result,B=($=(D=z[_.timestamp])!==null&&D!==void 0?D:z[k.timestamp])!==null&&$!==void 0?$:{};if(we(B)&&W.visible){var Z=W.precision;Xg(W,{prev:k.timestamp,current:_.timestamp,next:null},p,function(J,H){var ee,le=B[J.key];if(ht(le)){var ce=x.convertToNicePixel(le),ae=x.displayValueToText(x.realValueToDisplayValue(x.valueToRealValue(le,{range:b}),{range:b}),Z);W.shouldFormatBigNumber&&(ae=L.formatBigNumber(ae)),ae=A.format(P.format(ae));var re=0,ve="left";x.isFromZero()?(re=0,ve="left"):(re=d.width,ve="right"),(ee=n.createFigure({name:"text",attrs:{x:re,y:ce,text:ae,align:ve,baseline:"middle"},styles:je(je({},m),{backgroundColor:H.color})}))===null||ee===void 0||ee.draw(r)}})}})}},t})(Ro),d2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},t.prototype.drawDefaultFigures=function(r,n,i){this.drawFigures(r,n,this.getDefaultFigures(n,i))},t.prototype.getDefaultFigures=function(r,n){var i,o=this.getWidget(),s=o.getPane(),u=s.getChart().getChartStore(),d=u.getClickOverlayInfo(),h=[];if(r.needDefaultYAxisFigure&&r.id===((i=d.overlay)===null||i===void 0?void 0:i.id)&&d.paneId===s.getId()){var p=s.getAxisComponent(),f=o.getBounding(),m=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,b=p.isFromZero(),C="left",_=0;b?(C="left",_=0):(C="right",_=f.width);var k=u.getDecimalFold(),M=u.getThousandsSeparator();n.forEach(function(L,A){var P,W,D=r.points[A];if(ht(D.value)){m=Math.min(m,L.y),x=Math.max(x,L.y);var $=k.format(M.format(Kn(D.value,(W=(P=u.getSymbol())===null||P===void 0?void 0:P.pricePrecision)!==null&&W!==void 0?W:2)));h.push({type:"text",attrs:{x:_,y:L.y,text:$,align:C,baseline:"middle"},ignoreEvent:!0})}}),n.length>1&&h.unshift({type:"rect",attrs:{x:0,y:m,width:f.width,height:x-m},ignoreEvent:!0})}return h},t.prototype.getFigures=function(r,n){var i,o,s=this.getWidget(),u=s.getPane(),d=u.getChart(),h=u.getAxisComponent(),p=d.getXAxisPane().getAxisComponent(),f=s.getBounding();return(o=(i=r.createYAxisFigures)===null||i===void 0?void 0:i.call(r,{chart:d,overlay:r,coordinates:n,bounding:f,xAxis:p,yAxis:h}))!==null&&o!==void 0?o:[]},t})(s2),h2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i=this.getWidget(),o=i.getPane(),s=i.getPane().getChart().getChartStore(),u=s.getCrosshair();if(ur(u.paneId)&&this.compare(u,o.getId())){var d=s.getStyles().crosshair;if(d.show){var h=this.getDirectionStyles(d),p=h.text;if(h.show&&p.show){var f=i.getBounding(),m=o.getAxisComponent(),x=this.getText(u,s,m);r.font=Xc(p.size,p.weight,p.family),(n=this.createFigure({name:"text",attrs:this.getTextAttrs(x,r.measureText(x).width,u,f,m,p),styles:p}))===null||n===void 0||n.draw(r)}}}},t.prototype.compare=function(r,n){return r.paneId===n},t.prototype.getDirectionStyles=function(r){return r.horizontal},t.prototype.getText=function(r,n,i){var o,s,u=i,d=i.convertFromPixel(r.y),h=0,p=!1;if(u.isInCandle())h=(s=(o=n.getSymbol())===null||o===void 0?void 0:o.pricePrecision)!==null&&s!==void 0?s:2;else{var f=n.getIndicatorsByPaneId(r.paneId);f.forEach(function(b){h=Math.max(b.precision,h),p||(p=b.shouldFormatBigNumber)})}var m=u.getRange(),x=u.displayValueToText(u.realValueToDisplayValue(u.valueToRealValue(d,{range:m}),{range:m}),h);return p&&(x=n.getInnerFormatter().formatBigNumber(x)),n.getDecimalFold().format(n.getThousandsSeparator().format(x))},t.prototype.getTextAttrs=function(r,n,i,o,s,u){var d=s,h=0,p="left";return d.isFromZero()?(h=0,p="left"):(h=o.width,p="right"),{x:h,y:i.y,text:r,align:p,baseline:"middle"}},t})(Ro),Fb=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._yAxisView=new Pb(i),i._candleLastPriceLabelView=new Ab(i),i._indicatorLastValueView=new Db(i),i._overlayYAxisView=new d2(i),i._crosshairHorizontalLabelView=new h2(i),i.setCursor("ns-resize"),i.addChild(i._overlayYAxisView),i}return t.prototype.getName=function(){return Bt.Y_AXIS},t.prototype.updateMain=function(r){var n=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(r,n),n||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(r),this._indicatorLastValueView.draw(r))},t.prototype.updateOverlay=function(r){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(r),this._crosshairHorizontalLabelView.draw(r))},t})(Qg);function Sm(){return{from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0}}var p2=(function(){function e(t){this.scrollZoomEnabled=!0,this._range=Sm(),this._prevRange=Sm(),this._ticks=[],this._autoCalcTickFlag=!0,this._parent=t}return e.prototype.getParent=function(){return this._parent},e.prototype.buildTicks=function(t){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||t?(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0):!1},e.prototype.getTicks=function(){return this._ticks},e.prototype.setRange=function(t){this._autoCalcTickFlag=!1,this._range=t},e.prototype.getRange=function(){return this._range},e.prototype.setAutoCalcTickFlag=function(t){this._autoCalcTickFlag=t},e.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},e})(),rp=8,yp=(function(e){At(t,e);function t(r,n){var i=e.call(this,r)||this;return i.reverse=!1,i.inside=!1,i.position="right",i.gap={top:.2,bottom:.1},i.createRange=function(o){return o.defaultRange},i.minSpan=function(o){return Uc(-o)},i.valueToRealValue=function(o){return o},i.realValueToDisplayValue=function(o){return o},i.displayValueToRealValue=function(o){return o},i.realValueToValue=function(o){return o},i.displayValueToText=function(o,s){return Kn(o,s)},i.override(n),i}return t.prototype.override=function(r){var n=r.name,i=r.gap,o=Mp(r,["name","gap"]);ur(this.name)||(this.name=n),vn(this.gap,i),vn(this,o)},t.prototype.createRangeImp=function(){var r,n,i=this.getParent(),o=i.getChart(),s=o.getChartStore(),u=i.getId(),d=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER,p=!1,f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,x=Number.MAX_SAFE_INTEGER,b=s.getIndicatorsByPaneId(u);b.forEach(function(Fe){p||(p=Fe.shouldOhlc),x=Math.min(x,Fe.precision),ht(Fe.minValue)&&(f=Math.min(f,Fe.minValue)),ht(Fe.maxValue)&&(m=Math.max(m,Fe.maxValue))});var C=4,_=this.isInCandle();if(_){var k=(n=(r=s.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2;x!==Number.MAX_SAFE_INTEGER?C=Math.min(x,k):C=k}else x!==Number.MAX_SAFE_INTEGER&&(C=x);var M=s.getVisibleRangeDataList(),L=o.getStyles().candle,A=L.type==="area",P=L.area.value,W=_&&!A||!_&&p;M.forEach(function(Fe){var Te=Fe.data.current;if(we(Te)){if(W&&(d=Math.min(d,Te.low),h=Math.max(h,Te.high)),_&&A){var Pe=Te[P];ht(Pe)&&(d=Math.min(d,Pe),h=Math.max(h,Pe))}b.forEach(function(Ce){var Ee,Je=Ce.result,Qe=Ce.figures,nt=(Ee=Je[Te.timestamp])!==null&&Ee!==void 0?Ee:{};Qe.forEach(function(Ue){var ct=nt[Ue.key];ht(ct)&&(d=Math.min(d,ct),h=Math.max(h,ct))})})}}),d!==Number.MAX_SAFE_INTEGER&&h!==Number.MIN_SAFE_INTEGER?(d=Math.min(f,d),h=Math.max(m,h)):(d=0,h=10);var D=h-d,$={from:d,to:h,range:D,realFrom:d,realTo:h,realRange:D,displayFrom:d,displayTo:h,displayRange:D},z=this.createRange({chart:o,paneId:u,defaultRange:$}),B=z.realFrom,Z=z.realTo,J=z.realRange,H=this.minSpan(C);if(B===Z||J<H){var ee=f===B,le=m===Z,ce=rp/2;B=ee?B:le?B-rp*H:B-ce*H,Z=le?Z:ee?Z+rp*H:Z+ce*H}var ae=this.getBounding().height,re=this.gap,ve=re.top,pe=re.bottom,Y=ve;Y>=1&&(Y=Y/ae);var U=pe;U>=1&&(U=U/ae),J=Z-B,B=B-J*U,Z=Z+J*Y;var de=this.realValueToValue(B,{range:z}),X=this.realValueToValue(Z,{range:z}),fe=this.realValueToDisplayValue(B,{range:z}),ue=this.realValueToDisplayValue(Z,{range:z});return{from:de,to:X,range:X-de,realFrom:B,realTo:Z,realRange:Z-B,displayFrom:fe,displayTo:ue,displayRange:ue-fe}},t.prototype.isInCandle=function(){return this.getParent().getId()===zt.CANDLE},t.prototype.isFromZero=function(){return this.position==="left"&&this.inside||this.position==="right"&&!this.inside},t.prototype.createTicksImp=function(){var r=this,n,i,o,s,u=this.getRange(),d=u.displayFrom,h=u.displayTo,p=u.displayRange,f=[];if(p>=0){var m=H6(p/rp),x=Y6(m),b=fm(Math.ceil(d/m)*m,x),C=fm(Math.floor(h/m)*m,x),_=0,k=b;if(m!==0)for(;k<=C;){var M=k.toFixed(x);f[_]={text:M,coord:0,value:M},++_,k+=m}}var L=this.getParent(),A=(i=(n=L.getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&i!==void 0?i:0,P=L.getChart().getChartStore(),W=[],D=P.getIndicatorsByPaneId(L.getId()),$=P.getStyles(),z=0,B=!1;this.isInCandle()?z=(s=(o=P.getSymbol())===null||o===void 0?void 0:o.pricePrecision)!==null&&s!==void 0?s:2:D.forEach(function(ce){z=Math.max(z,ce.precision),B||(B=ce.shouldFormatBigNumber)});var Z=P.getInnerFormatter(),J=P.getThousandsSeparator(),H=P.getDecimalFold(),ee=$.xAxis.tickText.size,le=NaN;return f.forEach(function(ce){var ae=ce.value,re=r.displayValueToText(+ae,z),ve=r.convertToPixel(r.realValueToValue(r.displayValueToRealValue(+ae,{range:u}),{range:u}));B&&(re=Z.formatBigNumber(ae)),re=H.format(J.format(re));var pe=ht(le);ve>ee&&ve<A-ee&&(pe&&Math.abs(le-ve)>ee*2||!pe)&&(W.push({text:re,coord:ve,value:ae}),le=ve)}),pi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:W}):W},t.prototype.getAutoSize=function(){var r,n,i=this.getParent(),o=i.getChart(),s=o.getChartStore(),u=s.getStyles(),d=u.yAxis,h=d.size;if(h!=="auto")return h;var p=0;if(d.show&&(d.axisLine.show&&(p+=d.axisLine.size),d.tickLine.show&&(p+=d.tickLine.length),d.tickText.show)){var f=0;this.getTicks().forEach(function(ve){f=Math.max(f,ia(ve.text,d.tickText.size,d.tickText.weight,d.tickText.family))}),p+=d.tickText.marginStart+d.tickText.marginEnd+f}var m=u.candle.priceMark,x=m.show&&m.last.show&&m.last.text.show,b=0,C=u.crosshair,_=C.show&&C.horizontal.show&&C.horizontal.text.show,k=0;if(x||_){var M=(n=(r=s.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2,L=this.getRange().displayTo;if(x){var A=s.getDataList(),P=A[A.length-1];if(we(P)){var W=m.last.text,D=W.paddingLeft,$=W.paddingRight,z=W.size,B=W.family,Z=W.weight;b=D+ia(Kn(P.close,M),z,Z,B)+$;var J=s.getInnerFormatter().formatExtendText;m.last.extendTexts.forEach(function(ve,pe){var Y=J({type:"last_price",data:P,index:pe});Y.length>0&&ve.show&&(b=Math.max(b,ve.paddingLeft+ia(Y,ve.size,ve.weight,ve.family)+ve.paddingRight))})}}if(_){var H=s.getIndicatorsByPaneId(i.getId()),ee=0,le=!1;H.forEach(function(ve){ee=Math.max(ve.precision,ee),le||(le=ve.shouldFormatBigNumber)});var ce=2;if(this.isInCandle()){var ae=u.indicator.lastValueMark;ae.show&&ae.text.show?ce=Math.max(ee,M):ce=M}else ce=ee;var re=Kn(L,ce);le&&(re=s.getInnerFormatter().formatBigNumber(re)),re=s.getDecimalFold().format(re),k+=C.horizontal.text.paddingLeft+C.horizontal.text.paddingRight+C.horizontal.text.borderSize*2+ia(re,C.horizontal.text.size,C.horizontal.text.weight,C.horizontal.text.family)}}return Math.max(p,b,k)},t.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},t.prototype.convertFromPixel=function(r){var n=this.getBounding().height,i=this.getRange(),o=i.realFrom,s=i.realRange,u=this.reverse?r/n:1-r/n,d=u*s+o;return this.realValueToValue(d,{range:i})},t.prototype.convertToPixel=function(r){var n,i,o=this.getRange(),s=this.valueToRealValue(r,{range:o}),u=(i=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&i!==void 0?i:0,d=o.realFrom,h=o.realRange,p=(s-d)/h;return this.reverse?Math.round(p*u):Math.round((1-p)*u)},t.prototype.convertToNicePixel=function(r){var n,i,o=(i=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&i!==void 0?i:0,s=this.convertToPixel(r);return Math.round(Math.max(o*.05,Math.min(s,o*.98)))},t.extend=function(r){var n=(function(i){At(o,i);function o(s){return i.call(this,s,r)||this}return o})(t);return n},t})(p2),Rb={name:"normal"},Ob={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(e){return"".concat(Kn(e,2),"%")},valueToRealValue:function(e,t){var r=t.range;return(e-r.from)/r.range*r.realRange+r.realFrom},realValueToValue:function(e,t){var r=t.range;return(e-r.realFrom)/r.realRange*r.range+r.from},createRange:function(e){var t=e.chart,r=e.defaultRange,n=t.getDataList(),i=t.getVisibleRange(),o=n[i.from];if(we(o)){var s=r.from,u=r.to,d=r.range,h=(r.from-o.close)/o.close*100,p=(r.to-o.close)/o.close*100,f=p-h;return{from:s,to:u,range:d,realFrom:h,realTo:p,realRange:f,displayFrom:h,displayTo:p,displayRange:f}}return r}},Nb={name:"logarithm",minSpan:function(e){return .05*Uc(-e)},valueToRealValue:function(e){return e<0?-Es(Math.abs(e)):Es(e)},realValueToDisplayValue:function(e){return e<0?-Uc(Math.abs(e)):Uc(e)},displayValueToRealValue:function(e){return e<0?-Es(Math.abs(e)):Es(e)},realValueToValue:function(e){return e<0?-Uc(Math.abs(e)):Uc(e)},createRange:function(e){var t=e.defaultRange,r=t.from,n=t.to,i=t.range,o=r<0?-Es(Math.abs(r)):Es(r),s=n<0?-Es(Math.abs(n)):Es(n);return{from:r,to:n,range:i,realFrom:o,realTo:s,realRange:s-o,displayFrom:r,displayTo:n,displayRange:i}}},km={normal:yp.extend(Rb),percentage:yp.extend(Ob),logarithm:yp.extend(Nb)};function zb(e){var t;return(t=km[e])!==null&&t!==void 0?t:km.normal}var f2=(function(){function e(t,r){this._bounding=Tp(),this._originalBounding=Tp(),this._visible=!0,this._chart=t,this._id=r,this._container=Ns("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"})}return e.prototype.getContainer=function(){return this._container},e.prototype.setVisible=function(t){this._visible!==t&&(this._container.style.display=t?"block":"none",this._visible=t)},e.prototype.getVisible=function(){return this._visible},e.prototype.getId=function(){return this._id},e.prototype.getChart=function(){return this._chart},e.prototype.getBounding=function(){return this._bounding},e.prototype.setOriginalBounding=function(t){vn(this._originalBounding,t)},e.prototype.getOriginalBounding=function(){return this._originalBounding},e.prototype.update=function(t){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(t??3,this._container,this._bounding)},e})(),g2=(function(e){At(t,e);function t(r,n,i){var o=e.call(this,r,n)||this;o._yAxisWidget=null,o._options={id:"",minHeight:mp,dragEnabled:!0,order:0,height:qy,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var s=o.getContainer();return o._mainWidget=o.createMainWidget(s),o._yAxisWidget=o.createYAxisWidget(s),o.setOptions(i),o}return t.prototype.setOptions=function(r){var n,i,o,s,u,d=this.getId();if(d===zt.CANDLE||d===zt.X_AXIS){var h=(n=r.axis)===null||n===void 0?void 0:n.name;(!we(this._axis)||we(h)&&this._options.axis.name!==h)&&(this._axis=this.createAxisComponent(h??"normal"))}else we(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof yp&&this._axis.setAutoCalcTickFlag(!0),vn(this._options,r),this._axis.override(je(je({},this._options.axis),{name:(o=(i=r.axis)===null||i===void 0?void 0:i.name)!==null&&o!==void 0?o:"normal"}));var p=null,f="default";return this.getId()===zt.X_AXIS?(p=this.getMainWidget().getContainer(),f="ew-resize"):(p=this.getYAxisWidget().getContainer(),f="ns-resize"),!((u=(s=r.axis)===null||s===void 0?void 0:s.scrollZoomEnabled)!==null&&u!==void 0)||u?p.style.cursor=f:p.style.cursor="default",this},t.prototype.getOptions=function(){return this._options},t.prototype.getAxisComponent=function(){return this._axis},t.prototype.setBounding=function(r,n,i,o){var s,u,d,h;vn(this.getBounding(),r);var p={};we(r.height)&&(p.height=r.height),we(r.top)&&(p.top=r.top),this._mainWidget.setBounding(p);var f=we(n);if(f&&this._mainWidget.setBounding(n),we(this._yAxisWidget)){this._yAxisWidget.setBounding(p);var m=this._axis;m.position==="left"?we(i)&&this._yAxisWidget.setBounding(je(je({},i),{left:0})):we(o)&&(this._yAxisWidget.setBounding(o),f&&this._yAxisWidget.setBounding({left:((s=n.left)!==null&&s!==void 0?s:0)+((u=n.width)!==null&&u!==void 0?u:0)+((d=n.right)!==null&&d!==void 0?d:0)-((h=o.width)!==null&&h!==void 0?h:0)}))}return this},t.prototype.getMainWidget=function(){return this._mainWidget},t.prototype.getYAxisWidget=function(){return this._yAxisWidget},t.prototype.updateImp=function(r){var n;this._mainWidget.update(r),(n=this._yAxisWidget)===null||n===void 0||n.update(r)},t.prototype.destroy=function(){var r;this._mainWidget.destroy(),(r=this._yAxisWidget)===null||r===void 0||r.destroy()},t.prototype.getImage=function(r){var n=this.getBounding(),i=n.width,o=n.height,s=Ns("canvas",{width:"".concat(i,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),u=s.getContext("2d"),d=Al(s);s.width=i*d,s.height=o*d,u.scale(d,d);var h=this._mainWidget.getBounding();if(u.drawImage(this._mainWidget.getImage(r),h.left,0,h.width,h.height),this._yAxisWidget!==null){var p=this._yAxisWidget.getBounding();u.drawImage(this._yAxisWidget.getImage(r),p.left,0,p.width,p.height)}return s},t.prototype.createYAxisWidget=function(r){return null},t})(f2),v2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(r){var n=zb(r??"default");return new n(this)},t.prototype.createMainWidget=function(r){return new l2(r,this)},t.prototype.createYAxisWidget=function(r){return new Fb(r,this)},t})(g2),$b=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createMainWidget=function(r){return new Lb(r,this)},t})(v2),Bb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(r){return r.xAxis},t.prototype.createAxisLine=function(r){return{coordinates:[{x:0,y:0},{x:r.width,y:0}]}},t.prototype.createTickLines=function(r,n,i){var o=i.tickLine,s=i.axisLine.size;return r.map(function(u){return{coordinates:[{x:u.coord,y:0},{x:u.coord,y:s+o.length}]}})},t.prototype.createTickTexts=function(r,n,i){var o=i.tickText,s=i.axisLine.size,u=i.tickLine.length;return r.map(function(d){return{x:d.coord,y:s+u+o.marginStart,text:d.text,align:"center",baseline:"top"}})},t})(u2),Vb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.coordinateToPointValueFlag=function(){return!1},t.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},t.prototype.getProgressOverlay=function(){var r,n;return(n=(r=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||r===void 0?void 0:r.overlay)!==null&&n!==void 0?n:null},t.prototype.getDefaultFigures=function(r,n){var i,o=[],s=this.getWidget(),u=s.getPane(),d=u.getChart().getChartStore(),h=d.getClickOverlayInfo();if(r.needDefaultXAxisFigure&&r.id===((i=h.overlay)===null||i===void 0?void 0:i.id)){var p=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;n.forEach(function(m,x){p=Math.min(p,m.x),f=Math.max(f,m.x);var b=r.points[x];if(ht(b.timestamp)){var C=d.getInnerFormatter().formatDate(b.timestamp,"YYYY-MM-DD HH:mm","crosshair");o.push({type:"text",attrs:{x:m.x,y:0,text:C,align:"center"},ignoreEvent:!0})}}),n.length>1&&o.unshift({type:"rect",attrs:{x:p,y:0,width:f-p,height:s.getBounding().height},ignoreEvent:!0})}return o},t.prototype.getFigures=function(r,n){var i,o,s=this.getWidget(),u=s.getPane(),d=u.getChart(),h=u.getAxisComponent(),p=d.getXAxisPane().getAxisComponent(),f=s.getBounding();return(o=(i=r.createXAxisFigures)===null||i===void 0?void 0:i.call(r,{chart:d,overlay:r,coordinates:n,bounding:f,xAxis:p,yAxis:h}))!==null&&o!==void 0?o:[]},t})(d2),Wb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(r){return we(r.timestamp)},t.prototype.getDirectionStyles=function(r){return r.vertical},t.prototype.getText=function(r,n){var i,o,s=r.timestamp;return n.getInnerFormatter().formatDate(s,c2[(o=(i=n.getPeriod())===null||i===void 0?void 0:i.type)!==null&&o!==void 0?o:"day"],"crosshair")},t.prototype.getTextAttrs=function(r,n,i,o,s,u){var d=i.realX,h=0,p="center";return d-n/2-u.paddingLeft<0?(h=0,p="left"):d+n/2+u.paddingRight>o.width?(h=o.width,p="right"):h=d,{x:h,y:0,text:r,align:p,baseline:"top"}},t})(h2),Ub=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._xAxisView=new Bb(i),i._overlayXAxisView=new Vb(i),i._crosshairVerticalLabelView=new Wb(i),i.setCursor("ew-resize"),i.addChild(i._overlayXAxisView),i}return t.prototype.getName=function(){return Bt.X_AXIS},t.prototype.updateMain=function(r){this._xAxisView.draw(r)},t.prototype.updateOverlay=function(r){this._overlayXAxisView.draw(r),this._crosshairVerticalLabelView.draw(r)},t})(Qg),Hb=(function(e){At(t,e);function t(r,n){var i=e.call(this,r)||this;return i.override(n),i}return t.prototype.override=function(r){var n=r.name,i=r.scrollZoomEnabled,o=r.createTicks;ur(this.name)||(this.name=n),this.scrollZoomEnabled=i??this.scrollZoomEnabled,this.createTicks=o??this.createTicks},t.prototype.createRangeImp=function(){var r=this.getParent().getChart().getChartStore(),n=r.getVisibleRange(),i=n.realFrom,o=n.realTo,s=i,u=o,d=o-i+1,h={from:s,to:u,range:d,realFrom:s,realTo:u,realRange:d,displayFrom:s,displayTo:u,displayRange:d};return h},t.prototype.createTicksImp=function(){var r,n=this.getRange(),i=n.realFrom,o=n.realTo,s=n.from,u=this.getParent().getChart().getChartStore(),d=u.getInnerFormatter().formatDate,h=u.getPeriod(),p=[],f=u.getBarSpace().bar,m=u.getStyles().xAxis.tickText,x=Math.max(ia("YYYY-MM-DD HH:mm:ss",m.size,m.weight,m.family),this.getBounding().width/8),b=Math.ceil(x/f);b%2!==0&&(b+=1);for(var C=Math.max(0,Math.floor(i/b)*b),_=C;_<o;_+=b)if(_>=s){var k=u.dataIndexToTimestamp(_);ht(k)&&p.push({coord:this.convertToPixel(_),value:k,text:d(k,Sb[(r=h==null?void 0:h.type)!==null&&r!==void 0?r:"day"],"xAxis")})}return pi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:p}):p},t.prototype.getAutoSize=function(){var r=this.getParent().getChart().getStyles(),n=r.xAxis,i=n.size;if(i!=="auto")return i;var o=r.crosshair,s=0;n.show&&(n.axisLine.show&&(s+=n.axisLine.size),n.tickLine.show&&(s+=n.tickLine.length),n.tickText.show&&(s+=n.tickText.marginStart+n.tickText.marginEnd+n.tickText.size));var u=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(u+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+o.vertical.text.borderSize*2+o.vertical.text.size),Math.max(s,u)},t.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},t.prototype.convertTimestampFromPixel=function(r){var n=this.getParent().getChart().getChartStore(),i=n.coordinateToDataIndex(r);return n.dataIndexToTimestamp(i)},t.prototype.convertTimestampToPixel=function(r){var n=this.getParent().getChart().getChartStore(),i=n.timestampToDataIndex(r);return n.dataIndexToCoordinate(i)},t.prototype.convertFromPixel=function(r){return this.getParent().getChart().getChartStore().coordinateToDataIndex(r)},t.prototype.convertToPixel=function(r){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(r)},t.extend=function(r){var n=(function(i){At(o,i);function o(s){return i.call(this,s,r)||this}return o})(t);return n},t})(p2),Yb={name:"normal"},Mm={normal:Hb.extend(Yb)};function Xb(e){var t;return(t=Mm[e])!==null&&t!==void 0?t:Mm.normal}var jb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(r){var n=Xb(r);return new n(this)},t.prototype.createMainWidget=function(r){return new Ub(r,this)},t})(g2);function Zb(e,t){var r=0;return function(){var n=Date.now();n-r>t&&(e.apply(this,arguments),r=n)}}var Gb=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._dragFlag=!1,i._dragStartY=0,i._topPaneHeight=0,i._bottomPaneHeight=0,i._topPane=null,i._bottomPane=null,i._pressedMouseMoveEvent=Zb(i._pressedTouchMouseMoveEvent,20),i.registerEvent("touchStartEvent",i._mouseDownEvent.bind(i)).registerEvent("touchMoveEvent",i._pressedMouseMoveEvent.bind(i)).registerEvent("touchEndEvent",i._mouseUpEvent.bind(i)).registerEvent("mouseDownEvent",i._mouseDownEvent.bind(i)).registerEvent("mouseUpEvent",i._mouseUpEvent.bind(i)).registerEvent("pressedMouseMoveEvent",i._pressedMouseMoveEvent.bind(i)).registerEvent("mouseEnterEvent",i._mouseEnterEvent.bind(i)).registerEvent("mouseLeaveEvent",i._mouseLeaveEvent.bind(i)),i}return t.prototype.getName=function(){return Bt.SEPARATOR},t.prototype._mouseDownEvent=function(r){var n=this;this._dragFlag=!0,this._dragStartY=r.pageY;var i=this.getPane(),o=i.getChart();this._topPane=i.getTopPane(),this._bottomPane=i.getBottomPane();var s=o.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var u=s.findIndex(function(f){var m;return f.getId()===((m=n._topPane)===null||m===void 0?void 0:m.getId())}),d=u-1;d>-1;d--){var h=s[d];if(h.getOptions().state!=="minimize"){this._topPane=h;break}}if(this._bottomPane.getOptions().state==="minimize")for(var u=s.findIndex(function(x){var b;return x.getId()===((b=n._bottomPane)===null||b===void 0?void 0:b.getId())}),d=u+1;d<s.length;d++){var p=s[d];if(p.getOptions().state!=="minimize"){this._bottomPane=p;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},t.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},t.prototype._pressedTouchMouseMoveEvent=function(r){var n=r.pageY-this._dragStartY,i=n<0;if(we(this._topPane)&&we(this._bottomPane)){var o=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&o.state!=="minimize"&&o.dragEnabled){var s=null,u=null,d=0,h=0;i?(s=this._topPane,u=this._bottomPane,d=this._topPaneHeight,h=this._bottomPaneHeight):(s=this._bottomPane,u=this._topPane,d=this._bottomPaneHeight,h=this._topPaneHeight);var p=s.getOptions().minHeight;if(d>p){var f=Math.max(d-Math.abs(n),p),m=d-f;s.setBounding({height:f}),u.setBounding({height:h+m});var x=this.getPane(),b=x.getChart();b.getChartStore().executeAction("onPaneDrag",{paneId:x.getId()}),b.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},t.prototype._mouseEnterEvent=function(){var r=this.getPane(),n=r.getBottomPane();if(n.getOptions().dragEnabled){var i=r.getChart(),o=i.getStyles().separator;return this.getContainer().style.background=o.activeBackgroundColor,!0}return!1},t.prototype._mouseLeaveEvent=function(){return this._dragFlag?!1:(this.getContainer().style.background="transparent",!0)},t.prototype.createContainer=function(){return Ns("div",{width:"100%",height:"".concat(L0,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},t.prototype.updateImp=function(r,n,i){if(i===4||i===2){var o=this.getPane().getChart().getStyles().separator;r.style.top="".concat(-Math.floor((L0-o.size)/2),"px"),r.style.height="".concat(L0,"px")}},t})(Qy),qb=(function(e){At(t,e);function t(r,n,i,o){var s=e.call(this,r,n)||this;return s.getContainer().style.overflow="",s._topPane=i,s._bottomPane=o,s._separatorWidget=new Gb(s.getContainer(),s),s}return t.prototype.setBounding=function(r){return vn(this.getBounding(),r),this},t.prototype.getTopPane=function(){return this._topPane},t.prototype.setTopPane=function(r){return this._topPane=r,this},t.prototype.getBottomPane=function(){return this._bottomPane},t.prototype.setBottomPane=function(r){return this._bottomPane=r,this},t.prototype.getWidget=function(){return this._separatorWidget},t.prototype.getImage=function(r){var n=this.getBounding(),i=n.width,o=n.height,s=this.getChart().getStyles().separator,u=Ns("canvas",{width:"".concat(i,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),d=u.getContext("2d"),h=Al(u);return u.width=i*h,u.height=o*h,d.scale(h,h),d.fillStyle=s.color,d.fillRect(0,0,i,o),u},t.prototype.updateImp=function(r,n,i){if(r===4||r===2){var o=this.getChart().getStyles().separator;n.style.backgroundColor=o.color,n.style.height="".concat(i.height,"px"),n.style.marginLeft="".concat(i.left,"px"),n.style.width="".concat(i.width,"px"),this._separatorWidget.update(r)}},t})(f2);function Tm(){return typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("firefox")}function tg(){return typeof window>"u"?!1:/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var np={ResetClick:500,LongTap:500,PreventFiresTouchEvents:500},xd={CancelClick:5,CancelTap:5,DoubleClick:5,DoubleTap:30},y0={Left:0,Middle:1,Right:2},Qb=10,Kb=(function(){function e(t,r,n){var i=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!tg(),this._onFirefoxOutsideMouseUp=function(o){i._mouseUpHandler(o)},this._onMobileSafariDoubleClick=function(o){if(i._firesTouchEvents(o)){if(++i._tapCount,i._tapTimeoutId!==null&&i._tapCount>1){var s=i._mouseTouchMoveWithDownInfo(i._getCoordinate(o),i._tapCoordinate).manhattanDistance;s<xd.DoubleTap&&!i._cancelTap&&i._processEvent(i._makeCompatEvent(o),i._handler.doubleTapEvent),i._resetTapTimeout()}}else if(++i._clickCount,i._clickTimeoutId!==null&&i._clickCount>1){var s=i._mouseTouchMoveWithDownInfo(i._getCoordinate(o),i._clickCoordinate).manhattanDistance;s<xd.DoubleClick&&!i._cancelClick&&i._processEvent(i._makeCompatEvent(o),i._handler.mouseDoubleClickEvent),i._resetClickTimeout()}},this._target=t,this._handler=r,this._options=n,this._init()}return e.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},e.prototype._mouseEnterHandler=function(t){var r=this,n,i,o;(n=this._unsubscribeMousemove)===null||n===void 0||n.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(o=this._unsubscribeContextMenu)===null||o===void 0||o.call(this);var s=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){r._target.removeEventListener("mousemove",s)},this._target.addEventListener("mousemove",s);var u=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){r._target.removeEventListener("wheel",u)},this._target.addEventListener("wheel",u,{passive:!1});var d=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){r._target.removeEventListener("contextmenu",d)},this._target.addEventListener("contextmenu",d,{passive:!1}),!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},e.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._mouseMoveHandler=function(t){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},e.prototype._mouseWheelHandler=function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){if(!we(this._handler.mouseWheelHortEvent)||(this._preventDefault(t),Math.abs(t.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(t),-t.deltaX)}else{if(!we(this._handler.mouseWheelVertEvent))return;var r=-(t.deltaY/100);if(r===0)return;switch(this._preventDefault(t),t.deltaMode){case t.DOM_DELTA_PAGE:{r*=120;break}case t.DOM_DELTA_LINE:{r*=32;break}}if(r!==0){var n=Math.sign(r)*Math.min(1,Math.abs(r));this._handler.mouseWheelVertEvent(this._makeCompatEvent(t),n)}}},e.prototype._contextMenuHandler=function(t){this._preventDefault(t)},e.prototype._touchMoveHandler=function(t){var r=this._touchWithId(t.changedTouches,this._activeTouchId);if(r!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(r),this._touchMoveStartCoordinate),i=n.xOffset,o=n.yOffset,s=n.manhattanDistance;if(!(!this._touchMoveExceededManhattanDistance&&s<xd.CancelTap)){if(!this._touchMoveExceededManhattanDistance){var u=i*.5,d=o>=u&&!this._options.treatVertDragAsPageScroll(),h=u>o&&!this._options.treatHorzDragAsPageScroll();!d&&!h&&(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(t,r),this._handler.touchMoveEvent)}}},e.prototype._mouseMoveWithDownHandler=function(t){if(t.button===y0.Left){var r=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._mouseMoveStartCoordinate),n=r.manhattanDistance;n>=xd.CancelClick&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(t),this._handler.pressedMouseMoveEvent)}},e.prototype._mouseTouchMoveWithDownInfo=function(t,r){var n=Math.abs(r.x-t.x),i=Math.abs(r.y-t.y),o=n+i;return{xOffset:n,yOffset:i,manhattanDistance:o}},e.prototype._touchEndHandler=function(t){var r=this._touchWithId(t.changedTouches,this._activeTouchId);if(r===null&&t.touches.length===0&&(r=t.changedTouches[0]),r!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._makeCompatEvent(t,r);if(this._processEvent(n,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1){var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(r),this._tapCoordinate).manhattanDistance;i<xd.DoubleTap&&!this._cancelTap&&this._processEvent(n,this._handler.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processEvent(n,this._handler.tapEvent),we(this._handler.tapEvent)&&this._preventDefault(t));this._tapCount===0&&this._preventDefault(t),t.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(t))}},e.prototype._mouseUpHandler=function(t){if(t.button===y0.Left){var r=this._makeCompatEvent(t);if(this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),Tm()){var n=this._target.ownerDocument.documentElement;n.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(t))if(this._processEvent(r,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1){var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._clickCoordinate).manhattanDistance;i<xd.DoubleClick&&!this._cancelClick&&this._processEvent(r,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processEvent(r,this._handler.mouseClickEvent)}},e.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},e.prototype._touchStartHandler=function(t){if(this._activeTouchId===null){var r=t.changedTouches[0];this._activeTouchId=r.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(t);var n=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(r),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{var i=this._touchMoveHandler.bind(this),o=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){n.removeEventListener("touchmove",i),n.removeEventListener("touchend",o)},n.addEventListener("touchmove",i,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),np.LongTap)}this._processEvent(this._makeCompatEvent(t,r),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),np.ResetClick),this._tapCoordinate=this._getCoordinate(r))}},e.prototype._mouseDownHandler=function(t){if(t.button===y0.Right){this._preventDefault(t),this._processEvent(this._makeCompatEvent(t),this._handler.mouseRightClickEvent);return}if(t.button===y0.Left){var r=this._target.ownerDocument.documentElement;Tm()&&r.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{var n=this._mouseMoveWithDownHandler.bind(this),i=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){r.removeEventListener("mousemove",n),r.removeEventListener("mouseup",i)},r.addEventListener("mousemove",n),r.addEventListener("mouseup",i)}this._mousePressed=!0,!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),np.ResetClick),this._clickCoordinate=this._getCoordinate(t)))}},e.prototype._init=function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));{var r=this._target.ownerDocument,n=function(i){t._handler.mouseDownOutsideEvent!=null&&(i.composed&&t._target.contains(i.composedPath()[0])||i.target!==null&&t._target.contains(i.target)||t._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){r.removeEventListener("touchstart",n)},this._unsubscribeOutsideMouseEvents=function(){r.removeEventListener("mousedown",n)},r.addEventListener("mousedown",n),r.addEventListener("touchstart",n,{passive:!0})}tg()&&(this._unsubscribeMobileSafariEvents=function(){t._target.removeEventListener("dblclick",t._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(i){if(i.button===y0.Middle)return i.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},e.prototype._initPinch=function(){var t=this;!we(this._handler.pinchStartEvent)&&!we(this._handler.pinchEvent)&&!we(this._handler.pinchEndEvent)||(this._target.addEventListener("touchstart",function(r){t._checkPinchState(r.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(r){if(!(r.touches.length!==2||t._startPinchMiddleCoordinate===null)&&we(t._handler.pinchEvent)){var n=t._getTouchDistance(r.touches[0],r.touches[1]),i=n/t._startPinchDistance;t._handler.pinchEvent(je(je({},t._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),t._preventDefault(r)}},{passive:!1}),this._target.addEventListener("touchend",function(r){t._checkPinchState(r.touches)}))},e.prototype._checkPinchState=function(t){t.length===1&&(this._pinchPrevented=!1),t.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)},e.prototype._startPinch=function(t){var r=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(t[0].clientX-r.left+(t[1].clientX-r.left))/2,y:(t[0].clientY-r.top+(t[1].clientY-r.top))/2},this._startPinchDistance=this._getTouchDistance(t[0],t[1]),we(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},e.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,we(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},e.prototype._mouseLeaveHandler=function(t){var r,n,i;(r=this._unsubscribeMousemove)===null||r===void 0||r.call(this),(n=this._unsubscribeMouseWheel)===null||n===void 0||n.call(this),(i=this._unsubscribeContextMenu)===null||i===void 0||i.call(this),!this._firesTouchEvents(t)&&this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!tg())},e.prototype._longTapHandler=function(t){var r=this._touchWithId(t.touches,this._activeTouchId);r!==null&&(this._processEvent(this._makeCompatEvent(t,r),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},e.prototype._firesTouchEvents=function(t){var r;return we((r=t.sourceCapabilities)===null||r===void 0?void 0:r.firesTouchEvents)?t.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(t)<this._lastTouchEventTimeStamp+np.PreventFiresTouchEvents},e.prototype._processEvent=function(t,r){r==null||r.call(this._handler,t)},e.prototype._makeCompatEvent=function(t,r){var n=this,i=r??t,o=this._target.getBoundingClientRect();return{x:i.clientX-o.left,y:i.clientY-o.top,pageX:i.pageX,pageY:i.pageY,isTouch:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click"&&t.type!=="wheel",preventDefault:function(){t.type!=="touchstart"&&n._preventDefault(t)}}},e.prototype._getTouchDistance=function(t,r){var n=t.clientX-r.clientX,i=t.clientY-r.clientY;return Math.sqrt(n*n+i*i)},e.prototype._preventDefault=function(t){t.cancelable&&t.preventDefault()},e.prototype._getCoordinate=function(t){return{x:t.pageX,y:t.pageY}},e.prototype._eventTimeStamp=function(t){var r;return(r=t.timeStamp)!==null&&r!==void 0?r:performance.now()},e.prototype._touchWithId=function(t,r){for(var n=0;n<t.length;++n)if(t[n].identifier===r)return t[n];return null},e})(),Jb=(function(){function e(t,r){var n=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(i){if(i.shiftKey)switch(i.code){case"Equal":{n._chart.getChartStore().zoom(.5);break}case"Minus":{n._chart.getChartStore().zoom(-.5);break}case"ArrowLeft":{var o=n._chart.getChartStore();o.startScroll(),o.scroll(-3*o.getBarSpace().bar);break}case"ArrowRight":{var o=n._chart.getChartStore();o.startScroll(),o.scroll(3*o.getBarSpace().bar);break}}},this._container=t,this._chart=r,this._event=new Kb(t,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),t.addEventListener("keydown",this._boundKeyBoardDownEvent)}return e.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},e.prototype.pinchEvent=function(t,r){var n=this._findWidgetByEvent(t),i=n.pane,o=n.widget;if((i==null?void 0:i.getId())!==zt.X_AXIS&&(o==null?void 0:o.getName())===Bt.MAIN){var s=this._makeWidgetEvent(t,o),u=(r-this._pinchScale)*5;return this._pinchScale=r,this._chart.getChartStore().zoom(u,{x:s.x,y:s.y}),!0}return!1},e.prototype.mouseWheelHortEvent=function(t,r){var n=this._chart.getChartStore();return n.startScroll(),n.scroll(r),!0},e.prototype.mouseWheelVertEvent=function(t,r){var n=this._findWidgetByEvent(t).widget,i=this._makeWidgetEvent(t,n),o=n==null?void 0:n.getName();return o===Bt.MAIN?(this._chart.getChartStore().zoom(r,{x:i.x,y:i.y}),!0):!1},e.prototype.mouseDownEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget;if(this._mouseDownWidget=i,i!==null){var o=this._makeWidgetEvent(t,i),s=i.getName();switch(s){case Bt.SEPARATOR:return i.dispatchEvent("mouseDownEvent",o);case Bt.MAIN:{var u=n.getAxisComponent();if(!u.getAutoCalcTickFlag()){var d=u.getRange();this._prevYAxisRange=je({},d)}return this._startScrollCoordinate={x:o.x,y:o.y},this._chart.getChartStore().startScroll(),i.dispatchEvent("mouseDownEvent",o)}case Bt.X_AXIS:return this._processXAxisScrollStartEvent(i,o);case Bt.Y_AXIS:return this._processYAxisScaleStartEvent(i,o)}}return!1},e.prototype.mouseMoveEvent=function(t){var r,n,i,o=this._findWidgetByEvent(t),s=o.pane,u=o.widget,d=this._makeWidgetEvent(t,u);if((((r=this._mouseMoveTriggerWidgetInfo.pane)===null||r===void 0?void 0:r.getId())!==(s==null?void 0:s.getId())||((n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0?void 0:n.getName())!==(u==null?void 0:u.getName()))&&(u==null||u.dispatchEvent("mouseEnterEvent",d),(i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0||i.dispatchEvent("mouseLeaveEvent",d),this._mouseMoveTriggerWidgetInfo={pane:s,widget:u}),u!==null){var h=u.getName();switch(h){case Bt.MAIN:{var p=u.dispatchEvent("mouseMoveEvent",d),f={x:d.x,y:d.y,paneId:s==null?void 0:s.getId()};return p?(u.getForceCursor()!=="pointer"&&(f=void 0),u.setCursor("pointer")):u.setCursor("crosshair"),this._chart.getChartStore().setCrosshair(f),p}case Bt.SEPARATOR:case Bt.X_AXIS:case Bt.Y_AXIS:{var p=u.dispatchEvent("mouseMoveEvent",d);return this._chart.getChartStore().setCrosshair(),p}}}return!1},e.prototype.pressedMouseMoveEvent=function(t){var r,n;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===Bt.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",t);var i=this._findWidgetByEvent(t),o=i.pane,s=i.widget;if(s!==null&&((r=this._mouseDownWidget)===null||r===void 0?void 0:r.getPane().getId())===(o==null?void 0:o.getId())&&((n=this._mouseDownWidget)===null||n===void 0?void 0:n.getName())===s.getName()){var u=this._makeWidgetEvent(t,s),d=s.getName();switch(d){case Bt.MAIN:{var h=void 0,p=s.dispatchEvent("pressedMouseMoveEvent",u);return p||this._processMainScrollingEvent(s,u),(!p||s.getForceCursor()==="pointer")&&(h={x:u.x,y:u.y,paneId:o==null?void 0:o.getId()}),this._chart.getChartStore().setCrosshair(h,{forceInvalidate:!0}),p}case Bt.X_AXIS:return this._processXAxisScrollingEvent(s,u);case Bt.Y_AXIS:return this._processYAxisScalingEvent(s,u)}}return!1},e.prototype.mouseUpEvent=function(t){var r=this._findWidgetByEvent(t).widget,n=!1;if(r!==null){var i=this._makeWidgetEvent(t,r),o=r.getName();switch(o){case Bt.MAIN:case Bt.SEPARATOR:case Bt.X_AXIS:case Bt.Y_AXIS:{n=r.dispatchEvent("mouseUpEvent",i);break}}n&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,n},e.prototype.mouseClickEvent=function(t){var r=this._findWidgetByEvent(t).widget;if(r!==null){var n=this._makeWidgetEvent(t,r);return r.dispatchEvent("mouseClickEvent",n)}return!1},e.prototype.mouseRightClickEvent=function(t){var r=this._findWidgetByEvent(t).widget,n=!1;if(r!==null){var i=this._makeWidgetEvent(t,r),o=r.getName();switch(o){case Bt.MAIN:case Bt.X_AXIS:case Bt.Y_AXIS:{n=r.dispatchEvent("mouseRightClickEvent",i);break}}n&&this._chart.updatePane(1)}return!1},e.prototype.mouseDoubleClickEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget;if(i!==null){var o=i.getName();switch(o){case Bt.MAIN:{var s=this._makeWidgetEvent(t,i);return i.dispatchEvent("mouseDoubleClickEvent",s)}case Bt.Y_AXIS:{var u=n.getAxisComponent();if(!u.getAutoCalcTickFlag())return u.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0;break}}}return!1},e.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},e.prototype.touchStartEvent=function(t){var r,n=this._findWidgetByEvent(t),i=n.pane,o=n.widget;if(o!==null){var s=this._makeWidgetEvent(t,o);(r=s.preventDefault)===null||r===void 0||r.call(s);var u=o.getName();switch(u){case Bt.MAIN:{var d=this._chart.getChartStore();if(o.dispatchEvent("mouseDownEvent",s))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,d.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;this._flingScrollRequestId!==null&&(dm(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime();var h=i.getAxisComponent();if(!h.getAutoCalcTickFlag()){var p=h.getRange();this._prevYAxisRange=je({},p)}if(this._startScrollCoordinate={x:s.x,y:s.y},d.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var f=s.x-this._touchCoordinate.x,m=s.y-this._touchCoordinate.y,x=Math.sqrt(f*f+m*m);x<Qb?(this._touchCoordinate={x:s.x,y:s.y},d.setCrosshair({x:s.x,y:s.y,paneId:i==null?void 0:i.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,d.setCrosshair())}return!0}case Bt.X_AXIS:return this._processXAxisScrollStartEvent(o,s);case Bt.Y_AXIS:return this._processYAxisScaleStartEvent(o,s)}}return!1},e.prototype.touchMoveEvent=function(t){var r,n=this._findWidgetByEvent(t),i=n.pane,o=n.widget;if(o!==null){var s=this._makeWidgetEvent(t,o);(r=s.preventDefault)===null||r===void 0||r.call(s);var u=o.getName(),d=this._chart.getChartStore();switch(u){case Bt.MAIN:return o.dispatchEvent("pressedMouseMoveEvent",s)?(d.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0):(this._touchCoordinate!==null?d.setCrosshair({x:s.x,y:s.y,paneId:i==null?void 0:i.getId()}):this._processMainScrollingEvent(o,s),!0);case Bt.X_AXIS:return this._processXAxisScrollingEvent(o,s);case Bt.Y_AXIS:return this._processYAxisScalingEvent(o,s)}}return!1},e.prototype.touchEndEvent=function(t){var r=this,n=this._findWidgetByEvent(t).widget;if(n!==null){var i=this._makeWidgetEvent(t,n),o=n.getName();switch(o){case Bt.MAIN:{if(n.dispatchEvent("mouseUpEvent",i),this._startScrollCoordinate!==null){var s=new Date().getTime()-this._flingStartTime,u=i.x-this._startScrollCoordinate.x,d=u/(s>0?s:1)*20;if(s<200&&Math.abs(d)>0){var h=this._chart.getChartStore(),p=function(){r._flingScrollRequestId=Ep(function(){h.startScroll(),h.scroll(d),d=d*(1-.025),Math.abs(d)<1?r._flingScrollRequestId!==null&&(dm(r._flingScrollRequestId),r._flingScrollRequestId=null):p()})};p()}}return!0}case Bt.X_AXIS:case Bt.Y_AXIS:{var f=n.dispatchEvent("mouseUpEvent",i);f&&this._chart.updatePane(1)}}this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0}return!1},e.prototype.tapEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget,o=!1;if(i!==null){var s=this._makeWidgetEvent(t,i),u=i.dispatchEvent("mouseClickEvent",s);if(i.getName()===Bt.MAIN){var d=this._makeWidgetEvent(t,i),h=this._chart.getChartStore();u?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,h.setCrosshair(void 0,{notInvalidate:!0}),o=!0):(!this._touchCancelCrosshair&&!this._touchZoomed&&(this._touchCoordinate={x:d.x,y:d.y},h.setCrosshair({x:d.x,y:d.y,paneId:n==null?void 0:n.getId()},{notInvalidate:!0}),o=!0),this._touchCancelCrosshair=!1)}(o||u)&&this._chart.updatePane(1)}return o},e.prototype.doubleTapEvent=function(t){return this.mouseDoubleClickEvent(t)},e.prototype.longTapEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget;if(i!==null&&i.getName()===Bt.MAIN){var o=this._makeWidgetEvent(t,i);return this._touchCoordinate={x:o.x,y:o.y},this._chart.getChartStore().setCrosshair({x:o.x,y:o.y,paneId:n==null?void 0:n.getId()}),!0}return!1},e.prototype._processMainScrollingEvent=function(t,r){if(this._startScrollCoordinate!==null){var n=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&!n.getAutoCalcTickFlag()&&n.scrollZoomEnabled){var i=this._prevYAxisRange,o=i.from,s=i.to,u=i.range,d=0;n.reverse?d=this._startScrollCoordinate.y-r.y:d=r.y-this._startScrollCoordinate.y;var h=t.getBounding(),p=d/h.height,f=u*p,m=o+f,x=s+f,b=n.valueToRealValue(m,{range:this._prevYAxisRange}),C=n.valueToRealValue(x,{range:this._prevYAxisRange}),_=n.realValueToDisplayValue(b,{range:this._prevYAxisRange}),k=n.realValueToDisplayValue(C,{range:this._prevYAxisRange});n.setRange({from:m,to:x,range:x-m,realFrom:b,realTo:C,realRange:C-b,displayFrom:_,displayTo:k,displayRange:k-_})}var M=r.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(M)}},e.prototype._processXAxisScrollStartEvent=function(t,r){var n=t.dispatchEvent("mouseDownEvent",r);return n&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:r.x,y:r.y},this._xAxisStartScaleDistance=r.pageX,n},e.prototype._processXAxisScrollingEvent=function(t,r){var n,i=t.dispatchEvent("pressedMouseMoveEvent",r);if(i)this._chart.updatePane(1);else{var o=t.getPane().getAxisComponent();if(o.scrollZoomEnabled&&this._xAxisStartScaleDistance!==0){var s=this._xAxisStartScaleDistance/r.pageX;if(Number.isFinite(s)){var u=(s-this._xAxisScale)*10;this._xAxisScale=s,this._chart.getChartStore().zoom(u,(n=this._xAxisStartScaleCoordinate)!==null&&n!==void 0?n:void 0)}}}return i},e.prototype._processYAxisScaleStartEvent=function(t,r){var n=t.dispatchEvent("mouseDownEvent",r);n&&this._chart.updatePane(1);var i=t.getPane().getAxisComponent().getRange();return this._prevYAxisRange=je({},i),this._yAxisStartScaleDistance=r.pageY,n},e.prototype._processYAxisScalingEvent=function(t,r){var n=t.dispatchEvent("pressedMouseMoveEvent",r);if(n)this._chart.updatePane(1);else{var i=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&i.scrollZoomEnabled&&this._yAxisStartScaleDistance!==0){var o=this._prevYAxisRange,s=o.from,u=o.to,d=o.range,h=r.pageY/this._yAxisStartScaleDistance,p=d*h,f=(p-d)/2,m=s-f,x=u+f,b=i.valueToRealValue(m,{range:this._prevYAxisRange}),C=i.valueToRealValue(x,{range:this._prevYAxisRange}),_=i.realValueToDisplayValue(b,{range:this._prevYAxisRange}),k=i.realValueToDisplayValue(C,{range:this._prevYAxisRange});i.setRange({from:m,to:x,range:p,realFrom:b,realTo:C,realRange:C-b,displayFrom:_,displayTo:k,displayRange:k-_}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}}return n},e.prototype._findWidgetByEvent=function(t){var r,n,i,o,s=t.x,u=t.y,d=this._chart.getSeparatorPanes(),h=this._chart.getStyles().separator.size;try{for(var p=sa(d),f=p.next();!f.done;f=p.next()){var m=f.value,x=m[1],b=x.getBounding(),C=b.top-Math.round((L0-h)/2);if(s>=b.left&&s<=b.left+b.width&&u>=C&&u<=C+L0)return{pane:x,widget:x.getWidget()}}}catch(B){r={error:B}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}var _=this._chart.getDrawPanes(),k=null;try{for(var M=sa(_),L=M.next();!L.done;L=M.next()){var A=L.value,b=A.getBounding();if(s>=b.left&&s<=b.left+b.width&&u>=b.top&&u<=b.top+b.height){k=A;break}}}catch(B){i={error:B}}finally{try{L&&!L.done&&(o=M.return)&&o.call(M)}finally{if(i)throw i.error}}var P=null;if(k!==null){if(!we(P)){var W=k.getMainWidget(),D=W.getBounding();s>=D.left&&s<=D.left+D.width&&u>=D.top&&u<=D.top+D.height&&(P=W)}if(!we(P)){var $=k.getYAxisWidget();if($!==null){var z=$.getBounding();s>=z.left&&s<=z.left+z.width&&u>=z.top&&u<=z.top+z.height&&(P=$)}}}return{pane:k,widget:P}},e.prototype._makeWidgetEvent=function(t,r){var n,i,o,s=(n=r==null?void 0:r.getBounding())!==null&&n!==void 0?n:null;return je(je({},t),{x:t.x-((i=s==null?void 0:s.left)!==null&&i!==void 0?i:0),y:t.y-((o=s==null?void 0:s.top)!==null&&o!==void 0?o:0)})},e.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},e})(),e4=(function(){function e(t,r){this._chartBounding=Tp(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={sort:!0,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._cacheYAxisWidth={left:0,right:0},this._initContainer(t),this._chartEvent=new Jb(this._chartContainer,this),this._chartStore=new J8(this,r),this._initPanes(r),this._layout()}return e.prototype._initContainer=function(t){this._container=t,this._chartContainer=Ns("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer),this._cacheChartBounding()},e.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},e.prototype._initPanes=function(t){var r=this,n,i=(n=t==null?void 0:t.layout)!==null&&n!==void 0?n:[{type:"candle"}],o=function(u){var d,h;if(!we(r._candlePane)){var p=(d=u.options)!==null&&d!==void 0?d:{};vn(p,{id:zt.CANDLE}),r._candlePane=r._createPane($b,zt.CANDLE,p);var f=(h=u.content)!==null&&h!==void 0?h:[];f.forEach(function(m){r.createIndicator(m,!0,p)})}},s=function(u){if(!we(r._xAxisPane)){var d=r._createPane(jb,zt.X_AXIS,u??{});r._xAxisPane=d}};i.forEach(function(u){var d,h,p;switch(u.type){case"candle":{o(u);break}case"indicator":{var f=(d=u.content)!==null&&d!==void 0?d:[];if(f.length>0){var m=(p=(h=u.options)===null||h===void 0?void 0:h.id)!==null&&p!==void 0?p:null;we(m)&&(m=vp(zt.INDICATOR));var x=je(je({},u.options),{id:m});f.forEach(function(b){r.createIndicator(b,!0,x)})}break}case"xAxis":{s(u.options);break}}}),o({}),s({order:Number.MAX_SAFE_INTEGER})},e.prototype._createPane=function(t,r,n){var i=new t(this,r,n??{});return this._drawPanes.push(i),i},e.prototype._recalculatePaneHeight=function(t,r,n){if(n===0)return!1;var i=this._drawPanes.filter(function(f){var m=f.getId();return f.getOptions().state==="normal"&&m!==t.getId()&&m!==zt.X_AXIS}),o=i.length;if(o===0)return!1;if(t.getId()!==zt.CANDLE&&we(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var s=this._candlePane.getBounding().height;if(s>0){var u=this._candlePane.getOptions().minHeight,d=s+n;d<u&&(d=u,r-=s+n-d),this._candlePane.setBounding({height:d})}}else{var h=n,p=Math.floor(n/o);i.forEach(function(f,m){var x=f.getBounding().height,b=0;m===o-1?b=x+h:b=x+p,b<f.getOptions().minHeight&&(b=f.getOptions().minHeight),f.setBounding({height:b}),h-=b-x}),Math.abs(h)>0&&(r-=h)}return t.setBounding({height:r}),!0},e.prototype.getDrawPaneById=function(t){if(t===zt.CANDLE)return this._candlePane;if(t===zt.X_AXIS)return this._xAxisPane;var r=this._drawPanes.find(function(n){return n.getId()===t});return r??null},e.prototype.getContainer=function(){return this._container},e.prototype.getChartStore=function(){return this._chartStore},e.prototype.getXAxisPane=function(){return this._xAxisPane},e.prototype.getDrawPanes=function(){return this._drawPanes},e.prototype.getSeparatorPanes=function(){return this._separatorPanes},e.prototype.layout=function(t){var r=this,n,i,o,s,u,d,h;(n=t.sort)!==null&&n!==void 0&&n&&(this._layoutOptions.sort=t.sort),(i=t.measureHeight)!==null&&i!==void 0&&i&&(this._layoutOptions.measureHeight=t.measureHeight),(o=t.measureWidth)!==null&&o!==void 0&&o&&(this._layoutOptions.measureWidth=t.measureWidth),(s=t.update)!==null&&s!==void 0&&s&&(this._layoutOptions.update=t.update),(u=t.buildYAxisTick)!==null&&u!==void 0&&u&&(this._layoutOptions.buildYAxisTick=t.buildYAxisTick),(d=t.cacheYAxisWidth)!==null&&d!==void 0&&d&&(this._layoutOptions.cacheYAxisWidth=t.cacheYAxisWidth),(h=t.buildYAxisTick)!==null&&h!==void 0&&h&&(this._layoutOptions.forceBuildYAxisTick=t.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(p){r._layout(),r._layoutPending=!1}).catch(function(p){}))},e.prototype._layout=function(){var t=this,r=this._layoutOptions,n=r.sort,i=r.measureHeight,o=r.measureWidth,s=r.update,u=r.buildYAxisTick,d=r.cacheYAxisWidth,h=r.forceBuildYAxisTick;if(n){for(;we(this._chartContainer.firstChild);)this._chartContainer.removeChild(this._chartContainer.firstChild);this._separatorPanes.clear(),this._drawPanes.sort(function(ce,ae){return ce.getOptions().order-ae.getOptions().order});var p=null;this._drawPanes.forEach(function(ce){if(ce.getId()!==zt.X_AXIS){if(we(p)){var ae=new qb(t,"",p,ce);t._chartContainer.appendChild(ae.getContainer()),t._separatorPanes.set(ce,ae)}p=ce}t._chartContainer.appendChild(ce.getContainer())})}if(i){var f=this._chartBounding.height,m=this.getStyles().separator.size,x=this._xAxisPane.getAxisComponent().getAutoSize(),b=f-x;b<0&&(b=0),this._drawPanes.forEach(function(ce){var ae=ce.getId();if(we(t._separatorPanes.get(ce))&&(b-=m),ae!==zt.X_AXIS&&ae!==zt.CANDLE&&ce.getVisible()){var re=ce.getBounding().height;re>b?(re=b,b=0):b-=re,ce.setBounding({height:re})}}),this._candlePane.setBounding({height:Math.max(b,0)}),this._xAxisPane.setBounding({height:x});var C=0;this._drawPanes.forEach(function(ce){var ae=t._separatorPanes.get(ce);we(ae)&&(ae.setBounding({height:m,top:C}),C+=m),ce.setBounding({top:C}),C+=ce.getBounding().height})}var _=o;if((u||h)&&this._drawPanes.forEach(function(ce){var ae=ce.getAxisComponent().buildTicks(h);_||(_=ae)}),_){var k=this._chartBounding.width,M=this.getStyles(),L=0,A=!0,P=0,W=!0;this._drawPanes.forEach(function(ce){if(ce.getId()!==zt.X_AXIS){var ae=ce.getAxisComponent(),re=ae.inside,ve=ae.getAutoSize();ae.position==="left"?(L=Math.max(L,ve),re&&(A=!1)):(P=Math.max(P,ve),re&&(W=!1))}}),d&&(L=Math.max(this._cacheYAxisWidth.left,L),P=Math.max(this._cacheYAxisWidth.right,P)),this._cacheYAxisWidth.left=L,this._cacheYAxisWidth.right=P;var D=k,$=0,z=0;A&&(D-=L,$=L),W&&(D-=P,z=P),this._chartStore.setTotalBarSpace(D);var B={width:k},Z={width:D,left:$,right:z},J={width:L},H={width:P},ee=M.separator.fill,le={};ee?le=B:le=Z,this._drawPanes.forEach(function(ce){var ae;(ae=t._separatorPanes.get(ce))===null||ae===void 0||ae.setBounding(le),ce.setBounding(B,Z,J,H)})}s&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={sort:!1,measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1}},e.prototype.updatePane=function(t,r){var n=this;if(we(r)){var i=this.getDrawPaneById(r);i==null||i.update(t)}else this._drawPanes.forEach(function(o){var s;o.update(t),(s=n._separatorPanes.get(o))===null||s===void 0||s.update(t)})},e.prototype.getDom=function(t,r){var n,i;if(we(t)){var o=this.getDrawPaneById(t);if(we(o)){var s=r??"root";switch(s){case"root":return o.getContainer();case"main":return o.getMainWidget().getContainer();case"yAxis":return(i=(n=o.getYAxisWidget())===null||n===void 0?void 0:n.getContainer())!==null&&i!==void 0?i:null}}}else return this._chartContainer;return null},e.prototype.getSize=function(t,r){var n,i;if(we(t)){var o=this.getDrawPaneById(t);if(we(o)){var s=r??"root";switch(s){case"root":return o.getBounding();case"main":return o.getMainWidget().getBounding();case"yAxis":return(i=(n=o.getYAxisWidget())===null||n===void 0?void 0:n.getBounding())!==null&&i!==void 0?i:null}}}else return this._chartBounding;return null},e.prototype.setSymbol=function(t){this._chartStore.setSymbol(t)},e.prototype.getSymbol=function(){return this._chartStore.getSymbol()},e.prototype.setPeriod=function(t){this._chartStore.setPeriod(t)},e.prototype.getPeriod=function(){return this._chartStore.getPeriod()},e.prototype.setStyles=function(t){var r=this;this._setOptions(function(){r._chartStore.setStyles(t)})},e.prototype.getStyles=function(){return this._chartStore.getStyles()},e.prototype.setFormatter=function(t){var r=this;this._setOptions(function(){r._chartStore.setFormatter(t)})},e.prototype.getFormatter=function(){return this._chartStore.getFormatter()},e.prototype.setLocale=function(t){var r=this;this._setOptions(function(){r._chartStore.setLocale(t)})},e.prototype.getLocale=function(){return this._chartStore.getLocale()},e.prototype.setTimezone=function(t){var r=this;this._setOptions(function(){r._chartStore.setTimezone(t)})},e.prototype.getTimezone=function(){return this._chartStore.getTimezone()},e.prototype.setThousandsSeparator=function(t){var r=this;this._setOptions(function(){r._chartStore.setThousandsSeparator(t)})},e.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},e.prototype.setDecimalFold=function(t){var r=this;this._setOptions(function(){r._chartStore.setDecimalFold(t)})},e.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},e.prototype._setOptions=function(t){t(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},e.prototype.setOffsetRightDistance=function(t){this._chartStore.setOffsetRightDistance(t,!0)},e.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},e.prototype.setMaxOffsetLeftDistance=function(t){t<0||this._chartStore.setMaxOffsetLeftDistance(t)},e.prototype.setMaxOffsetRightDistance=function(t){t<0||this._chartStore.setMaxOffsetRightDistance(t)},e.prototype.setLeftMinVisibleBarCount=function(t){t<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(t))},e.prototype.setRightMinVisibleBarCount=function(t){t<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(t))},e.prototype.setBarSpace=function(t){this._chartStore.setBarSpace(t)},e.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},e.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},e.prototype.resetData=function(){this._chartStore.resetData()},e.prototype.getDataList=function(){return this._chartStore.getDataList()},e.prototype.setDataLoader=function(t){this._chartStore.setDataLoader(t)},e.prototype.createIndicator=function(t,r,n){var i,o=ur(t)?{name:t}:t;if(Yy(o.name)===null)return null;var s=n??{};ur(s.id)||(s.id=vp(zt.INDICATOR)),ur(o.id)||(o.id=vp(o.name));var u=this._chartStore.addIndicator(o,s.id,r??!1);if(u){var d=!1;return we(this.getDrawPaneById(s.id))||(this._createPane(v2,s.id,s),(i=s.height)!==null&&i!==void 0||(s.height=qy),d=!0),this.setPaneOptions(s),this.layout({sort:d,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),o.id}return null},e.prototype.overrideIndicator=function(t){return this._chartStore.overrideIndicator(t)},e.prototype.getIndicators=function(t){return this._chartStore.getIndicatorsByFilter(t??{})},e.prototype.removeIndicator=function(t){var r=this,n=this._chartStore.removeIndicator(t??{});if(n){var i=!1,o=[];this._drawPanes.forEach(function(s){var u=s.getId();u!==zt.CANDLE&&u!==zt.X_AXIS&&o.push(u)}),o.forEach(function(s){if(!r._chartStore.hasIndicators(s)){var u=r._drawPanes.findIndex(function(h){return h.getId()===s}),d=r._drawPanes[u];we(d)&&(i=!0,r._recalculatePaneHeight(d,0,d.getBounding().height),r._drawPanes.splice(u,1),d.destroy())}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({sort:i,measureHeight:i,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return n},e.prototype.createOverlay=function(t){var r=this,n=[],i=[],o=function(u){!we(u.paneId)||r.getDrawPaneById(u.paneId)===null?(u.paneId=zt.CANDLE,i.push(!1)):i.push(!0),n.push(u)};ur(t)?o({name:t}):Va(t)?t.forEach(function(u){var d=null;ur(u)?d={name:u}:d=u,o(d)}):o(t);var s=this._chartStore.addOverlays(n,i);return Va(t)?s:s[0]},e.prototype.getOverlays=function(t){return this._chartStore.getOverlaysByFilter(t??{})},e.prototype.overrideOverlay=function(t){return this._chartStore.overrideOverlay(t)},e.prototype.removeOverlay=function(t){return this._chartStore.removeOverlay(t??{})},e.prototype.setPaneOptions=function(t){var r,n,i=this,o,s=!1,u=!1,d=we(t.id),h=function(C){var _=C.getId();if(d&&t.id===_||!d){if(_!==zt.X_AXIS){if(ht(t.height)&&t.height>0){var k=Math.max((o=t.minHeight)!==null&&o!==void 0?o:C.getOptions().minHeight,0),M=Math.max(k,t.height);u=!0,s=!0,C.setOriginalBounding({height:M}),p._recalculatePaneHeight(C,M,-M)}if(we(t.state)&&C.getOptions().state!==t.state){s=!0,u=!0;var L=t.state;switch(L){case"maximize":{var A=p._drawPanes.find(function(z){var B=z.getId();return z.getOptions().state==="maximize"&&B!==zt.X_AXIS});if(!we(A)){C.getOptions().state==="normal"&&C.setOriginalBounding({height:C.getBounding().height}),C.setOptions({state:L});var P=p._chartBounding.height;C.setBounding({height:P-p._xAxisPane.getBounding().height}),p._drawPanes.forEach(function(z){var B;z.getId()!==zt.X_AXIS&&z.getId()!==_&&(z.setBounding({height:z.getOriginalBounding().height}),z.setVisible(!1),(B=i._separatorPanes.get(z))===null||B===void 0||B.setVisible(!1))})}break}case"minimize":{var M=C.getBounding().height,W=C.getOptions().state,D=M-mp;W==="maximize"&&(D=C.getOriginalBounding().height-mp),p._recalculatePaneHeight(C,mp,D)&&(W==="normal"&&C.setOriginalBounding({height:M}),C.setOptions({state:L})),p._drawPanes.forEach(function(B){var Z;B.getId()!==zt.X_AXIS&&(B.setVisible(!0),(Z=i._separatorPanes.get(B))===null||Z===void 0||Z.setVisible(!0))});break}default:{var M=C.getOriginalBounding().height;p._recalculatePaneHeight(C,M,C.getBounding().height-M)&&C.setOptions({state:L}),p._drawPanes.forEach(function(B){var Z;B.getId()!==zt.X_AXIS&&(B.setVisible(!0),(Z=i._separatorPanes.get(B))===null||Z===void 0||Z.setVisible(!0))});break}}}}we(t.axis)&&(u=!0);var $=je({},t);if(delete $.state,C.setOptions($),_===t.id)return"break"}},p=this;try{for(var f=sa(this._drawPanes),m=f.next();!m.done;m=f.next()){var x=m.value,b=h(x);if(b==="break")break}}catch(C){r={error:C}}finally{try{m&&!m.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}u&&this.layout({measureHeight:s,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},e.prototype.getPaneOptions=function(t){var r;if(we(t)){var n=this.getDrawPaneById(t);return(r=n==null?void 0:n.getOptions())!==null&&r!==void 0?r:null}return this._drawPanes.map(function(i){return i.getOptions()})},e.prototype.setZoomEnabled=function(t){this._chartStore.setZoomEnabled(t)},e.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},e.prototype.setScrollEnabled=function(t){this._chartStore.setScrollEnabled(t)},e.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},e.prototype.scrollByDistance=function(t,r){var n=this,i=ht(r)&&r>0?r:0;if(this._chartStore.startScroll(),i>0){var o=new Tg({duration:i});o.doFrame(function(s){var u=t*(s/i);n._chartStore.scroll(u)}),o.start()}else this._chartStore.scroll(t)},e.prototype.scrollToRealTime=function(t){var r=this._chartStore.getBarSpace().bar,n=this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/r,i=n*r;this.scrollByDistance(i,t)},e.prototype.scrollToDataIndex=function(t,r){var n=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-t))*this._chartStore.getBarSpace().bar;this.scrollByDistance(n,r)},e.prototype.scrollToTimestamp=function(t,r){var n=Eg(this.getDataList(),"timestamp",t);this.scrollToDataIndex(n,r)},e.prototype.zoomAtCoordinate=function(t,r,n){var i=this,o=ht(n)&&n>0?n:0,s=this._chartStore.getBarSpace().bar,u=s*t,d=u-s;if(o>0){var h=0,p=new Tg({duration:o});p.doFrame(function(f){var m=d*(f/o),x=(m-h)/i._chartStore.getBarSpace().bar*Ig;i._chartStore.zoom(x,r),h=m}),p.start()}else this._chartStore.zoom(d/s*Ig,r)},e.prototype.zoomAtDataIndex=function(t,r,n){var i=this._chartStore.dataIndexToCoordinate(r);this.zoomAtCoordinate(t,{x:i,y:0},n)},e.prototype.zoomAtTimestamp=function(t,r,n){var i=Eg(this.getDataList(),"timestamp",r);this.zoomAtDataIndex(t,i,n)},e.prototype.convertToPixel=function(t,r){var n=this,i,o=r??{},s=o.paneId,u=s===void 0?zt.CANDLE:s,d=o.absolute,h=d===void 0?!1:d,p=[];if(u!==zt.X_AXIS){var f=this.getDrawPaneById(u);if(f!==null){var m=f.getBounding(),x=[].concat(t),b=this._xAxisPane.getAxisComponent(),C=f.getAxisComponent();p=x.map(function(_){var k={},M=_.dataIndex;if(ht(_.timestamp)&&(M=n._chartStore.timestampToDataIndex(_.timestamp)),ht(M)&&(k.x=b.convertToPixel(M)),ht(_.value)){var L=C.convertToPixel(_.value);k.y=h?m.top+L:L}return k})}}return Va(t)?p:(i=p[0])!==null&&i!==void 0?i:{}},e.prototype.convertFromPixel=function(t,r){var n=this,i,o=r??{},s=o.paneId,u=s===void 0?zt.CANDLE:s,d=o.absolute,h=d===void 0?!1:d,p=[];if(u!==zt.X_AXIS){var f=this.getDrawPaneById(u);if(f!==null){var m=f.getBounding(),x=[].concat(t),b=this._xAxisPane.getAxisComponent(),C=f.getAxisComponent();p=x.map(function(_){var k,M={};if(ht(_.x)){var L=b.convertFromPixel(_.x);M.dataIndex=L,M.timestamp=(k=n._chartStore.dataIndexToTimestamp(L))!==null&&k!==void 0?k:void 0}if(ht(_.y)){var A=h?_.y-m.top:_.y;M.value=C.convertFromPixel(A)}return M})}}return Va(t)?p:(i=p[0])!==null&&i!==void 0?i:{}},e.prototype.executeAction=function(t,r){var n;switch(t){case"onCrosshairChange":{var i=je({},r);(n=i.paneId)!==null&&n!==void 0||(i.paneId=zt.CANDLE),this._chartStore.setCrosshair(i,{notExecuteAction:!0});break}}},e.prototype.subscribeAction=function(t,r){this._chartStore.subscribeAction(t,r)},e.prototype.unsubscribeAction=function(t,r){this._chartStore.unsubscribeAction(t,r)},e.prototype.getConvertPictureUrl=function(t,r,n){var i=this,o=this._chartBounding,s=o.width,u=o.height,d=Ns("canvas",{width:"".concat(s,"px"),height:"".concat(u,"px"),boxSizing:"border-box"}),h=d.getContext("2d"),p=Al(d);d.width=s*p,d.height=u*p,h.scale(p,p),h.fillStyle=n??"#FFFFFF",h.fillRect(0,0,s,u);var f=t??!1;return this._drawPanes.forEach(function(m){var x=i._separatorPanes.get(m);if(we(x)){var b=x.getBounding();h.drawImage(x.getImage(f),b.left,b.top,b.width,b.height)}var C=m.getBounding();h.drawImage(m.getImage(f),0,C.top,s,C.height)}),d.toDataURL("image/".concat(r??"jpeg"))},e.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},e.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(t){t.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._chartStore.destroy(),this._container.removeChild(this._chartContainer)},e})(),Em=new Map,t4=1;function r4(e,t){var r=null;if(ur(e)?r=document.getElementById(e):r=e,r===null)return null;var n=Em.get(r.id);if(we(n))return n;var i="k_line_chart_".concat(t4++);return n=new e4(r,t),n.id=i,r.setAttribute("k-line-chart-id",i),Em.set(i,n),n}var gn={clone:$d,merge:vn,isString:ur,isNumber:ht,isValid:we,isObject:na,isArray:Va,isFunction:pi,isBoolean:A0,formatValue:Mn,formatPrecision:Kn,formatBigNumber:$y,formatDate:zy,formatThousands:By,formatFoldDecimal:Vy,calcTextWidth:ia,getLinearSlopeIntercept:Up,getLinearYFromSlopeIntercept:Gg,getLinearYFromCoordinates:D0,checkCoordinateOnArc:n2,checkCoordinateOnCircle:Ky,checkCoordinateOnLine:jy,checkCoordinateOnPolygon:Jy,checkCoordinateOnRect:Kg,checkCoordinateOnText:r2};const n4="",i4="",o4="",a4="",s4="",l4="",c4="",u4="",d4="",h4="",p4="",f4="",g4="",v4="MA()",m4="EMA()",y4="SMA",b4="BOLL()",x4="BBI()",w4="SAR()",C4="VOL()",_4="MACD()",S4="KDJ()",k4="RSI()",M4="BIAS()",T4="BRAR()",E4="CCI()",I4="DMI()",L4="CR()",P4="PSY()",A4="DMA()",D4="TRIX()",F4="OBV()",R4="VR()",O4="WR()",N4="MTM()",z4="EMV()",$4="ROC()",B4="PVT()",V4="AO()",W4="",U4="(UTC-10) ",H4="(UTC-8) ",Y4="(UTC-7) ",X4="(UTC-5) ",j4="(UTC-4) ",Z4="(UTC-3) ",G4="(UTC+1) ",q4="(UTC+2) ",Q4="(UTC+3) ",K4="(UTC+4) ",J4="(UTC+5) ",e7="(UTC+6) ",t7="(UTC+7) ",r7="(UTC+8) ",n7="(UTC+9) ",i7="(UTC+10) ",o7="(UTC+12) ",a7="",s7="",l7="",c7="",u7="",d7="",h7="",p7="",f7="",g7="",v7="",m7="",y7="",b7="",x7="",w7="",C7="",_7="",S7="",k7="",M7="",T7="",E7="",I7="",L7="",P7="",A7="",D7="",F7="",R7="",O7="",N7="",z7="ABCD",$7="XABCD",B7="",V7="",W7="",U7="",H7="1",Y7="2",X7="3",j7="4",Z7="5",G7="",q7="",Q7="",K7="",J7="",ex="",tx="",rx="OHLC",nx="",ix="",ox="",ax="",sx="",lx="",cx="",ux="",dx="",hx="",px="",fx="",gx="",vx="",mx="",yx="",bx="",xx="",wx="",Cx="",_x="",Sx="",kx="",Mx="...",Tx="",Ex="12",Ix="24",Lx="",Px={indicator:n4,main_indicator:i4,sub_indicator:o4,favourites:a4,setting:s4,replay:l4,timezone:c4,screenshot:u4,full_screen:d4,exit_full_screen:h4,save:p4,confirm:f4,cancel:g4,ma:v4,ema:m4,sma:y4,boll:b4,bbi:x4,sar:w4,vol:C4,macd:_4,kdj:S4,rsi:k4,bias:M4,brar:T4,cci:E4,dmi:I4,cr:L4,psy:P4,dma:A4,trix:D4,obv:F4,vr:R4,wr:O4,mtm:N4,emv:z4,roc:$4,pvt:B4,ao:V4,utc:W4,honolulu:U4,juneau:H4,los_angeles:Y4,chicago:X4,toronto:j4,sao_paulo:Z4,london:G4,berlin:q4,bahrain:Q4,dubai:K4,ashkhabad:J4,almaty:e7,bangkok:t7,shanghai:r7,tokyo:n7,sydney:i7,norfolk:o7,D:a7,"5D":"5",W:s7,M:l7,"3M":"3","6M":"6",Y:c7,"5Y":"5","Light Theme 1":"1","Light Theme 2":"2","Midnight Theme":"","Dark Theme":"","Dark Gray Theme":"","Blue Theme":"","Red Theme":"","Green Theme":"","Yellow Theme":"","Pink Theme":"",horizontal_straight_line:u7,horizontal_ray_line:d7,horizontal_segment:h7,vertical_straight_line:p7,vertical_ray_line:f7,vertical_segment:g7,straight_line:v7,ray_line:m7,segment:y7,arrow:b7,price_line:x7,price_channel_line:w7,parallel_straight_line:C7,fibonacci_line:_7,fibonacci_segment:S7,fibonacci_circle:k7,fibonacci_spiral:M7,fibonacci_speed_resistance_fan:T7,fibonacci_extension:E7,gann_box:I7,rect:L7,parallelogram:P7,circle:A7,triangle:D7,three_waves:F7,five_waves:R7,eight_waves:O7,any_waves:N7,abcd:z7,xabcd:$7,weak_magnet:B7,strong_magnet:V7,symbol_search:W7,symbol_code:U7,params_1:H7,params_2:Y7,params_3:X7,params_4:j7,params_5:Z7,period:G7,standard_deviation:q7,candle_type:Q7,candle_solid:K7,candle_stroke:J7,candle_up_stroke:ex,candle_down_stroke:tx,ohlc:rx,area:nx,heikin_ashi:ix,last_price_show:ox,high_price_show:ax,low_price_show:sx,indicator_last_value_show:lx,price_axis_type:cx,normal:ux,percentage:dx,log:hx,reverse_coordinate:px,grid_show:fx,restore_default:gx,volumeBars:vx,trades:mx,trade_time:yx,trade_price:bx,trade_quantity:xx,trade_amount:wx,trade_side:Cx,buy:_x,sell:Sx,no_trades_available:kx,loading_trades:Mx,trades_error:Tx,time_format_12h:Ex,time_format_24h:Ix,latest_trades:Lx},Ax="Indicator",Dx="Indicators",Fx="Main Indicator",Rx="Sub Indicator",Ox="Favourites",Nx="Setting",zx="Replay",$x="Timezone",Bx="Screenshot",Vx="Full Screen",Wx="Exit",Ux="Save",Hx="Confirm",Yx="Cancel",Xx="MA - Moving Average",jx="EMA - Exponential Moving Average",Zx="SMA - Simple Moving Average",Gx="BOLL - Bolinger Bands",qx="BBI - Bull And Bearlndex",Qx="SAR - Stop and Reverse",Kx="VOL - Volume (sub)",Jx="MACD - Moving Average Convergence / Divergence",ew="KDJ - KDJ Index",tw="RSI - Relative Strength Index",rw="BIAS - Bias Ratio",nw="BRAR - Emotional Index",iw="CCI - Commodity Channel Index",ow="DMI - Directional Movement Index (PDI, MDI, ADX, ADXR)",aw="PDI - Plus Directional Indicator",sw="MDI - Minus Directional Indicator",lw="ADX - Average Directional Index",cw="ADXR - Average Directional Index Rating",uw="CR - Energy Index",dw="PSY - Psychological Line",hw="DMA - Different of Moving Average",pw="TRIX - Triple Exponentially Smoothed Moving Average",fw="OBV - On Balance Volume",gw="VR - Volatility Volume Ratio",vw="WR - Williams %R",mw="MTM - Momentum Index",yw="EMV - Ease of Movement Value",bw="ROC - Price Rate of Change",xw="PVT - Price and Volume Trend",ww="AO - Awesome Oscillator",Cw="ADL - Accumulation/Distribution Line",_w="MFI - Money Flow Index",Sw="VOL - Volume",kw="WMA - Weighted Moving Average",Mw="WEM - Weighted Exponential Moving Average",Tw="QS - Qstick",Ew="AROON - Aroon",Iw="ATR - Average True Range",Lw="TR - True Range",Pw="WS - Wilder's Smoothing",Aw="UTC",Dw="(UTC-10) Honolulu",Fw="(UTC-8) Juneau",Rw="(UTC-7) Los Angeles",Ow="(UTC-5) Chicago",Nw="(UTC-4) Toronto",zw="(UTC-3) Sao Paulo",$w="(UTC+1) London",Bw="(UTC+2) Berlin",Vw="(UTC+3) Bahrain",Ww="(UTC+4) Dubai",Uw="(UTC+5) Ashkhabad",Hw="(UTC+6) Almaty",Yw="(UTC+7) Bangkok",Xw="(UTC+8) Shanghai",jw="(UTC+9) Tokyo",Zw="(UTC+10) Sydney",Gw="(UTC+12) Norfolk",qw="D",Qw="W",Kw="M",Jw="Y",eC="Horizontal Line",tC="Horizontal Ray",rC="Horizontal Segment",nC="Vertical Line",iC="Vertical Ray",oC="Vertical Segment",aC="Trend Line",sC="Ray",lC="Segment",cC="Arrow",uC="Price Line",dC="Price Channel Line",hC="Parallel Line",pC="Fibonacci Line",fC="Fibonacci Segment",gC="Fibonacci Circle",vC="Fibonacci Spiral",mC="Fibonacci Sector",yC="Fibonacci Extension",bC="Gann Box",xC="Rect",wC="Parallelogram",CC="Circle",_C="Triangle",SC="Three Waves",kC="Five Waves",MC="Eight Waves",TC="Any Waves",EC="ABCD Pattern",IC="XABCD Pattern",LC="Weak Magnet",PC="Strong Magnet",AC="Symbol Search",DC="Symbol Code",FC="Parameter 1",RC="Parameter 2",OC="Parameter 3",NC="Parameter 4",zC="Parameter 5",$C="Period",BC="Standard Deviation",VC="Charts",WC="Candle Type",UC="Candle Solid",HC="Candle Stroke",YC="Candle Up Stroke",XC="Candle Down Stroke",jC="OHLC",ZC="Area",GC="Heikin Ashi",qC="Renko",QC="Brick Size",KC="Show Last Price",JC="Show Highest Price",e_="Show Lowest Price",t_="Show indicator's last value",r_="Restore Defaults",n_="Standard",i_="Current Open",o_="Previous Close",a_="Close",s_="Open",l_="High",c_="Low",u_="Auto",d_="Right",h_="Left",p_="Normal",f_="Percentage",g_="Log",v_="Show Grids",m_="Show Horizontal Grids",y_="Horizontal Grid Size",b_="Horizontal Grid Color",x_="Show Vertical Grids",w_="Vertical Grid Size",C_="Vertical Grid Color",__="Grid Horizontal Style",S_="Grid Horizontal Dashed Value",k_="Grid Vertical Style",M_="Grid Vertical Dashed Value",T_="Pane Options",E_="Fill Stroke",I_="Always",L_="Stroke",P_="Stroke Fill",A_="Ruler",D_="RR",F_="Enable Crosshair Sync",R_="Enable Time Sync",O_="Enable Symbol Sync",N_="Enable Interval Sync",z_="Enable Drawing Sync",$_="Multichart",B_="Paper Trading",V_="Balance",W_="Trade",U_="Positions",H_="Orders",Y_="Trades",X_="Cash",j_="Market",Z_="Limit",G_="Buy",q_="Sell",Q_="Quantity",K_="Price",J_="Estimated Total",eS="No open positions",tS="Avg Price",rS="Current Price",nS="P&L",iS="Close Position",oS="No pending orders",aS="Status",sS="Cancel Order",lS="No trades executed",cS="Your trade history will appear here",uS="Clear All Trades",dS="Are you sure you want to clear all {count} trades? This action cannot be undone.",hS="Symbol/Side",pS="Qty",fS="Total",gS="Date/Time",vS="Cash Amount",mS="Operation",yS="Add Cash",bS="Remove Cash",xS="Pending buy orders",wS="Balance after removal",CS="Max safe removal",_S=" Insufficient funds for pending orders!",SS="Add",kS="Remove",MS=" Reset Trading Account",TS=` RESET TRADING ACCOUNT 

This will permanently delete:
 {orders} pending orders
 {positions} open positions
 {trades} trade records
 Reset balance to $10,000

This action cannot be undone!

Are you sure you want to continue?`,ES=` Trading account has been reset successfully!

 Balance: $10,000
 All orders, positions, and trades cleared`,IS="Pending Orders Summary",LS="Pending Buy Orders",PS="Pending Sell Orders",AS="Available Cash",DS="Max Cash Removal",FS="Order Book",RS="Size",OS="Price",NS="Amount",zS="Bids",$S="Asks",BS="Select a symbol to view order book",VS="Loading order book...",WS="Amount",US="Individual order quantities",HS="Cumulative",YS="Cumulative market depth",XS="Time",jS="Price",ZS="Quantity",GS="Amount",qS="Side",QS="No trades available",KS="Loading trades...",JS="Error loading trades",ek="12-hour format",tk="24-hour format",rk="Latest Trades",nk={indicator:Ax,indicators:Dx,main_indicator:Fx,sub_indicator:Rx,favourites:Ox,setting:Nx,replay:zx,timezone:$x,screenshot:Bx,full_screen:Vx,exit_full_screen:Wx,save:Ux,confirm:Hx,cancel:Yx,ma:Xx,ema:jx,sma:Zx,boll:Gx,bbi:qx,sar:Qx,vol:Kx,macd:Jx,kdj:ew,rsi:tw,bias:rw,brar:nw,cci:iw,dmi:ow,pdi:aw,mdi:sw,adx:lw,adxr:cw,cr:uw,psy:dw,dma:hw,trix:pw,obv:fw,vr:gw,wr:vw,mtm:mw,emv:yw,roc:bw,pvt:xw,ao:ww,adl:Cw,"force index":"FI - Force Index",mfi:_w,"volume weighted average price":"VWAP - Volume Weighted Average Price",volumebars:Sw,"volume profile fixed range":"Volume Profile - Fixed Range",wma:kw,wema:Mw,"chandelier exit":"CE -  Chandelier Exit","keltner channels":"KC - Keltner Channels","ichimoku cloud":"IC - Ichimoku Cloud","chaikin oscillator":"CO - Chaikin Oscillator","percentage price oscillator":"PPO - Percentage Price Oscillator","percentage volume oscillator":"PVO - Percentage Volume Oscillator",qstick:Tw,"absolute price oscillator":"APO - Absolute Price Oscillator","balance of power":"BOP - Balance of Power",aroon:Ew,"double exponential moving average":"DEMA - Double Exponential Moving Average",atr:Iw,tr:Lw,"envelope (sma)":"ENV (SMA) - Envelope (SMA)","envelope (ema)":"ENV (EMA) - Envelope (EMA)",ws:Pw,"volume price trend":"VPT - Volume Price Trend","negative volume index":"NVI - Negative Volume Index","money flow volume":"MFV - Money Flow Volume","money flow multiplier":"MFM - Money Flow Multiplier","average price":"AVP - Average Price","moving linear regression":"MLR - Moving Linear Regression","moving least square":"MLS - Moving Least Square",utc:Aw,honolulu:Dw,juneau:Fw,los_angeles:Rw,chicago:Ow,toronto:Nw,sao_paulo:zw,london:$w,berlin:Bw,bahrain:Vw,dubai:Ww,ashkhabad:Uw,almaty:Hw,bangkok:Yw,shanghai:Xw,tokyo:jw,sydney:Zw,norfolk:Gw,D:qw,"5D":"5D",W:Qw,M:Kw,"3M":"3M","6M":"6M",Y:Jw,"5Y":"5Y","Light Theme 1":"Light Theme 1","Light Theme 2":"Light Theme 2","Midnight Theme":"Midnight Theme","Dark Theme":"Dark Theme","Dark Gray Theme":"Dark Gray Theme","Blue Theme":"Blue Theme","Red Theme":"Red Theme","Green Theme":"Green Theme","Yellow Theme":"Yellow Theme","Pink Theme":"Pink Theme",horizontal_straight_line:eC,horizontal_ray_line:tC,horizontal_segment:rC,vertical_straight_line:nC,vertical_ray_line:iC,vertical_segment:oC,straight_line:aC,ray_line:sC,segment:lC,arrow:cC,price_line:uC,price_channel_line:dC,parallel_straight_line:hC,fibonacci_line:pC,fibonacci_segment:fC,fibonacci_circle:gC,fibonacci_spiral:vC,fibonacci_speed_resistance_fan:mC,fibonacci_extension:yC,gann_box:bC,rect:xC,parallelogram:wC,circle:CC,triangle:_C,three_waves:SC,five_waves:kC,eight_waves:MC,any_waves:TC,abcd:EC,xabcd:IC,weak_magnet:LC,strong_magnet:PC,symbol_search:AC,symbol_code:DC,params_1:FC,params_2:RC,params_3:OC,params_4:NC,params_5:zC,period:$C,standard_deviation:BC,charts:VC,candle_type:WC,candle_solid:UC,candle_stroke:HC,candle_up_stroke:YC,candle_down_stroke:XC,ohlc:jC,area:ZC,heikin_ashi:GC,renko:qC,brick_size:QC,last_price_show:KC,high_price_show:JC,low_price_show:e_,indicator_last_value_show:t_,restore_default:r_,standard:n_,"candle.bar.compareRule":"Candle Compare Rule","candle.bar.upColor":"Candle Up Color","candle.bar.downColor":"Candle Down Color","candle.bar.noChangeColor":"Candle No Change Color","candle.bar.upBorderColor":"Candle Up Border Color","candle.bar.downBorderColor":"Candle Down Border Color","candle.bar.noChangeBorderColor":"Candle No Change Border Color","candle.bar.upWickColor":"Candle Up Wick Color","candle.bar.downWickColor":"Candle Down Wick Color","candle.bar.noChangeWickColor":"Candle No Change Wick Color","candle.priceMark.show":"Show Price Mark","candle.priceMark.high.show":"Show High Price Mark","candle.priceMark.high.color":"High Price Mark Color","candle.priceMark.high.textOffset":"High Price Mark Text Offset","candle.priceMark.high.textSize":"High Price Mark Text Size","candle.priceMark.high.textFamily":"High Price Mark Text Family","candle.priceMark.high.textWeight":"High Price Mark Text Weight","candle.priceMark.low.show":"Show Low Price Mark","candle.priceMark.low.color":"Low Price Mark Color","candle.priceMark.low.textOffset":"Low Price Mark Text Offset","candle.priceMark.low.textSize":"Low Price Mark Text Size","candle.priceMark.low.textFamily":"Low Price Mark Text Family","candle.priceMark.low.textWeight":"Low Price Mark Text Weight","candle.priceMark.last.show":"Show Last Price Mark","candle.priceMark.last.compareRule":"Last Price Mark Compare Rule","candle.priceMark.last.upColor":"Last Price Mark Up Color","candle.priceMark.last.downColor":"Last Price Mark Down Color","candle.priceMark.last.noChangeColor":"Last Price Mark No Change Color","candle.priceMark.last.line.show":"Show Last Price Mark Line","candle.priceMark.last.line.style":"Last Price Mark Line Style","candle.priceMark.last.line.size":"Last Price Mark Line Size","candle.priceMark.last.line.dashedValue":"Last Price Mark Line Dashed Value","candle.priceMark.last.text.show":"Show Last Price Mark Text","candle.priceMark.last.text.style":"Last Price Mark Text Style","candle.priceMark.last.text.size":"Last Price Mark Text Size","candle.priceMark.last.text.color":"Last Price Mark Text Color",current_open:i_,previous_close:o_,"candle.area.lineSize":"Area Line Size","candle.area.lineColor":"Area Line Color","candle.area.value":"Area Value","candle.area.smooth":"Area Smooth",close:a_,open:s_,high:l_,low:c_,"candle.area.point.show":"Show Area Point","candle.area.point.color":"Area Point Color","candle.area.point.radius":"Area Point Radius","candle.area.point.rippleColor":"Area Point Ripple Color","candle.area.point.rippleRadius":"Area Point Ripple Radius","candle.area.point.animation":"Area Point Animation","candle.renko.brick.size":"Renko Brick Size",auto:u_,"xAxis.size":"X-Axis Size","xAxis.tickText.family":"X-Axis Tick Text Family","xAxis.tickText.marginStart":"X-Axis Tick Text Margin Start","xAxis.tickText.marginEnd":"X-Axis Tick Text Margin End",right:d_,left:h_,normal:p_,percentage:f_,log:g_,"candle.tooltip.showRule":"Candle Tooltip","candle.tooltip.showType":"Candle Tooltip Type","candle.tooltip.rect.position":"Candle Tooltip Rect Position","candle.tooltip.rect.color":"Candle Tooltip Rect Color","candle.tooltip.rect.borderColor":"Candle Tooltip Rect Border Color","candle.tooltip.text.size":"Candle Tooltip Text Size","candle.tooltip.text.weight":"Candle Tooltip Text Weight","candle.tooltip.text.color":"Candle Tooltip Text Color","indicator.lastValueMark.show":"Show Last Value Mark","indicator.lastValueMark.text.show":"Show Last Value Mark Text","indicator.lastValueMark.text.style":"Last Value Mark Text Style","indicator.lastValueMark.text.size":"Last Value Mark Text Size","indicator.lastValueMark.text.weight":"Last Value Mark Text Weight","indicator.lastValueMark.text.color":"Last Value Mark Text Color","indicator.lastValueMark.text.borderStyle":"Last Value Mark Text Border Style","indicator.lastValueMark.text.borderColor":"Last Value Mark Text Border Color","indicator.lastValueMark.text.borderSize":"Last Value Mark Text Border Size","indicator.lastValueMark.text.borderDashedValue":"Last Value Mark Text Border Border Dashed Value","indicator.lastValueMark.text.paddingLeft":"Last Value Mark Text Border Padding Left","indicator.lastValueMark.text.paddingTop":"Last Value Mark Text Border Style Padding Top","indicator.lastValueMark.text.paddingRight":"Last Value Mark Text Border Padding Right","indicator.lastValueMark.text.paddingBottom":"Last Value Mark Text Border Padding Bottom","indicator.lastValueMark.text.borderRadius":"Last Value Mark Text Border Border Radius","indicator.tooltip.showRule":"Show Tooltip Rule","indicator.tooltip.showType":"Show Tooltip Type","indicator.tooltip.title.show":"Show Tooltip","indicator.tooltip.title.showName":"Show Tooltip Name","indicator.tooltip.title.showParams":"Show Tooltip Params","indicator.tooltip.title.size":"Tooltip Title Size","indicator.tooltip.title.weight":"Tooltip Title Weight","indicator.tooltip.title.color":"Tooltip Title Color","indicator.tooltip.title.marginLeft":"Tooltip Title Margin Left","indicator.tooltip.title.marginTop":"Tooltip Title Margin Top","indicator.tooltip.title.marginRight":"Tooltip Title Margin Right","indicator.tooltip.title.marginBottom":"Tooltip Title Margin Bottom","indicator.tooltip.offsetTop":"Tooltip Offset Top","indicator.tooltip.offsetLeft":"Tooltip Offset Left","indicator.tooltip.offsetBottom":"Tooltip Offset Right","indicator.tooltip.offsetRight":"Tooltip Offset Bottom","indicator.tooltip.text.size":"Tooltip Text Size","indicator.tooltip.text.weight":"Tooltip Text Weight","indicator.tooltip.text.color":"Tooltip Text Color","indicator.tooltip.text.marginLeft":"Tooltip Text Margin Left","indicator.tooltip.text.marginTop":"Tooltip Text Margin Top","indicator.tooltip.text.marginRight":"Tooltip Text Margin Right","indicator.tooltip.text.marginBottom":"Tooltip Text Margin Bottom","indicator.bars.style":"Indicator Bars Style","indicator.bars.borderStyle":"Indicator Bars Border Style","indicator.bars.borderSize":"Indicator Bars Border Size","indicator.bars.borderColor":"Indicator Bars Border Color","indicator.bars.borderDashedValue":"Indicator Bars Border Dashed Value","indicator.ohlc.upColor":"Indicator OHLC Up Color","indicator.ohlc.downColor":"Indicator OHLC Down Color","indicator.ohlc.noChangeColor":"Indicator OHLC No Change Color","indicator.lines.style":"Indicator Lines Style","indicator.lines.size":"Indicator Lines Size","indicator.lines.color":"Indicator Lines Color","indicator.lines.dashedValue":"Indicator Lines Dashed Value",grid_show:v_,grid_horizontal_show:m_,grid_horizontal_size:y_,grid_horizontal_color:b_,grid_vertical_show:x_,grid_vertical_size:w_,grid_vertical_color:C_,grid_horizontal_style:__,grid_horizontal_dashedValue:S_,grid_vertical_style:k_,grid_vertical_dashedValue:M_,"xAxis.show":"Show X Axis","xAxis.axisLine.show":"Show X Axis Line","xAxis.axisLine.color":"X Axis Line Color","xAxis.axisLine.size":"X Axis Line Size","xAxis.tickText.show":"Show X Axis Tick Text","xAxis.tickText.size":"X Axis Tick Text Size","xAxis.tickText.weight":"X Axis Tick Text Weight","xAxis.tickText.color":"X Axis Tick Text Color","xAxis.tickLine.show":"Show X Axis Tick Line","xAxis.tickLine.size":"X Axis Tick Line Size","xAxis.tickLine.length":"X Axis Tick Line Length","xAxis.tickLine.color":"X Axis Tick Line Color","yAxis.size":"Y-Axis Size","yAxis.tickText.family":"Y-Axis Tick Text Family","yAxis.show":"Show Y Axis","yAxis.position":"Y Axis Position","yAxis.type":"Y Axis Type","yAxis.inside":"Y Axis Inside","yAxis.reverse":"Y Axis Reverse","yAxis.axisLine.show":"Show Y Axis Line","yAxis.axisLine.size":"Y Axis Line Size","yAxis.axisLine.color":"Y Axis Line Color","yAxis.tickText.show":"Show Y Axis Tick Text","yAxis.tickText.color":"Y Axis Tick Text Color","yAxis.tickText.size":"Y Axis Tick Text Size","yAxis.tickText.weight":"Y Axis Tick Text Weight","yAxis.tickText.marginStart":"Y Axis Tick Text Margin Start","yAxis.tickText.marginEnd":"Y Axis Tick Text Margin End","yAxis.tickLine.show":"Show Y Axis Tick Line","yAxis.tickLine.color":"Y Axis Tick Line Color","yAxis.tickLine.size":"Y Axis Tick Line Size","yAxis.tickLine.length":"Y Axis Tick Line Length","separator.size":"Sub Indicator Separator Size","separator.fill":"Sub Indicator Separator Fill","separator.activeBackgroundColor":"Sub Indicator Separator Color","crosshair.show":"Show Crosshair","crosshair.horizontal.show":"Show Horizontal Crosshair","crosshair.horizontal.line.show":"Show Horizontal Crosshair Line","crosshair.horizontal.line.style":"Horizontal Crosshair Line Style","crosshair.horizontal.line.size":"Horizontal Crosshair Line Size","crosshair.horizontal.line.color":"Horizontal Crosshair Line Color","crosshair.horizontal.line.dashedValue":"Horizontal Crosshair Line Dashed Value","crosshair.horizontal.text.show":"Show Horizontal Crosshair Text","crosshair.horizontal.text.style":"Horizontal Crosshair Text Style","crosshair.horizontal.text.size":"Horizontal Crosshair Text Size","crosshair.horizontal.text.weight":"Horizontal Crosshair Text Weight","crosshair.horizontal.text.color":"Horizontal Crosshair Text Color","crosshair.horizontal.text.backgroundColor":"Horizontal Crosshair Text Bg Color","crosshair.vertical.show":"Show Vertical Crosshair","crosshair.vertical.line.show":"Show Vertical Crosshair Line","crosshair.vertical.line.style":"Vertical Crosshair Line Style","crosshair.vertical.line.size":"Vertical Crosshair Line Size","crosshair.vertical.line.color":"Vertical Crosshair Line Color","crosshair.vertical.line.dashedValue":"Vertical Crosshair Line Dashed Value","pane.axis.name":"Axis Name","pane.axis.name.normal":"Normal","pane.axis.name.percentage":"Percentage","pane.axis.name.log":"Log","pane.axis.position":"Axis Position","pane.axis.inside":"Axis Inside","pane.axis.reverse":"Axis Reverse","pane.axis.scrollZoomEnabled":"Axis Scroll Zoom Enabled","pane.axis.gap.top":"Axis Gap Top","pane.axis.gap.bottom":"Axis Gap Bottom","pane.height":"Pane Height","pane.minHeight":"Pane Min Height","pane.dragEnabled":"Pane Drag Enabled","pane.state":"Pane State","pane.state.normal":"Normal","pane.state.maximize":"Maximize","pane.state.minimize":"Minimize",pane_options:T_,"crosshair.vertical.text.show":"Show Vertical Crosshair Text","crosshair.vertical.text.style":"Vertical Crosshair Text Style","crosshair.vertical.text.size":"Vertical Crosshair Text Size","crosshair.vertical.text.weight":"Vertical Crosshair Text Weight","crosshair.vertical.text.color":"Vertical Crosshair Text Color","crosshair.vertical.text.backgroundColor":"Vertical Crosshair Text Bg Color","overlay.point.color":"Point Color","overlay.point.borderColor":"Point Border Color","overlay.point.borderSize":"Point Border Size","overlay.point.activeColor":"Point Active Color","overlay.point.activeBorderColor":"Point Active Border Color","overlay.point.activeBorderSize":"Point Active Border Size","overlay.point.activeRadius":"Point Active Radius","overlay.point.radius":"Point Radius","overlay.line.style":"Line Style","overlay.line.smooth":"Line Smooth","overlay.line.size":"Line Size","overlay.line.color":"Line Color","overlay.line.dashedValue":"Line Dashed Value","overlay.rect.style":"Rect Style","sidebar.expand":"Expand sidebar","sidebar.collapse":"Collapse sidebar","overlay.rect.color":"Rect Color","overlay.rect.borderColor":"Rect Border Color","overlay.rect.borderSize":"Rect Border Size","overlay.rect.borderRadius":"Rect Border Radius","overlay.rect.borderStyle":"Rect Border Style","overlay.polygon.style":"Polygon Style","overlay.polygon.color":"Polygon Color","overlay.polygon.borderColor":"Polygon Border Color","overlay.polygon.borderStyle":"Polygon Border Style","overlay.polygon.borderSize":"Polygon Border Size","overlay.circle.style":"Circle Style","overlay.circle.color":"Circle Color","overlay.circle.borderColor":"Circle Border Color","overlay.circle.borderStyle":"Circle Border Style","overlay.circle.borderSize":"Circle Border Size","overlay.arc.style":"Arc Style","overlay.arc.size":"Arc Size","overlay.arc.color":"Arc Color","overlay.text.style":"Text Style","overlay.text.size":"Text Size","overlay.text.family":"Text Family","overlay.text.weight":"Text Weight","overlay.text.color":"Text Color","overlay.text.backgroundColor":"Text Background Color","overlay.text.borderColor":"Text Border Color","overlay.text.borderSize":"Text Border Size","overlay.text.borderStyle":"Text Border Style","overlay.text.borderDashedValue":"Text Border Dashed Value","overlay.text.borderRadius":"Text Border Radius","overlay.text.paddingLeft":"Text Padding Left","overlay.text.paddingRight":"Text Padding Right","overlay.text.paddingTop":"Text Padding Top","overlay.text.paddingBottom":"Text Padding Bottom",fill_stroke:E_,always:I_,stroke:L_,stroke_fill:P_,ruler:A_,rr:D_,enable_crosshair_sync:F_,enable_time_sync:R_,enable_symbol_sync:O_,enable_interval_sync:N_,enable_drawing_sync:z_,multichart:$_,paper_trading:B_,balance:V_,trade:W_,positions:U_,orders:H_,trades:Y_,cash:X_,market:j_,limit:Z_,buy:G_,sell:q_,quantity:Q_,price:K_,estimated_total:J_,no_open_positions:eS,avg_price:tS,current_price:rS,pnl:nS,close_position:iS,no_pending_orders:oS,status:aS,cancel_order:sS,no_trades_executed:lS,your_trade_history_will_appear_here:cS,clear_all_trades:uS,are_you_sure_clear_trades:dS,symbol_side:hS,qty:pS,total:fS,date_time:gS,cash_amount:vS,operation:mS,add_cash:yS,remove_cash:bS,pending_buy_orders:xS,balance_after_removal:wS,max_safe_removal:CS,insufficient_funds_warning:_S,add:SS,remove:kS,reset_trading_account:MS,reset_account_confirmation:TS,reset_account_success:ES,pending_orders_summary:IS,pending_buy_orders_summary:LS,pending_sell_orders_summary:PS,available_cash:AS,max_cash_removal:DS,order_book:FS,order_book_size:RS,order_book_price:OS,order_book_amount:NS,order_book_bids:zS,order_book_asks:$S,order_book_select_symbol:BS,order_book_loading:VS,order_book_amount_mode:WS,order_book_amount_description:US,order_book_cumulative_mode:HS,order_book_cumulative_description:YS,trade_time:XS,trade_price:jS,trade_quantity:ZS,trade_amount:GS,trade_side:qS,no_trades_available:QS,loading_trades:KS,trades_error:JS,time_format_12h:ek,time_format_24h:tk,latest_trades:rk},ik={"zh-CN":Px,"en-US":nk},I=(e,t)=>{var r;return((r=ik[t])==null?void 0:r[e])??e};function P0(e,t,r){const n=(e.x-t.x)*Math.cos(r)-(e.y-t.y)*Math.sin(r)+t.x,i=(e.x-t.x)*Math.sin(r)+(e.y-t.y)*Math.cos(r)+t.y;return{x:n,y:i}}function Lg(e,t){if(e.length>1){let r;return e[0].x===e[1].x&&e[0].y!==e[1].y?e[0].y<e[1].y?r={x:e[0].x,y:t.height}:r={x:e[0].x,y:0}:e[0].x>e[1].x?r={x:0,y:gn.getLinearYFromCoordinates(e[0],e[1],{x:0,y:e[0].y})}:r={x:t.width,y:gn.getLinearYFromCoordinates(e[0],e[1],{x:t.width,y:e[0].y})},{coordinates:[e[0],r]}}return[]}function m2(e,t){const r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.sqrt(r*r+n*n)}const ok={name:"arrow",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{if(e.length>1){const t=e[1].x>e[0].x?0:1,r=gn.getLinearSlopeIntercept(e[0],e[1]);let n;r!=null?n=Math.atan(r[0])+Math.PI*t:e[1].y>e[0].y?n=Math.PI/2:n=Math.PI/2*3;const i=P0({x:e[1].x-8,y:e[1].y+4},e[1],n),o=P0({x:e[1].x-8,y:e[1].y-4},e[1],n);return[{type:"line",attrs:{coordinates:e}},{type:"line",ignoreEvent:!0,attrs:{coordinates:[i,e[1],o]}}]}return[]}},ak={name:"circle",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{circle:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>{if(e.length>1){const t=m2(e[0],e[1]);return{type:"circle",attrs:{...e[0],r:t},styles:{style:"stroke_fill"}}}return[]}},sk={name:"rect",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>e.length>1?[{type:"polygon",attrs:{coordinates:[e[0],{x:e[1].x,y:e[0].y},e[1],{x:e[0].x,y:e[1].y}]},styles:{style:"stroke_fill"}}]:[]},lk={name:"parallelogram",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>{if(e.length===2)return[{type:"line",ignoreEvent:!0,attrs:{coordinates:e}}];if(e.length===3){const t={x:e[0].x+(e[2].x-e[1].x),y:e[2].y};return[{type:"polygon",attrs:{coordinates:[e[0],e[1],e[2],t]},styles:{style:"stroke_fill"}}]}return[]},performEventPressedMove:({points:e,performPointIndex:t,performPoint:r})=>{t<2&&(e[0].price=r.price,e[1].price=r.price)},performEventMoveForDrawing:({currentStep:e,points:t,performPoint:r})=>{e===2&&(t[0].price=r.price)}},ck={name:"triangle",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>[{type:"polygon",attrs:{coordinates:e},styles:{style:"stroke_fill"}}]},uk={name:"fibonacciCircle",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{if(e.length>1){const t=Math.abs(e[0].x-e[1].x),r=Math.abs(e[0].y-e[1].y),n=Math.sqrt(t*t+r*r),i=[.236,.382,.5,.618,.786,1],o=[],s=[];return i.forEach(u=>{const d=n*u;o.push({...e[0],r:d}),s.push({x:e[0].x,y:e[0].y+d+6,text:`${(u*100).toFixed(1)}%`})}),[{type:"circle",attrs:o,styles:{style:"stroke"}},{type:"text",ignoreEvent:!0,attrs:s}]}return[]}},dk={name:"fibonacciSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({chart:e,coordinates:t,overlay:r})=>{const n=[],i=[];if(t.length>1){const o=t[1].x>t[0].x?t[0].x:t[1].x,s=[1,.786,.618,.5,.382,.236,0],u=t[0].y-t[1].y,d=r.points,h=d[0].value-d[1].value;s.forEach(p=>{const f=t[1].y+u*p,m=(d[1].value+h*p).toFixed(e.getPrecision().price);n.push({coordinates:[{x:t[0].x,y:f},{x:t[1].x,y:f}]}),i.push({x:o,y:f,text:`${m} (${(p*100).toFixed(1)}%)`,baseline:"bottom"})})}return[{type:"line",attrs:n},{type:"text",ignoreEvent:!0,attrs:i}]}},hk={name:"fibonacciSpiral",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e,bounding:t})=>{if(e.length>1){const r=m2(e[0],e[1])/Math.sqrt(24),n=e[1].x>e[0].x?0:1,i=gn.getLinearSlopeIntercept(e[0],e[1]);let o;i!=null?o=Math.atan(i[0])+Math.PI*n:e[1].y>e[0].y?o=Math.PI/2:o=Math.PI/2*3;const s=P0({x:e[0].x-r,y:e[0].y},e[0],o),u=P0({x:e[0].x-r,y:e[0].y-r},e[0],o),d=[{...s,r,startAngle:o,endAngle:o+Math.PI/2},{...u,r:r*2,startAngle:o+Math.PI/2,endAngle:o+Math.PI}];let h=e[0].x-r,p=e[0].y-r;for(let f=2;f<9;f++){const m=d[f-2].r+d[f-1].r;let x=0;switch(f%4){case 0:{x=o,h-=d[f-2].r;break}case 1:{x=o+Math.PI/2,p-=d[f-2].r;break}case 2:{x=o+Math.PI,h+=d[f-2].r;break}case 3:{x=o+Math.PI/2*3,p+=d[f-2].r;break}}const b=x+Math.PI/2,C=P0({x:h,y:p},e[0],o);d.push({...C,r:m,startAngle:x,endAngle:b})}return[{type:"arc",attrs:d},{type:"line",attrs:Lg(e,t)}]}return[]}},pk={name:"fibonacciSpeedResistanceFan",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e,bounding:t})=>{const r=[];let n=[];const i=[];if(e.length>1){const o=e[1].x>e[0].x?-38:4,s=e[1].y>e[0].y?-2:20,u=e[1].x-e[0].x,d=e[1].y-e[0].y;[1,.75,.618,.5,.382,.25,0].forEach(h=>{const p=e[1].x-u*h,f=e[1].y-d*h;r.push({coordinates:[{x:p,y:e[0].y},{x:p,y:e[1].y}]}),r.push({coordinates:[{x:e[0].x,y:f},{x:e[1].x,y:f}]}),n=n.concat(Lg([e[0],{x:p,y:e[1].y}],t)),n=n.concat(Lg([e[0],{x:e[1].x,y:f}],t)),i.unshift({x:e[0].x+o,y:f+10,text:`${h.toFixed(3)}`}),i.unshift({x:p-18,y:e[0].y+s,text:`${h.toFixed(3)}`})})}return[{type:"line",attrs:r},{type:"line",attrs:n},{type:"text",ignoreEvent:!0,attrs:i}]}},fk={name:"fibonacciExtension",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({chart:e,coordinates:t,overlay:r})=>{const n=[],i=[];if(t.length>2){const o=r.points,s=o[1].value-o[0].value,u=t[1].y-t[0].y,d=[0,.236,.382,.5,.618,.786,1],h=t[2].x>t[1].x?t[1].x:t[2].x;d.forEach(p=>{const f=t[2].y+u*p,m=(o[2].value+s*p).toFixed(e.getPrecision().price);n.push({coordinates:[{x:t[1].x,y:f},{x:t[2].x,y:f}]}),i.push({x:h,y:f,text:`${m} (${(p*100).toFixed(1)}%)`,baseline:"bottom"})})}return[{type:"line",attrs:{coordinates:t},styles:{style:"dashed"}},{type:"line",attrs:n},{type:"text",ignoreEvent:!0,attrs:i}]}},gk={name:"gannBox",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>{if(e.length>1){const t=(e[1].y-e[0].y)/4,r=e[1].x-e[0].x,n=[{coordinates:[e[0],{x:e[1].x,y:e[1].y-t}]},{coordinates:[e[0],{x:e[1].x,y:e[1].y-t*2}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[1].x,y:e[0].y+t}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[1].x,y:e[0].y+t*2}]},{coordinates:[{...e[0]},{x:e[0].x+r*.236,y:e[1].y}]},{coordinates:[{...e[0]},{x:e[0].x+r*.5,y:e[1].y}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[0].x+r*.236,y:e[0].y}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[0].x+r*.5,y:e[0].y}]}],i=[{coordinates:[e[0],e[1]]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[1].x,y:e[0].y}]}];return[{type:"line",attrs:[{coordinates:[e[0],{x:e[1].x,y:e[0].y}]},{coordinates:[{x:e[1].x,y:e[0].y},e[1]]},{coordinates:[e[1],{x:e[0].x,y:e[1].y}]},{coordinates:[{x:e[0].x,y:e[1].y},e[0]]}]},{type:"polygon",ignoreEvent:!0,attrs:{coordinates:[e[0],{x:e[1].x,y:e[0].y},e[1],{x:e[0].x,y:e[1].y}]},styles:{style:"fill"}},{type:"line",attrs:n,styles:{style:"dashed"}},{type:"line",attrs:i}]}return[]}},vk={name:"threeWaves",totalStep:5,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},mk={name:"fiveWaves",totalStep:7,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},yk={name:"eightWaves",totalStep:10,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},bk={name:"anyWaves",totalStep:Number.MAX_SAFE_INTEGER,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},xk={name:"abcd",totalStep:5,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{let t=[],r=[];const n=["A","B","C","D"],i=e.map((o,s)=>({...o,baseline:"bottom",text:`(${n[s]})`}));return e.length>2&&(t=[e[0],e[2]],e.length>3&&(r=[e[1],e[3]])),[{type:"line",attrs:{coordinates:e}},{type:"line",attrs:[{coordinates:t},{coordinates:r}],styles:{style:"dashed"}},{type:"text",ignoreEvent:!0,attrs:i}]}},wk={name:"xabcd",totalStep:6,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e,overlay:t})=>{const r=[],n=[],i=["X","A","B","C","D"],o=e.map((s,u)=>({...s,baseline:"bottom",text:`(${i[u]})`}));return e.length>2&&(r.push({coordinates:[e[0],e[2]]}),n.push({coordinates:[e[0],e[1],e[2]]}),e.length>3&&(r.push({coordinates:[e[1],e[3]]}),e.length>4&&(r.push({coordinates:[e[2],e[4]]}),n.push({coordinates:[e[2],e[3],e[4]]})))),[{type:"line",attrs:{coordinates:e}},{type:"line",attrs:r,styles:{style:"dashed"}},{type:"polygon",ignoreEvent:!0,attrs:n},{type:"text",ignoreEvent:!0,attrs:o}]}},Ck={name:"ruler",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{backgroundColor:"rgba(22, 119, 255, 0.25)",tipBackgroundColor:"#1677FF",lineColor:"#1677FF"},extendData:e=>{if(e.length<2)return[];const[t,r]=e,n=r.dataIndex-t.dataIndex,i=r.value-t.value,o=i/t.value*100,s=r.timestamp-t.timestamp,u=Math.floor(s/(1440*60*1e3)),d=Math.floor(s%(1440*60*1e3)/(3600*1e3)),h=Math.floor(s%(3600*1e3)/(60*1e3));let p="";return u>0?(p=`${u} day${u>1?"s":""}`,d>0&&(p+=`, ${d} hour${d>1?"s":""}`)):d>0?(p=`${d} hour${d>1?"s":""}`,h>0&&(p+=`, ${h} minute${h>1?"s":""}`)):p=`${h} minute${h>1?"s":""}`,[`${i.toFixed(2)} (${o.toFixed(2)}%)`,`Bars: ${n}, d: ${p}`]},createPointFigures:({coordinates:e,overlay:t,bounding:r})=>{var n,i,o,s;if(e.length>1){const u=e[0].x<e[1].x,d=e[0].y<e[1].y,h={x:Math.round((e[0].x+e[1].x)/2),y:Math.round((e[0].y+e[1].y)/2)},p=(n=t.styles)==null?void 0:n.backgroundColor,f=(i=t.styles)==null?void 0:i.tipBackgroundColor,m=(o=t.styles)==null?void 0:o.lineColor,x=((s=t.extendData)==null?void 0:s.call(t,t.points))??[],b=[{type:"polygon",attrs:{coordinates:[e[0],{x:e[1].x,y:e[0].y},e[1],{x:e[0].x,y:e[1].y}]},styles:{color:p}},{type:"line",attrs:{coordinates:[{x:e[0].x,y:h.y},{x:e[1].x,y:h.y}]},styles:{color:m}},{type:"line",attrs:{coordinates:[{x:h.x,y:e[0].y},{x:h.x,y:e[1].y}]},styles:{color:m}}];u?b.push({type:"line",attrs:{coordinates:[{x:e[1].x-6,y:h.y-4},{x:e[1].x,y:h.y},{x:e[1].x-6,y:h.y+4}]}}):b.push({type:"line",attrs:{coordinates:[{x:e[1].x+6,y:h.y-4},{x:e[1].x,y:h.y},{x:e[1].x+6,y:h.y+4}]}}),d?b.push({type:"line",attrs:{coordinates:[{x:h.x-4,y:e[1].y-6},{x:h.x,y:e[1].y},{x:h.x+4,y:e[1].y-6}]},styles:{color:m}}):b.push({type:"line",attrs:{coordinates:[{x:h.x-4,y:e[1].y+6},{x:h.x,y:e[1].y},{x:h.x+4,y:e[1].y+6}]},styles:{color:m}});const C=x.length;if(C>0){let _,k=0;const M=C*12+(C-1)*4+16;x.forEach(A=>{k=Math.max(gn.calcTextWidth(A),k)}),k+=24,d?e[1].y+8+M>r.height?_=r.height-M:_=e[1].y+8:e[1].y-8-M<0?_=0:_=e[1].y-8-M,b.push({type:"rect",attrs:{x:h.x-k/2,y:_,width:k,height:M},styles:{borderRadius:4,color:f}});let L=_+8;x.forEach(A=>{b.push({type:"text",attrs:{x:h.x,y:L,text:A,align:"center"},styles:{paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,backgroundColor:"none"}}),L+=16})}return b}return[]}};var Ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ip={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ip.exports;(function(e,t){(function(){var r,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",f=1,m=2,x=4,b=1,C=2,_=1,k=2,M=4,L=8,A=16,P=32,W=64,D=128,$=256,z=512,B=30,Z="...",J=800,H=16,ee=1,le=2,ce=3,ae=1/0,re=9007199254740991,ve=17976931348623157e292,pe=NaN,Y=4294967295,U=Y-1,de=Y>>>1,X=[["ary",D],["bind",_],["bindKey",k],["curry",L],["curryRight",A],["flip",z],["partial",P],["partialRight",W],["rearg",$]],fe="[object Arguments]",ue="[object Array]",Fe="[object AsyncFunction]",Te="[object Boolean]",Pe="[object Date]",Ce="[object DOMException]",Ee="[object Error]",Je="[object Function]",Qe="[object GeneratorFunction]",nt="[object Map]",Ue="[object Number]",ct="[object Null]",ut="[object Object]",Qt="[object Promise]",Kt="[object Proxy]",Mt="[object RegExp]",gt="[object Set]",jt="[object String]",ln="[object Symbol]",mn="[object Undefined]",dr="[object WeakMap]",Ft="[object WeakSet]",Zt="[object ArrayBuffer]",nr="[object DataView]",Gr="[object Float32Array]",hr="[object Float64Array]",Vr="[object Int8Array]",Tt="[object Int16Array]",We="[object Int32Array]",_t="[object Uint8Array]",wt="[object Uint8ClampedArray]",St="[object Uint16Array]",Ct="[object Uint32Array]",Wt=/\b__p \+= '';/g,Gt=/\b(__p \+=) '' \+/g,yr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pr=/&(?:amp|lt|gt|quot|#39);/g,cr=/[&<>"']/g,Jn=RegExp(pr.source),Ur=RegExp(cr.source),Hr=/<%-([\s\S]+?)%>/g,ei=/<%([\s\S]+?)%>/g,Pt=/<%=([\s\S]+?)%>/g,Pr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/,Ar=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wr=/[\\^$.*+?()[\]{}|]/g,fr=RegExp(wr.source),tn=/^\s+/,Yr=/\s/,rn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yn=/\{\n\/\* \[wrapped with (.+)\] \*/,Ln=/,? & /,Hi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lo=/[()=,{}\[\]\/\s]/,Xa=/\\(\\)?/g,fi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ca=/\w*$/,Bs=/^[-+]0x[0-9a-f]+$/i,ua=/^0b[01]+$/i,ja=/^\[object .+?Constructor\]$/,Za=/^0o[0-7]+$/i,Bl=/^(?:0|[1-9]\d*)$/,Vl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ga=/($^)/,Gc=/['\n\r\u2028\u2029\\]/g,br="\\ud800-\\udfff",qc="\\u0300-\\u036f",Vs="\\ufe20-\\ufe2f",Wl="\\u20d0-\\u20ff",da=qc+Vs+Wl,Qc="\\u2700-\\u27bf",Ws="a-z\\xdf-\\xf6\\xf8-\\xff",qa="\\xac\\xb1\\xd7\\xf7",Oe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Kc="\\u2000-\\u206f",ti=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ul="A-Z\\xc0-\\xd6\\xd8-\\xde",Hl="\\ufe0e\\ufe0f",Yl=qa+Oe+Kc+ti,Oo="[']",Qa="["+br+"]",No="["+Yl+"]",co="["+da+"]",Xl="\\d+",Jc="["+Qc+"]",Ka="["+Ws+"]",Us="[^"+br+Yl+Xl+Qc+Ws+Ul+"]",ha="\\ud83c[\\udffb-\\udfff]",pa="(?:"+co+"|"+ha+")",jl="[^"+br+"]",fa="(?:\\ud83c[\\udde6-\\uddff]){2}",qt="[\\ud800-\\udbff][\\udc00-\\udfff]",uo="["+Ul+"]",Hs="\\u200d",Ja="(?:"+Ka+"|"+Us+")",Zl="(?:"+uo+"|"+Us+")",Ys="(?:"+Oo+"(?:d|ll|m|re|s|t|ve))?",Xs="(?:"+Oo+"(?:D|LL|M|RE|S|T|VE))?",es=pa+"?",ga="["+Hl+"]?",Yi="(?:"+Hs+"(?:"+[jl,fa,qt].join("|")+")"+ga+es+")*",Xi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ji="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zo=ga+es+Yi,va="(?:"+[Jc,fa,qt].join("|")+")"+zo,Zi="(?:"+[jl+co+"?",co,fa,qt,Qa].join("|")+")",eu=RegExp(Oo,"g"),Gl=RegExp(co,"g"),ho=RegExp(ha+"(?="+ha+")|"+Zi+zo,"g"),tu=RegExp([uo+"?"+Ka+"+"+Ys+"(?="+[No,uo,"$"].join("|")+")",Zl+"+"+Xs+"(?="+[No,uo+Ja,"$"].join("|")+")",uo+"?"+Ja+"+"+Ys,uo+"+"+Xs,ji,Xi,Xl,va].join("|"),"g"),ql=RegExp("["+Hs+br+da+Hl+"]"),ts=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ql=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ru=-1,ir={};ir[Gr]=ir[hr]=ir[Vr]=ir[Tt]=ir[We]=ir[_t]=ir[wt]=ir[St]=ir[Ct]=!0,ir[fe]=ir[ue]=ir[Zt]=ir[Te]=ir[nr]=ir[Pe]=ir[Ee]=ir[Je]=ir[nt]=ir[Ue]=ir[ut]=ir[Mt]=ir[gt]=ir[jt]=ir[dr]=!1;var Jt={};Jt[fe]=Jt[ue]=Jt[Zt]=Jt[nr]=Jt[Te]=Jt[Pe]=Jt[Gr]=Jt[hr]=Jt[Vr]=Jt[Tt]=Jt[We]=Jt[nt]=Jt[Ue]=Jt[ut]=Jt[Mt]=Jt[gt]=Jt[jt]=Jt[ln]=Jt[_t]=Jt[wt]=Jt[St]=Jt[Ct]=!0,Jt[Ee]=Jt[Je]=Jt[dr]=!1;var js={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},nu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},th=parseFloat,iu=parseInt,ou=typeof Ps=="object"&&Ps&&Ps.Object===Object&&Ps,U0=typeof self=="object"&&self&&self.Object===Object&&self,Dr=ou||U0||Function("return this")(),Kl=t&&!t.nodeType&&t,po=Kl&&!0&&e&&!e.nodeType&&e,rh=po&&po.exports===Kl,Zs=rh&&ou.process,Wn=(function(){try{var oe=po&&po.require&&po.require("util").types;return oe||Zs&&Zs.binding&&Zs.binding("util")}catch{}})(),nh=Wn&&Wn.isArrayBuffer,ri=Wn&&Wn.isDate,rs=Wn&&Wn.isMap,au=Wn&&Wn.isRegExp,Gs=Wn&&Wn.isSet,H0=Wn&&Wn.isTypedArray;function Un(oe,_e,me){switch(me.length){case 0:return oe.call(_e);case 1:return oe.call(_e,me[0]);case 2:return oe.call(_e,me[0],me[1]);case 3:return oe.call(_e,me[0],me[1],me[2])}return oe.apply(_e,me)}function ih(oe,_e,me,Ye){for(var xt=-1,or=oe==null?0:oe.length;++xt<or;){var qr=oe[xt];_e(Ye,qr,me(qr),oe)}return Ye}function Pn(oe,_e){for(var me=-1,Ye=oe==null?0:oe.length;++me<Ye&&_e(oe[me],me,oe)!==!1;);return oe}function su(oe,_e){for(var me=oe==null?0:oe.length;me--&&_e(oe[me],me,oe)!==!1;);return oe}function oh(oe,_e){for(var me=-1,Ye=oe==null?0:oe.length;++me<Ye;)if(!_e(oe[me],me,oe))return!1;return!0}function ma(oe,_e){for(var me=-1,Ye=oe==null?0:oe.length,xt=0,or=[];++me<Ye;){var qr=oe[me];_e(qr,me,oe)&&(or[xt++]=qr)}return or}function lu(oe,_e){var me=oe==null?0:oe.length;return!!me&&qs(oe,_e,0)>-1}function ah(oe,_e,me){for(var Ye=-1,xt=oe==null?0:oe.length;++Ye<xt;)if(me(_e,oe[Ye]))return!0;return!1}function Cr(oe,_e){for(var me=-1,Ye=oe==null?0:oe.length,xt=Array(Ye);++me<Ye;)xt[me]=_e(oe[me],me,oe);return xt}function ya(oe,_e){for(var me=-1,Ye=_e.length,xt=oe.length;++me<Ye;)oe[xt+me]=_e[me];return oe}function sh(oe,_e,me,Ye){var xt=-1,or=oe==null?0:oe.length;for(Ye&&or&&(me=oe[++xt]);++xt<or;)me=_e(me,oe[xt],xt,oe);return me}function nf(oe,_e,me,Ye){var xt=oe==null?0:oe.length;for(Ye&&xt&&(me=oe[--xt]);xt--;)me=_e(me,oe[xt],xt,oe);return me}function lh(oe,_e){for(var me=-1,Ye=oe==null?0:oe.length;++me<Ye;)if(_e(oe[me],me,oe))return!0;return!1}var of=uh("length");function Y0(oe){return oe.split("")}function af(oe){return oe.match(Hi)||[]}function X0(oe,_e,me){var Ye;return me(oe,function(xt,or,qr){if(_e(xt,or,qr))return Ye=or,!1}),Ye}function cu(oe,_e,me,Ye){for(var xt=oe.length,or=me+(Ye?1:-1);Ye?or--:++or<xt;)if(_e(oe[or],or,oe))return or;return-1}function qs(oe,_e,me){return _e===_e?hu(oe,_e,me):cu(oe,j0,me)}function ch(oe,_e,me,Ye){for(var xt=me-1,or=oe.length;++xt<or;)if(Ye(oe[xt],_e))return xt;return-1}function j0(oe){return oe!==oe}function Z0(oe,_e){var me=oe==null?0:oe.length;return me?dh(oe,_e)/me:pe}function uh(oe){return function(_e){return _e==null?r:_e[oe]}}function uu(oe){return function(_e){return oe==null?r:oe[_e]}}function G0(oe,_e,me,Ye,xt){return xt(oe,function(or,qr,gr){me=Ye?(Ye=!1,or):_e(me,or,qr,gr)}),me}function sf(oe,_e){var me=oe.length;for(oe.sort(_e);me--;)oe[me]=oe[me].value;return oe}function dh(oe,_e){for(var me,Ye=-1,xt=oe.length;++Ye<xt;){var or=_e(oe[Ye]);or!==r&&(me=me===r?or:me+or)}return me}function hh(oe,_e){for(var me=-1,Ye=Array(oe);++me<oe;)Ye[me]=_e(me);return Ye}function lf(oe,_e){return Cr(_e,function(me){return[me,oe[me]]})}function q0(oe){return oe&&oe.slice(0,pu(oe)+1).replace(tn,"")}function gi(oe){return function(_e){return oe(_e)}}function Jl(oe,_e){return Cr(_e,function(me){return oe[me]})}function $o(oe,_e){return oe.has(_e)}function Q0(oe,_e){for(var me=-1,Ye=oe.length;++me<Ye&&qs(_e,oe[me],0)>-1;);return me}function ph(oe,_e){for(var me=oe.length;me--&&qs(_e,oe[me],0)>-1;);return me}function K0(oe,_e){for(var me=oe.length,Ye=0;me--;)oe[me]===_e&&++Ye;return Ye}var J0=uu(js),e1=uu(nu);function t1(oe){return"\\"+rf[oe]}function Qs(oe,_e){return oe==null?r:oe[_e]}function Ks(oe){return ql.test(oe)}function cf(oe){return ts.test(oe)}function uf(oe){for(var _e,me=[];!(_e=oe.next()).done;)me.push(_e.value);return me}function du(oe){var _e=-1,me=Array(oe.size);return oe.forEach(function(Ye,xt){me[++_e]=[xt,Ye]}),me}function fh(oe,_e){return function(me){return oe(_e(me))}}function Mi(oe,_e){for(var me=-1,Ye=oe.length,xt=0,or=[];++me<Ye;){var qr=oe[me];(qr===_e||qr===p)&&(oe[me]=p,or[xt++]=me)}return or}function ba(oe){var _e=-1,me=Array(oe.size);return oe.forEach(function(Ye){me[++_e]=Ye}),me}function df(oe){var _e=-1,me=Array(oe.size);return oe.forEach(function(Ye){me[++_e]=[Ye,Ye]}),me}function hu(oe,_e,me){for(var Ye=me-1,xt=oe.length;++Ye<xt;)if(oe[Ye]===_e)return Ye;return-1}function hf(oe,_e,me){for(var Ye=me+1;Ye--;)if(oe[Ye]===_e)return Ye;return Ye}function ns(oe){return Ks(oe)?n1(oe):of(oe)}function vi(oe){return Ks(oe)?i1(oe):Y0(oe)}function pu(oe){for(var _e=oe.length;_e--&&Yr.test(oe.charAt(_e)););return _e}var r1=uu(tf);function n1(oe){for(var _e=ho.lastIndex=0;ho.test(oe);)++_e;return _e}function i1(oe){return oe.match(ho)||[]}function pf(oe){return oe.match(tu)||[]}var ff=function oe(_e){_e=_e==null?Dr:Js.defaults(Dr.Object(),_e,Js.pick(Dr,Ql));var me=_e.Array,Ye=_e.Date,xt=_e.Error,or=_e.Function,qr=_e.Math,gr=_e.Object,ec=_e.RegExp,gf=_e.String,Ti=_e.TypeError,Bo=me.prototype,gh=or.prototype,fo=gr.prototype,el=_e["__core-js_shared__"],tc=gh.toString,ar=fo.hasOwnProperty,tl=0,fu=(function(){var c=/[^.]+$/.exec(el&&el.keys&&el.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""})(),rc=fo.toString,gu=tc.call(gr),o1=Dr._,a1=ec("^"+tc.call(ar).replace(wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nc=rh?_e.Buffer:r,Vo=_e.Symbol,ic=_e.Uint8Array,vh=nc?nc.allocUnsafe:r,Gi=fh(gr.getPrototypeOf,gr),vu=gr.create,mu=fo.propertyIsEnumerable,yu=Bo.splice,s1=Vo?Vo.isConcatSpreadable:r,Wo=Vo?Vo.iterator:r,is=Vo?Vo.toStringTag:r,oc=(function(){try{var c=La(gr,"defineProperty");return c({},"",{}),c}catch{}})(),l1=_e.clearTimeout!==Dr.clearTimeout&&_e.clearTimeout,Mr=Ye&&Ye.now!==Dr.Date.now&&Ye.now,mh=_e.setTimeout!==Dr.setTimeout&&_e.setTimeout,os=qr.ceil,xa=qr.floor,bu=gr.getOwnPropertySymbols,yh=nc?nc.isBuffer:r,rl=_e.isFinite,xu=Bo.join,nl=fh(gr.keys,gr),Qr=qr.max,An=qr.min,vf=Ye.now,c1=_e.parseInt,ac=qr.random,wu=Bo.reverse,sc=La(_e,"DataView"),as=La(_e,"Map"),lc=La(_e,"Promise"),wa=La(_e,"Set"),cc=La(_e,"WeakMap"),il=La(gr,"create"),Cu=cc&&new cc,ol={},bh=Pa(sc),Ca=Pa(as),u1=Pa(lc),al=Pa(wa),go=Pa(cc),_a=Vo?Vo.prototype:r,mi=_a?_a.valueOf:r,_u=_a?_a.toString:r;function N(c){if(Jr(c)&&!It(c)&&!(c instanceof Et)){if(c instanceof Dn)return c;if(ar.call(c,"__wrapped__"))return z1(c)}return new Dn(c)}var sl=(function(){function c(){}return function(g){if(!Zr(g))return{};if(vu)return vu(g);c.prototype=g;var w=new c;return c.prototype=r,w}})();function vo(){}function Dn(c,g){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=r}N.templateSettings={escape:Hr,evaluate:ei,interpolate:Pt,variable:"",imports:{_:N}},N.prototype=vo.prototype,N.prototype.constructor=N,Dn.prototype=sl(vo.prototype),Dn.prototype.constructor=Dn;function Et(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function Su(){var c=new Et(this.__wrapped__);return c.__actions__=Yn(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Yn(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Yn(this.__views__),c}function xh(){if(this.__filtered__){var c=new Et(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function ll(){var c=this.__wrapped__.value(),g=this.__dir__,w=It(c),E=g<0,F=w?c.length:0,V=Zh(0,F,this.__views__),K=V.start,ne=V.end,se=ne-K,ke=E?ne:K-1,Me=this.__iteratees__,Ae=Me.length,He=0,ot=An(se,this.__takeCount__);if(!w||!E&&F==se&&ot==se)return vl(c,this.__actions__);var mt=[];e:for(;se--&&He<ot;){ke+=g;for(var Nt=-1,yt=c[ke];++Nt<Ae;){var Ut=Me[Nt],tr=Ut.iteratee,oo=Ut.type,Ci=tr(yt);if(oo==le)yt=Ci;else if(!Ci){if(oo==ee)continue e;break e}}mt[He++]=yt}return mt}Et.prototype=sl(vo.prototype),Et.prototype.constructor=Et;function ni(c){var g=-1,w=c==null?0:c.length;for(this.clear();++g<w;){var E=c[g];this.set(E[0],E[1])}}function Tr(){this.__data__=il?il(null):{},this.size=0}function _r(c){var g=this.has(c)&&delete this.__data__[c];return this.size-=g?1:0,g}function Sa(c){var g=this.__data__;if(il){var w=g[c];return w===d?r:w}return ar.call(g,c)?g[c]:r}function Fn(c){var g=this.__data__;return il?g[c]!==r:ar.call(g,c)}function ii(c,g){var w=this.__data__;return this.size+=this.has(c)?0:1,w[c]=il&&g===r?d:g,this}ni.prototype.clear=Tr,ni.prototype.delete=_r,ni.prototype.get=Sa,ni.prototype.has=Fn,ni.prototype.set=ii;function Hn(c){var g=-1,w=c==null?0:c.length;for(this.clear();++g<w;){var E=c[g];this.set(E[0],E[1])}}function cl(){this.__data__=[],this.size=0}function oi(c){var g=this.__data__,w=On(g,c);if(w<0)return!1;var E=g.length-1;return w==E?g.pop():yu.call(g,w,1),--this.size,!0}function ku(c){var g=this.__data__,w=On(g,c);return w<0?r:g[w][1]}function d1(c){return On(this.__data__,c)>-1}function h1(c,g){var w=this.__data__,E=On(w,c);return E<0?(++this.size,w.push([c,g])):w[E][1]=g,this}Hn.prototype.clear=cl,Hn.prototype.delete=oi,Hn.prototype.get=ku,Hn.prototype.has=d1,Hn.prototype.set=h1;function Ei(c){var g=-1,w=c==null?0:c.length;for(this.clear();++g<w;){var E=c[g];this.set(E[0],E[1])}}function p1(){this.size=0,this.__data__={hash:new ni,map:new(as||Hn),string:new ni}}function Uo(c){var g=kc(this,c).delete(c);return this.size-=g?1:0,g}function Mu(c){return kc(this,c).get(c)}function wh(c){return kc(this,c).has(c)}function f1(c,g){var w=kc(this,c),E=w.size;return w.set(c,g),this.size+=w.size==E?0:1,this}Ei.prototype.clear=p1,Ei.prototype.delete=Uo,Ei.prototype.get=Mu,Ei.prototype.has=wh,Ei.prototype.set=f1;function ss(c){var g=-1,w=c==null?0:c.length;for(this.__data__=new Ei;++g<w;)this.add(c[g])}function ka(c){return this.__data__.set(c,d),this}function ul(c){return this.__data__.has(c)}ss.prototype.add=ss.prototype.push=ka,ss.prototype.has=ul;function Rn(c){var g=this.__data__=new Hn(c);this.size=g.size}function Tu(){this.__data__=new Hn,this.size=0}function Eu(c){var g=this.__data__,w=g.delete(c);return this.size=g.size,w}function Ii(c){return this.__data__.get(c)}function Li(c){return this.__data__.has(c)}function ls(c,g){var w=this.__data__;if(w instanceof Hn){var E=w.__data__;if(!as||E.length<i-1)return E.push([c,g]),this.size=++w.size,this;w=this.__data__=new Ei(E)}return w.set(c,g),this.size=w.size,this}Rn.prototype.clear=Tu,Rn.prototype.delete=Eu,Rn.prototype.get=Ii,Rn.prototype.has=Li,Rn.prototype.set=ls;function mo(c,g){var w=It(c),E=!w&&Nc(c),F=!w&&!E&&Ml(c),V=!w&&!E&&!F&&md(c),K=w||E||F||V,ne=K?hh(c.length,gf):[],se=ne.length;for(var ke in c)(g||ar.call(c,ke))&&!(K&&(ke=="length"||F&&(ke=="offset"||ke=="parent")||V&&(ke=="buffer"||ke=="byteLength"||ke=="byteOffset")||Rr(ke,se)))&&ne.push(ke);return ne}function yo(c){var g=c.length;return g?c[fl(0,g-1)]:r}function cs(c,g){return ed(Yn(c),Ho(g,0,c.length))}function g1(c){return ed(Yn(c))}function uc(c,g,w){(w!==r&&!ea(c[g],w)||w===r&&!(g in c))&&bo(c,g,w)}function us(c,g,w){var E=c[g];(!(ar.call(c,g)&&ea(E,w))||w===r&&!(g in c))&&bo(c,g,w)}function On(c,g){for(var w=c.length;w--;)if(ea(c[w][0],g))return w;return-1}function yi(c,g,w,E){return wo(c,function(F,V,K){g(E,F,w(F),K)}),E}function Er(c,g){return c&&Qi(g,$n(g),c)}function qi(c,g){return c&&Qi(g,$i(g),c)}function bo(c,g,w){g=="__proto__"&&oc?oc(c,g,{configurable:!0,enumerable:!0,value:w,writable:!0}):c[g]=w}function Iu(c,g){for(var w=-1,E=g.length,F=me(E),V=c==null;++w<E;)F[w]=V?r:Bf(c,g[w]);return F}function Ho(c,g,w){return c===c&&(w!==r&&(c=c<=w?c:w),g!==r&&(c=c>=g?c:g)),c}function ai(c,g,w,E,F,V){var K,ne=g&f,se=g&m,ke=g&x;if(w&&(K=F?w(c,E,F,V):w(c)),K!==r)return K;if(!Zr(c))return c;var Me=It(c);if(Me){if(K=Tc(c),!ne)return Yn(c,K)}else{var Ae=wn(c),He=Ae==Je||Ae==Qe;if(Ml(c))return Oh(c,ne);if(Ae==ut||Ae==fe||He&&!F){if(K=se||He?{}:Cn(c),!ne)return se?yf(c,qi(K,c)):Wu(c,Er(K,c))}else{if(!Jt[Ae])return F?c:{};K=bf(c,Ae,ne)}}V||(V=new Rn);var ot=V.get(c);if(ot)return ot;V.set(c,K),$v(c)?c.forEach(function(yt){K.add(ai(yt,g,w,yt,c,V))}):Nv(c)&&c.forEach(function(yt,Ut){K.set(Ut,ai(yt,g,w,Ut,c,V))});var mt=ke?se?Sc:_c:se?$i:$n,Nt=Me?r:mt(c);return Pn(Nt||c,function(yt,Ut){Nt&&(Ut=yt,yt=c[Ut]),us(K,Ut,ai(yt,g,w,Ut,c,V))}),K}function v1(c){var g=$n(c);return function(w){return dc(w,c,g)}}function dc(c,g,w){var E=w.length;if(c==null)return!E;for(c=gr(c);E--;){var F=w[E],V=g[F],K=c[F];if(K===r&&!(F in c)||!V(K))return!1}return!0}function Ch(c,g,w){if(typeof c!="function")throw new Ti(s);return _l(function(){c.apply(r,w)},g)}function xo(c,g,w,E){var F=-1,V=lu,K=!0,ne=c.length,se=[],ke=g.length;if(!ne)return se;w&&(g=Cr(g,gi(w))),E?(V=ah,K=!1):g.length>=i&&(V=$o,K=!1,g=new ss(g));e:for(;++F<ne;){var Me=c[F],Ae=w==null?Me:w(Me);if(Me=E||Me!==0?Me:0,K&&Ae===Ae){for(var He=ke;He--;)if(g[He]===Ae)continue e;se.push(Me)}else V(g,Ae,E)||se.push(Me)}return se}var wo=Ri(bi),m1=Ri(Ma,!0);function hc(c,g){var w=!0;return wo(c,function(E,F,V){return w=!!g(E,F,V),w}),w}function ds(c,g,w){for(var E=-1,F=c.length;++E<F;){var V=c[E],K=g(V);if(K!=null&&(ne===r?K===K&&!io(K):w(K,ne)))var ne=K,se=V}return se}function y1(c,g,w,E){var F=c.length;for(w=Ot(w),w<0&&(w=-w>F?0:F+w),E=E===r||E>F?F:Ot(E),E<0&&(E+=F),E=w>E?0:Vv(E);w<E;)c[w++]=g;return c}function _h(c,g){var w=[];return wo(c,function(E,F,V){g(E,F,V)&&w.push(E)}),w}function Wr(c,g,w,E,F){var V=-1,K=c.length;for(w||(w=Qu),F||(F=[]);++V<K;){var ne=c[V];g>0&&w(ne)?g>1?Wr(ne,g-1,w,E,F):ya(F,ne):E||(F[F.length]=ne)}return F}var Lu=Hu(),pc=Hu(!0);function bi(c,g){return c&&Lu(c,g,$n)}function Ma(c,g){return c&&pc(c,g,$n)}function dl(c,g){return ma(g,function(w){return Ss(c[w])})}function Yo(c,g){g=So(g,c);for(var w=0,E=g.length;c!=null&&w<E;)c=c[to(g[w++])];return w&&w==E?c:r}function Pu(c,g,w){var E=g(c);return It(c)?E:ya(E,w(c))}function bn(c){return c==null?c===r?mn:ct:is&&is in gr(c)?qu(c):qh(c)}function Ta(c,g){return c>g}function Pi(c,g){return c!=null&&ar.call(c,g)}function hs(c,g){return c!=null&&g in gr(c)}function Sh(c,g,w){return c>=An(g,w)&&c<Qr(g,w)}function Au(c,g,w){for(var E=w?ah:lu,F=c[0].length,V=c.length,K=V,ne=me(V),se=1/0,ke=[];K--;){var Me=c[K];K&&g&&(Me=Cr(Me,gi(g))),se=An(Me.length,se),ne[K]=!w&&(g||F>=120&&Me.length>=120)?new ss(K&&Me):r}Me=c[0];var Ae=-1,He=ne[0];e:for(;++Ae<F&&ke.length<se;){var ot=Me[Ae],mt=g?g(ot):ot;if(ot=w||ot!==0?ot:0,!(He?$o(He,mt):E(ke,mt,w))){for(K=V;--K;){var Nt=ne[K];if(!(Nt?$o(Nt,mt):E(c[K],mt,w)))continue e}He&&He.push(mt),ke.push(ot)}}return ke}function Xo(c,g,w,E){return bi(c,function(F,V,K){g(E,w(F),V,K)}),E}function Ai(c,g,w){g=So(g,c),c=cn(c,g);var E=c==null?c:c[to(Zn(g))];return E==null?r:Un(E,c,w)}function Du(c){return Jr(c)&&bn(c)==fe}function b1(c){return Jr(c)&&bn(c)==Zt}function jo(c){return Jr(c)&&bn(c)==Pe}function Di(c,g,w,E,F){return c===g?!0:c==null||g==null||!Jr(c)&&!Jr(g)?c!==c&&g!==g:Fu(c,g,w,E,Di,F)}function Fu(c,g,w,E,F,V){var K=It(c),ne=It(g),se=K?ue:wn(c),ke=ne?ue:wn(g);se=se==fe?ut:se,ke=ke==fe?ut:ke;var Me=se==ut,Ae=ke==ut,He=se==ke;if(He&&Ml(c)){if(!Ml(g))return!1;K=!0,Me=!1}if(He&&!Me)return V||(V=new Rn),K||md(c)?Xh(c,g,w,E,F,V):jh(c,g,se,w,E,F,V);if(!(w&b)){var ot=Me&&ar.call(c,"__wrapped__"),mt=Ae&&ar.call(g,"__wrapped__");if(ot||mt){var Nt=ot?c.value():c,yt=mt?g.value():g;return V||(V=new Rn),F(Nt,yt,w,E,V)}}return He?(V||(V=new Rn),L1(c,g,w,E,F,V)):!1}function x1(c){return Jr(c)&&wn(c)==nt}function hl(c,g,w,E){var F=w.length,V=F,K=!E;if(c==null)return!V;for(c=gr(c);F--;){var ne=w[F];if(K&&ne[2]?ne[1]!==c[ne[0]]:!(ne[0]in c))return!1}for(;++F<V;){ne=w[F];var se=ne[0],ke=c[se],Me=ne[1];if(K&&ne[2]){if(ke===r&&!(se in c))return!1}else{var Ae=new Rn;if(E)var He=E(ke,Me,se,c,g,Ae);if(!(He===r?Di(Me,ke,b|C,E,Ae):He))return!1}}return!0}function kh(c){if(!Zr(c)||D1(c))return!1;var g=Ss(c)?a1:ja;return g.test(Pa(c))}function fc(c){return Jr(c)&&bn(c)==Mt}function Co(c){return Jr(c)&&wn(c)==gt}function gc(c){return Jr(c)&&K1(c.length)&&!!ir[bn(c)]}function pl(c){return typeof c=="function"?c:c==null?Bi:typeof c=="object"?It(c)?Fr(c[0],c[1]):Ru(c):Kv(c)}function Zo(c){if(!Ko(c))return nl(c);var g=[];for(var w in gr(c))ar.call(c,w)&&w!="constructor"&&g.push(w);return g}function Mh(c){if(!Zr(c))return O1(c);var g=Ko(c),w=[];for(var E in c)E=="constructor"&&(g||!ar.call(c,E))||w.push(E);return w}function Ea(c,g){return c<g}function Th(c,g){var w=-1,E=zi(c)?me(c.length):[];return wo(c,function(F,V,K){E[++w]=g(F,V,K)}),E}function Ru(c){var g=Mc(c);return g.length==1&&g[0][2]?Ku(g[0][0],g[0][1]):function(w){return w===c||hl(w,c,g)}}function Fr(c,g){return Ge(c)&&Ic(g)?Ku(to(c),g):function(w){var E=Bf(w,c);return E===r&&E===g?Vf(w,c):Di(g,E,b|C)}}function ps(c,g,w,E,F){c!==g&&Lu(g,function(V,K){if(F||(F=new Rn),Zr(V))Eh(c,g,K,w,ps,E,F);else{var ne=E?E(To(c,K),V,K+"",c,g,F):r;ne===r&&(ne=V),uc(c,K,ne)}},$i)}function Eh(c,g,w,E,F,V,K){var ne=To(c,w),se=To(g,w),ke=K.get(se);if(ke){uc(c,w,ke);return}var Me=V?V(ne,se,w+"",c,g,K):r,Ae=Me===r;if(Ae){var He=It(se),ot=!He&&Ml(se),mt=!He&&!ot&&md(se);Me=se,He||ot||mt?It(ne)?Me=ne:an(ne)?Me=Yn(ne):ot?(Ae=!1,Me=Oh(se,!0)):mt?(Ae=!1,Me=k1(se,!0)):Me=[]:f0(se)||Nc(se)?(Me=ne,Nc(ne)?Me=Wv(ne):(!Zr(ne)||Ss(ne))&&(Me=Cn(se))):Ae=!1}Ae&&(K.set(se,Me),F(Me,se,E,V,K),K.delete(se)),uc(c,w,Me)}function Ou(c,g){var w=c.length;if(w)return g+=g<0?w:0,Rr(g,w)?c[g]:r}function vc(c,g,w){g.length?g=Cr(g,function(V){return It(V)?function(K){return Yo(K,V.length===1?V[0]:V)}:V}):g=[Bi];var E=-1;g=Cr(g,gi(pt()));var F=Th(c,function(V,K,ne){var se=Cr(g,function(ke){return ke(V)});return{criteria:se,index:++E,value:V}});return sf(F,function(V,K){return mf(V,K,w)})}function Ih(c,g){return Ia(c,g,function(w,E){return Vf(c,E)})}function Ia(c,g,w){for(var E=-1,F=g.length,V={};++E<F;){var K=g[E],ne=Yo(c,K);w(ne,K)&&gs(V,So(K,c),ne)}return V}function Nr(c){return function(g){return Yo(g,c)}}function Xr(c,g,w,E){var F=E?ch:qs,V=-1,K=g.length,ne=c;for(c===g&&(g=Yn(g)),w&&(ne=Cr(c,gi(w)));++V<K;)for(var se=0,ke=g[V],Me=w?w(ke):ke;(se=F(ne,Me,se,E))>-1;)ne!==c&&yu.call(ne,se,1),yu.call(c,se,1);return c}function nn(c,g){for(var w=c?g.length:0,E=w-1;w--;){var F=g[w];if(w==E||F!==V){var V=F;Rr(F)?yu.call(c,F,1):$u(c,F)}}return c}function fl(c,g){return c+xa(ac()*(g-c+1))}function mc(c,g,w,E){for(var F=-1,V=Qr(os((g-c)/(w||1)),0),K=me(V);V--;)K[E?V:++F]=c,c+=w;return K}function fs(c,g){var w="";if(!c||g<1||g>re)return w;do g%2&&(w+=c),g=xa(g/2),g&&(c+=c);while(g);return w}function Rt(c,g){return xi(Ju(c,g,Bi),c+"")}function Nn(c){return yo(yd(c))}function Lh(c,g){var w=yd(c);return ed(w,Ho(g,0,w.length))}function gs(c,g,w,E){if(!Zr(c))return c;g=So(g,c);for(var F=-1,V=g.length,K=V-1,ne=c;ne!=null&&++F<V;){var se=to(g[F]),ke=w;if(se==="__proto__"||se==="constructor"||se==="prototype")return c;if(F!=K){var Me=ne[se];ke=E?E(Me,se,ne):r,ke===r&&(ke=Zr(Me)?Me:Rr(g[F+1])?[]:{})}us(ne,se,ke),ne=ne[se]}return c}var Nu=Cu?function(c,g){return Cu.set(c,g),c}:Bi,_o=oc?function(c,g){return oc(c,"toString",{configurable:!0,enumerable:!1,value:Uf(g),writable:!0})}:Bi;function Fi(c){return ed(yd(c))}function zn(c,g,w){var E=-1,F=c.length;g<0&&(g=-g>F?0:F+g),w=w>F?F:w,w<0&&(w+=F),F=g>w?0:w-g>>>0,g>>>=0;for(var V=me(F);++E<F;)V[E]=c[E+g];return V}function Ph(c,g){var w;return wo(c,function(E,F,V){return w=g(E,F,V),!w}),!!w}function gl(c,g,w){var E=0,F=c==null?E:c.length;if(typeof g=="number"&&g===g&&F<=de){for(;E<F;){var V=E+F>>>1,K=c[V];K!==null&&!io(K)&&(w?K<=g:K<g)?E=V+1:F=V}return F}return zu(c,g,Bi,w)}function zu(c,g,w,E){var F=0,V=c==null?0:c.length;if(V===0)return 0;g=w(g);for(var K=g!==g,ne=g===null,se=io(g),ke=g===r;F<V;){var Me=xa((F+V)/2),Ae=w(c[Me]),He=Ae!==r,ot=Ae===null,mt=Ae===Ae,Nt=io(Ae);if(K)var yt=E||mt;else ke?yt=mt&&(E||He):ne?yt=mt&&He&&(E||!ot):se?yt=mt&&He&&!ot&&(E||!Nt):ot||Nt?yt=!1:yt=E?Ae<=g:Ae<g;yt?F=Me+1:V=Me}return An(V,U)}function Ah(c,g){for(var w=-1,E=c.length,F=0,V=[];++w<E;){var K=c[w],ne=g?g(K):K;if(!w||!ea(ne,se)){var se=ne;V[F++]=K===0?0:K}}return V}function Dh(c){return typeof c=="number"?c:io(c)?pe:+c}function si(c){if(typeof c=="string")return c;if(It(c))return Cr(c,si)+"";if(io(c))return _u?_u.call(c):"";var g=c+"";return g=="0"&&1/c==-ae?"-0":g}function Go(c,g,w){var E=-1,F=lu,V=c.length,K=!0,ne=[],se=ne;if(w)K=!1,F=ah;else if(V>=i){var ke=g?null:I1(c);if(ke)return ba(ke);K=!1,F=$o,se=new ss}else se=g?[]:ne;e:for(;++E<V;){var Me=c[E],Ae=g?g(Me):Me;if(Me=w||Me!==0?Me:0,K&&Ae===Ae){for(var He=se.length;He--;)if(se[He]===Ae)continue e;g&&se.push(Ae),ne.push(Me)}else F(se,Ae,w)||(se!==ne&&se.push(Ae),ne.push(Me))}return ne}function $u(c,g){return g=So(g,c),c=cn(c,g),c==null||delete c[to(Zn(g))]}function Fh(c,g,w,E){return gs(c,g,w(Yo(c,g)),E)}function yc(c,g,w,E){for(var F=c.length,V=E?F:-1;(E?V--:++V<F)&&g(c[V],V,c););return w?zn(c,E?0:V,E?V+1:F):zn(c,E?V+1:0,E?F:V)}function vl(c,g){var w=c;return w instanceof Et&&(w=w.value()),sh(g,function(E,F){return F.func.apply(F.thisArg,ya([E],F.args))},w)}function Bu(c,g,w){var E=c.length;if(E<2)return E?Go(c[0]):[];for(var F=-1,V=me(E);++F<E;)for(var K=c[F],ne=-1;++ne<E;)ne!=F&&(V[F]=xo(V[F]||K,c[ne],g,w));return Go(Wr(V,1),g,w)}function bc(c,g,w){for(var E=-1,F=c.length,V=g.length,K={};++E<F;){var ne=E<V?g[E]:r;w(K,c[E],ne)}return K}function ml(c){return an(c)?c:[]}function Vu(c){return typeof c=="function"?c:Bi}function So(c,g){return It(c)?c:Ge(c,g)?[c]:Jh(vr(c))}var w1=Rt;function qo(c,g,w){var E=c.length;return w=w===r?E:w,!g&&w>=E?c:zn(c,g,w)}var Rh=l1||function(c){return Dr.clearTimeout(c)};function Oh(c,g){if(g)return c.slice();var w=c.length,E=vh?vh(w):new c.constructor(w);return c.copy(E),E}function xc(c){var g=new c.constructor(c.byteLength);return new ic(g).set(new ic(c)),g}function C1(c,g){var w=g?xc(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.byteLength)}function _1(c){var g=new c.constructor(c.source,ca.exec(c));return g.lastIndex=c.lastIndex,g}function S1(c){return mi?gr(mi.call(c)):{}}function k1(c,g){var w=g?xc(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.length)}function Nh(c,g){if(c!==g){var w=c!==r,E=c===null,F=c===c,V=io(c),K=g!==r,ne=g===null,se=g===g,ke=io(g);if(!ne&&!ke&&!V&&c>g||V&&K&&se&&!ne&&!ke||E&&K&&se||!w&&se||!F)return 1;if(!E&&!V&&!ke&&c<g||ke&&w&&F&&!E&&!V||ne&&w&&F||!K&&F||!se)return-1}return 0}function mf(c,g,w){for(var E=-1,F=c.criteria,V=g.criteria,K=F.length,ne=w.length;++E<K;){var se=Nh(F[E],V[E]);if(se){if(E>=ne)return se;var ke=w[E];return se*(ke=="desc"?-1:1)}}return c.index-g.index}function M1(c,g,w,E){for(var F=-1,V=c.length,K=w.length,ne=-1,se=g.length,ke=Qr(V-K,0),Me=me(se+ke),Ae=!E;++ne<se;)Me[ne]=g[ne];for(;++F<K;)(Ae||F<V)&&(Me[w[F]]=c[F]);for(;ke--;)Me[ne++]=c[F++];return Me}function zh(c,g,w,E){for(var F=-1,V=c.length,K=-1,ne=w.length,se=-1,ke=g.length,Me=Qr(V-ne,0),Ae=me(Me+ke),He=!E;++F<Me;)Ae[F]=c[F];for(var ot=F;++se<ke;)Ae[ot+se]=g[se];for(;++K<ne;)(He||F<V)&&(Ae[ot+w[K]]=c[F++]);return Ae}function Yn(c,g){var w=-1,E=c.length;for(g||(g=me(E));++w<E;)g[w]=c[w];return g}function Qi(c,g,w,E){var F=!w;w||(w={});for(var V=-1,K=g.length;++V<K;){var ne=g[V],se=E?E(w[ne],c[ne],ne,w,c):r;se===r&&(se=c[ne]),F?bo(w,ne,se):us(w,ne,se)}return w}function Wu(c,g){return Qi(c,Ki(c),g)}function yf(c,g){return Qi(c,P1(c),g)}function Uu(c,g){return function(w,E){var F=It(w)?ih:yi,V=g?g():{};return F(w,c,pt(E,2),V)}}function yl(c){return Rt(function(g,w){var E=-1,F=w.length,V=F>1?w[F-1]:r,K=F>2?w[2]:r;for(V=c.length>3&&typeof V=="function"?(F--,V):r,K&&jn(w[0],w[1],K)&&(V=F<3?r:V,F=1),g=gr(g);++E<F;){var ne=w[E];ne&&c(g,ne,E,V)}return g})}function Ri(c,g){return function(w,E){if(w==null)return w;if(!zi(w))return c(w,E);for(var F=w.length,V=g?F:-1,K=gr(w);(g?V--:++V<F)&&E(K[V],V,K)!==!1;);return w}}function Hu(c){return function(g,w,E){for(var F=-1,V=gr(g),K=E(g),ne=K.length;ne--;){var se=K[c?ne:++F];if(w(V[se],se,V)===!1)break}return g}}function Yu(c,g,w){var E=g&_,F=bl(c);function V(){var K=this&&this!==Dr&&this instanceof V?F:c;return K.apply(E?w:this,arguments)}return V}function $h(c){return function(g){g=vr(g);var w=Ks(g)?vi(g):r,E=w?w[0]:g.charAt(0),F=w?qo(w,1).join(""):g.slice(1);return E[c]()+F}}function vs(c){return function(g){return sh(qv(Gv(g).replace(eu,"")),c,"")}}function bl(c){return function(){var g=arguments;switch(g.length){case 0:return new c;case 1:return new c(g[0]);case 2:return new c(g[0],g[1]);case 3:return new c(g[0],g[1],g[2]);case 4:return new c(g[0],g[1],g[2],g[3]);case 5:return new c(g[0],g[1],g[2],g[3],g[4]);case 6:return new c(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new c(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var w=sl(c.prototype),E=c.apply(w,g);return Zr(E)?E:w}}function Bh(c,g,w){var E=bl(c);function F(){for(var V=arguments.length,K=me(V),ne=V,se=Qo(F);ne--;)K[ne]=arguments[ne];var ke=V<3&&K[0]!==se&&K[V-1]!==se?[]:Mi(K,se);if(V-=ke.length,V<w)return Xn(c,g,xl,F.placeholder,r,K,ke,r,r,w-V);var Me=this&&this!==Dr&&this instanceof F?E:c;return Un(Me,this,K)}return F}function ms(c){return function(g,w,E){var F=gr(g);if(!zi(g)){var V=pt(w,3);g=$n(g),w=function(ne){return V(F[ne],ne,F)}}var K=c(g,w,E);return K>-1?F[V?g[K]:K]:r}}function Xu(c){return Mo(function(g){var w=g.length,E=w,F=Dn.prototype.thru;for(c&&g.reverse();E--;){var V=g[E];if(typeof V!="function")throw new Ti(s);if(F&&!K&&wl(V)=="wrapper")var K=new Dn([],!0)}for(E=K?E:w;++E<w;){V=g[E];var ne=wl(V),se=ne=="wrapper"?Gu(V):r;se&&Ec(se[0])&&se[1]==(D|L|P|$)&&!se[4].length&&se[9]==1?K=K[wl(se[0])].apply(K,se[3]):K=V.length==1&&Ec(V)?K[ne]():K.thru(V)}return function(){var ke=arguments,Me=ke[0];if(K&&ke.length==1&&It(Me))return K.plant(Me).value();for(var Ae=0,He=w?g[Ae].apply(this,ke):Me;++Ae<w;)He=g[Ae].call(this,He);return He}})}function xl(c,g,w,E,F,V,K,ne,se,ke){var Me=g&D,Ae=g&_,He=g&k,ot=g&(L|A),mt=g&z,Nt=He?r:bl(c);function yt(){for(var Ut=arguments.length,tr=me(Ut),oo=Ut;oo--;)tr[oo]=arguments[oo];if(ot)var Ci=Qo(yt),ao=K0(tr,Ci);if(E&&(tr=M1(tr,E,F,ot)),V&&(tr=zh(tr,V,K,ot)),Ut-=ao,ot&&Ut<ke){var sn=Mi(tr,Ci);return Xn(c,g,xl,yt.placeholder,w,tr,sn,ne,se,ke-Ut)}var ta=Ae?w:this,Ms=He?ta[c]:c;return Ut=tr.length,ne?tr=Ji(tr,ne):mt&&Ut>1&&tr.reverse(),Me&&se<Ut&&(tr.length=se),this&&this!==Dr&&this instanceof yt&&(Ms=Nt||bl(Ms)),Ms.apply(ta,tr)}return yt}function T1(c,g){return function(w,E){return Xo(w,c,g(E),{})}}function wc(c,g){return function(w,E){var F;if(w===r&&E===r)return g;if(w!==r&&(F=w),E!==r){if(F===r)return E;typeof w=="string"||typeof E=="string"?(w=si(w),E=si(E)):(w=Dh(w),E=Dh(E)),F=c(w,E)}return F}}function ju(c){return Mo(function(g){return g=Cr(g,gi(pt())),Rt(function(w){var E=this;return c(g,function(F){return Un(F,E,w)})})})}function Cc(c,g){g=g===r?" ":si(g);var w=g.length;if(w<2)return w?fs(g,c):g;var E=fs(g,os(c/ns(g)));return Ks(g)?qo(vi(E),0,c).join(""):E.slice(0,c)}function E1(c,g,w,E){var F=g&_,V=bl(c);function K(){for(var ne=-1,se=arguments.length,ke=-1,Me=E.length,Ae=me(Me+se),He=this&&this!==Dr&&this instanceof K?V:c;++ke<Me;)Ae[ke]=E[ke];for(;se--;)Ae[ke++]=arguments[++ne];return Un(He,F?w:this,Ae)}return K}function Vh(c){return function(g,w,E){return E&&typeof E!="number"&&jn(g,w,E)&&(w=E=r),g=ks(g),w===r?(w=g,g=0):w=ks(w),E=E===r?g<w?1:-1:ks(E),mc(g,w,E,c)}}function Zu(c){return function(g,w){return typeof g=="string"&&typeof w=="string"||(g=Eo(g),w=Eo(w)),c(g,w)}}function Xn(c,g,w,E,F,V,K,ne,se,ke){var Me=g&L,Ae=Me?K:r,He=Me?r:K,ot=Me?V:r,mt=Me?r:V;g|=Me?P:W,g&=~(Me?W:P),g&M||(g&=-4);var Nt=[c,g,F,ot,Ae,mt,He,ne,se,ke],yt=w.apply(r,Nt);return Ec(c)&&Qh(yt,Nt),yt.placeholder=E,Kh(yt,c,g)}function xn(c){var g=qr[c];return function(w,E){if(w=Eo(w),E=E==null?0:An(Ot(E),292),E&&rl(w)){var F=(vr(w)+"e").split("e"),V=g(F[0]+"e"+(+F[1]+E));return F=(vr(V)+"e").split("e"),+(F[0]+"e"+(+F[1]-E))}return g(w)}}var I1=wa&&1/ba(new wa([,-0]))[1]==ae?function(c){return new wa(c)}:Xf;function Wh(c){return function(g){var w=wn(g);return w==nt?du(g):w==gt?df(g):lf(g,c(g))}}function ko(c,g,w,E,F,V,K,ne){var se=g&k;if(!se&&typeof c!="function")throw new Ti(s);var ke=E?E.length:0;if(ke||(g&=-97,E=F=r),K=K===r?K:Qr(Ot(K),0),ne=ne===r?ne:Ot(ne),ke-=F?F.length:0,g&W){var Me=E,Ae=F;E=F=r}var He=se?r:Gu(c),ot=[c,g,w,E,F,Me,Ae,V,K,ne];if(He&&R1(ot,He),c=ot[0],g=ot[1],w=ot[2],E=ot[3],F=ot[4],ne=ot[9]=ot[9]===r?se?0:c.length:Qr(ot[9]-ke,0),!ne&&g&(L|A)&&(g&=-25),!g||g==_)var mt=Yu(c,g,w);else g==L||g==A?mt=Bh(c,g,ne):(g==P||g==(_|P))&&!F.length?mt=E1(c,g,w,E):mt=xl.apply(r,ot);var Nt=He?Nu:Qh;return Kh(Nt(mt,ot),c,g)}function Uh(c,g,w,E){return c===r||ea(c,fo[w])&&!ar.call(E,w)?g:c}function Hh(c,g,w,E,F,V){return Zr(c)&&Zr(g)&&(V.set(g,c),ps(c,g,r,Hh,V),V.delete(g)),c}function Yh(c){return f0(c)?r:c}function Xh(c,g,w,E,F,V){var K=w&b,ne=c.length,se=g.length;if(ne!=se&&!(K&&se>ne))return!1;var ke=V.get(c),Me=V.get(g);if(ke&&Me)return ke==g&&Me==c;var Ae=-1,He=!0,ot=w&C?new ss:r;for(V.set(c,g),V.set(g,c);++Ae<ne;){var mt=c[Ae],Nt=g[Ae];if(E)var yt=K?E(Nt,mt,Ae,g,c,V):E(mt,Nt,Ae,c,g,V);if(yt!==r){if(yt)continue;He=!1;break}if(ot){if(!lh(g,function(Ut,tr){if(!$o(ot,tr)&&(mt===Ut||F(mt,Ut,w,E,V)))return ot.push(tr)})){He=!1;break}}else if(!(mt===Nt||F(mt,Nt,w,E,V))){He=!1;break}}return V.delete(c),V.delete(g),He}function jh(c,g,w,E,F,V,K){switch(w){case nr:if(c.byteLength!=g.byteLength||c.byteOffset!=g.byteOffset)return!1;c=c.buffer,g=g.buffer;case Zt:return!(c.byteLength!=g.byteLength||!V(new ic(c),new ic(g)));case Te:case Pe:case Ue:return ea(+c,+g);case Ee:return c.name==g.name&&c.message==g.message;case Mt:case jt:return c==g+"";case nt:var ne=du;case gt:var se=E&b;if(ne||(ne=ba),c.size!=g.size&&!se)return!1;var ke=K.get(c);if(ke)return ke==g;E|=C,K.set(c,g);var Me=Xh(ne(c),ne(g),E,F,V,K);return K.delete(c),Me;case ln:if(mi)return mi.call(c)==mi.call(g)}return!1}function L1(c,g,w,E,F,V){var K=w&b,ne=_c(c),se=ne.length,ke=_c(g),Me=ke.length;if(se!=Me&&!K)return!1;for(var Ae=se;Ae--;){var He=ne[Ae];if(!(K?He in g:ar.call(g,He)))return!1}var ot=V.get(c),mt=V.get(g);if(ot&&mt)return ot==g&&mt==c;var Nt=!0;V.set(c,g),V.set(g,c);for(var yt=K;++Ae<se;){He=ne[Ae];var Ut=c[He],tr=g[He];if(E)var oo=K?E(tr,Ut,He,g,c,V):E(Ut,tr,He,c,g,V);if(!(oo===r?Ut===tr||F(Ut,tr,w,E,V):oo)){Nt=!1;break}yt||(yt=He=="constructor")}if(Nt&&!yt){var Ci=c.constructor,ao=g.constructor;Ci!=ao&&"constructor"in c&&"constructor"in g&&!(typeof Ci=="function"&&Ci instanceof Ci&&typeof ao=="function"&&ao instanceof ao)&&(Nt=!1)}return V.delete(c),V.delete(g),Nt}function Mo(c){return xi(Ju(c,r,rd),c+"")}function _c(c){return Pu(c,$n,Ki)}function Sc(c){return Pu(c,$i,P1)}var Gu=Cu?function(c){return Cu.get(c)}:Xf;function wl(c){for(var g=c.name+"",w=ol[g],E=ar.call(ol,g)?w.length:0;E--;){var F=w[E],V=F.func;if(V==null||V==c)return F.name}return g}function Qo(c){var g=ar.call(N,"placeholder")?N:c;return g.placeholder}function pt(){var c=N.iteratee||Hf;return c=c===Hf?pl:c,arguments.length?c(arguments[0],arguments[1]):c}function kc(c,g){var w=c.__data__;return Cl(g)?w[typeof g=="string"?"string":"hash"]:w.map}function Mc(c){for(var g=$n(c),w=g.length;w--;){var E=g[w],F=c[E];g[w]=[E,F,Ic(F)]}return g}function La(c,g){var w=Qs(c,g);return kh(w)?w:r}function qu(c){var g=ar.call(c,is),w=c[is];try{c[is]=r;var E=!0}catch{}var F=rc.call(c);return E&&(g?c[is]=w:delete c[is]),F}var Ki=bu?function(c){return c==null?[]:(c=gr(c),ma(bu(c),function(g){return mu.call(c,g)}))}:jf,P1=bu?function(c){for(var g=[];c;)ya(g,Ki(c)),c=Gi(c);return g}:jf,wn=bn;(sc&&wn(new sc(new ArrayBuffer(1)))!=nr||as&&wn(new as)!=nt||lc&&wn(lc.resolve())!=Qt||wa&&wn(new wa)!=gt||cc&&wn(new cc)!=dr)&&(wn=function(c){var g=bn(c),w=g==ut?c.constructor:r,E=w?Pa(w):"";if(E)switch(E){case bh:return nr;case Ca:return nt;case u1:return Qt;case al:return gt;case go:return dr}return g});function Zh(c,g,w){for(var E=-1,F=w.length;++E<F;){var V=w[E],K=V.size;switch(V.type){case"drop":c+=K;break;case"dropRight":g-=K;break;case"take":g=An(g,c+K);break;case"takeRight":c=Qr(c,g-K);break}}return{start:c,end:g}}function A1(c){var g=c.match(yn);return g?g[1].split(Ln):[]}function Gh(c,g,w){g=So(g,c);for(var E=-1,F=g.length,V=!1;++E<F;){var K=to(g[E]);if(!(V=c!=null&&w(c,K)))break;c=c[K]}return V||++E!=F?V:(F=c==null?0:c.length,!!F&&K1(F)&&Rr(K,F)&&(It(c)||Nc(c)))}function Tc(c){var g=c.length,w=new c.constructor(g);return g&&typeof c[0]=="string"&&ar.call(c,"index")&&(w.index=c.index,w.input=c.input),w}function Cn(c){return typeof c.constructor=="function"&&!Ko(c)?sl(Gi(c)):{}}function bf(c,g,w){var E=c.constructor;switch(g){case Zt:return xc(c);case Te:case Pe:return new E(+c);case nr:return C1(c,w);case Gr:case hr:case Vr:case Tt:case We:case _t:case wt:case St:case Ct:return k1(c,w);case nt:return new E;case Ue:case jt:return new E(c);case Mt:return _1(c);case gt:return new E;case ln:return S1(c)}}function xf(c,g){var w=g.length;if(!w)return c;var E=w-1;return g[E]=(w>1?"& ":"")+g[E],g=g.join(w>2?", ":" "),c.replace(rn,`{
/* [wrapped with `+g+`] */
`)}function Qu(c){return It(c)||Nc(c)||!!(s1&&c&&c[s1])}function Rr(c,g){var w=typeof c;return g=g??re,!!g&&(w=="number"||w!="symbol"&&Bl.test(c))&&c>-1&&c%1==0&&c<g}function jn(c,g,w){if(!Zr(w))return!1;var E=typeof g;return(E=="number"?zi(w)&&Rr(g,w.length):E=="string"&&g in w)?ea(w[g],c):!1}function Ge(c,g){if(It(c))return!1;var w=typeof c;return w=="number"||w=="symbol"||w=="boolean"||c==null||io(c)?!0:kt.test(c)||!Pr.test(c)||g!=null&&c in gr(g)}function Cl(c){var g=typeof c;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?c!=="__proto__":c===null}function Ec(c){var g=wl(c),w=N[g];if(typeof w!="function"||!(g in Et.prototype))return!1;if(c===w)return!0;var E=Gu(w);return!!E&&c===E[0]}function D1(c){return!!fu&&fu in c}var wf=el?Ss:Zf;function Ko(c){var g=c&&c.constructor,w=typeof g=="function"&&g.prototype||fo;return c===w}function Ic(c){return c===c&&!Zr(c)}function Ku(c,g){return function(w){return w==null?!1:w[c]===g&&(g!==r||c in gr(w))}}function F1(c){var g=ge(c,function(E){return w.size===h&&w.clear(),E}),w=g.cache;return g}function R1(c,g){var w=c[1],E=g[1],F=w|E,V=F<(_|k|D),K=E==D&&w==L||E==D&&w==$&&c[7].length<=g[8]||E==(D|$)&&g[7].length<=g[8]&&w==L;if(!(V||K))return c;E&_&&(c[2]=g[2],F|=w&_?0:M);var ne=g[3];if(ne){var se=c[3];c[3]=se?M1(se,ne,g[4]):ne,c[4]=se?Mi(c[3],p):g[4]}return ne=g[5],ne&&(se=c[5],c[5]=se?zh(se,ne,g[6]):ne,c[6]=se?Mi(c[5],p):g[6]),ne=g[7],ne&&(c[7]=ne),E&D&&(c[8]=c[8]==null?g[8]:An(c[8],g[8])),c[9]==null&&(c[9]=g[9]),c[0]=g[0],c[1]=F,c}function O1(c){var g=[];if(c!=null)for(var w in gr(c))g.push(w);return g}function qh(c){return rc.call(c)}function Ju(c,g,w){return g=Qr(g===r?c.length-1:g,0),function(){for(var E=arguments,F=-1,V=Qr(E.length-g,0),K=me(V);++F<V;)K[F]=E[g+F];F=-1;for(var ne=me(g+1);++F<g;)ne[F]=E[F];return ne[g]=w(K),Un(c,this,ne)}}function cn(c,g){return g.length<2?c:Yo(c,zn(g,0,-1))}function Ji(c,g){for(var w=c.length,E=An(g.length,w),F=Yn(c);E--;){var V=g[E];c[E]=Rr(V,w)?F[V]:r}return c}function To(c,g){if(!(g==="constructor"&&typeof c[g]=="function")&&g!="__proto__")return c[g]}var Qh=eo(Nu),_l=mh||function(c,g){return Dr.setTimeout(c,g)},xi=eo(_o);function Kh(c,g,w){var E=g+"";return xi(c,xf(E,N1(A1(E),w)))}function eo(c){var g=0,w=0;return function(){var E=vf(),F=H-(E-w);if(w=E,F>0){if(++g>=J)return arguments[0]}else g=0;return c.apply(r,arguments)}}function ed(c,g){var w=-1,E=c.length,F=E-1;for(g=g===r?E:g;++w<g;){var V=fl(w,F),K=c[V];c[V]=c[w],c[w]=K}return c.length=g,c}var Jh=F1(function(c){var g=[];return c.charCodeAt(0)===46&&g.push(""),c.replace(Ar,function(w,E,F,V){g.push(F?V.replace(Xa,"$1"):E||w)}),g});function to(c){if(typeof c=="string"||io(c))return c;var g=c+"";return g=="0"&&1/c==-ae?"-0":g}function Pa(c){if(c!=null){try{return tc.call(c)}catch{}try{return c+""}catch{}}return""}function N1(c,g){return Pn(X,function(w){var E="_."+w[0];g&w[1]&&!lu(c,E)&&c.push(E)}),c.sort()}function z1(c){if(c instanceof Et)return c.clone();var g=new Dn(c.__wrapped__,c.__chain__);return g.__actions__=Yn(c.__actions__),g.__index__=c.__index__,g.__values__=c.__values__,g}function td(c,g,w){(w?jn(c,g,w):g===r)?g=1:g=Qr(Ot(g),0);var E=c==null?0:c.length;if(!E||g<1)return[];for(var F=0,V=0,K=me(os(E/g));F<E;)K[V++]=zn(c,F,F+=g);return K}function e0(c){for(var g=-1,w=c==null?0:c.length,E=0,F=[];++g<w;){var V=c[g];V&&(F[E++]=V)}return F}function Oi(){var c=arguments.length;if(!c)return[];for(var g=me(c-1),w=arguments[0],E=c;E--;)g[E-1]=arguments[E];return ya(It(w)?Yn(w):[w],Wr(g,1))}var er=Rt(function(c,g){return an(c)?xo(c,Wr(g,1,an,!0)):[]}),un=Rt(function(c,g){var w=Zn(g);return an(w)&&(w=r),an(c)?xo(c,Wr(g,1,an,!0),pt(w,2)):[]}),Kr=Rt(function(c,g){var w=Zn(g);return an(w)&&(w=r),an(c)?xo(c,Wr(g,1,an,!0),r,w):[]});function _n(c,g,w){var E=c==null?0:c.length;return E?(g=w||g===r?1:Ot(g),zn(c,g<0?0:g,E)):[]}function wi(c,g,w){var E=c==null?0:c.length;return E?(g=w||g===r?1:Ot(g),g=E-g,zn(c,0,g<0?0:g)):[]}function Sl(c,g){return c&&c.length?yc(c,pt(g,3),!0,!0):[]}function on(c,g){return c&&c.length?yc(c,pt(g,3),!0):[]}function Lc(c,g,w,E){var F=c==null?0:c.length;return F?(w&&typeof w!="number"&&jn(c,g,w)&&(w=0,E=F),y1(c,g,w,E)):[]}function Aa(c,g,w){var E=c==null?0:c.length;if(!E)return-1;var F=w==null?0:Ot(w);return F<0&&(F=Qr(E+F,0)),cu(c,pt(g,3),F)}function Pc(c,g,w){var E=c==null?0:c.length;if(!E)return-1;var F=E-1;return w!==r&&(F=Ot(w),F=w<0?Qr(E+F,0):An(F,E-1)),cu(c,pt(g,3),F,!0)}function rd(c){var g=c==null?0:c.length;return g?Wr(c,1):[]}function Ac(c){var g=c==null?0:c.length;return g?Wr(c,ae):[]}function li(c,g){var w=c==null?0:c.length;return w?(g=g===r?1:Ot(g),Wr(c,g)):[]}function t0(c){for(var g=-1,w=c==null?0:c.length,E={};++g<w;){var F=c[g];E[F[0]]=F[1]}return E}function ys(c){return c&&c.length?c[0]:r}function Jo(c,g,w){var E=c==null?0:c.length;if(!E)return-1;var F=w==null?0:Ot(w);return F<0&&(F=Qr(E+F,0)),qs(c,g,F)}function nd(c){var g=c==null?0:c.length;return g?zn(c,0,-1):[]}var r0=Rt(function(c){var g=Cr(c,ml);return g.length&&g[0]===c[0]?Au(g):[]}),Da=Rt(function(c){var g=Zn(c),w=Cr(c,ml);return g===Zn(w)?g=r:w.pop(),w.length&&w[0]===c[0]?Au(w,pt(g,2)):[]}),id=Rt(function(c){var g=Zn(c),w=Cr(c,ml);return g=typeof g=="function"?g:r,g&&w.pop(),w.length&&w[0]===c[0]?Au(w,r,g):[]});function Fa(c,g){return c==null?"":xu.call(c,g)}function Zn(c){var g=c==null?0:c.length;return g?c[g-1]:r}function Dc(c,g,w){var E=c==null?0:c.length;if(!E)return-1;var F=E;return w!==r&&(F=Ot(w),F=F<0?Qr(E+F,0):An(F,E-1)),g===g?hf(c,g,F):cu(c,j0,F,!0)}function n0(c,g){return c&&c.length?Ou(c,Ot(g)):r}var od=Rt(Fc);function Fc(c,g){return c&&c.length&&g&&g.length?Xr(c,g):c}function Gn(c,g,w){return c&&c.length&&g&&g.length?Xr(c,g,pt(w,2)):c}function Ra(c,g,w){return c&&c.length&&g&&g.length?Xr(c,g,r,w):c}var ro=Mo(function(c,g){var w=c==null?0:c.length,E=Iu(c,g);return nn(c,Cr(g,function(F){return Rr(F,w)?+F:F}).sort(Nh)),E});function ci(c,g){var w=[];if(!(c&&c.length))return w;var E=-1,F=[],V=c.length;for(g=pt(g,3);++E<V;){var K=c[E];g(K,E,c)&&(w.push(K),F.push(E))}return nn(c,F),w}function ad(c){return c==null?c:wu.call(c)}function i0(c,g,w){var E=c==null?0:c.length;return E?(w&&typeof w!="number"&&jn(c,g,w)?(g=0,w=E):(g=g==null?0:Ot(g),w=w===r?E:Ot(w)),zn(c,g,w)):[]}function o0(c,g){return gl(c,g)}function Cf(c,g,w){return zu(c,g,pt(w,2))}function Oa(c,g){var w=c==null?0:c.length;if(w){var E=gl(c,g);if(E<w&&ea(c[E],g))return E}return-1}function $1(c,g){return gl(c,g,!0)}function a0(c,g,w){return zu(c,g,pt(w,2),!0)}function bs(c,g){var w=c==null?0:c.length;if(w){var E=gl(c,g,!0)-1;if(ea(c[E],g))return E}return-1}function s0(c){return c&&c.length?Ah(c):[]}function xs(c,g){return c&&c.length?Ah(c,pt(g,2)):[]}function B1(c){var g=c==null?0:c.length;return g?zn(c,1,g):[]}function V1(c,g,w){return c&&c.length?(g=w||g===r?1:Ot(g),zn(c,0,g<0?0:g)):[]}function l0(c,g,w){var E=c==null?0:c.length;return E?(g=w||g===r?1:Ot(g),g=E-g,zn(c,g<0?0:g,E)):[]}function sd(c,g){return c&&c.length?yc(c,pt(g,3),!1,!0):[]}function _f(c,g){return c&&c.length?yc(c,pt(g,3)):[]}var Sf=Rt(function(c){return Go(Wr(c,1,an,!0))}),W1=Rt(function(c){var g=Zn(c);return an(g)&&(g=r),Go(Wr(c,1,an,!0),pt(g,2))}),U1=Rt(function(c){var g=Zn(c);return g=typeof g=="function"?g:r,Go(Wr(c,1,an,!0),r,g)});function ws(c){return c&&c.length?Go(c):[]}function kf(c,g){return c&&c.length?Go(c,pt(g,2)):[]}function kl(c,g){return g=typeof g=="function"?g:r,c&&c.length?Go(c,r,g):[]}function ld(c){if(!(c&&c.length))return[];var g=0;return c=ma(c,function(w){if(an(w))return g=Qr(w.length,g),!0}),hh(g,function(w){return Cr(c,uh(w))})}function zr(c,g){if(!(c&&c.length))return[];var w=ld(c);return g==null?w:Cr(w,function(E){return Un(g,r,E)})}var Mf=Rt(function(c,g){return an(c)?xo(c,g):[]}),H1=Rt(function(c){return Bu(ma(c,an))}),Tf=Rt(function(c){var g=Zn(c);return an(g)&&(g=r),Bu(ma(c,an),pt(g,2))}),Ef=Rt(function(c){var g=Zn(c);return g=typeof g=="function"?g:r,Bu(ma(c,an),r,g)}),Y1=Rt(ld);function X1(c,g){return bc(c||[],g||[],us)}function If(c,g){return bc(c||[],g||[],gs)}var Ni=Rt(function(c){var g=c.length,w=g>1?c[g-1]:r;return w=typeof w=="function"?(c.pop(),w):r,zr(c,w)});function cd(c){var g=N(c);return g.__chain__=!0,g}function Lf(c,g){return g(c),c}function no(c,g){return g(c)}var ud=Mo(function(c){var g=c.length,w=g?c[0]:0,E=this.__wrapped__,F=function(V){return Iu(V,c)};return g>1||this.__actions__.length||!(E instanceof Et)||!Rr(w)?this.thru(F):(E=E.slice(w,+w+(g?1:0)),E.__actions__.push({func:no,args:[F],thisArg:r}),new Dn(E,this.__chain__).thru(function(V){return g&&!V.length&&V.push(r),V}))});function Cs(){return cd(this)}function dd(){return new Dn(this.value(),this.__chain__)}function c0(){this.__values__===r&&(this.__values__=Bv(this.value()));var c=this.__index__>=this.__values__.length,g=c?r:this.__values__[this.__index__++];return{done:c,value:g}}function u0(){return this}function Pf(c){for(var g,w=this;w instanceof vo;){var E=z1(w);E.__index__=0,E.__values__=r,g?F.__wrapped__=E:g=E;var F=E;w=w.__wrapped__}return F.__wrapped__=c,g}function d0(){var c=this.__wrapped__;if(c instanceof Et){var g=c;return this.__actions__.length&&(g=new Et(this)),g=g.reverse(),g.__actions__.push({func:no,args:[ad],thisArg:r}),new Dn(g,this.__chain__)}return this.thru(ad)}function Af(){return vl(this.__wrapped__,this.__actions__)}var j1=Uu(function(c,g,w){ar.call(c,w)?++c[w]:bo(c,w,1)});function Z1(c,g,w){var E=It(c)?oh:hc;return w&&jn(c,g,w)&&(g=r),E(c,pt(g,3))}function hd(c,g){var w=It(c)?ma:_h;return w(c,pt(g,3))}var pd=ms(Aa),G1=ms(Pc);function h0(c,g){return Wr(_s(c,g),1)}function Df(c,g){return Wr(_s(c,g),ae)}function q1(c,g,w){return w=w===r?1:Ot(w),Wr(_s(c,g),w)}function fd(c,g){var w=It(c)?Pn:wo;return w(c,pt(g,3))}function Rc(c,g){var w=It(c)?su:m1;return w(c,pt(g,3))}var p0=Uu(function(c,g,w){ar.call(c,w)?c[w].push(g):bo(c,w,[g])});function gd(c,g,w,E){c=zi(c)?c:yd(c),w=w&&!E?Ot(w):0;var F=c.length;return w<0&&(w=Qr(F+w,0)),J1(c)?w<=F&&c.indexOf(g,w)>-1:!!F&&qs(c,g,w)>-1}var Q1=Rt(function(c,g,w){var E=-1,F=typeof g=="function",V=zi(c)?me(c.length):[];return wo(c,function(K){V[++E]=F?Un(g,K,w):Ai(K,g,w)}),V}),Ff=Uu(function(c,g,w){bo(c,w,g)});function _s(c,g){var w=It(c)?Cr:Th;return w(c,pt(g,3))}function Rf(c,g,w,E){return c==null?[]:(It(g)||(g=g==null?[]:[g]),w=E?r:w,It(w)||(w=w==null?[]:[w]),vc(c,g,w))}var Oc=Uu(function(c,g,w){c[w?0:1].push(g)},function(){return[[],[]]});function Of(c,g,w){var E=It(c)?sh:G0,F=arguments.length<3;return E(c,pt(g,4),w,F,wo)}function vd(c,g,w){var E=It(c)?nf:G0,F=arguments.length<3;return E(c,pt(g,4),w,F,m1)}function a(c,g){var w=It(c)?ma:_h;return w(c,ze(pt(g,3)))}function l(c){var g=It(c)?yo:Nn;return g(c)}function v(c,g,w){(w?jn(c,g,w):g===r)?g=1:g=Ot(g);var E=It(c)?cs:Lh;return E(c,g)}function y(c){var g=It(c)?g1:Fi;return g(c)}function S(c){if(c==null)return 0;if(zi(c))return J1(c)?ns(c):c.length;var g=wn(c);return g==nt||g==gt?c.size:Zo(c).length}function T(c,g,w){var E=It(c)?lh:Ph;return w&&jn(c,g,w)&&(g=r),E(c,pt(g,3))}var O=Rt(function(c,g){if(c==null)return[];var w=g.length;return w>1&&jn(c,g[0],g[1])?g=[]:w>2&&jn(g[0],g[1],g[2])&&(g=[g[0]]),vc(c,Wr(g,1),[])}),Q=Mr||function(){return Dr.Date.now()};function te(c,g){if(typeof g!="function")throw new Ti(s);return c=Ot(c),function(){if(--c<1)return g.apply(this,arguments)}}function be(c,g,w){return g=w?r:g,g=c&&g==null?c.length:g,ko(c,D,r,r,r,r,g)}function Le(c,g){var w;if(typeof g!="function")throw new Ti(s);return c=Ot(c),function(){return--c>0&&(w=g.apply(this,arguments)),c<=1&&(g=r),w}}var Re=Rt(function(c,g,w){var E=_;if(w.length){var F=Mi(w,Qo(Re));E|=P}return ko(c,E,g,w,F)}),Ie=Rt(function(c,g,w){var E=_|k;if(w.length){var F=Mi(w,Qo(Ie));E|=P}return ko(g,E,c,w,F)});function Xe(c,g,w){g=w?r:g;var E=ko(c,L,r,r,r,r,r,g);return E.placeholder=Xe.placeholder,E}function Ke(c,g,w){g=w?r:g;var E=ko(c,A,r,r,r,r,r,g);return E.placeholder=Ke.placeholder,E}function et(c,g,w){var E,F,V,K,ne,se,ke=0,Me=!1,Ae=!1,He=!0;if(typeof c!="function")throw new Ti(s);g=Eo(g)||0,Zr(w)&&(Me=!!w.leading,Ae="maxWait"in w,V=Ae?Qr(Eo(w.maxWait)||0,g):V,He="trailing"in w?!!w.trailing:He);function ot(sn){var ta=E,Ms=F;return E=F=r,ke=sn,K=c.apply(Ms,ta),K}function mt(sn){return ke=sn,ne=_l(Ut,g),Me?ot(sn):K}function Nt(sn){var ta=sn-se,Ms=sn-ke,Jv=g-ta;return Ae?An(Jv,V-Ms):Jv}function yt(sn){var ta=sn-se,Ms=sn-ke;return se===r||ta>=g||ta<0||Ae&&Ms>=V}function Ut(){var sn=Q();if(yt(sn))return tr(sn);ne=_l(Ut,Nt(sn))}function tr(sn){return ne=r,He&&E?ot(sn):(E=F=r,K)}function oo(){ne!==r&&Rh(ne),ke=0,E=se=F=ne=r}function Ci(){return ne===r?K:tr(Q())}function ao(){var sn=Q(),ta=yt(sn);if(E=arguments,F=this,se=sn,ta){if(ne===r)return mt(se);if(Ae)return Rh(ne),ne=_l(Ut,g),ot(se)}return ne===r&&(ne=_l(Ut,g)),K}return ao.cancel=oo,ao.flush=Ci,ao}var jr=Rt(function(c,g){return Ch(c,1,g)}),he=Rt(function(c,g,w){return Ch(c,Eo(g)||0,w)});function ie(c){return ko(c,z)}function ge(c,g){if(typeof c!="function"||g!=null&&typeof g!="function")throw new Ti(s);var w=function(){var E=arguments,F=g?g.apply(this,E):E[0],V=w.cache;if(V.has(F))return V.get(F);var K=c.apply(this,E);return w.cache=V.set(F,K)||V,K};return w.cache=new(ge.Cache||Ei),w}ge.Cache=Ei;function ze(c){if(typeof c!="function")throw new Ti(s);return function(){var g=arguments;switch(g.length){case 0:return!c.call(this);case 1:return!c.call(this,g[0]);case 2:return!c.call(this,g[0],g[1]);case 3:return!c.call(this,g[0],g[1],g[2])}return!c.apply(this,g)}}function it(c){return Le(2,c)}var dt=w1(function(c,g){g=g.length==1&&It(g[0])?Cr(g[0],gi(pt())):Cr(Wr(g,1),gi(pt()));var w=g.length;return Rt(function(E){for(var F=-1,V=An(E.length,w);++F<V;)E[F]=g[F].call(this,E[F]);return Un(c,this,E)})}),lt=Rt(function(c,g){var w=Mi(g,Qo(lt));return ko(c,P,r,g,w)}),vt=Rt(function(c,g){var w=Mi(g,Qo(vt));return ko(c,W,r,g,w)}),dn=Mo(function(c,g){return ko(c,$,r,r,r,g)});function sr(c,g){if(typeof c!="function")throw new Ti(s);return g=g===r?g:Ot(g),Rt(c,g)}function Na(c,g){if(typeof c!="function")throw new Ti(s);return g=g==null?0:Qr(Ot(g),0),Rt(function(w){var E=w[g],F=qo(w,0,g);return E&&ya(F,E),Un(c,this,F)})}function Nf(c,g,w){var E=!0,F=!0;if(typeof c!="function")throw new Ti(s);return Zr(w)&&(E="leading"in w?!!w.leading:E,F="trailing"in w?!!w.trailing:F),et(c,g,{leading:E,maxWait:g,trailing:F})}function e9(c){return be(c,1)}function t9(c,g){return lt(Vu(g),c)}function r9(){if(!arguments.length)return[];var c=arguments[0];return It(c)?c:[c]}function n9(c){return ai(c,x)}function i9(c,g){return g=typeof g=="function"?g:r,ai(c,x,g)}function o9(c){return ai(c,f|x)}function a9(c,g){return g=typeof g=="function"?g:r,ai(c,f|x,g)}function s9(c,g){return g==null||dc(c,g,$n(g))}function ea(c,g){return c===g||c!==c&&g!==g}var l9=Zu(Ta),c9=Zu(function(c,g){return c>=g}),Nc=Du((function(){return arguments})())?Du:function(c){return Jr(c)&&ar.call(c,"callee")&&!mu.call(c,"callee")},It=me.isArray,u9=nh?gi(nh):b1;function zi(c){return c!=null&&K1(c.length)&&!Ss(c)}function an(c){return Jr(c)&&zi(c)}function d9(c){return c===!0||c===!1||Jr(c)&&bn(c)==Te}var Ml=yh||Zf,h9=ri?gi(ri):jo;function p9(c){return Jr(c)&&c.nodeType===1&&!f0(c)}function f9(c){if(c==null)return!0;if(zi(c)&&(It(c)||typeof c=="string"||typeof c.splice=="function"||Ml(c)||md(c)||Nc(c)))return!c.length;var g=wn(c);if(g==nt||g==gt)return!c.size;if(Ko(c))return!Zo(c).length;for(var w in c)if(ar.call(c,w))return!1;return!0}function g9(c,g){return Di(c,g)}function v9(c,g,w){w=typeof w=="function"?w:r;var E=w?w(c,g):r;return E===r?Di(c,g,r,w):!!E}function zf(c){if(!Jr(c))return!1;var g=bn(c);return g==Ee||g==Ce||typeof c.message=="string"&&typeof c.name=="string"&&!f0(c)}function m9(c){return typeof c=="number"&&rl(c)}function Ss(c){if(!Zr(c))return!1;var g=bn(c);return g==Je||g==Qe||g==Fe||g==Kt}function Ov(c){return typeof c=="number"&&c==Ot(c)}function K1(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=re}function Zr(c){var g=typeof c;return c!=null&&(g=="object"||g=="function")}function Jr(c){return c!=null&&typeof c=="object"}var Nv=rs?gi(rs):x1;function y9(c,g){return c===g||hl(c,g,Mc(g))}function b9(c,g,w){return w=typeof w=="function"?w:r,hl(c,g,Mc(g),w)}function x9(c){return zv(c)&&c!=+c}function w9(c){if(wf(c))throw new xt(o);return kh(c)}function C9(c){return c===null}function _9(c){return c==null}function zv(c){return typeof c=="number"||Jr(c)&&bn(c)==Ue}function f0(c){if(!Jr(c)||bn(c)!=ut)return!1;var g=Gi(c);if(g===null)return!0;var w=ar.call(g,"constructor")&&g.constructor;return typeof w=="function"&&w instanceof w&&tc.call(w)==gu}var $f=au?gi(au):fc;function S9(c){return Ov(c)&&c>=-re&&c<=re}var $v=Gs?gi(Gs):Co;function J1(c){return typeof c=="string"||!It(c)&&Jr(c)&&bn(c)==jt}function io(c){return typeof c=="symbol"||Jr(c)&&bn(c)==ln}var md=H0?gi(H0):gc;function k9(c){return c===r}function M9(c){return Jr(c)&&wn(c)==dr}function T9(c){return Jr(c)&&bn(c)==Ft}var E9=Zu(Ea),I9=Zu(function(c,g){return c<=g});function Bv(c){if(!c)return[];if(zi(c))return J1(c)?vi(c):Yn(c);if(Wo&&c[Wo])return uf(c[Wo]());var g=wn(c),w=g==nt?du:g==gt?ba:yd;return w(c)}function ks(c){if(!c)return c===0?c:0;if(c=Eo(c),c===ae||c===-ae){var g=c<0?-1:1;return g*ve}return c===c?c:0}function Ot(c){var g=ks(c),w=g%1;return g===g?w?g-w:g:0}function Vv(c){return c?Ho(Ot(c),0,Y):0}function Eo(c){if(typeof c=="number")return c;if(io(c))return pe;if(Zr(c)){var g=typeof c.valueOf=="function"?c.valueOf():c;c=Zr(g)?g+"":g}if(typeof c!="string")return c===0?c:+c;c=q0(c);var w=ua.test(c);return w||Za.test(c)?iu(c.slice(2),w?2:8):Bs.test(c)?pe:+c}function Wv(c){return Qi(c,$i(c))}function L9(c){return c?Ho(Ot(c),-re,re):c===0?c:0}function vr(c){return c==null?"":si(c)}var P9=yl(function(c,g){if(Ko(g)||zi(g)){Qi(g,$n(g),c);return}for(var w in g)ar.call(g,w)&&us(c,w,g[w])}),Uv=yl(function(c,g){Qi(g,$i(g),c)}),ep=yl(function(c,g,w,E){Qi(g,$i(g),c,E)}),A9=yl(function(c,g,w,E){Qi(g,$n(g),c,E)}),D9=Mo(Iu);function F9(c,g){var w=sl(c);return g==null?w:Er(w,g)}var R9=Rt(function(c,g){c=gr(c);var w=-1,E=g.length,F=E>2?g[2]:r;for(F&&jn(g[0],g[1],F)&&(E=1);++w<E;)for(var V=g[w],K=$i(V),ne=-1,se=K.length;++ne<se;){var ke=K[ne],Me=c[ke];(Me===r||ea(Me,fo[ke])&&!ar.call(c,ke))&&(c[ke]=V[ke])}return c}),O9=Rt(function(c){return c.push(r,Hh),Un(Hv,r,c)});function N9(c,g){return X0(c,pt(g,3),bi)}function z9(c,g){return X0(c,pt(g,3),Ma)}function $9(c,g){return c==null?c:Lu(c,pt(g,3),$i)}function B9(c,g){return c==null?c:pc(c,pt(g,3),$i)}function V9(c,g){return c&&bi(c,pt(g,3))}function W9(c,g){return c&&Ma(c,pt(g,3))}function U9(c){return c==null?[]:dl(c,$n(c))}function H9(c){return c==null?[]:dl(c,$i(c))}function Bf(c,g,w){var E=c==null?r:Yo(c,g);return E===r?w:E}function Y9(c,g){return c!=null&&Gh(c,g,Pi)}function Vf(c,g){return c!=null&&Gh(c,g,hs)}var X9=T1(function(c,g,w){g!=null&&typeof g.toString!="function"&&(g=rc.call(g)),c[g]=w},Uf(Bi)),j9=T1(function(c,g,w){g!=null&&typeof g.toString!="function"&&(g=rc.call(g)),ar.call(c,g)?c[g].push(w):c[g]=[w]},pt),Z9=Rt(Ai);function $n(c){return zi(c)?mo(c):Zo(c)}function $i(c){return zi(c)?mo(c,!0):Mh(c)}function G9(c,g){var w={};return g=pt(g,3),bi(c,function(E,F,V){bo(w,g(E,F,V),E)}),w}function q9(c,g){var w={};return g=pt(g,3),bi(c,function(E,F,V){bo(w,F,g(E,F,V))}),w}var Q9=yl(function(c,g,w){ps(c,g,w)}),Hv=yl(function(c,g,w,E){ps(c,g,w,E)}),K9=Mo(function(c,g){var w={};if(c==null)return w;var E=!1;g=Cr(g,function(V){return V=So(V,c),E||(E=V.length>1),V}),Qi(c,Sc(c),w),E&&(w=ai(w,f|m|x,Yh));for(var F=g.length;F--;)$u(w,g[F]);return w});function J9(c,g){return Yv(c,ze(pt(g)))}var e3=Mo(function(c,g){return c==null?{}:Ih(c,g)});function Yv(c,g){if(c==null)return{};var w=Cr(Sc(c),function(E){return[E]});return g=pt(g),Ia(c,w,function(E,F){return g(E,F[0])})}function t3(c,g,w){g=So(g,c);var E=-1,F=g.length;for(F||(F=1,c=r);++E<F;){var V=c==null?r:c[to(g[E])];V===r&&(E=F,V=w),c=Ss(V)?V.call(c):V}return c}function r3(c,g,w){return c==null?c:gs(c,g,w)}function n3(c,g,w,E){return E=typeof E=="function"?E:r,c==null?c:gs(c,g,w,E)}var Xv=Wh($n),jv=Wh($i);function i3(c,g,w){var E=It(c),F=E||Ml(c)||md(c);if(g=pt(g,4),w==null){var V=c&&c.constructor;F?w=E?new V:[]:Zr(c)?w=Ss(V)?sl(Gi(c)):{}:w={}}return(F?Pn:bi)(c,function(K,ne,se){return g(w,K,ne,se)}),w}function o3(c,g){return c==null?!0:$u(c,g)}function a3(c,g,w){return c==null?c:Fh(c,g,Vu(w))}function s3(c,g,w,E){return E=typeof E=="function"?E:r,c==null?c:Fh(c,g,Vu(w),E)}function yd(c){return c==null?[]:Jl(c,$n(c))}function l3(c){return c==null?[]:Jl(c,$i(c))}function c3(c,g,w){return w===r&&(w=g,g=r),w!==r&&(w=Eo(w),w=w===w?w:0),g!==r&&(g=Eo(g),g=g===g?g:0),Ho(Eo(c),g,w)}function u3(c,g,w){return g=ks(g),w===r?(w=g,g=0):w=ks(w),c=Eo(c),Sh(c,g,w)}function d3(c,g,w){if(w&&typeof w!="boolean"&&jn(c,g,w)&&(g=w=r),w===r&&(typeof g=="boolean"?(w=g,g=r):typeof c=="boolean"&&(w=c,c=r)),c===r&&g===r?(c=0,g=1):(c=ks(c),g===r?(g=c,c=0):g=ks(g)),c>g){var E=c;c=g,g=E}if(w||c%1||g%1){var F=ac();return An(c+F*(g-c+th("1e-"+((F+"").length-1))),g)}return fl(c,g)}var h3=vs(function(c,g,w){return g=g.toLowerCase(),c+(w?Zv(g):g)});function Zv(c){return Wf(vr(c).toLowerCase())}function Gv(c){return c=vr(c),c&&c.replace(Vl,J0).replace(Gl,"")}function p3(c,g,w){c=vr(c),g=si(g);var E=c.length;w=w===r?E:Ho(Ot(w),0,E);var F=w;return w-=g.length,w>=0&&c.slice(w,F)==g}function f3(c){return c=vr(c),c&&Ur.test(c)?c.replace(cr,e1):c}function g3(c){return c=vr(c),c&&fr.test(c)?c.replace(wr,"\\$&"):c}var v3=vs(function(c,g,w){return c+(w?"-":"")+g.toLowerCase()}),m3=vs(function(c,g,w){return c+(w?" ":"")+g.toLowerCase()}),y3=$h("toLowerCase");function b3(c,g,w){c=vr(c),g=Ot(g);var E=g?ns(c):0;if(!g||E>=g)return c;var F=(g-E)/2;return Cc(xa(F),w)+c+Cc(os(F),w)}function x3(c,g,w){c=vr(c),g=Ot(g);var E=g?ns(c):0;return g&&E<g?c+Cc(g-E,w):c}function w3(c,g,w){c=vr(c),g=Ot(g);var E=g?ns(c):0;return g&&E<g?Cc(g-E,w)+c:c}function C3(c,g,w){return w||g==null?g=0:g&&(g=+g),c1(vr(c).replace(tn,""),g||0)}function _3(c,g,w){return(w?jn(c,g,w):g===r)?g=1:g=Ot(g),fs(vr(c),g)}function S3(){var c=arguments,g=vr(c[0]);return c.length<3?g:g.replace(c[1],c[2])}var k3=vs(function(c,g,w){return c+(w?"_":"")+g.toLowerCase()});function M3(c,g,w){return w&&typeof w!="number"&&jn(c,g,w)&&(g=w=r),w=w===r?Y:w>>>0,w?(c=vr(c),c&&(typeof g=="string"||g!=null&&!$f(g))&&(g=si(g),!g&&Ks(c))?qo(vi(c),0,w):c.split(g,w)):[]}var T3=vs(function(c,g,w){return c+(w?" ":"")+Wf(g)});function E3(c,g,w){return c=vr(c),w=w==null?0:Ho(Ot(w),0,c.length),g=si(g),c.slice(w,w+g.length)==g}function I3(c,g,w){var E=N.templateSettings;w&&jn(c,g,w)&&(g=r),c=vr(c),g=ep({},g,E,Uh);var F=ep({},g.imports,E.imports,Uh),V=$n(F),K=Jl(F,V),ne,se,ke=0,Me=g.interpolate||Ga,Ae="__p += '",He=ec((g.escape||Ga).source+"|"+Me.source+"|"+(Me===Pt?fi:Ga).source+"|"+(g.evaluate||Ga).source+"|$","g"),ot="//# sourceURL="+(ar.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ru+"]")+`
`;c.replace(He,function(yt,Ut,tr,oo,Ci,ao){return tr||(tr=oo),Ae+=c.slice(ke,ao).replace(Gc,t1),Ut&&(ne=!0,Ae+=`' +
__e(`+Ut+`) +
'`),Ci&&(se=!0,Ae+=`';
`+Ci+`;
__p += '`),tr&&(Ae+=`' +
((__t = (`+tr+`)) == null ? '' : __t) +
'`),ke=ao+yt.length,yt}),Ae+=`';
`;var mt=ar.call(g,"variable")&&g.variable;if(!mt)Ae=`with (obj) {
`+Ae+`
}
`;else if(lo.test(mt))throw new xt(u);Ae=(se?Ae.replace(Wt,""):Ae).replace(Gt,"$1").replace(yr,"$1;"),Ae="function("+(mt||"obj")+`) {
`+(mt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ne?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ae+`return __p
}`;var Nt=Qv(function(){return or(V,ot+"return "+Ae).apply(r,K)});if(Nt.source=Ae,zf(Nt))throw Nt;return Nt}function L3(c){return vr(c).toLowerCase()}function P3(c){return vr(c).toUpperCase()}function A3(c,g,w){if(c=vr(c),c&&(w||g===r))return q0(c);if(!c||!(g=si(g)))return c;var E=vi(c),F=vi(g),V=Q0(E,F),K=ph(E,F)+1;return qo(E,V,K).join("")}function D3(c,g,w){if(c=vr(c),c&&(w||g===r))return c.slice(0,pu(c)+1);if(!c||!(g=si(g)))return c;var E=vi(c),F=ph(E,vi(g))+1;return qo(E,0,F).join("")}function F3(c,g,w){if(c=vr(c),c&&(w||g===r))return c.replace(tn,"");if(!c||!(g=si(g)))return c;var E=vi(c),F=Q0(E,vi(g));return qo(E,F).join("")}function R3(c,g){var w=B,E=Z;if(Zr(g)){var F="separator"in g?g.separator:F;w="length"in g?Ot(g.length):w,E="omission"in g?si(g.omission):E}c=vr(c);var V=c.length;if(Ks(c)){var K=vi(c);V=K.length}if(w>=V)return c;var ne=w-ns(E);if(ne<1)return E;var se=K?qo(K,0,ne).join(""):c.slice(0,ne);if(F===r)return se+E;if(K&&(ne+=se.length-ne),$f(F)){if(c.slice(ne).search(F)){var ke,Me=se;for(F.global||(F=ec(F.source,vr(ca.exec(F))+"g")),F.lastIndex=0;ke=F.exec(Me);)var Ae=ke.index;se=se.slice(0,Ae===r?ne:Ae)}}else if(c.indexOf(si(F),ne)!=ne){var He=se.lastIndexOf(F);He>-1&&(se=se.slice(0,He))}return se+E}function O3(c){return c=vr(c),c&&Jn.test(c)?c.replace(pr,r1):c}var N3=vs(function(c,g,w){return c+(w?" ":"")+g.toUpperCase()}),Wf=$h("toUpperCase");function qv(c,g,w){return c=vr(c),g=w?r:g,g===r?cf(c)?pf(c):af(c):c.match(g)||[]}var Qv=Rt(function(c,g){try{return Un(c,r,g)}catch(w){return zf(w)?w:new xt(w)}}),z3=Mo(function(c,g){return Pn(g,function(w){w=to(w),bo(c,w,Re(c[w],c))}),c});function $3(c){var g=c==null?0:c.length,w=pt();return c=g?Cr(c,function(E){if(typeof E[1]!="function")throw new Ti(s);return[w(E[0]),E[1]]}):[],Rt(function(E){for(var F=-1;++F<g;){var V=c[F];if(Un(V[0],this,E))return Un(V[1],this,E)}})}function B3(c){return v1(ai(c,f))}function Uf(c){return function(){return c}}function V3(c,g){return c==null||c!==c?g:c}var W3=Xu(),U3=Xu(!0);function Bi(c){return c}function Hf(c){return pl(typeof c=="function"?c:ai(c,f))}function H3(c){return Ru(ai(c,f))}function Y3(c,g){return Fr(c,ai(g,f))}var X3=Rt(function(c,g){return function(w){return Ai(w,c,g)}}),j3=Rt(function(c,g){return function(w){return Ai(c,w,g)}});function Yf(c,g,w){var E=$n(g),F=dl(g,E);w==null&&!(Zr(g)&&(F.length||!E.length))&&(w=g,g=c,c=this,F=dl(g,$n(g)));var V=!(Zr(w)&&"chain"in w)||!!w.chain,K=Ss(c);return Pn(F,function(ne){var se=g[ne];c[ne]=se,K&&(c.prototype[ne]=function(){var ke=this.__chain__;if(V||ke){var Me=c(this.__wrapped__),Ae=Me.__actions__=Yn(this.__actions__);return Ae.push({func:se,args:arguments,thisArg:c}),Me.__chain__=ke,Me}return se.apply(c,ya([this.value()],arguments))})}),c}function Z3(){return Dr._===this&&(Dr._=o1),this}function Xf(){}function G3(c){return c=Ot(c),Rt(function(g){return Ou(g,c)})}var q3=ju(Cr),Q3=ju(oh),K3=ju(lh);function Kv(c){return Ge(c)?uh(to(c)):Nr(c)}function J3(c){return function(g){return c==null?r:Yo(c,g)}}var e6=Vh(),t6=Vh(!0);function jf(){return[]}function Zf(){return!1}function r6(){return{}}function n6(){return""}function i6(){return!0}function o6(c,g){if(c=Ot(c),c<1||c>re)return[];var w=Y,E=An(c,Y);g=pt(g),c-=Y;for(var F=hh(E,g);++w<c;)g(w);return F}function a6(c){return It(c)?Cr(c,to):io(c)?[c]:Yn(Jh(vr(c)))}function s6(c){var g=++tl;return vr(c)+g}var l6=wc(function(c,g){return c+g},0),c6=xn("ceil"),u6=wc(function(c,g){return c/g},1),d6=xn("floor");function h6(c){return c&&c.length?ds(c,Bi,Ta):r}function p6(c,g){return c&&c.length?ds(c,pt(g,2),Ta):r}function f6(c){return Z0(c,Bi)}function g6(c,g){return Z0(c,pt(g,2))}function v6(c){return c&&c.length?ds(c,Bi,Ea):r}function m6(c,g){return c&&c.length?ds(c,pt(g,2),Ea):r}var y6=wc(function(c,g){return c*g},1),b6=xn("round"),x6=wc(function(c,g){return c-g},0);function w6(c){return c&&c.length?dh(c,Bi):0}function C6(c,g){return c&&c.length?dh(c,pt(g,2)):0}return N.after=te,N.ary=be,N.assign=P9,N.assignIn=Uv,N.assignInWith=ep,N.assignWith=A9,N.at=D9,N.before=Le,N.bind=Re,N.bindAll=z3,N.bindKey=Ie,N.castArray=r9,N.chain=cd,N.chunk=td,N.compact=e0,N.concat=Oi,N.cond=$3,N.conforms=B3,N.constant=Uf,N.countBy=j1,N.create=F9,N.curry=Xe,N.curryRight=Ke,N.debounce=et,N.defaults=R9,N.defaultsDeep=O9,N.defer=jr,N.delay=he,N.difference=er,N.differenceBy=un,N.differenceWith=Kr,N.drop=_n,N.dropRight=wi,N.dropRightWhile=Sl,N.dropWhile=on,N.fill=Lc,N.filter=hd,N.flatMap=h0,N.flatMapDeep=Df,N.flatMapDepth=q1,N.flatten=rd,N.flattenDeep=Ac,N.flattenDepth=li,N.flip=ie,N.flow=W3,N.flowRight=U3,N.fromPairs=t0,N.functions=U9,N.functionsIn=H9,N.groupBy=p0,N.initial=nd,N.intersection=r0,N.intersectionBy=Da,N.intersectionWith=id,N.invert=X9,N.invertBy=j9,N.invokeMap=Q1,N.iteratee=Hf,N.keyBy=Ff,N.keys=$n,N.keysIn=$i,N.map=_s,N.mapKeys=G9,N.mapValues=q9,N.matches=H3,N.matchesProperty=Y3,N.memoize=ge,N.merge=Q9,N.mergeWith=Hv,N.method=X3,N.methodOf=j3,N.mixin=Yf,N.negate=ze,N.nthArg=G3,N.omit=K9,N.omitBy=J9,N.once=it,N.orderBy=Rf,N.over=q3,N.overArgs=dt,N.overEvery=Q3,N.overSome=K3,N.partial=lt,N.partialRight=vt,N.partition=Oc,N.pick=e3,N.pickBy=Yv,N.property=Kv,N.propertyOf=J3,N.pull=od,N.pullAll=Fc,N.pullAllBy=Gn,N.pullAllWith=Ra,N.pullAt=ro,N.range=e6,N.rangeRight=t6,N.rearg=dn,N.reject=a,N.remove=ci,N.rest=sr,N.reverse=ad,N.sampleSize=v,N.set=r3,N.setWith=n3,N.shuffle=y,N.slice=i0,N.sortBy=O,N.sortedUniq=s0,N.sortedUniqBy=xs,N.split=M3,N.spread=Na,N.tail=B1,N.take=V1,N.takeRight=l0,N.takeRightWhile=sd,N.takeWhile=_f,N.tap=Lf,N.throttle=Nf,N.thru=no,N.toArray=Bv,N.toPairs=Xv,N.toPairsIn=jv,N.toPath=a6,N.toPlainObject=Wv,N.transform=i3,N.unary=e9,N.union=Sf,N.unionBy=W1,N.unionWith=U1,N.uniq=ws,N.uniqBy=kf,N.uniqWith=kl,N.unset=o3,N.unzip=ld,N.unzipWith=zr,N.update=a3,N.updateWith=s3,N.values=yd,N.valuesIn=l3,N.without=Mf,N.words=qv,N.wrap=t9,N.xor=H1,N.xorBy=Tf,N.xorWith=Ef,N.zip=Y1,N.zipObject=X1,N.zipObjectDeep=If,N.zipWith=Ni,N.entries=Xv,N.entriesIn=jv,N.extend=Uv,N.extendWith=ep,Yf(N,N),N.add=l6,N.attempt=Qv,N.camelCase=h3,N.capitalize=Zv,N.ceil=c6,N.clamp=c3,N.clone=n9,N.cloneDeep=o9,N.cloneDeepWith=a9,N.cloneWith=i9,N.conformsTo=s9,N.deburr=Gv,N.defaultTo=V3,N.divide=u6,N.endsWith=p3,N.eq=ea,N.escape=f3,N.escapeRegExp=g3,N.every=Z1,N.find=pd,N.findIndex=Aa,N.findKey=N9,N.findLast=G1,N.findLastIndex=Pc,N.findLastKey=z9,N.floor=d6,N.forEach=fd,N.forEachRight=Rc,N.forIn=$9,N.forInRight=B9,N.forOwn=V9,N.forOwnRight=W9,N.get=Bf,N.gt=l9,N.gte=c9,N.has=Y9,N.hasIn=Vf,N.head=ys,N.identity=Bi,N.includes=gd,N.indexOf=Jo,N.inRange=u3,N.invoke=Z9,N.isArguments=Nc,N.isArray=It,N.isArrayBuffer=u9,N.isArrayLike=zi,N.isArrayLikeObject=an,N.isBoolean=d9,N.isBuffer=Ml,N.isDate=h9,N.isElement=p9,N.isEmpty=f9,N.isEqual=g9,N.isEqualWith=v9,N.isError=zf,N.isFinite=m9,N.isFunction=Ss,N.isInteger=Ov,N.isLength=K1,N.isMap=Nv,N.isMatch=y9,N.isMatchWith=b9,N.isNaN=x9,N.isNative=w9,N.isNil=_9,N.isNull=C9,N.isNumber=zv,N.isObject=Zr,N.isObjectLike=Jr,N.isPlainObject=f0,N.isRegExp=$f,N.isSafeInteger=S9,N.isSet=$v,N.isString=J1,N.isSymbol=io,N.isTypedArray=md,N.isUndefined=k9,N.isWeakMap=M9,N.isWeakSet=T9,N.join=Fa,N.kebabCase=v3,N.last=Zn,N.lastIndexOf=Dc,N.lowerCase=m3,N.lowerFirst=y3,N.lt=E9,N.lte=I9,N.max=h6,N.maxBy=p6,N.mean=f6,N.meanBy=g6,N.min=v6,N.minBy=m6,N.stubArray=jf,N.stubFalse=Zf,N.stubObject=r6,N.stubString=n6,N.stubTrue=i6,N.multiply=y6,N.nth=n0,N.noConflict=Z3,N.noop=Xf,N.now=Q,N.pad=b3,N.padEnd=x3,N.padStart=w3,N.parseInt=C3,N.random=d3,N.reduce=Of,N.reduceRight=vd,N.repeat=_3,N.replace=S3,N.result=t3,N.round=b6,N.runInContext=oe,N.sample=l,N.size=S,N.snakeCase=k3,N.some=T,N.sortedIndex=o0,N.sortedIndexBy=Cf,N.sortedIndexOf=Oa,N.sortedLastIndex=$1,N.sortedLastIndexBy=a0,N.sortedLastIndexOf=bs,N.startCase=T3,N.startsWith=E3,N.subtract=x6,N.sum=w6,N.sumBy=C6,N.template=I3,N.times=o6,N.toFinite=ks,N.toInteger=Ot,N.toLength=Vv,N.toLower=L3,N.toNumber=Eo,N.toSafeInteger=L9,N.toString=vr,N.toUpper=P3,N.trim=A3,N.trimEnd=D3,N.trimStart=F3,N.truncate=R3,N.unescape=O3,N.uniqueId=s6,N.upperCase=N3,N.upperFirst=Wf,N.each=fd,N.eachRight=Rc,N.first=ys,Yf(N,(function(){var c={};return bi(N,function(g,w){ar.call(N.prototype,w)||(c[w]=g)}),c})(),{chain:!1}),N.VERSION=n,Pn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){N[c].placeholder=N}),Pn(["drop","take"],function(c,g){Et.prototype[c]=function(w){w=w===r?1:Qr(Ot(w),0);var E=this.__filtered__&&!g?new Et(this):this.clone();return E.__filtered__?E.__takeCount__=An(w,E.__takeCount__):E.__views__.push({size:An(w,Y),type:c+(E.__dir__<0?"Right":"")}),E},Et.prototype[c+"Right"]=function(w){return this.reverse()[c](w).reverse()}}),Pn(["filter","map","takeWhile"],function(c,g){var w=g+1,E=w==ee||w==ce;Et.prototype[c]=function(F){var V=this.clone();return V.__iteratees__.push({iteratee:pt(F,3),type:w}),V.__filtered__=V.__filtered__||E,V}}),Pn(["head","last"],function(c,g){var w="take"+(g?"Right":"");Et.prototype[c]=function(){return this[w](1).value()[0]}}),Pn(["initial","tail"],function(c,g){var w="drop"+(g?"":"Right");Et.prototype[c]=function(){return this.__filtered__?new Et(this):this[w](1)}}),Et.prototype.compact=function(){return this.filter(Bi)},Et.prototype.find=function(c){return this.filter(c).head()},Et.prototype.findLast=function(c){return this.reverse().find(c)},Et.prototype.invokeMap=Rt(function(c,g){return typeof c=="function"?new Et(this):this.map(function(w){return Ai(w,c,g)})}),Et.prototype.reject=function(c){return this.filter(ze(pt(c)))},Et.prototype.slice=function(c,g){c=Ot(c);var w=this;return w.__filtered__&&(c>0||g<0)?new Et(w):(c<0?w=w.takeRight(-c):c&&(w=w.drop(c)),g!==r&&(g=Ot(g),w=g<0?w.dropRight(-g):w.take(g-c)),w)},Et.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Et.prototype.toArray=function(){return this.take(Y)},bi(Et.prototype,function(c,g){var w=/^(?:filter|find|map|reject)|While$/.test(g),E=/^(?:head|last)$/.test(g),F=N[E?"take"+(g=="last"?"Right":""):g],V=E||/^find/.test(g);F&&(N.prototype[g]=function(){var K=this.__wrapped__,ne=E?[1]:arguments,se=K instanceof Et,ke=ne[0],Me=se||It(K),Ae=function(Ut){var tr=F.apply(N,ya([Ut],ne));return E&&He?tr[0]:tr};Me&&w&&typeof ke=="function"&&ke.length!=1&&(se=Me=!1);var He=this.__chain__,ot=!!this.__actions__.length,mt=V&&!He,Nt=se&&!ot;if(!V&&Me){K=Nt?K:new Et(this);var yt=c.apply(K,ne);return yt.__actions__.push({func:no,args:[Ae],thisArg:r}),new Dn(yt,He)}return mt&&Nt?c.apply(this,ne):(yt=this.thru(Ae),mt?E?yt.value()[0]:yt.value():yt)})}),Pn(["pop","push","shift","sort","splice","unshift"],function(c){var g=Bo[c],w=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",E=/^(?:pop|shift)$/.test(c);N.prototype[c]=function(){var F=arguments;if(E&&!this.__chain__){var V=this.value();return g.apply(It(V)?V:[],F)}return this[w](function(K){return g.apply(It(K)?K:[],F)})}}),bi(Et.prototype,function(c,g){var w=N[g];if(w){var E=w.name+"";ar.call(ol,E)||(ol[E]=[]),ol[E].push({name:g,func:w})}}),ol[xl(r,k).name]=[{name:"wrapper",func:r}],Et.prototype.clone=Su,Et.prototype.reverse=xh,Et.prototype.value=ll,N.prototype.at=ud,N.prototype.chain=Cs,N.prototype.commit=dd,N.prototype.next=c0,N.prototype.plant=Pf,N.prototype.reverse=d0,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=Af,N.prototype.first=N.prototype.head,Wo&&(N.prototype[Wo]=u0),N},Js=ff();po?((po.exports=Js)._=Js,Kl._=Js):Dr._=Js}).call(Ps)})(Ip,Ip.exports);var tt=Ip.exports;function b2(e,t,r){const n=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],i=e.length;let o=0;for(;o<i;){const s=e[o];n[0]=Math.max(s[t]??Number.MIN_SAFE_INTEGER,n[0]),n[1]=Math.min(s[r]??Number.MAX_SAFE_INTEGER,n[1]),++o}return n}const _k=/\\(\\)?/g,Sk=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function en(e,t,r){if(Sr(e)){const n=[];t.replace(Sk,(u,...d)=>{let h=u;return Sr(d[1])?h=d[2].replace(_k,"$1"):Sr(d[0])&&(h=d[0].trim()),n.push(h),""});let i=e,o=0;const s=n.length;for(;Sr(i)&&o<s;)i=i==null?void 0:i[n[o++]];return Sr(i)?i:r??"--"}return r??"--"}function Sr(e){return e!=null}function Im(e,t,r,n){const i=new Path2D;if(t.length>1){i.moveTo(t[0],n);for(let o=0;o<t.length;o++)i.lineTo(t[o],r[o]);i.lineTo(t[t.length-1],n)}return i}function Dl(e,t,r,n,i){if(t.length===0)return;const o=e.canvas;e.save(),e.fillStyle=i,e.clip(Im(e,t,r,o.height)),e.fill(Im(e,t,n,0)),e.restore()}function so(e,t){const r=[],n=2/(t+1);let i=0;for(let o=0;o<t;o++)i+=e[o];i/=t,r[t-1]=i;for(let o=t;o<e.length;o++){const s=(e[o]-r[o-1])*n+r[o-1];r[o]=s}for(let o=0;o<t-1;o++)r[o]=r[t-1];return r}function x2(e,t){const r=[];for(let n=0;n<e.length;n++){if(n<t-1){r[n]=0;continue}let i=0;for(let o=0;o<t;o++)i+=e[n-o];r[n]=i/t}return r}function Fl(e){if(e.startsWith("rgb(")){const o=e.match(/\d+/g);if(o&&o.length===3)return{r:parseInt(o[0]),g:parseInt(o[1]),b:parseInt(o[2])}}let t=e.replace(/^#/,"");if(!/^[0-9A-Fa-f]{6}$/.test(t))return{r:233,g:30,b:99};const r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return{r,g:n,b:i}}function kk(){return{target:{color:"#279d8233"},loss:{color:"#f2385a33"},midLine:{color:"#76808F80",size:1},targetText:{backgroundColor:"#279d82"},lossText:{backgroundColor:"#f2385a"}}}function za(e,t,r){if(r==="top"){if(!tt.isNumber(e.value)||!tt.isNumber(t.value))return;e.value<t.value&&(e.value=t.value)}else if(r==="bottom"){if(!tt.isNumber(e.value)||!tt.isNumber(t.value))return;e.value>t.value&&(e.value=t.value)}else r==="vertical"?(e.timestamp=t.timestamp,e.dataIndex=t.dataIndex):e.value=t.value}function Lm(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}}function Mk(e){return({coordinates:t,overlay:r,yAxis:n,xAxis:i})=>{var o,s,u,d,h;if(!Sr(n)||!Sr(i))return[];if(t.length<2)return[];const p=[];return p.push({type:"rect",attrs:Lm(t[0],t[1]),styles:e?(o=r.styles)==null?void 0:o.target:(s=r.styles)==null?void 0:s.loss}),p.push({type:"line",attrs:{coordinates:[{x:t[0].x,y:t[1].y},t[1]]},styles:(u=r.styles)==null?void 0:u.midLine}),Sr(t[2])&&p.push({type:"rect",attrs:Lm(t[1],t[2]),styles:e?(d=r.styles)==null?void 0:d.loss:(h=r.styles)==null?void 0:h.target}),p}}function Tk(e){return({chart:t,coordinates:r,overlay:n,yAxis:i,xAxis:o})=>{var s,u,d,h,p,f;if(!Sr(i)||!Sr(o))return[];if(r.length<3)return[];if(n.currentStep!==-1)return[];const m=n.extendData;if(!m.hovered&&!m.selected)return[];const x=t.getLocale(),b=n.points;if(!tt.isNumber(b[0].value)||!tt.isNumber(b[1].value)||!tt.isNumber(b[2].value)||!tt.isNumber(b[0].timestamp)||!tt.isNumber(b[1].timestamp)||!tt.isNumber(b[2].timestamp))return[];let C=0;i.isInCandle()?C=((s=t.getSymbol())==null?void 0:s.pricePrecision)??2:t.getIndicators({paneId:n.paneId}).forEach(B=>{C=Math.max(C,B.precision)});const _=[],k=(o.convertTimestampToPixel(b[0].timestamp)+o.convertTimestampToPixel(b[1].timestamp))/2,M=t.getDecimalFold().format(t.getThousandsSeparator().format((b[0].value-b[1].value).toFixed(C))),L=100*(b[0].value/b[1].value-1),A=I(e?"target":"loss",x);_.push({type:"text",attrs:{x:k,y:r[0].y,text:`${A}${M} (${L.toFixed(2)}%)`,baseline:"bottom",align:"center"},styles:e?(u=n.styles)==null?void 0:u.targetText:(d=n.styles)==null?void 0:d.lossText});const P=t.getDecimalFold().format(t.getThousandsSeparator().format((b[1].value-b[2].value).toFixed(C))),W=-100*(b[2].value/b[1].value-1),D=I(e?"loss":"target",x);_.push({type:"text",attrs:{x:k,y:r[2].y,text:`${D}${P} (${W.toFixed(2)}%)`,baseline:"top",align:"center"},styles:e?(h=n.styles)==null?void 0:h.lossText:(p=n.styles)==null?void 0:p.targetText});const $=e?L/W:W/L;if(!tt.isNumber($)||$<=0)return _;const z=I("riskReward",x);return _.push({type:"text",attrs:{x:k,y:r[1].y,text:`${z}${$.toFixed(2)}`,baseline:"middle",align:"center"},styles:(f=n.styles)==null?void 0:f.targetText}),_}}function w2(e){return t=>{const r=Mk(e)(t),n=Tk(e)(t);return[...r,...n]}}const C2={styles:kk(),totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,extendData:{hovered:!1,selected:!1},onMouseEnter:({overlay:e})=>{const t=e.extendData;return t.hovered=!0,!0},onMouseLeave:({overlay:e})=>{const t=e.extendData;return t.hovered=!1,!0},onSelected:({overlay:e})=>{const t=e.extendData;return t.selected=!0,!0},onDeselected:({overlay:e})=>{const t=e.extendData;return t.selected=!1,!0},performEventPressedMove:({points:e,performPoint:t,performPointIndex:r})=>{r===0?(za(t,e[1],"top"),za(e[2],t,"vertical")):r===1?(za(t,e[0],"bottom"),za(t,e[2],"top")):r===2&&(za(t,e[1],"bottom"),za(e[0],t,"vertical"))},performEventMoveForDrawing:({points:e,performPoint:t,currentStep:r})=>{r===2?za(t,e[0],"bottom"):r===3&&(za(t,e[1],"bottom"),e[1].timestamp===t.timestamp?za(t,e[0],"vertical"):za(e[0],t,"vertical"))}},Ek={name:"longPosition",createPointFigures:w2(!0),...C2},Ik={name:"shortPosition",createPointFigures:w2(!1),...C2},Lk=[ok,ak,sk,ck,lk,uk,dk,hk,pk,fk,gk,vk,mk,yk,bk,xk,wk,Ck,Ek,Ik],_2={isMainIndicator:!0,isSubIndicator:!1,name:"volumeBars",shortName:"Volume",zLevel:-1,figures:[],styles:{bars:[{upColor:"rgba(0, 252, 0, 0.8)",downColor:"rgba(252, 0, 0, 0.8)",noChangeColor:"rgba(128, 128, 128, 0.8)"}],custom:[{opacity:.3}]},calc:e=>e.map(t=>({volume:t.volume,close:t.close,open:t.open})),draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i})=>{const{realFrom:o,realTo:s}=t.getVisibleRange(),{gapBar:u,halfGapBar:d}=t.getBarSpace(),{result:h}=r;let p=0;for(let x=o;x<s;x++){const b=h[x];b&&(p=Math.max(p,b.volume))}const f=n.height*.4,m=Vd("rect");for(let x=o;x<s;x++){const b=h[x];if(b){const C=Math.round(b.volume/p*f),_=Pk(b.open<b.close?r.styles.bars[0].upColor:b.open>b.close?r.styles.bars[0].downColor:r.styles.bars[0].noChangeColor,r.styles.custom[0].opacity);new m({name:"rect",attrs:{x:i.convertToPixel(x)-d,y:n.height-C,width:u,height:C},styles:{color:_}}).draw(e)}}return!0}};function Pk(e,t){return e.replace(/rgba\((\d+), (\d+), (\d+), (.+)\)/,`rgba($1, $2, $3, ${t})`)}const S2={isMainIndicator:!0,isSubIndicator:!1,name:"Volume Profile Fixed Range",shortName:"Vol Profile",zLevel:-1,figures:[],calcParams:[{name:"Value Area Percentage",type:"number",value:.7,min:0,max:1}],styles:{lines:[{color:"#87CEFA",size:1,style:"dashed"},{color:"#ff0000",size:3},{color:"#87CEFA",size:1,style:"dashed"}],bars:[{upColor:"rgb(255,127,80)",downColor:"rgba(0, 128, 0, 0.8)"}]},calc:(e,t)=>e,createTooltipDataSource:({chart:e,indicator:t,crosshair:r})=>{var n,i,o;const s=t.result[r.dataIndex];return console.log(r.realX),s?{legends:[{title:"POC",value:{text:s.pocPrice.toFixed(2),color:"blue"}},{title:"Value Area Low",value:{text:s.valueAreaLowPrice.toFixed(2),color:"green"}},{title:"Value Area High",value:{text:s.valueAreaHighPrice.toFixed(2),color:((o=(i=(n=t==null?void 0:t.styles)==null?void 0:n.lines)==null?void 0:i[0])==null?void 0:o.color)??"white"}}]}:{}},draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s,u,d,h,p,f,m,x,b,C,_,k,M,L,A,P,W,D,$,z,B,Z,J,H,ee,le,ce,ae,re,ve,pe,Y,U,de;const{realFrom:X,realTo:fe}=t.getVisibleRange(),{gapBar:ue,halfGapBar:Fe}=t.getBarSpace(),Te=Object.values(r.result).slice(X,fe);let Pe=Math.max(40,Math.min(200,Math.floor(Te.length/5)*2));n.height/Pe<ue+2&&(Pe=Math.floor(n.height/(ue+1)));const Ce=new Array(Pe).fill(0),Ee=Math.min(...Te.map(Ft=>Ft.low)),Je=(Math.max(...Te.map(Ft=>Ft.high))-Ee)/Pe,Qe=Vd("line"),nt=Vd("rect");Te.forEach(Ft=>{if(Ft.volume===void 0)return;const Zt=Math.max(0,Math.min(Pe-1,Math.floor((Ft.low-Ee)/Je))),nr=Math.max(0,Math.min(Pe-1,Math.floor((Ft.high-Ee)/Je))),Gr=Ft.high-Ft.low;for(let hr=Zt;hr<=nr;hr++){const Vr=Ee+hr*Je,Tt=Vr+Je,We=Math.max(Ft.low,Vr),_t=Math.min(Ft.high,Tt)-We;if(_t>0){const wt=_t/Gr;Ce[hr]+=Ft.volume*wt}}});const Ue=Ce.indexOf(Math.max(...Ce)),ct=Ee+(Ue+.5)*Je,ut=Ce.reduce((Ft,Zt)=>Ft+Zt,0),Qt=typeof((s=r.calcParams)==null?void 0:s[0])=="object"&&r.calcParams[0]!==null&&"value"in r.calcParams[0]?Number(r.calcParams[0].value):.7,Kt=ut*Qt;let Mt=0,gt=0,jt=Ce.length-1;for(let Ft=Ue;Ft>=0;Ft--)if(Mt+=Ce[Ft],Mt>Kt/2){gt=Ft;break}Mt=0;for(let Ft=Ue;Ft<Ce.length;Ft++)if(Mt+=Ce[Ft],Mt>Kt/2){jt=Ft;break}const ln=Ee+gt*Je,mn=Ee+(jt+1)*Je,dr={volumeProfile:Ce,pocPrice:ct,valueAreaLowPrice:ln,valueAreaHighPrice:mn};if(dr.volumeProfile=Ce,dr.pocPrice=ct,dr.valueAreaHighPrice=mn,dr.valueAreaLowPrice=ln,dr.volumeProfile[0]!==void 0){new Qe({name:"line",styles:{style:(h=(d=(u=r==null?void 0:r.styles)==null?void 0:u.lines)==null?void 0:d[1])==null?void 0:h.style,color:(m=(f=(p=r==null?void 0:r.styles)==null?void 0:p.lines)==null?void 0:f[1])==null?void 0:m.color,size:(C=(b=(x=r==null?void 0:r.styles)==null?void 0:x.lines)==null?void 0:b[1])==null?void 0:C.size},attrs:{coordinates:[{x:i.convertToPixel(X),y:o.convertToPixel(dr.pocPrice)},{x:i.convertToPixel(fe),y:o.convertToPixel(dr.pocPrice)}]}}).draw(e),new Qe({name:"line",styles:{style:(M=(k=(_=r==null?void 0:r.styles)==null?void 0:_.lines)==null?void 0:k[0])==null?void 0:M.style,color:(P=(A=(L=r==null?void 0:r.styles)==null?void 0:L.lines)==null?void 0:A[0])==null?void 0:P.color,size:($=(D=(W=r==null?void 0:r.styles)==null?void 0:W.lines)==null?void 0:D[0])==null?void 0:$.size},attrs:{coordinates:[{x:i.convertToPixel(X),y:o.convertToPixel(dr.valueAreaLowPrice)},{x:i.convertToPixel(fe),y:o.convertToPixel(dr.valueAreaLowPrice)}]}}).draw(e),new Qe({name:"line",styles:{style:(Z=(B=(z=r==null?void 0:r.styles)==null?void 0:z.lines)==null?void 0:B[2])==null?void 0:Z.style,color:(ee=(H=(J=r==null?void 0:r.styles)==null?void 0:J.lines)==null?void 0:H[2])==null?void 0:ee.color,size:(ae=(ce=(le=r==null?void 0:r.styles)==null?void 0:le.lines)==null?void 0:ce[2])==null?void 0:ae.size},attrs:{coordinates:[{x:i.convertToPixel(X),y:o.convertToPixel(dr.valueAreaHighPrice)},{x:i.convertToPixel(fe),y:o.convertToPixel(dr.valueAreaHighPrice)}]}}).draw(e);let Ft=0;const Zt=n.height*.4;for(let nr=0;nr<dr.volumeProfile.length;nr++)Ft=Math.max(Ft,dr.volumeProfile[nr]);for(let nr=0;nr<Ce.length;nr++){const Gr=Math.round(Ce[nr]/Ft*Zt),hr=o.convertToPixel(Ee+nr*Je),Vr=nr>=gt&&nr<=jt?((pe=(ve=(re=r==null?void 0:r.styles)==null?void 0:re.bars)==null?void 0:ve[0])==null?void 0:pe.upColor)??"rgb(255,127,80)":((de=(U=(Y=r==null?void 0:r.styles)==null?void 0:Y.bars)==null?void 0:U[0])==null?void 0:de.downColor)??"rgba(0, 128, 0, 0.8)";new nt({name:"rect",attrs:{x:n.width-Gr,y:hr-Fe,width:Gr,height:Math.min(17,ue)},styles:{color:Vr}}).draw(e)}}return!0}},Ak={isMainIndicator:!1,isSubIndicator:!0,name:"WR",shortName:"WR",calcParams:[{name:"period1",type:"number",value:6},{name:"period2",type:"number",value:10},{name:"period3",type:"number",value:14}],styles:{lines:[{color:"#A020F0",size:1},{color:"#FFD700",size:1},{color:"#FF6E6E",size:1}]},figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`wr${r+1}`,title:`WR${r+1}: `,type:"line"})),calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r;return e.reduce((o,s,u)=>{const d={},h=s.close;return i.forEach((p,f)=>{const m=p.value-1;if(u>=m){const x=b2(e.slice(u-m,u+1),"high","low"),b=x[0],C=x[1],_=b-C,k=n[f].key;d[k]=_===0?0:(h-b)/_*100}}),Object.keys(d).length>0&&(o[s.timestamp]=d),o},{})}},Dk={isMainIndicator:!1,isSubIndicator:!0,name:"TRIX",shortName:"TRIX",calcParams:[{name:"period",type:"number",value:12},{name:"maPeriod",type:"number",value:9}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0,h=0;const p={};return e.reduce((f,m,x)=>{var b;const C=m.close;if(n+=C,x>=r[0].value-1&&(x>r[0].value-1?i=(2*C+(r[0].value-1)*i)/(r[0].value+1):i=n/r[0].value,u+=i,x>=r[0].value*2-2&&(x>r[0].value*2-2?o=(2*i+(r[0].value-1)*o)/(r[0].value+1):o=u/r[0].value,d+=o,x>=r[0].value*3-3))){let _=0,k=0;x>r[0].value*3-3?(_=(2*o+(r[0].value-1)*s)/(r[0].value+1),k=(_-s)/s*100):_=d/r[0].value,s=_,p[m.timestamp]=k,h+=k;const M={trix:k};if(x>=r[0].value*3+r[1].value-4){M.maTrix=h/r[1].value;const L=(b=e[x-(r[1].value-1)])==null?void 0:b.timestamp;h-=p[L]??0}f[m.timestamp]=M}return f},{})}};function Pm(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&n&&(n.close>n.open?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.close<n.open&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}}const Fk={isMainIndicator:!1,isSubIndicator:!0,name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},Pm()],regenerateFigures:e=>{const t=e.map((r,n)=>({key:`ma${n+1}`,title:`MA${r}: `,type:"line"}));return t.push(Pm()),t},calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r,o=[];return e.reduce((s,u,d)=>{const h=u.volume??0,p={volume:h,open:u.open,close:u.close};return i.forEach((f,m)=>{if(o[m]=(o[m]??0)+h,d>=f-1){const x=n[m].key;p[x]=o[m]/f,o[m]-=e[d-(f-1)].volume??0}}),s[u.timestamp]=p,s},{})}},Rk={isMainIndicator:!1,isSubIndicator:!0,name:"VR",shortName:"VR",calcParams:[{name:"params_1",type:"number",value:26},{name:"params_2",type:"number",value:6}],styles:{lines:[{color:"#FF6E6E",size:2},{color:"#FFD700",size:4}]},figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0;return e.reduce((u,d,h)=>{var p;const f={},m=d.close,x=(e[h-1]??d).close,b=d.volume??0;if(m>x?n+=b:m<x?i+=b:o+=b,h>=r[0].value-1){const C=o/2;i+C===0?f.vr=0:f.vr=(n+C)/(i+C)*100,s+=f.vr,h>=r[0].value+r[1].value-2&&(f.maVr=s/r[1].value,s-=((p=u[e[h-(r[1].value-1)].timestamp])==null?void 0:p.vr)??0);const _=e[h-(r[0].value-1)],k=e[h-r[0].value]??_,M=_.close,L=_.volume??0;M>k.close?n-=L:M<k.close?i-=L:o-=L,u[d.timestamp]=f}return u},{})}},Ok={isMainIndicator:!1,isSubIndicator:!0,name:"KDJ",shortName:"KDJ",calcParams:[{name:"period",type:"number",value:9},{name:"dPeriod",type:"number",value:3},{name:"jPeriod",type:"number",value:3}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n={};return e.reduce((i,o,s)=>{var u;const d=o.close;if(s>=r[0].value-1){const h=b2(e.slice(s-(r[0].value-1),s+1),"high","low"),p=h[0],f=h[1],m=p-f,x=(d-f)/(m===0?1:m)*100,b=(u=e[s-1])==null?void 0:u.timestamp,C=b?n[b]:void 0,_=((r[1].value-1)*((C==null?void 0:C.k)??50)+x)/r[1].value,k=((r[2].value-1)*((C==null?void 0:C.d)??50)+_)/r[2].value,M=3*_-2*k,L={k:_,d:k,j:M};n[o.timestamp]=L,i[o.timestamp]=L}return i},{})}},Nk={isMainIndicator:!0,isSubIndicator:!1,name:"SAR",shortName:"SAR",series:"price",calcParams:[{name:"startAf",type:"number",value:2},{name:"step",type:"number",value:2},{name:"maxAf",type:"number",value:20}],precision:2,shouldOhlc:!0,styles:{circles:[{upColor:"#FF7F50",downColor:"#A020F0",noChangeColor:"#A8A8A8"}]},figures:[{key:"sar",title:"SAR: ",type:"circle",styles:({data:e,indicator:t,defaultStyles:r})=>{const{current:n}=e,i=(n==null?void 0:n.sar)??Number.MIN_SAFE_INTEGER,o=(((n==null?void 0:n.high)??0)+((n==null?void 0:n.low)??0))/2;return{color:i<o?en(t.styles,"circles[0].upColor",r.circles[0].upColor):en(t.styles,"circles[0].downColor",r.circles[0].downColor)}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value/100,i=r[1].value/100,o=r[2].value/100;let s=n,u=-100,d=!1,h=0;return e.reduce((p,f,m)=>{const x=h,b=f.high,C=f.low;if(d){(u===-100||u<b)&&(u=b,s=Math.min(s+i,o)),h=x+s*(u-x);const _=Math.min(e[Math.max(1,m)-1].low,C);h>f.low?(h=u,s=n,u=-100,d=!d):h>_&&(h=_)}else{(u===-100||u>C)&&(u=C,s=Math.min(s+i,o)),h=x+s*(u-x);const _=Math.max(e[Math.max(1,m)-1].high,b);h<f.high?(h=u,s=0,u=-100,d=!d):h<_&&(h=_)}return p[f.timestamp]={high:b,low:C,sar:h},p},{})}},zk={isMainIndicator:!1,isSubIndicator:!0,name:"ROC",shortName:"ROC",calcParams:[{name:"period",type:"number",value:12},{name:"maPeriod",type:"number",value:6}],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0;const i={};return e.reduce((o,s,u)=>{var d;if(u>=r[0].value-1){const h=s.close,p=(e[u-r[0].value]??e[u-(r[0].value-1)]).close;let f=0;p!==0&&(f=(h-p)/p*100),i[s.timestamp]=f,n+=f;const m={roc:f};if(u>=r[0].value-1+r[1].value-1){m.maRoc=n/r[1].value;const x=(d=e[u-(r[1].value-1)])==null?void 0:d.timestamp;n-=i[x]??0}o[s.timestamp]=m}return o},{})}},$k={isMainIndicator:!1,isSubIndicator:!0,name:"RSI",shortName:"RSI",calcParams:[{name:"period1",type:"number",value:6},{name:"period2",type:"number",value:12},{name:"period3",type:"number",value:24}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#ff0000",size:1}]},figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>{const n=r+1;return{key:`rsi${n}`,title:`RSI${n}: `,type:"line"}}),calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r,o=[],s=[];return e.reduce((u,d,h)=>{const p={},f=(e[h-1]??d).close,m=d.close-f;return i.forEach((x,b)=>{if(m>0?o[b]=(o[b]??0)+m:s[b]=(s[b]??0)+Math.abs(m),h>=x.value-1){const C=n[b].key;s[b]!==0?p[C]=100-100/(1+o[b]/s[b]):p[C]=0;const _=e[h-(x.value-1)],k=e[h-x.value]??_,M=_.close-k.close;M>0?o[b]-=M:s[b]-=Math.abs(M)}}),Object.keys(p).length>0&&(u[d.timestamp]=p),u},{})}},Bk={isMainIndicator:!0,isSubIndicator:!1,name:"SMA",shortName:"SMA",series:"price",calcParams:[{name:"period1",type:"number",value:12},{name:"period2",type:"number",value:2}],precision:2,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:(e,t)=>{const r=t.calcParams;let n=0,i=0;return e.reduce((o,s,u)=>{const d=s.close;return n+=d,u>=r[0].value-1&&(u>r[0].value-1?i=(d*r[1].value+i*(r[0].value-r[1].value+1))/(r[0].value+1):i=n/r[0].value,o[s.timestamp]={sma:i}),o},{})}},Vk={isMainIndicator:!1,isSubIndicator:!0,name:"PVT",shortName:"PVT",precision:2,styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:e=>{let t=0;return e.reduce((r,n,i)=>{const o=n.close,s=n.volume??0;if(!o||o<=0)return r;if(i===0)return t=0,r[n.timestamp]={pvt:0},r;const u=e[i-1].close;if(!u||u<=0)return r;const d=(o-u)/u*s;return t+=d,r[n.timestamp]={pvt:Number(t.toFixed(2))},r},{})}},Wk={isMainIndicator:!1,isSubIndicator:!0,name:"PSY",shortName:"PSY",calcParams:[{name:"params_1",type:"number",value:12},{name:"params_2",type:"number",value:6}],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0;const o=[],s=[];return e.reduce((u,d,h)=>{const p={},f=(e[h-1]??d).close,m=d.close-f>0?1:0;return o.push(m),n+=m,h>=r[0].value-1&&(p.psy=n/r[0].value*100,i+=p.psy,h>=r[0].value+r[1].value-2&&(p.maPsy=i/r[1].value,i-=s[h-(r[1].value-1)].psy??0),n-=o[h-(r[0].value-1)]),s.push(p),u[d.timestamp]=p,u},{})}},Uk={isMainIndicator:!0,isSubIndicator:!1,name:"MA",shortName:"MA",series:"price",calcParams:[{name:"ma1",type:"number",value:5},{name:"ma2",type:"number",value:10},{name:"ma3",type:"number",value:30},{name:"ma4",type:"number",value:60}],precision:2,shouldOhlc:!0,styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`ma${r+1}`,title:`MA${t.value}: `,type:"line"})),calc:(e,t)=>{const r=t.calcParams,n=[];return e.reduce((i,o,s)=>{const u={},d=o.close;return r.forEach((h,p)=>{if(n[p]=(n[p]??0)+d,s>=h.value-1){const f=t.figures[p].key;u[f]=n[p]/h.value,n[p]-=e[s-(h.value-1)].close}}),Object.keys(u).length>0&&(i[o.timestamp]=u),i},{})}},Hk={isMainIndicator:!1,isSubIndicator:!0,name:"MTM",shortName:"MTM",calcParams:[{name:"params_1",type:"number",value:12},{name:"params_2",type:"number",value:6}],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0;const i={};return e.reduce((o,s,u)=>{var d;if(u>=r[0].value){const h=s.close,p=e[u-r[0].value].close,f=h-p;i[s.timestamp]=f,n+=f;const m={mtm:f};if(u>=r[0].value+r[1].value-1){m.maMtm=n/r[1].value;const x=(d=e[u-(r[1].value-1)])==null?void 0:d.timestamp;n-=i[x]??0}o[s.timestamp]=m}return o},{})}},Yk={isMainIndicator:!1,isSubIndicator:!0,name:"DMI",shortName:"DMI",calcParams:[{name:"period",type:"number",value:14},{name:"adxrPeriod",type:"number",value:6}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=0;const f={};return e.reduce((m,x,b)=>{var C;const _=e[b-1]??x,k=_.close,M=x.high,L=x.low,A=M-L,P=Math.abs(M-k),W=Math.abs(k-L),D=M-_.high,$=_.low-L,z=Math.max(Math.max(A,P),W),B=D>0&&D>$?D:0,Z=$>0&&$>D?$:0;if(n+=z,i+=B,o+=Z,b>=r[0].value-1){b>r[0].value-1?(s=s-s/r[0].value+z,u=u-u/r[0].value+B,d=d-d/r[0].value+Z):(s=n,u=i,d=o);let J=0,H=0;s!==0&&(J=u*100/s,H=d*100/s);let ee=0;if(H+J!==0&&(ee=Math.abs(H-J)/(H+J)*100),h+=ee,b>=r[0].value*2-2){b>r[0].value*2-2?p=(p*(r[0].value-1)+ee)/r[0].value:p=h/r[0].value,f[x.timestamp]=p;const le={pdi:J,mdi:H,adx:p};if(b>=r[0].value*2+r[1].value-3){const ce=(C=e[b-(r[1].value-1)])==null?void 0:C.timestamp,ae=f[ce]??0;le.adxr=(ae+p)/2}m[x.timestamp]=le}else m[x.timestamp]={pdi:J,mdi:H}}return m},{})}},Xk={isMainIndicator:!1,isSubIndicator:!0,name:"EMV",shortName:"EMV",calcParams:[{name:"params_1",type:"number",value:14},{name:"params_2",type:"number",value:9}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0;const i=[],o={};return e.reduce((s,u,d)=>{if(d>0){const h=e[d-1],p=u.high,f=u.low,m=u.volume??0,x=(p+f)/2-(h.high+h.low)/2;let b;if(m===0||p-f===0)b=0;else{const _=m/1e8/(p-f);b=x/_}o[u.timestamp]=b,n+=b,i.push(b);const C={emv:b};d>=r[0].value&&(C.maEmv=n/r[0].value,n-=i[d-r[0].value]),s[u.timestamp]=C}return s},{})}},jk={isMainIndicator:!0,isSubIndicator:!1,name:"EMA",shortName:"EMA",series:"price",calcParams:[{name:"period1",type:"number",value:6},{name:"period2",type:"number",value:12},{name:"period3",type:"number",value:20}],styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`ema${r+1}`,title:`EMA${t.value}: `,type:"line"})),calc:(e,t)=>{const r=t.calcParams;let n=0;const i=[];return e.reduce((o,s,u)=>{const d={},h=s.close;return n+=h,r.forEach((p,f)=>{if(u>=p.value-1){u>p.value-1?i[f]=(2*h+(p.value-1)*i[f])/(p.value+1):i[f]=n/p.value;const m=t.figures[f].key;d[m]=i[f]}}),Object.keys(d).length>0&&(o[s.timestamp]=d),o},{})}},Zk={isMainIndicator:!1,isSubIndicator:!0,name:"CR",shortName:"CR",calcParams:[{name:"cr",type:"number",value:26},{name:"ma1",type:"number",value:10},{name:"ma2",type:"number",value:20},{name:"ma3",type:"number",value:40},{name:"ma4",type:"number",value:60}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#FFFF00",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=Math.ceil(r[1].value/2.5+1),i=Math.ceil(r[2].value/2.5+1),o=Math.ceil(r[3].value/2.5+1),s=Math.ceil(r[4].value/2.5+1);let u=0;const d=[];let h=0;const p=[];let f=0;const m=[];let x=0;const b=[],C={};return e.reduce((_,k,M)=>{var L,A,P,W;const D=e[M-1]??k,$=(D.high+D.close+D.low+D.open)/4,z=Math.max(0,k.high-$),B=Math.max(0,$-k.low);if(M>=r[0].value-1){let Z;B!==0?Z=z/B*100:Z=0,C[k.timestamp]=Z,u+=Z,h+=Z,f+=Z,x+=Z;const J={cr:Z};if(M>=r[0].value+r[1].value-2){d.push(u/r[1].value),M>=r[0].value+r[1].value+n-3&&(J.ma1=d[d.length-1-n]);const H=(L=e[M-(r[1].value-1)])==null?void 0:L.timestamp;u-=C[H]??0}if(M>=r[0].value+r[2].value-2){p.push(h/r[2].value),M>=r[0].value+r[2].value+i-3&&(J.ma2=p[p.length-1-i]);const H=(A=e[M-(r[2].value-1)])==null?void 0:A.timestamp;h-=C[H]??0}if(M>=r[0].value+r[3].value-2){m.push(f/r[3].value),M>=r[0].value+r[3].value+o-3&&(J.ma3=m[m.length-1-o]);const H=(P=e[M-(r[3].value-1)])==null?void 0:P.timestamp;f-=C[H]??0}if(M>=r[0].value+r[4].value-2){b.push(x/r[4].value),M>=r[0].value+r[4].value+s-3&&(J.ma4=b[b.length-1-s]);const H=(W=e[M-(r[4].value-1)])==null?void 0:W.timestamp;x-=C[H]??0}_[k.timestamp]=J}return _},{})}},Gk={isMainIndicator:!1,isSubIndicator:!0,name:"DMA",shortName:"DMA",calcParams:[{name:"params_1",type:"number",value:10},{name:"params_2",type:"number",value:50},{name:"params_3",type:"number",value:10}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=Math.max(r[0].value,r[1].value);let i=0,o=0,s=0;const u={};return e.reduce((d,h,p)=>{var f;const m=h.close;i+=m,o+=m;let x=0,b=0;if(p>=r[0].value-1&&(x=i/r[0].value,i-=e[p-(r[0].value-1)].close),p>=r[1].value-1&&(b=o/r[1].value,o-=e[p-(r[1].value-1)].close),p>=n-1){const C=x-b;u[h.timestamp]=C,s+=C;const _={dma:C};if(p>=n+r[2].value-2){_.ama=s/r[2].value;const k=(f=e[p-(r[2].value-1)])==null?void 0:f.timestamp;s-=u[k]??0}d[h.timestamp]=_}return d},{})}},qk={isMainIndicator:!0,isSubIndicator:!1,name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[{name:"period1",type:"number",value:3},{name:"period2",type:"number",value:6},{name:"period3",type:"number",value:12},{name:"period4",type:"number",value:24}],shouldOhlc:!0,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams.map(s=>s.value),n=Math.max(...r),i=[],o=[];return e.reduce((s,u,d)=>{const h=u.close;if(r.forEach((p,f)=>{i[f]=(i[f]??0)+h,d>=p-1&&(o[f]=i[f]/p,i[f]-=e[d-(p-1)].close)}),d>=n-1){let p=0;o.forEach(m=>{p+=m});const f={bbi:p/4};s[u.timestamp]=f}return s},{})}},Qk={isMainIndicator:!1,isSubIndicator:!0,name:"CCI",shortName:"CCI",calcParams:[{name:"period",type:"number",value:20}],styles:{lines:[{color:"#007FFF",size:1}]},figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value-1;let i=0;const o=[];return e.reduce((s,u,d)=>{const h={},p=(u.high+u.low+u.close)/3;if(i+=p,o.push(p),d>=n){const f=i/r[0].value,m=o.slice(d-n,d+1);let x=0;m.forEach(_=>{x+=Math.abs(_-f)});const b=x/r[0].value;h.cci=b!==0?(p-f)/b/.015:0;const C=(e[d-n].high+e[d-n].low+e[d-n].close)/3;i-=C,s[u.timestamp]=h}return s},{})}},Kk={isMainIndicator:!1,isSubIndicator:!0,name:"BIAS",shortName:"BIAS",calcParams:[{name:"bias1",type:"number",value:6},{name:"bias2",type:"number",value:12},{name:"bias3",type:"number",value:24}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#ff0000",size:1}]},figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`bias${r+1}`,title:`BIAS${t.value}: `,type:"line"})),calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r,o=[];return e.reduce((s,u,d)=>{const h={},p=u.close;return i.forEach((f,m)=>{if(o[m]=(o[m]??0)+p,d>=f.value-1){const x=o[m]/f.value,b=n[m].key;h[b]=(p-x)/x*100,o[m]-=e[d-(f.value-1)].close}}),Object.keys(h).length>0&&(s[u.timestamp]=h),s},{})}};function Jk(e,t){const r=e.length;let n=0;return e.forEach(i=>{const o=i.close-t;n+=o*o}),n=Math.abs(n),Math.sqrt(n/r)}const eM={isMainIndicator:!0,isSubIndicator:!1,name:"BOLL",shortName:"BOLL",series:"price",calcParams:[{name:"period",type:"number",value:20},{name:"standard_deviation",type:"number",value:2}],precision:2,shouldOhlc:!0,styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value-1;let i=0;return e.reduce((o,s,u)=>{const d=s.close,h={};if(i+=d,u>=n){h.mid=i/r[0].value;const p=Jk(e.slice(u-n,u+1),h.mid);h.up=h.mid+r[1].value*p,h.dn=h.mid-r[1].value*p,i-=e[u-n].close,o[s.timestamp]=h}return o},{})}},tM={isMainIndicator:!1,isSubIndicator:!0,name:"BRAR",shortName:"BRAR",calcParams:[{name:"brar",type:"number",value:26}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0].value;let n=0,i=0,o=0,s=0;return e.reduce((u,d,h)=>{const p={},f=d.high,m=d.low,x=d.open,b=(e[h-1]??d).close;if(o+=f-x,s+=x-m,n+=f-b,i+=b-m,h>=r-1){s!==0?p.ar=o/s*100:p.ar=0,i!==0?p.br=n/i*100:p.br=0;const C=e[h-(r-1)],_=C.high,k=C.low,M=C.open,L=(e[h-r]??e[h-(r-1)]).close;n-=_-L,i-=L-k,o-=_-M,s-=M-k}return u[d.timestamp]=p,u},{})}},rM={isMainIndicator:!0,isSubIndicator:!1,name:"Average Price",shortName:"AVP",series:"price",precision:2,styles:{lines:[{color:"#A020F0",size:1}]},figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:e=>e.reduce((t,r)=>{const n={};if((r.volume??0)!==0){const i=(r.high+r.low+r.close)/3;n.avp=i,t[r.timestamp]=n}return t},{})},nM={isMainIndicator:!1,isSubIndicator:!0,name:"AO",shortName:"AO",calcParams:[{name:"shortPeriod",type:"number",value:5},{name:"longPeriod",type:"number",value:34}],styles:{bars:[{upColor:"rgba(0, 252, 0, 0.8)",downColor:"rgba(252, 0, 0, 0.8)"}]},figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const{prev:n,current:i}=e,o=(n==null?void 0:n.ao)??Number.MIN_SAFE_INTEGER,s=(i==null?void 0:i.ao)??Number.MIN_SAFE_INTEGER;let u="";s>o?t.styles&&(u=en(t.styles,"bars[0].upColor",t.styles.bars[0].upColor)):t.styles&&(u=en(t.styles,"bars[0].downColor",t.styles.bars[0].downColor));const d=s>o?"stroke":"fill";return{color:u,style:d,borderColor:u}}}],calc:(e,t)=>{const r=t.calcParams,n=Math.max(r[0].value,r[1].value);let i=0,o=0,s=0,u=0;return e.reduce((d,h,p)=>{const f={},m=(h.low+h.high)/2;if(i+=m,o+=m,p>=r[0].value-1){s=i/r[0].value;const x=e[p-(r[0].value-1)];i-=(x.low+x.high)/2}if(p>=r[1].value-1){u=o/r[1].value;const x=e[p-(r[1].value-1)];o-=(x.low+x.high)/2}return p>=n-1&&(f.ao=s-u,d[h.timestamp]=f),d},{})}},iM={isMainIndicator:!0,isSubIndicator:!1,name:"WEMA",shortName:"WEMA",zLevel:0,series:"price",calcParams:[{name:"period",type:"number",value:14}],precision:2,figures:[{key:"WEMA",title:"WEMA: ",type:"line"}],styles:{lines:[{style:"solid",color:"yellow",size:1}]},shouldOhlc:!0,calc:(e,t)=>{const r=t.calcParams[0].value,n=1/r;let i=0,o=0;return e.reduce((s,u,d)=>{const h=u.close;return d<r?(o+=h,d===r-1&&(i=o/r,s[u.timestamp]={wema:i})):(i=(h-i)*n+i,s[u.timestamp]={wema:i}),s},{})},draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s;const{realFrom:u,realTo:d}=t.getVisibleRange(),{result:h}=r,p=Vd("line");for(let f=u;f<d;f++){const m=h[f];m&&new p({name:"line",styles:{style:r.styles.lines[0].style,color:r.styles.lines[0].color,size:r.styles.lines[0].size},attrs:{coordinates:[{x:i.convertToPixel(f),y:o.convertToPixel(m.wema)},{x:i.convertToPixel(f+1),y:o.convertToPixel((s=h[f+1])==null?void 0:s.wema)}]}}).draw(e)}return!0}},oM={name:"Volume Weighted Average Price",shortName:"VWAP",series:"price",calcParams:[{name:"anchorPeriod",type:"select",value:"Monthly",options:[{value:"None",label:"None"},{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarter",label:"Quarter"},{value:"Year",label:"Year"}]},{name:"source",type:"select",value:"HLC3",options:[{value:"Close",label:"Close"},{value:"HLC3",label:"HLC3"},{value:"HLC2",label:"HLC2"},{value:"Weighted",label:"Weighted"},{value:"Median",label:"Median"},{value:"Open",label:"Open"},{value:"High",label:"High"},{value:"OHLC4",label:"OHLC4"},{value:"HLCC4",label:"HLCC4"}]},{name:"offset",type:"number",value:0,min:-100,max:100},{name:"bandsMode",type:"select",value:"Standard Deviation",options:[{value:"Standard Deviation",label:"Standard Deviation"},{value:"Percentage",label:"Percentage"},{value:"Fixed",label:"Fixed"}]},{name:"bandsMultiplier",type:"select",value:"2",options:[{value:"0.5",label:"0.5"},{value:"1",label:"1.0"},{value:"1.5",label:"1.5"},{value:"2",label:"2.0"},{value:"2.5",label:"2.5"},{value:"3",label:"3.0"}]},{name:"showBands",type:"boolean",value:!0},{name:"showShading",type:"boolean",value:!0}],precision:2,isMainIndicator:!0,isSubIndicator:!1,styles:{lines:[{style:"solid",color:"#FF7F50",size:1},{style:"dashed",color:"#4CAF50",size:1},{style:"dashed",color:"#F44336",size:1}]},figures:[{key:"vwap",title:"VWAP: ",type:"line"},{key:"upperBand",title:"Upper: ",type:"line"},{key:"lowerBand",title:"Lower: ",type:"line"}],calc:(e,t)=>{var r,n,i,o,s;const u=[],d=t.calcParams,h=((r=d.find(L=>L.name==="anchorPeriod"))==null?void 0:r.value)??"None",p=((n=d.find(L=>L.name==="source"))==null?void 0:n.value)??"Close",f=((i=d.find(L=>L.name==="offset"))==null?void 0:i.value)??0,m=((o=d.find(L=>L.name==="bandsMode"))==null?void 0:o.value)??"Standard Deviation",x=Number(((s=d.find(L=>L.name==="bandsMultiplier"))==null?void 0:s.value)??"2"),b=[],C=[];let _=0,k=0;const M=14;for(let L=0;L<e.length;L++){const A=e[L];if(A.close===void 0||A.volume===void 0){u[L]={vwap:0};continue}let P;switch(p){case"Open":P=A.open;break;case"High":P=A.high;break;case"Close":P=A.close;break;case"HLC3":P=(A.high+A.low+A.close)/3;break;case"HLC2":P=(A.high+A.low)/2;break;case"OHLC4":P=(A.open+A.high+A.low+A.close)/4;break;case"HLCC4":P=(A.high+A.low+A.close+A.close)/4;break;case"Volume":P=A.volume;break;default:P=A.close}if(h!=="None"){const $=A.timestamp;let z=!1;switch(h){case"Daily":z=Math.floor($/(1440*60*1e3))!==Math.floor(k/(1440*60*1e3));break;case"Weekly":z=Math.floor($/(10080*60*1e3))!==Math.floor(k/(10080*60*1e3));break;case"Monthly":const B=new Date($),Z=new Date(k);z=B.getMonth()!==Z.getMonth()||B.getFullYear()!==Z.getFullYear();break;case"Quarter":const J=new Date($),H=new Date(k),ee=Math.floor(J.getMonth()/3),le=Math.floor(H.getMonth()/3);z=ee!==le||J.getFullYear()!==H.getFullYear();break;case"Year":const ce=new Date($),ae=new Date(k);z=ce.getFullYear()!==ae.getFullYear();break}z&&(_=L,k=$)}const W=P*A.volume;b[L]=W,C[L]=A.volume;const D=h!=="None"?L-_+1:M;if(L>=(h!=="None"?_:M-1)){let $=0,z=0,B=0;for(let le=0;le<D;le++)$+=b[L-le],z+=C[L-le];const Z=z!==0?Number(($/z).toFixed(2)):0;u[L]={vwap:Z};for(let le=0;le<D;le++){const ce=e[L-le];if(ce.volume===void 0)continue;let ae;switch(p){case"Open":ae=ce.open;break;case"High":ae=ce.high;break;case"Close":ae=ce.close;break;case"HLC3":ae=(ce.high+ce.low+ce.close)/3;break;case"HLC2":ae=(ce.high+ce.low)/2;break;case"OHLC4":ae=(ce.open+ce.high+ce.low+ce.close)/4;break;case"HLCC4":ae=(ce.high+ce.low+ce.close+ce.close)/4;break;default:ae=ce.close}const re=ae-Z;B+=re*re*ce.volume,z+=ce.volume}const J=Math.sqrt(B/z);let H=Z,ee=Z;switch(m){case"Standard Deviation":H=Z+J*x,ee=Z-J*x;break;case"Percentage":const le=x/100;H=Z*(1+le),ee=Z*(1-le);break;case"Fixed":H=Z+x,ee=Z-x;break}if(f!==0){const le=L+f;if(le>=0&&le<u.length&&(u[le]={vwap:Z,upperBand:H,lowerBand:ee},f>0))for(let ce=L+1;ce<le;ce++)ce<u.length&&(u[ce]={vwap:Z,upperBand:H,lowerBand:ee})}else u[L]={vwap:Z,upperBand:H,lowerBand:ee}}else u[L]={vwap:0}}return u},shouldOhlc:!0,draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s,u,d,h,p;const{realFrom:f,realTo:m}=t.getVisibleRange(),{result:x}=r,b=Vd("line"),C=r.calcParams,_=((s=C.find(M=>M.name==="showBands"))==null?void 0:s.value)??!0,k=((u=C.find(M=>M.name==="showShading"))==null?void 0:u.value)??!1;for(let M=f;M<m;M++){const L=x[M];L&&L.vwap!==0&&new b({name:"line",styles:{style:r.styles.lines[0].style,color:r.styles.lines[0].color,size:r.styles.lines[0].size},attrs:{coordinates:[{x:i.convertToPixel(M),y:o.convertToPixel(L.vwap)},{x:i.convertToPixel(M+1),y:o.convertToPixel((d=x[M+1])==null?void 0:d.vwap)}]}}).draw(e)}if(_){const M=[],L=[],A=[];for(let P=f;P<=m;P++){const W=x[P];W&&W.upperBand!==void 0&&W.lowerBand!==void 0&&(M.push(i.convertToPixel(P)),L.push(o.convertToPixel(W.upperBand)),A.push(o.convertToPixel(W.lowerBand)))}if(k&&M.length>0){const P=[];for(let $=f;$<=m;$++){const z=x[$];z&&z.vwap!==0&&P.push(o.convertToPixel(z.vwap))}const W=Fl(r.styles.lines[1].color??"#4CAF50");Dl(e,M,L,P,`rgba(${W.r}, ${W.g}, ${W.b}, 0.1)`);const D=Fl(r.styles.lines[2].color??"#F44336");Dl(e,M,P,A,`rgba(${D.r}, ${D.g}, ${D.b}, 0.1)`)}for(let P=f;P<m;P++){const W=x[P];W&&W.vwap!==0&&W.upperBand!==void 0&&W.lowerBand!==void 0&&(new b({name:"line",styles:{style:r.styles.lines[1].style,color:r.styles.lines[1].color,size:r.styles.lines[1].size},attrs:{coordinates:[{x:i.convertToPixel(P),y:o.convertToPixel(W.upperBand)},{x:i.convertToPixel(P+1),y:o.convertToPixel(((h=x[P+1])==null?void 0:h.upperBand)??W.upperBand)}]}}).draw(e),new b({name:"line",styles:{style:r.styles.lines[2].style,color:r.styles.lines[2].color,size:r.styles.lines[2].size},attrs:{coordinates:[{x:i.convertToPixel(P),y:o.convertToPixel(W.lowerBand)},{x:i.convertToPixel(P+1),y:o.convertToPixel(((p=x[P+1])==null?void 0:p.lowerBand)??W.lowerBand)}]}}).draw(e))}}return!0}},aM={isMainIndicator:!1,isSubIndicator:!0,name:"ADL",shortName:"ADL",calcParams:[],styles:{lines:[{color:"#FF7F50",size:1}]},figures:[{key:"adl",title:"ADL: ",type:"line"}],calc:(e,t)=>{let r=0;return e.reduce((n,i,o)=>{const{high:s=0,low:u=0,close:d=0,volume:h=0}=i;if(!s||!u||!d||!h)return n[i.timestamp]={adl:r},n;let p=0;s!==u&&(p=(d-u-(s-d))/(s-u),p=Math.max(-1,Math.min(1,p)));const f=p*h;return r+=f,n[i.timestamp]={adl:Math.round(r)},n},{})}},sM={isMainIndicator:!1,isSubIndicator:!0,name:"Force Index",shortName:"FI",calcParams:[{name:"period",type:"number",value:13}],styles:{lines:[{color:"#5D69B1",size:1}]},figures:[{key:"fi",title:"FI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0];let n=0,i=2/(r.value+1);return e.reduce((o,s,u)=>{const{close:d=0,volume:h=0}=s,p=u>0?e[u-1].close:d,f=(d-p)*h;return u===0?n=f:n=(f-n)*i+n,o[s.timestamp]={fi:Math.round(n)},o},{})}},lM={isMainIndicator:!1,isSubIndicator:!0,name:"MFI",shortName:"MFI",calcParams:[{name:"period",type:"number",value:14}],precision:2,styles:{lines:[{style:"solid",color:"#FF7F50",size:1}]},figures:[{key:"mfi",title:"MFI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0].value,n=[];let i;return e.reduce((o,s,u)=>{const{high:d=0,low:h=0,close:p=0,volume:f=0}=s;if(!d||!h||!p||!f)return o;const m=(d+h+p)/3,x=m*f;if(i===void 0)return i=m,o;let b=0,C=0;if(m>i?b=x:m<i&&(C=x),n.push({positive:b,negative:C}),n.length>r&&n.shift(),n.length===r){const _=n.reduce((L,A)=>L+A.positive,0),k=n.reduce((L,A)=>L+A.negative,0);let M=50;k===0&&_>0?M=100:_===0&&k>0?M=0:k>0&&(M=100-100/(1+_/k)),o[s.timestamp]={mfi:Number(M.toFixed(t.precision))}}return i=m,o},{})}},cM={isMainIndicator:!1,isSubIndicator:!0,name:"OBV",shortName:"OBV",calcParams:[{name:"period",type:"number",value:30}],styles:{lines:[{color:"#A020F0",size:1},{color:"#007FFF",size:1}]},figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0;return e.reduce((o,s,u)=>{var d;const h=e[u-1]??s;s.close<h.close?i-=s.volume??0:s.close>h.close&&(i+=s.volume??0);const p={obv:i};return n+=i,u>=r[0].value-1&&(p.maObv=n/r[0].value,n-=((d=o[e[u-(r[0].value-1)].timestamp])==null?void 0:d.obv)??0),o[s.timestamp]=p,o},{})}},uM={isMainIndicator:!0,isSubIndicator:!1,name:"Chandelier Exit",shortName:"CE",series:"price",calcParams:[{name:"period",type:"number",value:22},{name:"multiplier",type:"number",value:3}],precision:2,shouldOhlc:!0,styles:{lines:[{style:"solid",color:"#26A69A",size:1},{style:"solid",color:"#EF5350",size:1}]},figures:[{key:"exitLong",title:"Long Exit: ",type:"line"},{key:"exitShort",title:"Short Exit: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value;let o=-1/0,s=1/0,u=0,d=e[0].close;return e.reduce((h,p,f)=>{const m=p,{high:x,low:b,close:C}=m,_=Math.max(x-b,Math.abs(x-d),Math.abs(b-d));if(u+=_,o=Math.max(o,x),s=Math.min(s,b),f>=n-1){const k=u/n,M=o-k*i,L=s+k*i;h[p.timestamp]={exitLong:M,exitShort:L};const A=f-(n-1),P=e[A],W=Math.max(P.high-P.low,Math.abs(P.high-(A>0?e[A-1].close:P.close)),Math.abs(P.low-(A>0?e[A-1].close:P.close)));u-=W,o=x,s=b;for(let D=0;D<n;D++){const $=e[f-D];o=Math.max(o,$.high),s=Math.min(s,$.low)}}return d=C,h},{})}},dM={isMainIndicator:!0,isSubIndicator:!1,name:"Keltner Channels",shortName:"KC",series:"price",calcParams:[{name:"maPeriod",type:"number",value:20},{name:"atrPeriod",type:"number",value:10},{name:"multiplier",type:"number",value:1},{name:"useSMA",type:"boolean",value:!1}],precision:2,shouldOhlc:!0,styles:{lines:[{style:"solid",color:"#FF0000",size:1},{style:"solid",color:"#4DB6AC",size:1},{style:"solid",color:"#4DB6AC",size:1}]},figures:[{key:"middle",title:"Middle: ",type:"line"},{key:"upper",title:"Upper: ",type:"line"},{key:"lower",title:"Lower: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=r[3].value,u=[];let d=0,h=0;const p=2/(n+1);let f=0,m=e[0].close;return e.reduce((x,b,C)=>{const _=b,{high:k,low:M,close:L}=_,A=Math.max(k-M,Math.abs(k-m),Math.abs(M-m));if(f+=A,d+=L,s?(u.push(L),u.length>n&&(d-=u[u.length-n-1])):C===0?h=L:h=(L-h)*p+h,C>=Math.max(n-1,i-1)){const P=s?d/Math.min(u.length,n):h,W=f/i;if(x[b.timestamp]={middle:P,upper:P+o*W,lower:P-o*W},C>=i){const D=C-i,$=e[D],z=Math.max($.high-$.low,Math.abs($.high-(D>0?e[D-1].close:$.close)),Math.abs($.low-(D>0?e[D-1].close:$.close)));f-=z}}return m=L,x},{})}},hM={isMainIndicator:!0,isSubIndicator:!1,name:"WMA",shortName:"WMA",series:"price",calcParams:[{name:"period",type:"number",value:12}],precision:2,styles:{lines:[{color:"#B464EB"}]},figures:[{key:"wma",title:"WMA: ",type:"line"}],shouldOhlc:!0,calc:(e,t)=>{const r=t.calcParams[0].value,n=r*(r+1)/2;return e.reduce((i,o,s)=>{if(s>=r-1){let u=0;for(let d=0;d<r;d++)u+=e[s-d].close*(r-d);i[o.timestamp]={wma:u/n}}return i},{})}},pM={isMainIndicator:!0,isSubIndicator:!1,name:"Ichimoku Cloud",shortName:"IC",calcParams:[{name:"conversionPeriod",type:"number",value:9},{name:"basePeriod",type:"number",value:26},{name:"spanPeriod",type:"number",value:52},{name:"displacement",type:"number",value:26},{name:"showShading",type:"boolean",value:!0}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#32CD32",size:1},{color:"#FF4500",size:1},{color:"#1E90FF",size:1}]},figures:[{key:"conversion",title:"Conversion: ",type:"line"},{key:"base",title:"Base: ",type:"line"},{key:"spanA",title:"Span A: ",type:"line"},{key:"spanB",title:"Span B: ",type:"line"},{key:"laggingSpan",title:"Chikou: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=r[3].value,u=(p,f,m)=>{let x=-1/0,b=1/0;for(let C=Math.max(0,f-m+1);C<=f;C++)x=Math.max(x,p[C].high),b=Math.min(b,p[C].low);return{high:x,low:b}},d=[],h=[];return e.reduce((p,f,m)=>{const x={};if(m>=n-1){const{high:k,low:M}=u(e,m,n);x.conversion=(k+M)/2,d[m]=x.conversion}if(m>=i-1){const{high:k,low:M}=u(e,m,i);x.base=(k+M)/2,h[m]=x.base}const b=m-s;b>=0&&b>=Math.max(n,i)-1&&d[b]&&h[b]&&(x.spanA=(d[b]+h[b])/2);const C=m-s;if(C>=0&&C>=o-1){const{high:k,low:M}=u(e,C,o);x.spanB=(k+M)/2}const _=m+s;return _<e.length&&(x.laggingSpan=e[_].close),Object.keys(x).length>0&&(p[f.timestamp]=x),p},{})},draw:({ctx:e,indicator:t,xAxis:r,yAxis:n,chart:i})=>{var o,s,u,d,h,p,f;const m=t.result;if(!m)return!1;const{from:x,to:b}=i.getVisibleRange(),C=i.getDataList(),_=[],k=[],M=[];for(let L=x;L<b;L++)if(L<C.length){const A=C[L],P=m[A.timestamp];P!=null&&(_.push(r.convertToPixel(L)),P.spanA!=null&&k.push(n.convertToPixel(P.spanA)),P.spanB!=null&&M.push(n.convertToPixel(P.spanB)))}if((((o=t.calcParams.find(L=>L.name==="showShading"))==null?void 0:o.value)??!0)&&_.length>0&&k.length>0&&M.length>0){const L=Fl(((d=(u=(s=t.styles)==null?void 0:s.lines)==null?void 0:u[2])==null?void 0:d.color)??"#32CD32");Dl(e,_,k,M,`rgba(${L.r}, ${L.g}, ${L.b}, 0.1)`);const A=Fl(((f=(p=(h=t.styles)==null?void 0:h.lines)==null?void 0:p[3])==null?void 0:f.color)??"#FF4500");Dl(e,_,M,k,`rgba(${A.r}, ${A.g}, ${A.b}, 0.1)`)}return!1}},fM={isMainIndicator:!1,isSubIndicator:!0,name:"ATR",shortName:"ATR",series:"volume",calcParams:[{name:"period",type:"number",value:14}],precision:2,shouldOhlc:!1,styles:{lines:[{style:"solid",color:"#FF7F50",size:1}]},figures:[{key:"atr",title:"ATR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=e[0].close,i=0;const o=2/(r[0].value+1);let s=[];return e.reduce((u,d,h)=>{const{high:p,low:f,close:m}=d,x=Math.max(p-f,Math.abs(p-n),Math.abs(f-n));return s.push(x),h>=r[0].value-1&&(h===r[0].value-1?i=s.reduce((b,C)=>b+C,0)/r[0].value:i=(x-i)*o+i,u[d.timestamp]={atr:i}),n=m,u},{})}},gM={isMainIndicator:!1,isSubIndicator:!0,name:"ADXR",shortName:"ADXR",series:"volume",calcParams:[{name:"period",type:"number",value:14},{name:"adxrPeriod",type:"number",value:6}],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"adxr",title:"ADXR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=0;const f={};return e.reduce((m,x,b)=>{var C;const _=e[b-1]??x,k=_.close,M=x.high,L=x.low,A=M-L,P=Math.abs(M-k),W=Math.abs(k-L),D=M-_.high,$=_.low-L,z=Math.max(Math.max(A,P),W),B=D>0&&D>$?D:0,Z=$>0&&$>D?$:0;if(n+=z,i+=B,o+=Z,b>=r[0].value-1){b>r[0].value-1?(s=s-s/r[0].value+z,u=u-u/r[0].value+B,d=d-d/r[0].value+Z):(s=n,u=i,d=o);let J=0,H=0;s!==0&&(J=u*100/s,H=d*100/s);let ee=0;if(H+J!==0&&(ee=Math.abs(H-J)/(H+J)*100),h+=ee,b>=r[0].value*2-2&&(b>r[0].value*2-2?p=(p*(r[0].value-1)+ee)/r[0].value:p=h/r[0].value,f[x.timestamp]=p,b>=r[0].value*2+r[1].value-3)){const le=(C=e[b-(r[1].value-1)])==null?void 0:C.timestamp,ce=((f[le]??0)+p)/2;m[x.timestamp]={adxr:ce}}}return m},{})}},vM={isMainIndicator:!1,isSubIndicator:!0,name:"PDI",shortName:"PDI",series:"volume",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#00ff00",size:1}]},figures:[{key:"pdi",title:"PDI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0;return e.reduce((u,d,h)=>{const p=e[h-1]??d,f=p.close,m=d.high,x=d.low,b=m-x,C=Math.abs(m-f),_=Math.abs(f-x),k=m-p.high,M=p.low-x,L=Math.max(Math.max(b,C),_),A=k>0&&k>M?k:0;if(n+=L,i+=A,h>=r[0].value-1&&(h>r[0].value-1?(o=o-o/r[0].value+L,s=s-s/r[0].value+A):(o=n,s=i),o!==0)){const P=s*100/o;u[d.timestamp]={pdi:P}}return u},{})}},mM={isMainIndicator:!1,isSubIndicator:!0,name:"MDI",shortName:"MDI",series:"volume",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"mdi",title:"MDI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0;return e.reduce((u,d,h)=>{const p=e[h-1]??d,f=p.close,m=d.high,x=d.low,b=m-x,C=Math.abs(m-f),_=Math.abs(f-x),k=m-p.high,M=p.low-x,L=Math.max(Math.max(b,C),_),A=M>0&&M>k?M:0;if(n+=L,i+=A,h>=r[0].value-1&&(h>r[0].value-1?(o=o-o/r[0].value+L,s=s-s/r[0].value+A):(o=n,s=i),o!==0)){const P=s*100/o;u[d.timestamp]={mdi:P}}return u},{})}},yM={isMainIndicator:!1,isSubIndicator:!0,name:"ADX",shortName:"ADX",series:"volume",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#007FFF",size:1}]},figures:[{key:"adx",title:"ADX: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=0;return e.reduce((f,m,x)=>{const b=e[x-1]??m,C=b.close,_=m.high,k=m.low,M=_-k,L=Math.abs(_-C),A=Math.abs(C-k),P=_-b.high,W=b.low-k,D=Math.max(Math.max(M,L),A),$=P>0&&P>W?P:0,z=W>0&&W>P?W:0;if(n+=D,i+=$,o+=z,x>=r[0].value-1){x>r[0].value-1?(s=s-s/r[0].value+D,u=u-u/r[0].value+$,d=d-d/r[0].value+z):(s=n,u=i,d=o);let B=0,Z=0;s!==0&&(B=u*100/s,Z=d*100/s);let J=0;Z+B!==0&&(J=Math.abs(Z-B)/(Z+B)*100),h+=J,x>=r[0].value*2-2&&(x>r[0].value*2-2?p=(p*(r[0].value-1)+J)/r[0].value:p=h/r[0].value,f[m.timestamp]={adx:p})}return f},{})}},bM={isMainIndicator:!1,isSubIndicator:!0,name:"TR",shortName:"TR",series:"volume",calcParams:[],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"tr",title:"TR: ",type:"line"}],calc:e=>{let t;return e.reduce((r,n)=>{const i=n.high,o=n.low,s=n.close;let u;return t===void 0?(t=s,u=i-o):(u=Math.max(i-o,Math.abs(i-t),Math.abs(o-t)),t=s),r[n.timestamp]={tr:u},r},{})}},xM={isMainIndicator:!0,isSubIndicator:!1,name:"WS",shortName:"WS",series:"volume",calcParams:[14],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"ws",title:"WS: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0];let n=0,i=1,o=0;return e.reduce((s,u)=>{const d=u.close;let h;return i<r?(i++,n+=d,h=n/i):i===r?(i++,n+=d,o=n/r,h=o):(o=(o*(r-1)+d)/r,h=o),s[u.timestamp]={ws:h},s},{})}},wM={isMainIndicator:!1,isSubIndicator:!0,name:"Chaikin Oscillator",shortName:"CO",series:"volume",calcParams:[{name:"shortPeriod",type:"number",value:3},{name:"longPeriod",type:"number",value:10}],styles:{lines:[{color:"#FF9800",size:1}]},figures:[{key:"co",title:"CO: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value;let o=0;const s=[];e.forEach(h=>{const p=h.high,f=h.low,m=h.close,x=h.volume??0;let b=0;p!==f&&(b=(m-f-(p-m))/(p-f));const C=b*x;o+=C,s.push(o)});const u=so(s,n),d=so(s,i);return e.reduce((h,p,f)=>(f>=i-1&&(h[p.timestamp]={co:u[f]-d[f]}),h),{})}},CM={isMainIndicator:!1,isSubIndicator:!0,name:"Percentage Price Oscillator",shortName:"PPO",series:"volume",calcParams:[{name:"fastPeriod",type:"number",value:12},{name:"slowPeriod",type:"number",value:26},{name:"signalPeriod",type:"number",value:9}],styles:{lines:[{color:"#FF9800",size:1},{color:"#4CAF50",size:1}],bars:[{upColor:"#2196F3",downColor:"#FF5252"}]},figures:[{key:"ppo",title:"PPO: ",type:"line"},{key:"signal",title:"Signal: ",type:"line"},{key:"histogram",title:"Histogram: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.histogram&&n.histogram>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.histogram&&n.histogram<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=e.map(f=>f.close),u=so(s,n),d=so(s,i),h=[];e.forEach((f,m)=>{if(m>=i-1){const x=(u[m]-d[m])/d[m]*100;h.push(x)}});const p=so(h,o);return e.reduce((f,m,x)=>{if(x>=i-1){const b=(u[x]-d[x])/d[x]*100,C={ppo:b};x>=i+o-1&&(C.signal=p[x-(i-1)],C.histogram=b-C.signal),f[m.timestamp]=C}return f},{})}},_M={isMainIndicator:!1,isSubIndicator:!0,name:"Percentage Volume Oscillator",shortName:"PVO",series:"volume",calcParams:[{name:"shortPeriod",type:"number",value:12},{name:"longPeriod",type:"number",value:26},{name:"signalPeriod",type:"number",value:9}],styles:{lines:[{color:"#FF9800",size:1},{color:"#4CAF50",size:1}],bars:[{upColor:"#2196F3",downColor:"#FF5252"}]},figures:[{key:"pvo",title:"PVO: ",type:"line"},{key:"signal",title:"Signal: ",type:"line"},{key:"histogram",title:"Histogram: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.histogram&&n.histogram>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.histogram&&n.histogram<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=[],u=e.map(m=>m.volume),d=so(u,n),h=so(u,i),p=[];e.forEach((m,x)=>{if(x>=i-1){const b=(d[x]-h[x])/h[x]*100;p.push(b),s[x]={pvo:b}}else s[x]={}});const f=so(p,o);return e.forEach((m,x)=>{x>=i+o-1&&(s[x].signal=f[x-(i-1)],s[x].pvo!==void 0&&(s[x].histogram=s[x].pvo-s[x].signal))}),s}},SM={isMainIndicator:!1,isSubIndicator:!0,name:"Qstick",shortName:"QS",series:"price",calcParams:[{name:"period",type:"number",value:20}],styles:{lines:[{color:"#2196F3",size:1}],bars:[{upColor:"#4CAF50",downColor:"#FF5252"}]},figures:[{key:"qstick",title:"Qstick: ",type:"line"},{key:"qstick",title:"Qstick: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.qstick&&n.qstick>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.qstick&&n.qstick<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams[0].value,n=e.map(o=>o.close-o.open),i=x2(n,r);return e.reduce((o,s,u)=>(u>=r-1&&(o[s.timestamp]={qstick:i[u-(r-1)]}),o),{})}},kM={isMainIndicator:!1,isSubIndicator:!0,name:"Absolute Price Oscillator",shortName:"APO",series:"price",calcParams:[{name:"fastPeriod",type:"number",value:14},{name:"slowPeriod",type:"number",value:30}],styles:{lines:[{color:"#2196F3",size:1}],bars:[{upColor:"#4CAF50",downColor:"#FF5252"}]},figures:[{key:"apo",title:"APO: ",type:"line"},{key:"apo",title:"APO: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.apo&&n.apo>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.apo&&n.apo<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=e.map(d=>d.close),s=so(o,n),u=so(o,i);return e.reduce((d,h,p)=>{if(p>=i-1){const f={apo:s[p]-u[p]};d[h.timestamp]=f}return d},{})}},MM={isMainIndicator:!1,isSubIndicator:!0,name:"Aroon",shortName:"AROON",series:"price",calcParams:[{name:"Length",type:"number",value:14}],styles:{lines:[{color:"#4CAF50",size:1},{color:"#FF5252",size:1}]},figures:[{key:"up",title:"Aroon Up: ",type:"line"},{key:"down",title:"Aroon Down: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0].value;return e.reduce((n,i,o)=>{if(o>=r-1){const s=e.slice(o-r+1,o+1),u=Math.max(...s.map(x=>x.high)),d=Math.min(...s.map(x=>x.low));let h=0,p=0;for(let x=r-1;x>=0;x--)if(s[x].high===u){h=x;break}for(let x=r-1;x>=0;x--)if(s[x].low===d){p=x;break}const f=Math.round((r-p)/r*100),m=Math.round((r-h)/r*100);n[i.timestamp]={up:f,down:m}}return n},{})}},TM={isMainIndicator:!1,isSubIndicator:!0,name:"Balance of Power",shortName:"BOP",series:"price",calcParams:[],styles:{lines:[{color:"#2196F3",size:1}]},figures:[{key:"value",title:"BOP: ",type:"line"}],calc:(e,t)=>e.reduce((r,n)=>{if(Sr(n.open)&&Sr(n.high)&&Sr(n.low)&&Sr(n.close)){const i=n.high-n.low;if(i!==0){const o=(n.close-n.open)/i;r[n.timestamp]={value:o}}else r[n.timestamp]={value:0}}return r},{})},EM={isMainIndicator:!0,isSubIndicator:!1,name:"Double Exponential Moving Average",shortName:"DEMA",series:"price",calcParams:[{name:"ema1Period",type:"number",value:10},{name:"ema2Period",type:"number",value:16}],styles:{lines:[{color:"#2196F3",size:1}]},figures:[{key:"value",title:"DEMA: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=e.map(d=>d.close),s=so(o,n),u=so(s,i);return e.reduce((d,h,p)=>{if(p>=n+i-2){const f=2*s[p]-u[p];d[h.timestamp]={value:f}}return d},{})}},IM={isMainIndicator:!0,isSubIndicator:!1,name:"Envelope (SMA)",shortName:"ENV",series:"price",calcParams:[{name:"period",type:"number",value:20},{name:"percentage",type:"number",value:10},{name:"showShading",type:"boolean",value:!0}],styles:{lines:[{color:"#FF5252",size:1},{color:"#2196F3",size:1},{color:"#4CAF50",size:1}]},figures:[{key:"upper",title:"Upper: ",type:"line"},{key:"middle",title:"Middle: ",type:"line"},{key:"lower",title:"Lower: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=e.map(u=>u.close),s=x2(o,n);return e.reduce((u,d,h)=>{if(h>=n-1){const p=s[h],f=s[h],m=s[h],x=p*(1+i/100),b=m*(1-i/100);u[d.timestamp]={upper:x,middle:f,lower:b}}return u},{})},draw:({ctx:e,indicator:t,xAxis:r,yAxis:n,chart:i})=>{var o,s,u,d,h,p;const f=t.result;if(!f)return!1;const{from:m,to:x}=i.getVisibleRange(),b=[],C=[],_=[],k=[];for(let M=m;M<x;M++){const L=f[M];L!=null&&(b.push(r.convertToPixel(M)),L.upper!=null&&C.push(n.convertToPixel(L.upper)),L.middle!=null&&_.push(n.convertToPixel(L.middle)),L.lower!=null&&k.push(n.convertToPixel(L.lower)))}if(t.calcParams[2].value){const M=Fl(((u=(s=(o=t.styles)==null?void 0:o.lines)==null?void 0:s[0])==null?void 0:u.color)??"#E91E63");Dl(e,b,C,_,`rgba(${M.r}, ${M.g}, ${M.b}, 0.1)`);const L=Fl(((p=(h=(d=t.styles)==null?void 0:d.lines)==null?void 0:h[2])==null?void 0:p.color)??"#673AB7");Dl(e,b,_,k,`rgba(${L.r}, ${L.g}, ${L.b}, 0.1)`)}return!1}},LM={isMainIndicator:!0,isSubIndicator:!1,name:"Envelope (EMA)",shortName:"ENV-EMA",series:"price",calcParams:[{name:"period",type:"number",value:20,min:1,max:100},{name:"percentage",type:"number",value:20,min:0,max:100},{name:"showShading",type:"boolean",value:!0}],styles:{lines:[{color:"#E91E63",size:1},{color:"#9C27B0",size:1},{color:"#673AB7",size:1}]},figures:[{key:"upper",title:"Upper: ",type:"line"},{key:"middle",title:"Middle: ",type:"line"},{key:"lower",title:"Lower: ",type:"line"}],calc:(e,t)=>{var r,n;const i=t.calcParams,o=((r=i.find(h=>h.name==="period"))==null?void 0:r.value)??20,s=((n=i.find(h=>h.name==="percentage"))==null?void 0:n.value)??20,u=e.map(h=>h.close),d=so(u,o);return e.reduce((h,p,f)=>{if(f>=o-1){const m=d[f],x=d[f],b=d[f],C=m*(1+s/100),_=b*(1-s/100);h[p.timestamp]={upper:C,middle:x,lower:_}}return h},{})},draw:({ctx:e,indicator:t,xAxis:r,yAxis:n,chart:i})=>{var o,s,u,d,h,p,f;const m=t.result;if(!m)return!1;const{from:x,to:b}=i.getVisibleRange(),C=[],_=[],k=[],M=[];for(let L=x;L<b;L++){const A=m[L];A!=null&&(C.push(r.convertToPixel(L)),A.upper!=null&&_.push(n.convertToPixel(A.upper)),A.middle!=null&&k.push(n.convertToPixel(A.middle)),A.lower!=null&&M.push(n.convertToPixel(A.lower)))}if(((o=t.calcParams.find(L=>L.name==="showShading"))==null?void 0:o.value)??!0){const L=Fl(((d=(u=(s=t.styles)==null?void 0:s.lines)==null?void 0:u[0])==null?void 0:d.color)??"#E91E63");Dl(e,C,_,k,`rgba(${L.r}, ${L.g}, ${L.b}, 0.1)`);const A=Fl(((f=(p=(h=t.styles)==null?void 0:h.lines)==null?void 0:p[2])==null?void 0:f.color)??"#673AB7");Dl(e,C,k,M,`rgba(${A.r}, ${A.g}, ${A.b}, 0.1)`)}return!1}},PM={name:"Volume Price Trend",shortName:"VPT",series:"volume",calcParams:[],precision:2,isMainIndicator:!1,isSubIndicator:!0,styles:{lines:[{style:"solid",color:"#FF7F50",size:1}]},figures:[{key:"vpt",title:"VPT: ",type:"line"}],calc:(e,t)=>{let r=0;return e.reduce((n,i,o)=>{if(i.close===void 0||i.volume===void 0)return n[i.timestamp]={vpt:0},n;if(o===0)return n[i.timestamp]={vpt:0},n;const s=e[o-1].close,u=e[o-1].volume;if(s===void 0||s===0||u===void 0)return n[i.timestamp]={vpt:r},n;const d=(i.close-s)/s,h=r+u*d;return r=h,n[i.timestamp]={vpt:h},n},{})},shouldOhlc:!0,draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s;const{realFrom:u,realTo:d}=t.getVisibleRange(),{result:h}=r,p=Vd("line");for(let f=u;f<d;f++){const m=h[f];m&&m.vpt!==0&&new p({name:"line",styles:{style:r.styles.lines[0].style,color:r.styles.lines[0].color,size:r.styles.lines[0].size},attrs:{coordinates:[{x:i.convertToPixel(f),y:o.convertToPixel(m.vpt)},{x:i.convertToPixel(f+1),y:o.convertToPixel((s=h[f+1])==null?void 0:s.vpt)}]}}).draw(e)}return!0}},AM={name:"Negative Volume Index",shortName:"NVI",series:"price",calcParams:[{name:"Length",type:"number",value:5,min:1,max:1e4}],precision:2,isMainIndicator:!1,isSubIndicator:!0,styles:{lines:[{style:"solid",color:"#2196F3",size:1}]},figures:[{key:"nvi",title:"NVI: ",type:"line"}],calc:(e,t)=>{var r;const n=((r=t.calcParams.find(o=>o.name==="Length"))==null?void 0:r.value)??1e3;let i=n;return e.reduce((o,s,u)=>{if(s.close===void 0||s.volume===void 0)return o[s.timestamp]={nvi:0},o;if(u===0)return o[s.timestamp]={nvi:n},o;const d=e[u-1].close,h=e[u-1].volume;if(d===void 0||d===0||h===void 0)return o[s.timestamp]={nvi:i},o;const p=(s.close-d)/d;let f=i;return s.volume<=h&&(f=i+p*i),i=f,o[s.timestamp]={nvi:f},o},{})}},DM={isMainIndicator:!1,isSubIndicator:!0,name:"Money Flow Volume",shortName:"MFV",series:"volume",calcParams:[],styles:{lines:[{color:"#2196F3",size:1}]},figures:[{key:"mfv",title:"MFV: ",type:"line"}],calc:(e,t)=>{const r=[];return e.forEach((n,i)=>{if(!Sr(n.high)||!Sr(n.low)||!Sr(n.close)||!Sr(n.volume)){r[i]={};return}const o=n.high-n.low;if(o===0){r[i]={mfv:0};return}const s=(n.close-n.low-(n.high-n.close))/o*n.volume;r[i]={mfv:s}}),r}},FM={isMainIndicator:!1,isSubIndicator:!0,name:"Money Flow Multiplier",shortName:"MFM",series:"price",calcParams:[],styles:{lines:[{color:"#FF9800",size:1}]},figures:[{key:"mfm",title:"MFM: ",type:"line"}],calc:(e,t)=>e.reduce((r,n,i)=>{if(!Sr(n.high)||!Sr(n.low)||!Sr(n.close))return r;const o=n.high-n.low;if(o===0)return r[n.timestamp]={mfm:0},r;const s=(n.close-n.low-(n.high-n.close))/o;return r[n.timestamp]={mfm:s},r},{})},RM={isMainIndicator:!0,isSubIndicator:!1,name:"Moving Linear Regression",shortName:"MLR",series:"price",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#2196F3",size:1.5}]},figures:[{key:"value",title:"MLR: ",type:"line"}],calc:(e,t)=>{const{calcParams:r}=t,n=r[0].value;return e.length<n?{}:e.reduce((i,o,s)=>{if(s<n-1)return i;const u=e.slice(s-(n-1),s+1);if(!u.every(k=>Sr(k.close)))return i;const d=Array.from({length:n},(k,M)=>M+1),h=u.map(k=>k.close),p=d.reduce((k,M)=>k+M,0)/n,f=h.reduce((k,M)=>k+M,0)/n;let m=0,x=0;for(let k=0;k<n;k++){const M=d[k]-p;m+=M*(h[k]-f),x+=M*M}const b=x!==0?m/x:0,C=f-b*p,_=b*n+C;return i[o.timestamp]={value:_},i},{})}},OM={isMainIndicator:!1,isSubIndicator:!0,name:"Moving Least Square",shortName:"MLS",series:"price",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#FF9800",size:1.5},{color:"#4CAF50",size:1},{color:"#F44336",size:1}]},figures:[{key:"line",title:"MLS: ",type:"line"},{key:"slope",title:"Slope: ",type:"line"},{key:"intercept",title:"Intercept: ",type:"line"}],calc:(e,t)=>{const{calcParams:r}=t,n=r[0].value;return e.length<n?{}:e.reduce((i,o,s)=>{if(s<n-1)return i;const u=e.slice(s-(n-1),s+1);if(!u.every(M=>Sr(M.close)))return i;const d=Array.from({length:n},(M,L)=>L+1),h=u.map(M=>M.close);let p=0,f=0,m=0,x=0;for(let M=0;M<n;M++)p+=d[M],f+=h[M],m+=d[M]*h[M],x+=d[M]*d[M];const b=n*x-p*p,C=b!==0?(n*m-p*f)/b:0,_=(f-C*p)/n,k=C*n+_;return i[o.timestamp]={slope:C,intercept:_,line:k},i},{})}},NM={isMainIndicator:!1,isSubIndicator:!0,name:"MACD",shortName:"MACD",calcParams:[{name:"fastPeriod",type:"number",value:12},{name:"slowPeriod",type:"number",value:26},{name:"signalPeriod",type:"number",value:9}],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const{prev:n,current:i}=e,o=(n==null?void 0:n.macd)??Number.MIN_SAFE_INTEGER,s=(i==null?void 0:i.macd)??Number.MIN_SAFE_INTEGER;let u="";return s>0?u=en(t.styles,"bars[0].upColor",r.bars[0].upColor):s<0?u=en(t.styles,"bars[0].downColor",r.bars[0].downColor):u=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor),{style:o<s?"stroke":"fill",color:u,borderColor:u}}}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0;const h=Math.max(r[0].value,r[1].value);return e.reduce((p,f,m)=>{const x=f.close;if(n+=x,m>=r[0].value-1&&(m>r[0].value-1?i=(2*x+(r[0].value-1)*i)/(r[0].value+1):i=n/r[0].value),m>=r[1].value-1&&(m>r[1].value-1?o=(2*x+(r[1].value-1)*o)/(r[1].value+1):o=n/r[1].value),m>=h-1){s=i-o,u+=s;const b={dif:s};m>=h+r[2].value-2&&(m>h+r[2].value-2?d=(s*2+d*(r[2].value-1))/(r[2].value+1):d=u/r[2].value,b.macd=(s-d)*2,b.dea=d),p[f.timestamp]=b}return p},{})}},ev=[Ak,Dk,Fk,Rk,Ok,Nk,zk,$k,Bk,Vk,Wk,Uk,Hk,Yk,Xk,jk,Zk,Gk,qk,Qk,Kk,eM,tM,rM,nM,_2,S2,iM,oM,aM,sM,lM,cM,uM,dM,hM,pM,fM,yM,gM,vM,mM,bM,xM,wM,CM,_M,SM,kM,MM,TM,EM,IM,LM,PM,AM,DM,FM,RM,OM,NM],zM=[_2,S2],Lp=[],F0=[],$M=[...ev];$M.forEach(e=>{e.isMainIndicator?WM(e.name):e.isSubIndicator?UM(e.name):console.warn("Unknown indicator type during initialization: ",e.name),Hy(e)});function BM(e){const t=[];return Lp.forEach(r=>{e.forEach(n=>{r===n&&t.push(n)})}),t}function VM(e){const t=[];return F0.forEach(r=>{e.forEach(n=>{r===n&&t.push(n)})}),t}function WM(e){Lp.includes(e)||Lp.push(e)}function UM(e){F0.includes(e)||F0.push(e)}function Am(){return[...ev]}var mr=(e=>(e.STOCKS="stocks",e.CRYPTO="crypto",e.FOREX="forex",e.FUTURES="futures",e))(mr||{});const qe={ONE_MIN:"1m",THREE_MIN:"3m",FIVE_MIN:"5m",FIFTEEN_MIN:"15m",THIRTY_MIN:"30m",ONE_HOUR:"1H",TWO_HOUR:"2H",FOUR_HOUR:"4H",SIX_HOUR:"6H",EIGHT_HOUR:"8H",TWELVE_HOUR:"12h",ONE_DAY:"D",THREE_DAY:"3D",FIVE_DAY:"5D",ONE_WEEK:"W",ONE_MONTH:"M",THREE_MONTH:"3M",SIX_MONTH:"6M",ONE_YEAR:"Y",FIVE_YEAR:"5Y",DEFAULT:"default"},Sn={MINUTE:"minute",HOUR:"hour",DAY:"day",WEEK:"week",MONTH:"month"};var V0=(e=>(e.RENKO="renko",e))(V0||{});const Dm={[qe.ONE_MIN]:"1m",[qe.THREE_MIN]:"3m",[qe.FIVE_MIN]:"5m",[qe.FIFTEEN_MIN]:"15m",[qe.THIRTY_MIN]:"30m",[qe.ONE_HOUR]:"1h",[qe.TWO_HOUR]:"2h",[qe.FOUR_HOUR]:"4h",[qe.SIX_HOUR]:"6h",[qe.EIGHT_HOUR]:"8h",[qe.TWELVE_HOUR]:"12h",[qe.ONE_DAY]:"1d",[qe.THREE_DAY]:"3d",[qe.FIVE_DAY]:"5d",[qe.ONE_WEEK]:"1w",[qe.ONE_MONTH]:"1M",[qe.THREE_MONTH]:"3M",[qe.SIX_MONTH]:"6M",[qe.ONE_YEAR]:"1y",[qe.FIVE_YEAR]:"5y",[qe.DEFAULT]:"15m"};function Hc(e,t){return Dm[t.text]||Dm[qe.DEFAULT]}class Rd{static createBaseIconConfig(t){return{position:"middle",marginRight:0,marginBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,borderRadius:0,type:"icon_font",size:16,color:t,activeColor:t,backgroundColor:"transparent",activeBackgroundColor:"rgba(22, 119, 255, 0.15)"}}static createArrowDownIcon(t){const r=this.createArrowIcon(!1);return{...this.createBaseIconConfig(t),id:"arrow_down",position:"left",...r}}static createVisibleIcon(t){return{...this.createBaseIconConfig(t),id:"visible",marginLeft:8,marginTop:7,content:{code:"",family:"icomoon"}}}static createInvisibleIcon(t){return{...this.createBaseIconConfig(t),id:"invisible",marginLeft:8,marginTop:7,content:{code:"",family:"icomoon"}}}static createSettingIcon(t){return{...this.createBaseIconConfig(t),id:"setting",marginLeft:6,marginTop:7,content:{code:"",family:"icomoon"}}}static createCloseIcon(t){return{...this.createBaseIconConfig(t),id:"close",marginLeft:6,marginTop:7,content:{code:"",family:"icomoon"}}}static createIndicatorTooltipIcons(t){return[this.createVisibleIcon(t),this.createInvisibleIcon(t),this.createSettingIcon(t),this.createCloseIcon(t),this.createArrowDownIcon(t)]}static createCandleTooltipIcons(t){return[this.createArrowDownIcon(t)]}static getRightArrowCode(){return""}static getDownArrowCode(){return""}static createArrowIcon(t){return{marginTop:t?-3:-10,marginLeft:10,size:25,content:{code:t?this.getRightArrowCode():this.getDownArrowCode(),family:"Arial, sans-serif"}}}}class HM{static createDefaultIcons(t){return Rd.createIndicatorTooltipIcons(t)}static createTooltipConfig(t){const r=t==="dark"?"#929AA5":"#76808F";return{features:this.createDefaultIcons(r)}}}class YM{static createDefaultCandleIcons(t){const r=t==="dark"?"#929AA5":"#76808F";return Rd.createCandleTooltipIcons(r)}static createCandleTooltipConfig(t){return{features:this.createDefaultCandleIcons(t),offsetLeft:8,offsetTop:8,offsetRight:8,offsetBottom:8}}}const XM=(e,t)=>e===t,Ha=Symbol("solid-proxy"),jM=typeof Proxy=="function",Pg=Symbol("solid-track"),Pp={equals:XM};let k2=A2;const zs=1,Ap=2,M2={owned:null,cleanups:null,context:null,owner:null},rg={};var lr=null;let ng=null,xr=null,hi=null,Fs=null,Hp=0;function Od(e,t){const r=xr,n=lr,i=e.length===0,o=t===void 0?n:t,s=i?M2:{owned:null,cleanups:null,context:o?o.context:null,owner:o},u=i?e:()=>e(()=>Ze(()=>R0(s)));lr=s,xr=null;try{return Ya(u,!0)}finally{xr=r,lr=n}}function ye(e,t){t=t?Object.assign({},Pp,t):Pp;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(r.value)),P2(r,i));return[L2.bind(r),n]}function ZM(e,t,r){const n=Yp(e,t,!0,zs);Xd(n)}function Ne(e,t,r){const n=Yp(e,t,!1,zs);Xd(n)}function rt(e,t,r){k2=nT;const n=Yp(e,t,!1,zs);(!r||!r.render)&&(n.user=!0),Fs?Fs.push(n):Xd(n)}function Yt(e,t,r){r=r?Object.assign({},Pp,r):Pp;const n=Yp(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,Xd(n),L2.bind(n)}function GM(e){return e&&typeof e=="object"&&"then"in e}function qM(e,t,r){let n,i,o;typeof t=="function"?(n=e,i=t,o={}):(n=!0,i=e,o=t||{});let s=null,u=rg,d=!1,h="initialValue"in o,p=typeof n=="function"&&Yt(n);const f=new Set,[m,x]=(o.storage||ye)(o.initialValue),[b,C]=ye(void 0),[_,k]=ye(void 0,{equals:!1}),[M,L]=ye(h?"ready":"unresolved");function A(z,B,Z,J){return s===z&&(s=null,J!==void 0&&(h=!0),(z===u||B===u)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(J,{value:B})),u=rg,P(B,Z)),B}function P(z,B){Ya(()=>{B===void 0&&x(()=>z),L(B!==void 0?"errored":h?"ready":"unresolved"),C(B);for(const Z of f.keys())Z.decrement();f.clear()},!1)}function W(){const z=eT,B=m(),Z=b();if(Z!==void 0&&!s)throw Z;return xr&&xr.user,B}function D(z=!0){if(z!==!1&&d)return;d=!1;const B=p?p():n;if(B==null||B===!1){A(s,Ze(m));return}let Z;const J=u!==rg?u:Ze(()=>{try{return i(B,{value:m(),refetching:z})}catch(H){Z=H}});if(Z!==void 0){A(s,void 0,bp(Z),B);return}else if(!GM(J))return A(s,J,void 0,B),J;return s=J,"v"in J?(J.s===1?A(s,J.v,void 0,B):A(s,void 0,bp(J.v),B),J):(d=!0,queueMicrotask(()=>d=!1),Ya(()=>{L(h?"refreshing":"pending"),k()},!1),J.then(H=>A(J,H,void 0,B),H=>A(J,void 0,bp(H),B)))}Object.defineProperties(W,{state:{get:()=>M()},error:{get:()=>b()},loading:{get(){const z=M();return z==="pending"||z==="refreshing"}},latest:{get(){if(!h)return W();const z=b();if(z&&!s)throw z;return m()}}});let $=lr;return p?ZM(()=>($=lr,D(!1))):D(!1),[W,{refetch:z=>T2($,()=>D(z)),mutate:x}]}function Ba(e){return Ya(e,!1)}function Ze(e){if(xr===null)return e();const t=xr;xr=null;try{return e()}finally{xr=t}}function tv(e,t,r){const n=Array.isArray(e);let i;return o=>{let s;if(n){s=Array(e.length);for(let d=0;d<e.length;d++)s[d]=e[d]()}else s=e();const u=Ze(()=>t(s,i,o));return i=s,u}}function ki(e){rt(()=>Ze(e))}function Br(e){return lr===null||(lr.cleanups===null?lr.cleanups=[e]:lr.cleanups.push(e)),e}function Ag(){return xr}function QM(){return lr}function T2(e,t){const r=lr,n=xr;lr=e,xr=null;try{return Ya(t,!0)}catch(i){rv(i)}finally{lr=r,xr=n}}function KM(e){const t=xr,r=lr;return Promise.resolve().then(()=>{xr=t,lr=r;let n;return Ya(e,!1),xr=lr=null,n?n.done:void 0})}function E2(e,t){const r=Symbol("context");return{id:r,Provider:iT(r),defaultValue:e}}function I2(e){let t;return lr&&lr.context&&(t=lr.context[e.id])!==void 0?t:e.defaultValue}function JM(e){const t=Yt(e),r=Yt(()=>Dg(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let eT;function L2(){if(this.sources&&this.state)if(this.state===zs)Xd(this);else{const e=hi;hi=null,Ya(()=>Fp(this),!1),hi=e}if(xr){const e=this.observers?this.observers.length:0;xr.sources?(xr.sources.push(this),xr.sourceSlots.push(e)):(xr.sources=[this],xr.sourceSlots=[e]),this.observers?(this.observers.push(xr),this.observerSlots.push(xr.sources.length-1)):(this.observers=[xr],this.observerSlots=[xr.sources.length-1])}return this.value}function P2(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Ya(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],s=ng&&ng.running;s&&ng.disposed.has(o),(s?!o.tState:!o.state)&&(o.pure?hi.push(o):Fs.push(o),o.observers&&D2(o)),s||(o.state=zs)}if(hi.length>1e6)throw hi=[],new Error},!1)),t}function Xd(e){if(!e.fn)return;R0(e);const t=Hp;tT(e,e.value,t)}function tT(e,t,r){let n;const i=lr,o=xr;xr=lr=e;try{n=e.fn(t)}catch(s){return e.pure&&(e.state=zs,e.owned&&e.owned.forEach(R0),e.owned=null),e.updatedAt=r+1,rv(s)}finally{xr=o,lr=i}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?P2(e,n):e.value=n,e.updatedAt=r)}function Yp(e,t,r,n=zs,i){const o={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:lr,context:lr?lr.context:null,pure:r};return lr===null||lr!==M2&&(lr.owned?lr.owned.push(o):lr.owned=[o]),o}function Dp(e){if(e.state===0)return;if(e.state===Ap)return Fp(e);if(e.suspense&&Ze(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Hp);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===zs)Xd(e);else if(e.state===Ap){const n=hi;hi=null,Ya(()=>Fp(e,t[0]),!1),hi=n}}function Ya(e,t){if(hi)return e();let r=!1;t||(hi=[]),Fs?r=!0:Fs=[],Hp++;try{const n=e();return rT(r),n}catch(n){r||(Fs=null),hi=null,rv(n)}}function rT(e){if(hi&&(A2(hi),hi=null),e)return;const t=Fs;Fs=null,t.length&&Ya(()=>k2(t),!1)}function A2(e){for(let t=0;t<e.length;t++)Dp(e[t])}function nT(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:Dp(n)}for(t=0;t<r;t++)Dp(e[t])}function Fp(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const i=n.state;i===zs?n!==t&&(!n.updatedAt||n.updatedAt<Hp)&&Dp(n):i===Ap&&Fp(n,t)}}}function D2(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Ap,r.pure?hi.push(r):Fs.push(r),r.observers&&D2(r))}}function R0(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),i=r.observers;if(i&&i.length){const o=i.pop(),s=r.observerSlots.pop();n<i.length&&(o.sourceSlots[s]=n,i[n]=o,r.observerSlots[n]=s)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)R0(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)R0(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function bp(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function rv(e,t=lr){throw bp(e)}function Dg(e){if(typeof e=="function"&&!e.length)return Dg(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Dg(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function iT(e,t){return function(r){let n;return Ne(()=>n=Ze(()=>(lr.context={...lr.context,[e]:r.value},JM(()=>r.children))),void 0),n}}const oT=Symbol("fallback");function Fm(e){for(let t=0;t<e.length;t++)e[t]()}function aT(e,t,r={}){let n=[],i=[],o=[],s=0,u=t.length>1?[]:null;return Br(()=>Fm(o)),()=>{let d=e()||[],h=d.length,p,f;return d[Pg],Ze(()=>{let x,b,C,_,k,M,L,A,P;if(h===0)s!==0&&(Fm(o),o=[],n=[],i=[],s=0,u&&(u=[])),r.fallback&&(n=[oT],i[0]=Od(W=>(o[0]=W,r.fallback())),s=1);else if(s===0){for(i=new Array(h),f=0;f<h;f++)n[f]=d[f],i[f]=Od(m);s=h}else{for(C=new Array(h),_=new Array(h),u&&(k=new Array(h)),M=0,L=Math.min(s,h);M<L&&n[M]===d[M];M++);for(L=s-1,A=h-1;L>=M&&A>=M&&n[L]===d[A];L--,A--)C[A]=i[L],_[A]=o[L],u&&(k[A]=u[L]);for(x=new Map,b=new Array(A+1),f=A;f>=M;f--)P=d[f],p=x.get(P),b[f]=p===void 0?-1:p,x.set(P,f);for(p=M;p<=L;p++)P=n[p],f=x.get(P),f!==void 0&&f!==-1?(C[f]=i[p],_[f]=o[p],u&&(k[f]=u[p]),f=b[f],x.set(P,f)):o[p]();for(f=M;f<h;f++)f in C?(i[f]=C[f],o[f]=_[f],u&&(u[f]=k[f],u[f](f))):i[f]=Od(m);i=i.slice(0,s=h),n=d.slice(0)}return i});function m(x){if(o[f]=x,u){const[b,C]=ye(f);return u[f]=C,t(d[f],b)}return t(d[f])}}}function G(e,t){return Ze(()=>e(t||{}))}function ip(){return!0}const sT={get(e,t,r){return t===Ha?r:e.get(t)},has(e,t){return t===Ha?!0:e.has(t)},set:ip,deleteProperty:ip,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ip,deleteProperty:ip}},ownKeys(e){return e.keys()}};function ig(e){return(e=typeof e=="function"?e():e)?e:{}}function lT(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function Xp(...e){let t=!1;for(let s=0;s<e.length;s++){const u=e[s];t=t||!!u&&Ha in u,e[s]=typeof u=="function"?(t=!0,Yt(u)):u}if(jM&&t)return new Proxy({get(s){for(let u=e.length-1;u>=0;u--){const d=ig(e[u])[s];if(d!==void 0)return d}},has(s){for(let u=e.length-1;u>=0;u--)if(s in ig(e[u]))return!0;return!1},keys(){const s=[];for(let u=0;u<e.length;u++)s.push(...Object.keys(ig(e[u])));return[...new Set(s)]}},sT);const r={},n=Object.create(null);for(let s=e.length-1;s>=0;s--){const u=e[s];if(!u)continue;const d=Object.getOwnPropertyNames(u);for(let h=d.length-1;h>=0;h--){const p=d[h];if(p==="__proto__"||p==="constructor")continue;const f=Object.getOwnPropertyDescriptor(u,p);if(!n[p])n[p]=f.get?{enumerable:!0,configurable:!0,get:lT.bind(r[p]=[f.get.bind(u)])}:f.value!==void 0?f:void 0;else{const m=r[p];m&&(f.get?m.push(f.get.bind(u)):f.value!==void 0&&m.push(()=>f.value))}}}const i={},o=Object.keys(n);for(let s=o.length-1;s>=0;s--){const u=o[s],d=n[u];d&&d.get?Object.defineProperty(i,u,d):i[u]=d?d.value:void 0}return i}const cT=e=>`Stale read from <${e}>.`;function Vn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Yt(aT(()=>e.each,e.children,t||void 0))}function $e(e){const t=e.keyed,r=Yt(()=>e.when,void 0,void 0),n=t?r:Yt(r,void 0,{equals:(i,o)=>!i==!o});return Yt(()=>{const i=n();if(i){const o=e.children;return typeof o=="function"&&o.length>0?Ze(()=>o(t?i:()=>{if(!Ze(n))throw cT("Show");return r()})):o}return e.fallback},void 0,void 0)}const De=e=>Yt(()=>e());function uT(e,t,r){let n=r.length,i=t.length,o=n,s=0,u=0,d=t[i-1].nextSibling,h=null;for(;s<i||u<o;){if(t[s]===r[u]){s++,u++;continue}for(;t[i-1]===r[o-1];)i--,o--;if(i===s){const p=o<n?u?r[u-1].nextSibling:r[o-u]:d;for(;u<o;)e.insertBefore(r[u++],p)}else if(o===u)for(;s<i;)(!h||!h.has(t[s]))&&t[s].remove(),s++;else if(t[s]===r[o-1]&&r[u]===t[i-1]){const p=t[--i].nextSibling;e.insertBefore(r[u++],t[s++].nextSibling),e.insertBefore(r[--o],p),t[i]=r[o]}else{if(!h){h=new Map;let f=u;for(;f<o;)h.set(r[f],f++)}const p=h.get(t[s]);if(p!=null)if(u<p&&p<o){let f=s,m=1,x;for(;++f<i&&f<o&&!((x=h.get(t[f]))==null||x!==p+m);)m++;if(m>p-u){const b=t[s];for(;u<p;)e.insertBefore(r[u++],b)}else e.replaceChild(r[u++],t[s++])}else s++;else t[s++].remove()}}}const Rm="_$DX_DELEGATE";function dT(e,t,r,n={}){let i;return Od(o=>{i=o,t===document?e():R(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{i(),t.textContent=""}}function q(e,t,r,n){let i;const o=()=>{const u=document.createElement("template");return u.innerHTML=e,u.content.firstChild},s=()=>(i||(i=o())).cloneNode(!0);return s.cloneNode=s,s}function Xt(e,t=window.document){const r=t[Rm]||(t[Rm]=new Set);for(let n=0,i=e.length;n<i;n++){const o=e[n];r.has(o)||(r.add(o),t.addEventListener(o,hT))}}function Ve(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function st(e,t){t==null?e.removeAttribute("class"):e.className=t}function Wi(e,t,r,n){Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r}function kn(e,t,r){if(!t)return r?Ve(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let i,o;for(o in r)t[o]==null&&n.removeProperty(o),delete r[o];for(o in t)i=t[o],i!==r[o]&&(n.setProperty(o,i),r[o]=i);return r}function Tn(e,t,r){return Ze(()=>e(t,r))}function R(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return Rp(e,t,n,r);Ne(i=>Rp(e,t(),i,r),n)}function hT(e){let t=e.target;const r=`$$${e.type}`,n=e.target,i=e.currentTarget,o=d=>Object.defineProperty(e,"target",{configurable:!0,value:d}),s=()=>{const d=t[r];if(d&&!t.disabled){const h=t[`${r}Data`];if(h!==void 0?d.call(t,h,e):d.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},u=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const d=e.composedPath();o(d[0]);for(let h=0;h<d.length-2&&(t=d[h],!!s());h++){if(t._$host){t=t._$host,u();break}if(t.parentNode===i)break}}else u();o(n)}function Rp(e,t,r,n,i){for(;typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,s=n!==void 0;if(e=s&&r[0]&&r[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===r))return r;if(s){let u=r[0];u&&u.nodeType===3?u.data!==t&&(u.data=t):u=document.createTextNode(t),r=wd(e,r,n,u)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||o==="boolean")r=wd(e,r,n);else{if(o==="function")return Ne(()=>{let u=t();for(;typeof u=="function";)u=u();r=Rp(e,u,r,n)}),()=>r;if(Array.isArray(t)){const u=[],d=r&&Array.isArray(r);if(Fg(u,t,r,i))return Ne(()=>r=Rp(e,u,r,n,!0)),()=>r;if(u.length===0){if(r=wd(e,r,n),s)return r}else d?r.length===0?Om(e,u,n):uT(e,r,u):(r&&wd(e),Om(e,u));r=u}else if(t.nodeType){if(Array.isArray(r)){if(s)return r=wd(e,r,n,t);wd(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function Fg(e,t,r,n){let i=!1;for(let o=0,s=t.length;o<s;o++){let u=t[o],d=r&&r[e.length],h;if(!(u==null||u===!0||u===!1))if((h=typeof u)=="object"&&u.nodeType)e.push(u);else if(Array.isArray(u))i=Fg(e,u,d)||i;else if(h==="function")if(n){for(;typeof u=="function";)u=u();i=Fg(e,Array.isArray(u)?u:[u],Array.isArray(d)?d:[d])||i}else e.push(u),i=!0;else{const p=String(u);d&&d.nodeType===3&&d.data===p?e.push(d):e.push(document.createTextNode(p))}}return i}function Om(e,t,r=null){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],r)}function wd(e,t,r,n){if(r===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let o=!1;for(let s=t.length-1;s>=0;s--){const u=t[s];if(i!==u){const d=u.parentNode===e;!o&&!s?d?e.replaceChild(i,u):e.insertBefore(i,r):d&&u.remove()}else o=!0}}else e.insertBefore(i,r);return[i]}const pT="http://www.w3.org/2000/svg";function fT(e,t=!1){return t?document.createElementNS(pT,e):document.createElement(e)}function nv(e){const{useShadow:t}=e,r=document.createTextNode(""),n=()=>e.mount||document.body,i=QM();let o;return rt(()=>{o||(o=T2(i,()=>Yt(()=>e.children)));const s=n();if(s instanceof HTMLHeadElement){const[u,d]=ye(!1),h=()=>d(!0);Od(p=>R(s,()=>u()?p():o(),null)),Br(h)}else{const u=fT(e.isSVG?"g":"div",e.isSVG),d=t&&u.attachShadow?u.attachShadow({mode:"open"}):u;Object.defineProperty(u,"_$host",{get(){return r.parentNode},configurable:!0}),R(d,o),s.appendChild(u),e.ref&&e.ref(u),Br(()=>s.removeChild(u))}},void 0,{render:!0}),r}const Rg=Symbol("store-raw"),Nd=Symbol("store-node"),Is=Symbol("store-has"),F2=Symbol("store-self");function R2(e){let t=e[Ha];if(!t&&(Object.defineProperty(e,Ha,{value:t=new Proxy(e,mT)}),!Array.isArray(e))){const r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let i=0,o=r.length;i<o;i++){const s=r[i];n[s].get&&Object.defineProperty(e,s,{enumerable:n[s].enumerable,get:n[s].get.bind(t)})}}return t}function Rl(e){let t;return e!=null&&typeof e=="object"&&(e[Ha]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Wd(e,t=new Set){let r,n,i,o;if(r=e!=null&&e[Rg])return r;if(!Rl(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,u=e.length;s<u;s++)i=e[s],(n=Wd(i,t))!==i&&(e[s]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),u=Object.getOwnPropertyDescriptors(e);for(let d=0,h=s.length;d<h;d++)o=s[d],!u[o].get&&(i=e[o],(n=Wd(i,t))!==i&&(e[o]=n))}return e}function Op(e,t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function O0(e,t,r){if(e[t])return e[t];const[n,i]=ye(r,{equals:!1,internal:!0});return n.$=i,e[t]=n}function gT(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===Ha||t===Nd||(delete r.value,delete r.writable,r.get=()=>e[Ha][t]),r}function O2(e){Ag()&&O0(Op(e,Nd),F2)()}function vT(e){return O2(e),Reflect.ownKeys(e)}const mT={get(e,t,r){if(t===Rg)return e;if(t===Ha)return r;if(t===Pg)return O2(e),r;const n=Op(e,Nd),i=n[t];let o=i?i():e[t];if(t===Nd||t===Is||t==="__proto__")return o;if(!i){const s=Object.getOwnPropertyDescriptor(e,t);Ag()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(s&&s.get)&&(o=O0(n,t,o)())}return Rl(o)?R2(o):o},has(e,t){return t===Rg||t===Ha||t===Pg||t===Nd||t===Is||t==="__proto__"?!0:(Ag()&&O0(Op(e,Is),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:vT,getOwnPropertyDescriptor:gT};function Po(e,t,r,n=!1){if(!n&&e[t]===r)return;const i=e[t],o=e.length;r===void 0?(delete e[t],e[Is]&&e[Is][t]&&i!==void 0&&e[Is][t].$()):(e[t]=r,e[Is]&&e[Is][t]&&i===void 0&&e[Is][t].$());let s=Op(e,Nd),u;if((u=O0(s,t,i))&&u.$(()=>r),Array.isArray(e)&&e.length!==o){for(let d=e.length;d<o;d++)(u=s[d])&&u.$();(u=O0(s,"length",o))&&u.$(e.length)}(u=s[F2])&&u.$()}function N2(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const i=r[n];Po(e,i,t[i])}}function yT(e,t){if(typeof t=="function"&&(t=t(e)),t=Wd(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const i=t[r];e[r]!==i&&Po(e,r,i)}Po(e,"length",n)}else N2(e,t)}function C0(e,t,r=[]){let n,i=e;if(t.length>1){n=t.shift();const s=typeof n,u=Array.isArray(e);if(Array.isArray(n)){for(let d=0;d<n.length;d++)C0(e,[n[d]].concat(t),r);return}else if(u&&s==="function"){for(let d=0;d<e.length;d++)n(e[d],d)&&C0(e,[d].concat(t),r);return}else if(u&&s==="object"){const{from:d=0,to:h=e.length-1,by:p=1}=n;for(let f=d;f<=h;f+=p)C0(e,[f].concat(t),r);return}else if(t.length>1){C0(e[n],t,[n].concat(r));return}i=e[n],r=[n].concat(r)}let o=t[0];typeof o=="function"&&(o=o(i,r),o===i)||n===void 0&&o==null||(o=Wd(o),n===void 0||Rl(i)&&Rl(o)&&!Array.isArray(o)?N2(i,o):Po(e,n,o))}function Ol(...[e,t]){const r=Wd(e||{}),n=Array.isArray(r),i=R2(r);function o(...s){Ba(()=>{n&&s.length===1?yT(r,s[0]):C0(r,s)})}return[i,o]}const Og=Symbol("store-root");function Ed(e,t,r,n,i){const o=t[r];if(e===o)return;const s=Array.isArray(e);if(r!==Og&&(!Rl(e)||!Rl(o)||s!==Array.isArray(o)||i&&e[i]!==o[i])){Po(t,r,e);return}if(s){if(e.length&&o.length&&(!n||i&&e[0]&&e[0][i]!=null)){let h,p,f,m,x,b,C,_;for(f=0,m=Math.min(o.length,e.length);f<m&&(o[f]===e[f]||i&&o[f]&&e[f]&&o[f][i]===e[f][i]);f++)Ed(e[f],o,f,n,i);const k=new Array(e.length),M=new Map;for(m=o.length-1,x=e.length-1;m>=f&&x>=f&&(o[m]===e[x]||i&&o[m]&&e[x]&&o[m][i]===e[x][i]);m--,x--)k[x]=o[m];if(f>x||f>m){for(p=f;p<=x;p++)Po(o,p,e[p]);for(;p<e.length;p++)Po(o,p,k[p]),Ed(e[p],o,p,n,i);o.length>e.length&&Po(o,"length",e.length);return}for(C=new Array(x+1),p=x;p>=f;p--)b=e[p],_=i&&b?b[i]:b,h=M.get(_),C[p]=h===void 0?-1:h,M.set(_,p);for(h=f;h<=m;h++)b=o[h],_=i&&b?b[i]:b,p=M.get(_),p!==void 0&&p!==-1&&(k[p]=o[h],p=C[p],M.set(_,p));for(p=f;p<e.length;p++)p in k?(Po(o,p,k[p]),Ed(e[p],o,p,n,i)):Po(o,p,e[p])}else for(let h=0,p=e.length;h<p;h++)Ed(e[h],o,h,n,i);o.length>e.length&&Po(o,"length",e.length);return}const u=Object.keys(e);for(let h=0,p=u.length;h<p;h++)Ed(e[u[h]],o,u[h],n,i);const d=Object.keys(o);for(let h=0,p=d.length;h<p;h++)e[d[h]]===void 0&&Po(o,d[h],void 0)}function z2(e,t={}){const{merge:r,key:n="id"}=t,i=Wd(e);return o=>{if(!Rl(o)||!Rl(i))return i;const s=Ed(i,{[Og]:o},Og,r,n);return s===void 0?o:s}}function xp(e,t){switch(e){case"Etc/UTC":return I("utc",t);case"Pacific/Honolulu":return I("honolulu",t);case"America/Juneau":return I("juneau",t);case"America/Los_Angeles":return I("los_angeles",t);case"America/Chicago":return I("chicago",t);case"America/Toronto":return I("toronto",t);case"America/Sao_Paulo":return I("sao_paulo",t);case"Europe/London":return I("london",t);case"Europe/Berlin":return I("berlin",t);case"Asia/Bahrain":return I("bahrain",t);case"Asia/Dubai":return I("dubai",t);case"Asia/Ashkhabad":return I("ashkhabad",t);case"Asia/Almaty":return I("almaty",t);case"Asia/Bangkok":return I("bangkok",t);case"Asia/Shanghai":return I("shanghai",t);case"Asia/Tokyo":return I("tokyo",t);case"Australia/Sydney":return I("sydney",t);case"Pacific/Norfolk":return I("norfolk",t)}return e}function bT(e){return[{key:"Etc/UTC",text:I("utc",e)},{key:"Pacific/Honolulu",text:I("honolulu",e)},{key:"America/Juneau",text:I("juneau",e)},{key:"America/Los_Angeles",text:I("los_angeles",e)},{key:"America/Chicago",text:I("chicago",e)},{key:"America/Toronto",text:I("toronto",e)},{key:"America/Sao_Paulo",text:I("sao_paulo",e)},{key:"Europe/London",text:I("london",e)},{key:"Europe/Berlin",text:I("berlin",e)},{key:"Asia/Bahrain",text:I("bahrain",e)},{key:"Asia/Dubai",text:I("dubai",e)},{key:"Asia/Ashkhabad",text:I("ashkhabad",e)},{key:"Asia/Almaty",text:I("almaty",e)},{key:"Asia/Bangkok",text:I("bangkok",e)},{key:"Asia/Shanghai",text:I("shanghai",e)},{key:"Asia/Tokyo",text:I("tokyo",e)},{key:"Australia/Sydney",text:I("sydney",e)},{key:"Pacific/Norfolk",text:I("norfolk",e)}]}function xT(e,t,r,n){if(e&&e.length>0){r([]),n({});const i=e.map(d=>d.name),o=BM(i),s=VM(i);r(o);const u={};e.forEach(d=>{if(t!=null){const h={name:d.name,id:d.id,calcParams:d.calcParams,visible:d.visible,zLevel:d.zLevel,precision:d.precision,shortName:d.shortName,shouldOhlc:d.shouldOhlc,shouldFormatBigNumber:d.shouldFormatBigNumber,series:d.series,minValue:d.minValue,maxValue:d.maxValue,styles:d.styles,figures:d.figures};if(s.includes(d.name)){const p=t.getIndicators({name:d.name});if(p.length===0){const f=t.createIndicator(h,!0);f&&(u[d.name]=f)}else{const f=p[0];t.overrideIndicator({id:f.id,name:d.name,calcParams:d.calcParams,styles:d.styles,visible:d.visible,zLevel:d.zLevel,precision:d.precision,shortName:d.shortName,shouldOhlc:d.shouldOhlc,shouldFormatBigNumber:d.shouldFormatBigNumber,series:d.series,minValue:d.minValue,maxValue:d.maxValue,figures:d.figures}),u[d.name]=f.paneId}}else{const p=t.getIndicators({paneId:"candle_pane",name:d.name});p.length===0?t.createIndicator(h,!0,{id:"candle_pane"}):t.overrideIndicator({id:p[0].id,name:d.name,calcParams:d.calcParams,styles:d.styles,visible:d.visible,zLevel:d.zLevel,precision:d.precision,shortName:d.shortName,shouldOhlc:d.shouldOhlc,shouldFormatBigNumber:d.shouldFormatBigNumber,series:d.series,minValue:d.minValue,maxValue:d.maxValue,figures:d.figures})}}}),n(u)}}function wT(e,t){e.forEach(r=>{t!=null&&t.getIndicators({paneId:"candle_pane",name:r}).length===0&&Hg(t,r,!1,!0,{id:"candle_pane"})})}var CT=q("<button>");const $2=e=>(()=>{var t=CT();return Wi(t,"click",e.onClick),R(t,()=>e.children),Ne(r=>{var n=e.style,i=`chartspire-ui-button ${e.type??"confirm"} ${e.class??""}`;return r.e=kn(t,n,r.e),i!==r.t&&st(t,r.t=i),r},{e:void 0,t:void 0}),t})();Xt(["click"]);var _T=q('<svg viewBox="0 0 1024 1024"class=icon><path d="M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m-353.706667 567.04a42.496 42.496 0 0 1-60.16 0L243.626667 541.866667c-8.106667-8.106667-12.373333-18.773333-12.373334-29.866667s4.693333-22.186667 12.373334-29.866667a42.496 42.496 0 0 1 60.16 0L426.666667 604.586667l293.546666-293.546667a42.496 42.496 0 1 1 60.16 60.16l-323.413333 323.84z">'),ST=q('<svg viewBox="0 0 1024 1024"class=icon><path d="M245.333333 128h533.333334A117.333333 117.333333 0 0 1 896 245.333333v533.333334A117.333333 117.333333 0 0 1 778.666667 896H245.333333A117.333333 117.333333 0 0 1 128 778.666667V245.333333A117.333333 117.333333 0 0 1 245.333333 128z m0 64c-29.44 0-53.333333 23.893333-53.333333 53.333333v533.333334c0 29.44 23.893333 53.333333 53.333333 53.333333h533.333334c29.44 0 53.333333-23.893333 53.333333-53.333333V245.333333c0-29.44-23.893333-53.333333-53.333333-53.333333H245.333333z">'),kT=q("<div>"),MT=q("<span class=label>");const TT=()=>_T(),ET=()=>ST(),IT=e=>{const[t,r]=ye(e.checked??!1);return rt(()=>{"checked"in e&&r(e.checked)}),(()=>{var n=kT();return n.$$click=i=>{const o=!t();e.onChange!=null&&e.onChange(o),r(o)},R(n,(()=>{var i=De(()=>!!e.label);return()=>i()&&(()=>{var o=MT();return R(o,()=>e.label),o})()})(),null),R(n,(()=>{var i=De(()=>!!t());return()=>i()?G(TT,{}):G(ET,{})})(),null),Ne(i=>{var o=e.style,s=`chartspire-ui-checkbox ${t()&&"checked"||""} ${e.class||""}`;return i.e=kn(n,o,i.e),s!==i.t&&st(n,i.t=s),i},{e:void 0,t:void 0}),n})()};Xt(["click"]);var LT=q("<div class=chartspire-ui-loading><div class=loading-container><div class=spinner><div class=spinner-ring></div><div class=spinner-ring></div><div class=spinner-ring></div></div><div class=loading-text>Loading...");const B2=()=>LT();var PT=q('<div class=chartspire-ui-empty><svg class=icon viewBox="0 0 1024 1024"><path d="M855.6 427.2H168.5c-12.7 0-24.4 6.9-30.6 18L4.4 684.7C1.5 689.9 0 695.8 0 701.8v287.1c0 19.4 15.7 35.1 35.1 35.1H989c19.4 0 35.1-15.7 35.1-35.1V701.8c0-6-1.5-11.8-4.4-17.1L886.2 445.2c-6.2-11.1-17.9-18-30.6-18zM673.4 695.6c-16.5 0-30.8 11.5-34.3 27.7-12.7 58.5-64.8 102.3-127.2 102.3s-114.5-43.8-127.2-102.3c-3.5-16.1-17.8-27.7-34.3-27.7H119c-26.4 0-43.3-28-31.1-51.4l81.7-155.8c6.1-11.6 18-18.8 31.1-18.8h622.4c13 0 25 7.2 31.1 18.8l81.7 155.8c12.2 23.4-4.7 51.4-31.1 51.4H673.4zM819.9 209.5c-1-1.8-2.1-3.7-3.2-5.5-9.8-16.6-31.1-22.2-47.8-12.6L648.5 261c-17 9.8-22.7 31.6-12.6 48.4 0.9 1.4 1.7 2.9 2.5 4.4 9.5 17 31.2 22.8 48 13L807 257.3c16.7-9.7 22.4-31 12.9-47.8zM375.4 261.1L255 191.6c-16.7-9.6-38-4-47.8 12.6-1.1 1.8-2.1 3.6-3.2 5.5-9.5 16.8-3.8 38.1 12.9 47.8L337.3 327c16.9 9.7 38.6 4 48-13.1 0.8-1.5 1.7-2.9 2.5-4.4 10.2-16.8 4.5-38.6-12.4-48.4zM512 239.3h2.5c19.5 0.3 35.5-15.5 35.5-35.1v-139c0-19.3-15.6-34.9-34.8-35.1h-6.4C489.6 30.3 474 46 474 65.2v139c0 19.5 15.9 35.4 35.5 35.1h2.5z">');const AT=()=>PT();var DT=q("<ul>"),FT=q("<li>");const V2=e=>(()=>{var t=DT();return R(t,G($e,{get when(){return e.loading},get children(){return G(B2,{})}}),null),R(t,G($e,{get when(){var r;return!e.loading&&!e.children&&!((r=e.dataSource)!=null&&r.length)},get children(){return G(AT,{})}}),null),R(t,G($e,{get when(){return e.children},get children(){return e.children}}),null),R(t,G($e,{get when(){return!e.children},get children(){var r;return(r=e.dataSource)==null?void 0:r.map(n=>{var i;return((i=e.renderItem)==null?void 0:i.call(e,n))??FT()})}}),null),Ne(r=>{var n=e.style,i=`chartspire-ui-list ${e.class??""}`;return r.e=kn(t,n,r.e),i!==r.t&&st(t,r.t=i),r},{e:void 0,t:void 0}),t})();var RT=q('<div><div class=inner><div class=title-container><svg class=close-icon viewBox="0 0 1024 1024"><path d="M934.184927 199.723787 622.457206 511.452531l311.727721 311.703161c14.334473 14.229073 23.069415 33.951253 23.069415 55.743582 0 43.430138-35.178197 78.660524-78.735226 78.660524-21.664416 0-41.361013-8.865925-55.642275-23.069415L511.149121 622.838388 199.420377 934.490384c-14.204513 14.20349-33.901111 23.069415-55.642275 23.069415-43.482327 0-78.737272-35.230386-78.737272-78.660524 0-21.792329 8.864902-41.513486 23.094998-55.743582l311.677579-311.703161L88.135828 199.723787c-14.230096-14.255679-23.094998-33.92567-23.094998-55.642275 0-43.430138 35.254945-78.762855 78.737272-78.762855 21.741163 0 41.437761 8.813736 55.642275 23.069415l311.727721 311.727721L822.876842 88.389096c14.281261-14.255679 33.977859-23.069415 55.642275-23.069415 43.557028 0 78.735226 35.332716 78.735226 78.762855C957.254342 165.798117 948.5194 185.468109 934.184927 199.723787"></path></svg></div><div class=content-container>'),OT=q("<div class=button-container>");const Nl=e=>{const[t,r]=ye(!1);return ki(()=>{setTimeout(()=>{r(!0)},10)}),(()=>{var n=RT(),i=n.firstChild,o=i.firstChild,s=o.firstChild,u=o.nextSibling;return R(o,()=>e.title,s),Wi(s,"click",e.onClose),R(u,()=>e.children),R(i,(()=>{var d=De(()=>e.buttons!=null&&e.buttons.length>0);return()=>d()&&(()=>{var h=OT();return R(h,()=>e.buttons.map(p=>G($2,Xp(p,{get children(){return p.children}})))),Ne(p=>(p=e.buttonContainerPadding??"15px 20px 15px")!=null?h.style.setProperty("padding",p):h.style.removeProperty("padding")),h})()})(),null),Ne(d=>{var h=`chartspire-ui-modal ${t()?"modal-show":""}`,p=`${e.width??400}px`,f=`${e.height??"80%"}`,m={...e.contentHeight!==void 0&&{height:typeof e.contentHeight=="string"?e.contentHeight:`${e.contentHeight}px`},padding:e.padding??"0 26px"};return h!==d.e&&st(n,d.e=h),p!==d.t&&((d.t=p)!=null?i.style.setProperty("width",p):i.style.removeProperty("width")),f!==d.a&&((d.a=f)!=null?i.style.setProperty("height",f):i.style.removeProperty("height")),d.o=kn(u,m,d.o),d},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()};Xt(["click"]);var NT=q("<div tabindex=0><div class=selector-container><span class=value></span><i class=arrow>"),zT=q("<div class=drop-down-container><ul>"),$T=q("<li>");const jp=e=>{const[t,r]=ye(!1),[n,i]=ye(e.value);return(()=>{var o=NT(),s=o.firstChild,u=s.firstChild;return o.addEventListener("blur",d=>{r(!1)}),o.$$click=d=>{r(h=>!h)},R(u,n),R(o,(()=>{var d=De(()=>e.dataSource!=null&&e.dataSource.length>0);return()=>d()&&(()=>{var h=zT(),p=h.firstChild;return R(p,()=>e.dataSource.map(f=>{const m=f[e.valueKey??"text"]??f;return(()=>{var x=$T();return x.$$click=b=>{var C;b.stopPropagation(),n()!==m&&(i(m),(C=e.onSelected)==null||C.call(e,f)),r(!1)},R(x,m),x})()})),h})()})(),null),Ne(d=>{var h=e.style,p=`chartspire-ui-select ${e.class??""} ${t()?"chartspire-ui-select-show":""}`;return d.e=kn(o,h,d.e),p!==d.t&&st(o,d.t=p),d},{e:void 0,t:void 0}),o})()};Xt(["click"]);var BT=q("<span class=prefix>"),VT=q("<span class=suffix>"),WT=q("<div><input class=value>");const Wa=e=>{const t=Xp({min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER},e);let r;const[n,i]=ye("normal");return(()=>{var o=WT(),s=o.firstChild;return o.$$click=()=>{r==null||r.focus()},R(o,G($e,{get when(){return t.prefix},get children(){var u=BT();return R(u,()=>t.prefix),u}}),s),Wi(s,"input",t.onInput),s.addEventListener("change",u=>{var d,h;const p=u.target.value;if("precision"in t){let f;const m=Math.max(0,Math.floor(t.precision));m<=0?f=new RegExp(/^[1-9]\d*$/):f=new RegExp("^\\d+\\.?\\d{0,"+m+"}$"),(p===""||f.test(p)&&+p>=t.min&&+p<=t.max)&&((d=t.onChange)==null||d.call(t,p===""?p:+p))}else(h=t.onChange)==null||h.call(t,p)}),s.addEventListener("blur",()=>{i("normal")}),s.addEventListener("focus",()=>{i("focus")}),Tn(u=>{r=u},s),R(o,G($e,{get when(){return t.suffix},get children(){var u=VT();return R(u,()=>t.suffix),u}}),null),Ne(u=>{var d=t.style,h=`chartspire-ui-input ${t.class??""}`,p=n(),f=t.placeholder??"";return u.e=kn(o,d,u.e),h!==u.t&&st(o,u.t=h),p!==u.a&&Ve(o,"data-status",u.a=p),f!==u.o&&Ve(s,"placeholder",u.o=f),u},{e:void 0,t:void 0,a:void 0,o:void 0}),Ne(()=>s.value=t.value),o})()};Xt(["click","input"]);var UT=q("<div><i class=thumb>");const HT=e=>(()=>{var t=UT();return t.$$click=r=>{e.onChange&&e.onChange()},Ne(r=>{var n=e.style,i=`chartspire-ui-switch ${e.open?"turn-on":"turn-off"} ${e.class??""}`;return r.e=kn(t,n,r.e),i!==r.t&&st(t,r.t=i),r},{e:void 0,t:void 0}),t})();Xt(["click"]);var YT=q('<div class=chartspire-ui-modal-light><div><div class=title-container><div class=title-content><svg class=drag-handle viewBox="0 0 24 24"fill=currentColor><circle cx=8 cy=6 r=2></circle><circle cx=8 cy=12 r=2></circle><circle cx=8 cy=18 r=2></circle><circle cx=16 cy=6 r=2></circle><circle cx=16 cy=12 r=2></circle><circle cx=16 cy=18 r=2></circle></svg><span class=title-text></span></div><svg class=close-icon viewBox="0 0 1024 1024"><path d="M934.184927 199.723787 622.457206 511.452531l311.727721 311.703161c14.334473 14.229073 23.069415 33.951253 23.069415 55.743582 0 43.430138-35.178197 78.660524-78.735226 78.660524-21.664416 0-41.361013-8.865925-55.642275-23.069415L511.149121 622.838388 199.420377 934.490384c-14.204513 14.20349-33.901111 23.069415-55.642275 23.069415-43.482327 0-78.737272-35.230386-78.737272-78.660524 0-21.792329 8.864902-41.513486 23.094998-55.743582l311.677579-311.703161L88.135828 199.723787c-14.230096-14.255679-23.094998-33.92567-23.094998-55.642275 0-43.430138 35.254945-78.762855 78.737272-78.762855 21.741163 0 41.437761 8.813736 55.642275 23.069415l311.727721 311.727721L822.876842 88.389096c14.281261-14.255679 33.977859-23.069415 55.642275-23.069415 43.557028 0 78.735226 35.332716 78.735226 78.762855C957.254342 165.798117 948.5194 185.468109 934.184927 199.723787">'),XT=q("<div class=alert-content><div class=alert-message><p>"),jT=q("<div class=content-container>"),ZT=q("<div class=button-container>");const GT=e=>{const[t,r]=ye("chartspire-ui-modal-light"),n="Select starting candle by clicking on candle",[i,o]=ye({x:0,y:0});let s,u,d=null;return rt(()=>{r(e.isPLaying()?"inner -transparent":"inner")}),ki(()=>{let h=!1,p={x:0,y:0};const f=M=>"touches"in M&&M.touches.length>0?{clientX:M.touches[0].clientX,clientY:M.touches[0].clientY}:{clientX:M.clientX,clientY:M.clientY},m=M=>{if(!s||!u||M.target.closest(".close-icon"))return;h=!0;const L=f(M),A=s.getBoundingClientRect(),P=s.offsetParent,W=P?P.getBoundingClientRect():{left:0,top:0};p={x:L.clientX-(A.left-W.left),y:L.clientY-(A.top-W.top)},document.addEventListener("mousemove",x),document.addEventListener("mouseup",b),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",b),M.preventDefault()},x=M=>{if(!h||!s)return;const L=f(M),A=s.offsetParent,P=A?A.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight},W=L.clientX-P.left-p.x,D=L.clientY-P.top-p.y,$=s.offsetWidth,z=s.offsetHeight,B=P.width-$,Z=P.height-z,J=Math.max(0,Math.min(W,B)),H=Math.max(0,Math.min(D,Z));o({x:J,y:H}),"touches"in M&&h&&M.preventDefault()},b=()=>{h=!1,C()},C=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",b)},_=()=>{u&&(u.removeEventListener("mousedown",m),u.removeEventListener("touchstart",m))},k=()=>{h=!1,C(),_()};return d=k,u&&(u.addEventListener("mousedown",m),u.addEventListener("touchstart",m,{passive:!1})),k}),Br(()=>{d&&(console.log("onCleanup replay modal"),d())}),(()=>{var h=YT(),p=h.firstChild,f=p.firstChild,m=f.firstChild,x=m.firstChild,b=x.nextSibling,C=m.nextSibling,_=s;typeof _=="function"?Tn(_,h):s=h;var k=u;return typeof k=="function"?Tn(k,f):u=f,R(b,()=>e.title),Wi(C,"click",e.onClose),R(p,(()=>{var M=De(()=>!!e.showAlert);return()=>M()&&(()=>{var L=XT(),A=L.firstChild,P=A.firstChild;return R(P,()=>e.alertMessage||n),L})()})(),null),R(p,(()=>{var M=De(()=>!e.showAlert);return()=>M()&&[(()=>{var L=jT();return R(L,()=>e.children),L})(),De(()=>De(()=>e.buttons!=null&&e.buttons.length>0)()&&(()=>{var L=ZT();return L.style.setProperty("padding","20px 30px 20px"),R(L,()=>e.buttons.map(A=>G($2,Xp(A,{get children(){return A.children}})))),L})())]})(),null),Ne(M=>{var L={...(i().x!==0||i().y!==0)&&{left:`${i().x}px`,top:`${i().y}px`,transform:"none"}},A=t();return M.e=kn(h,L,M.e),A!==M.t&&st(p,M.t=A),M},{e:void 0,t:void 0}),h})()};Xt(["click"]);var qT=q("<div class=chartspire-ui-filter-tags>"),QT=q('<svg viewBox="0 0 1024 1024"><path d="M945.066667 898.133333l-189.866667-189.866666c55.466667-64 87.466667-149.333333 87.466667-241.066667 0-204.8-168.533333-373.333333-373.333334-373.333333S96 264.533333 96 469.333333 264.533333 842.666667 469.333333 842.666667c91.733333 0 174.933333-34.133333 241.066667-87.466667l189.866667 189.866667c6.4 6.4 14.933333 8.533333 23.466666 8.533333s17.066667-2.133333 23.466667-8.533333c8.533333-12.8 8.533333-34.133333-2.133333-46.933334zM469.333333 778.666667C298.666667 778.666667 160 640 160 469.333333S298.666667 160 469.333333 160 778.666667 298.666667 778.666667 469.333333 640 778.666667 469.333333 778.666667z">'),KT=q("<span>"),JT=q("<img alt=symbol>"),eE=q("<li><div><span>");const W2=e=>{const[t,r]=ye(e.enabledSymbolTypes[0]),n=$r.getInstance().getDataFeed(),[i,o]=ye(""),[s]=qM(()=>[i(),t()],async([d,h])=>{const p=h==="all"?"all":h;return n?await n.searchSymbols(d,p):(console.error("No datafeed found"),[])}),u=Yt(()=>Object.values(mr).filter(d=>{var h;return(h=e.enabledSymbolTypes)==null?void 0:h.includes(d)}));return G(Nl,{get title(){return I("symbol_search",e.locale)},width:460,get onClose(){return e.onClose},get children(){return[G(Wa,{class:"chartspire-ui-symbol-search-modal-input",get placeholder(){return I("symbol_code",e.locale)},get suffix(){return QT()},get value(){return i()},onChange:d=>{o(`${d}`)}}),(()=>{var d=qT();return R(d,()=>u().map(h=>(()=>{var p=KT();return p.$$click=()=>{r(h)},R(p,h),Ne(()=>st(p,`chartspire-ui-tag ${t()===h?"selected":""}`)),p})())),d})(),G(V2,{class:"chartspire-ui-symbol-search-modal-list",get loading(){return s.loading},get dataSource(){return s()??[]},renderItem:d=>(()=>{var h=eE(),p=h.firstChild,f=p.firstChild;return h.$$click=()=>{e.onSymbolSelected(d),e.onClose()},R(p,G($e,{get when(){return d.logo},get children(){var m=JT();return Ne(()=>Ve(m,"src",d.logo)),m}}),f),R(f,()=>d.shortName??d.symbol,null),R(f,()=>`${d.name!=null?`(${d.name})`:""}`,null),R(h,()=>d.exchange??"",null),Ne(()=>Ve(f,"title",d.name??"")),h})()})]}})};Xt(["click"]);var tE=q("<div>"),Zp=class{constructor(e){xe(this,"x"),xe(this,"y"),xe(this,"width"),xe(this,"height"),this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},zd=e=>{let t=new Zp(e.getBoundingClientRect());const{transform:r}=getComputedStyle(e);return r&&(t=rE(t,r)),t},rE=(e,t)=>{let r,n;if(t.startsWith("matrix3d(")){const i=t.slice(9,-1).split(/, /);r=+i[12],n=+i[13]}else if(t.startsWith("matrix(")){const i=t.slice(7,-1).split(/, /);r=+i[4],n=+i[5]}else r=0,n=0;return new Zp({...e,x:e.x-r,y:e.y-n})},oa=()=>({x:0,y:0}),iv=(e,t)=>e.x===t.x&&e.y===t.y,og=(e,t)=>new Zp({...e,x:e.x+t.x,y:e.y+t.y}),nE=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),iE=(e,t)=>{const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom),s=i-n,u=o-r;if(n<i&&r<o){const d=e.width*e.height,h=t.width*t.height,p=s*u;return p/(d+h-p)}return 0},ag=(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,oE=(e,t,r)=>{const n=e.transformed.center,i={distance:1/0,droppable:null};for(const o of t){const s=nE(n,o.layout.center);s<i.distance?(i.distance=s,i.droppable=o):s===i.distance&&o.id===r.activeDroppableId&&(i.droppable=o)}return i.droppable},aE=(e,t,r)=>{const n=e.transformed,i={ratio:0,droppable:null};for(const o of t){const s=iE(n,o.layout);s>i.ratio?(i.ratio=s,i.droppable=o):s>0&&s===i.ratio&&o.id===r.activeDroppableId&&(i.droppable=o)}return i.droppable},U2=E2(),sE=e=>{const t=Xp({collisionDetector:aE},e),[r,n]=Ol({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return r.active.draggableId!==null?r.draggables[r.active.draggableId]:null},droppableId:null,get droppable(){return r.active.droppableId!==null?r.droppables[r.active.droppableId]:null},sensorId:null,get sensor(){return r.active.sensorId!==null?r.sensors[r.active.sensorId]:null},overlay:null}}),i=(H,ee,le)=>{H.substring(0,H.length-1),Ze(()=>r[H][ee])&&n(H,ee,"transformers",le.id,le)},o=(H,ee,le)=>{H.substring(0,H.length-1),Ze(()=>r[H][ee])&&Ze(()=>r[H][ee].transformers[le])&&n(H,ee,"transformers",le,void 0)},s=({id:H,node:ee,layout:le,data:ce})=>{const ae=r.draggables[H],re={id:H,node:ee,layout:le,data:ce,_pendingCleanup:!1};let ve;if(!ae)Object.defineProperties(re,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(r.active.overlay)return oa();const pe=Object.values(r.draggables[H].transformers);return pe.sort((Y,U)=>Y.order-U.order),pe.reduce((Y,U)=>U.callback(Y),oa())}},transformed:{enumerable:!0,configurable:!0,get:()=>og(r.draggables[H].layout,r.draggables[H].transform)}});else if(r.active.draggableId===H&&!r.active.overlay){const pe={x:ae.layout.x-le.x,y:ae.layout.y-le.y},Y="addDraggable-existing-offset",U=ae.transformers[Y],de=U?U.callback(pe):pe;ve={id:Y,order:100,callback:X=>({x:X.x+de.x,y:X.y+de.y})},Z(()=>o("draggables",H,Y))}Ba(()=>{n("draggables",H,re),ve&&i("draggables",H,ve)}),r.active.draggable&&A()},u=H=>{Ze(()=>r.draggables[H])&&(n("draggables",H,"_pendingCleanup",!0),queueMicrotask(()=>d(H)))},d=H=>{var ee;if((ee=r.draggables[H])!=null&&ee._pendingCleanup){const le=r.active.draggableId===H;Ba(()=>{le&&n("active","draggableId",null),n("draggables",H,void 0)})}},h=({id:H,node:ee,layout:le,data:ce})=>{const ae=r.droppables[H],re={id:H,node:ee,layout:le,data:ce,_pendingCleanup:!1};ae||Object.defineProperties(re,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const ve=Object.values(r.droppables[H].transformers);return ve.sort((pe,Y)=>pe.order-Y.order),ve.reduce((pe,Y)=>Y.callback(pe),oa())}},transformed:{enumerable:!0,configurable:!0,get:()=>og(r.droppables[H].layout,r.droppables[H].transform)}}),n("droppables",H,re),r.active.draggable&&A()},p=H=>{Ze(()=>r.droppables[H])&&(n("droppables",H,"_pendingCleanup",!0),queueMicrotask(()=>f(H)))},f=H=>{var ee;if((ee=r.droppables[H])!=null&&ee._pendingCleanup){const le=r.active.droppableId===H;Ba(()=>{le&&n("active","droppableId",null),n("droppables",H,void 0)})}},m=({id:H,activators:ee})=>{n("sensors",H,{id:H,activators:ee,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:r.sensors[H].coordinates.current.x-r.sensors[H].coordinates.origin.x,y:r.sensors[H].coordinates.current.y-r.sensors[H].coordinates.origin.y}}}})},x=H=>{if(!Ze(()=>r.sensors[H]))return;const ee=r.active.sensorId===H;Ba(()=>{ee&&n("active","sensorId",null),n("sensors",H,void 0)})},b=({node:H,layout:ee})=>{const le=r.active.overlay,ce={node:H,layout:ee};le||Object.defineProperties(ce,{id:{enumerable:!0,configurable:!0,get:()=>{var ae;return(ae=r.active.draggable)==null?void 0:ae.id}},data:{enumerable:!0,configurable:!0,get:()=>{var ae;return(ae=r.active.draggable)==null?void 0:ae.data}},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(r.active.draggable?r.active.draggable.transformers:{}).filter(([ae])=>ae!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const ae=Object.values(r.active.overlay?r.active.overlay.transformers:[]);return ae.sort((re,ve)=>re.order-ve.order),ae.reduce((re,ve)=>ve.callback(re),oa())}},transformed:{enumerable:!0,configurable:!0,get:()=>r.active.overlay?og(r.active.overlay.layout,r.active.overlay.transform):new Zp({x:0,y:0,width:0,height:0})}}),n("active","overlay",ce)},C=()=>n("active","overlay",null),_=(H,ee)=>{Ba(()=>{n("sensors",H,"coordinates",{origin:{...ee},current:{...ee}}),n("active","sensorId",H)})},k=H=>{const ee=r.active.sensorId;ee&&n("sensors",ee,"coordinates","current",{...H})},M=()=>n("active","sensorId",null),L=(H,ee)=>{const le={};for(const ae of Object.values(r.sensors))if(ae)for(const[re,ve]of Object.entries(ae.activators))le[re]??(le[re]=[]),le[re].push({sensor:ae,activator:ve});const ce={};for(const ae in le){let re=ae;ee&&(re=`on${ae}`),ce[re]=ve=>{for(const{activator:pe}of le[ae]){if(r.active.sensor)break;pe(ve,H)}}}return ce},A=()=>{let H=!1;const ee=Object.values(r.draggables),le=Object.values(r.droppables),ce=r.active.overlay;return Ba(()=>{const ae=new WeakMap;for(const re of ee)if(re){const ve=re.layout;ae.has(re.node)||ae.set(re.node,zd(re.node));const pe=ae.get(re.node);ag(ve,pe)||(n("draggables",re.id,"layout",pe),H=!0)}for(const re of le)if(re){const ve=re.layout;ae.has(re.node)||ae.set(re.node,zd(re.node));const pe=ae.get(re.node);ag(ve,pe)||(n("droppables",re.id,"layout",pe),H=!0)}if(ce){const re=ce.layout,ve=zd(ce.node);ag(re,ve)||(n("active","overlay","layout",ve),H=!0)}}),H},P=()=>{const H=r.active.overlay??r.active.draggable;if(H){const ee=t.collisionDetector(H,Object.values(r.droppables),{activeDroppableId:r.active.droppableId}),le=ee?ee.id:null;r.active.droppableId!==le&&n("active","droppableId",le)}},W=H=>{const ee={id:"sensorMove",order:0,callback:le=>r.active.sensor?{x:le.x+r.active.sensor.coordinates.delta.x,y:le.y+r.active.sensor.coordinates.delta.y}:le};A(),Ba(()=>{n("active","draggableId",H),i("draggables",H,ee)}),P()},D=()=>{const H=Ze(()=>r.active.draggableId);Ba(()=>{H!==null&&o("draggables",H,"sensorMove"),n("active",["draggableId","droppableId"],null)}),A()},$=H=>{rt(()=>{const ee=r.active.draggable;ee&&Ze(()=>H({draggable:ee}))})},z=H=>{rt(()=>{const ee=r.active.draggable;if(ee){const le=Ze(()=>r.active.overlay);Object.values(le?le.transform:ee.transform),Ze(()=>H({draggable:ee,overlay:le}))}})},B=H=>{rt(()=>{const ee=r.active.draggable,le=r.active.droppable;ee&&Ze(()=>H({draggable:ee,droppable:le,overlay:r.active.overlay}))})},Z=H=>{rt(({previousDraggable:ee,previousDroppable:le,previousOverlay:ce})=>{const ae=r.active.draggable,re=ae?r.active.droppable:null,ve=ae?r.active.overlay:null;return!ae&&ee&&Ze(()=>H({draggable:ee,droppable:le,overlay:ce})),{previousDraggable:ae,previousDroppable:re,previousOverlay:ve}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};z(()=>P()),t.onDragStart&&$(t.onDragStart),t.onDragMove&&z(t.onDragMove),t.onDragOver&&B(t.onDragOver),t.onDragEnd&&Z(t.onDragEnd);const J=[r,{addTransformer:i,removeTransformer:o,addDraggable:s,removeDraggable:u,addDroppable:h,removeDroppable:p,addSensor:m,removeSensor:x,setOverlay:b,clearOverlay:C,recomputeLayouts:A,detectCollisions:P,draggableActivators:L,sensorStart:_,sensorMove:k,sensorEnd:M,dragStart:W,dragEnd:D,onDragStart:$,onDragMove:z,onDragOver:B,onDragEnd:Z}];return G(U2.Provider,{value:J,get children(){return t.children}})},jd=()=>I2(U2)||null,lE=(e="pointer-sensor")=>{const[t,{addSensor:r,removeSensor:n,sensorStart:i,sensorMove:o,sensorEnd:s,dragStart:u,dragEnd:d}]=jd(),h=250,p=10;ki(()=>{r({id:e,activators:{pointerdown:C}})}),Br(()=>{n(e)});const f=()=>t.active.sensorId===e,m={x:0,y:0};let x=null,b=null;const C=(P,W)=>{P.button===0&&(document.addEventListener("pointermove",M),document.addEventListener("pointerup",L),b=W,m.x=P.clientX,m.y=P.clientY,x=window.setTimeout(k,h))},_=()=>{x&&(clearTimeout(x),x=null),document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",L),document.removeEventListener("selectionchange",A)},k=()=>{t.active.sensor?f()||_():(i(e,m),u(b),A(),document.addEventListener("selectionchange",A))},M=P=>{const W={x:P.clientX,y:P.clientY};if(!t.active.sensor){const D={x:W.x-m.x,y:W.y-m.y};Math.sqrt(D.x**2+D.y**2)>p&&k()}f()&&(P.preventDefault(),o(W))},L=P=>{_(),f()&&(P.preventDefault(),d(),s())},A=()=>{var P;(P=window.getSelection())==null||P.removeAllRanges()}},cE=e=>(lE(),De(()=>e.children)),Gp=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),uE=(e,t={})=>{const[r,{addDraggable:n,removeDraggable:i,draggableActivators:o}]=jd(),[s,u]=ye(null);ki(()=>{const p=s();p&&n({id:e,node:p,layout:zd(p),data:t})}),Br(()=>i(e));const d=()=>r.active.draggableId===e,h=()=>{var p;return((p=r.draggables[e])==null?void 0:p.transform)||oa()};return Object.defineProperties((p,f)=>{const m=f?f():{};rt(()=>{const x=s(),b=o(e);if(x)for(const C in b)x.addEventListener(C,b[C]);Br(()=>{if(x)for(const C in b)x.removeEventListener(C,b[C])})}),u(p),m.skipTransform||rt(()=>{const x=h();if(iv(x,oa()))p.style.removeProperty("transform");else{const b=Gp(h());p.style.setProperty("transform",b.transform??null)}})},{ref:{enumerable:!0,value:u},isActiveDraggable:{enumerable:!0,get:d},dragActivators:{enumerable:!0,get:()=>o(e,!0)},transform:{enumerable:!0,get:h}})},dE=(e,t={})=>{const[r,{addDroppable:n,removeDroppable:i}]=jd(),[o,s]=ye(null);ki(()=>{const h=o();h&&n({id:e,node:h,layout:zd(h),data:t})}),Br(()=>i(e));const u=()=>r.active.droppableId===e,d=()=>{var h;return((h=r.droppables[e])==null?void 0:h.transform)||oa()};return Object.defineProperties((h,p)=>{const f=p?p():{};s(h),f.skipTransform||rt(()=>{const m=d();if(iv(m,oa()))h.style.removeProperty("transform");else{const x=Gp(d());h.style.setProperty("transform",x.transform??null)}})},{ref:{enumerable:!0,value:s},isActiveDroppable:{enumerable:!0,get:u},transform:{enumerable:!0,get:d}})},hE=e=>{const[t,{onDragStart:r,onDragEnd:n,setOverlay:i,clearOverlay:o}]=jd();let s;r(({draggable:d})=>{i({node:d.node,layout:d.layout}),queueMicrotask(()=>{if(s){const h=zd(s),p={x:(d.layout.width-h.width)/2,y:(d.layout.height-h.height)/2};h.x+=p.x,h.y+=p.y,i({node:s,layout:h})}})}),n(()=>queueMicrotask(o));const u=()=>{const d=t.active.overlay,h=t.active.draggable;return!d||!h?{}:{position:"fixed",transition:"transform 0s",top:`${d.layout.top}px`,left:`${d.layout.left}px`,"min-width":`${h.layout.width}px`,"min-height":`${h.layout.height}px`,...Gp(d.transform),...e.style}};return G(nv,{get mount(){return document.body},get children(){return G($e,{get when(){return t.active.draggable},get children(){var d=tE(),h=s;return typeof h=="function"?Tn(h,d):s=d,R(d,(()=>{var p=De(()=>typeof e.children=="function");return()=>p()?e.children(t.active.draggable):e.children})()),Ne(p=>{var f=e.class,m=u();return f!==p.e&&st(d,p.e=f),p.t=kn(d,m,p.t),p},{e:void 0,t:void 0}),d}})}})},pE=(e,t,r)=>{const n=e.slice();return n.splice(r,0,...n.splice(t,1)),n},H2=E2(),fE=e=>{const[t]=jd(),[r,n]=Ol({initialIds:[],sortedIds:[]}),i=s=>s>=0&&s<r.initialIds.length;rt(()=>{n("initialIds",[...e.ids]),n("sortedIds",[...e.ids])}),rt(()=>{t.active.draggableId&&t.active.droppableId?Ze(()=>{const s=r.sortedIds.indexOf(t.active.draggableId),u=r.initialIds.indexOf(t.active.droppableId);if(!i(s)||!i(u))n("sortedIds",[...e.ids]);else if(s!==u){const d=pE(r.sortedIds,s,u);n("sortedIds",d)}}):n("sortedIds",[...e.ids])});const o=[r,{}];return G(H2.Provider,{value:o,get children(){return e.children}})},gE=()=>I2(H2)||null,vE=(e,t)=>r=>{e(r),t(r)},mE=(e,t={})=>{const[r,{addTransformer:n,removeTransformer:i}]=jd(),[o]=gE(),s=uE(e,t),u=dE(e,t),d=vE(s.ref,u.ref),h=()=>o.initialIds.indexOf(e),p=()=>o.sortedIds.indexOf(e),f=C=>{var _;return((_=r.droppables[C])==null?void 0:_.layout)||null},m=()=>{const C=oa(),_=h(),k=p();if(k!==_){const M=f(e),L=f(o.initialIds[k]);M&&L&&(C.x=L.x-M.x,C.y=L.y-M.y)}return C},x={id:"sortableOffset",order:100,callback:C=>{const _=m();return{x:C.x+_.x,y:C.y+_.y}}};ki(()=>n("droppables",e,x)),Br(()=>i("droppables",e,x.id));const b=()=>{var C,_;return(e===r.active.draggableId&&!r.active.overlay?(C=r.draggables[e])==null?void 0:C.transform:(_=r.droppables[e])==null?void 0:_.transform)||oa()};return Object.defineProperties(C=>{s(C,()=>({skipTransform:!0})),u(C,()=>({skipTransform:!0})),rt(()=>{const _=b();if(iv(_,oa()))C.style.removeProperty("transform");else{const k=Gp(b());C.style.setProperty("transform",k.transform??null)}})},{ref:{enumerable:!0,value:d},transform:{enumerable:!0,get:b},isActiveDraggable:{enumerable:!0,get:()=>s.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>s.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>u.isActiveDroppable}})};const yE=async()=>null;class bE{constructor(t){xe(this,"useExternalStorage"),this.useExternalStorage=t}addToStorage(t){if(!this.useExternalStorage)try{localStorage.setItem("watchlist",JSON.stringify(t))}catch(r){console.error("Error saving watchlist to local storage:",r)}}async fetchWatchlist(){try{if(this.useExternalStorage)return await yE()||(console.error("Failed to fetch watchlist data from external."),null);{const t=localStorage.getItem("watchlist");return t?JSON.parse(t):(console.error("Failed to fetch watchlist data from local storage."),null)}}catch(t){return console.error("Error fetching watchlist data:",t),null}}}class xE{constructor(t){xe(this,"config"),xe(this,"subscriptions",new Map),xe(this,"symbolData",{}),xe(this,"previousPrices",{}),xe(this,"currentWatchlist",null),this.config=t}getSymbolKey(t){return`${t.symbol}_${t.exchange}`}createSymbolCallback(t){return(r,n)=>{var i;if(!n)return;const o=this.getSymbolKey(n),s=(i=this.symbolData[o])==null?void 0:i.close;s!==void 0&&(this.previousPrices[o]=s),this.symbolData[o]=r;const u=this.subscriptions.get(o);u&&(u.lastPrice=r.close),t(o,r,s)}}subscribeSymbol(t,r){var n;const i=`${this.config.uuid}_${this.getSymbolKey(t)}`,o=this.createSymbolCallback(r);console.log(`WebSocketStrategy: Subscribing to ${t.symbol} from ${t.exchange} with ID ${i}`),this.config.dataFeed.subscribeSymbol(t,this.config.interval,o,i),this.subscriptions.set(this.getSymbolKey(t),{symbol:t,subscribed:!0,lastPrice:(n=this.symbolData[this.getSymbolKey(t)])==null?void 0:n.close})}unsubscribeSymbol(t){const r=`${this.config.uuid}_${this.getSymbolKey(t)}`;console.log(`WebSocketStrategy: Unsubscribing from ${t.symbol} from ${t.exchange} with ID ${r}`),this.config.dataFeed.unsubscribeSymbol(t,this.config.interval,r);const n=this.subscriptions.get(this.getSymbolKey(t));n&&(n.subscribed=!1)}subscribeToSymbols(t,r){console.log(`WebSocketStrategy: Subscribing to ${t.length} symbols using individual subscriptions`),t.forEach((n,i)=>{setTimeout(()=>{this.subscribeSymbol(n,r)},i*300)})}unsubscribeFromSymbols(t){console.log(`WebSocketStrategy: Unsubscribing from ${t.length} symbols using individual unsubscriptions`),t.forEach((r,n)=>{setTimeout(()=>{this.unsubscribeSymbol(r)},n*300)})}switchSymbols(t,r,n){console.log(`WebSocketStrategy: Switching from ${r.length} old symbols to ${t.length} new symbols`),this.unsubscribeFromSymbols(r),setTimeout(()=>{this.subscribeToSymbols(t,n)},500)}cleanup(){console.log("WebSocketStrategy: Cleaning up all subscriptions and data"),this.subscriptions.forEach((t,r)=>{t.subscribed&&(console.log(`WebSocketStrategy: Cleaning up subscription for ${r}`),this.unsubscribeSymbol(t.symbol))}),this.subscriptions.clear(),this.symbolData={},this.previousPrices={},this.currentWatchlist=null}getSubscriptionStatus(){if(this.subscriptions.size===0)return null;const t=Array.from(this.subscriptions.values()).filter(r=>r.subscribed).length;return{watchlistName:this.currentWatchlist||"WEBSOCKET_STREAMING",totalSymbols:this.subscriptions.size,subscribedSymbols:t,subscriptions:this.subscriptions}}getStrategyType(){return"WebSocket"}getPriceColor(t){var r;const n=(r=this.symbolData[this.getSymbolKey(t)])==null?void 0:r.close,i=this.previousPrices[this.getSymbolKey(t)];return n===void 0||i===void 0?"#FFFFFF":n>i?"#00FF00":n<i?"#FF0000":"#FFFFFF"}getSymbolData(){return this.symbolData}getPreviousPrices(){return this.previousPrices}}class wE{constructor(t,r){xe(this,"dataFeed"),xe(this,"config"),xe(this,"symbolQueue",new Map),xe(this,"pollingTimer",null),xe(this,"isPolling",!1),xe(this,"batchIndex",0),this.dataFeed=t,this.config=r,console.log(`HTTPPollingService: Initialized with interval=${r.interval}ms, batchSize=${r.batchSize}`)}addSymbol(t,r){const n=this.getSymbolKey(t);console.log(`HTTPPollingService: Adding symbol ${n} to polling queue`),this.symbolQueue.set(n,{symbol:t,callback:r,retryCount:0,lastFetchTime:0,isActive:!0}),this.isPolling||this.startPolling()}removeSymbol(t){const r=this.getSymbolKey(t);console.log(`HTTPPollingService: Removing symbol ${r} from polling queue`);const n=this.symbolQueue.get(r);n&&(n.isActive=!1,this.symbolQueue.delete(r)),this.symbolQueue.size===0&&this.stopPolling()}startPolling(){this.isPolling||(console.log("HTTPPollingService: Starting polling process"),this.isPolling=!0,this.scheduleNextPoll())}stopPolling(){console.log("HTTPPollingService: Stopping polling process"),this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null),this.isPolling=!1}scheduleNextPoll(){this.isPolling&&(this.pollingTimer=setTimeout(()=>{this.executePollCycle()},this.config.interval))}async executePollCycle(){if(this.symbolQueue.size===0){this.stopPolling();return}const t=Array.from(this.symbolQueue.values()).filter(s=>s.isActive).map(s=>s.symbol);if(t.length===0){this.stopPolling();return}const r=this.config.batchSize,n=this.batchIndex*r,i=Math.min(n+r,t.length),o=t.slice(n,i);console.log(`HTTPPollingService: Processing batch ${this.batchIndex+1} with ${o.length} symbols (${n+1}-${i} of ${t.length})`),await this.processBatch(o),this.batchIndex=i>=t.length?0:this.batchIndex+1,this.scheduleNextPoll()}async processBatch(t){const r=t.map(n=>this.fetchSymbolPrice(n));(await Promise.allSettled(r)).forEach((n,i)=>{n.status==="rejected"&&console.warn(`HTTPPollingService: Failed to fetch price for ${t[i].symbol}:`,n.reason)})}async fetchSymbolPrice(t){const r=this.getSymbolKey(t),n=this.symbolQueue.get(r);if(!(!n||!n.isActive))try{const i=Date.now(),o=await this.dataFeed.getPrice(t,t.type),s=Date.now()-i;o!==null&&typeof o=="number"&&!isNaN(o)?(n.retryCount=0,n.lastFetchTime=Date.now(),console.log(`HTTPPollingService: Fetched price for ${r}: ${o} (took ${s}ms)`),n.callback(o)):this.handleFetchError(r,new Error("No valid price data received"))}catch(i){this.handleFetchError(r,i)}}handleFetchError(t,r){const n=this.symbolQueue.get(t);n&&(n.retryCount++,this.config.retryEnabled&&n.retryCount<=this.config.maxRetries?console.warn(`HTTPPollingService: Retry ${n.retryCount}/${this.config.maxRetries} for ${t}: ${r.message}`):console.error(`HTTPPollingService: Max retries exceeded for ${t}: ${r.message}`))}cleanup(){console.log("HTTPPollingService: Cleaning up all resources"),this.stopPolling(),this.symbolQueue.clear(),this.batchIndex=0}getPollingStats(){const t=Array.from(this.symbolQueue.values()).filter(r=>r.isActive).length;return{totalSymbols:this.symbolQueue.size,activeSymbols:t,isPolling:this.isPolling,currentBatch:this.batchIndex,interval:this.config.interval}}getSymbolKey(t){return`${t.symbol}_${t.exchange||"default"}`}}class CE{constructor(t,r){xe(this,"config"),xe(this,"httpConfig"),xe(this,"subscriptions",new Map),xe(this,"symbolData",{}),xe(this,"previousPrices",{}),xe(this,"pollingService"),xe(this,"updateCallback",null),this.config=t,this.httpConfig=r,this.pollingService=new wE(t.dataFeed,r),console.log(`HTTPStrategy: Initialized with interval=${r.interval}ms, batchSize=${r.batchSize}`)}getSymbolKey(t){return`${t.symbol}_${t.exchange||"default"}`}subscribeSymbol(t,r){this.updateCallback=r;const n=this.getSymbolKey(t);console.log(`HTTPStrategy: Subscribing to ${t.symbol} from ${t.exchange||"default"}`),this.pollingService.addSymbol(t,i=>{this.handlePriceUpdate(t,i,r)}),this.subscriptions.set(n,{symbol:t,subscribed:!0,lastPrice:void 0})}unsubscribeSymbol(t){const r=this.getSymbolKey(t);console.log(`HTTPStrategy: Unsubscribing from ${t.symbol} from ${t.exchange||"default"}`),this.pollingService.removeSymbol(t),this.subscriptions.delete(r),delete this.symbolData[r],delete this.previousPrices[r]}subscribeToSymbols(t,r){this.updateCallback=r,console.log(`HTTPStrategy: Subscribing to ${t.length} symbols using HTTP polling`),t.forEach((n,i)=>{setTimeout(()=>{this.subscribeSymbol(n,r)},i*100)})}unsubscribeFromSymbols(t){console.log(`HTTPStrategy: Unsubscribing from ${t.length} symbols`),t.forEach(r=>{this.unsubscribeSymbol(r)})}switchSymbols(t,r,n){console.log(`HTTPStrategy: Switching from ${r.length} old symbols to ${t.length} new symbols`),this.unsubscribeFromSymbols(r),setTimeout(()=>{this.subscribeToSymbols(t,n)},200)}cleanup(){console.log("HTTPStrategy: Cleaning up all resources"),this.pollingService.cleanup(),this.subscriptions.clear(),this.symbolData={},this.previousPrices={},this.updateCallback=null}getSubscriptionStatus(){if(this.subscriptions.size===0)return null;const t=Array.from(this.subscriptions.values()).filter(r=>r.subscribed).length;return{watchlistName:`HTTP_POLLING (${this.pollingService.getPollingStats().interval}ms)`,totalSymbols:this.subscriptions.size,subscribedSymbols:t,subscriptions:this.subscriptions}}getStrategyType(){return"HTTP"}handlePriceUpdate(t,r,n){var i;const o=this.getSymbolKey(t),s=(i=this.symbolData[o])==null?void 0:i.close,u={timestamp:Date.now(),open:r,high:r,low:r,close:r,volume:0,turnover:0};s!==void 0&&(this.previousPrices[o]=s),this.symbolData[o]=u;const d=this.subscriptions.get(o);d&&(d.lastPrice=r),n(o,u,s)}getPriceColor(t){var r;const n=(r=this.symbolData[this.getSymbolKey(t)])==null?void 0:r.close,i=this.previousPrices[this.getSymbolKey(t)];return n===void 0||i===void 0?"#FFFFFF":n>i?"#00FF00":n<i?"#FF0000":"#FFFFFF"}getSymbolData(){return this.symbolData}getPreviousPrices(){return this.previousPrices}getPollingStats(){return this.pollingService.getPollingStats()}}class Nm{static create(t,r){if(r.useHttp){const n={interval:Math.max(r.httpInterval||5e3,1e3),batchSize:Math.max(r.httpBatchSize||10,1),retryEnabled:r.httpRetryEnabled??!0,maxRetries:Math.max(r.httpMaxRetries||3,0)};return console.log("WatchlistStrategyFactory: Creating HTTP strategy with config:",n),new CE(t,n)}else return console.log("WatchlistStrategyFactory: Creating WebSocket strategy"),new xE(t)}static getDefaultHttpOptions(){return{httpInterval:5e3,httpBatchSize:10,httpRetryEnabled:!0,httpMaxRetries:3}}static validateOptions(t){const r=this.getDefaultHttpOptions();return{useHttp:t.useHttp||!1,httpInterval:Math.max(t.httpInterval||r.httpInterval,1e3),httpBatchSize:Math.max(t.httpBatchSize||r.httpBatchSize,1),httpRetryEnabled:t.httpRetryEnabled??r.httpRetryEnabled,httpMaxRetries:Math.max(t.httpMaxRetries||r.httpMaxRetries,0)}}static getStrategyDescription(t){return t.useHttp?`HTTP Polling (${t.httpInterval}ms interval, ${t.httpBatchSize} batch size)`:"WebSocket Streaming"}}class _E{constructor(t){xe(this,"config"),xe(this,"strategy"),xe(this,"currentWatchlist",null),this.config=t;const r={interval:t.interval,uuid:t.uuid,dataFeed:t.dataFeed},n={useHttp:t.useHttp||!1,httpInterval:t.httpInterval,httpBatchSize:t.httpBatchSize,httpRetryEnabled:t.httpRetryEnabled,httpMaxRetries:t.httpMaxRetries};this.strategy=Nm.create(r,n),console.log(`WatchlistDataService: Initialized with ${Nm.getStrategyDescription(n)}`)}getSymbolKey(t){return`${t.symbol}_${t.exchange||"default"}`}subscribeToWatchlist(t,r){console.log(`WatchlistDataService: Subscribing to watchlist ${t} with ${r.length} symbols using ${this.strategy.getStrategyType()} strategy`),this.currentWatchlist=t,this.strategy.subscribeToSymbols(r,this.config.onSymbolUpdate)}unsubscribeFromWatchlist(t,r){console.log(`WatchlistDataService: Unsubscribing from watchlist ${t} with ${r.length} symbols using ${this.strategy.getStrategyType()} strategy`),this.strategy.unsubscribeFromSymbols(r),this.currentWatchlist===t&&(this.currentWatchlist=null)}subscribeToSingleSymbols(t){console.log(`WatchlistDataService: Adding symbol ${t.symbol} to current watchlist using ${this.strategy.getStrategyType()} strategy`),this.strategy.subscribeSymbol(t,this.config.onSymbolUpdate)}unsubscribeFromSingleSymbol(t){if(console.log(`WatchlistDataService: Removing symbol ${t.symbol} from current watchlist using ${this.strategy.getStrategyType()} strategy`),this.strategy.unsubscribeSymbol(t),this.config.onSymbolRemove){const r=this.getSymbolKey(t);this.config.onSymbolRemove(r)}}switchWatchlist(t,r,n,i){console.log(`WatchlistDataService: Switching from ${n||"none"} to ${t} using ${this.strategy.getStrategyType()} strategy`),this.strategy.switchSymbols(r,i||[],this.config.onSymbolUpdate),this.currentWatchlist=t}getSubscriptionStatus(){return this.strategy.getSubscriptionStatus()}getPriceColor(t){return typeof this.strategy.getPriceColor=="function"?this.strategy.getPriceColor(t):"#FFFFFF"}getSymbolData(){return typeof this.strategy.getSymbolData=="function"?this.strategy.getSymbolData():{}}getPreviousPrices(){return typeof this.strategy.getPreviousPrices=="function"?this.strategy.getPreviousPrices():{}}getStrategyInfo(){const t={type:this.strategy.getStrategyType(),status:this.strategy.getSubscriptionStatus()};return typeof this.strategy.getPollingStats=="function"&&(t.pollingStats=this.strategy.getPollingStats()),t}cleanup(){console.log(`WatchlistDataService: Cleaning up strategy (${this.strategy.getStrategyType()})`),this.strategy.cleanup(),this.currentWatchlist=null}}function SE(e,t,r,n){const[i,o]=ye({}),[s,u]=ye({}),d={interval:e,uuid:t,dataFeed:r,onSymbolUpdate:(p,f,m)=>{o(x=>({...x,[p]:f})),m!==void 0&&u(x=>({...x,[p]:m}))},onSymbolRemove:p=>{o(f=>{const m={...f};return delete m[p],m}),u(f=>{const m={...f};return delete m[p],m})},useHttp:n==null?void 0:n.useHttp,httpInterval:n==null?void 0:n.httpInterval,httpBatchSize:n==null?void 0:n.httpBatchSize,httpRetryEnabled:n==null?void 0:n.httpRetryEnabled,httpMaxRetries:n==null?void 0:n.httpMaxRetries},h=new _E(d);return Br(()=>{h.cleanup()}),{symbolData:i,previousPrices:s,subscribeToWatchlist:(p,f)=>{h.subscribeToWatchlist(p,f)},unsubscribeFromWatchlist:(p,f)=>{h.unsubscribeFromWatchlist(p,f)},subscribeToSymbol:p=>{h.subscribeToSingleSymbols(p)},unsubscribeFromSymbol:p=>{h.unsubscribeFromSingleSymbol(p)},switchWatchlist:(p,f,m,x)=>{h.switchWatchlist(p,f,m,x)},getPriceColor:p=>h.getPriceColor(p),getSubscriptionStatus:()=>h.getSubscriptionStatus(),dataService:h}}class zc{static generateDefaultName(t){return`WatchList ${t}`}static initializeWatchlists(t,r=null){const n={};if(r){const i=Object.keys(r);for(let s=0;s<Math.min(t,i.length);s++){const u=i[s];n[u]=r[u]||[]}const o=Object.keys(n).length;for(let s=o;s<t;s++){const u=this.generateDefaultName(s+1);n[u]=[]}}else for(let i=1;i<=t;i++){const o=this.generateDefaultName(i);n[o]=[]}return n}static renameWatchlist(t,r,n){if(r===n)return t;if(!t[r])return console.warn(`Watchlist '${r}' does not exist`),t;if(t[n])return console.warn(`Watchlist '${n}' already exists`),t;const i={};for(const[o,s]of Object.entries(t))o===r?i[n]=s:i[o]=s;return i}static validateWatchlistName(t,r){return!t||t.trim().length===0?{isValid:!1,error:"Watchlist name cannot be empty"}:t.trim().length>50?{isValid:!1,error:"Watchlist name cannot exceed 50 characters"}:r.includes(t.trim())?{isValid:!1,error:"Watchlist name already exists"}:/^[a-zA-Z0-9\s\-_]+$/.test(t.trim())?{isValid:!0}:{isValid:!1,error:"Watchlist name can only contain letters, numbers, spaces, hyphens, and underscores"}}static getOrderedNames(t){return Object.keys(t).sort((r,n)=>{const i=r.startsWith("WatchList "),o=n.startsWith("WatchList ");if(i&&o){const s=parseInt(r.split(" ")[1]),u=parseInt(n.split(" ")[1]);return s-u}else return i&&!o?1:!i&&o?-1:r.localeCompare(n)})}static migrateFromLegacyFormat(t,r){const n={};for(const[o,s]of Object.entries(t))s&&s.length>0&&(n[o]=s);const i=Object.keys(n).length;for(let o=i+1;o<=r;o++){const s=this.generateDefaultName(o);n[s]||(n[s]=[])}return n}}const Ud=(e,t)=>({x:e,y:t}),wp=class Tl{constructor(){xe(this,"activeCharts",new Map),xe(this,"syncingOverlays",new Set)}static getInstance(){return Tl.instance}static setEnabled(t){Tl.enabled=t}static isEnabled(){return Tl.enabled}registerChart(t,r,n,i,o,s){this.activeCharts.set(t,{chart:r,symbol:n,type:i,interval:o,setOverlaySettingVisible:s==null?void 0:s.setOverlaySettingVisible,setOverlayStyles:s==null?void 0:s.setOverlayStyles,setOverlayMousePosition:s==null?void 0:s.setOverlayMousePosition})}unregisterChart(t){this.activeCharts.has(t)&&this.activeCharts.delete(t)}updateSymbol(t,r){const n=this.activeCharts.get(t);n&&(n.symbol=r.symbol,n.type=r.type,r.exchange!==void 0&&(n.exchange=r.exchange))}hasSameSymbol(t,r){const n=this.activeCharts.get(t),i=this.activeCharts.get(r);if(!n||!i||!n.symbol||!i.symbol)return!1;const o=n.symbol===i.symbol;return n.type===void 0&&i.type===void 0?o:o&&n.type===i.type}generateOverlayId(t){return{id:t.id}}onOverlayCreated(t,r){this.syncDrawing(t,r,"create")}onOverlayUpdated(t,r){this.syncDrawing(t,r,"update")}onOverlayRemoved(t,r){this.syncDrawing(t,r,"remove")}syncDrawing(t,r,n){if(!Tl.enabled||this.activeCharts.size<=1)return;const i=this.generateOverlayId(r);if(!this.syncingOverlays.has(i)){this.syncingOverlays.add(i);try{if(!this.activeCharts.get(t)){console.error("syncDrawing called - sourceChartData not found");return}this.activeCharts.forEach((o,s)=>{if(s.id!==t.id)try{if(!this.hasSameSymbol(t,s))return;const u=o.chart;switch(n){case"create":this.createOverlayOnChart(u,r,s);break;case"update":this.updateOverlayOnChart(u,r,s);break;case"remove":this.removeOverlayFromChart(u,r,s);break}}catch(u){console.error(`Error syncing drawing to chart ${s}:`,u)}})}finally{setTimeout(()=>{this.syncingOverlays.delete(i)},100)}}}createOverlayOnChart(t,r,n){try{const i=this.activeCharts.get(n),o=JSON.parse(JSON.stringify(r));if(i!=null&&i.setOverlaySettingVisible&&i!=null&&i.setOverlayStyles&&i!=null&&i.setOverlayMousePosition){o.onRightClick=function(u){var d;const h=u.x||0,p=u.y||0,f=Ud(h,p);return i.setOverlayMousePosition(f),i.setOverlaySettingVisible(!0),i.setOverlayStyles(u.overlay),(d=u.preventDefault)==null||d.call(u),!0},o.onDoubleClick=function(u){const d=u.x||0,h=u.y||0,p=Ud(d,h);return i.setOverlayMousePosition(p),i.setOverlaySettingVisible(!0),i.setOverlayStyles(u.overlay),!0};const s=this;o.onPressedMoving=function(u){return Tl.isEnabled()&&s.onOverlayUpdated(n,u.overlay),!1},o.onPressedMoveEnd=function(u){return Tl.isEnabled()&&s.onOverlayUpdated(n,u.overlay),!0},o.onRemove=function(u){return Tl.isEnabled()&&s.onOverlayRemoved(n,u.overlay),!0}}t.createOverlay(o)}catch(i){console.error(`Error creating overlay on chart ${n}:`,i)}}updateOverlayOnChart(t,r,n){try{const i=t.getOverlays(),o=[];i&&Array.isArray(i)&&i.forEach(s=>{s.id===r.id&&o.push(s)}),o.forEach(s=>{s.id&&t.removeOverlay({id:s.id})}),this.createOverlayOnChart(t,r,n)}catch(i){console.error(`Error updating overlay on chart ${n}:`,i)}}removeOverlayFromChart(t,r,n){try{const i=t.getOverlays(),o=[];i&&Array.isArray(i)&&i.forEach(s=>{s.id===r.id&&o.push(s)}),o.forEach(s=>{s.id&&t.removeOverlay({id:s.id})})}catch(i){console.error(`Error removing overlay from chart ${n}:`,i)}}getRegisteredChartIds(){return Array.from(this.activeCharts.keys())}getChartSymbol(t){const r=this.activeCharts.get(t);if(r)return{symbol:r.symbol,type:r.type,interval:r.interval}}};xe(wp,"instance",new wp),xe(wp,"enabled",!1);let ov=wp;const Rs=()=>ov.getInstance(),kE=e=>{ov.setEnabled(e)},Dd=()=>ov.isEnabled(),Ng=class El{constructor(){xe(this,"isProcessing",!1),xe(this,"pendingUpdates",new Map),xe(this,"chartSubscribedSymbols",null),xe(this,"setChartSubscribedSymbols",null),xe(this,"visibleChartIds",null),xe(this,"activeChart",null),xe(this,"setSymbolCallback",null)}static getInstance(){return El.instance||(El.instance=new El),El.instance}initialize(t,r,n,i,o){this.chartSubscribedSymbols=t,this.setChartSubscribedSymbols=r,this.visibleChartIds=n,this.activeChart=i,this.setSymbolCallback=o,console.log("SymbolSyncManager: Initialized with chart state accessors")}requestSymbolChange(t,r){if(console.log("SymbolSyncManager: Symbol change requested -",t.id,r),this.isProcessing){console.log("SymbolSyncManager: Currently processing, queuing update for",t.id),this.pendingUpdates.set(t.id,{chartId:t,symbol:r});return}this.processSymbolChange(t,r)}processSymbolChange(t,r){console.log("SymbolSyncManager: Processing symbol change -",t.id,r,"TIMESTAMP:",Date.now()),this.isProcessing=!0;try{if(this.isDuplicateCall(t,r)){console.log("SymbolSyncManager: Skipping duplicate symbol change for",t.id);return}El.enabled?this.syncAllCharts(t,r):this.updateSingleChart(t,r)}catch(n){console.error("SymbolSyncManager: Error processing symbol change:",n)}finally{this.isProcessing=!1,this.processPendingUpdates()}}isDuplicateCall(t,r){if(!this.chartSubscribedSymbols)return console.log("SymbolSyncManager: isDuplicateCall - no chartSubscribedSymbols accessor"),!1;const n=this.chartSubscribedSymbols()[t.id];return(n==null?void 0:n.symbol)===(r==null?void 0:r.symbol)&&(n==null?void 0:n.exchange)===(r==null?void 0:r.exchange)&&(n==null?void 0:n.type)===(r==null?void 0:r.type)}syncAllCharts(t,r){if(!this.chartSubscribedSymbols||!this.setChartSubscribedSymbols||!this.visibleChartIds||!this.activeChart){console.error("SymbolSyncManager: Not properly initialized");return}console.log("SymbolSyncManager: Starting atomic sync operation");const n=this.captureCurrentStates();console.log("SymbolSyncManager: Captured current states:",n);const i=this.getChartsRequiringUpdate(t,r);console.log("SymbolSyncManager: Charts to update (before state update):",i.map(s=>s.id));const o=n.get(t.id);o&&(console.log("SymbolSyncManager: Setting previous symbol for source chart",t.id,o),$r.getInstance().setPreviousSymbol(t,o)),i.forEach(s=>{const u=n.get(s.id);u&&(console.log("SymbolSyncManager: Setting previous symbol for",s.id,u),$r.getInstance().setPreviousSymbol(s,u))}),this.setChartSubscribedSymbols(s=>({...s,[t.id]:r})),Rs().updateSymbol(t,r),this.updateChartsAtomically(i,r)}updateSingleChart(t,r){var n,i;if(!this.setChartSubscribedSymbols||!this.setSymbolCallback){console.error("SymbolSyncManager: Not properly initialized for single chart update");return}console.log("SymbolSyncManager: Updating single chart:",t.id);const o=(i=(n=this.chartSubscribedSymbols)==null?void 0:n.call(this))==null?void 0:i[t.id];o&&$r.getInstance().setPreviousSymbol(t,o),this.setChartSubscribedSymbols(s=>({...s,[t.id]:r})),Rs().updateSymbol(t,r),this.setSymbolCallback(r,t,$r.getInstance().getDataFeed())}captureCurrentStates(){const t=new Map;if(this.chartSubscribedSymbols){const r=this.chartSubscribedSymbols();Object.entries(r).forEach(([n,i])=>{i&&t.set(n,{...i})})}return t}getChartsRequiringUpdate(t,r){return!this.visibleChartIds||!this.chartSubscribedSymbols?(console.log("SymbolSyncManager: getChartsRequiringUpdate - EARLY RETURN due to missing accessors:",{visibleChartIds:!!this.visibleChartIds,chartSubscribedSymbols:!!this.chartSubscribedSymbols}),[]):(console.log("SymbolSyncManager: getChartsRequiringUpdate - checking visible charts:",this.visibleChartIds().map(n=>n.id)),console.log("SymbolSyncManager: getChartsRequiringUpdate - current state:",this.chartSubscribedSymbols()),this.visibleChartIds().filter(n=>{if(n.id===t.id)return console.log("SymbolSyncManager: Skipping source chart:",n.id),!1;const i=this.chartSubscribedSymbols()[n.id];return console.log(`SymbolSyncManager: Checking chart ${n.id} - current:`,i,"new:",r),(i==null?void 0:i.symbol)===(r==null?void 0:r.symbol)&&(i==null?void 0:i.exchange)===(r==null?void 0:r.exchange)?(console.log(`SymbolSyncManager: Skipping chart ${n.id} - already has same symbol`),!1):(console.log(`SymbolSyncManager: Chart ${n.id} needs update`),!0)}))}updateChartsAtomically(t,r){if(!this.setSymbolCallback)return;console.log("SymbolSyncManager: Applying atomic updates to",t.length,"charts"),t.length>0&&this.setChartSubscribedSymbols(i=>{const o={...i};return t.forEach(s=>{o[s.id]=r}),o});const n=Rs();t.forEach(i=>{n.updateSymbol(i,r),this.setSymbolCallback(r,i,$r.getInstance().getDataFeed())})}processPendingUpdates(){if(this.pendingUpdates.size>0){console.log("SymbolSyncManager: Processing",this.pendingUpdates.size,"pending updates");const t=Array.from(this.pendingUpdates.values());this.pendingUpdates.clear();const r=new Map;t.forEach(n=>{r.set(n.chartId.id,n)}),r.forEach(n=>{this.processSymbolChange(n.chartId,n.symbol)})}}isCurrentlyProcessing(){return this.isProcessing}getPendingUpdatesCount(){return this.pendingUpdates.size}clearPendingUpdates(){this.pendingUpdates.clear(),console.log("SymbolSyncManager: Cleared all pending updates")}static setEnabled(t){El.enabled=t}static isEnabled(){return El.enabled}};xe(Ng,"instance"),xe(Ng,"enabled",!1);let av=Ng;const sv=()=>av.getInstance(),ME=e=>{av.setEnabled(e)},TE=()=>av.isEnabled();class Y2{constructor(t){xe(this,"customOverrides",null),xe(this,"isLightTheme"),this.customOverrides=t||null,this.isLightTheme=r=>r==="Light Theme 1"||r==="Light Theme 2"}hasCustomStyles(){return this.customOverrides!==null&&this.hasAnyCustomOverrides()}getStyledWithOverrides(t,r){if(!this.hasCustomStyles())return t;let n=tt.cloneDeep(t);const i=this.customOverrides;return i.global&&(n=tt.merge(n,i.global)),this.isLightTheme(r)&&i.light?n=tt.merge(n,i.light):!this.isLightTheme(r)&&i.dark&&(n=tt.merge(n,i.dark)),i.themes&&i.themes[r]&&(n=tt.merge(n,i.themes[r])),n}updateCustomOverrides(t){this.customOverrides=t}getCustomOverrides(){return this.customOverrides?tt.cloneDeep(this.customOverrides):null}clearCustomOverrides(){this.customOverrides=null}hasAnyCustomOverrides(){if(!this.customOverrides)return!1;const{global:t,light:r,dark:n,themes:i}=this.customOverrides;return!!(t&&Object.keys(t).length>0||r&&Object.keys(r).length>0||n&&Object.keys(n).length>0||i&&Object.keys(i).length>0)}}let Cp=null;function EE(e){Cp=new Y2(e)}function _0(){return Cp||(Cp=new Y2),Cp}let at=Ny(),zg=!1;const IE=()=>({...at,candle:{...at.candle,tooltip:{...at.candle.tooltip,title:{...at.candle.tooltip.title,family:Ir,weight:Lr},legend:{...at.candle.tooltip.legend,family:Ir,weight:Lr,template:[{title:"T: ",value:"{time}"},{title:"O: ",value:"{open}"},{title:"H: ",value:"{high}"},{title:"L: ",value:"{low}"},{title:"C: ",value:"{close}"},{title:"V: ",value:"{volume}"}]}},priceMark:{...at.candle.priceMark,high:{...at.candle.priceMark.high,textFamily:Ir,textWeight:Lr},low:{...at.candle.priceMark.low,textFamily:Ir,textWeight:Lr},last:{...at.candle.priceMark.last,text:{...at.candle.priceMark.last.text,family:Ir,weight:Lr}}}},indicator:{...at.indicator,tooltip:{...at.indicator.tooltip,title:{...at.indicator.tooltip.title,family:Ir,weight:Lr},legend:{...at.indicator.tooltip.legend,family:Ir,weight:Lr}}},xAxis:{...at.xAxis,tickText:{...at.xAxis.tickText,family:Ir,weight:Lr}},yAxis:{...at.yAxis,tickText:{...at.yAxis.tickText,family:Ir,weight:Lr}},crosshair:{...at.crosshair,horizontal:{...at.crosshair.horizontal,text:{...at.crosshair.horizontal.text,family:Ir,weight:Lr}},vertical:{...at.crosshair.vertical,text:{...at.crosshair.vertical.text,family:Ir,weight:Lr}}},overlay:{...at.overlay,text:{...at.overlay.text,family:Ir,weight:Lr}},grid:{...at.grid,horizontal:{...at.grid.horizontal,color:"rgb(178, 181, 190)"},vertical:{...at.grid.vertical,color:"rgb(178, 181, 190)"}}}),LE=()=>({...at,candle:{...at.candle,tooltip:{...at.candle.tooltip,title:{...at.candle.tooltip.title,family:Ir,weight:Lr},legend:{...at.candle.tooltip.legend,family:Ir,weight:Lr,template:[{title:"T: ",value:"{time}"},{title:"O: ",value:"{open}"},{title:"H: ",value:"{high}"},{title:"L: ",value:"{low}"},{title:"C: ",value:"{close}"},{title:"V: ",value:"{volume}"}]}},priceMark:{...at.candle.priceMark,high:{...at.candle.priceMark.high,textFamily:Ir,textWeight:Lr},low:{...at.candle.priceMark.low,textFamily:Ir,textWeight:Lr},last:{...at.candle.priceMark.last,text:{...at.candle.priceMark.last.text,family:Ir,weight:Lr}}}},indicator:{...at.indicator,tooltip:{...at.indicator.tooltip,title:{...at.indicator.tooltip.title,family:Ir,weight:Lr},legend:{...at.indicator.tooltip.legend,family:Ir,weight:Lr}}},crosshair:{...at.crosshair,horizontal:{...at.crosshair.horizontal,text:{...at.crosshair.horizontal.text,family:Ir,weight:Lr}},vertical:{...at.crosshair.vertical,text:{...at.crosshair.vertical.text,family:Ir,weight:Lr}}},overlay:{...at.overlay,text:{...at.overlay.text,family:Ir,weight:Lr}},grid:{...at.grid,horizontal:{...at.grid.horizontal,color:"rgb(42, 46, 57)"},vertical:{...at.grid.vertical,color:"rgb(42, 46, 57)"}},xAxis:{...at.xAxis,axisLine:{...at.xAxis.axisLine,color:"rgb(42, 46, 57)"},tickText:{...at.xAxis.tickText,family:Ir,weight:Lr}},yAxis:{...at.yAxis,axisLine:{...at.yAxis.axisLine,color:"rgb(42, 46, 57)"},tickText:{...at.yAxis.tickText,family:Ir,weight:Lr}}});function PE(){return zg}const AE=e=>e==="Light Theme 1"||e==="Light Theme 2"?(zg=!1,IE()):(zg=!0,LE()),Ui=e=>{const t=AE(e);return _0().getStyledWithOverrides(t,e)},DE=e=>{at=tt.merge({},at,e)};var FE=q('<div class=left-section><select class=select></select><button class="button edit-btn"title="Rename watchlist"><svg width=14 height=14 viewBox="0 0 24 24"fill=currentColor><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z">'),zm=q('<button class="button add-btn"title="Add symbol">+'),RE=q('<div class=left-section><div class=rename-container><input type=text class=rename-input placeholder="Enter watchlist name..."maxlength=50 autofocus><button class="button save-btn"title=Save><svg width=14 height=14 viewBox="0 0 24 24"fill=currentColor><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg></button><button class="button cancel-btn"title=Cancel><svg width=14 height=14 viewBox="0 0 24 24"fill=currentColor><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z">'),OE=q("<div class=rename-error>"),NE=q("<div class=list>"),zE=q("<div class=chartspire-ui-watchlist><div class=header>"),$E=q("<option>"),BE=q(`<div class=ticker-item><div class=ticker-info><img class=ticker-logo><span class=ticker-name></span></div><span class=ticker-price>$</span><svg version=1.1 id=Capa_1 xmlns=http://www.w3.org/2000/svg viewBox="0 0 408.483 408.483"><g><g><path d="M87.748,388.784c0.461,11.01,9.521,19.699,20.539,19.699h191.911c11.018,0,20.078-8.689,20.539-19.699l13.705-289.316\r
															H74.043L87.748,388.784z M247.655,171.329c0-4.61,3.738-8.349,8.35-8.349h13.355c4.609,0,8.35,3.738,8.35,8.349v165.293\r
															c0,4.611-3.738,8.349-8.35,8.349h-13.355c-4.61,0-8.35-3.736-8.35-8.349V171.329z M189.216,171.329\r
															c0-4.61,3.738-8.349,8.349-8.349h13.355c4.609,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.737,8.349-8.349,8.349h-13.355\r
															c-4.61,0-8.349-3.736-8.349-8.349V171.329L189.216,171.329z M130.775,171.329c0-4.61,3.738-8.349,8.349-8.349h13.356\r
															c4.61,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.738,8.349-8.349,8.349h-13.356c-4.61,0-8.349-3.736-8.349-8.349V171.329z"></path><path d="M343.567,21.043h-88.535V4.305c0-2.377-1.927-4.305-4.305-4.305h-92.971c-2.377,0-4.304,1.928-4.304,4.305v16.737H64.916\r
															c-7.125,0-12.9,5.776-12.9,12.901V74.47h304.451V33.944C356.467,26.819,350.692,21.043,343.567,21.043z">`),VE=q("<div class=ticker-item><div class=ticker-info><img class=ticker-logo><span class=ticker-name></span></div><span class=ticker-price>$");const WE={multiplier:1,timespan:"minute",text:"1m"},UE=e=>({symbol:e.symbol,exchange:e.exchange,type:e.type}),HE=e=>{const t=new bE(e.useExternalWatchListStorage),r=`watchlist_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=$r.getInstance().getDataFeed(),i=n?SE(WE,r,n,{useHttp:e.watchListHttp,httpInterval:e.watchListHttpInterval,httpBatchSize:e.watchListHttpBatchSize,httpRetryEnabled:e.watchListHttpRetryEnabled,httpMaxRetries:e.watchListHttpMaxRetries}):null;ki(async()=>{try{const U=await x(),de={};for(const[fe,ue]of Object.entries(U))de[fe]=re(ue);_(de);const X=zc.getOrderedNames(de);X.length>0&&(A(X[0]),await b(X[0],de)),M(!0),console.log("Dynamic watchlists initialized:",X)}catch(U){console.error("Error during watchlist initialization:",U)}});const[o,s]=ye(!1),[u,d]=ye(!1),[h,p]=ye(""),[f,m]=ye(""),x=async()=>{try{const U=await t.fetchWatchlist();return zc.initializeWatchlists(e.watchListAmount,U)}catch(U){return console.error("Error initializing watchlists:",U),zc.initializeWatchlists(e.watchListAmount,null)}},b=async(U,de)=>{const X=de[U]||[];X.length>0&&i&&i.subscribeToWatchlist(U,X)},[C,_]=ye({}),[k,M]=ye(!1),[L,A]=ye(""),[P,W]=ye(null);Br(()=>{i&&i.dataService.cleanup()});const D=U=>{const de=L(),X=C()[de];if(e.enabledSymbolTypes&&e.enabledSymbolTypes.length>0&&!(re([U]).length>0)){console.warn(`Symbol ${U.symbol} type '${U.type}' is not allowed. Enabled types: ${e.enabledSymbolTypes.join(", ")}`);return}if(ce(de)){console.warn(`Watchlist ${de} is full (limit: ${e.watchListLimit})`);return}if(ae(U)){console.warn(`Symbol ${U.symbol} from ${U.exchange} already exists in ${de}`);return}const fe=UE(U);_(ue=>({...ue,[de]:[...X,fe]})),i&&i.subscribeToSymbol(U),t.addToStorage({...C(),[de]:[...X,fe]})},$=(U,de=!1)=>{const X=L(),fe=C()[X].filter(ue=>!(ue.symbol===U.symbol&&ue.exchange===U.exchange));_(ue=>({...ue,[X]:fe})),i&&i.unsubscribeFromSymbol(U),t.addToStorage({...C(),[X]:fe})},z=({draggable:U})=>{const de=C()[L()].find(X=>X.symbol===U.id);W(de||null)},B=({draggable:U,droppable:de})=>{if(U&&de){const X=L(),fe=[...C()[X]],ue=fe.findIndex(Te=>`${Te.symbol}_${Te.exchange}`===U.id),Fe=fe.findIndex(Te=>`${Te.symbol}_${Te.exchange}`===de.id);if(ue!==-1&&Fe!==-1&&ue!==Fe){const[Te]=fe.splice(ue,1);fe.splice(Fe,0,Te),_(Pe=>({...Pe,[X]:fe})),t.addToStorage({...C(),[X]:fe})}}W(null)},Z=U=>{const de=L(),X=C()[de]||[],fe=C()[U]||[];i&&i.switchWatchlist(U,fe,de,X),A(U)},J=()=>{p(L()),m(""),d(!0)},H=()=>{d(!1),p(""),m("")},ee=async()=>{const U=h().trim(),de=L(),X=zc.getOrderedNames(C()).filter(ue=>ue!==de),fe=zc.validateWatchlistName(U,X);if(!fe.isValid){m(fe.error||"Invalid name");return}try{const ue=zc.renameWatchlist(C(),de,U);Ba(()=>{_(ue),A(U),d(!1),p(""),m("")}),t.addToStorage(ue),console.log(`Watchlist renamed from "${de}" to "${U}"`)}catch(ue){console.error("Error renaming watchlist:",ue),m("Failed to rename watchlist")}},le=U=>{U.key==="Enter"?ee():U.key==="Escape"&&H()},ce=U=>C()[U].length>=e.watchListLimit;function ae(U){const de=L();return C()[de].some(X=>X.symbol===U.symbol&&X.exchange===U.exchange)}const re=U=>!e.enabledSymbolTypes||e.enabledSymbolTypes.length===0?U:U.filter(de=>{if(!de.type)return!1;const X=de.type.toLowerCase();return e.enabledSymbolTypes.some(fe=>fe.toLowerCase()===X)}),ve=U=>{sv().requestSymbolChange($a(),U)},pe=U=>{const de=PE()?"#FFFFFF":"#000000";if(i){const X=`${U.symbol}_${U.exchange}`,fe=i.symbolData()[X],ue=i.previousPrices()[X];if(!(fe!=null&&fe.close)||ue===void 0)return de;const Fe=fe.close;return Fe>ue?"#00FF00":Fe<ue?"#FF0000":de}return de},Y=U=>{var de;if(i){const X=`${U.symbol}_${U.exchange}`;return(de=i.symbolData()[X])==null?void 0:de.close}};return G($e,{get when(){return k()},get children(){var U=zE(),de=U.firstChild;return R(de,G($e,{get when(){return!u()},get children(){return[(()=>{var X=FE(),fe=X.firstChild,ue=fe.nextSibling;return fe.addEventListener("change",Fe=>{Z(Fe.currentTarget.value)}),R(fe,G(Vn,{get each(){return zc.getOrderedNames(C())},children:Fe=>(()=>{var Te=$E();return Te.value=Fe,R(Te,Fe),Te})()})),ue.$$click=J,Ne(()=>fe.value=L()),X})(),(()=>{var X=zm();return X.$$click=()=>s(fe=>!fe),X})()]}}),null),R(de,G($e,{get when(){return u()},get children(){return[(()=>{var X=RE(),fe=X.firstChild,ue=fe.firstChild,Fe=ue.nextSibling,Te=Fe.nextSibling;return ue.$$keydown=le,ue.$$input=Pe=>p(Pe.currentTarget.value),Fe.$$click=()=>void ee(),Te.$$click=H,Ne(()=>ue.value=h()),X})(),(()=>{var X=zm();return X.$$click=()=>s(fe=>!fe),X})()]}}),null),R(U,G($e,{get when(){return De(()=>!!u())()&&f()},get children(){var X=OE();return R(X,f),X}}),null),R(U,G($e,{get when(){return o()},get children(){return G(W2,{get locale(){return e.locale},onSymbolSelected:X=>{D(X)},onClose:()=>{s(!1)},get enabledSymbolTypes(){return e.enabledSymbolTypes}})}}),null),R(U,G(sE,{onDragStart:z,onDragEnd:B,collisionDetector:oE,get children(){return[G(cE,{}),G(fE,{get ids(){return C()[L()].map(X=>`${X.symbol}_${X.exchange}`)},get children(){var X=NE();return R(X,()=>C()[L()].map(fe=>{const ue=mE(`${fe.symbol}_${fe.exchange}`);return(()=>{var Fe=BE(),Te=Fe.firstChild,Pe=Te.firstChild,Ce=Pe.nextSibling,Ee=Te.nextSibling;Ee.firstChild;var Je=Ee.nextSibling;return Fe.$$click=()=>{ve(fe)},Tn(ue,Fe,()=>ue),R(Ce,()=>fe.symbol),R(Ee,()=>Y(fe)||"Loading...",null),Je.$$click=Qe=>{Qe.stopPropagation(),$(fe,!1)},Ne(Qe=>{var nt=fe.logo?fe.logo:void 0,Ue=pe(fe);return nt!==Qe.e&&Ve(Pe,"src",Qe.e=nt),Ue!==Qe.t&&((Qe.t=Ue)!=null?Ee.style.setProperty("color",Ue):Ee.style.removeProperty("color")),Qe},{e:void 0,t:void 0}),Fe})()})),X}}),G(hE,{get children(){return De(()=>!!P())()?(()=>{var X=VE(),fe=X.firstChild,ue=fe.firstChild,Fe=ue.nextSibling,Te=fe.nextSibling;return Te.firstChild,R(Fe,()=>{var Pe;return(Pe=P())==null?void 0:Pe.symbol}),R(Te,()=>Y(P())||"Loading...",null),Ne(Pe=>{var Ce,Ee,Je=(Ce=P())!=null&&Ce.logo?(Ee=P())==null?void 0:Ee.logo:void 0,Qe=pe(P());return Je!==Pe.e&&Ve(ue,"src",Pe.e=Je),Qe!==Pe.t&&((Pe.t=Qe)!=null?Te.style.setProperty("color",Qe):Te.style.removeProperty("color")),Pe},{e:void 0,t:void 0}),X})():null}})]}}),null),U}})};Xt(["click","input","keydown"]);const{min:YE,max:XE}=Math,Yc=(e,t=0,r=1)=>YE(XE(t,e),r),lv=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=Yc(e[t],0,255)):t===3&&(e[t]=Yc(e[t],0,1));return e},X2={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])X2[`[object ${e}]`]=e.toLowerCase();function Vt(e){return X2[Object.prototype.toString.call(e)]||"object"}const Dt=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):Vt(e[0])=="object"&&t?t.split("").filter(r=>e[0][r]!==void 0).map(r=>e[0][r]):e[0].slice(0),Zd=e=>{if(e.length<2)return null;const t=e.length-1;return Vt(e[t])=="string"?e[t].toLowerCase():null},{PI:qp,min:j2,max:Z2}=Math,Do=e=>Math.round(e*100)/100,$g=e=>Math.round(e*100)/100,Ls=qp*2,sg=qp/3,jE=qp/180,ZE=180/qp;function G2(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const Lt={format:{},autodetect:[]};class Be{constructor(...t){const r=this;if(Vt(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let n=Zd(t),i=!1;if(!n){i=!0,Lt.sorted||(Lt.autodetect=Lt.autodetect.sort((o,s)=>s.p-o.p),Lt.sorted=!0);for(let o of Lt.autodetect)if(n=o.test(...t),n)break}if(Lt.format[n]){const o=Lt.format[n].apply(null,i?t:t.slice(0,-1));r._rgb=lv(o)}else throw new Error("unknown format: "+t);r._rgb.length===3&&r._rgb.push(1)}toString(){return Vt(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const GE="3.1.2",Ht=(...e)=>new Be(...e);Ht.version=GE;const Hd={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},qE=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,QE=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,q2=e=>{if(e.match(qE)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16),r=t>>16,n=t>>8&255,i=t&255;return[r,n,i,1]}if(e.match(QE)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16),r=t>>24&255,n=t>>16&255,i=t>>8&255,o=Math.round((t&255)/255*100)/100;return[r,n,i,o]}throw new Error(`unknown hex color: ${e}`)},{round:op}=Math,Q2=(...e)=>{let[t,r,n,i]=Dt(e,"rgba"),o=Zd(e)||"auto";i===void 0&&(i=1),o==="auto"&&(o=i<1?"rgba":"rgb"),t=op(t),r=op(r),n=op(n);let s="000000"+(t<<16|r<<8|n).toString(16);s=s.substr(s.length-6);let u="0"+op(i*255).toString(16);switch(u=u.substr(u.length-2),o.toLowerCase()){case"rgba":return`#${s}${u}`;case"argb":return`#${u}${s}`;default:return`#${s}`}};Be.prototype.name=function(){const e=Q2(this._rgb,"rgb");for(let t of Object.keys(Hd))if(Hd[t]===e)return t.toLowerCase();return e};Lt.format.named=e=>{if(e=e.toLowerCase(),Hd[e])return q2(Hd[e]);throw new Error("unknown color name: "+e)};Lt.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&Vt(e)==="string"&&Hd[e.toLowerCase()])return"named"}});Be.prototype.alpha=function(e,t=!1){return e!==void 0&&Vt(e)==="number"?t?(this._rgb[3]=e,this):new Be([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};Be.prototype.clipped=function(){return this._rgb._clipped||!1};const Ua={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},KE=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Ds(e){const t=KE.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);Ua.labWhitePoint=e,Ua.Xn=t[0],Ua.Zn=t[1]}function N0(){return Ua.labWhitePoint}const cv=(...e)=>{e=Dt(e,"lab");const[t,r,n]=e,[i,o,s]=JE(t,r,n),[u,d,h]=K2(i,o,s);return[u,d,h,e.length>3?e[3]:1]},JE=(e,t,r)=>{const{kE:n,kK:i,kKE:o,Xn:s,Yn:u,Zn:d}=Ua,h=(e+16)/116,p=.002*t+h,f=h-.005*r,m=p*p*p,x=f*f*f,b=m>n?m:(116*p-16)/i,C=e>o?Math.pow((e+16)/116,3):e/i,_=x>n?x:(116*f-16)/i,k=b*s,M=C*u,L=_*d;return[k,M,L]},lg=e=>{const t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},K2=(e,t,r)=>{const{MtxAdaptMa:n,MtxAdaptMaI:i,MtxXYZ2RGB:o,RefWhiteRGB:s,Xn:u,Yn:d,Zn:h}=Ua,p=u*n.m00+d*n.m10+h*n.m20,f=u*n.m01+d*n.m11+h*n.m21,m=u*n.m02+d*n.m12+h*n.m22,x=s.X*n.m00+s.Y*n.m10+s.Z*n.m20,b=s.X*n.m01+s.Y*n.m11+s.Z*n.m21,C=s.X*n.m02+s.Y*n.m12+s.Z*n.m22,_=(e*n.m00+t*n.m10+r*n.m20)*(x/p),k=(e*n.m01+t*n.m11+r*n.m21)*(b/f),M=(e*n.m02+t*n.m12+r*n.m22)*(C/m),L=_*i.m00+k*i.m10+M*i.m20,A=_*i.m01+k*i.m11+M*i.m21,P=_*i.m02+k*i.m12+M*i.m22,W=lg(L*o.m00+A*o.m10+P*o.m20),D=lg(L*o.m01+A*o.m11+P*o.m21),$=lg(L*o.m02+A*o.m12+P*o.m22);return[W*255,D*255,$*255]},uv=(...e)=>{const[t,r,n,...i]=Dt(e,"rgb"),[o,s,u]=J2(t,r,n),[d,h,p]=eI(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]};function eI(e,t,r){const{Xn:n,Yn:i,Zn:o,kE:s,kK:u}=Ua,d=e/n,h=t/i,p=r/o,f=d>s?Math.pow(d,1/3):(u*d+16)/116,m=h>s?Math.pow(h,1/3):(u*h+16)/116,x=p>s?Math.pow(p,1/3):(u*p+16)/116;return[116*m-16,500*(f-m),200*(m-x)]}function cg(e){const t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const J2=(e,t,r)=>{e=cg(e/255),t=cg(t/255),r=cg(r/255);const{MtxRGB2XYZ:n,MtxAdaptMa:i,MtxAdaptMaI:o,Xn:s,Yn:u,Zn:d,As:h,Bs:p,Cs:f}=Ua;let m=e*n.m00+t*n.m10+r*n.m20,x=e*n.m01+t*n.m11+r*n.m21,b=e*n.m02+t*n.m12+r*n.m22;const C=s*i.m00+u*i.m10+d*i.m20,_=s*i.m01+u*i.m11+d*i.m21,k=s*i.m02+u*i.m12+d*i.m22;let M=m*i.m00+x*i.m10+b*i.m20,L=m*i.m01+x*i.m11+b*i.m21,A=m*i.m02+x*i.m12+b*i.m22;return M*=C/h,L*=_/p,A*=k/f,m=M*o.m00+L*o.m10+A*o.m20,x=M*o.m01+L*o.m11+A*o.m21,b=M*o.m02+L*o.m12+A*o.m22,[m,x,b]};Be.prototype.lab=function(){return uv(this._rgb)};const tI=(...e)=>new Be(...e,"lab");Object.assign(Ht,{lab:tI,getLabWhitePoint:N0,setLabWhitePoint:Ds});Lt.format.lab=cv;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Dt(e,"lab"),Vt(e)==="array"&&e.length===3)return"lab"}});Be.prototype.darken=function(e=1){const t=this,r=t.lab();return r[0]-=Ua.Kn*e,new Be(r,"lab").alpha(t.alpha(),!0)};Be.prototype.brighten=function(e=1){return this.darken(-e)};Be.prototype.darker=Be.prototype.darken;Be.prototype.brighter=Be.prototype.brighten;Be.prototype.get=function(e){const[t,r]=e.split("."),n=this[t]();if(r){const i=t.indexOf(r)-(t.substr(0,2)==="ok"?2:0);if(i>-1)return n[i];throw new Error(`unknown channel ${r} in mode ${t}`)}else return n};const{pow:rI}=Math,nI=1e-7,iI=20;Be.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&Vt(e)==="number"){if(e===0)return new Be([0,0,0,this._rgb[3]],"rgb");if(e===1)return new Be([255,255,255,this._rgb[3]],"rgb");let r=this.luminance(),n=iI;const i=(s,u)=>{const d=s.interpolate(u,.5,t),h=d.luminance();return Math.abs(e-h)<nI||!n--?d:h>e?i(s,d):i(d,u)},o=(r>e?i(new Be([0,0,0]),this):i(this,new Be([255,255,255]))).rgb();return new Be([...o,this._rgb[3]])}return oI(...this._rgb.slice(0,3))};const oI=(e,t,r)=>(e=ug(e),t=ug(t),r=ug(r),.2126*e+.7152*t+.0722*r),ug=e=>(e/=255,e<=.03928?e/12.92:rI((e+.055)/1.055,2.4)),di={},Yd=(e,t,r=.5,...n)=>{let i=n[0]||"lrgb";if(!di[i]&&!n.length&&(i=Object.keys(di)[0]),!di[i])throw new Error(`interpolation mode ${i} is not defined`);return Vt(e)!=="object"&&(e=new Be(e)),Vt(t)!=="object"&&(t=new Be(t)),di[i](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))};Be.prototype.mix=Be.prototype.interpolate=function(e,t=.5,...r){return Yd(this,e,t,...r)};Be.prototype.premultiply=function(e=!1){const t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new Be([t[0]*r,t[1]*r,t[2]*r,r],"rgb")};const{sin:aI,cos:sI}=Math,e5=(...e)=>{let[t,r,n]=Dt(e,"lch");return isNaN(n)&&(n=0),n=n*jE,[t,sI(n)*r,aI(n)*r]},dv=(...e)=>{e=Dt(e,"lch");const[t,r,n]=e,[i,o,s]=e5(t,r,n),[u,d,h]=cv(i,o,s);return[u,d,h,e.length>3?e[3]:1]},lI=(...e)=>{const t=G2(Dt(e,"hcl"));return dv(...t)},{sqrt:cI,atan2:uI,round:dI}=Math,t5=(...e)=>{const[t,r,n]=Dt(e,"lab"),i=cI(r*r+n*n);let o=(uI(n,r)*ZE+360)%360;return dI(i*1e4)===0&&(o=Number.NaN),[t,i,o]},hv=(...e)=>{const[t,r,n,...i]=Dt(e,"rgb"),[o,s,u]=uv(t,r,n),[d,h,p]=t5(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]};Be.prototype.lch=function(){return hv(this._rgb)};Be.prototype.hcl=function(){return G2(hv(this._rgb))};const hI=(...e)=>new Be(...e,"lch"),pI=(...e)=>new Be(...e,"hcl");Object.assign(Ht,{lch:hI,hcl:pI});Lt.format.lch=dv;Lt.format.hcl=lI;["lch","hcl"].forEach(e=>Lt.autodetect.push({p:2,test:(...t)=>{if(t=Dt(t,e),Vt(t)==="array"&&t.length===3)return e}}));Be.prototype.saturate=function(e=1){const t=this,r=t.lch();return r[1]+=Ua.Kn*e,r[1]<0&&(r[1]=0),new Be(r,"lch").alpha(t.alpha(),!0)};Be.prototype.desaturate=function(e=1){return this.saturate(-e)};Be.prototype.set=function(e,t,r=!1){const[n,i]=e.split("."),o=this[n]();if(i){const s=n.indexOf(i)-(n.substr(0,2)==="ok"?2:0);if(s>-1){if(Vt(t)=="string")switch(t.charAt(0)){case"+":o[s]+=+t;break;case"-":o[s]+=+t;break;case"*":o[s]*=+t.substr(1);break;case"/":o[s]/=+t.substr(1);break;default:o[s]=+t}else if(Vt(t)==="number")o[s]=t;else throw new Error("unsupported value for Color.set");const u=new Be(o,n);return r?(this._rgb=u._rgb,this):u}throw new Error(`unknown channel ${i} in mode ${n}`)}else return o};Be.prototype.tint=function(e=.5,...t){return Yd(this,"white",e,...t)};Be.prototype.shade=function(e=.5,...t){return Yd(this,"black",e,...t)};const fI=(e,t,r)=>{const n=e._rgb,i=t._rgb;return new Be(n[0]+r*(i[0]-n[0]),n[1]+r*(i[1]-n[1]),n[2]+r*(i[2]-n[2]),"rgb")};di.rgb=fI;const{sqrt:dg,pow:Cd}=Math,gI=(e,t,r)=>{const[n,i,o]=e._rgb,[s,u,d]=t._rgb;return new Be(dg(Cd(n,2)*(1-r)+Cd(s,2)*r),dg(Cd(i,2)*(1-r)+Cd(u,2)*r),dg(Cd(o,2)*(1-r)+Cd(d,2)*r),"rgb")};di.lrgb=gI;const vI=(e,t,r)=>{const n=e.lab(),i=t.lab();return new Be(n[0]+r*(i[0]-n[0]),n[1]+r*(i[1]-n[1]),n[2]+r*(i[2]-n[2]),"lab")};di.lab=vI;const Gd=(e,t,r,n)=>{let i,o;n==="hsl"?(i=e.hsl(),o=t.hsl()):n==="hsv"?(i=e.hsv(),o=t.hsv()):n==="hcg"?(i=e.hcg(),o=t.hcg()):n==="hsi"?(i=e.hsi(),o=t.hsi()):n==="lch"||n==="hcl"?(n="hcl",i=e.hcl(),o=t.hcl()):n==="oklch"&&(i=e.oklch().reverse(),o=t.oklch().reverse());let s,u,d,h,p,f;(n.substr(0,1)==="h"||n==="oklch")&&([s,d,p]=i,[u,h,f]=o);let m,x,b,C;return!isNaN(s)&&!isNaN(u)?(u>s&&u-s>180?C=u-(s+360):u<s&&s-u>180?C=u+360-s:C=u-s,x=s+r*C):isNaN(s)?isNaN(u)?x=Number.NaN:(x=u,(p==1||p==0)&&n!="hsv"&&(m=h)):(x=s,(f==1||f==0)&&n!="hsv"&&(m=d)),m===void 0&&(m=d+r*(h-d)),b=p+r*(f-p),n==="oklch"?new Be([b,m,x],n):new Be([x,m,b],n)},r5=(e,t,r)=>Gd(e,t,r,"lch");di.lch=r5;di.hcl=r5;const mI=e=>{if(Vt(e)=="number"&&e>=0&&e<=16777215){const t=e>>16,r=e>>8&255,n=e&255;return[t,r,n,1]}throw new Error("unknown num color: "+e)},yI=(...e)=>{const[t,r,n]=Dt(e,"rgb");return(t<<16)+(r<<8)+n};Be.prototype.num=function(){return yI(this._rgb)};const bI=(...e)=>new Be(...e,"num");Object.assign(Ht,{num:bI});Lt.format.num=mI;Lt.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&Vt(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});const xI=(e,t,r)=>{const n=e.num(),i=t.num();return new Be(n+r*(i-n),"num")};di.num=xI;const{floor:wI}=Math,CI=(...e)=>{e=Dt(e,"hcg");let[t,r,n]=e,i,o,s;n=n*255;const u=r*255;if(r===0)i=o=s=n;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const d=wI(t),h=t-d,p=n*(1-r),f=p+u*(1-h),m=p+u*h,x=p+u;switch(d){case 0:[i,o,s]=[x,m,p];break;case 1:[i,o,s]=[f,x,p];break;case 2:[i,o,s]=[p,x,m];break;case 3:[i,o,s]=[p,f,x];break;case 4:[i,o,s]=[m,p,x];break;case 5:[i,o,s]=[x,p,f];break}}return[i,o,s,e.length>3?e[3]:1]},_I=(...e)=>{const[t,r,n]=Dt(e,"rgb"),i=j2(t,r,n),o=Z2(t,r,n),s=o-i,u=s*100/255,d=i/(255-s)*100;let h;return s===0?h=Number.NaN:(t===o&&(h=(r-n)/s),r===o&&(h=2+(n-t)/s),n===o&&(h=4+(t-r)/s),h*=60,h<0&&(h+=360)),[h,u,d]};Be.prototype.hcg=function(){return _I(this._rgb)};const SI=(...e)=>new Be(...e,"hcg");Ht.hcg=SI;Lt.format.hcg=CI;Lt.autodetect.push({p:1,test:(...e)=>{if(e=Dt(e,"hcg"),Vt(e)==="array"&&e.length===3)return"hcg"}});const kI=(e,t,r)=>Gd(e,t,r,"hcg");di.hcg=kI;const{cos:_d}=Math,MI=(...e)=>{e=Dt(e,"hsi");let[t,r,n]=e,i,o,s;return isNaN(t)&&(t=0),isNaN(r)&&(r=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(s=(1-r)/3,i=(1+r*_d(Ls*t)/_d(sg-Ls*t))/3,o=1-(s+i)):t<2/3?(t-=1/3,i=(1-r)/3,o=(1+r*_d(Ls*t)/_d(sg-Ls*t))/3,s=1-(i+o)):(t-=2/3,o=(1-r)/3,s=(1+r*_d(Ls*t)/_d(sg-Ls*t))/3,i=1-(o+s)),i=Yc(n*i*3),o=Yc(n*o*3),s=Yc(n*s*3),[i*255,o*255,s*255,e.length>3?e[3]:1]},{min:TI,sqrt:EI,acos:II}=Math,LI=(...e)=>{let[t,r,n]=Dt(e,"rgb");t/=255,r/=255,n/=255;let i;const o=TI(t,r,n),s=(t+r+n)/3,u=s>0?1-o/s:0;return u===0?i=NaN:(i=(t-r+(t-n))/2,i/=EI((t-r)*(t-r)+(t-n)*(r-n)),i=II(i),n>r&&(i=Ls-i),i/=Ls),[i*360,u,s]};Be.prototype.hsi=function(){return LI(this._rgb)};const PI=(...e)=>new Be(...e,"hsi");Ht.hsi=PI;Lt.format.hsi=MI;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Dt(e,"hsi"),Vt(e)==="array"&&e.length===3)return"hsi"}});const AI=(e,t,r)=>Gd(e,t,r,"hsi");di.hsi=AI;const Bg=(...e)=>{e=Dt(e,"hsl");const[t,r,n]=e;let i,o,s;if(r===0)i=o=s=n*255;else{const u=[0,0,0],d=[0,0,0],h=n<.5?n*(1+r):n+r-n*r,p=2*n-h,f=t/360;u[0]=f+1/3,u[1]=f,u[2]=f-1/3;for(let m=0;m<3;m++)u[m]<0&&(u[m]+=1),u[m]>1&&(u[m]-=1),6*u[m]<1?d[m]=p+(h-p)*6*u[m]:2*u[m]<1?d[m]=h:3*u[m]<2?d[m]=p+(h-p)*(2/3-u[m])*6:d[m]=p;[i,o,s]=[d[0]*255,d[1]*255,d[2]*255]}return e.length>3?[i,o,s,e[3]]:[i,o,s,1]},n5=(...e)=>{e=Dt(e,"rgba");let[t,r,n]=e;t/=255,r/=255,n/=255;const i=j2(t,r,n),o=Z2(t,r,n),s=(o+i)/2;let u,d;return o===i?(u=0,d=Number.NaN):u=s<.5?(o-i)/(o+i):(o-i)/(2-o-i),t==o?d=(r-n)/(o-i):r==o?d=2+(n-t)/(o-i):n==o&&(d=4+(t-r)/(o-i)),d*=60,d<0&&(d+=360),e.length>3&&e[3]!==void 0?[d,u,s,e[3]]:[d,u,s]};Be.prototype.hsl=function(){return n5(this._rgb)};const DI=(...e)=>new Be(...e,"hsl");Ht.hsl=DI;Lt.format.hsl=Bg;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Dt(e,"hsl"),Vt(e)==="array"&&e.length===3)return"hsl"}});const FI=(e,t,r)=>Gd(e,t,r,"hsl");di.hsl=FI;const{floor:RI}=Math,OI=(...e)=>{e=Dt(e,"hsv");let[t,r,n]=e,i,o,s;if(n*=255,r===0)i=o=s=n;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const u=RI(t),d=t-u,h=n*(1-r),p=n*(1-r*d),f=n*(1-r*(1-d));switch(u){case 0:[i,o,s]=[n,f,h];break;case 1:[i,o,s]=[p,n,h];break;case 2:[i,o,s]=[h,n,f];break;case 3:[i,o,s]=[h,p,n];break;case 4:[i,o,s]=[f,h,n];break;case 5:[i,o,s]=[n,h,p];break}}return[i,o,s,e.length>3?e[3]:1]},{min:NI,max:zI}=Math,$I=(...e)=>{e=Dt(e,"rgb");let[t,r,n]=e;const i=NI(t,r,n),o=zI(t,r,n),s=o-i;let u,d,h;return h=o/255,o===0?(u=Number.NaN,d=0):(d=s/o,t===o&&(u=(r-n)/s),r===o&&(u=2+(n-t)/s),n===o&&(u=4+(t-r)/s),u*=60,u<0&&(u+=360)),[u,d,h]};Be.prototype.hsv=function(){return $I(this._rgb)};const BI=(...e)=>new Be(...e,"hsv");Ht.hsv=BI;Lt.format.hsv=OI;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Dt(e,"hsv"),Vt(e)==="array"&&e.length===3)return"hsv"}});const VI=(e,t,r)=>Gd(e,t,r,"hsv");di.hsv=VI;function Np(e,t){let r=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(s=>[s]));let n=t[0].length,i=t[0].map((s,u)=>t.map(d=>d[u])),o=e.map(s=>i.map(u=>Array.isArray(s)?s.reduce((d,h,p)=>d+h*(u[p]||0),0):u.reduce((d,h)=>d+h*s,0)));return r===1&&(o=o[0]),n===1?o.map(s=>s[0]):o}const pv=(...e)=>{e=Dt(e,"lab");const[t,r,n,...i]=e,[o,s,u]=WI([t,r,n]),[d,h,p]=K2(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]};function WI(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],r=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],n=Np(r,e);return Np(t,n.map(i=>i**3))}const fv=(...e)=>{const[t,r,n,...i]=Dt(e,"rgb"),o=J2(t,r,n);return[...UI(o),...i.length>0&&i[0]<1?[i[0]]:[]]};function UI(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],r=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],n=Np(t,e);return Np(r,n.map(i=>Math.cbrt(i)))}Be.prototype.oklab=function(){return fv(this._rgb)};const HI=(...e)=>new Be(...e,"oklab");Object.assign(Ht,{oklab:HI});Lt.format.oklab=pv;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Dt(e,"oklab"),Vt(e)==="array"&&e.length===3)return"oklab"}});const YI=(e,t,r)=>{const n=e.oklab(),i=t.oklab();return new Be(n[0]+r*(i[0]-n[0]),n[1]+r*(i[1]-n[1]),n[2]+r*(i[2]-n[2]),"oklab")};di.oklab=YI;const XI=(e,t,r)=>Gd(e,t,r,"oklch");di.oklch=XI;const{pow:hg,sqrt:pg,PI:fg,cos:$m,sin:Bm,atan2:jI}=Math,ZI=(e,t="lrgb",r=null)=>{const n=e.length;r||(r=Array.from(new Array(n)).map(()=>1));const i=n/r.reduce(function(f,m){return f+m});if(r.forEach((f,m)=>{r[m]*=i}),e=e.map(f=>new Be(f)),t==="lrgb")return GI(e,r);const o=e.shift(),s=o.get(t),u=[];let d=0,h=0;for(let f=0;f<s.length;f++)if(s[f]=(s[f]||0)*r[0],u.push(isNaN(s[f])?0:r[0]),t.charAt(f)==="h"&&!isNaN(s[f])){const m=s[f]/180*fg;d+=$m(m)*r[0],h+=Bm(m)*r[0]}let p=o.alpha()*r[0];e.forEach((f,m)=>{const x=f.get(t);p+=f.alpha()*r[m+1];for(let b=0;b<s.length;b++)if(!isNaN(x[b]))if(u[b]+=r[m+1],t.charAt(b)==="h"){const C=x[b]/180*fg;d+=$m(C)*r[m+1],h+=Bm(C)*r[m+1]}else s[b]+=x[b]*r[m+1]});for(let f=0;f<s.length;f++)if(t.charAt(f)==="h"){let m=jI(h/u[f],d/u[f])/fg*180;for(;m<0;)m+=360;for(;m>=360;)m-=360;s[f]=m}else s[f]=s[f]/u[f];return p/=n,new Be(s,t).alpha(p>.99999?1:p,!0)},GI=(e,t)=>{const r=e.length,n=[0,0,0,0];for(let i=0;i<e.length;i++){const o=e[i],s=t[i]/r,u=o._rgb;n[0]+=hg(u[0],2)*s,n[1]+=hg(u[1],2)*s,n[2]+=hg(u[2],2)*s,n[3]+=u[3]*s}return n[0]=pg(n[0]),n[1]=pg(n[1]),n[2]=pg(n[2]),n[3]>.9999999&&(n[3]=1),new Be(lv(n))},{pow:qI}=Math;function zp(e){let t="rgb",r=Ht("#ccc"),n=0,i=[0,1],o=[],s=[0,0],u=!1,d=[],h=!1,p=0,f=1,m=!1,x={},b=!0,C=1;const _=function(D){if(D=D||["#fff","#000"],D&&Vt(D)==="string"&&Ht.brewer&&Ht.brewer[D.toLowerCase()]&&(D=Ht.brewer[D.toLowerCase()]),Vt(D)==="array"){D.length===1&&(D=[D[0],D[0]]),D=D.slice(0);for(let $=0;$<D.length;$++)D[$]=Ht(D[$]);o.length=0;for(let $=0;$<D.length;$++)o.push($/(D.length-1))}return P(),d=D},k=function(D){if(u!=null){const $=u.length-1;let z=0;for(;z<$&&D>=u[z];)z++;return z-1}return 0};let M=D=>D,L=D=>D;const A=function(D,$){let z,B;if($==null&&($=!1),isNaN(D)||D===null)return r;$?B=D:u&&u.length>2?B=k(D)/(u.length-2):f!==p?B=(D-p)/(f-p):B=1,B=L(B),$||(B=M(B)),C!==1&&(B=qI(B,C)),B=s[0]+B*(1-s[0]-s[1]),B=Yc(B,0,1);const Z=Math.floor(B*1e4);if(b&&x[Z])z=x[Z];else{if(Vt(d)==="array")for(let J=0;J<o.length;J++){const H=o[J];if(B<=H){z=d[J];break}if(B>=H&&J===o.length-1){z=d[J];break}if(B>H&&B<o[J+1]){B=(B-H)/(o[J+1]-H),z=Ht.interpolate(d[J],d[J+1],B,t);break}}else Vt(d)==="function"&&(z=d(B));b&&(x[Z]=z)}return z};var P=()=>x={};_(e);const W=function(D){const $=Ht(A(D));return h&&$[h]?$[h]():$};return W.classes=function(D){if(D!=null){if(Vt(D)==="array")u=D,i=[D[0],D[D.length-1]];else{const $=Ht.analyze(i);D===0?u=[$.min,$.max]:u=Ht.limits($,"e",D)}return W}return u},W.domain=function(D){if(!arguments.length)return i;p=D[0],f=D[D.length-1],o=[];const $=d.length;if(D.length===$&&p!==f)for(let z of Array.from(D))o.push((z-p)/(f-p));else{for(let z=0;z<$;z++)o.push(z/($-1));if(D.length>2){const z=D.map((Z,J)=>J/(D.length-1)),B=D.map(Z=>(Z-p)/(f-p));B.every((Z,J)=>z[J]===Z)||(L=Z=>{if(Z<=0||Z>=1)return Z;let J=0;for(;Z>=B[J+1];)J++;const H=(Z-B[J])/(B[J+1]-B[J]);return z[J]+H*(z[J+1]-z[J])})}}return i=[p,f],W},W.mode=function(D){return arguments.length?(t=D,P(),W):t},W.range=function(D,$){return _(D),W},W.out=function(D){return h=D,W},W.spread=function(D){return arguments.length?(n=D,W):n},W.correctLightness=function(D){return D==null&&(D=!0),m=D,P(),m?M=function($){const z=A(0,!0).lab()[0],B=A(1,!0).lab()[0],Z=z>B;let J=A($,!0).lab()[0];const H=z+(B-z)*$;let ee=J-H,le=0,ce=1,ae=20;for(;Math.abs(ee)>.01&&ae-- >0;)(function(){return Z&&(ee*=-1),ee<0?(le=$,$+=(ce-$)*.5):(ce=$,$+=(le-$)*.5),J=A($,!0).lab()[0],ee=J-H})();return $}:M=$=>$,W},W.padding=function(D){return D!=null?(Vt(D)==="number"&&(D=[D,D]),s=D,W):s},W.colors=function(D,$){arguments.length<2&&($="hex");let z=[];if(arguments.length===0)z=d.slice(0);else if(D===1)z=[W(.5)];else if(D>1){const B=i[0],Z=i[1]-B;z=QI(0,D).map(J=>W(B+J/(D-1)*Z))}else{e=[];let B=[];if(u&&u.length>2)for(let Z=1,J=u.length,H=1<=J;H?Z<J:Z>J;H?Z++:Z--)B.push((u[Z-1]+u[Z])*.5);else B=i;z=B.map(Z=>W(Z))}return Ht[$]&&(z=z.map(B=>B[$]())),z},W.cache=function(D){return D!=null?(b=D,W):b},W.gamma=function(D){return D!=null?(C=D,W):C},W.nodata=function(D){return D!=null?(r=Ht(D),W):r},W}function QI(e,t,r){let n=[],i=e<t,o=t;for(let s=e;i?s<o:s>o;i?s++:s--)n.push(s);return n}const KI=function(e){let t=[1,1];for(let r=1;r<e;r++){let n=[1];for(let i=1;i<=t.length;i++)n[i]=(t[i]||0)+t[i-1];t=n}return t},JI=function(e){let t,r,n,i;if(e=e.map(o=>new Be(o)),e.length===2)[r,n]=e.map(o=>o.lab()),t=function(o){const s=[0,1,2].map(u=>r[u]+o*(n[u]-r[u]));return new Be(s,"lab")};else if(e.length===3)[r,n,i]=e.map(o=>o.lab()),t=function(o){const s=[0,1,2].map(u=>(1-o)*(1-o)*r[u]+2*(1-o)*o*n[u]+o*o*i[u]);return new Be(s,"lab")};else if(e.length===4){let o;[r,n,i,o]=e.map(s=>s.lab()),t=function(s){const u=[0,1,2].map(d=>(1-s)*(1-s)*(1-s)*r[d]+3*(1-s)*(1-s)*s*n[d]+3*(1-s)*s*s*i[d]+s*s*s*o[d]);return new Be(u,"lab")}}else if(e.length>=5){let o,s,u;o=e.map(d=>d.lab()),u=e.length-1,s=KI(u),t=function(d){const h=1-d,p=[0,1,2].map(f=>o.reduce((m,x,b)=>m+s[b]*h**(u-b)*d**b*x[f],0));return new Be(p,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},eL=e=>{const t=JI(e);return t.scale=()=>zp(t),t},{round:i5}=Math;Be.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(i5)};Be.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,r)=>r<3?e===!1?t:i5(t):t)};const tL=(...e)=>new Be(...e,"rgb");Object.assign(Ht,{rgb:tL});Lt.format.rgb=(...e)=>{const t=Dt(e,"rgba");return t[3]===void 0&&(t[3]=1),t};Lt.autodetect.push({p:3,test:(...e)=>{if(e=Dt(e,"rgba"),Vt(e)==="array"&&(e.length===3||e.length===4&&Vt(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});const la=(e,t,r)=>{if(!la[r])throw new Error("unknown blend mode "+r);return la[r](e,t)},zl=e=>(t,r)=>{const n=Ht(r).rgb(),i=Ht(t).rgb();return Ht.rgb(e(n,i))},$l=e=>(t,r)=>{const n=[];return n[0]=e(t[0],r[0]),n[1]=e(t[1],r[1]),n[2]=e(t[2],r[2]),n},rL=e=>e,nL=(e,t)=>e*t/255,iL=(e,t)=>e>t?t:e,oL=(e,t)=>e>t?e:t,aL=(e,t)=>255*(1-(1-e/255)*(1-t/255)),sL=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),lL=(e,t)=>255*(1-(1-t/255)/(e/255)),cL=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);la.normal=zl($l(rL));la.multiply=zl($l(nL));la.screen=zl($l(aL));la.overlay=zl($l(sL));la.darken=zl($l(iL));la.lighten=zl($l(oL));la.dodge=zl($l(cL));la.burn=zl($l(lL));const{pow:uL,sin:dL,cos:hL}=Math;function pL(e=300,t=-1.5,r=1,n=1,i=[0,1]){let o=0,s;Vt(i)==="array"?s=i[1]-i[0]:(s=0,i=[i,i]);const u=function(d){const h=Ls*((e+120)/360+t*d),p=uL(i[0]+s*d,n),f=(o!==0?r[0]+d*o:r)*p*(1-p)/2,m=hL(h),x=dL(h),b=p+f*(-.14861*m+1.78277*x),C=p+f*(-.29227*m-.90649*x),_=p+f*(1.97294*m);return Ht(lv([b*255,C*255,_*255,1]))};return u.start=function(d){return d==null?e:(e=d,u)},u.rotations=function(d){return d==null?t:(t=d,u)},u.gamma=function(d){return d==null?n:(n=d,u)},u.hue=function(d){return d==null?r:(r=d,Vt(r)==="array"?(o=r[1]-r[0],o===0&&(r=r[1])):o=0,u)},u.lightness=function(d){return d==null?i:(Vt(d)==="array"?(i=d,s=d[1]-d[0]):(i=[d,d],s=0),u)},u.scale=()=>Ht.scale(u),u.hue(r),u}const fL="0123456789abcdef",{floor:gL,random:vL}=Math,mL=()=>{let e="#";for(let t=0;t<6;t++)e+=fL.charAt(gL(vL()*16));return new Be(e,"hex")},{log:Vm,pow:yL,floor:bL,abs:xL}=Math;function o5(e,t=null){const r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Vt(e)==="object"&&(e=Object.values(e)),e.forEach(n=>{t&&Vt(n)==="object"&&(n=n[t]),n!=null&&!isNaN(n)&&(r.values.push(n),r.sum+=n,n<r.min&&(r.min=n),n>r.max&&(r.max=n),r.count+=1)}),r.domain=[r.min,r.max],r.limits=(n,i)=>a5(r,n,i),r}function a5(e,t="equal",r=7){Vt(e)=="array"&&(e=o5(e));const{min:n,max:i}=e,o=e.values.sort((u,d)=>u-d);if(r===1)return[n,i];const s=[];if(t.substr(0,1)==="c"&&(s.push(n),s.push(i)),t.substr(0,1)==="e"){s.push(n);for(let u=1;u<r;u++)s.push(n+u/r*(i-n));s.push(i)}else if(t.substr(0,1)==="l"){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");const u=Math.LOG10E*Vm(n),d=Math.LOG10E*Vm(i);s.push(n);for(let h=1;h<r;h++)s.push(yL(10,u+h/r*(d-u)));s.push(i)}else if(t.substr(0,1)==="q"){s.push(n);for(let u=1;u<r;u++){const d=(o.length-1)*u/r,h=bL(d);if(h===d)s.push(o[h]);else{const p=d-h;s.push(o[h]*(1-p)+o[h+1]*p)}}s.push(i)}else if(t.substr(0,1)==="k"){let u;const d=o.length,h=new Array(d),p=new Array(r);let f=!0,m=0,x=null;x=[],x.push(n);for(let _=1;_<r;_++)x.push(n+_/r*(i-n));for(x.push(i);f;){for(let k=0;k<r;k++)p[k]=0;for(let k=0;k<d;k++){const M=o[k];let L=Number.MAX_VALUE,A;for(let P=0;P<r;P++){const W=xL(x[P]-M);W<L&&(L=W,A=P),p[A]++,h[k]=A}}const _=new Array(r);for(let k=0;k<r;k++)_[k]=null;for(let k=0;k<d;k++)u=h[k],_[u]===null?_[u]=o[k]:_[u]+=o[k];for(let k=0;k<r;k++)_[k]*=1/p[k];f=!1;for(let k=0;k<r;k++)if(_[k]!==x[k]){f=!0;break}x=_,m++,m>200&&(f=!1)}const b={};for(let _=0;_<r;_++)b[_]=[];for(let _=0;_<d;_++)u=h[_],b[u].push(o[_]);let C=[];for(let _=0;_<r;_++)C.push(b[_][0]),C.push(b[_][b[_].length-1]);C=C.sort((_,k)=>_-k),s.push(C[0]);for(let _=1;_<C.length;_+=2){const k=C[_];!isNaN(k)&&s.indexOf(k)===-1&&s.push(k)}}return s}const wL=(e,t)=>{e=new Be(e),t=new Be(t);const r=e.luminance(),n=t.luminance();return r>n?(r+.05)/(n+.05):(n+.05)/(r+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const Wm=.027,CL=5e-4,_L=.1,Um=1.14,ap=.022,Hm=1.414,SL=(e,t)=>{e=new Be(e),t=new Be(t),e.alpha()<1&&(e=Yd(t,e,e.alpha(),"rgb"));const r=Ym(...e.rgb()),n=Ym(...t.rgb()),i=r>=ap?r:r+Math.pow(ap-r,Hm),o=n>=ap?n:n+Math.pow(ap-n,Hm),s=Math.pow(o,.56)-Math.pow(i,.57),u=Math.pow(o,.65)-Math.pow(i,.62),d=Math.abs(o-i)<CL?0:i<o?s*Um:u*Um;return(Math.abs(d)<_L?0:d>0?d-Wm:d+Wm)*100};function Ym(e,t,r){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(r/255,2.4)}const{sqrt:Ts,pow:hn,min:kL,max:ML,atan2:Xm,abs:jm,cos:sp,sin:Zm,exp:TL,PI:Gm}=Math;function EL(e,t,r=1,n=1,i=1){var o=function(U){return 360*U/(2*Gm)},s=function(U){return 2*Gm*U/360};e=new Be(e),t=new Be(t);const[u,d,h]=Array.from(e.lab()),[p,f,m]=Array.from(t.lab()),x=(u+p)/2,b=Ts(hn(d,2)+hn(h,2)),C=Ts(hn(f,2)+hn(m,2)),_=(b+C)/2,k=.5*(1-Ts(hn(_,7)/(hn(_,7)+hn(25,7)))),M=d*(1+k),L=f*(1+k),A=Ts(hn(M,2)+hn(h,2)),P=Ts(hn(L,2)+hn(m,2)),W=(A+P)/2,D=o(Xm(h,M)),$=o(Xm(m,L)),z=D>=0?D:D+360,B=$>=0?$:$+360,Z=jm(z-B)>180?(z+B+360)/2:(z+B)/2,J=1-.17*sp(s(Z-30))+.24*sp(s(2*Z))+.32*sp(s(3*Z+6))-.2*sp(s(4*Z-63));let H=B-z;H=jm(H)<=180?H:B<=z?H+360:H-360,H=2*Ts(A*P)*Zm(s(H)/2);const ee=p-u,le=P-A,ce=1+.015*hn(x-50,2)/Ts(20+hn(x-50,2)),ae=1+.045*W,re=1+.015*W*J,ve=30*TL(-hn((Z-275)/25,2)),pe=-(2*Ts(hn(W,7)/(hn(W,7)+hn(25,7))))*Zm(2*s(ve)),Y=Ts(hn(ee/(r*ce),2)+hn(le/(n*ae),2)+hn(H/(i*re),2)+pe*(le/(n*ae))*(H/(i*re)));return ML(0,kL(100,Y))}function IL(e,t,r="lab"){e=new Be(e),t=new Be(t);const n=e.get(r),i=t.get(r);let o=0;for(let s in n){const u=(n[s]||0)-(i[s]||0);o+=u*u}return Math.sqrt(o)}const LL=(...e)=>{try{return new Be(...e),!0}catch{return!1}},PL={cool(){return zp([Ht.hsl(180,1,.9),Ht.hsl(250,.7,.4)])},hot(){return zp(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Vg={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},s5=Object.keys(Vg),qm=new Map(s5.map(e=>[e.toLowerCase(),e])),AL=typeof Proxy=="function"?new Proxy(Vg,{get(e,t){const r=t.toLowerCase();if(qm.has(r))return e[qm.get(r)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(s5)}}):Vg,DL=(...e)=>{e=Dt(e,"cmyk");const[t,r,n,i]=e,o=e.length>4?e[4]:1;return i===1?[0,0,0,o]:[t>=1?0:255*(1-t)*(1-i),r>=1?0:255*(1-r)*(1-i),n>=1?0:255*(1-n)*(1-i),o]},{max:Qm}=Math,FL=(...e)=>{let[t,r,n]=Dt(e,"rgb");t=t/255,r=r/255,n=n/255;const i=1-Qm(t,Qm(r,n)),o=i<1?1/(1-i):0,s=(1-t-i)*o,u=(1-r-i)*o,d=(1-n-i)*o;return[s,u,d,i]};Be.prototype.cmyk=function(){return FL(this._rgb)};const RL=(...e)=>new Be(...e,"cmyk");Object.assign(Ht,{cmyk:RL});Lt.format.cmyk=DL;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Dt(e,"cmyk"),Vt(e)==="array"&&e.length===4)return"cmyk"}});const OL=(...e)=>{const t=Dt(e,"hsla");let r=Zd(e)||"lsa";return t[0]=Do(t[0]||0)+"deg",t[1]=Do(t[1]*100)+"%",t[2]=Do(t[2]*100)+"%",r==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),r="hsla"):t.length=3,`${r.substr(0,3)}(${t.join(" ")})`},NL=(...e)=>{const t=Dt(e,"lab");let r=Zd(e)||"lab";return t[0]=Do(t[0])+"%",t[1]=Do(t[1]),t[2]=Do(t[2]),r==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},zL=(...e)=>{const t=Dt(e,"lch");let r=Zd(e)||"lab";return t[0]=Do(t[0])+"%",t[1]=Do(t[1]),t[2]=isNaN(t[2])?"none":Do(t[2])+"deg",r==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},$L=(...e)=>{const t=Dt(e,"lab");return t[0]=Do(t[0]*100)+"%",t[1]=$g(t[1]),t[2]=$g(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},l5=(...e)=>{const[t,r,n,...i]=Dt(e,"rgb"),[o,s,u]=fv(t,r,n),[d,h,p]=t5(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]},BL=(...e)=>{const t=Dt(e,"lch");return t[0]=Do(t[0]*100)+"%",t[1]=$g(t[1]),t[2]=isNaN(t[2])?"none":Do(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:gg}=Math,VL=(...e)=>{const t=Dt(e,"rgba");let r=Zd(e)||"rgb";if(r.substr(0,3)==="hsl")return OL(n5(t),r);if(r.substr(0,3)==="lab"){const n=N0();Ds("d50");const i=NL(uv(t),r);return Ds(n),i}if(r.substr(0,3)==="lch"){const n=N0();Ds("d50");const i=zL(hv(t),r);return Ds(n),i}return r.substr(0,5)==="oklab"?$L(fv(t)):r.substr(0,5)==="oklch"?BL(l5(t)):(t[0]=gg(t[0]),t[1]=gg(t[1]),t[2]=gg(t[2]),(r==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),r="rgba"),`${r.substr(0,3)}(${t.slice(0,r==="rgb"?3:4).join(" ")})`)},c5=(...e)=>{e=Dt(e,"lch");const[t,r,n,...i]=e,[o,s,u]=e5(t,r,n),[d,h,p]=pv(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]},Os=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,aa=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,$p=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,Fo=/\s*/.source,qd=/\s+/.source,gv=/\s*,\s*/.source,Qp=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Qd=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,u5=new RegExp("^rgba?\\("+Fo+[Os,Os,Os].join(qd)+Qd+"\\)$"),d5=new RegExp("^rgb\\("+Fo+[Os,Os,Os].join(gv)+Fo+"\\)$"),h5=new RegExp("^rgba\\("+Fo+[Os,Os,Os,aa].join(gv)+Fo+"\\)$"),p5=new RegExp("^hsla?\\("+Fo+[Qp,$p,$p].join(qd)+Qd+"\\)$"),f5=new RegExp("^hsl?\\("+Fo+[Qp,$p,$p].join(gv)+Fo+"\\)$"),g5=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,v5=new RegExp("^lab\\("+Fo+[aa,aa,aa].join(qd)+Qd+"\\)$"),m5=new RegExp("^lch\\("+Fo+[aa,aa,Qp].join(qd)+Qd+"\\)$"),y5=new RegExp("^oklab\\("+Fo+[aa,aa,aa].join(qd)+Qd+"\\)$"),b5=new RegExp("^oklch\\("+Fo+[aa,aa,Qp].join(qd)+Qd+"\\)$"),{round:x5}=Math,Sd=e=>e.map((t,r)=>r<=2?Yc(x5(t),0,255):t),pn=(e,t=0,r=100,n=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,n?e=t+(e+1)*.5*(r-t):e=t+e*(r-t)),+e),_i=(e,t)=>e==="none"?t:e,vv=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(Lt.format.named)try{return Lt.format.named(e)}catch{}if((t=e.match(u5))||(t=e.match(d5))){let r=t.slice(1,4);for(let i=0;i<3;i++)r[i]=+pn(_i(r[i],0),0,255);r=Sd(r);const n=t[4]!==void 0?+pn(t[4],0,1):1;return r[3]=n,r}if(t=e.match(h5)){const r=t.slice(1,5);for(let n=0;n<4;n++)r[n]=+pn(r[n],0,255);return r}if((t=e.match(p5))||(t=e.match(f5))){const r=t.slice(1,4);r[0]=+_i(r[0].replace("deg",""),0),r[1]=+pn(_i(r[1],0),0,100)*.01,r[2]=+pn(_i(r[2],0),0,100)*.01;const n=Sd(Bg(r)),i=t[4]!==void 0?+pn(t[4],0,1):1;return n[3]=i,n}if(t=e.match(g5)){const r=t.slice(1,4);r[1]*=.01,r[2]*=.01;const n=Bg(r);for(let i=0;i<3;i++)n[i]=x5(n[i]);return n[3]=+t[4],n}if(t=e.match(v5)){const r=t.slice(1,4);r[0]=pn(_i(r[0],0),0,100),r[1]=pn(_i(r[1],0),-125,125,!0),r[2]=pn(_i(r[2],0),-125,125,!0);const n=N0();Ds("d50");const i=Sd(cv(r));Ds(n);const o=t[4]!==void 0?+pn(t[4],0,1):1;return i[3]=o,i}if(t=e.match(m5)){const r=t.slice(1,4);r[0]=pn(r[0],0,100),r[1]=pn(_i(r[1],0),0,150,!1),r[2]=+_i(r[2].replace("deg",""),0);const n=N0();Ds("d50");const i=Sd(dv(r));Ds(n);const o=t[4]!==void 0?+pn(t[4],0,1):1;return i[3]=o,i}if(t=e.match(y5)){const r=t.slice(1,4);r[0]=pn(_i(r[0],0),0,1),r[1]=pn(_i(r[1],0),-.4,.4,!0),r[2]=pn(_i(r[2],0),-.4,.4,!0);const n=Sd(pv(r)),i=t[4]!==void 0?+pn(t[4],0,1):1;return n[3]=i,n}if(t=e.match(b5)){const r=t.slice(1,4);r[0]=pn(_i(r[0],0),0,1),r[1]=pn(_i(r[1],0),0,.4,!1),r[2]=+_i(r[2].replace("deg",""),0);const n=Sd(c5(r)),i=t[4]!==void 0?+pn(t[4],0,1):1;return n[3]=i,n}};vv.test=e=>u5.test(e)||p5.test(e)||v5.test(e)||m5.test(e)||y5.test(e)||b5.test(e)||d5.test(e)||h5.test(e)||f5.test(e)||g5.test(e)||e==="transparent";Be.prototype.css=function(e){return VL(this._rgb,e)};const WL=(...e)=>new Be(...e,"css");Ht.css=WL;Lt.format.css=vv;Lt.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&Vt(e)==="string"&&vv.test(e))return"css"}});Lt.format.gl=(...e)=>{const t=Dt(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const UL=(...e)=>new Be(...e,"gl");Ht.gl=UL;Be.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};Be.prototype.hex=function(e){return Q2(this._rgb,e)};const HL=(...e)=>new Be(...e,"hex");Ht.hex=HL;Lt.format.hex=q2;Lt.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&Vt(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:lp}=Math,w5=e=>{const t=e/100;let r,n,i;return t<66?(r=255,n=t<6?0:-155.25485562709179-.44596950469579133*(n=t-2)+104.49216199393888*lp(n),i=t<20?0:-254.76935184120902+.8274096064007395*(i=t-10)+115.67994401066147*lp(i)):(r=351.97690566805693+.114206453784165*(r=t-55)-40.25366309332127*lp(r),n=325.4494125711974+.07943456536662342*(n=t-50)-28.0852963507957*lp(n),i=255),[r,n,i,1]},{round:YL}=Math,XL=(...e)=>{const t=Dt(e,"rgb"),r=t[0],n=t[2];let i=1e3,o=4e4;const s=.4;let u;for(;o-i>s;){u=(o+i)*.5;const d=w5(u);d[2]/d[0]>=n/r?o=u:i=u}return YL(u)};Be.prototype.temp=Be.prototype.kelvin=Be.prototype.temperature=function(){return XL(this._rgb)};const vg=(...e)=>new Be(...e,"temp");Object.assign(Ht,{temp:vg,kelvin:vg,temperature:vg});Lt.format.temp=Lt.format.kelvin=Lt.format.temperature=w5;Be.prototype.oklch=function(){return l5(this._rgb)};const jL=(...e)=>new Be(...e,"oklch");Object.assign(Ht,{oklch:jL});Lt.format.oklch=c5;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Dt(e,"oklch"),Vt(e)==="array"&&e.length===3)return"oklch"}});Object.assign(Ht,{analyze:o5,average:ZI,bezier:eL,blend:la,brewer:AL,Color:Be,colors:Hd,contrast:wL,contrastAPCA:SL,cubehelix:pL,deltaE:EL,distance:IL,input:Lt,interpolate:Yd,limits:a5,mix:Yd,random:mL,scale:zp,scales:PL,valid:LL});const ZL=[["rgb(255, 255, 255)","rgb(178, 181, 190)","rgb(149, 152, 161)","rgb(120, 123, 134)","rgb(93, 96, 107)","rgb(42, 46, 57)","rgb(0, 0, 0)"],["rgb(242, 54, 69)","rgb(252, 203, 205)","rgb(250, 161, 164)","rgb(247, 124, 128)","rgb(247, 82, 95)","rgb(178, 40, 51)","rgb(128, 25, 34)"],["rgb(255, 152, 0)","rgb(255, 224, 178)","rgb(255, 204, 128)","rgb(255, 183, 77)","rgb(255, 167, 38)","rgb(245, 124, 0)","rgb(230, 81, 0)"],["rgb(255, 235, 59)","rgb(255, 249, 196)","rgb(255, 245, 157)","rgb(255, 241, 118)","rgb(255, 238, 88)","rgb(251, 192, 45)","rgb(245, 127, 23)"],["rgb(76, 175, 80)","rgb(200, 230, 201)","rgb(165, 214, 167)","rgb(129, 199, 132)","rgb(102, 187, 106)","rgb(56, 142, 60)","rgb(27, 94, 32)"],["rgb(8, 153, 129)","rgb(172, 229, 220)","rgb(112, 204, 189)","rgb(66, 189, 168)","rgb(34, 171, 148)","rgb(5, 102, 86)","rgb(0, 51, 42)"],["rgb(0, 188, 212)","rgb(178, 235, 242)","rgb(128, 222, 234)","rgb(77, 208, 225)","rgb(38, 198, 218)","rgb(0, 151, 167)","rgb(0, 96, 100)"],["rgb(41, 98, 255)","rgb(187, 217, 251)","rgb(144, 191, 249)","rgb(91, 156, 246)","rgb(49, 121, 245)","rgb(24, 72, 204)","rgb(12, 50, 153)"],["rgb(103, 58, 183)","rgb(209, 196, 233)","rgb(179, 157, 219)","rgb(149, 117, 205)","rgb(126, 87, 194)","rgb(81, 45, 168)","rgb(49, 27, 146)"],["rgb(156, 39, 176)","rgb(225, 190, 231)","rgb(206, 147, 216)","rgb(186, 104, 200)","rgb(171, 71, 188)","rgb(123, 31, 162)","rgb(74, 20, 140)"],["rgb(233, 30, 99)","rgb(248, 187, 208)","rgb(244, 143, 177)","rgb(240, 98, 146)","rgb(236, 64, 122)","rgb(194, 24, 91)","rgb(136, 14, 79)"],["#00698b","#fb7b50"]];var GL=q("<div class=split_line>"),qL=q("<div class=range_div><input class=range type=range min=1 max=100><p>%"),QL=q("<div tabindex=0><div class=selector-container><i class=arrow></i></div><div class=drop-down-container><div class=palette-content><div class=split_line></div><div class=submit><span class=cancel>Cancel</span><span>Ok"),KL=q("<div class=each_line>"),JL=q("<div>");const mv=e=>{const t=C=>{if(!C)return 100;try{const _=String(C);return _.includes("rgba")?Math.round(Ht(_).alpha()*100):100}catch{return 100}},[r,n]=Ol({ui:{open:!1,rangeFocused:!1,isDragging:!1},color:{opacity:t(e.value),selectedColor:e.value,finalColor:e.value}}),i=Yt(()=>r.ui.rangeFocused||r.ui.isDragging),o=C=>{const _=C.currentTarget,k=C.relatedTarget;return!i()&&_&&!_.contains(k)},s=()=>{n("ui","open",!1)},u=()=>{var C;n("color",{selectedColor:e.value,finalColor:e.value,opacity:t(e.value)}),(C=e.onChange)==null||C.call(e,e.value),s()},d=(C,_)=>{try{const k=_/100;return Ht(C).alpha(k).css()}catch(k){return console.warn("Error applying opacity to color:",k),C}},h=()=>{var C;const _=d(r.color.selectedColor,r.color.opacity);n("color","finalColor",_),(e.reactiveChange??!0)&&((C=e.onChange)==null||C.call(e,_))},p=C=>{const _=parseInt(C.target.value);n("color","opacity",_),h()},f=()=>{n("ui",{rangeFocused:!0,isDragging:!0})},m=()=>{n("ui","isDragging",!1),setTimeout(()=>{n("ui","rangeFocused",!1)},100)},x=C=>{n("color","selectedColor",C),h()},b=()=>{r.ui.isDragging&&(n("ui","isDragging",!1),setTimeout(()=>{n("ui","rangeFocused",!1)},100))};return ki(()=>{document.addEventListener("mouseup",b)}),Br(()=>{document.removeEventListener("mouseup",b)}),(()=>{var C=QL(),_=C.firstChild,k=_.nextSibling,M=k.firstChild,L=M.firstChild,A=L.nextSibling,P=A.firstChild,W=P.nextSibling;return C.addEventListener("blur",D=>{o(D)&&s()}),_.$$click=D=>{D.stopPropagation(),n("ui","open",!r.ui.open)},k.$$click=D=>{D.target===D.currentTarget&&s()},M.$$click=D=>{D.stopPropagation()},R(M,()=>ZL.map(D=>(()=>{var $=KL();return R($,()=>D.map(z=>(()=>{var B=JL();return B.$$click=Z=>{Z.stopPropagation(),x(z)},Ne(Z=>{var J=`each_color ${z==r.color.selectedColor?"selected":""}`,H=`background-color: ${z}`;return J!==Z.e&&st(B,Z.e=J),Z.t=kn(B,H,Z.t),Z},{e:void 0,t:void 0}),B})())),$})()),L),R(M,G($e,{get when(){return e.opacityEnabled},get children(){return[GL(),(()=>{var D=qL(),$=D.firstChild,z=$.nextSibling,B=z.firstChild;return $.addEventListener("mouseleave",m),$.$$mouseup=m,$.$$mousedown=f,$.addEventListener("blur",m),$.addEventListener("focus",f),$.$$input=p,R(z,()=>r.color.opacity,B),Ne(Z=>kn($,`background: linear-gradient(to right, transparent 0%, ${r.color.selectedColor} 100%); border: 1px solid ${r.color.selectedColor}`,Z)),Ne(()=>$.value=r.color.opacity),D})()]}}),L),P.$$click=u,W.$$click=()=>{var D;e.reactiveChange===!1&&((D=e.onChange)==null||D.call(e,r.color.finalColor)),s()},Ne(D=>{var $=`width: 120px; background-color: ${r.color.finalColor}; border-radius: 10px`,z=`chartspire-ui-color ${e.class??""} ${r.ui.open?"chartspire-ui-color-palette-show":""}`;return D.e=kn(C,$,D.e),z!==D.t&&st(C,D.t=z),D},{e:void 0,t:void 0}),C})()};Xt(["click","input","mousedown","mouseup"]);class C5{constructor(t){xe(this,"trackedSymbols",new Map),xe(this,"priceCallbacks",new Set),xe(this,"currentPrices",new Map),xe(this,"updateIntervals",new Map),xe(this,"config"),this.config={updateInterval:3e4,enableLogging:!0,...t},this.log(`[PriceTrackingService] Initialized with ${this.config.updateInterval}ms update interval`)}log(t,...r){this.config.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.config.enableLogging&&console.warn(t,...r)}getDataFeed(){try{return $r.getInstance().getDataFeed()}catch(t){return this.logWarn("[PriceTrackingService] Error getting data feed:",t),null}}trackSymbol(t){if(!this.getDataFeed()){this.logWarn("[PriceTrackingService] No DataFeed available, cannot track symbol:",t.symbol);return}const r=t.symbol;this.trackedSymbols.has(r)||(this.trackedSymbols.set(r,t),this.startPriceFetching(t),this.log(`[PriceTrackingService] Started tracking price for ${r} on ${t.exchange||"default"} exchange (${this.config.updateInterval}ms interval)`))}async startPriceFetching(t){const r=t.symbol;await this.fetchPrice(t);const n=setInterval(async()=>{await this.fetchPrice(t)},this.config.updateInterval);this.updateIntervals.set(r,n)}async fetchPrice(t){var r;const n=this.getDataFeed();if(!n){this.logWarn(`[PriceTrackingService] No DataFeed available for ${t.symbol} (${t.type})`);return}const i=t.symbol;try{this.logWarn(`[PriceTrackingService] Fetching price for ${i} on ${t.exchange||"default"} exchange...`);const o=await((r=n.getPrice)==null?void 0:r.call(n,t,t.type));if(o!=null){this.currentPrices.set(i,o);const s={symbol:i,price:o,timestamp:Date.now()};this.log(`[PriceTrackingService] Price update for ${i} on ${t.exchange||"default"}: $${o.toFixed(2)}`),this.priceCallbacks.forEach(u=>{try{u(s)}catch(d){console.error(`[PriceTrackingService] Error in price update callback for ${i}:`,d)}})}else this.logWarn(`[PriceTrackingService] No price data received for ${i} on ${t.exchange||"default"}`)}catch(o){console.error(`[PriceTrackingService] Error fetching price for ${i} on ${t.exchange||"default"}:`,o)}}untrackSymbol(t){if(!this.trackedSymbols.get(t))return;const r=this.updateIntervals.get(t);r&&(clearInterval(r),this.updateIntervals.delete(t)),this.trackedSymbols.delete(t),this.currentPrices.delete(t),this.log(`[PriceTrackingService] Stopped tracking price for ${t}`)}getCurrentPrice(t){return this.currentPrices.get(t)??null}getTrackedSymbols(){return Array.from(this.trackedSymbols.keys())}addPriceCallback(t){this.priceCallbacks.add(t)}removePriceCallback(t){this.priceCallbacks.delete(t)}updateTrackedSymbols(t,r){const n=new Set(this.trackedSymbols.keys()),i=new Set(t);for(const o of n)i.has(o)||this.untrackSymbol(o);for(const o of t)if(!n.has(o)){const s=r(o);s&&this.trackSymbol(s)}}cleanup(){for(const[t,r]of this.updateIntervals)clearInterval(r),this.log(`[PriceTrackingService] Cleared interval for ${t}`);this.updateIntervals.clear(),this.trackedSymbols.clear(),this.currentPrices.clear(),this.priceCallbacks.clear(),this.log("[PriceTrackingService] Cleanup completed")}isLoggingEnabled(){return this.config.enableLogging}updateConfig(t){const r=this.config.updateInterval;if(this.config={...this.config,...t},t.updateInterval&&t.updateInterval!==r){this.log(`[PriceTrackingService] Update interval changed from ${r}ms to ${this.config.updateInterval}ms`);const n=Array.from(this.trackedSymbols.values());this.cleanup(),n.forEach(i=>{this.trackSymbol(i)})}}getCurrentConfig(){return{...this.config}}}var fn=(e=>(e.MARKET="MARKET",e.LIMIT="LIMIT",e))(fn||{}),qn=(e=>(e.PENDING="PENDING",e.FILLED="FILLED",e.CANCELLED="CANCELLED",e))(qn||{});class yv{constructor(){xe(this,"storageKey","chartspire-paper-trading")}save(t){try{localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(r){console.error("Error saving paper trading data to local storage:",r)}}load(){try{const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):null}catch(t){return console.error("Error loading paper trading data from local storage:",t),null}}}class eP{constructor(t,r,n=!0){xe(this,"storageProvider"),xe(this,"tickerInfoCache"),xe(this,"isInitialized",!1),xe(this,"enableLogging"),this.storageProvider=t??new yv,this.tickerInfoCache=r??new Map,this.enableLogging=n}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}isExternalStorageProvider(t){return"loadAsync"in t}loadData(){const t=this.storageProvider.load();return t?(this.migrateDataIfNeeded(t),this.isInitialized=!0,t):(this.isInitialized=!0,{orders:[],positions:[],trades:[],balance:1e4})}async initializeAsync(){if(this.isExternalStorageProvider(this.storageProvider)){const t=await this.storageProvider.loadAsync();return t?(this.migrateDataIfNeeded(t),this.log("[DataStorageManager] Loaded data from external storage"),this.isInitialized=!0,t):(this.log("[DataStorageManager] No external data found, using default data"),this.isInitialized=!0,this.getDefaultData())}else return this.isInitialized=!0,this.loadData()}getDefaultData(){return{orders:[],positions:[],trades:[],balance:1e4}}saveData(t){if(!this.isInitialized){this.logWarn("[DataStorageManager] Attempted to save data before initialization completed, skipping...");return}this.log("[DataStorageManager] Saving data:",{ordersCount:t.orders.length,positionsCount:t.positions.length,tradesCount:t.trades.length,balance:t.balance}),this.storageProvider.save(t)}migrateDataIfNeeded(t){t.orders.forEach(i=>{if(!i.symbolType){const o=this.tickerInfoCache.get(i.symbol);o!=null&&o.type?(i.symbolType=o.type.toString(),this.log(`[DataStorageManager] Migration: Set ticker type for order ${i.symbol} from cache: ${i.symbolType}`)):(i.symbolType="Unknown",this.logWarn(`[DataStorageManager] Migration: Could not determine ticker type for order ${i.symbol}, set to 'Unknown'. Price tracking may not work correctly.`))}}),t.positions.forEach(i=>{if(!i.symbolType){const o=this.tickerInfoCache.get(i.symbol);o!=null&&o.type?(i.symbolType=o.type.toString(),this.log(`[DataStorageManager] Migration: Set ticker type for position ${i.symbol} from cache: ${i.symbolType}`)):(i.symbolType="Unknown",this.logWarn(`[DataStorageManager] Migration: Could not determine ticker type for position ${i.symbol}, set to 'Unknown'. Price tracking may not work correctly.`))}});const r=t.orders.length;t.orders=t.orders.filter(i=>i.status===qn.PENDING);const n=r-t.orders.length;n>0&&this.log(`[DataStorageManager] Migration: Removed ${n} filled/cancelled orders from storage to keep it clean`)}isStorageInitialized(){return this.isInitialized}isUsingExternalStorage(){return this.isExternalStorageProvider(this.storageProvider)}setTickerInfoCache(t){this.tickerInfoCache=t}setLoggingEnabled(t){this.enableLogging=t}}class tP{constructor(t=!0){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}validateOrder(t,r,n){const{symbol:i,side:o,quantity:s,type:u,price:d,currentPrice:h,symbolType:p}=t;if(s<=0)throw new Error("Quantity must be greater than 0");if(u===fn.LIMIT&&d<=0)throw new Error("Limit price must be greater than 0");if(!p||p.trim()==="")throw new Error("Ticker type is required when placing orders");const f=(u===fn.MARKET?h:d)*s;if(o==="buy"&&f>r)throw new Error("Insufficient balance");if(o==="sell"){const m=n.find(b=>b.symbol===i&&b.side==="buy"),x=m?m.quantity:0;if(x<s)throw new Error(`Insufficient shares to sell. You own ${x} ${i} but trying to sell ${s}`)}}createOrder(t){const{symbol:r,side:n,quantity:i,type:o,price:s,currentPrice:u,symbolType:d,exchange:h}=t,p=o===fn.MARKET?u:s;return{id:this.generateId(),symbol:r,side:n,quantity:i,type:o,price:p,status:qn.PENDING,timestamp:Date.now(),symbolType:d.trim(),exchange:h.trim()}}shouldExecuteLimitOrder(t,r){return t.type!==fn.LIMIT?!0:(this.log("[OrderManager] Checking limit order execution:",{orderId:t.id,symbol:t.symbol,side:t.side,limitPrice:t.price,marketPrice:r,shouldExecute:t.side==="buy"?r<=t.price:r>=t.price}),t.side==="buy"&&r>t.price?(this.log(`[OrderManager] Buy limit order NOT executed: market price ${r} > limit price ${t.price}`),!1):t.side==="sell"&&r<t.price?(this.log(`[OrderManager] Sell limit order NOT executed: market price ${r} < limit price ${t.price}`),!1):(this.log(`[OrderManager] Limit order EXECUTING: ${t.side} ${t.symbol} at market price ${r} (limit was ${t.price})`),!0))}fillOrder(t){t.status=qn.FILLED,t.filledAt=Date.now(),this.log(`[OrderManager] Order ${t.id} filled and will be removed from storage to keep storage clean`)}cancelOrder(t){if(t.status!==qn.PENDING)throw new Error("Order cannot be cancelled");t.status=qn.CANCELLED,this.log(`[OrderManager] Order ${t.id} cancelled and will be removed from storage to keep storage clean`)}checkLimitOrdersForExecution(t,r,n){const i=t.filter(o=>o.symbol===r&&o.status===qn.PENDING&&o.type===fn.LIMIT);return i.length>0&&this.log(`[OrderManager] Checking ${i.length} pending limit orders for ${r} at price $${n.toFixed(2)}`),i.filter(o=>this.shouldExecuteLimitOrder(o,n))}getPendingOrders(t){return t.filter(r=>r.status===qn.PENDING)}getPendingLimitOrdersForSymbol(t,r){return t.filter(n=>n.symbol===r&&n.status===qn.PENDING&&n.type===fn.LIMIT)}hasPendingLimitOrders(t){return t.some(r=>r.status===qn.PENDING&&r.type===fn.LIMIT)}calculatePendingBuyOrdersValue(t){return t.filter(r=>r.status===qn.PENDING&&r.side==="buy").reduce((r,n)=>r+n.price*n.quantity,0)}getPendingOrdersInfo(t){const r=t.filter(o=>o.status===qn.PENDING&&o.side==="buy"),n=t.filter(o=>o.status===qn.PENDING&&o.side==="sell"),i=this.calculatePendingBuyOrdersValue(t);return{pendingBuyOrders:r,pendingSellOrders:n,totalBuyOrdersValue:i}}setLoggingEnabled(t){this.enableLogging=t}}class rP{constructor(t=!0){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}updatePosition(t,r,n){let i=0;if(r.side==="buy"){const o=t.find(s=>s.symbol===r.symbol&&s.side==="buy");if(o){const s=o.quantity+r.quantity,u=o.averagePrice*o.quantity+n*r.quantity;o.quantity=s,o.averagePrice=u/s,o.symbolType=r.symbolType,o.exchange=r.exchange}else{const s={id:this.generateId(),symbol:r.symbol,side:"buy",quantity:r.quantity,averagePrice:n,unrealizedPnL:0,realizedPnL:0,timestamp:Date.now(),symbolType:r.symbolType,exchange:r.exchange};t.push(s)}}else{const o=t.find(s=>s.symbol===r.symbol&&s.side==="buy");if(o)if(r.quantity>=o.quantity){const s=r.quantity-o.quantity,u=(n-o.averagePrice)*o.quantity;i+=u;const d=t.findIndex(h=>h.id===o.id);if(t.splice(d,1),s>0){const h={id:this.generateId(),symbol:r.symbol,side:"sell",quantity:s,averagePrice:n,unrealizedPnL:0,realizedPnL:0,timestamp:Date.now(),symbolType:r.symbolType,exchange:r.exchange};t.push(h)}}else{const s=r.quantity,u=o.quantity-s,d=(n-o.averagePrice)*s;i+=d,o.quantity=u}else{const s=t.find(u=>u.symbol===r.symbol&&u.side==="sell");if(s){const u=s.quantity+r.quantity,d=s.averagePrice*s.quantity+n*r.quantity;s.quantity=u,s.averagePrice=d/u,s.symbolType=r.symbolType,s.exchange=r.exchange}else{const u={id:this.generateId(),symbol:r.symbol,side:"sell",quantity:r.quantity,averagePrice:n,unrealizedPnL:0,realizedPnL:0,timestamp:Date.now(),symbolType:r.symbolType,exchange:r.exchange};t.push(u)}}}return{updatedBalance:i}}updatePositionPnL(t,r,n){t.filter(i=>i.symbol===r).forEach(i=>{i.side==="buy"?i.unrealizedPnL=(n-i.averagePrice)*i.quantity:i.unrealizedPnL=(i.averagePrice-n)*i.quantity})}closePosition(t,r,n){const i=t.findIndex(h=>h.id===r);if(i===-1)throw new Error("Position not found");const o=t[i];if(!n||n<=0)throw new Error(`Invalid current price: ${n}. Cannot close position.`);this.log("[PositionManager] Closing position"),this.log("[PositionManager] Position details:",{symbol:o.symbol,side:o.side,quantity:o.quantity,averagePrice:o.averagePrice,currentPrice:n});let s=0;o.side==="buy"?s=(n-o.averagePrice)*o.quantity:s=(o.averagePrice-n)*o.quantity,this.log(`[PositionManager] Calculated realized P&L: $${s.toFixed(2)}`);const u=n*o.quantity;this.log(`[PositionManager] Total proceeds from sale: $${u.toFixed(2)}`),this.log(`[PositionManager] Original investment: $${(o.averagePrice*o.quantity).toFixed(2)}`),this.log(`[PositionManager] Net P&L from this position: $${s.toFixed(2)}`);const d={id:this.generateId(),orderId:`close-${o.id}`,symbol:o.symbol,side:o.side==="buy"?"sell":"buy",quantity:o.quantity,price:n,timestamp:Date.now()};return this.log(`[PositionManager] Closed position ${o.symbol} ${o.side} ${o.quantity} at $${n.toFixed(2)}, realized P&L: $${s.toFixed(2)}`),t.splice(i,1),{balanceChange:u,trade:d}}getPositionsForSymbol(t,r){return t.filter(n=>n.symbol===r)}getSymbolsWithPositions(t){const r=new Set;return t.forEach(n=>r.add(n.symbol)),Array.from(r)}hasOpenPositions(t){return t.length>0}getTotalUnrealizedPnL(t){return t.reduce((r,n)=>r+n.unrealizedPnL,0)}getTotalRealizedPnL(t){return t.reduce((r,n)=>r+n.realizedPnL,0)}setLoggingEnabled(t){this.enableLogging=t}}class nP{constructor(t=!0){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}calculatePendingBuyOrdersValue(t){return t.filter(r=>r.status==="PENDING"&&r.side==="buy").reduce((r,n)=>r+n.price*n.quantity,0)}addCash(t,r){if(r<=0)throw new Error("Amount must be greater than 0");const n=t+r;return this.log(`[BalanceManager] Added $${r.toFixed(2)} to account. New balance: $${n.toFixed(2)}`),n}removeCash(t,r,n){if(r<=0)throw new Error("Amount must be greater than 0");if(r>t)throw new Error(`Insufficient balance. Current balance: $${t.toFixed(2)}, trying to remove: $${r.toFixed(2)}`);const i=this.calculatePendingBuyOrdersValue(n),o=t-r;if(o<i)throw new Error(`Cannot remove $${r.toFixed(2)}. Pending buy orders require $${i.toFixed(2)} but new balance would be $${o.toFixed(2)}. Cancel some orders or remove less cash.`);return this.log(`[BalanceManager] Removed $${r.toFixed(2)} from account. New balance: $${o.toFixed(2)}`),o}setBalance(t,r){if(t<0)throw new Error("Balance cannot be negative");const n=this.calculatePendingBuyOrdersValue(r);if(t<n)throw new Error(`Cannot set balance to $${t.toFixed(2)}. Pending buy orders require $${n.toFixed(2)}. Cancel some orders first.`);return this.log(`[BalanceManager] Set balance to $${t.toFixed(2)}`),t}getPendingOrdersInfo(t,r){const n=r.filter(d=>d.status==="PENDING"&&d.side==="buy"),i=r.filter(d=>d.status==="PENDING"&&d.side==="sell"),o=this.calculatePendingBuyOrdersValue(r),s=t-o,u=Math.max(0,s);return{pendingBuyOrders:n,pendingSellOrders:i,totalBuyOrdersValue:o,availableCashAfterOrders:s,maxCashRemoval:u}}updateBalanceForOrderExecution(t,r,n){return r==="buy"?t-n:t+n}validateBalanceForOrder(t,r,n){return r==="buy"?t>=n:!0}setLoggingEnabled(t){this.enableLogging=t}}class iP{constructor(t=1e3,r=!0){xe(this,"maxTrades"),xe(this,"enableLogging"),this.maxTrades=Math.max(1,t),this.enableLogging=r}log(t,...r){this.enableLogging&&console.log(t,...r)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}createTrade(t,r,n,i,o){return{id:this.generateId(),orderId:t,symbol:r,side:n,quantity:i,price:o,timestamp:Date.now()}}addTrade(t,r){t.push(r),this.limitTrades(t)}limitTrades(t){if(t.length>this.maxTrades){t.sort((n,i)=>n.timestamp-i.timestamp);const r=t.length-this.maxTrades;t.splice(0,r),this.log(`[TradeManager] Limited trades to ${this.maxTrades}, removed ${r} oldest trades`)}}clearAllTrades(t){const r=t.length;return t.length=0,this.log(`[TradeManager] Cleared ${r} trades from history`),r}getTradesForSymbol(t,r){return t.filter(n=>n.symbol===r)}getTradesInDateRange(t,r,n){return t.filter(i=>i.timestamp>=r&&i.timestamp<=n)}getTradesForOrder(t,r){return t.filter(n=>n.orderId===r)}getTotalVolumeForSymbol(t,r){return t.filter(n=>n.symbol===r).reduce((n,i)=>n+i.quantity,0)}getTotalValueForSymbol(t,r){return t.filter(n=>n.symbol===r).reduce((n,i)=>n+i.quantity*i.price,0)}getTradeStatistics(t){const r=t.length,n=t.reduce((d,h)=>d+h.quantity,0),i=t.reduce((d,h)=>d+h.quantity*h.price,0),o=new Set(t.map(d=>d.symbol)).size,s=r>0?n/r:0,u=r>0?i/r:0;return{totalTrades:r,totalVolume:n,totalValue:i,uniqueSymbols:o,averageTradeSize:s,averageTradeValue:u}}getRecentTrades(t,r=10){return t.sort((n,i)=>i.timestamp-n.timestamp).slice(0,r)}setMaxTrades(t){this.maxTrades=Math.max(1,t)}getMaxTrades(){return this.maxTrades}setLoggingEnabled(t){this.enableLogging=t}}class oP{constructor(t,r,n,i,o=!0){xe(this,"data"),xe(this,"dataStorageManager"),xe(this,"orderManager"),xe(this,"positionManager"),xe(this,"balanceManager"),xe(this,"tradeManager"),xe(this,"priceTrackingService"),xe(this,"symbolInfoCache",new Map),xe(this,"isUIVisible",!1),xe(this,"enableLogging"),this.enableLogging=o,this.dataStorageManager=new eP(t??new yv,this.symbolInfoCache,o),this.orderManager=new tP(o),this.positionManager=new rP(o),this.balanceManager=new nP(o),this.tradeManager=new iP(i,o),this.priceTrackingService=r??new C5(n),this.dataStorageManager.isUsingExternalStorage()?(this.data=this.dataStorageManager.getDefaultData(),this.log("[PaperTradingService] Initialized with default data for external storage (async load will follow)")):(this.data=this.dataStorageManager.loadData(),this.log("[PaperTradingService] Initialized with local storage data")),this.setupPriceTracking()}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}async initializeAsync(){this.dataStorageManager.isUsingExternalStorage()&&(this.data=await this.dataStorageManager.initializeAsync(),this.log("[PaperTradingService] Async initialization completed"),this.updateTrackedSymbols())}saveData(){this.dataStorageManager.saveData(this.data)}setupPriceTracking(){this.priceTrackingService.addPriceCallback(t=>{this.log(`[PaperTradingService] Price update received: ${t.symbol} = $${t.price.toFixed(2)}`),this.checkLimitOrdersForSymbol(t.symbol,t.price),this.updatePositionPnLForSymbol(t.symbol,t.price)}),this.updateTrackedSymbols()}updateTrackedSymbols(){if(!this.isUIVisible)return;const t=new Set;for(const r of this.data.orders)r.status===qn.PENDING&&r.type===fn.LIMIT&&t.add(r.symbol);for(const r of this.data.positions)t.add(r.symbol);this.priceTrackingService.updateTrackedSymbols(Array.from(t),r=>this.symbolInfoCache.get(r)??null)}createSymbolInfo(t,r){return this.symbolInfoCache.get(t)||(r?{symbol:t,type:r,name:t}:null)}checkLimitOrdersForSymbol(t,r){this.orderManager.checkLimitOrdersForExecution(this.data.orders,t,r).forEach(n=>{this.executeOrder(n.id,r)}),this.updateTrackedSymbols()}updatePositionPnLForSymbol(t,r){this.positionManager.updatePositionPnL(this.data.positions,t,r)}cacheSymbolInfo(t){this.symbolInfoCache.set(t.symbol,t)}updatePriceTrackingConfig(t){this.priceTrackingService.updateConfig(t)}setPriceTrackingInterval(t){if(t<1e3)throw new Error("Price tracking interval must be at least 1000ms (1 second)");this.priceTrackingService.updateConfig({updateInterval:t})}getCurrentConfig(){return this.priceTrackingService.getCurrentConfig()}setPriceTrackingLogging(t){this.priceTrackingService.updateConfig({enableLogging:t}),this.enableLogging=t,this.dataStorageManager.setLoggingEnabled(t),this.orderManager.setLoggingEnabled(t),this.positionManager.setLoggingEnabled(t),this.balanceManager.setLoggingEnabled(t),this.tradeManager.setLoggingEnabled(t)}getOrders(){return[...this.data.orders]}getPositions(){return[...this.data.positions]}getTrades(){return[...this.data.trades]}getBalance(){return this.data.balance}placeOrder(t){this.orderManager.validateOrder(t,this.data.balance,this.data.positions);const r=this.orderManager.createOrder(t);return this.data.orders.push(r),r.type===fn.MARKET?this.executeOrder(r.id,t.currentPrice):this.updateTrackedSymbols(),this.saveData(),r}executeOrder(t,r){const n=this.data.orders.find(d=>d.id===t);if(!n||n.status!==qn.PENDING||!this.orderManager.shouldExecuteLimitOrder(n,r))return;const i=r*n.quantity;this.data.balance=this.balanceManager.updateBalanceForOrderExecution(this.data.balance,n.side,i);const o=this.positionManager.updatePosition(this.data.positions,n,r);this.data.balance+=o.updatedBalance;const s=this.tradeManager.createTrade(n.id,n.symbol,n.side,n.quantity,r);this.tradeManager.addTrade(this.data.trades,s),this.orderManager.fillOrder(n);const u=this.data.orders.findIndex(d=>d.id===t);u!==-1&&(this.data.orders.splice(u,1),this.log(`[PaperTradingService] Removed filled order ${t} from storage`)),this.updateTrackedSymbols(),this.saveData()}cancelOrder(t){const r=this.data.orders.find(i=>i.id===t);if(!r)throw new Error("Order not found");this.orderManager.cancelOrder(r);const n=this.data.orders.findIndex(i=>i.id===t);n!==-1&&(this.data.orders.splice(n,1),this.log(`[PaperTradingService] Removed cancelled order ${t} from storage`)),this.updateTrackedSymbols(),this.saveData()}updatePositionPnL(t,r){this.positionManager.updatePositionPnL(this.data.positions,t,r)}closePosition(t,r){const n=this.data.balance;this.log(`[PaperTradingService] Closing position - Initial balance: $${n.toFixed(2)}`);const i=this.positionManager.closePosition(this.data.positions,t,r);this.data.balance+=i.balanceChange,this.log(`[PaperTradingService] Updated balance: $${this.data.balance.toFixed(2)} (added proceeds: +$${i.balanceChange.toFixed(2)})`),this.tradeManager.addTrade(this.data.trades,i.trade),this.updateTrackedSymbols(),this.saveData(),this.log(`[PaperTradingService] Position close completed. Final balance: $${this.data.balance.toFixed(2)}`)}addCash(t){this.data.balance=this.balanceManager.addCash(this.data.balance,t),this.saveData()}removeCash(t){this.data.balance=this.balanceManager.removeCash(this.data.balance,t,this.data.orders),this.saveData()}setBalance(t){this.data.balance=this.balanceManager.setBalance(t,this.data.orders),this.saveData()}getPendingOrdersInfo(){return this.balanceManager.getPendingOrdersInfo(this.data.balance,this.data.orders)}clearAllTrades(){this.tradeManager.clearAllTrades(this.data.trades),this.saveData()}checkLimitOrders(t,r){this.checkLimitOrdersForSymbol(t,r)}reset(){this.data=this.dataStorageManager.getDefaultData(),this.updateTrackedSymbols(),this.saveData()}startPriceTrackingForPendingOrders(){this.isUIVisible=!0,this.log("[PaperTradingService] UI opened, starting price tracking for pending orders and positions...");const t=new Set;for(const i of this.data.orders)i.status===qn.PENDING&&i.type===fn.LIMIT&&t.add(i.symbol);for(const i of this.data.positions)t.add(i.symbol);const r=this.data.orders.filter(i=>i.status===qn.PENDING&&i.type===fn.LIMIT).map(i=>i.symbol),n=this.data.positions.map(i=>i.symbol);this.log(`[PaperTradingService] Found ${r.length} symbols with pending limit orders:`,r),this.log(`[PaperTradingService] Found ${n.length} symbols with open positions:`,n),this.log(`[PaperTradingService] Total ${t.size} unique symbols to track:`,Array.from(t));for(const i of t){let o=this.symbolInfoCache.get(i);if(!o){const s=this.data.orders.find(h=>h.symbol===i),u=this.data.positions.find(h=>h.symbol===i),d=(s==null?void 0:s.symbolType)||(u==null?void 0:u.symbolType);if(d){const h=this.createSymbolInfo(i,d);h&&(o=h,this.symbolInfoCache.set(i,o))}}o?(this.log(`[PaperTradingService] Starting tracking for ${i} (type: ${o.type})`),this.priceTrackingService.trackSymbol(o)):this.logWarn(`[PaperTradingService] No symbol info available for ${i} - cannot track price`)}t.size===0&&this.log("[PaperTradingService] No pending orders or positions found, no price tracking needed")}stopPriceTrackingForUI(){this.isUIVisible=!1,this.log("[PaperTradingService] UI closed, stopping all price tracking..."),this.priceTrackingService.cleanup()}hasPendingLimitOrders(){return this.orderManager.hasPendingLimitOrders(this.data.orders)}hasItemsNeedingPriceTracking(){const t=this.orderManager.hasPendingLimitOrders(this.data.orders),r=this.positionManager.hasOpenPositions(this.data.positions);return t||r}isUICurrentlyVisible(){return this.isUIVisible}cleanup(){this.isUIVisible=!1,this.priceTrackingService.cleanup()}}const aP=async()=>null;class sP{constructor(t=!0){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}save(t){this.log("[ExternalStorageProvider] Saving paper trading data via callback"),this.log("[ExternalStorageProvider] Data to save:",t),this.log("[ExternalStorageProvider] Data type:",typeof t),this.log("[ExternalStorageProvider] Data keys:",Object.keys(t||{})),this.logWarn("[ExternalStorageProvider] No save callback registered, data not saved")}load(){return this.log("[ExternalStorageProvider] Load called - use loadAsync() for external storage"),null}async loadAsync(){try{this.log("[ExternalStorageProvider] Loading paper trading data via callback");const t=await aP();return t?(this.log("[ExternalStorageProvider] Paper trading data loaded successfully"),t):(this.log("[ExternalStorageProvider] No paper trading data found"),null)}catch(t){return console.error("[ExternalStorageProvider] Error loading paper trading data:",t),null}}}var lP=q("<div class=form-group><label></label><input type=number min=0 step=0.01>"),cP=q("<div class=trade-form><div class=order-type-selector><button></button><button></button></div><div class=side-selector><button></button><button></button></div><div class=form-group><label></label><input type=number min=1 step=1></div><div class=order-summary><div class=summary-row><span>:</span><span></span></div></div><button> "),Km=q("<div class=empty-state>"),uP=q("<div class=positions-list>"),dP=q("<div class=orders-list>"),hP=q("<div class=empty-state><div class=empty-icon></div><div class=empty-title></div><div class=empty-subtitle>"),pP=q("<div class=trades-header><button class=clear-trades-btn> "),fP=q("<div class=trades-table-header><div class=header-symbol></div><div class=header-details><span class=header-qty></span><span class=header-price></span><span class=header-total></span></div><div class=header-time>"),gP=q("<div class=trades-list>"),vP=q("<div class=cash-warning>"),mP=q('<div class=cash-management><div class=cash-form><div class=form-group><label></label><input type=number min=0 step=100></div><div class=form-group><label></label><select><option value=add></option><option value=remove></option></select></div><button> </button><button class="cash-operation-btn remove"style=margin-top:15px;background:#dc3545;border-color:#dc3545;></button></div><div class=pending-orders-summary><h4>'),yP=q("<div class=paper-trading-container><div class=paper-trading-header><h3></h3><div class=balance>: </div></div><div class=current-ticker><div class=ticker-info><span class=symbol></span><span class=price></span></div></div><div class=tab-navigation><button></button><button> (<!>)</button><button> (<!>)</button><button> (<!>)</button><button></button></div><div class=tab-content>"),bP=q("<div class=position-item><div class=position-header><span class=symbol></span><span></span></div><div class=position-details><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div></div><button class=close-position-btn>"),xP=q("<div class=order-item><div class=order-header><span class=symbol></span><span></span><span class=type></span></div><div class=order-details><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div></div><button class=cancel-order-btn>"),wP=q('<div class="trade-item compact"><div class=trade-row><div class=trade-symbol><span class=symbol></span><span> </span></div><div class=trade-details><span class=quantity></span><span class=price></span><span class=total></span></div><div class=trade-time><br>'),CP=q("<div><div>: </div><div>: </div><div>: "),_P=q("<div class=error-text>"),SP=q("<div class=summary-details><div class=summary-row><span>:</span><span> (<!>)</span></div><div class=summary-row><span>:</span><span></span></div><div class=summary-row><span>:</span><span></span></div><div class=summary-row><span>:</span><span>");const kP=e=>{const[t,r]=ye([]),[n,i]=ye([]),[o,s]=ye([]),[u,d]=ye(1e4),[h,p]=ye(fn.MARKET),[f,m]=ye("buy"),[x,b]=ye(1),[C,_]=ye(e.currentPrice),[k,M]=ye("trade"),[L,A]=ye(""),[P,W]=ye(0),[D,$]=ye(1e3),[z,B]=ye("add"),Z=new C5(e.priceTrackingConfig),J=e.paperTradingUseExternalStorage?new sP(Z.isLoggingEnabled()):new yv,H=new oP(J,Z,e.priceTrackingConfig,e.paperTradingMaxTrades),ee=(Ce,...Ee)=>{Z.isLoggingEnabled()&&console.log(Ce,...Ee)},le=(Ce,...Ee)=>{Z.isLoggingEnabled()&&console.warn(Ce,...Ee)},ce=()=>(P(),Pe(e.symbol.symbol)),ae=Ce=>{P();const Ee=Z.getCurrentPrice(Ce.symbol);return Ee&&Ee>0?Ce.side==="buy"?(Ee-Ce.averagePrice)*Ce.quantity:(Ce.averagePrice-Ee)*Ce.quantity:Ce.unrealizedPnL};Z.addPriceCallback(Ce=>{W(Ee=>Ee+1),re()}),ki(async()=>{ee("[PaperTrading] Component mounted, setting up paper trading..."),e.paperTradingUseExternalStorage&&(ee("[PaperTrading] Using external storage, initializing async..."),await H.initializeAsync()),ee("[PaperTrading] Using unified data feed from ChartDataProvider"),e.symbol.symbol&&(H.cacheSymbolInfo(e.symbol),ee("[PaperTrading] Cached ticker info for:",e.symbol.symbol)),re(),A(e.symbol.symbol),H.startPriceTrackingForPendingOrders()}),Br(()=>{ee("[PaperTrading] Component unmounting, stopping price tracking..."),H.stopPriceTrackingForUI()}),rt(()=>{if(e.symbol.symbol&&e.symbol.symbol!==L()){const Ce=ce();_(Ce||e.currentPrice),A(e.symbol.symbol),H.cacheSymbolInfo(e.symbol)}}),rt(()=>{e.symbol.symbol&&e.currentPrice>0&&(H.updatePositionPnL(e.symbol.symbol,e.currentPrice),re())});const re=()=>{r(H.getOrders()),i(H.getPositions()),s(H.getTrades()),d(H.getBalance())},ve=()=>{var Ce;if(!e.symbol.symbol||x()<=0)return;const Ee=ce(),Je=h()===fn.MARKET?Ee:C();ee("[PaperTrading] Placing order:",{symbol:e.symbol.symbol,side:f(),quantity:x(),type:h(),price:Je,currentPrice:Ee});try{const Qe=H.placeOrder({symbol:e.symbol.symbol,side:f(),quantity:x(),type:h(),price:Je,currentPrice:Ee,symbolType:(Ce=e.symbol.type)==null?void 0:Ce.toString(),exchange:e.symbol.exchange||"default"});ee("[PaperTrading] Order placed successfully:",Qe),re(),b(1),_(ce())}catch(Qe){console.error("Error placing order:",Qe),alert(Qe instanceof Error?Qe.message:"Error placing order")}},pe=Ce=>{try{const Ee=n().find(ut=>ut.id===Ce);if(!Ee)throw new Error("Position not found");const Je=u();ee(`[PaperTrading] BEFORE closing position - Balance: $${Je.toFixed(2)}`),ee("[PaperTrading] Position to close:",Ee);const Qe=Pe(Ee.symbol);if(ee(`[PaperTrading] Current price for ${Ee.symbol}: $${Qe}`),!Qe||Qe<=0)throw new Error(`Cannot close position: No current price available for ${Ee.symbol}. Please try again when price data is available.`);let nt=0;Ee.side==="buy"?nt=(Qe-Ee.averagePrice)*Ee.quantity:nt=(Ee.averagePrice-Qe)*Ee.quantity,ee(`[PaperTrading] Expected P&L: $${nt.toFixed(2)}`),ee(`[PaperTrading] Expected new balance: $${(Je+nt).toFixed(2)}`),H.closePosition(Ce,Qe),re();const Ue=u(),ct=Ue-Je;ee(`[PaperTrading] AFTER closing position - Balance: $${Ue.toFixed(2)}`),ee(`[PaperTrading] Actual balance change: $${ct.toFixed(2)}`),ee(`[PaperTrading] Expected vs Actual: Expected $${nt.toFixed(2)}, Got $${ct.toFixed(2)}`)}catch(Ee){console.error("Error closing position:",Ee),alert(Ee instanceof Error?Ee.message:"Error closing position")}},Y=Ce=>{try{H.cancelOrder(Ce),re()}catch(Ee){console.error("Error canceling order:",Ee)}},U=()=>{try{H.addCash(D()),re(),$(1e3)}catch(Ce){console.error("Error adding cash:",Ce),alert(Ce instanceof Error?Ce.message:"Error adding cash")}},de=()=>{try{H.removeCash(D()),re(),$(1e3)}catch(Ce){console.error("Error removing cash:",Ce),alert(Ce instanceof Error?Ce.message:"Error removing cash")}},X=()=>{try{H.reset(),re(),ee("[PaperTrading] Account reset successfully")}catch(Ce){console.error("Error resetting account:",Ce),alert(Ce instanceof Error?Ce.message:"Error resetting account")}},fe=()=>H.getPendingOrdersInfo(),ue=Ce=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Ce),Fe=(Ce,Ee=2)=>Ce.toFixed(Ee),Te=Ce=>Ce>0?"#00C851":Ce<0?"#FF4444":"#666",Pe=Ce=>{P();const Ee=Z.getCurrentPrice(Ce);return Ee&&Ee>0?(ee(`[PaperTrading] Using API price for ${Ce}: $${Ee.toFixed(2)}`),Ee):Ce===e.symbol.symbol?(ee(`[PaperTrading] Using chart price for ${Ce}: $${e.currentPrice.toFixed(2)} (API price not available)`),e.currentPrice):(le(`[PaperTrading] No price available for ${Ce}`),0)};return(()=>{var Ce=yP(),Ee=Ce.firstChild,Je=Ee.firstChild,Qe=Je.nextSibling,nt=Qe.firstChild,Ue=Ee.nextSibling,ct=Ue.firstChild,ut=ct.firstChild,Qt=ut.nextSibling,Kt=Ue.nextSibling,Mt=Kt.firstChild,gt=Mt.nextSibling,jt=gt.firstChild,ln=jt.nextSibling;ln.nextSibling;var mn=gt.nextSibling,dr=mn.firstChild,Ft=dr.nextSibling;Ft.nextSibling;var Zt=mn.nextSibling,nr=Zt.firstChild,Gr=nr.nextSibling;Gr.nextSibling;var hr=Zt.nextSibling,Vr=Kt.nextSibling;return R(Je,()=>I("paper_trading",e.locale)),R(Qe,()=>I("balance",e.locale),nt),R(Qe,()=>ue(u()),null),R(ut,()=>e.symbol.symbol),R(Qt,()=>ue(ce())),Mt.$$click=()=>M("trade"),R(Mt,()=>I("trade",e.locale)),gt.$$click=()=>M("positions"),R(gt,()=>I("positions",e.locale),jt),R(gt,()=>n().length,ln),mn.$$click=()=>M("orders"),R(mn,()=>I("orders",e.locale),dr),R(mn,()=>t().length,Ft),Zt.$$click=()=>M("trades"),R(Zt,()=>I("trades",e.locale),nr),R(Zt,()=>o().length,Gr),hr.$$click=()=>M("cash"),R(hr,()=>I("cash",e.locale)),R(Vr,G($e,{get when(){return k()==="trade"},get children(){var Tt=cP(),We=Tt.firstChild,_t=We.firstChild,wt=_t.nextSibling,St=We.nextSibling,Ct=St.firstChild,Wt=Ct.nextSibling,Gt=St.nextSibling,yr=Gt.firstChild,pr=yr.nextSibling,cr=Gt.nextSibling,Jn=cr.firstChild,Ur=Jn.firstChild,Hr=Ur.firstChild,ei=Ur.nextSibling,Pt=cr.nextSibling,Pr=Pt.firstChild;return _t.$$click=()=>p(fn.MARKET),R(_t,()=>I("market",e.locale)),wt.$$click=()=>{p(fn.LIMIT),_(ce())},R(wt,()=>I("limit",e.locale)),Ct.$$click=()=>m("buy"),R(Ct,()=>I("buy",e.locale)),Wt.$$click=()=>m("sell"),R(Wt,()=>I("sell",e.locale)),R(yr,()=>I("quantity",e.locale)),pr.$$input=kt=>b(Number(kt.target.value)),R(Tt,G($e,{get when(){return h()===fn.LIMIT},get children(){var kt=lP(),Ar=kt.firstChild,wr=Ar.nextSibling;return R(Ar,()=>I("price",e.locale)),wr.$$input=fr=>_(Number(fr.target.value)),Ne(()=>wr.value=C()),kt}}),cr),R(Ur,()=>I("estimated_total",e.locale),Hr),R(ei,()=>ue((h()===fn.MARKET?ce():C())*x())),Pt.$$click=ve,R(Pt,(()=>{var kt=De(()=>f()==="buy");return()=>kt()?I("buy",e.locale):I("sell",e.locale)})(),Pr),R(Pt,()=>e.symbol.symbol,null),Ne(kt=>{var Ar=`order-type-btn ${h()===fn.MARKET?"active":""}`,wr=`order-type-btn ${h()===fn.LIMIT?"active":""}`,fr=`side-btn buy ${f()==="buy"?"active":""}`,tn=`side-btn sell ${f()==="sell"?"active":""}`,Yr=`place-order-btn ${f()}`,rn=!e.symbol.symbol||x()<=0;return Ar!==kt.e&&st(_t,kt.e=Ar),wr!==kt.t&&st(wt,kt.t=wr),fr!==kt.a&&st(Ct,kt.a=fr),tn!==kt.o&&st(Wt,kt.o=tn),Yr!==kt.i&&st(Pt,kt.i=Yr),rn!==kt.n&&(Pt.disabled=kt.n=rn),kt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Ne(()=>pr.value=x()),Tt}}),null),R(Vr,G($e,{get when(){return k()==="positions"},get children(){var Tt=uP();return R(Tt,G($e,{get when(){return n().length===0},get children(){var We=Km();return R(We,()=>I("no_open_positions",e.locale)),We}}),null),R(Tt,G(Vn,{get each(){return n()},children:We=>{const _t=()=>(P(),Pe(We.symbol));return(()=>{var wt=bP(),St=wt.firstChild,Ct=St.firstChild,Wt=Ct.nextSibling,Gt=St.nextSibling,yr=Gt.firstChild,pr=yr.firstChild,cr=pr.firstChild,Jn=pr.nextSibling,Ur=yr.nextSibling,Hr=Ur.firstChild,ei=Hr.firstChild,Pt=Hr.nextSibling,Pr=Ur.nextSibling,kt=Pr.firstChild,Ar=kt.firstChild,wr=kt.nextSibling,fr=Pr.nextSibling,tn=fr.firstChild,Yr=tn.firstChild,rn=tn.nextSibling,yn=Gt.nextSibling;return R(Ct,()=>We.symbol),R(Wt,()=>We.side.toUpperCase()),R(pr,()=>I("quantity",e.locale),cr),R(Jn,()=>We.quantity),R(Hr,()=>I("avg_price",e.locale),ei),R(Pt,()=>ue(We.averagePrice)),R(kt,()=>I("current_price",e.locale),Ar),R(wr,()=>ue(_t())),R(tn,()=>I("pnl",e.locale),Yr),R(rn,()=>ue(ae(We))),yn.$$click=()=>pe(We.id),R(yn,()=>I("close_position",e.locale)),Ne(Ln=>{var Hi=`side ${We.side}`,lo=Te(ae(We));return Hi!==Ln.e&&st(Wt,Ln.e=Hi),lo!==Ln.t&&((Ln.t=lo)!=null?rn.style.setProperty("color",lo):rn.style.removeProperty("color")),Ln},{e:void 0,t:void 0}),wt})()}}),null),Tt}}),null),R(Vr,G($e,{get when(){return k()==="orders"},get children(){var Tt=dP();return R(Tt,G($e,{get when(){return t().length===0},get children(){var We=Km();return R(We,()=>I("no_pending_orders",e.locale)),We}}),null),R(Tt,G(Vn,{get each(){return t()},children:We=>(()=>{var _t=xP(),wt=_t.firstChild,St=wt.firstChild,Ct=St.nextSibling,Wt=Ct.nextSibling,Gt=wt.nextSibling,yr=Gt.firstChild,pr=yr.firstChild,cr=pr.firstChild,Jn=pr.nextSibling,Ur=yr.nextSibling,Hr=Ur.firstChild,ei=Hr.firstChild,Pt=Hr.nextSibling,Pr=Ur.nextSibling,kt=Pr.firstChild,Ar=kt.firstChild,wr=kt.nextSibling,fr=Gt.nextSibling;return R(St,()=>We.symbol),R(Ct,()=>We.side.toUpperCase()),R(Wt,()=>We.type),R(pr,()=>I("quantity",e.locale),cr),R(Jn,()=>We.quantity),R(Hr,()=>I("price",e.locale),ei),R(Pt,()=>ue(We.price)),R(kt,()=>I("status",e.locale),Ar),R(wr,()=>We.status),fr.$$click=()=>Y(We.id),R(fr,()=>I("cancel_order",e.locale)),Ne(()=>st(Ct,`side ${We.side}`)),_t})()}),null),Tt}}),null),R(Vr,G($e,{get when(){return k()==="trades"},get children(){var Tt=gP();return R(Tt,G($e,{get when(){return o().length===0},get children(){var We=hP(),_t=We.firstChild,wt=_t.nextSibling,St=wt.nextSibling;return R(wt,()=>I("no_trades_executed",e.locale)),R(St,()=>I("your_trade_history_will_appear_here",e.locale)),We}}),null),R(Tt,G($e,{get when(){return o().length>0},get children(){return[(()=>{var We=pP(),_t=We.firstChild;return _t.firstChild,_t.$$click=()=>{const wt=I("are_you_sure_clear_trades",e.locale).replace("{count}",o().length.toString());confirm(wt)&&(H.clearAllTrades(),re())},R(_t,()=>I("clear_all_trades",e.locale),null),We})(),(()=>{var We=fP(),_t=We.firstChild,wt=_t.nextSibling,St=wt.firstChild,Ct=St.nextSibling,Wt=Ct.nextSibling,Gt=wt.nextSibling;return R(_t,()=>I("symbol_side",e.locale)),R(St,()=>I("qty",e.locale)),R(Ct,()=>I("price",e.locale)),R(Wt,()=>I("total",e.locale)),R(Gt,()=>I("date_time",e.locale)),We})()]}}),null),R(Tt,G(Vn,{get each(){return o().sort((We,_t)=>_t.timestamp-We.timestamp)},children:We=>(()=>{var _t=wP(),wt=_t.firstChild,St=wt.firstChild,Ct=St.firstChild,Wt=Ct.nextSibling,Gt=Wt.firstChild,yr=St.nextSibling,pr=yr.firstChild,cr=pr.nextSibling,Jn=cr.nextSibling,Ur=yr.nextSibling,Hr=Ur.firstChild;return R(Ct,()=>We.symbol),R(Wt,()=>We.side==="buy"?"":"",Gt),R(Wt,()=>We.side.toUpperCase(),null),R(pr,()=>Fe(We.quantity,We.quantity<1?4:0)),R(cr,()=>ue(We.price)),R(Jn,()=>ue(We.price*We.quantity)),R(Ur,()=>new Date(We.timestamp).toLocaleDateString([],{month:"short",day:"numeric"}),Hr),R(Ur,()=>new Date(We.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),null),Ne(()=>st(Wt,`side-badge ${We.side}`)),_t})()}),null),Tt}}),null),R(Vr,G($e,{get when(){return k()==="cash"},get children(){var Tt=mP(),We=Tt.firstChild,_t=We.firstChild,wt=_t.firstChild,St=wt.nextSibling,Ct=_t.nextSibling,Wt=Ct.firstChild,Gt=Wt.nextSibling,yr=Gt.firstChild,pr=yr.nextSibling,cr=Ct.nextSibling,Jn=cr.firstChild,Ur=cr.nextSibling,Hr=We.nextSibling,ei=Hr.firstChild;return R(wt,()=>I("cash_amount",e.locale)),St.$$input=Pt=>$(Number(Pt.target.value)),R(Wt,()=>I("operation",e.locale)),Gt.addEventListener("change",Pt=>B(Pt.target.value)),R(yr,()=>I("add_cash",e.locale)),R(pr,()=>I("remove_cash",e.locale)),R(We,G($e,{get when(){return z()==="remove"},get children(){var Pt=vP();return R(Pt,()=>{const Pr=fe();if(Pr.totalBuyOrdersValue>0){const kt=u()-D(),Ar=kt<Pr.totalBuyOrdersValue;return(()=>{var wr=CP(),fr=wr.firstChild,tn=fr.firstChild,Yr=fr.nextSibling,rn=Yr.firstChild,yn=Yr.nextSibling,Ln=yn.firstChild;return st(wr,`warning ${Ar?"error":"info"}`),R(fr,()=>I("pending_buy_orders",e.locale),tn),R(fr,()=>ue(Pr.totalBuyOrdersValue),null),R(Yr,()=>I("balance_after_removal",e.locale),rn),R(Yr,()=>ue(kt),null),R(yn,()=>I("max_safe_removal",e.locale),Ln),R(yn,()=>ue(Pr.maxCashRemoval),null),R(wr,Ar&&(()=>{var Hi=_P();return R(Hi,()=>I("insufficient_funds_warning",e.locale)),Hi})(),null),wr})()}return null}),Pt}}),cr),Wi(cr,"click",z()==="add"?U:de),R(cr,(()=>{var Pt=De(()=>z()==="add");return()=>Pt()?I("add",e.locale):I("remove",e.locale)})(),Jn),R(cr,()=>ue(D()),null),Ur.$$click=()=>{const Pt=I("reset_account_confirmation",e.locale).replace("{orders}",t().length.toString()).replace("{positions}",n().length.toString()).replace("{trades}",o().length.toString());confirm(Pt)&&(X(),alert(I("reset_account_success",e.locale)))},R(Ur,()=>I("reset_trading_account",e.locale)),R(ei,()=>I("pending_orders_summary",e.locale)),R(Hr,()=>{const Pt=fe();return(()=>{var Pr=SP(),kt=Pr.firstChild,Ar=kt.firstChild,wr=Ar.firstChild,fr=Ar.nextSibling,tn=fr.firstChild,Yr=tn.nextSibling;Yr.nextSibling;var rn=kt.nextSibling,yn=rn.firstChild,Ln=yn.firstChild,Hi=yn.nextSibling,lo=rn.nextSibling,Xa=lo.firstChild,fi=Xa.firstChild,ca=Xa.nextSibling,Bs=lo.nextSibling,ua=Bs.firstChild,ja=ua.firstChild,Za=ua.nextSibling;return R(Ar,()=>I("pending_buy_orders_summary",e.locale),wr),R(fr,()=>Pt.pendingBuyOrders.length,tn),R(fr,()=>ue(Pt.totalBuyOrdersValue),Yr),R(yn,()=>I("pending_sell_orders_summary",e.locale),Ln),R(Hi,()=>Pt.pendingSellOrders.length),R(Xa,()=>I("available_cash",e.locale),fi),R(ca,()=>ue(Pt.availableCashAfterOrders)),R(ua,()=>I("max_cash_removal",e.locale),ja),R(Za,()=>ue(Pt.maxCashRemoval)),Pr})()},null),Ne(Pt=>{var Pr=`cash-operation-btn ${z()}`,kt=D()<=0;return Pr!==Pt.e&&st(cr,Pt.e=Pr),kt!==Pt.t&&(cr.disabled=Pt.t=kt),Pt},{e:void 0,t:void 0}),Ne(()=>St.value=D()),Ne(()=>Gt.value=z()),Tt}}),null),Ne(Tt=>{var We=`tab ${k()==="trade"?"active":""}`,_t=`tab ${k()==="positions"?"active":""}`,wt=`tab ${k()==="orders"?"active":""}`,St=`tab ${k()==="trades"?"active":""}`,Ct=`tab ${k()==="cash"?"active":""}`;return We!==Tt.e&&st(Mt,Tt.e=We),_t!==Tt.t&&st(gt,Tt.t=_t),wt!==Tt.a&&st(mn,Tt.a=wt),St!==Tt.o&&st(Zt,Tt.o=St),Ct!==Tt.i&&st(hr,Tt.i=Ct),Tt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),Ce})()};Xt(["click","input"]);class MP{constructor(t,r,n){xe(this,"currentSubscription",null),xe(this,"uuid"),xe(this,"setOrderBookData"),xe(this,"setIsLoading"),xe(this,"setError"),this.uuid=Math.random().toString(36).slice(2,11),this.setOrderBookData=t,this.setIsLoading=r,this.setError=n}subscribeToSymbol(t){const r={symbol:t.symbol,exchange:t.exchange,name:t.name,shortName:t.shortName,market:t.market,type:t.type};(!this.currentSubscription||this.currentSubscription.symbol!==r.symbol||this.currentSubscription.exchange!==r.exchange)&&(this.currentSubscription&&this.unsubscribeFromSymbol(this.currentSubscription),this.performSubscription(t),this.currentSubscription=r)}unsubscribeFromCurrent(){this.currentSubscription&&(this.unsubscribeFromSymbol(this.currentSubscription),this.currentSubscription=null)}performSubscription(t){this.setIsLoading(!0),this.setError(null);const r=$r.getInstance().getDataFeed();if(r){const n=i=>{this.setOrderBookData(i),this.setIsLoading(!1)};r.subscribeOrderBookData(t,n,this.uuid)}else this.setError("Data feed not available for this symbol type"),this.setIsLoading(!1)}unsubscribeFromSymbol(t){const r=$r.getInstance().getDataFeed();r&&r.unsubscribeOrderBookData(t,this.uuid)}getCurrentSubscription(){return this.currentSubscription}}const TP=()=>{const[e,t]=ye(null),[r,n]=ye(!1),[i,o]=ye(null),s=new MP(t,n,o);return Br(()=>{s.unsubscribeFromCurrent()}),{orderBookData:e,isLoading:r,error:i,state:()=>({isLoading:r(),error:i()}),subscribeToSymbol:u=>s.subscribeToSymbol(u),unsubscribeFromCurrent:()=>s.unsubscribeFromCurrent(),getCurrentSubscription:()=>s.getCurrentSubscription()}},cp=e=>{const t=parseFloat(e);return t>=1e3?t.toFixed(2).replace(/\.?0+$/,""):t>=100?t.toFixed(3).replace(/\.?0+$/,""):t>=1?t.toFixed(4).replace(/\.?0+$/,""):t>=.1?t.toFixed(5).replace(/\.?0+$/,""):t>=.01?t.toFixed(6).replace(/\.?0+$/,""):t.toFixed(8).replace(/\.?0+$/,"")},mg=e=>{const t=parseFloat(e);return t>=1e3?t.toFixed(2).replace(/\.?0+$/,""):t>=100?t.toFixed(3).replace(/\.?0+$/,""):t>=1?t.toFixed(4).replace(/\.?0+$/,""):t.toFixed(6).replace(/\.?0+$/,"")},yg=(e,t)=>{const r=parseFloat(e)*parseFloat(t);return r>=1e3?r.toFixed(2).replace(/\.?0+$/,""):r>=100?r.toFixed(3).replace(/\.?0+$/,""):r>=1?r.toFixed(4).replace(/\.?0+$/,""):r.toFixed(6).replace(/\.?0+$/,"")},EP=(e,t)=>{const r=[...e.map(([n,i])=>parseFloat(i)),...t.map(([n,i])=>parseFloat(i))];return Math.max(...r,0)},Jm=(e,t)=>{if(t===0)return"0%";const r=parseFloat(e)/t*100;return`${Math.min(r,100)}%`},z0=(e,t)=>{const r=[...e].sort((i,o)=>{const s=parseFloat(i[0]),u=parseFloat(o[0]);return t==="bids"?u-s:s-u});let n=0;return r.map(([i,o])=>(n+=parseFloat(o),[i,o,n]))},IP=(e,t)=>{const r=e.length>0?Math.max(...e.map(([i,o,s])=>s)):0,n=t.length>0?Math.max(...t.map(([i,o,s])=>s)):0;return Math.max(r,n,0)},LP=(e,t)=>parseFloat(t)-parseFloat(e),PP=(e,t)=>t<=0?e:Math.floor(e/t)*t,ey=(e,t,r)=>{if(t===.01)return e;const n=new Map;return t===100&&(console.log(`=== Aggregating ${r} with tick size ${t} ===`),console.log("First 5 original orders:",e.slice(0,5))),e.forEach(([i,o])=>{const s=parseFloat(i),u=parseFloat(o),d=PP(s,t).toString();if(n.has(d)){const h=n.get(d);n.set(d,{quantity:h.quantity+u,orderCount:h.orderCount+1})}else n.set(d,{quantity:u,orderCount:1})}),Array.from(n.entries()).map(([i,o])=>[i,o.quantity.toString()]).sort((i,o)=>{const s=parseFloat(i[0]),u=parseFloat(o[0]);return r==="bids"?u-s:s-u})},ty=e=>e>=1?e.toString():e.toFixed(2);var AP=q("<div class=orderbook-ticker>"),DP=q("<div class=orderbook-header><h3>");const FP=e=>(()=>{var t=DP(),r=t.firstChild;return R(r,()=>I("order_book",e.locale)),R(t,G($e,{get when(){return e.currentSymbol},get children(){var n=AP();return R(n,()=>{var i;return(i=e.currentSymbol())==null?void 0:i.symbol}),n}}),null),t})();var RP=q("<div><div class=orderbook-quantity-bar></div><span class=orderbook-quantity></span><span></span><span class=orderbook-amount>");const Wg=e=>{const t=()=>e.depthVisualization==="cumulative"&&e.cumulativeQuantity!==void 0?Jm(e.cumulativeQuantity.toString(),e.maxQuantity):Jm(e.quantity,e.maxQuantity);return(()=>{var r=RP(),n=r.firstChild,i=n.nextSibling,o=i.nextSibling,s=o.nextSibling;return R(i,()=>e.formatQuantity(e.quantity)),R(o,()=>e.formatPrice(e.price)),R(s,()=>e.calculateAmount(e.price,e.quantity)),Ne(u=>{var d=`orderbook-order orderbook-${e.type} ${e.isSplitViewBid?"split-view-bid":""}`,h=t(),p=`orderbook-price ${e.type}-price`;return d!==u.e&&st(r,u.e=d),h!==u.t&&((u.t=h)!=null?n.style.setProperty("width",h):n.style.removeProperty("width")),p!==u.a&&st(o,u.a=p),u},{e:void 0,t:void 0,a:void 0}),r})()};var OP=q("<div><div class=orderbook-orders>");const ry=e=>{const t=Yt(()=>{const r=e.orderBookMaxRows,n=e.orders.slice(0,r);return e.depthVisualization==="cumulative"?z0(n,e.type):n.sort((i,o)=>parseFloat(o[0])-parseFloat(i[0])).map(([i,o])=>[i,o,0])});return(()=>{var r=OP(),n=r.firstChild;return R(n,G(Vn,{get each(){return t()},children:([i,o,s])=>G(Wg,{price:i,quantity:o,get type(){return e.type==="bids"?"bid":"ask"},get maxQuantity(){return e.maxQuantity},cumulativeQuantity:s,get depthVisualization(){return e.depthVisualization},get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get calculateAmount(){return e.calculateAmount}})})),Ne(()=>st(r,`orderbook-${e.type}`)),r})()};var NP=q("<div class=spread-info><span class=spread-value>"),zP=q("<div class=orderbook-spread>");const $P=e=>(()=>{var t=zP();return R(t,G($e,{get when(){return e.bestBid&&e.bestAsk},get children(){var r=NP(),n=r.firstChild;return R(n,()=>e.formatPrice(LP(e.bestBid,e.bestAsk).toString())),r}})),t})();var BP=q("<div class=spread-selector-dropdown>"),VP=q("<div class=spread-selector><div class=spread-selector-button><span class=spread-selector-value></span><span class=spread-selector-arrow>"),WP=q("<div>");const UP=e=>{const[t,r]=ye(!1),[n,i]=ye({top:0,left:0});let o;const s=[.01,.1,1,10,100],u=p=>{e.onTickSizeChange(p),r(!1)},d=()=>{if(o){const p=o.getBoundingClientRect();i({top:p.bottom+2,left:p.left})}},h=()=>{t()||d(),r(!t())};return rt(()=>{if(t()){const p=()=>d(),f=m=>{o&&!o.contains(m.target)&&r(!1)};window.addEventListener("scroll",p,!0),window.addEventListener("resize",p),document.addEventListener("click",f),Br(()=>{window.removeEventListener("scroll",p,!0),window.removeEventListener("resize",p),document.removeEventListener("click",f)})}}),(()=>{var p=VP(),f=p.firstChild,m=f.firstChild,x=m.nextSibling;f.$$click=h;var b=o;return typeof b=="function"?Tn(b,f):o=f,R(m,()=>ty(e.selectedTickSize())),R(x,()=>t()?"":""),R(p,G($e,{get when(){return t()},get children(){var C=BP();return R(C,G(Vn,{each:s,children:_=>(()=>{var k=WP();return k.$$click=()=>u(_),R(k,()=>ty(_)),Ne(()=>st(k,`spread-selector-option ${_===e.selectedTickSize()?"selected":""}`)),k})()})),Ne(_=>{var k=`${n().top}px`,M=`${n().left}px`;return k!==_.e&&((_.e=k)!=null?C.style.setProperty("top",k):C.style.removeProperty("top")),M!==_.t&&((_.t=M)!=null?C.style.setProperty("left",M):C.style.removeProperty("left")),_},{e:void 0,t:void 0}),C}}),null),p})()};Xt(["click"]);var HP=q('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=2 y=2 width=12 height=2 fill=#FF4444></rect><rect x=2 y=5 width=12 height=2 fill=#FF4444></rect><rect x=2 y=8 width=12 height=2 fill=#00C851></rect><rect x=2 y=11 width=12 height=2 fill=#00C851>'),YP=q('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=2 y=2 width=12 height=2 fill=#FF4444></rect><rect x=2 y=5 width=12 height=2 fill=#FF4444></rect><rect x=2 y=8 width=12 height=2 fill=#FF4444></rect><rect x=2 y=11 width=12 height=2 fill=#FF4444>'),XP=q('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=2 y=2 width=12 height=2 fill=#00C851></rect><rect x=2 y=5 width=12 height=2 fill=#00C851></rect><rect x=2 y=8 width=12 height=2 fill=#00C851></rect><rect x=2 y=11 width=12 height=2 fill=#00C851>'),jP=q('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=1 y=2 width=7.5 height=2 fill=#00C851></rect><rect x=1 y=5 width=7.5 height=2 fill=#00C851></rect><rect x=1 y=8 width=7.5 height=2 fill=#00C851></rect><rect x=1 y=11 width=7.5 height=2 fill=#00C851></rect><rect x=9.5 y=2 width=7.5 height=2 fill=#FF4444></rect><rect x=9.5 y=5 width=7.5 height=2 fill=#FF4444></rect><rect x=9.5 y=8 width=7.5 height=2 fill=#FF4444></rect><rect x=9.5 y=11 width=7.5 height=2 fill=#FF4444>'),ZP=q('<div class=view-selector><div title="Combined View"></div><div title="Asks Only"></div><div title="Bids Only"></div><div title="Split View">');const GP=e=>{const t=n=>{e.onViewChange(n)},r=n=>{switch(n){case"combined":return HP();case"asks-only":return YP();case"bids-only":return XP();case"split-view":return jP()}};return(()=>{var n=ZP(),i=n.firstChild,o=i.nextSibling,s=o.nextSibling,u=s.nextSibling;return i.$$click=()=>t("combined"),R(i,()=>r("combined")),o.$$click=()=>t("asks-only"),R(o,()=>r("asks-only")),s.$$click=()=>t("bids-only"),R(s,()=>r("bids-only")),u.$$click=()=>t("split-view"),R(u,()=>r("split-view")),Ne(d=>{var h=`view-selector-option ${e.selectedView()==="combined"?"active":""}`,p=`view-selector-option ${e.selectedView()==="asks-only"?"active":""}`,f=`view-selector-option ${e.selectedView()==="bids-only"?"active":""}`,m=`view-selector-option ${e.selectedView()==="split-view"?"active":""}`;return h!==d.e&&st(i,d.e=h),p!==d.t&&st(o,d.t=p),f!==d.a&&st(s,d.a=f),m!==d.o&&st(u,d.o=m),d},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()};Xt(["click"]);var qP=q("<div class=depth-viz-dropdown>"),QP=q('<div class=depth-visualization-selector><button class=depth-viz-dropdown-trigger type=button><span class=depth-viz-selected></span><svg width=12 height=12 viewBox="0 0 12 12"fill=none><path d="M3 4.5L6 7.5L9 4.5"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>'),KP=q("<div><div class=depth-viz-option-label></div><div class=depth-viz-option-description>");const JP=e=>{const[t,r]=ye(!1),[n,i]=ye({top:0,left:0});let o;const s=f=>{e.onDepthVisualizationChange(f),r(!1)},u=()=>{if(o){const f=o.getBoundingClientRect();i({top:f.bottom+4,left:f.left})}},d=()=>{t()||u(),r(!t())};rt(()=>{if(t()){const f=()=>u(),m=x=>{o&&!o.contains(x.target)&&r(!1)};window.addEventListener("scroll",f,!0),window.addEventListener("resize",f),document.addEventListener("click",m),Br(()=>{window.removeEventListener("scroll",f,!0),window.removeEventListener("resize",f),document.removeEventListener("click",m)})}});const h=f=>{switch(f){case"amount":return I("order_book_amount_mode",e.locale);case"cumulative":return I("order_book_cumulative_mode",e.locale)}},p=[{value:"amount",label:I("order_book_amount_mode",e.locale),description:I("order_book_amount_description",e.locale)},{value:"cumulative",label:I("order_book_cumulative_mode",e.locale),description:I("order_book_cumulative_description",e.locale)}];return(()=>{var f=QP(),m=f.firstChild,x=m.firstChild,b=x.nextSibling;m.$$click=d;var C=o;return typeof C=="function"?Tn(C,m):o=m,R(x,()=>h(e.selectedDepthVisualization())),R(f,G($e,{get when(){return t()},get children(){var _=qP();return R(_,()=>p.map(k=>(()=>{var M=KP(),L=M.firstChild,A=L.nextSibling;return M.$$click=()=>s(k.value),R(L,()=>k.label),R(A,()=>k.description),Ne(()=>st(M,`depth-viz-option ${e.selectedDepthVisualization()===k.value?"selected":""}`)),M})())),Ne(k=>{var M=`${n().top}px`,L=`${n().left}px`;return M!==k.e&&((k.e=M)!=null?_.style.setProperty("top",M):_.style.removeProperty("top")),L!==k.t&&((k.t=L)!=null?_.style.setProperty("left",L):_.style.removeProperty("left")),k},{e:void 0,t:void 0}),_}}),null),Ne(()=>Ve(b,"class",`depth-viz-arrow ${t()?"open":""}`)),f})()};Xt(["click"]);var eA=q('<div class=split-view-layout><div class="split-view-side split-view-bids"><div class=split-view-header><span class=split-view-title></span><div class=split-view-column-headers><span class=split-view-size-header></span><span class=split-view-price-header></span><span class=split-view-amount-header></span></div></div><div class=split-view-orders></div></div><div class=split-view-divider></div><div class="split-view-side split-view-asks"><div class=split-view-header><span class=split-view-title></span><div class=split-view-column-headers><span class=split-view-size-header></span><span class=split-view-price-header></span><span class=split-view-amount-header></span></div></div><div class=split-view-orders>');const tA=e=>{const t=Yt(()=>{const n=e.bidsOrders.slice(0,e.orderBookMaxRows);return e.depthVisualization==="cumulative"?z0(n,"bids"):n.sort((i,o)=>parseFloat(o[0])-parseFloat(i[0])).map(([i,o])=>[i,o,0])}),r=Yt(()=>{const n=e.asksOrders.slice(0,e.orderBookMaxRows);return e.depthVisualization==="cumulative"?z0(n,"asks"):n.sort((i,o)=>parseFloat(i[0])-parseFloat(o[0])).map(([i,o])=>[i,o,0])});return(()=>{var n=eA(),i=n.firstChild,o=i.firstChild,s=o.firstChild,u=s.nextSibling,d=u.firstChild,h=d.nextSibling,p=h.nextSibling,f=o.nextSibling,m=i.nextSibling,x=m.nextSibling,b=x.firstChild,C=b.firstChild,_=C.nextSibling,k=_.firstChild,M=k.nextSibling,L=M.nextSibling,A=b.nextSibling;return R(s,()=>I("order_book_bids",e.locale)),R(d,()=>I("order_book_size",e.locale)),R(h,()=>I("order_book_price",e.locale)),R(p,()=>I("order_book_amount",e.locale)),R(f,G(Vn,{get each(){return t()},children:([P,W,D])=>G(Wg,{price:P,quantity:W,type:"bid",get maxQuantity(){return e.maxQuantity},cumulativeQuantity:D,get depthVisualization(){return e.depthVisualization},get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get calculateAmount(){return e.calculateAmount},isSplitViewBid:!0})})),R(C,()=>I("order_book_asks",e.locale)),R(k,()=>I("order_book_size",e.locale)),R(M,()=>I("order_book_price",e.locale)),R(L,()=>I("order_book_amount",e.locale)),R(A,G(Vn,{get each(){return r()},children:([P,W,D])=>G(Wg,{price:P,quantity:W,type:"ask",get maxQuantity(){return e.maxQuantity},cumulativeQuantity:D,get depthVisualization(){return e.depthVisualization},get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get calculateAmount(){return e.calculateAmount}})})),n})()};var rA=q("<div class=orderbook-empty><p>"),nA=q("<div class=orderbook-loading><p>"),iA=q("<div class=orderbook-error><p>"),oA=q("<div class=orderbook-section-header><span class=orderbook-size-header></span><span class=orderbook-price-header></span><span class=orderbook-amount-header>");const aA=e=>(()=>{var t=rA(),r=t.firstChild;return R(r,()=>I("order_book_select_symbol",e.locale)),t})(),sA=e=>(()=>{var t=nA(),r=t.firstChild;return R(r,()=>I("order_book_loading",e.locale)),t})(),lA=e=>(()=>{var t=iA(),r=t.firstChild;return R(r,()=>e.error),t})(),cA=e=>(()=>{var t=oA(),r=t.firstChild,n=r.nextSibling,i=n.nextSibling;return R(r,()=>I("order_book_size",e.locale)),R(n,()=>I("order_book_price",e.locale)),R(i,()=>I("order_book_amount",e.locale)),t})();var uA=q("<div class=orderbook-controls><div class=orderbook-controls-left></div><div class=orderbook-controls-right>"),dA=q("<div class=orderbook-orderbook>"),hA=q("<div class=chartspire-ui-orderbook>");const pA=e=>{const{orderBookData:t,isLoading:r,error:n,subscribeToSymbol:i}=TP(),[o,s]=ye(.01),[u,d]=ye("combined"),[h,p]=ye(e.orderBookDepthVisualization||"amount"),f=()=>{const C=h();return C!="amount"&&C!="cumulative"?(console.error("Invalid order book depth visualization mode: ",C," defaulting to amount"),"amount"):C};rt(()=>{const C=e.currentSymbol();C&&i(C)});const m=Yt(()=>{const C=t();if(!C)return null;const _=o();return{bids:ey(C.bids,_,"bids"),asks:ey(C.asks,_,"asks")}}),x=Yt(()=>{const C=m();if(!C)return 0;if(f()==="cumulative"){const _=z0(C.bids,"bids"),k=z0(C.asks,"asks");return IP(_,k)}else return EP(C.bids,C.asks)}),b=Yt(()=>{var C,_;const k=m();return!k||!k.bids.length||!k.asks.length?{bestBid:void 0,bestAsk:void 0}:{bestBid:(C=k.bids[0])==null?void 0:C[0],bestAsk:(_=k.asks[0])==null?void 0:_[0]}});return(()=>{var C=hA();return R(C,G(FP,{get currentSymbol(){return e.currentSymbol},get locale(){return e.locale}}),null),R(C,G($e,{get when(){return e.currentSymbol()},get children(){return[(()=>{var _=uA(),k=_.firstChild,M=k.nextSibling;return R(k,G(GP,{selectedView:u,onViewChange:d})),R(M,G(UP,{selectedTickSize:o,onTickSizeChange:s}),null),R(M,G(JP,{selectedDepthVisualization:h,onDepthVisualizationChange:p,get locale(){return e.locale}}),null),_})(),G(cA,{get locale(){return e.locale}})]}}),null),R(C,G($e,{get when(){return!e.currentSymbol},get children(){return G(aA,{get locale(){return e.locale}})}}),null),R(C,G($e,{get when(){return r()},get children(){return G(sA,{get locale(){return e.locale}})}}),null),R(C,G($e,{get when(){return n()},get children(){return G(lA,{get error(){return n()}})}}),null),R(C,G($e,{get when(){return!r()&&!n()&&m()&&e.currentSymbol},get children(){var _=dA();return R(_,G($e,{get when(){return u()==="combined"||u()==="asks-only"||u()==="bids-only"},get children(){return[G($e,{get when(){return u()==="combined"||u()==="asks-only"},get children(){return G(ry,{get orders(){var k;return((k=m())==null?void 0:k.asks)||[]},type:"asks",get maxQuantity(){return x()},get orderBookMaxRows(){return e.orderBookMaxRows},get depthVisualization(){return f()},formatPrice:cp,formatQuantity:mg,calculateAmount:yg})}}),G($e,{get when(){return u()==="combined"},get children(){return G($P,{get bestBid(){return b().bestBid},get bestAsk(){return b().bestAsk},formatPrice:cp})}}),G($e,{get when(){return u()==="combined"||u()==="bids-only"},get children(){return G(ry,{get orders(){var k;return((k=m())==null?void 0:k.bids)||[]},type:"bids",get maxQuantity(){return x()},get orderBookMaxRows(){return e.orderBookMaxRows},get depthVisualization(){return f()},formatPrice:cp,formatQuantity:mg,calculateAmount:yg})}})]}}),null),R(_,G($e,{get when(){return u()==="split-view"},get children(){return G(tA,{get bidsOrders(){var k;return((k=m())==null?void 0:k.bids)||[]},get asksOrders(){var k;return((k=m())==null?void 0:k.asks)||[]},get maxQuantity(){return x()},get orderBookMaxRows(){return e.orderBookMaxRows},get depthVisualization(){return f()},formatPrice:cp,formatQuantity:mg,calculateAmount:yg,get locale(){return e.locale}})}}),null),_}}),null),C})()};class fA{constructor(t,r,n,i){xe(this,"currentSubscription",null),xe(this,"uuid"),xe(this,"setTradeData"),xe(this,"setIsLoading"),xe(this,"setError"),xe(this,"getTradeData"),xe(this,"maxTrades",100),this.uuid=Math.random().toString(36).slice(2,11),this.setTradeData=t,this.setIsLoading=r,this.setError=n,this.getTradeData=i}subscribeToSymbol(t){const r={symbol:t.symbol,exchange:t.exchange,name:t.name,shortName:t.shortName,market:t.market,type:t.type};(!this.currentSubscription||this.currentSubscription.symbol!==r.symbol||this.currentSubscription.exchange!==r.exchange)&&(this.currentSubscription&&this.unsubscribeFromSymbol(this.currentSubscription),this.setTradeData(null),this.performSubscription(t),this.currentSubscription=r)}unsubscribeFromCurrent(){this.currentSubscription&&(this.unsubscribeFromSymbol(this.currentSubscription),this.currentSubscription=null)}performSubscription(t){var r;this.setIsLoading(!0),this.setError(null);const n=$r.getInstance().getDataFeed();if(n){const i=o=>{const s=this.getTradeData();if(s&&s.symbol===o.symbol){const u={trades:[...s.trades,...o.trades].sort((d,h)=>h.timestamp-d.timestamp).slice(0,this.maxTrades),symbol:o.symbol,exchange:o.exchange,lastUpdated:o.lastUpdated};this.setTradeData(u)}else this.setTradeData(o);this.setIsLoading(!1)};(r=n.subscribeTradeData)==null||r.call(n,t,i,this.uuid)}else this.setError("Data feed not available for this symbol type"),this.setIsLoading(!1)}unsubscribeFromSymbol(t){var r;const n=$r.getInstance().getDataFeed();n&&((r=n.unsubscribeTradeData)==null||r.call(n,t,this.uuid))}getCurrentSubscription(){return this.currentSubscription}}const gA=()=>{const[e,t]=ye(null),[r,n]=ye(!1),[i,o]=ye(null),s=new fA(t,n,o,e);return Br(()=>{s.unsubscribeFromCurrent()}),{tradeData:e,isLoading:r,error:i,state:()=>({isLoading:r(),error:i()}),subscribeToSymbol:u=>s.subscribeToSymbol(u),unsubscribeFromCurrent:()=>s.unsubscribeFromCurrent(),getCurrentSubscription:()=>s.getCurrentSubscription()}},vA=(e,t="24h")=>{const r=new Date(e);return t==="12h"?r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},mA=(e,t=2)=>{const r=parseFloat(e);return isNaN(r)?e:r.toFixed(t)},yA=(e,t=4)=>{const r=parseFloat(e);return isNaN(r)?e:r<.001?r.toFixed(8):r<1?r.toFixed(6):r.toFixed(t)},bA=e=>e==="buy"?"trade-buy":"trade-sell";var xA=q("<div class=trades-ticker>"),wA=q("<div class=trades-header><h3>");const CA=e=>(()=>{var t=wA(),r=t.firstChild;return R(r,()=>I("trades",e.locale)),R(t,G($e,{get when(){return e.currentSymbol},get children(){var n=xA();return R(n,()=>{var i;return(i=e.currentSymbol())==null?void 0:i.symbol}),n}}),null),t})();var _A=q("<div><div class=trade-amount-bar></div><div class=trade-time></div><div class=trade-price></div><div class=trade-quantity>");const SA=e=>{const t=()=>e.trade,r=()=>parseFloat(t().price)*parseFloat(t().quantity),n=()=>{const i=r();return`${Math.min(i/1e4*100,100)}%`};return(()=>{var i=_A(),o=i.firstChild,s=o.nextSibling,u=s.nextSibling,d=u.nextSibling;return R(s,()=>e.formatTime(t().timestamp)),R(u,()=>e.formatPrice(t().price)),R(d,()=>e.formatQuantity(t().quantity)),Ne(h=>{var p=`trade-row ${bA(t().side)}`,f=n();return p!==h.e&&st(i,h.e=p),f!==h.t&&((h.t=f)!=null?o.style.setProperty("width",f):o.style.removeProperty("width")),h},{e:void 0,t:void 0}),i})()};var kA=q("<div class=trades-list><div class=trades-list-header><div class=header-time></div><div class=header-price></div><div class=header-quantity></div></div><div class=trades-list-body>");const MA=e=>{const t=()=>[...e.trades||[]].sort((r,n)=>n.timestamp-r.timestamp).slice(0,e.maxRows);return(()=>{var r=kA(),n=r.firstChild,i=n.firstChild,o=i.nextSibling,s=o.nextSibling,u=n.nextSibling;return R(i,()=>I("trade_time",e.locale)),R(o,()=>I("trade_price",e.locale)),R(s,()=>I("trade_quantity",e.locale)),R(u,G(Vn,{get each(){return t()},children:d=>G(SA,{trade:d,get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get formatTime(){return e.formatTime},get timeFormat(){return e.timeFormat}})})),r})()};var TA=q("<div class=time-format-selector><div class=format-toggle><button>24h</button><button>12h");const EA=e=>{const t=r=>{e.onTimeFormatChange(r)};return(()=>{var r=TA(),n=r.firstChild,i=n.firstChild,o=i.nextSibling;return i.$$click=()=>t("24h"),o.$$click=()=>t("12h"),Ne(s=>{var u=`format-option ${e.selectedTimeFormat()==="24h"?"active":""}`,d=I("time_format_24h",e.locale),h=`format-option ${e.selectedTimeFormat()==="12h"?"active":""}`,p=I("time_format_12h",e.locale);return u!==s.e&&st(i,s.e=u),d!==s.t&&Ve(i,"title",s.t=d),h!==s.a&&st(o,s.a=h),p!==s.o&&Ve(o,"title",s.o=p),s},{e:void 0,t:void 0,a:void 0,o:void 0}),r})()};Xt(["click"]);var IA=q('<div class="trades-state-view empty-state"><div class=state-content><div class=state-icon></div><div class=state-message>'),LA=q('<div class="trades-state-view loading-state"><div class=state-content><div class=loading-spinner></div><div class=state-message>'),PA=q('<div class="trades-state-view error-state"><div class=state-content><div class=state-icon></div><div class=state-message></div><div class=state-detail>');const AA=e=>(()=>{var t=IA(),r=t.firstChild,n=r.firstChild,i=n.nextSibling;return R(i,()=>I("no_trades_available",e.locale||"en-US")),t})(),DA=e=>(()=>{var t=LA(),r=t.firstChild,n=r.firstChild,i=n.nextSibling;return R(i,()=>I("loading_trades",e.locale||"en-US")),t})(),FA=e=>(()=>{var t=PA(),r=t.firstChild,n=r.firstChild,i=n.nextSibling,o=i.nextSibling;return R(i,()=>I("trades_error",e.locale||"en-US")),R(o,()=>e.error),t})();var RA=q("<div class=trades-controls><div class=trades-controls-right>"),OA=q("<div class=chartspire-ui-trades>");const NA=e=>{const{tradeData:t,isLoading:r,error:n,subscribeToSymbol:i}=gA(),[o,s]=ye(e.timeFormat||"24h");rt(()=>{const p=e.currentSymbol();p&&i(p)});const u=Yt(()=>{const p=e.currentSymbol(),f=(p==null?void 0:p.pricePrecision)??2;return m=>mA(m,f)}),d=Yt(()=>{const p=e.currentSymbol(),f=(p==null?void 0:p.volumePrecision)??4;return m=>yA(m,f)}),h=Yt(()=>{const p=o();return f=>vA(f,p)});return(()=>{var p=OA();return R(p,G(CA,{get currentSymbol(){return e.currentSymbol},get locale(){return e.locale}}),null),R(p,G($e,{get when(){return e.currentSymbol()},get children(){var f=RA(),m=f.firstChild;return R(m,G(EA,{selectedTimeFormat:o,onTimeFormatChange:s,get locale(){return e.locale}})),f}}),null),R(p,G($e,{get when(){return!e.currentSymbol()},get children(){return G(AA,{get locale(){return e.locale}})}}),null),R(p,G($e,{get when(){return r()},get children(){return G(DA,{get locale(){return e.locale}})}}),null),R(p,G($e,{get when(){return n()},get children(){return G(FA,{get error(){return n()},get locale(){return e.locale}})}}),null),R(p,G($e,{get when(){return De(()=>!!(!r()&&!n()&&e.currentSymbol()))()&&t()},get children(){return G(MA,{get trades(){var f;return((f=t())==null?void 0:f.trades)||[]},get maxRows(){return e.tradesMaxRows},get timeFormat(){return o()},get locale(){return e.locale},get formatPrice(){return u()},get formatQuantity(){return d()},get formatTime(){return h()}})}}),null),p})()};var zA=q('<button type=button><svg viewBox="0 0 24 24"width=20 height=20><path d="M15 18L9 12L15 6"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round fill=none>');const bv=e=>{const t=e.startingDirection||"left",r=()=>t==="left"?e.isExpanded?"rotate(0deg)":"rotate(180deg)":e.isExpanded?"rotate(180deg)":"rotate(0deg)";return(()=>{var n=zA(),i=n.firstChild;return Wi(n,"click",e.onClick),i.style.setProperty("transition","transform 0.2s ease-in-out"),i.style.setProperty("min-width","20px"),i.style.setProperty("min-height","20px"),Ne(o=>{var s=e.className||"",u={background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex","align-items":"center","justify-content":"center",...typeof e.style=="object"?e.style:{}},d=e.ariaLabel||(e.isExpanded?"Collapse":"Expand"),h=`toggle-icon ${e.isExpanded?"":"collapsed"}`,p=r();return s!==o.e&&st(n,o.e=s),o.t=kn(n,u,o.t),d!==o.a&&Ve(n,"aria-label",o.a=d),h!==o.o&&Ve(i,"class",o.o=h),p!==o.i&&((o.i=p)!=null?i.style.setProperty("transform",p):i.style.removeProperty("transform")),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),n})()};Xt(["click"]);var $A=q("<div>"),BA=q("<div class=dropdown-item-icon>"),VA=q("<span>"),WA=q("<div><span>");const W0=e=>{const[t,r]=ye({top:0,left:0,right:"auto"}),n=()=>{const p=document.querySelectorAll('[class*="chartspire"]');for(let f of p){const m=getComputedStyle(f).getPropertyValue("--chartspire-ui-font-family");if(m&&m.trim())return m.trim()}return'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},i=()=>{const p=e.options.length*44+8,f=e.maxHeight||300;return Math.min(p,f)},o=(p,f,m)=>{const x=e.placement||"bottom",b=e.offset||8,C=e.minWidth||180,_=i();let k=x==="bottom"?p.bottom+b:p.top-b-_;x==="bottom"&&k+_>m?k=p.top-b-_:x==="top"&&k<0&&(k=p.bottom+b);let M=p.left;return M+C>f&&(M=p.right-C),M<16&&(M=16),{top:k,left:M}},s=(p,f,m)=>{const x=e.placement||"bottom",b=e.offset||8,C=e.minWidth||180,_=i();let k;x==="top"?k=Math.max(8,p.top-_-b):(k=p.bottom+b,k+_>m&&(k=Math.max(8,p.top-_-b)));let M;return C<120?M=Math.max(16,Math.min(p.left,f-C-16)):M=Math.max(16,Math.min((f-C)/2,f-C-16)),{top:k,left:M}},u=()=>{if(!e.triggerRef){r({top:100,left:16,right:"auto"});return}const p=e.triggerRef.getBoundingClientRect(),f=window.innerWidth,m=window.innerHeight,x=f<=768,{top:b,left:C}=x?s(p,f,m):o(p,f,m),_=e.placement||"bottom",k=i();let M=b;_==="top"?(M=p.top-(e.offset||8)-k,M=Math.max(8,M)):M=Math.max(8,Math.min(b,m-k-16));const L=e.minWidth||180,A=Math.max(16,Math.min(C,f-L-16));r({top:M,left:A,right:"auto"})},d=p=>{if(e.triggerRef&&!e.triggerRef.contains(p.target)){const f=document.querySelector(".chartspire-dropdown-portal");(!f||!f.contains(p.target))&&e.onClose()}},h=p=>{e.onSelect(p),e.onClose()};return ki(()=>{document.addEventListener("mousedown",d),document.addEventListener("touchstart",d),window.addEventListener("resize",u),window.addEventListener("orientationchange",u),u()}),rt(()=>{e.isOpen&&e.options.length&&u()}),Br(()=>{document.removeEventListener("mousedown",d),document.removeEventListener("touchstart",d),window.removeEventListener("resize",u),window.removeEventListener("orientationchange",u)}),G($e,{get when(){return e.isOpen},get children(){return G(nv,{get children(){var p=$A();return p.style.setProperty("position","fixed"),p.style.setProperty("background","var(--chartspire-ui-background-color)"),p.style.setProperty("border","1px solid var(--chartspire-ui-border-color)"),p.style.setProperty("border-radius","8px"),p.style.setProperty("box-shadow","0 8px 32px rgba(0, 0, 0, 0.2), 0 4px 16px rgba(0, 0, 0, 0.1)"),p.style.setProperty("backdrop-filter","blur(12px)"),p.style.setProperty("z-index","10000"),p.style.setProperty("overflow-y","auto"),p.style.setProperty("animation","dropdown-fade-in 0.15s ease-out"),p.style.setProperty("color","var(--chartspire-ui-text-color)"),R(p,G(Vn,{get each(){return e.options},children:f=>(()=>{var m=WA(),x=m.firstChild;return m.$$mouseout=b=>{if(f.key!==e.selectedKey){b.currentTarget.style.background="transparent",b.currentTarget.style.color="var(--chartspire-ui-text-color)",b.currentTarget.style.transform="translateY(0)";const C=b.currentTarget.querySelector(".dropdown-item-icon");C&&(C.style.fill="var(--chartspire-ui-text-color)",C.style.stroke="var(--chartspire-ui-text-color)")}},m.$$mouseover=b=>{if(f.key!==e.selectedKey){b.currentTarget.style.background="linear-gradient(135deg, var(--chartspire-ui-hover-background-color) 0%, rgba(255, 255, 255, 0.05) 100%)",b.currentTarget.style.color="var(--chartspire-ui-primary-color)",b.currentTarget.style.transform="translateY(-1px)";const C=b.currentTarget.querySelector(".dropdown-item-icon");C&&(C.style.fill="var(--chartspire-ui-primary-color)",C.style.stroke="var(--chartspire-ui-primary-color)")}},m.$$click=()=>h(f),m.style.setProperty("padding","8px 12px"),m.style.setProperty("cursor","pointer"),m.style.setProperty("font-size","12px"),m.style.setProperty("color","var(--chartspire-ui-text-color)"),m.style.setProperty("transition","all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"),m.style.setProperty("border-bottom","1px solid rgba(255, 255, 255, 0.05)"),m.style.setProperty("position","relative"),m.style.setProperty("display","flex"),m.style.setProperty("align-items","center"),R(m,G($e,{get when(){return f.icon},get children(){var b=BA();return b.style.setProperty("width","20px"),b.style.setProperty("height","20px"),b.style.setProperty("display","flex"),b.style.setProperty("align-items","center"),b.style.setProperty("justify-content","center"),b.style.setProperty("flex-shrink","0"),b.style.setProperty("transition","all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"),Ne(C=>{var _=f.icon,k=f.key===e.selectedKey?"var(--chartspire-ui-primary-color)":"var(--chartspire-ui-text-color)",M=f.key===e.selectedKey?"var(--chartspire-ui-primary-color)":"var(--chartspire-ui-text-color)";return _!==C.e&&(b.innerHTML=C.e=_),k!==C.t&&((C.t=k)!=null?b.style.setProperty("fill",k):b.style.removeProperty("fill")),M!==C.a&&((C.a=M)!=null?b.style.setProperty("stroke",M):b.style.removeProperty("stroke")),C},{e:void 0,t:void 0,a:void 0}),b}}),x),x.style.setProperty("flex","1"),R(x,()=>f.text),R(m,G($e,{get when(){return f.key===e.selectedKey},get children(){var b=VA();return b.style.setProperty("font-size","10px"),b.style.setProperty("color","var(--chartspire-ui-primary-color)"),b.style.setProperty("margin-left","auto"),b}}),null),Ne(b=>{var C=`dropdown-item ${f.key===e.selectedKey?"selected":""}`,_=f.key===e.selectedKey?"600":"500",k=f.key===e.selectedKey?"linear-gradient(135deg, var(--chartspire-ui-selected-color) 0%, var(--chartspire-ui-hover-background-color) 100%)":"transparent",M=f.icon?"10px":"0";return C!==b.e&&st(m,b.e=C),_!==b.t&&((b.t=_)!=null?m.style.setProperty("font-weight",_):m.style.removeProperty("font-weight")),k!==b.a&&((b.a=k)!=null?m.style.setProperty("background",k):m.style.removeProperty("background")),M!==b.o&&((b.o=M)!=null?m.style.setProperty("gap",M):m.style.removeProperty("gap")),b},{e:void 0,t:void 0,a:void 0,o:void 0}),m})()})),Ne(f=>{var m=`chartspire-dropdown-portal ${e.className||""}`,x=`${t().top}px`,b=`${t().left}px`,C=t().right,_=`${e.minWidth||180}px`,k=`${e.minWidth||180}px`,M=`${i()}px`,L=`${e.maxHeight||300}px`,A=n();return m!==f.e&&st(p,f.e=m),x!==f.t&&((f.t=x)!=null?p.style.setProperty("top",x):p.style.removeProperty("top")),b!==f.a&&((f.a=b)!=null?p.style.setProperty("left",b):p.style.removeProperty("left")),C!==f.o&&((f.o=C)!=null?p.style.setProperty("right",C):p.style.removeProperty("right")),_!==f.i&&((f.i=_)!=null?p.style.setProperty("--dropdown-min-width",_):p.style.removeProperty("--dropdown-min-width")),k!==f.n&&((f.n=k)!=null?p.style.setProperty("min-width",k):p.style.removeProperty("min-width")),M!==f.s&&((f.s=M)!=null?p.style.setProperty("height",M):p.style.removeProperty("height")),L!==f.h&&((f.h=L)!=null?p.style.setProperty("max-height",L):p.style.removeProperty("max-height")),A!==f.r&&((f.r=A)!=null?p.style.setProperty("font-family",A):p.style.removeProperty("font-family")),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),p}})}})};Xt(["click","mouseover","mouseout"]);var ui=(e=>(e.ONE_X="1x",e.TWO_X="0.5x",e.THREE_X="0.3x",e.FIVE_X="0.2x",e.TEN_X="0.1x",e))(ui||{});function UA(e,t){switch(e){case ui.ONE_X:return I("1 upd per 1 sec",t);case ui.TWO_X:return I("1 upd per 2 sec",t);case ui.THREE_X:return I("1 upd per 3 sec",t);case ui.FIVE_X:return I("1 upd per 5 sec",t);case ui.TEN_X:return I("1 upd per 10 sec",t)}return e}function HA(e){return[{key:ui.ONE_X,text:I("1 upd per 1 sec",e)},{key:ui.TWO_X,text:I("1 upd per 2 sec",e)},{key:ui.THREE_X,text:I("1 upd per 3 sec",e)},{key:ui.FIVE_X,text:I("1 upd per 5 sec",e)},{key:ui.TEN_X,text:I("1 upd per 10 sec",e)}]}function YA(e){const t={[ui.ONE_X]:1e3,[ui.TWO_X]:2e3,[ui.THREE_X]:3e3,[ui.FIVE_X]:5e3,[ui.TEN_X]:1e4};return e in t?t[e]:(console.error(`Invalid replay speed key: ${e}`),0)}var XA=q("<div class=chartspire-ui-alert-container><div class=alert><div class=messagebox><p>");function jA(e){const t="Select starting candle by clicking on candle";return(()=>{var r=XA(),n=r.firstChild,i=n.firstChild,o=i.firstChild;return R(o,()=>e.message!==""?e.message:t),r})()}const ZA=e=>{const[t,r]=ye(e.replaySpeed),n=Yt(()=>HA(e.locale)),i=`Replay ${e.chartId}`,o=()=>{e.replayCandle!=null&&(e.onPause!=null&&e.onPause(!1),e.onPlay!=null&&(e.onPlay(!0),e.setReplaySpeed(t())))},s=()=>{e.onPause!=null&&e.onPause(!0),e.onPlay!=null&&e.onPlay(!1)},u=()=>{e.onClose!=null&&e.onClose(),console.warn("handle close: replay closed")},d=()=>{e.skipReplay!=null&&e.skipReplay(!0)};return rt(()=>{e.setReplaySpeed(t())}),G($e,{get when(){return e.isActive},get children(){return G($e,{get when(){return e.replayModalVisible},get children(){return[G($e,{get when(){return e.isAlertVisible},get children(){return G(jA,{get message(){return e.alertMessage}})}}),G(GT,{title:i,width:380,onClose:u,get isPLaying(){return e.isPlaying},get buttons(){return[e.isPlaying()?{children:"Pause",onClick:()=>{s()}}:{children:"Play",onClick:()=>{o()}},{children:">>",onClick:()=>{d()}}]},get children(){return G(jp,{style:{width:"100%"},get value(){return t().key},onSelected:h=>{r(h)},get dataSource(){return n()}})}})]}})}})};var GA=q('<svg viewBox="0 0 1024 1024"class=icon stroke-width=10><path d="M512 0L627.2 384H1024L748.8 640L864 1024L512 768L160 1024L275.2 640L0 384H396.8L512 0z">'),qA=q("<div class=indicator-item><li class=row>"),ny=q("<li class=title>");const QA=e=>(()=>{var t=GA();return Wi(t,"click",e.onClick),Ne(r=>{var n=e.selected?"yellow":"none",i=e.selected?"yellow":"#76808F";return n!==r.e&&Ve(t,"fill",r.e=n),i!==r.t&&Ve(t,"stroke",r.t=i),r},{e:void 0,t:void 0}),t})(),KA=e=>(()=>{var t=qA(),r=t.firstChild;return R(t,G(QA,{get selected(){return e.isSelected},get onClick(){return e.onStarClick}}),r),Wi(r,"click",e.onClick),R(r,G(IT,{get checked(){return e.isChecked},get label(){return I(e.name.toLowerCase(),e.locale)}})),t})(),JA=e=>{const[t,r]=ye(""),n=()=>{const f=t().toLowerCase();return[...Am().map(m=>m.name)].filter(m=>I(m.toLowerCase(),e.locale).toLowerCase().includes(f)).sort((m,x)=>{const b=I(m.toLowerCase(),e.locale).toLowerCase(),C=I(x.toLowerCase(),e.locale).toLowerCase();return b.localeCompare(C)})},i=localStorage.getItem("chartspire-favIndicators"),o=i?JSON.parse(i):[],[s,u]=ye(o),d=()=>s().filter(f=>e.mainIndicators().includes(f)||f in e.subIndicators()||[...Am().map(m=>m.name)].includes(f)).sort((f,m)=>{const x=I(f.toLowerCase(),e.locale).toLowerCase(),b=I(m.toLowerCase(),e.locale).toLowerCase();return x.localeCompare(b)}),h=f=>{u(m=>{const x=m.includes(f),b=x?m.filter(C=>C!==f):[...m,f];return e.mainIndicators().includes(f)?e.onMainIndicatorChange({name:f,paneId:"candle_pane",added:!x}):f in e.subIndicators()&&(e.subIndicators()[f]||e.onSubIndicatorChange({name:f,paneId:e.subIndicators()[f]??"",added:!x})),localStorage.setItem("chartspire-favIndicators",JSON.stringify(b)),b})},p=f=>{const m=e.mainIndicators().includes(f),x=f in e.subIndicators(),b=m||x,C=d().includes(f);return G(KA,{name:f,isSelected:C,isChecked:b,onClick:()=>{m?e.onMainIndicatorChange({name:f,paneId:"candle_pane",added:!b}):x?e.onSubIndicatorChange({name:f,paneId:e.subIndicators()[f]??"",added:!b}):Lp.includes(f)?e.onMainIndicatorChange({name:f,paneId:"candle_pane",added:!b}):F0.includes(f)&&e.onSubIndicatorChange({name:f,paneId:e.subIndicators()[f]??"",added:!b})},onStarClick:()=>h(f),get locale(){return e.locale}})};return G(Nl,{get title(){return I("indicator",e.locale)},width:600,contentHeight:"90%",get onClose(){return e.onClose},get children(){return[G(Wa,{style:{width:"100%"},get value(){return t()},onInput:f=>r(f.target.value)}),G(V2,{class:"chartspire-ui-indicator-modal-list",get children(){return[De(()=>De(()=>d().length>0)()&&(()=>{var f=ny();return R(f,()=>I("favourites",e.locale)),f})()),De(()=>d().map(p)),(()=>{var f=ny();return R(f,()=>I("Indicators",e.locale)),f})(),De(()=>n().map(p))]}})]}})};Xt(["click"]);const eD=e=>(e.widget==null&&console.error("widget is null"),G($e,{get when(){return e.indicatorModalVisible},get children(){return G(JA,{get locale(){return e.locale},get mainIndicators(){return e.mainIndicators},get subIndicators(){return e.subIndicators},onClose:()=>{e.setIndicatorModalVisible(!1)},onMainIndicatorChange:t=>{var r;const n=[...e.mainIndicators()];t.added?(e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()&&Hg(e.widget,t.name,!0,!0,{id:"candle_pane"}),n.push(t.name)):((r=e.widget)==null||r.removeIndicator({paneId:"candle_pane",name:t.name}),n.splice(n.indexOf(t.name),1),e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()&&bt.getInstance(e.widget).saveIndicators()),e.setMainIndicators(n)},onSubIndicatorChange:t=>{var r;const n={...e.subIndicators()};if(t.added){const i=Hg(e.widget,t.name,!0);i&&(n[t.name]=i)}else e.subIndicators()[t.name]&&((r=e.widget)==null||r.removeIndicator({name:t.name})),delete n[t.name],e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()&&bt.getInstance(e.widget).saveIndicators();e.setSubIndicators(n)}})}}));var j=(e=>(e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.TWO_VERTICAL=21]="TWO_VERTICAL",e[e.THREE=3]="THREE",e[e.THREE_VERTICAL=31]="THREE_VERTICAL",e[e.THREE_MIXED=32]="THREE_MIXED",e[e.THREE_MIXED_REVERSE=33]="THREE_MIXED_REVERSE",e[e.THREE_MIXED_BOTTOM=34]="THREE_MIXED_BOTTOM",e[e.THREE_MIXED_TOP=35]="THREE_MIXED_TOP",e[e.FOUR=4]="FOUR",e[e.FOUR_VERTICAL=41]="FOUR_VERTICAL",e[e.FOUR_HORIZONTAL=42]="FOUR_HORIZONTAL",e[e.FOUR_MIXED=43]="FOUR_MIXED",e[e.FOUR_MIXED_REVERSE=44]="FOUR_MIXED_REVERSE",e[e.FOUR_MIXED_TOP=45]="FOUR_MIXED_TOP",e[e.FOUR_MIXED_BOTTOM=46]="FOUR_MIXED_BOTTOM",e[e.FIVE_VERTICAL=51]="FIVE_VERTICAL",e[e.FIVE_HORIZONTAL=52]="FIVE_HORIZONTAL",e[e.FIVE_MIXED=53]="FIVE_MIXED",e[e.FIVE_MIXED_REVERSE=54]="FIVE_MIXED_REVERSE",e[e.FIVE_MIXED_TOP=55]="FIVE_MIXED_TOP",e[e.SIX=6]="SIX",e[e.SIX_HORIZONTAL=62]="SIX_HORIZONTAL",e[e.SIX_VERTICAL=61]="SIX_VERTICAL",e[e.SIX_MIXED=63]="SIX_MIXED",e[e.SEVEN_VERTICAL=71]="SEVEN_VERTICAL",e[e.SEVEN_HORIZONTAL=72]="SEVEN_HORIZONTAL",e[e.EIGHT=8]="EIGHT",e[e.EIGHT_VERTICAL=81]="EIGHT_VERTICAL",e[e.EIGHT_HORIZONTAL=82]="EIGHT_HORIZONTAL",e[e.NINE=9]="NINE",e[e.NINE_VERTICAL=91]="NINE_VERTICAL",e[e.NINE_HORIZONTAL=92]="NINE_HORIZONTAL",e[e.TEN=10]="TEN",e[e.TEN_VERTICAL=101]="TEN_VERTICAL",e[e.TEN_HORIZONTAL=102]="TEN_HORIZONTAL",e[e.TWELVE=12]="TWELVE",e[e.TWELVE_VERTICAL=121]="TWELVE_VERTICAL",e[e.TWELVE_HORIZONTAL=122]="TWELVE_HORIZONTAL",e[e.TWELVE_GRID=123]="TWELVE_GRID",e[e.FOURTEEN=14]="FOURTEEN",e[e.SIXTEEN=16]="SIXTEEN",e[e.SIXTEEN_GRID=161]="SIXTEEN_GRID",e))(j||{});const Ao=new Set;let Qn=null;const xv=()=>{Ao.clear(),Ao.add(1)},_5=()=>{document.visibilityState==="visible"&&xv()};document.addEventListener("visibilitychange",_5);const tD=()=>{console.log("Cleaning up multiChart listeners"),document.removeEventListener("visibilitychange",_5),Qn&&(clearTimeout(Qn),Qn=null),Ao.clear()},rD=(e,t,r,n)=>{Qn&&(clearTimeout(Qn),Qn=null),Qn=setTimeout(()=>{Qn=null},(Math.abs(t-e)+1)*r+1e3);const i=o=>{if(e<t){if(o<=t){if(Ao.has(o)||(Ao.add(o),Vp(o===t&&n&&n!==t?n:o)),o<t)setTimeout(()=>{i(o+1)},r);else if(Qn&&(clearTimeout(Qn),Qn=null),o===t){Ao.clear();for(let s=1;s<=t;s++)Ao.add(s)}}}else if(o>=t){if(Vp(o===t&&n&&n!==t?n:o),o>t)setTimeout(()=>{i(o-1)},r);else if(Qn&&(clearTimeout(Qn),Qn=null),o===t){Ao.clear();for(let s=1;s<=t;s++)Ao.add(s)}}};i(e<t?e:e-1)},iy=e=>{switch(e){case 1:return 1;case 2:return 2;case 21:return 2;case 3:return 3;case 31:return 3;case 32:return 3;case 33:return 3;case 34:return 3;case 35:return 3;case 4:return 4;case 41:return 4;case 42:return 4;case 43:return 4;case 44:return 4;case 45:return 4;case 46:return 4;case 51:return 5;case 52:return 5;case 53:return 5;case 54:return 5;case 55:return 5;case 6:return 6;case 62:return 6;case 61:return 6;case 63:return 6;case 71:return 7;case 72:return 7;case 8:return 8;case 81:return 8;case 82:return 8;case 9:return 9;case 91:return 9;case 92:return 9;case 10:return 10;case 101:return 10;case 102:return 10;case 12:return 12;case 121:return 12;case 122:return 12;case 123:return 12;case 14:return 14;case 16:return 16;case 161:return 16;default:return e}},nD=(e,t)=>{console.warn("Initial delay",t);const r=Ld();if(Ao.has(2)&&r===1&&xv(),e===r)return;Qn&&(clearTimeout(Qn),Qn=null);const n=iy(r),i=iy(e);n===i?setTimeout(()=>{Vp(e),Ao.clear();for(let o=1;o<=i;o++)Ao.add(o)},t):rD(n,i,t,e)},S0=class Wc{constructor(){xe(this,"activeCharts",new Map)}static getInstance(){return Wc.instance}static setEnabled(t){Wc.enabled=t}static isEnabled(){return Wc.enabled}static setTimeSyncEnabled(t){Wc.timeSyncEnabled=t}static isTimeSyncEnabled(){return Wc.timeSyncEnabled}registerChart(t,r,n,i){this.activeCharts.set(t,{chart:r,symbol:n,type:i})}unregisterChart(t){this.activeCharts.has(t)&&this.activeCharts.delete(t)}updateChartSymbol(t,r,n){const i=this.activeCharts.get(t);i&&(i.symbol=r,i.type=n)}updateChartStyles(t,r){const n=this.activeCharts.get(t);n&&n.chart.setStyles(r)}hasSameSymbol(t,r){const n=this.activeCharts.get(t),i=this.activeCharts.get(r);if(!n||!i||!n.symbol||!i.symbol)return!1;const o=n.symbol===i.symbol;return n.type===void 0&&i.type===void 0?o:o&&n.type===i.type}configureCrosshair(t,r){var n;try{const i=t.getStyles(),o=JSON.parse(JSON.stringify(i));(n=o==null?void 0:o.crosshair)!=null&&n.vertical&&(r?(o.crosshair.horizontal.show=!0,o.crosshair.horizontal.line.show=!0):(o.crosshair.horizontal.show=!1,o.crosshair.horizontal.line.show=!1),t.setStyles(o))}catch(i){console.error("Error configuring crosshair:",i)}}resetCrosshairVisibility(t){try{const r=this.activeCharts.get(t);if(!r)return;const n={crosshair:{show:!0,horizontal:{show:!0,line:{show:!0}},vertical:{show:!0,line:{show:!0}}}};r.chart.setStyles(n);const i=r.chart.getStyles();if(i){const o=JSON.parse(JSON.stringify(i));o.crosshair&&(o.crosshair.show=!0,o.crosshair.vertical&&(o.crosshair.vertical.show=!0,o.crosshair.vertical.line.show=!0),o.crosshair.horizontal&&(o.crosshair.horizontal.show=!0,o.crosshair.horizontal.line.show=!0),r.chart.setStyles(o))}}catch(r){console.error("Error resetting crosshair visibility:",r)}}getSafeVisibleIndices(t,r){const n=typeof t.realFrom=="number"?t.realFrom:t.from,i=typeof t.realTo=="number"?t.realTo:t.to,o=Math.max(0,Math.min(n,r-1)),s=Math.max(0,Math.min(i,r-1));return{safeFromIndex:o,safeToIndex:s}}findVisibleTimestamp(t,r,n){try{const i=t.getDataList();if(!i||i.length===0)return null;const o=t.getVisibleRange();if(!o)return null;const{safeFromIndex:s,safeToIndex:u}=this.getSafeVisibleIndices(o,i.length);if(s>u)return null;const d=i[s].timestamp,h=i[u].timestamp;if(r<=d)return d;if(r>=h)return h;for(let b=s;b<=u;b++)if(i[b].timestamp===r)return i[b].timestamp;const p=h-d;if(p<=0)return d;const f=(r-d)/p,m=Math.floor(s+f*(u-s)),x=Math.max(s,Math.min(u,m));return i[x].timestamp}catch(i){return console.error("Error finding visible timestamp:",i),null}}checkTimestampStatus(t,r){try{const n=t.getDataList();if(!n||n.length===0)return{exists:!1,dataIndex:-1,isVisible:!1};const i=n.findIndex(h=>h.timestamp===r);if(i===-1)return{exists:!1,dataIndex:-1,isVisible:!1};const o=t.getVisibleRange();if(!o)return{exists:!0,dataIndex:i,isVisible:!1};const{safeFromIndex:s,safeToIndex:u}=this.getSafeVisibleIndices(o,n.length),d=i>=s&&i<=u;return{exists:!0,dataIndex:i,isVisible:d}}catch(n){return console.error("Error checking timestamp status:",n),{exists:!1,dataIndex:-1,isVisible:!1}}}clearCrosshair(t,r){try{t.executeAction("onCrosshairChange",{paneId:r,x:void 0,y:void 0})}catch(n){console.error("Error clearing crosshair:",n)}}extractPriceValue(t,r){var n,i;if(!(!r||!t.paneId)){if(t.y!==void 0)try{const o=r.convertFromPixel([{y:t.y}],{paneId:t.paneId});if(o&&Array.isArray(o)&&((n=o[0])==null?void 0:n.value)!==void 0)return o[0].value}catch(o){console.error("Error converting Y to price, trying fallback",o)}return(i=t.kLineData)==null?void 0:i.close}}showCrosshair(t,r,n,i,o,s){try{const u=t.getDom(n);if(!u)return!1;const d=u.getBoundingClientRect(),h=i!==void 0?t.convertToPixel({timestamp:r,value:i},{paneId:n}):t.convertToPixel({timestamp:r},{paneId:n});if(!h)return!1;const p=Array.isArray(h)?h[0]:h;if(typeof(p==null?void 0:p.x)!="number")return!1;let f;return typeof(p==null?void 0:p.y)=="number"?f=p.y:s!==void 0&&s>=0&&s<=1?f=Math.floor(d.height*s):o!==void 0?f=o:f=Math.floor(d.height/2),f=Math.max(0,Math.min(d.height,f)),t.executeAction("onCrosshairChange",{paneId:n,x:p.x,y:f}),!0}catch(u){return console.error("Error showing crosshair:",u),!1}}calculateYPercentage(t,r,n){if(n===void 0||!t)return;const i=t.getDom(r);if(!i)return;const o=i.getBoundingClientRect();return o.height>0?n/o.height:void 0}syncCrosshair(t,r){if(!Wc.enabled||!r||!r.paneId||r.timestamp===void 0||this.activeCharts.size<=1)return;const n=r.timestamp,i=r.paneId,o=this.activeCharts.get(t);if(!o)return;const s=o.chart,u=this.extractPriceValue(r,s),d=this.calculateYPercentage(s,i,r.y);this.activeCharts.forEach((h,p)=>{if(p===t)return;const f=h.chart;try{const m=this.hasSameSymbol(t,p);this.configureCrosshair(f,m);const x=this.checkTimestampStatus(f,n);let b=!1;if(x.exists&&x.isVisible&&(b=this.showCrosshair(f,n,i,u,r.y,d)),!b){const C=this.findVisibleTimestamp(f,n,i);C&&(b=this.showCrosshair(f,C,i,u,r.y,d))}b||this.clearCrosshair(f,i)}catch(m){console.error(`Error syncing chart ${p}:`,m)}})}};xe(S0,"instance",new S0),xe(S0,"enabled",!1),xe(S0,"timeSyncEnabled",!1);let wv=S0;const S5=()=>wv.getInstance(),iD=e=>{wv.setEnabled(e)},oD=()=>wv.isEnabled(),_p=class k0{constructor(){xe(this,"activeCharts",new Map)}static getInstance(){return k0.instance}static setEnabled(t){k0.enabled=t}static isEnabled(){return k0.enabled}registerChart(t,r,n,i){this.activeCharts.set(t,{chart:r,symbol:n,type:i})}unregisterChart(t){this.activeCharts.has(t)&&this.activeCharts.delete(t)}updateChartSymbol(t,r,n){const i=this.activeCharts.get(t);i&&(i.symbol=r,i.type=n)}findClosestTimestamp(t,r){try{const n=t.getDataList();if(!n||n.length===0)return null;let i=0,o=n.length-1,s=n[0].timestamp,u=Math.abs(n[0].timestamp-r);for(;i<=o;){const h=Math.floor((i+o)/2),p=n[h].timestamp,f=Math.abs(p-r);if(f<u&&(u=f,s=p),p===r)return p;p<r?i=h+1:o=h-1}const d=Math.round(u/(1e3*60));return s}catch(n){return console.error("Error finding closest timestamp:",n),null}}isTimestampVisible(t,r){try{const n=t.getVisibleRange();if(!n)return!1;const i=t.getDataList();if(!i||i.length===0)return!1;const o=Math.max(0,Math.min(n.from||0,i.length-1)),s=Math.max(0,Math.min(n.to||i.length-1,i.length-1));if(o>s)return!1;const u=i[o].timestamp,d=i[s].timestamp,h=r>=u&&r<=d;if(!h){const p=this.findClosestTimestamp(t,r);if(p)return p>=u&&p<=d}return h}catch(n){return console.error("Error checking timestamp visibility:",n),!1}}scrollToTimestamp(t,r){try{const n=t.getVisibleRange();if(!n)return t.scrollToTimestamp(r),!0;const i=t.getDataList();if(!i||i.length===0)return!1;const o=Math.max(0,Math.min(n.from||0,i.length-1)),s=Math.max(0,Math.min(n.to||i.length-1,i.length-1))-o+1;let u=i.findIndex(p=>p.timestamp===r);if(u===-1){let p=0,f=Math.abs(i[0].timestamp-r);for(let m=1;m<i.length;m++){const x=Math.abs(i[m].timestamp-r);x<f&&(f=x,p=m)}u=p}const d=Math.min(u+s-1,i.length-1),h=i[d].timestamp;return t.scrollToTimestamp(h),!0}catch(n){return console.error("Error scrolling to timestamp:",n),!1}}syncTime(t,r){!k0.enabled||this.activeCharts.size<=1||!this.activeCharts.get(t)||this.activeCharts.forEach((n,i)=>{if(i===t)return;const o=n.chart;try{const s=this.findClosestTimestamp(o,r);if(!s)return;if(s!==r){const d=Math.abs(s-r)}if(this.isTimestampVisible(o,s))return;const u=this.scrollToTimestamp(o,s)}catch(s){console.error(`Error syncing chart ${i}:`,s)}})}};xe(_p,"instance",new _p),xe(_p,"enabled",!1);let Cv=_p;const k5=()=>Cv.getInstance(),aD=e=>{Cv.setEnabled(e)},sD=()=>Cv.isEnabled(),M5=class Ug{static setEnabled(t){Ug.enabled=t}static isEnabled(){return Ug.enabled}};xe(M5,"enabled",!1);let T5=M5;const lD=e=>{T5.setEnabled(e)},E5=()=>T5.isEnabled();var cD=q('<div class=chartspire-ui-svg-container><div class=chart-layouts><div class=item><span>1</span><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><rect width=41 height=40 fill=none stroke=currentColor rx=4 transform="translate(.5 .5)"></rect></svg></div><div class="item two-chart-row"><span>2</span><div class=two-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path></g></svg></div></div><div class="item three-chart-row"><span>3</span><div class=three-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M13 0v40"></path><path d="M28 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 13h41"></path><path d="M0 28h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M20.5 20h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M0 20h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M20.5 0v20"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M20.5 20v20"></path></g></svg></div></div><div class="item four-chart-row"><span>4</span><div class=four-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M20 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 10h41"></path><path d="M0 20h41"></path><path d="M0 30h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M10 0v40"></path><path d="M20 0v40"></path><path d="M30 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M20.5 13h20.5"></path><path d="M20.5 27h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M0 13h20.5"></path><path d="M0 27h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M13.5 20v20"></path><path d="M27 20v20"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M13.5 0v20"></path><path d="M27 0v20"></path></g></svg></div></div><div class="item five-chart-row"><span>5</span><div class=five-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 8h41"></path><path d="M0 16h41"></path><path d="M0 24h41"></path><path d="M0 32h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M8 0v40"></path><path d="M16 0v40"></path><path d="M24 0v40"></path><path d="M32 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M20.5 10h20.5"></path><path d="M20.5 20h20.5"></path><path d="M20.5 30h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M0 10h20.5"></path><path d="M0 20h20.5"></path><path d="M0 30h20.5"></path></g></svg></div></div><div class="item six-chart-row"><span>6</span><div class=six-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M13 0v41M27 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M7 0v40"></path><path d="M14 0v40"></path><path d="M21 0v40"></path><path d="M28 0v40"></path><path d="M35 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 7h41"></path><path d="M0 14h41"></path><path d="M0 21h41"></path><path d="M0 28h41"></path><path d="M0 35h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 13h41"></path><path d="M0 27h41"></path><path d="M20 0v40"></path></g></svg></div></div><div class="item seven-chart-row"><span>7</span><div class=seven-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 5.7h41"></path><path d="M0 11.4h41"></path><path d="M0 17.1h41"></path><path d="M0 22.8h41"></path><path d="M0 28.5h41"></path><path d="M0 34.2h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M6 0v40"></path><path d="M12 0v40"></path><path d="M18 0v40"></path><path d="M24 0v40"></path><path d="M30 0v40"></path><path d="M36 0v40"></path></g></svg></div></div><div class="item eight-chart-row"><span>8</span><div class=eight-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M10 0v41M20 0v41M30 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 5h41"></path><path d="M0 10h41"></path><path d="M0 15h41"></path><path d="M0 20h41"></path><path d="M0 25h41"></path><path d="M0 30h41"></path><path d="M0 35h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M5 0v40"></path><path d="M10 0v40"></path><path d="M15 0v40"></path><path d="M20 0v40"></path><path d="M25 0v40"></path><path d="M30 0v40"></path><path d="M35 0v40"></path></g></svg></div></div><div class="item nine-chart-row"><span>9</span><div class=nine-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 13h41"></path><path d="M0 27h41"></path><path d="M13 0v40"></path><path d="M27 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 4.4h41"></path><path d="M0 8.8h41"></path><path d="M0 13.2h41"></path><path d="M0 17.6h41"></path><path d="M0 22h41"></path><path d="M0 26.4h41"></path><path d="M0 30.8h41"></path><path d="M0 35.2h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M4.5 0v40"></path><path d="M9 0v40"></path><path d="M13.5 0v40"></path><path d="M18 0v40"></path><path d="M22.5 0v40"></path><path d="M27 0v40"></path><path d="M31.5 0v40"></path><path d="M36 0v40"></path></g></svg></div></div><div class="item ten-chart-row"><span>10</span><div class=ten-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M8 0v41M16 0v41M24 0v41M32 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 4h41"></path><path d="M0 8h41"></path><path d="M0 12h41"></path><path d="M0 16h41"></path><path d="M0 20h41"></path><path d="M0 24h41"></path><path d="M0 28h41"></path><path d="M0 32h41"></path><path d="M0 36h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M4 0v40"></path><path d="M8 0v40"></path><path d="M12 0v40"></path><path d="M16 0v40"></path><path d="M20 0v40"></path><path d="M24 0v40"></path><path d="M28 0v40"></path><path d="M32 0v40"></path><path d="M36 0v40"></path></g></svg></div></div><div class="item twelve-chart-row"><span>12</span><div class=twelve-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 10h41"></path><path d="M0 20h41"></path><path d="M0 30h41"></path><path d="M13 0v40"></path><path d="M27 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 3.3h41"></path><path d="M0 6.6h41"></path><path d="M0 10h41"></path><path d="M0 13.3h41"></path><path d="M0 16.6h41"></path><path d="M0 20h41"></path><path d="M0 23.3h41"></path><path d="M0 26.6h41"></path><path d="M0 30h41"></path><path d="M0 33.3h41"></path><path d="M0 36.6h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M3.4 0v40"></path><path d="M6.8 0v40"></path><path d="M10.2 0v40"></path><path d="M13.6 0v40"></path><path d="M17 0v40"></path><path d="M20.4 0v40"></path><path d="M23.8 0v40"></path><path d="M27.2 0v40"></path><path d="M30.6 0v40"></path><path d="M34 0v40"></path><path d="M37.4 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M6.8 0v40"></path><path d="M13.6 0v40"></path><path d="M20.4 0v40"></path><path d="M27.2 0v40"></path><path d="M34 0v40"></path></g></svg></div></div><div class=item><span>14</span><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M6 0v41M12 0v41M18 0v41M24 0v41M30 0v41M36 0v41"></path></g></svg></div><div class="item sixteen-chart-row"><span>16</span><div class=sixteen-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M5 0v41M10 0v41M15 0v41M20 0v41M25 0v41M30 0v41M35 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 10h41M0 20h41M0 30h41M10 0v40M20 0v40M30 0v40"></path></g></svg></div></div></div><div class=sync-controls><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark>');const uD=e=>{const[t,r]=ye(oD()),[n,i]=ye(sD()),[o,s]=ye(TE()),[u,d]=ye(E5()),[h,p]=ye(Dd()),f=M=>{e.onConfirm!=null&&e.onConfirm(M,X5),e.onClose!=null&&e.onClose()},m=M=>(M===j.TWO_VERTICAL?2:M===j.THREE_VERTICAL||M===j.THREE_MIXED||M===j.THREE_MIXED_REVERSE||M===j.THREE_MIXED_BOTTOM||M===j.THREE_MIXED_TOP?3:M===j.FOUR_VERTICAL||M===j.FOUR_HORIZONTAL||M===j.FOUR_MIXED||M===j.FOUR_MIXED_REVERSE||M===j.FOUR_MIXED_TOP||M===j.FOUR_MIXED_BOTTOM?4:M===j.FIVE_VERTICAL||M===j.FIVE_HORIZONTAL||M===j.FIVE_MIXED||M===j.FIVE_MIXED_REVERSE||M===j.FIVE_MIXED_TOP?5:M===j.SIX_HORIZONTAL||M===j.SIX_VERTICAL||M===j.SIX_MIXED?6:M===j.SEVEN_HORIZONTAL||M===j.SEVEN_VERTICAL?7:M===j.EIGHT||M===j.EIGHT_VERTICAL||M===j.EIGHT_HORIZONTAL?8:M===j.NINE||M===j.NINE_VERTICAL||M===j.NINE_HORIZONTAL?9:M===j.TEN||M===j.TEN_VERTICAL||M===j.TEN_HORIZONTAL?10:M===j.TWELVE||M===j.TWELVE_VERTICAL||M===j.TWELVE_HORIZONTAL||M===j.TWELVE_GRID?12:M===j.SIXTEEN||M===j.SIXTEEN_GRID?16:M)<=e.maxMultiChart,x=M=>{const L=M.target.checked;r(L),iD(L)},b=M=>{const L=M.target.checked;i(L),aD(L)},C=M=>{const L=M.target.checked;s(L),ME(L)},_=M=>{const L=M.target.checked;d(L),lD(L)},k=M=>{const L=M.target.checked;p(L),kE(L)};return G(Nl,{get title(){return I("multichart",e.locale)},width:500,padding:"20px 35px",get onClose(){return e.onClose},get children(){var M=cD(),L=M.firstChild,A=L.firstChild,P=A.firstChild,W=P.nextSibling,D=A.nextSibling,$=D.firstChild,z=$.nextSibling,B=z.firstChild,Z=B.nextSibling,J=D.nextSibling,H=J.firstChild,ee=H.nextSibling,le=ee.firstChild,ce=le.nextSibling,ae=ce.nextSibling,re=ae.nextSibling,ve=re.nextSibling,pe=ve.nextSibling,Y=J.nextSibling,U=Y.firstChild,de=U.nextSibling,X=de.firstChild,fe=X.nextSibling,ue=fe.nextSibling,Fe=ue.nextSibling,Te=Fe.nextSibling,Pe=Te.nextSibling,Ce=Pe.nextSibling,Ee=Y.nextSibling,Je=Ee.firstChild,Qe=Je.nextSibling,nt=Qe.firstChild,Ue=nt.nextSibling,ct=Ue.nextSibling,ut=ct.nextSibling,Qt=Ee.nextSibling,Kt=Qt.firstChild,Mt=Kt.nextSibling,gt=Mt.firstChild,jt=gt.nextSibling,ln=jt.nextSibling,mn=ln.nextSibling,dr=Qt.nextSibling,Ft=dr.firstChild,Zt=Ft.nextSibling,nr=Zt.firstChild,Gr=nr.nextSibling,hr=dr.nextSibling,Vr=hr.firstChild,Tt=Vr.nextSibling,We=Tt.firstChild,_t=We.nextSibling,wt=_t.nextSibling,St=hr.nextSibling,Ct=St.firstChild,Wt=Ct.nextSibling,Gt=Wt.firstChild,yr=Gt.nextSibling,pr=yr.nextSibling,cr=St.nextSibling,Jn=cr.firstChild,Ur=Jn.nextSibling,Hr=Ur.firstChild,ei=Hr.nextSibling,Pt=ei.nextSibling,Pr=cr.nextSibling,kt=Pr.firstChild,Ar=kt.nextSibling,wr=Ar.firstChild,fr=wr.nextSibling,tn=fr.nextSibling,Yr=tn.nextSibling,rn=Pr.nextSibling,yn=rn.firstChild,Ln=yn.nextSibling,Hi=rn.nextSibling,lo=Hi.firstChild,Xa=lo.nextSibling,fi=Xa.firstChild,ca=fi.nextSibling,Bs=L.nextSibling,ua=Bs.firstChild,ja=ua.firstChild,Za=ja.nextSibling,Bl=ua.nextSibling,Vl=Bl.firstChild,Ga=Vl.nextSibling,Gc=Bl.nextSibling,br=Gc.firstChild,qc=br.nextSibling,Vs=Gc.nextSibling,Wl=Vs.firstChild,da=Wl.nextSibling,Qc=Vs.nextSibling,Ws=Qc.firstChild,qa=Ws.nextSibling;return W.$$click=()=>{f(j.ONE)},B.$$click=()=>{f(j.TWO)},Z.$$click=()=>{f(j.TWO_VERTICAL)},le.$$click=()=>{f(j.THREE)},ce.$$click=()=>{f(j.THREE_VERTICAL)},ae.$$click=()=>{f(j.THREE_MIXED)},re.$$click=()=>{f(j.THREE_MIXED_REVERSE)},ve.$$click=()=>{f(j.THREE_MIXED_BOTTOM)},pe.$$click=()=>{f(j.THREE_MIXED_TOP)},X.$$click=()=>{f(j.FOUR)},fe.$$click=()=>{f(j.FOUR_VERTICAL)},ue.$$click=()=>{f(j.FOUR_HORIZONTAL)},Fe.$$click=()=>{f(j.FOUR_MIXED)},Te.$$click=()=>{f(j.FOUR_MIXED_REVERSE)},Pe.$$click=()=>{f(j.FOUR_MIXED_TOP)},Ce.$$click=()=>{f(j.FOUR_MIXED_BOTTOM)},nt.$$click=()=>{f(j.FIVE_VERTICAL)},Ue.$$click=()=>{f(j.FIVE_HORIZONTAL)},ct.$$click=()=>{f(j.FIVE_MIXED)},ut.$$click=()=>{f(j.FIVE_MIXED_REVERSE)},gt.$$click=()=>{f(j.SIX)},jt.$$click=()=>{f(j.SIX_HORIZONTAL)},ln.$$click=()=>{f(j.SIX_VERTICAL)},mn.$$click=()=>{f(j.SIX_MIXED)},nr.$$click=()=>{f(j.SEVEN_VERTICAL)},Gr.$$click=()=>{f(j.SEVEN_HORIZONTAL)},We.$$click=()=>{f(j.EIGHT)},_t.$$click=()=>{f(j.EIGHT_VERTICAL)},wt.$$click=()=>{f(j.EIGHT_HORIZONTAL)},Gt.$$click=()=>{f(j.NINE)},yr.$$click=()=>{f(j.NINE_VERTICAL)},pr.$$click=()=>{f(j.NINE_HORIZONTAL)},Hr.$$click=()=>{f(j.TEN)},ei.$$click=()=>{f(j.TEN_VERTICAL)},Pt.$$click=()=>{f(j.TEN_HORIZONTAL)},wr.$$click=()=>{f(j.TWELVE)},fr.$$click=()=>{f(j.TWELVE_VERTICAL)},tn.$$click=()=>{f(j.TWELVE_HORIZONTAL)},Yr.$$click=()=>{f(j.TWELVE_GRID)},Ln.$$click=()=>{f(j.FOURTEEN)},fi.$$click=()=>{f(j.SIXTEEN)},ca.$$click=()=>{f(j.SIXTEEN_GRID)},R(ja,()=>I("enable_crosshair_sync",e.locale)),Za.addEventListener("change",x),R(Vl,()=>I("enable_time_sync",e.locale)),Ga.addEventListener("change",b),R(br,()=>I("enable_symbol_sync",e.locale)),qc.addEventListener("change",C),R(Wl,()=>I("enable_interval_sync",e.locale)),da.addEventListener("change",_),R(Ws,()=>I("enable_drawing_sync",e.locale)),qa.addEventListener("change",k),Ne(Oe=>{var Kc=m(j.ONE)?"active":"inactive",ti=m(j.TWO)?"active":"inactive",Ul=m(j.TWO_VERTICAL)?"active":"inactive",Hl=m(j.THREE)?"active":"inactive",Yl=m(j.THREE_VERTICAL)?"active":"inactive",Oo=m(j.THREE_MIXED)?"active":"inactive",Qa=m(j.THREE_MIXED_REVERSE)?"active":"inactive",No=m(j.THREE_MIXED_BOTTOM)?"active":"inactive",co=m(j.THREE_MIXED_TOP)?"active":"inactive",Xl=m(j.FOUR)?"active":"inactive",Jc=m(j.FOUR_VERTICAL)?"active":"inactive",Ka=m(j.FOUR_HORIZONTAL)?"active":"inactive",Us=m(j.FOUR_MIXED)?"active":"inactive",ha=m(j.FOUR_MIXED_REVERSE)?"active":"inactive",pa=m(j.FOUR_MIXED_TOP)?"active":"inactive",jl=m(j.FOUR_MIXED_BOTTOM)?"active":"inactive",fa=m(j.FIVE_VERTICAL)?"active":"inactive",qt=m(j.FIVE_HORIZONTAL)?"active":"inactive",uo=m(j.FIVE_MIXED)?"active":"inactive",Hs=m(j.FIVE_MIXED_REVERSE)?"active":"inactive",Ja=m(j.SIX)?"active":"inactive",Zl=m(j.SIX_HORIZONTAL)?"active":"inactive",Ys=m(j.SIX_VERTICAL)?"active":"inactive",Xs=m(j.SIX_MIXED)?"active":"inactive",es=m(j.SEVEN_VERTICAL)?"active":"inactive",ga=m(j.SEVEN_HORIZONTAL)?"active":"inactive",Yi=m(j.EIGHT)?"active":"inactive",Xi=m(j.EIGHT_VERTICAL)?"active":"inactive",ji=m(j.EIGHT_HORIZONTAL)?"active":"inactive",zo=m(j.NINE)?"active":"inactive",va=m(j.NINE_VERTICAL)?"active":"inactive",Zi=m(j.NINE_HORIZONTAL)?"active":"inactive",eu=m(j.TEN)?"active":"inactive",Gl=m(j.TEN_VERTICAL)?"active":"inactive",ho=m(j.TEN_HORIZONTAL)?"active":"inactive",tu=m(j.TWELVE)?"active":"inactive",ql=m(j.TWELVE_VERTICAL)?"active":"inactive",ts=m(j.TWELVE_HORIZONTAL)?"active":"inactive",Ql=m(j.TWELVE_GRID)?"active":"inactive",ru=m(j.FOURTEEN)?"active":"inactive",ir=m(j.SIXTEEN)?"active":"inactive",Jt=m(j.SIXTEEN_GRID)?"active":"inactive";return Kc!==Oe.e&&Ve(W,"class",Oe.e=Kc),ti!==Oe.t&&Ve(B,"class",Oe.t=ti),Ul!==Oe.a&&Ve(Z,"class",Oe.a=Ul),Hl!==Oe.o&&Ve(le,"class",Oe.o=Hl),Yl!==Oe.i&&Ve(ce,"class",Oe.i=Yl),Oo!==Oe.n&&Ve(ae,"class",Oe.n=Oo),Qa!==Oe.s&&Ve(re,"class",Oe.s=Qa),No!==Oe.h&&Ve(ve,"class",Oe.h=No),co!==Oe.r&&Ve(pe,"class",Oe.r=co),Xl!==Oe.d&&Ve(X,"class",Oe.d=Xl),Jc!==Oe.l&&Ve(fe,"class",Oe.l=Jc),Ka!==Oe.u&&Ve(ue,"class",Oe.u=Ka),Us!==Oe.c&&Ve(Fe,"class",Oe.c=Us),ha!==Oe.w&&Ve(Te,"class",Oe.w=ha),pa!==Oe.m&&Ve(Pe,"class",Oe.m=pa),jl!==Oe.f&&Ve(Ce,"class",Oe.f=jl),fa!==Oe.y&&Ve(nt,"class",Oe.y=fa),qt!==Oe.g&&Ve(Ue,"class",Oe.g=qt),uo!==Oe.p&&Ve(ct,"class",Oe.p=uo),Hs!==Oe.b&&Ve(ut,"class",Oe.b=Hs),Ja!==Oe.T&&Ve(gt,"class",Oe.T=Ja),Zl!==Oe.A&&Ve(jt,"class",Oe.A=Zl),Ys!==Oe.O&&Ve(ln,"class",Oe.O=Ys),Xs!==Oe.I&&Ve(mn,"class",Oe.I=Xs),es!==Oe.S&&Ve(nr,"class",Oe.S=es),ga!==Oe.W&&Ve(Gr,"class",Oe.W=ga),Yi!==Oe.C&&Ve(We,"class",Oe.C=Yi),Xi!==Oe.B&&Ve(_t,"class",Oe.B=Xi),ji!==Oe.v&&Ve(wt,"class",Oe.v=ji),zo!==Oe.k&&Ve(Gt,"class",Oe.k=zo),va!==Oe.x&&Ve(yr,"class",Oe.x=va),Zi!==Oe.j&&Ve(pr,"class",Oe.j=Zi),eu!==Oe.q&&Ve(Hr,"class",Oe.q=eu),Gl!==Oe.z&&Ve(ei,"class",Oe.z=Gl),ho!==Oe.P&&Ve(Pt,"class",Oe.P=ho),tu!==Oe.H&&Ve(wr,"class",Oe.H=tu),ql!==Oe.F&&Ve(fr,"class",Oe.F=ql),ts!==Oe.M&&Ve(tn,"class",Oe.M=ts),Ql!==Oe.D&&Ve(Yr,"class",Oe.D=Ql),ru!==Oe.R&&Ve(Ln,"class",Oe.R=ru),ir!==Oe.E&&Ve(fi,"class",Oe.E=ir),Jt!==Oe.L&&Ve(ca,"class",Oe.L=Jt),Oe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0,x:void 0,j:void 0,q:void 0,z:void 0,P:void 0,H:void 0,F:void 0,M:void 0,D:void 0,R:void 0,E:void 0,L:void 0}),Ne(()=>Za.checked=t()),Ne(()=>Ga.checked=n()),Ne(()=>qc.checked=o()),Ne(()=>da.checked=u()),Ne(()=>qa.checked=h()),M}})};Xt(["click"]);const dD=e=>G(uD,{get multiChart(){return e.multiChart},get maxMultiChart(){return e.maxMultiCharts},get onConfirm(){return e.onMultiChartClick},onClose:()=>{e.setMultiChartModalVisible(!1)},get locale(){return e.locale}});var hD=typeof Ps=="object"&&Ps&&Ps.Object===Object&&Ps,pD=hD,fD=pD,gD=typeof self=="object"&&self&&self.Object===Object&&self,vD=fD||gD||Function("return this")(),_v=vD,mD=_v,yD=mD.Symbol,Sv=yD,oy=Sv,I5=Object.prototype,bD=I5.hasOwnProperty,xD=I5.toString,b0=oy?oy.toStringTag:void 0;function wD(e){var t=bD.call(e,b0),r=e[b0];try{e[b0]=void 0;var n=!0}catch{}var i=xD.call(e);return n&&(t?e[b0]=r:delete e[b0]),i}var CD=wD,_D=Object.prototype,SD=_D.toString;function kD(e){return SD.call(e)}var MD=kD,ay=Sv,TD=CD,ED=MD,ID="[object Null]",LD="[object Undefined]",sy=ay?ay.toStringTag:void 0;function PD(e){return e==null?e===void 0?LD:ID:sy&&sy in Object(e)?TD(e):ED(e)}var L5=PD;function AD(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var kv=AD,DD=L5,FD=kv,RD="[object AsyncFunction]",OD="[object Function]",ND="[object GeneratorFunction]",zD="[object Proxy]";function $D(e){if(!FD(e))return!1;var t=DD(e);return t==OD||t==ND||t==RD||t==zD}var BD=$D,VD=_v,WD=VD["__core-js_shared__"],UD=WD,bg=UD,ly=(function(){var e=/[^.]+$/.exec(bg&&bg.keys&&bg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function HD(e){return!!ly&&ly in e}var YD=HD,XD=Function.prototype,jD=XD.toString;function ZD(e){if(e!=null){try{return jD.call(e)}catch{}try{return e+""}catch{}}return""}var GD=ZD,qD=BD,QD=YD,KD=kv,JD=GD,eF=/[\\^$.*+?()[\]{}|]/g,tF=/^\[object .+?Constructor\]$/,rF=Function.prototype,nF=Object.prototype,iF=rF.toString,oF=nF.hasOwnProperty,aF=RegExp("^"+iF.call(oF).replace(eF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sF(e){if(!KD(e)||QD(e))return!1;var t=qD(e)?aF:tF;return t.test(JD(e))}var lF=sF;function cF(e,t){return e==null?void 0:e[t]}var uF=cF,dF=lF,hF=uF;function pF(e,t){var r=hF(e,t);return dF(r)?r:void 0}var Mv=pF,fF=Mv,gF=(function(){try{var e=fF(Object,"defineProperty");return e({},"",{}),e}catch{}})(),vF=gF,cy=vF;function mF(e,t,r){t=="__proto__"&&cy?cy(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var yF=mF;function bF(e,t){return e===t||e!==e&&t!==t}var P5=bF,xF=yF,wF=P5,CF=Object.prototype,_F=CF.hasOwnProperty;function SF(e,t,r){var n=e[t];(!(_F.call(e,t)&&wF(n,r))||r===void 0&&!(t in e))&&xF(e,t,r)}var kF=SF,MF=Array.isArray,Tv=MF;function TF(e){return e!=null&&typeof e=="object"}var EF=TF,IF=L5,LF=EF,PF="[object Symbol]";function AF(e){return typeof e=="symbol"||LF(e)&&IF(e)==PF}var Ev=AF,DF=Tv,FF=Ev,RF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,OF=/^\w*$/;function NF(e,t){if(DF(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||FF(e)?!0:OF.test(e)||!RF.test(e)||t!=null&&e in Object(t)}var zF=NF,$F=Mv,BF=$F(Object,"create"),Kp=BF,uy=Kp;function VF(){this.__data__=uy?uy(null):{},this.size=0}var WF=VF;function UF(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var HF=UF,YF=Kp,XF="__lodash_hash_undefined__",jF=Object.prototype,ZF=jF.hasOwnProperty;function GF(e){var t=this.__data__;if(YF){var r=t[e];return r===XF?void 0:r}return ZF.call(t,e)?t[e]:void 0}var qF=GF,QF=Kp,KF=Object.prototype,JF=KF.hasOwnProperty;function eR(e){var t=this.__data__;return QF?t[e]!==void 0:JF.call(t,e)}var tR=eR,rR=Kp,nR="__lodash_hash_undefined__";function iR(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rR&&t===void 0?nR:t,this}var oR=iR,aR=WF,sR=HF,lR=qF,cR=tR,uR=oR;function Kd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Kd.prototype.clear=aR;Kd.prototype.delete=sR;Kd.prototype.get=lR;Kd.prototype.has=cR;Kd.prototype.set=uR;var dR=Kd;function hR(){this.__data__=[],this.size=0}var pR=hR,fR=P5;function gR(e,t){for(var r=e.length;r--;)if(fR(e[r][0],t))return r;return-1}var Jp=gR,vR=Jp,mR=Array.prototype,yR=mR.splice;function bR(e){var t=this.__data__,r=vR(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():yR.call(t,r,1),--this.size,!0}var xR=bR,wR=Jp;function CR(e){var t=this.__data__,r=wR(t,e);return r<0?void 0:t[r][1]}var _R=CR,SR=Jp;function kR(e){return SR(this.__data__,e)>-1}var MR=kR,TR=Jp;function ER(e,t){var r=this.__data__,n=TR(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var IR=ER,LR=pR,PR=xR,AR=_R,DR=MR,FR=IR;function Jd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jd.prototype.clear=LR;Jd.prototype.delete=PR;Jd.prototype.get=AR;Jd.prototype.has=DR;Jd.prototype.set=FR;var RR=Jd,OR=Mv,NR=_v,zR=OR(NR,"Map"),$R=zR,dy=dR,BR=RR,VR=$R;function WR(){this.size=0,this.__data__={hash:new dy,map:new(VR||BR),string:new dy}}var UR=WR;function HR(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var YR=HR,XR=YR;function jR(e,t){var r=e.__data__;return XR(t)?r[typeof t=="string"?"string":"hash"]:r.map}var ef=jR,ZR=ef;function GR(e){var t=ZR(this,e).delete(e);return this.size-=t?1:0,t}var qR=GR,QR=ef;function KR(e){return QR(this,e).get(e)}var JR=KR,eO=ef;function tO(e){return eO(this,e).has(e)}var rO=tO,nO=ef;function iO(e,t){var r=nO(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var oO=iO,aO=UR,sO=qR,lO=JR,cO=rO,uO=oO;function eh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}eh.prototype.clear=aO;eh.prototype.delete=sO;eh.prototype.get=lO;eh.prototype.has=cO;eh.prototype.set=uO;var dO=eh,A5=dO,hO="Expected a function";function Iv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(hO);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Iv.Cache||A5),r}Iv.Cache=A5;var pO=Iv,fO=pO,gO=500;function vO(e){var t=fO(e,function(n){return r.size===gO&&r.clear(),n}),r=t.cache;return t}var mO=vO,yO=mO,bO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xO=/\\(\\)?/g,wO=yO(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(bO,function(r,n,i,o){t.push(i?o.replace(xO,"$1"):n||r)}),t}),CO=wO;function _O(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var SO=_O,hy=Sv,kO=SO,MO=Tv,TO=Ev,py=hy?hy.prototype:void 0,fy=py?py.toString:void 0;function D5(e){if(typeof e=="string")return e;if(MO(e))return kO(e,D5)+"";if(TO(e))return fy?fy.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var EO=D5,IO=EO;function LO(e){return e==null?"":IO(e)}var PO=LO,AO=Tv,DO=zF,FO=CO,RO=PO;function OO(e,t){return AO(e)?e:DO(e,t)?[e]:FO(RO(e))}var F5=OO,NO=9007199254740991,zO=/^(?:0|[1-9]\d*)$/;function $O(e,t){var r=typeof e;return t=t??NO,!!t&&(r=="number"||r!="symbol"&&zO.test(e))&&e>-1&&e%1==0&&e<t}var BO=$O,VO=Ev;function WO(e){if(typeof e=="string"||VO(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var R5=WO,UO=kF,HO=F5,YO=BO,gy=kv,XO=R5;function jO(e,t,r,n){if(!gy(e))return e;t=HO(t,e);for(var i=-1,o=t.length,s=o-1,u=e;u!=null&&++i<o;){var d=XO(t[i]),h=r;if(d==="__proto__"||d==="constructor"||d==="prototype")return e;if(i!=s){var p=u[d];h=n?n(p,d,u):void 0,h===void 0&&(h=gy(p)?p:YO(t[i+1])?[]:{})}UO(u,d,h),u=u[d]}return e}var ZO=jO,GO=ZO;function qO(e,t,r){return e==null?e:GO(e,t,r)}var QO=qO;const M0=y2(QO);var KO=F5,JO=R5;function eN(e,t){t=KO(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[JO(t[r++])];return r&&r==n?e:void 0}var tN=eN,rN=tN;function nN(e,t,r){var n=e==null?void 0:rN(e,t);return n===void 0?r:n}var iN=nN;const oN=y2(iN),$s=e=>{const t=[{key:"solid",text:I("solid",e)},{key:"dashed",text:I("dashed",e)}],r=[{key:"true",text:!0},{key:"false",text:!1}],n=[{key:1,text:1},{key:2,text:2},{key:3,text:3},{key:4,text:4},{key:5,text:5},{key:6,text:6},{key:7,text:7},{key:8,text:8},{key:9,text:9},{key:10,text:10}],i=[{key:"fill",text:I("fill",e)},{key:"stroke",text:I("stroke",e)},{key:"stroke_fill",text:I("stroke_fill",e)}],o=[{key:"none",text:I("none",e)},{key:"always",text:I("always",e)},{key:"follow_cross",text:I("follow_cross",e)}],s=[{key:10,text:10},{key:11,text:11},{key:12,text:12},{key:14,text:14},{key:16,text:16},{key:18,text:18},{key:20,text:20},{key:22,text:22},{key:24,text:24}],u=[{key:"normal",text:I("Normal",e)}],d=[{key:"Helvetica Neue",text:I("Helvetica Neue",e)}],h=[{key:"current_open",text:I("current_open",e)},{key:"previous_close",text:I("previous_close",e)}];return{solid_dashed:t,size:n,fill_stroke:i,font_family:d,font_size:s,font_weight:u,none_always_followCross:o,true_false:r,compare_rule:h,text_offset:[{key:1,text:1},{key:2,text:2},{key:3,text:3},{key:4,text:4},{key:5,text:5},{key:6,text:6},{key:7,text:7},{key:8,text:8},{key:9,text:9},{key:10,text:10}],dashed_values:[{key:[2,2],text:"[2, 2]"},{key:[4,4],text:"[4, 4]"},{key:[6,6],text:"[6, 6]"},{key:[8,8],text:"[8, 8]"},{key:[2,4],text:"[2, 4]"},{key:[4,2],text:"[4, 2]"}]}},O5=e=>{const{font_family:t,font_size:r,font_weight:n,size:i,solid_dashed:o,fill_stroke:s,none_always_followCross:u,compare_rule:d,text_offset:h,dashed_values:p}=$s(e);return[{key:"candle.type",text:I("candle_type",e),component:"select",dataSource:[{key:"heikin_ashi",text:I("heikin_ashi",e)},{key:"candle_solid",text:I("candle_solid",e)},{key:"candle_stroke",text:I("candle_stroke",e)},{key:"candle_up_stroke",text:I("candle_up_stroke",e)},{key:"candle_down_stroke",text:I("candle_down_stroke",e)},{key:"ohlc",text:I("ohlc",e)},{key:"area",text:I("area",e)},{key:"renko",text:I("renko",e)}]},{key:"candle.bar.compareRule",text:I("candle.bar.compareRule",e),component:"select",dataSource:d},{key:"candle.bar.upColor",text:I("candle.bar.upColor",e),component:"color"},{key:"candle.bar.downColor",text:I("candle.bar.downColor",e),component:"color"},{key:"candle.bar.noChangeColor",text:I("candle.bar.noChangeColor",e),component:"color"},{key:"candle.bar.upBorderColor",text:I("candle.bar.upBorderColor",e),component:"color"},{key:"candle.bar.downBorderColor",text:I("candle.bar.downBorderColor",e),component:"color"},{key:"candle.bar.noChangeBorderColor",text:I("candle.bar.noChangeBorderColor",e),component:"color"},{key:"candle.bar.upWickColor",text:I("candle.bar.upWickColor",e),component:"color"},{key:"candle.bar.downWickColor",text:I("candle.bar.downWickColor",e),component:"color"},{key:"candle.bar.noChangeWickColor",text:I("candle.bar.noChangeWickColor",e),component:"color"},{key:"candle.area.lineSize",text:I("candle.area.lineSize",e),component:"select",dataSource:i},{key:"candle.area.lineColor",text:I("candle.area.lineColor",e),component:"color"},{key:"candle.area.value",text:I("candle.area.value",e),component:"select",dataSource:[{key:"close",text:I("close",e)},{key:"open",text:I("open",e)},{key:"high",text:I("high",e)},{key:"low",text:I("low",e)}]},{key:"candle.area.smooth",text:I("candle.area.smooth",e),component:"switch"},{key:"candle.area.point.show",text:I("candle.area.point.show",e),component:"switch"},{key:"candle.area.point.color",text:I("candle.area.point.color",e),component:"color"},{key:"candle.area.point.radius",text:I("candle.area.point.radius",e),component:"select",dataSource:i},{key:"candle.area.point.rippleColor",text:I("candle.area.point.rippleColor",e),component:"color"},{key:"candle.area.point.rippleRadius",text:I("candle.area.point.rippleRadius",e),component:"select",dataSource:i},{key:"candle.area.point.animation",text:I("candle.area.point.animation",e),component:"switch"},{key:"candle.renko.brick.size",text:I("candle.renko.brick.size",e),component:"select",dataSource:[{key:1,text:1},{key:2,text:2},{key:3,text:3},{key:4,text:4},{key:5,text:5},{key:10,text:10},{key:15,text:15},{key:20,text:20},{key:25,text:25},{key:50,text:50}]},{key:"candle.priceMark.show",text:I("candle.priceMark.show",e),component:"switch"},{key:"candle.priceMark.high.show",text:I("high_price_show",e),component:"switch"},{key:"candle.priceMark.high.color",text:I("candle.priceMark.high.color",e),component:"color"},{key:"candle.priceMark.high.textOffset",text:I("candle.priceMark.high.textOffset",e),component:"select",dataSource:h},{key:"candle.priceMark.high.textSize",text:I("candle.priceMark.high.textSize",e),component:"select",dataSource:r},{key:"candle.priceMark.high.textFamily",text:I("candle.priceMark.high.textFamily",e),component:"select",dataSource:t},{key:"candle.priceMark.high.textWeight",text:I("candle.priceMark.high.textWeight",e),component:"select",dataSource:n},{key:"candle.priceMark.low.show",text:I("low_price_show",e),component:"switch"},{key:"candle.priceMark.low.color",text:I("candle.priceMark.low.color",e),component:"color"},{key:"candle.priceMark.low.textOffset",text:I("candle.priceMark.low.textOffset",e),component:"select",dataSource:h},{key:"candle.priceMark.low.textSize",text:I("candle.priceMark.low.textSize",e),component:"select",dataSource:r},{key:"candle.priceMark.low.textFamily",text:I("candle.priceMark.low.textFamily",e),component:"select",dataSource:t},{key:"candle.priceMark.low.textWeight",text:I("candle.priceMark.low.textWeight",e),component:"select",dataSource:n},{key:"candle.priceMark.last.show",text:I("candle.priceMark.last.show",e),component:"switch"},{key:"candle.priceMark.last.compareRule",text:I("candle.priceMark.last.compareRule",e),component:"select",dataSource:d},{key:"candle.priceMark.last.upColor",text:I("candle.priceMark.last.upColor",e),component:"color"},{key:"candle.priceMark.last.downColor",text:I("candle.priceMark.last.downColor",e),component:"color"},{key:"candle.priceMark.last.noChangeColor",text:I("candle.priceMark.last.noChangeColor",e),component:"color"},{key:"candle.priceMark.last.line.show",text:I("candle.priceMark.last.line.show",e),component:"switch"},{key:"candle.priceMark.last.line.style",text:I("candle.priceMark.last.line.style",e),component:"select",dataSource:o},{key:"candle.priceMark.last.line.size",text:I("candle.priceMark.last.line.size",e),component:"select",dataSource:i},{key:"candle.priceMark.last.line.dashedValue",text:I("candle.priceMark.last.line.dashedValue",e),component:"select",dataSource:p},{key:"candle.priceMark.last.text.show",text:I("candle.priceMark.last.text.show",e),component:"switch"},{key:"candle.priceMark.last.text.style",text:I("candle.priceMark.last.text.style",e),component:"select",dataSource:s},{key:"candle.priceMark.last.text.size",text:I("candle.priceMark.last.text.size",e),component:"select",dataSource:r},{key:"candle.priceMark.last.text.color",text:I("candle.priceMark.last.text.color",e),component:"color"},{key:"candle.tooltip.showRule",text:I("candle.tooltip.showRule",e),component:"select",dataSource:u},{key:"candle.tooltip.showType",text:I("candle.tooltip.showType",e),component:"select",dataSource:[{key:"rect",text:I("Rect",e)},{key:"standard",text:I("Standard",e)}]},{key:"candle.tooltip.rect.position",text:I("candle.tooltip.rect.position",e),component:"select",dataSource:[{key:"fixed",text:I("Fixed",e)},{key:"pointer",text:I("Pointer",e)}]},{key:"candle.tooltip.rect.color",text:I("candle.tooltip.rect.color",e),component:"color"},{key:"candle.tooltip.rect.borderColor",text:I("candle.tooltip.rect.borderColor",e),component:"color"},{key:"candle.tooltip.text.size",text:I("candle.tooltip.text.size",e),component:"select",dataSource:r},{key:"candle.tooltip.text.weight",text:I("candle.tooltip.text.weight",e),component:"select",dataSource:n},{key:"candle.tooltip.text.color",text:I("candle.tooltip.text.color",e),component:"color"}]},aN=e=>{const{fill_stroke:t,font_size:r,font_weight:n,none_always_followCross:i,solid_dashed:o,size:s,dashed_values:u}=$s(e);return[{key:"indicator.lastValueMark.show",text:I("indicator.lastValueMark.show",e),component:"switch"},{key:"indicator.lastValueMark.text.show",text:I("indicator.lastValueMark.text.show",e),component:"switch"},{key:"indicator.lastValueMark.text.style",text:I("indicator.lastValueMark.text.style",e),component:"select",dataSource:t},{key:"indicator.lastValueMark.text.size",text:I("indicator.lastValueMark.text.size",e),component:"select",dataSource:r},{key:"indicator.lastValueMark.text.weight",text:I("indicator.lastValueMark.text.weight",e),component:"select",dataSource:n},{key:"indicator.lastValueMark.text.color",text:I("indicator.lastValueMark.text.color",e),component:"color"},{key:"indicator.lastValueMark.text.borderStyle",text:I("indicator.lastValueMark.text.borderStyle",e),component:"select",dataSource:o},{key:"indicator.lastValueMark.text.borderColor",text:I("indicator.lastValueMark.text.borderColor",e),component:"color"},{key:"indicator.lastValueMark.text.borderSize",text:I("indicator.lastValueMark.text.borderSize",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.borderDashedValue",text:I("indicator.lastValueMark.text.borderDashedValue",e),component:"select",dataSource:u},{key:"indicator.lastValueMark.text.paddingLeft",text:I("indicator.lastValueMark.text.paddingLeft",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.paddingTop",text:I("indicator.lastValueMark.text.paddingTop",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.paddingRight",text:I("indicator.lastValueMark.text.paddingRight",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.paddingBottom",text:I("indicator.lastValueMark.text.paddingBottom",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.borderRadius",text:I("indicator.lastValueMark.text.borderRadius",e),component:"select",dataSource:s},{key:"indicator.bars[0].style",text:I("indicator.bars.style",e),component:"select",dataSource:t},{key:"indicator.bars[0].borderStyle",text:I("indicator.bars.borderStyle",e),component:"select",dataSource:o},{key:"indicator.bars[0].borderSize",text:I("indicator.bars.borderSize",e),component:"select",dataSource:s},{key:"indicator.bars[0].borderColor",text:I("indicator.bars.borderColor",e),component:"color"},{key:"indicator.bars[0].borderDashedValue",text:I("indicator.bars.borderDashedValue",e),component:"select",dataSource:u},{key:"indicator.ohlc.upColor",text:I("indicator.ohlc.upColor",e),component:"color"},{key:"indicator.ohlc.downColor",text:I("indicator.ohlc.downColor",e),component:"color"},{key:"indicator.ohlc.noChangeColor",text:I("indicator.ohlc.noChangeColor",e),component:"color"},{key:"indicator.lines[0].style",text:I("indicator.lines.style",e),component:"select",dataSource:o},{key:"indicator.lines[0].size",text:I("indicator.lines.size",e),component:"select",dataSource:s},{key:"indicator.lines[0].color",text:I("indicator.lines.color",e),component:"color"},{key:"indicator.lines[0].dashedValue",text:I("indicator.lines.dashedValue",e),component:"select",dataSource:u},{key:"indicator.tooltip.showRule",text:I("indicator.tooltip.showRule",e),component:"select",dataSource:i},{key:"indicator.tooltip.showType",text:I("indicator.tooltip.showType",e),component:"select",dataSource:[{key:"standard",text:I("Standard",e)},{key:"rect",text:I("Rect",e)}]},{key:"indicator.tooltip.title.show",text:I("indicator.tooltip.title.show",e),component:"switch"},{key:"indicator.tooltip.title.showName",text:I("indicator.tooltip.title.showName",e),component:"switch"},{key:"indicator.tooltip.title.showParams",text:I("indicator.tooltip.title.showParams",e),component:"switch"},{key:"indicator.tooltip.title.size",text:I("indicator.tooltip.title.size",e),component:"select",dataSource:r},{key:"indicator.tooltip.title.weight",text:I("indicator.tooltip.title.weight",e),component:"select",dataSource:n},{key:"indicator.tooltip.title.color",text:I("indicator.tooltip.title.color",e),component:"color"},{key:"indicator.tooltip.title.marginLeft",text:I("indicator.tooltip.title.marginLeft",e),component:"select",dataSource:s},{key:"indicator.tooltip.title.marginTop",text:I("indicator.tooltip.title.marginTop",e),component:"select",dataSource:s},{key:"indicator.tooltip.title.marginRight",text:I("indicator.tooltip.title.marginRight",e),component:"select",dataSource:s},{key:"indicator.tooltip.title.marginBottom",text:I("indicator.tooltip.title.marginBottom",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetTop",text:I("indicator.tooltip.offsetTop",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetLeft",text:I("indicator.tooltip.offsetLeft",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetRight",text:I("indicator.tooltip.offsetRight",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetBottom",text:I("indicator.tooltip.offsetBottom",e),component:"select",dataSource:s}]},sN=e=>{const{font_size:t,size:r,font_weight:n,font_family:i}=$s(e);return[{key:"xAxis.show",text:I("xAxis.show",e),component:"switch"},{key:"xAxis.size",text:I("xAxis.size",e),component:"select",dataSource:[{key:"auto",text:I("auto",e)},...r]},{key:"xAxis.axisLine.show",text:I("xAxis.axisLine.show",e),component:"switch"},{key:"xAxis.axisLine.color",text:I("xAxis.axisLine.color",e),component:"color"},{key:"xAxis.axisLine.size",text:I("xAxis.axisLine.size",e),component:"select",dataSource:r},{key:"xAxis.tickText.show",text:I("xAxis.tickText.show",e),component:"switch"},{key:"xAxis.tickText.size",text:I("xAxis.tickText.size",e),component:"select",dataSource:t},{key:"xAxis.tickText.weight",text:I("xAxis.tickText.weight",e),component:"select",dataSource:n},{key:"xAxis.tickText.family",text:I("xAxis.tickText.family",e),component:"select",dataSource:i},{key:"xAxis.tickText.color",text:I("xAxis.tickText.color",e),component:"color"},{key:"xAxis.tickText.marginStart",text:I("xAxis.tickText.marginStart",e),component:"select",dataSource:r},{key:"xAxis.tickText.marginEnd",text:I("xAxis.tickText.marginEnd",e),component:"select",dataSource:r},{key:"xAxis.tickLine.show",text:I("xAxis.tickLine.show",e),component:"switch"},{key:"xAxis.tickLine.size",text:I("xAxis.tickLine.size",e),component:"select",dataSource:r},{key:"xAxis.tickLine.length",text:I("xAxis.tickLine.length",e),component:"select",dataSource:r},{key:"xAxis.tickLine.color",text:I("xAxis.tickLine.color",e),component:"color"}]},lN=e=>{const{size:t,font_weight:r,font_size:n,font_family:i}=$s(e);return[{key:"yAxis.show",text:I("yAxis.show",e),component:"switch"},{key:"yAxis.size",text:I("yAxis.size",e),component:"select",dataSource:[{key:"auto",text:I("auto",e)},...t]},{key:"yAxis.axisLine.show",text:I("yAxis.axisLine.show",e),component:"switch"},{key:"yAxis.axisLine.size",text:I("yAxis.axisLine.size",e),component:"select",dataSource:t},{key:"yAxis.axisLine.color",text:I("yAxis.axisLine.color",e),component:"color"},{key:"yAxis.tickText.show",text:I("yAxis.tickText.show",e),component:"switch"},{key:"yAxis.tickText.color",text:I("yAxis.tickText.color",e),component:"color"},{key:"yAxis.tickText.size",text:I("yAxis.tickText.size",e),component:"select",dataSource:n},{key:"yAxis.tickText.weight",text:I("yAxis.tickText.weight",e),component:"select",dataSource:r},{key:"yAxis.tickText.family",text:I("yAxis.tickText.family",e),component:"select",dataSource:i},{key:"yAxis.tickText.marginStart",text:I("yAxis.tickText.marginStart",e),component:"select",dataSource:t},{key:"yAxis.tickText.marginEnd",text:I("yAxis.tickText.marginEnd",e),component:"select",dataSource:t},{key:"yAxis.tickLine.show",text:I("yAxis.tickLine.show",e),component:"switch"},{key:"yAxis.tickLine.color",text:I("yAxis.tickLine.color",e),component:"color"},{key:"yAxis.tickLine.size",text:I("yAxis.tickLine.size",e),component:"select",dataSource:t},{key:"yAxis.tickLine.length",text:I("yAxis.tickLine.length",e),component:"select",dataSource:t}]},cN=e=>{const{size:t,solid_dashed:r,dashed_values:n}=$s(e);return[{key:"grid.show",text:I("grid_show",e),component:"switch"},{key:"grid.horizontal.show",text:I("grid_horizontal_show",e),component:"switch"},{key:"grid.horizontal.size",text:I("grid_horizontal_size",e),component:"select",dataSource:t},{key:"grid.horizontal.color",text:I("grid_horizontal_color",e),component:"color"},{key:"grid.horizontal.style",text:I("grid_horizontal_style",e),component:"select",dataSource:r},{key:"grid.horizontal.dashedValue",text:I("grid_horizontal_dashedValue",e),component:"select",dataSource:n},{key:"grid.vertical.show",text:I("grid_vertical_show",e),component:"switch"},{key:"grid.vertical.size",text:I("grid_vertical_size",e),component:"select",dataSource:t},{key:"grid.vertical.color",text:I("grid_vertical_color",e),component:"color"},{key:"grid.vertical.style",text:I("grid_vertical_style",e),component:"select",dataSource:r},{key:"grid.vertical.dashedValue",text:I("grid_vertical_dashedValue",e),component:"select",dataSource:n}]},uN=e=>{const{solid_dashed:t,fill_stroke:r,size:n,font_size:i,font_weight:o,dashed_values:s}=$s(e);return[{key:"crosshair.show",text:I("crosshair.show",e),component:"switch"},{key:"crosshair.horizontal.show",text:I("crosshair.horizontal.show",e),component:"switch"},{key:"crosshair.horizontal.line.show",text:I("crosshair.horizontal.line.show",e),component:"switch"},{key:"crosshair.horizontal.line.style",text:I("crosshair.horizontal.line.style",e),component:"select",dataSource:t},{key:"crosshair.horizontal.line.size",text:I("crosshair.horizontal.line.size",e),component:"select",dataSource:n},{key:"crosshair.horizontal.line.color",text:I("crosshair.horizontal.line.color",e),component:"color"},{key:"crosshair.horizontal.line.dashedValue",text:I("crosshair.horizontal.line.dashedValue",e),component:"select",dataSource:s},{key:"crosshair.horizontal.text.show",text:I("crosshair.horizontal.text.show",e),component:"switch"},{key:"crosshair.horizontal.text.style",text:I("crosshair.horizontal.text.style",e),component:"select",dataSource:r},{key:"crosshair.horizontal.text.size",text:I("crosshair.horizontal.text.size",e),component:"select",dataSource:i},{key:"crosshair.horizontal.text.weight",text:I("crosshair.horizontal.text.weight",e),component:"select",dataSource:o},{key:"crosshair.horizontal.text.color",text:I("crosshair.horizontal.text.color",e),component:"color"},{key:"crosshair.horizontal.text.backgroundColor",text:I("crosshair.horizontal.text.backgroundColor",e),component:"color"},{key:"crosshair.vertical.show",text:I("crosshair.vertical.show",e),component:"switch"},{key:"crosshair.vertical.line.show",text:I("crosshair.vertical.line.show",e),component:"switch"},{key:"crosshair.vertical.line.style",text:I("crosshair.vertical.line.style",e),component:"select",dataSource:t},{key:"crosshair.vertical.line.size",text:I("crosshair.vertical.line.size",e),component:"select",dataSource:n},{key:"crosshair.vertical.line.color",text:I("crosshair.vertical.line.color",e),component:"color"},{key:"crosshair.vertical.line.dashedValue",text:I("crosshair.vertical.line.dashedValue",e),component:"select",dataSource:s},{key:"crosshair.vertical.text.show",text:I("crosshair.vertical.text.show",e),component:"switch"},{key:"crosshair.vertical.text.style",text:I("crosshair.vertical.text.style",e),component:"select",dataSource:r},{key:"crosshair.vertical.text.size",text:I("crosshair.vertical.text.size",e),component:"select",dataSource:i},{key:"crosshair.vertical.text.weight",text:I("crosshair.vertical.text.weight",e),component:"select",dataSource:o},{key:"crosshair.vertical.text.color",text:I("crosshair.vertical.text.color",e),component:"color"},{key:"crosshair.vertical.text.backgroundColor",text:I("crosshair.vertical.text.backgroundColor",e),component:"color"}]},N5=e=>{const{solid_dashed:t,fill_stroke:r,size:n,font_size:i,font_weight:o,font_family:s,dashed_values:u}=$s(e);return[{key:"overlay.point.color",text:I("overlay.point.color",e),component:"color"},{key:"overlay.point.borderColor",text:I("overlay.point.borderColor",e),component:"color"},{key:"overlay.point.borderSize",text:I("overlay.point.borderSize",e),component:"select",dataSource:n},{key:"overlay.point.activeColor",text:I("overlay.point.activeColor",e),component:"color"},{key:"overlay.point.activeBorderColor",text:I("overlay.point.activeBorderColor",e),component:"color"},{key:"overlay.point.activeBorderSize",text:I("overlay.point.activeBorderSize",e),component:"select",dataSource:n},{key:"overlay.point.activeRadius",text:I("overlay.point.activeRadius",e),component:"select",dataSource:n},{key:"overlay.point.radius",text:I("overlay.point.radius",e),component:"select",dataSource:n},{key:"overlay.line.style",text:I("overlay.line.style",e),component:"select",dataSource:t},{key:"overlay.line.smooth",text:I("overlay.line.smooth",e),component:"switch"},{key:"overlay.line.size",text:I("overlay.line.size",e),component:"select",dataSource:n},{key:"overlay.line.color",text:I("overlay.line.color",e),component:"color"},{key:"overlay.line.dashedValue",text:I("overlay.line.dashedValue",e),component:"select",dataSource:u},{key:"overlay.rect.style",text:I("overlay.rect.style",e),component:"select",dataSource:r},{key:"overlay.rect.color",text:I("overlay.rect.color",e),component:"color"},{key:"overlay.rect.borderColor",text:I("overlay.rect.borderColor",e),component:"color"},{key:"overlay.rect.borderSize",text:I("overlay.rect.borderSize",e),component:"select",dataSource:n},{key:"overlay.rect.borderRadius",text:I("overlay.rect.borderRadius",e),component:"select",dataSource:n},{key:"overlay.rect.borderStyle",text:I("overlay.rect.borderStyle",e),component:"select",dataSource:t},{key:"overlay.polygon.style",text:I("Polygon Style",e),component:"select",dataSource:r},{key:"overlay.polygon.color",text:I("overlay.polygon.color",e),component:"color"},{key:"overlay.polygon.borderColor",text:I("overlay.polygon.borderColor",e),component:"color"},{key:"overlay.polygon.borderStyle",text:I("overlay.polygon.borderStyle",e),component:"select",dataSource:t},{key:"overlay.polygon.borderSize",text:I("overlay.polygon.borderSize",e),component:"select",dataSource:n},{key:"overlay.circle.style",text:I("overlay.circle.style",e),component:"select",dataSource:r},{key:"overlay.circle.color",text:I("overlay.circle.color",e),component:"color"},{key:"overlay.circle.borderStyle",text:I("overlay.circle.borderStyle",e),component:"select",dataSource:t},{key:"overlay.circle.borderSize",text:I("overlay.circle.borderSize",e),component:"select",dataSource:n},{key:"overlay.circle.borderColor",text:I("overlay.circle.borderColor",e),component:"color"},{key:"overlay.arc.style",text:I("overlay.arc.style",e),component:"select",dataSource:t},{key:"overlay.arc.size",text:I("overlay.arc.size",e),component:"select",dataSource:n},{key:"overlay.arc.color",text:I("overlay.arc.color",e),component:"color"},{key:"overlay.text.size",text:I("overlay.text.size",e),component:"select",dataSource:i},{key:"overlay.text.weight",text:I("overlay.text.weight",e),component:"select",dataSource:o},{key:"overlay.text.color",text:I("overlay.text.color",e),component:"color"},{key:"overlay.text.style",text:I("overlay.text.style",e),component:"select",dataSource:r},{key:"overlay.text.size",text:I("overlay.text.size",e),component:"select",dataSource:i},{key:"overlay.text.family",text:I("overlay.text.family",e),component:"select",dataSource:s},{key:"overlay.text.weight",text:I("overlay.text.weight",e),component:"select",dataSource:o},{key:"overlay.text.color",text:I("overlay.text.color",e),component:"color"},{key:"overlay.text.backgroundColor",text:I("overlay.text.backgroundColor",e),component:"color"},{key:"overlay.text.borderColor",text:I("overlay.text.borderColor",e),component:"color"},{key:"overlay.text.borderSize",text:I("overlay.text.borderSize",e),component:"select",dataSource:n},{key:"overlay.text.borderStyle",text:I("overlay.text.borderStyle",e),component:"select",dataSource:t},{key:"overlay.text.borderDashedValue",text:I("overlay.text.borderDashedValue",e),component:"select",dataSource:u},{key:"overlay.text.borderRadius",text:I("overlay.text.borderRadius",e),component:"select",dataSource:n},{key:"overlay.text.paddingLeft",text:I("overlay.text.paddingLeft",e),component:"select",dataSource:n},{key:"overlay.text.paddingRight",text:I("overlay.text.paddingRight",e),component:"select",dataSource:n},{key:"overlay.text.paddingTop",text:I("overlay.text.paddingTop",e),component:"select",dataSource:n},{key:"overlay.text.paddingBottom",text:I("overlay.text.paddingBottom",e),component:"select",dataSource:n}]},dN=e=>{const t=N5(e),r={arc:[],circle:[],line:[],point:[],polygon:[],rect:[],text:[]};return t.forEach(n=>{const i=n.key.split(".")[1];r[i]||(r[i]=[]),r[i].push(n)}),r};function vy(e){const{size:t}=$s(e);return[...O5(e),...aN(e),...sN(e),...lN(e),...cN(e),...uN(e),...N5(e),{key:"separator.size",text:I("separator.size",e),component:"select",dataSource:t},{key:"separator.color",text:I("separator.color",e),component:"color"},{key:"separator.fill",text:I("separator.fill",e),component:"switch"},{key:"separator.activeBackgroundColor",text:I("separator.activeBackgroundColor",e),component:"color"}]}const my=e=>($s(e),[{key:"axis.name",text:I("pane.axis.name",e),component:"select",dataSource:[{key:"normal",text:I("normal",e)},{key:"percentage",text:I("percentage",e)},{key:"logarithmic",text:I("logarithmic",e)}]},{key:"axis.position",text:I("pane.axis.position",e),component:"select",dataSource:[{key:"right",text:I("right",e)},{key:"left",text:I("left",e)}]},{key:"axis.inside",text:I("pane.axis.inside",e),component:"switch"},{key:"axis.reverse",text:I("pane.axis.reverse",e),component:"switch"},{key:"axis.scrollZoomEnabled",text:I("pane.axis.scrollZoomEnabled",e),component:"switch"},{key:"axis.gap.top",text:I("pane.axis.gap.top",e),component:"number",min:0,max:1,step:.1},{key:"axis.gap.bottom",text:I("pane.axis.gap.bottom",e),component:"number",min:0,max:1,step:.1},{key:"height",text:I("pane.height",e),component:"number",min:50,max:1e3,step:10},{key:"minHeight",text:I("pane.minHeight",e),component:"number",min:30,max:500,step:10},{key:"dragEnabled",text:I("pane.dragEnabled",e),component:"switch"},{key:"state",text:I("pane.state",e),component:"select",dataSource:[{key:"normal",text:I("pane.state.normal",e)},{key:"maximize",text:I("pane.state.maximize",e)},{key:"minimize",text:I("pane.state.minimize",e)}]}]);var hN=q("<div class=chartspire-ui-setting-modal-content><div><div class=sidebar-header></div></div><div>"),pN=q("<button>"),yy=q("<div class=component><span>");const fN=e=>{const[t,r]=ye(e.currentStyles),[n,i]=ye(vy(e.locale)),[o,s]=ye(my(e.locale)),u=()=>{const A=e.widget.getPaneOptions("candle_pane");return A===null?{}:Array.isArray(A)?A.length>0?A[0]:{}:A||{}},[d,h]=ye(u()),[p,f]=ye("candle"),[m,x]=ye(!1),b=()=>{window.innerWidth<=768&&x(!0)};rt(()=>(b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b))),rt(()=>{i(vy(e.locale)),s(my(e.locale)),h(u())});const C=(A,P)=>{const W={};M0(W,A.key,P);const D=gn.clone(t());M0(D,A.key,P),r(D),e.onChange(W)},_=(A,P)=>{const W={id:"candle_pane"};M0(W,A.key,P);const D=gn.clone(d());M0(D,A.key,P),h(D),e.widget.setPaneOptions(W),e.onPaneOptionsChange()},k=()=>{e.onRestoreDefault(n()),e.onClose()},M=[{text:"Candle",key:"candle"},{text:"Indicator",key:"indicator"},{text:"Grid",key:"grid"},{text:"X-axis",key:"xAxis"},{text:"Y-axis",key:"yAxis"},{text:"Separator",key:"separator"},{text:"Crosshair",key:"crosshair"},{text:"Overlay",key:"overlay"},{text:"Pane Options",key:"paneOptions"}],L=(A,P,W=!1)=>{const D=W?_:C,$=typeof P=="function"?P():P;switch(A.component){case"select":return G(jp,{style:{width:"120px"},get value(){return I($,e.locale)},get dataSource(){return A.dataSource},onSelected:z=>{const B=z.key;D(A,B)}});case"switch":{const z=$==="--"?!1:!!$;return G(HT,{open:z,onChange:()=>{D(A,!z)}})}case"color":return G(mv,{style:{width:"120px"},value:$,onChange:z=>{D(A,z)}});case"number":return G(Wa,{style:{width:"120px"},get precision(){return De(()=>!!A.step)()?Math.max(0,-Math.floor(Math.log10(A.step))):0},get min(){return A.min},get max(){return A.max},value:$||0,onChange:z=>{D(A,z)}})}};return G(Nl,{get title(){return I("setting",e.locale)},width:700,contentHeight:void 0,padding:"0 10px",get buttons(){return[{children:I("restore_default",e.locale),onClick:()=>{k()}}]},get onClose(){return e.onClose},get children(){var A=hN(),P=A.firstChild,W=P.firstChild,D=P.nextSibling;return R(W,G(bv,{get isExpanded(){return!m()},onClick:()=>x(!m()),get ariaLabel(){return De(()=>!!m())()?I("sidebar.expand",e.locale):I("sidebar.collapse",e.locale)},className:"sidebar-toggle",startingDirection:"left"})),R(P,()=>M.map($=>(()=>{var z=pN();return z.$$click=()=>f($.key),R(z,(()=>{var B=De(()=>!!m());return()=>B()?$.text.charAt(0):$.text})()),Ne(B=>{var Z=`${p()===$.key?"selected":""}`,J=m()?$.text:"";return Z!==B.e&&st(z,B.e=Z),J!==B.t&&Ve(z,"title",B.t=J),B},{e:void 0,t:void 0}),z})()),null),R(D,(()=>{var $=De(()=>p()!=="paneOptions");return()=>$()&&G(Vn,{get each(){return n().filter(z=>z.key.includes(p()))},children:z=>(()=>{var B=yy(),Z=B.firstChild;return R(Z,()=>z.text),R(B,()=>L(z,()=>gn.formatValue(t(),z.key),!1),null),B})()})})(),null),R(D,(()=>{var $=De(()=>p()==="paneOptions");return()=>$()&&G(Vn,{get each(){return o()},children:z=>(()=>{var B=yy(),Z=B.firstChild;return R(Z,()=>z.text),R(B,()=>L(z,()=>oN(d(),z.key),!0),null),B})()})})(),null),Ne($=>{var z=`sidebar ${m()?"collapsed":""}`,B=`content ${m()?"expanded":""}`;return z!==$.e&&st(P,$.e=z),B!==$.t&&st(D,$.t=B),$},{e:void 0,t:void 0}),A}})};Xt(["click"]);const gN=e=>G($e,{get when(){return e.settingModalVisible()},get children(){return G(fN,{get locale(){return e.locale},get currentStyles(){return e.widget.getStyles()},get widget(){return e.widget},onClose:()=>{e.setSettingModalVisible(!1)},onChange:t=>{var r;(r=e.widget)==null||r.setStyles(t),e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()&&bt.getInstance(e.widget).saveStyles()},onPaneOptionsChange:()=>{e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()&&bt.getInstance(e.widget).savePaneOptions()},onRestoreDefault:t=>{const r={};t.forEach(n=>{const i=n.key;M0(r,i,gn.formatValue(e.widgetDefaultStyles(),i))}),e.widget.setStyles(Ui(Or())),e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()&&bt.getInstance(e.widget).saveStyles()}})}});var vN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M12.41465,11L18.5,11C18.7761,11,19,11.22386,19,11.5C19,11.77614,18.7761,12,18.5,12L12.41465,12C12.20873,12.5826,11.65311,13,11,13C10.34689,13,9.79127,12.5826,9.58535,12L3.5,12C3.223857,12,3,11.77614,3,11.5C3,11.22386,3.223857,11,3.5,11L9.58535,11C9.79127,10.417404,10.34689,10,11,10C11.65311,10,12.20873,10.417404,12.41465,11Z stroke-opacity=0 stroke=none>');const mN=()=>vN();var yN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M6.91465,11L11.08535,11C11.29127,10.417404,11.84689,10,12.5,10C13.15311,10,13.70873,10.417404,13.91465,11L18.5,11C18.7761,11,19,11.22386,19,11.5C19,11.77614,18.7761,12,18.5,12L13.91465,12C13.70873,12.5826,13.15311,13,12.5,13C11.84689,13,11.29127,12.5826,11.08535,12L6.91465,12C6.70873,12.5826,6.15311,13,5.5,13C4.671573,13,4,12.32843,4,11.5C4,10.671573,4.671573,10,5.5,10C6.15311,10,6.70873,10.417404,6.91465,11Z stroke-opacity=0 stroke=none>');const bN=()=>yN();var xN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M6.91465,12.5C6.70873,13.0826,6.15311,13.5,5.5,13.5C4.671573,13.5,4,12.82843,4,12C4,11.171573,4.671573,10.5,5.5,10.5C6.15311,10.5,6.70873,10.917404,6.91465,11.5L16.0853,11.5C16.2913,10.917404,16.846899999999998,10.5,17.5,10.5C18.328400000000002,10.5,19,11.171573,19,12C19,12.82843,18.328400000000002,13.5,17.5,13.5C16.846899999999998,13.5,16.2913,13.0826,16.0853,12.5L6.91465,12.5Z stroke-opacity=0 stroke=none>');const wN=()=>xN();var CN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11,12.41465L11,18.5C11,18.7761,11.22386,19,11.5,19C11.77614,19,12,18.7761,12,18.5L12,12.41465C12.5826,12.20873,13,11.65311,13,11C13,10.34689,12.5826,9.79127,12,9.58535L12,3.5C12,3.223857,11.77614,3,11.5,3C11.22386,3,11,3.223857,11,3.5L11,9.58535C10.417404,9.79127,10,10.34689,10,11C10,11.65311,10.417404,12.20873,11,12.41465Z stroke-opacity=0 stroke=none>');const _N=()=>CN();var SN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11.66558837890625,19C10.83716137890625,19,10.16558837890625,18.328400000000002,10.16558837890625,17.5C10.16558837890625,16.846899999999998,10.58298437890625,16.2913,11.16557337890625,16.0854L11.16557337890625,11.91464C10.58298437890625,11.70872,10.16558837890625,11.1531,10.16558837890625,10.5C10.16558837890625,9.8469,10.58298437890625,9.29128,11.16557337890625,9.08536L11.16557337890625,4.5C11.16557337890625,4.223857,11.38942837890625,4,11.66556837890625,4C11.94171837890625,4,12.16556837890625,4.223857,12.16556837890625,4.5L12.16556837890625,9.08535C12.74817837890625,9.291260000000001,13.16558837890625,9.846879999999999,13.16558837890625,10.5C13.16558837890625,11.153120000000001,12.74817837890625,11.708739999999999,12.16556837890625,11.91465L12.16556837890625,16.0854C12.74817837890625,16.2913,13.16558837890625,16.846899999999998,13.16558837890625,17.5C13.16558837890625,18.328400000000002,12.49401837890625,19,11.66558837890625,19Z stroke-opacity=0 stroke=none>');const kN=()=>SN();var MN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11.165603637695312,6.91465C11.748203637695312,6.70873,12.165603637695312,6.15311,12.165603637695312,5.5C12.165603637695312,4.671573,11.494033637695313,4,10.665603637695312,4C9.837176637695313,4,9.165603637695312,4.671573,9.165603637695312,5.5C9.165603637695312,6.15311,9.583007637695312,6.70873,10.165603637695312,6.91465L10.165603637695312,16.0854C9.583007637695312,16.2913,9.165603637695312,16.846899999999998,9.165603637695312,17.5C9.165603637695312,18.328400000000002,9.837176637695313,19,10.665603637695312,19C11.494033637695313,19,12.165603637695312,18.328400000000002,12.165603637695312,17.5C12.165603637695312,16.846899999999998,11.748203637695312,16.2913,11.165603637695312,16.0854L11.165603637695312,6.91465Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const TN=()=>MN();var EN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M5.146447,15.753C4.9511845,15.9483,4.9511845,16.2649,5.146447,16.4602C5.341709,16.6554,5.658291,16.6554,5.853554,16.4602L8.156600000000001,14.15711C8.352409999999999,14.25082,8.57173,14.3033,8.8033,14.3033C9.631730000000001,14.3033,10.3033,13.63172,10.3033,12.80329C10.3033,12.57172,10.250820000000001,12.352409999999999,10.157119999999999,12.15659L12.156600000000001,10.15711C12.352409999999999,10.250820000000001,12.571729999999999,10.30329,12.8033,10.30329C13.63173,10.30329,14.3033,9.63172,14.3033,8.80329C14.3033,8.57172,14.25082,8.352409999999999,14.15712,8.15659L16.4602,5.853553C16.6554,5.658291,16.6554,5.341709,16.4602,5.146447C16.2649,4.9511843,15.9483,4.9511843,15.753,5.146447L13.45001,7.449479999999999C13.25419,7.35577,13.03487,7.3032900000000005,12.8033,7.3032900000000005C11.97487,7.3032900000000005,11.3033,7.97487,11.3033,8.80329C11.3033,9.03487,11.35578,9.254190000000001,11.44949,9.450009999999999L9.450009999999999,11.449480000000001C9.254190000000001,11.35577,9.03487,11.30329,8.8033,11.30329C7.97487,11.30329,7.3033,11.97487,7.3033,12.80329C7.3033,13.03487,7.35578,13.25419,7.44949,13.45001L5.146447,15.753Z stroke-opacity=0 stroke=none>');const IN=()=>EN();var LN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M7.573332939453125,14.54567903564453C7.667042939453125,14.741499035644532,7.719512939453125,14.960809035644532,7.719512939453125,15.19239903564453C7.719512939453125,16.02079903564453,7.047942939453125,16.69239903564453,6.219512939453125,16.69239903564453C5.391085939453125,16.69239903564453,4.719512939453125,16.02079903564453,4.719512939453125,15.19239903564453C4.719512939453125,14.36394903564453,5.391085939453125,13.692379035644532,6.219512939453125,13.692379035644532C6.451092939453125,13.692379035644532,6.670412939453125,13.74485903564453,6.866232939453125,13.83856903564453L9.865702939453126,10.83909903564453C9.771992939453124,10.643279035644532,9.719512939453125,10.42395903564453,9.719512939453125,10.192379035644532C9.719512939453125,9.36394903564453,10.391082939453124,8.692379035644532,11.219512939453125,8.692379035644532C11.451092939453126,8.692379035644532,11.670412939453126,8.74485903564453,11.866232939453125,8.838569035644532L15.462112939453124,5.242645035644531C15.657412939453126,5.047383335644532,15.974012939453125,5.047383335644532,16.169212939453125,5.242645035644531C16.364512939453125,5.437907035644531,16.364512939453125,5.754489035644531,16.169212939453125,5.949752035644531L12.573332939453124,9.545679035644532C12.667042939453125,9.74149903564453,12.719512939453125,9.96080903564453,12.719512939453125,10.192379035644532C12.719512939453125,11.020809035644533,12.047942939453126,11.692379035644532,11.219512939453125,11.692379035644532C10.987942939453125,11.692379035644532,10.768632939453125,11.639909035644532,10.572812939453126,11.54619903564453L7.573332939453125,14.54567903564453Z stroke-opacity=0 stroke=none>');const PN=()=>LN();var AN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M15.719512939453125,8.461776733398438C16.547912939453127,8.461776733398438,17.219512939453125,7.7902067333984375,17.219512939453125,6.9617767333984375C17.219512939453125,6.133349733398438,16.547912939453127,5.4617767333984375,15.719512939453125,5.4617767333984375C14.891082939453124,5.4617767333984375,14.219512939453125,6.133349733398438,14.219512939453125,6.9617767333984375C14.219512939453125,7.193346733398437,14.271992939453124,7.412666733398438,14.365692939453124,7.608486733398438L7.366222939453126,14.607956733398437C7.170402939453125,14.514256733398437,6.951082939453125,14.461776733398438,6.719512939453125,14.461776733398438C5.891085939453125,14.461776733398438,5.219512939453125,15.133346733398437,5.219512939453125,15.961776733398438C5.219512939453125,16.79017673339844,5.891085939453125,17.461776733398438,6.719512939453125,17.461776733398438C7.547942939453125,17.461776733398438,8.219512939453125,16.79017673339844,8.219512939453125,15.961776733398438C8.219512939453125,15.730176733398437,8.167032939453126,15.510876733398437,8.073322939453124,15.315066733398437L15.072802939453124,8.315586733398437C15.268612939453124,8.409296733398438,15.487912939453125,8.461776733398438,15.719512939453125,8.461776733398438Z stroke-opacity=0 stroke=none>');const DN=()=>AN();var FN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M17.0643,7.033864912109375L18,3.585784912109375L14.5078,4.509695912109375L15.3537,5.344934912109375L6.02026,14.560584912109375C5.87635,14.517484912109374,5.72366,14.494284912109375,5.5655,14.494284912109375C4.7009,14.494284912109375,4,15.186384912109375,4,16.040084912109375C4,16.893784912109375,4.7009,17.585784912109375,5.5655,17.585784912109375C6.43011,17.585784912109375,7.13101,16.893784912109375,7.13101,16.040084912109375C7.13101,15.722284912109375,7.03392,15.426984912109376,6.86744,15.181384912109374L16.0917,6.073604912109375L17.0643,7.033864912109375Z stroke-opacity=0 stroke=none>');const RN=()=>FN();var ON=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M6.91465,13.00505L18.5,13.00505C18.7761,13.00505,19,13.228909999999999,19,13.50505C19,13.781189999999999,18.7761,14.00505,18.5,14.00505L6.91465,14.00505C6.70873,14.58765,6.15311,15.00505,5.5,15.00505C4.671573,15.00505,4,14.33348,4,13.50505C4,12.67662,4.671573,12.00505,5.5,12.00505C6.15311,12.00505,6.70873,12.422450000000001,6.91465,13.00505ZM7.81404,11.625L10.48591,11.625L10.48591,10.90625L9.65193,10.90625L9.65193,7.125L8.997630000000001,7.125C8.71443,7.306641,8.415600000000001,7.419922,7.96443,7.498047L7.96443,8.05078L8.77497,8.05078L8.77497,10.90625L7.81404,10.90625L7.81404,11.625ZM11.081620000000001,11.625L14.0562,11.625L14.0562,10.88281L13.09724,10.88281C12.8863,10.88281,12.59333,10.90625,12.36482,10.93555C13.17537,10.11328,13.84724,9.2207,13.84724,8.39062C13.84724,7.541016,13.28865,7,12.4488,7C11.84333,7,11.446850000000001,7.234375,11.03279,7.679688L11.52497,8.16797C11.747630000000001,7.914062,12.0113,7.697266,12.33552,7.697266C12.7613,7.697266,13.00154,7.982422,13.00154,8.43359C13.00154,9.14648,12.29255,10.00781,11.081620000000001,11.11523L11.081620000000001,11.625ZM15.9605,11.75C16.8121,11.75,17.526899999999998,11.2832,17.526899999999998,10.4375C17.526899999999998,9.82031,17.142200000000003,9.43945,16.6441,9.30078L16.6441,9.27148C17.1129,9.08594,17.3824,8.7207,17.3824,8.21289C17.3824,7.421875,16.8004,7,15.9429,7C15.4215,7,14.9957,7.210938,14.6109,7.541016L15.066,8.11133C15.3258,7.849609,15.5836,7.697266,15.9019,7.697266C16.2789,7.697266,16.4957,7.914062,16.4957,8.28125C16.4957,8.70898,16.2301,9,15.4215,9L15.4215,9.63672C16.3804,9.63672,16.6383,9.91992,16.6383,10.38086C16.6383,10.79688,16.3336,11.03125,15.8824,11.03125C15.4742,11.03125,15.1578,10.82227,14.8922,10.55078L14.4781,11.13281C14.7906,11.486329999999999,15.2652,11.75,15.9605,11.75Z stroke-opacity=0 stroke=none>');const NN=()=>ON();var zN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M3.146447,14.178126025390625C2.9511847,13.982826025390626,2.9511847,13.666226025390625,3.146447,13.470926025390625L7.39146,9.225966025390626C7.35417,9.095106025390624,7.33421,8.956946025390625,7.33421,8.814116025390625C7.33421,7.985696025390625,8.00578,7.314116025390625,8.834209999999999,7.314116025390625C8.97703,7.314116025390625,9.11519,7.334086025390625,9.24605,7.371366025390625L13.753,2.864373025390625C13.9483,2.669110325390625,14.2649,2.669110325390625,14.4602,2.864373025390625C14.6554,3.059635025390625,14.6554,3.376217025390625,14.4602,3.571479025390625L10.06916,7.962476025390625C10.23631,8.204386025390626,10.334209999999999,8.497826025390625,10.334209999999999,8.814116025390625C10.334209999999999,9.642546025390626,9.66264,10.314116025390625,8.834209999999999,10.314116025390625C8.51791,10.314116025390625,8.22448,10.216226025390625,7.98256,10.049076025390626L3.853554,14.178126025390625C3.658291,14.373326025390625,3.341709,14.373326025390625,3.146447,14.178126025390625ZM7.67736,19.188526025390626C7.4821,18.993226025390626,7.4821,18.676626025390625,7.67736,18.481426025390626L9.9804,16.178326025390625C9.88669,15.982526025390625,9.834209999999999,15.763226025390624,9.834209999999999,15.531626025390626C9.834209999999999,14.703226025390626,10.50578,14.031626025390626,11.33421,14.031626025390626C11.56579,14.031626025390626,11.78511,14.084126025390624,11.98093,14.177826025390624L13.9804,12.178356025390626C13.8867,11.982536025390624,13.8342,11.763216025390625,13.8342,11.531636025390625C13.8342,10.703206025390624,14.5058,10.031636025390625,15.3342,10.031636025390625C15.5658,10.031636025390625,15.7851,10.084116025390625,15.9809,10.177826025390626L18.284,7.874796025390625C18.4792,7.679536025390625,18.7958,7.679536025390625,18.9911,7.874796025390625C19.1863,8.070056025390624,19.1863,8.386636025390626,18.9911,8.581906025390625L16.688000000000002,10.884936025390624C16.7817,11.080756025390626,16.8342,11.300066025390626,16.8342,11.531636025390625C16.8342,12.360066025390624,16.162599999999998,13.031626025390626,15.3342,13.031626025390626C15.1026,13.031626025390626,14.8833,12.979126025390626,14.6875,12.885426025390625L12.68803,14.884926025390625C12.78174,15.080726025390625,12.83421,15.300026025390626,12.83421,15.531626025390626C12.83421,16.360026025390624,12.16264,17.031626025390626,11.33421,17.031626025390626C11.10264,17.031626025390626,10.88333,16.979126025390627,10.68751,16.885426025390625L8.38446,19.188526025390626C8.1892,19.383726025390626,7.87262,19.383726025390626,7.67736,19.188526025390626Z stroke-opacity=0 stroke=none>');const $N=()=>zN();var BN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M3.3367688759765626,12.63173C3.5320318759765623,12.82699,3.8486138759765627,12.82699,4.043876875976562,12.63173L11.822052875976562,4.853553C12.017312875976563,4.658291,12.017312875976563,4.341708,11.822052875976562,4.146446C11.626792875976562,3.9511843,11.310202875976563,3.9511843,11.114942875976563,4.146446L3.3367688759765626,11.92462C3.1415071759765625,12.11988,3.1415071759765625,12.43647,3.3367688759765626,12.63173ZM5.001492875976562,17.0351C4.806232875976562,16.8399,4.806232875976562,16.5233,5.001492875976562,16.328L7.304532875976562,14.025C7.210822875976563,13.82916,7.158352875976563,13.60984,7.158352875976563,13.37827C7.158352875976563,12.54984,7.829922875976562,11.87827,8.658352875976561,11.87827C8.889922875976563,11.87827,9.109232875976563,11.93075,9.305052875976562,12.02446L11.304532875976562,10.02498C11.210822875976563,9.82916,11.158352875976561,9.60984,11.158352875976561,9.37827C11.158352875976561,8.54984,11.829922875976562,7.8782700000000006,12.658352875976563,7.8782700000000006C12.889922875976563,7.8782700000000006,13.109232875976563,7.93075,13.305022875976562,8.024460000000001L15.608122875976562,5.72142C15.803322875976562,5.5261499999999995,16.119922875976563,5.5261499999999995,16.315222875976563,5.72142C16.510422875976563,5.9166799999999995,16.510422875976563,6.23326,16.315222875976563,6.42852L14.012122875976562,8.73156C14.105822875976562,8.92738,14.158322875976562,9.1467,14.158322875976562,9.37827C14.158322875976562,10.2067,13.486822875976562,10.87827,12.658352875976563,10.87827C12.426772875976562,10.87827,12.207452875976562,10.82579,12.011642875976563,10.73209L10.012162875976562,12.73156C10.105872875976562,12.92738,10.158352875976561,13.1467,10.158352875976561,13.37827C10.158352875976561,14.2067,9.486772875976563,14.8783,8.658352875976561,14.8783C8.426772875976562,14.8783,8.207452875976562,14.8258,8.011642875976563,14.7321L5.708602875976562,17.0351C5.513342875976562,17.2304,5.196752875976562,17.2304,5.001492875976562,17.0351ZM10.415712875976563,18.328C10.220452875976562,18.5233,9.903862875976563,18.5233,9.708602875976563,18.328C9.513342875976562,18.1328,9.513342875976562,17.816200000000002,9.708602875976563,17.6209L12.304532875976562,15.025C12.210822875976563,14.8292,12.158352875976563,14.6098,12.158352875976563,14.3783C12.158352875976563,13.54984,12.829922875976562,12.87827,13.658322875976562,12.87827C13.889922875976563,12.87827,14.109222875976563,12.93075,14.305022875976562,13.02446L17.486822875976564,9.84274C17.682022875976564,9.64747,17.99862287597656,9.64747,18.19392287597656,9.84274C18.38912287597656,10.038,18.38912287597656,10.35458,18.19392287597656,10.54984L15.012122875976562,13.73156C15.105822875976562,13.92738,15.158322875976562,14.1467,15.158322875976562,14.3783C15.158322875976562,15.2067,14.486822875976562,15.8783,13.658322875976562,15.8783C13.426822875976562,15.8783,13.207422875976562,15.8258,13.011642875976563,15.7321L10.415712875976563,18.328Z stroke-opacity=0 stroke=none>');const VN=()=>BN();var WN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M13.1889,6C12.98303,6.582599999999999,12.42741,7,11.7743,7C11.12119,7,10.565570000000001,6.582599999999999,10.35965,6L3.5,6C3.223857,6,3,5.77614,3,5.5C3,5.22386,3.223857,5,3.5,5L10.35965,5C10.565570000000001,4.417404,11.12119,4,11.7743,4C12.42741,4,12.98303,4.417404,13.1889,5L18.5,5C18.7761,5,19,5.22386,19,5.5C19,5.77614,18.7761,6,18.5,6L13.1889,6ZM3,8.5C3,8.22386,3.223857,8,3.5,8L18.5,8C18.7761,8,19,8.22386,19,8.5C19,8.77614,18.7761,9,18.5,9L3.5,9C3.223857,9,3,8.77614,3,8.5ZM3.278549,11.5C3.278549,11.22386,3.502407,11,3.778549,11L18.7785,11C19.0547,11,19.2785,11.22386,19.2785,11.5C19.2785,11.77614,19.0547,12,18.7785,12L3.778549,12C3.502407,12,3.278549,11.77614,3.278549,11.5ZM3.139267,14.5C3.139267,14.2239,3.363124,14,3.6392670000000003,14L18.6393,14C18.915399999999998,14,19.1393,14.2239,19.1393,14.5C19.1393,14.7761,18.915399999999998,15,18.6393,15L3.6392670000000003,15C3.363124,15,3.139267,14.7761,3.139267,14.5ZM13.1889,18C12.98303,18.5826,12.42741,19,11.7743,19C11.12119,19,10.565570000000001,18.5826,10.35965,18L3.778549,18C3.502407,18,3.278549,17.7761,3.278549,17.5C3.278549,17.2239,3.502407,17,3.778549,17L10.35965,17C10.565570000000001,16.4174,11.12119,16,11.7743,16C12.42741,16,12.98303,16.4174,13.1889,17L18.7785,17C19.0547,17,19.2785,17.2239,19.2785,17.5C19.2785,17.7761,19.0547,18,18.7785,18L13.1889,18Z stroke-opacity=0 stroke=none>');const UN=()=>WN();var HN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M4.91465,6C4.70873,6.582599999999999,4.15311,7,3.5,7C2.671573,7,2,6.32843,2,5.5C2,4.671573,2.671573,4,3.5,4C4.15311,4,4.70873,4.417404,4.91465,5L18.2257,5C18.5018,5,18.7257,5.22386,18.7257,5.5C18.7257,5.77614,18.5018,6,18.2257,6L4.91465,6ZM2.7257,8.5C2.7257,8.22386,2.949558,8,3.2257,8L18.2257,8C18.5018,8,18.7257,8.22386,18.7257,8.5C18.7257,8.77614,18.5018,9,18.2257,9L3.2257,9C2.949558,9,2.7257,8.77614,2.7257,8.5ZM3.00425,11.5C3.00425,11.22386,3.22811,11,3.50425,11L18.5042,11C18.7804,11,19.0042,11.22386,19.0042,11.5C19.0042,11.77614,18.7804,12,18.5042,12L3.50425,12C3.22811,12,3.00425,11.77614,3.00425,11.5ZM2.864967,14.5C2.864967,14.2239,3.08882,14,3.36497,14L18.365,14C18.6411,14,18.865,14.2239,18.865,14.5C18.865,14.7761,18.6411,15,18.365,15L3.36497,15C3.08882,15,2.864967,14.7761,2.864967,14.5ZM20,17.5C20,18.328400000000002,19.3284,19,18.5,19C17.846899999999998,19,17.2913,18.5826,17.0854,18L3.50425,18C3.22811,18,3.00425,17.7761,3.00425,17.5C3.00425,17.2239,3.22811,17,3.50425,17L17.0854,17C17.2913,16.4174,17.846899999999998,16,18.5,16C19.3284,16,20,16.671599999999998,20,17.5Z stroke-opacity=0 stroke=none>');const YN=()=>HN();var XN=q('<svg class=icon-overlay viewBox="0 0 22 22"><ellipse cx=10.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=17.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=10.5 cy=11.5 rx=7 ry=7 fill-opacity=0 stroke-opacity=1 fill=none stroke-width=1></ellipse><ellipse cx=10.5 cy=11.5 rx=5 ry=5 fill-opacity=0 stroke-opacity=1 fill=none stroke-width=1></ellipse><ellipse cx=10.5 cy=11.5 rx=3 ry=3 fill-opacity=0 stroke-opacity=1 fill=none stroke-width=1>');const jN=()=>XN();var ZN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M3,7.32468C5.90649,3.3893050000000002,11.49833,2.81306,14.6674,6.31944C14.9056,6.1554199999999994,15.192,6.05979,15.5,6.05979C15.845,6.05979,16.1628,6.17974,16.4162,6.381349999999999L18.4509,4.23827L19,4.816615L16.8945,7.03429C16.962600000000002,7.21075,17,7.40319,17,7.60463C17,8.45782,16.328400000000002,9.14947,15.5,9.14947C14.6716,9.14947,14,8.45782,14,7.60463C14,7.36402,14.0534,7.13625,14.1487,6.93322C11.32695,3.748365,6.25159,4.253956,3.612785,7.82695L3,7.32468ZM14.09,15.4717C15.7427,13.78985,16.244500000000002,11.524740000000001,15.5633,9.30134L15.5618,9.30134L16.3012,9.0502C17.072400000000002,11.56646,16.497700000000002,14.158,14.6282,16.0599C12.28737,18.442,8.62386,18.6988,6.41348,16.4501C4.5526,14.5572,4.52076,11.19671,6.36766,9.3177C7.89069,7.76754,10.07544,7.706189999999999,11.56741,9.22363C11.95453,9.61742,12.24817,10.08363,12.43369,10.57677L14.1451,8.77421L14.6942,9.35256L12.64982,11.50582C12.65827,11.59712,12.66295,11.68839,12.66378,11.77936C12.87398,12.04523,13,12.38451,13,12.7541C13,13.60729,12.32843,14.2989,11.5,14.2989C10.67157,14.2989,10,13.60729,10,12.7541C10,11.90091,10.67157,11.20926,11.5,11.20926C11.60387,11.20926,11.70528,11.220130000000001,11.8032,11.240829999999999L11.81763,11.22564C11.69858,10.71874,11.42858,10.21929,11.0284,9.81179C9.844000000000001,8.60765,8.136890000000001,8.65592,6.90822,9.90586C5.37975,11.460930000000001,5.40693,14.288,6.95404,15.8619C8.84598,17.7867,12.03496,17.5626,14.09,15.4717Z stroke-opacity=0 stroke=none>');const GN=()=>ZN();var qN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M4,17.0854L4,3.5C4,3.223858,4.22386,3,4.5,3C4.77614,3,5,3.223858,5,3.5L5,10L7.57584,10L9.8127,4.46359C9.91614,4.20756,10.20756,4.08386,10.46359,4.1873000000000005C10.71963,4.29075,10.84333,4.58216,10.73988,4.8382000000000005L8.65438,10L11.08535,10C11.29127,9.4174,11.84689,9,12.5,9C12.65154,9,12.79784,9.02247,12.93573,9.06427L16.6464,5.35355C16.8417,5.15829,17.1583,5.15829,17.3536,5.35355C17.5488,5.54882,17.5488,5.8654,17.3536,6.06066L13.7475,9.66675C13.907,9.90508,14,10.19168,14,10.5C14,11.15311,13.5826,11.70873,13,11.91465L13,14.3638L18.3714,12.1936C18.6274,12.09015,18.918799999999997,12.21385,19.0222,12.46989C19.1257,12.72592,19.002,13.0173,18.746000000000002,13.1208L13,15.4423L13,18L19.5,18C19.7761,18,20,18.2239,20,18.5C20,18.7761,19.7761,19,19.5,19L5.91465,19C5.70873,19.5826,5.15311,20,4.5,20C3.671573,20,3,19.3284,3,18.5C3,17.846899999999998,3.417404,17.2913,4,17.0854ZM6.3729499999999994,17.0413L12,14.7678L12,11.91465C11.88136,11.87271,11.76956,11.81627,11.66675,11.74746L6.3729499999999994,17.0413ZM12,15.8463L6.6694700000000005,18L12,18L12,15.8463ZM6.38629,15.6137L8.250350000000001,11L11,11L6.38629,15.6137ZM5,11L7.17182,11L5,16.3754L5,11Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const QN=()=>qN();var KN=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M17,4.5C17,5.32843,16.328400000000002,6,15.5,6C15.0931,6,14.7241,5.83802,14.4539,5.57503L5.98992,8.32515C5.99658,8.38251,6,8.440850000000001,6,8.5C6,9.15311,5.582599999999999,9.70873,5,9.91465L5,11.08535C5.42621,11.236,5.763999999999999,11.57379,5.91465,12L19.5,12C19.7761,12,20,12.22386,20,12.5C20,12.77614,19.7761,13,19.5,13L5.91465,13C5.70873,13.5826,5.15311,14,4.5,14C3.671573,14,3,13.3284,3,12.5C3,11.84689,3.417404,11.29127,4,11.08535L4,9.91465C3.417404,9.70873,3,9.15311,3,8.5C3,7.67157,3.671573,7,4.5,7C4.90411,7,5.2709,7.15981,5.5406200000000005,7.41967L14.0093,4.66802C14.0032,4.6128599999999995,14,4.5568,14,4.5C14,3.671573,14.6716,3,15.5,3C16.328400000000002,3,17,3.671573,17,4.5ZM4,15.5C4,15.2239,4.22386,15,4.5,15L19.5,15C19.7761,15,20,15.2239,20,15.5C20,15.7761,19.7761,16,19.5,16L4.5,16C4.22386,16,4,15.7761,4,15.5ZM4,18.5C4,18.2239,4.22386,18,4.5,18L19.5,18C19.7761,18,20,18.2239,20,18.5C20,18.7761,19.7761,19,19.5,19L4.5,19C4.22386,19,4,18.7761,4,18.5Z stroke-opacity=0 stroke=none>');const JN=()=>KN();var ez=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M20,3.5C20,4.15311,19.5826,4.70873,19,4.91465L19,18.5C19,18.7761,18.7761,19,18.5,19L4.91465,19C4.70873,19.5826,4.15311,20,3.5,20C2.671573,20,2,19.3284,2,18.5C2,17.846899999999998,2.417404,17.2913,3,17.0854L3,3.5C3,3.22386,3.22386,3,3.5,3L17.0854,3C17.2913,2.417404,17.846899999999998,2,18.5,2C19.3284,2,20,2.671573,20,3.5ZM17.0854,4C17.236,4.42621,17.5738,4.763999999999999,18,4.91465L18,8L14,8L14,4L17.0854,4ZM13,4L13,8L9,8L9,4L13,4ZM13,9L9,9L9,13L13,13L13,9ZM13,14L9,14L9,18L13,18L13,14ZM14,18L14,14L18,14L18,18L14,18ZM18,13L14,13L14,9L18,9L18,13ZM4.91465,18C4.763999999999999,17.5738,4.42621,17.236,4,17.0854L4,14L8,14L8,18L4.91465,18ZM4,8L4,4L8,4L8,8L4,8ZM8,9L8,13L4,13L4,9L8,9Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const tz=()=>ez();var rz=q('<svg class=icon-overlay viewBox="0 0 22 22"><ellipse cx=10.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=17.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=10.5 cy=11.5 rx=7 ry=7 fill-opacity=0 fill=none stroke-opacity=1 stroke-width=1>');const nz=()=>rz();var iz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11.57625,6.9981C11.55099,6.999359999999999,11.52557,7,11.5,7C11.34,7,11.18584,6.97495,11.04125,6.9285499999999995L5.55401,16.4327C5.713760000000001,16.5905,5.83826,16.7839,5.91465,17L16.0854,17C16.2187,16.622700000000002,16.4987,16.314700000000002,16.8569,16.1445L11.57625,6.9981ZM12.50759,6.611219999999999C12.81005,6.336790000000001,13,5.94058,13,5.5C13,4.671573,12.32843,4,11.5,4C10.67157,4,10,4.671573,10,5.5C10,5.80059,10.08841,6.08052,10.24066,6.31522L4.64514,16.0069C4.59738,16.002299999999998,4.54896,16,4.5,16C3.671573,16,3,16.671599999999998,3,17.5C3,18.328400000000002,3.671573,19,4.5,19C5.15311,19,5.70873,18.5826,5.91465,18L16.0854,18C16.2913,18.5826,16.846899999999998,19,17.5,19C18.328400000000002,19,19,18.328400000000002,19,17.5C19,16.8365,18.5691,16.2735,17.971899999999998,16.075699999999998L12.50759,6.611219999999999Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const oz=()=>iz();var az=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M19,4.5C19,5.15311,18.5826,5.70873,18,5.91465L18,18.5C18,18.7761,17.7761,19,17.5,19L5.91465,19C5.70873,19.5826,5.15311,20,4.5,20C3.671573,20,3,19.3284,3,18.5C3,17.846899999999998,3.417404,17.2913,4,17.0854L4,4.5C4,4.22386,4.22386,4,4.5,4L16.0854,4C16.2913,3.417404,16.846899999999998,3,17.5,3C18.328400000000002,3,19,3.671573,19,4.5ZM5,5L16.0854,5C16.236,5.42621,16.5738,5.763999999999999,17,5.91465L17,18L5.91465,18C5.763999999999999,17.5738,5.42621,17.236,5,17.0854L5,5Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const sz=()=>az();var lz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M19.6401,7.99355C20.4028,7.92291,21,7.2811900000000005,21,6.5C21,5.671573,20.3284,5,19.5,5C18.8469,5,18.2913,5.417404,18.0854,6L7.62067,6C7.34453,6,7.12067,6.22386,7.12067,6.5C7.12067,6.5479,7.12741,6.59423,7.13999,6.63809L3.2294099999999997,15.0243C2.530138,15.1517,2,15.764,2,16.5C2,17.328400000000002,2.671573,18,3.5,18C4.15311,18,4.70873,17.5826,4.91465,17L14.5963,17C14.6456,17.076,14.7162,17.1396,14.8044,17.1807C15.0546,17.2974,15.3521,17.1891,15.4688,16.9388L19.6401,7.99355ZM14.7896,16.0293L18.6551,7.739599999999999C18.3942,7.56144,18.1925,7.30307,18.0854,7L8.0746,7L4.25044,15.2009C4.55701,15.3784,4.79493,15.6613,4.91465,16L14.6207,16C14.68,16,14.7368,16.0103,14.7896,16.0293Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const cz=()=>lz();var uz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M8.134443814697265,7.494615087890625L8.764323814697265,7.494615087890625L8.764323814697265,3.414215087890625L8.310223814697267,3.414215087890625L7.294603814697266,4.005035087890625L7.289713814697266,4.634915087890625L8.134443814697265,4.149892087890625L8.134443814697265,7.494615087890625ZM18.832003814697266,6.933095087890624Q19.004603814697266,6.635245087890625,19.004603814697266,6.2543850878906255Q19.004603814697266,5.884915087890625,18.845103814697264,5.593575087890625Q18.685503814697267,5.3006050878906255,18.399103814697266,5.136225087890625Q18.114303814697266,4.9702050878906245,17.754603814697266,4.9653250878906245L18.820603814697265,3.840647087890625L18.820603814697265,3.414215087890625L16.519203814697264,3.414215087890625L16.519203814697264,3.939931087890625L18.050803814697264,3.939931087890625L16.719403814697266,5.334785087890625L17.074203814697263,5.7205350878906245Q17.254903814697265,5.484525087890625,17.619503814697268,5.484525087890625Q17.980803814697268,5.484525087890625,18.187503814697266,5.689605087890625Q18.394203814697267,5.894685087890625,18.394203814697267,6.2543850878906255Q18.394203814697267,6.604315087890625,18.187503814697266,6.822415087890625Q17.980803814697268,7.0405150878906255,17.640603814697265,7.0405150878906255Q17.334603814697267,7.0405150878906255,17.124703814697266,6.890775087890625Q16.914703814697265,6.739415087890626,16.820303814697265,6.469225087890624L16.354803814697263,6.744295087890626Q16.480103814697266,7.125155087890625,16.821903814697265,7.341625087890625Q17.165403814697264,7.559725087890625,17.640603814697265,7.559725087890625Q18.039403814697266,7.559725087890625,18.348603814697267,7.393705087890625Q18.659503814697267,7.229315087890625,18.832003814697266,6.933095087890624ZM10.000003814697266,10.634915087890626C10.000003814697266,11.024655087890626,9.851363814697265,11.379685087890625,9.607683814697266,11.646395087890625L12.168903814697266,15.171615087890626C12.275403814697265,15.147615087890625,12.386203814697266,15.134915087890626,12.500003814697266,15.134915087890626C12.596503814697266,15.134915087890626,12.690803814697265,15.144015087890624,12.782303814697265,15.161415087890624L16.108803814697268,11.196955087890625C16.038703814697264,11.023375087890624,16.000003814697266,10.833655087890625,16.000003814697266,10.634915087890626C16.000003814697266,9.806495087890625,16.671603814697264,9.134915087890626,17.500003814697266,9.134915087890626C18.328403814697264,9.134915087890626,19.000003814697266,9.806495087890625,19.000003814697266,10.634915087890626C19.000003814697266,11.463345087890625,18.328403814697264,12.134915087890626,17.500003814697266,12.134915087890626C17.239503814697265,12.134915087890626,16.994503814697268,12.068495087890625,16.781003814697264,11.951675087890624L13.654703814697266,15.677415087890624C13.870303814697266,15.937215087890625,14.000003814697266,16.270915087890625,14.000003814697266,16.634915087890626C14.000003814697266,17.463315087890624,13.328403814697266,18.134915087890626,12.500003814697266,18.134915087890626C11.671573814697265,18.134915087890626,11.000003814697266,17.463315087890624,11.000003814697266,16.634915087890626C11.000003814697266,16.284415087890626,11.120193814697265,15.962015087890626,11.321603814697266,15.706715087890625L8.715393814697265,12.119565087890624C8.645053814697267,12.129685087890625,8.573143814697266,12.134915087890626,8.500003814697266,12.134915087890626C8.162103814697264,12.134915087890626,7.8503038146972655,12.023195087890626,7.599523814697266,11.834665087890626L4.505583814697266,15.521915087890624C4.809213814697266,15.796415087890624,5.000003814697266,16.193415087890624,5.000003814697266,16.634915087890626C5.000003814697266,17.463315087890624,4.328433814697266,18.134915087890626,3.5000038146972656,18.134915087890626C2.6715768146972656,18.134915087890626,2.0000038146972656,17.463315087890624,2.0000038146972656,16.634915087890626C2.0000038146972656,15.806515087890626,2.6715768146972656,15.134915087890626,3.5000038146972656,15.134915087890626C3.508253814697266,15.134915087890626,3.5164838146972657,15.135015087890626,3.524703814697266,15.135115087890625L7.033823814697266,10.953115087890625C7.011673814697265,10.850565087890626,7.000003814697266,10.744105087890624,7.000003814697266,10.634915087890626C7.000003814697266,9.806495087890625,7.671573814697266,9.134915087890626,8.500003814697266,9.134915087890626C9.328433814697267,9.134915087890626,10.000003814697266,9.806495087890625,10.000003814697266,10.634915087890626Z stroke-opacity=0 stroke=none>');const dz=()=>uz();var hz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M8.13444,7.494615087890625L8.76432,7.494615087890625L8.76432,3.414215087890625L8.310220000000001,3.414215087890625L7.2946,4.005035087890625L7.28971,4.634915087890625L8.13444,4.149892087890625L8.13444,7.494615087890625ZM18.832,6.929835087890625Q19.0046,6.635245087890625,19.0046,6.2543850878906255Q19.0046,5.889805087890625,18.8451,5.5952050878906245Q18.6855,5.3006050878906255,18.3975,5.132965087890625Q18.1094,4.9653250878906245,17.7399,4.9653250878906245Q17.435499999999998,4.9653250878906245,17.1556,5.149245087890625L17.2793,3.939931087890625L18.8304,3.939931087890625L18.8304,3.414215087890625L16.7406,3.414215087890625L16.5094,5.665195087890625L17.0156,5.795405087890625Q17.095399999999998,5.655425087890626,17.2516,5.570795087890625Q17.4095,5.484525087890625,17.6357,5.484525087890625Q17.9694,5.484525087890625,18.1842,5.697745087890625Q18.4007,5.909335087890625,18.4007,6.2543850878906255Q18.4007,6.604315087890625,18.1842,6.822415087890625Q17.9694,7.0405150878906255,17.6292,7.0405150878906255Q17.3298,7.0405150878906255,17.119799999999998,6.890775087890625Q16.9098,6.739415087890626,16.825200000000002,6.474115087890625L16.3597,6.749175087890626Q16.470399999999998,7.110505087890624,16.807299999999998,7.335115087890625Q17.144199999999998,7.559725087890625,17.6292,7.559725087890625Q18.0296,7.559725087890625,18.3438,7.392075087890625Q18.6595,7.224435087890625,18.832,6.929835087890625ZM10,10.634915087890626C10,11.024655087890626,9.85136,11.379685087890625,9.60768,11.646395087890625L12.1689,15.171615087890626C12.2754,15.147615087890625,12.3862,15.134915087890626,12.5,15.134915087890626C12.5965,15.134915087890626,12.6908,15.144015087890624,12.7823,15.161415087890624L16.108800000000002,11.196955087890625C16.0387,11.023375087890624,16,10.833655087890625,16,10.634915087890626C16,9.806495087890625,16.671599999999998,9.134915087890626,17.5,9.134915087890626C18.3284,9.134915087890626,19,9.806495087890625,19,10.634915087890626C19,11.463345087890625,18.3284,12.134915087890626,17.5,12.134915087890626C17.2395,12.134915087890626,16.994500000000002,12.068505087890625,16.781,11.951675087890624L13.6547,15.677415087890624C13.8703,15.937215087890625,14,16.270915087890625,14,16.634915087890626C14,17.463315087890624,13.3284,18.134915087890626,12.5,18.134915087890626C11.67157,18.134915087890626,11,17.463315087890624,11,16.634915087890626C11,16.284415087890626,11.12019,15.962015087890626,11.3216,15.706715087890625L8.71539,12.119565087890624C8.645050000000001,12.129685087890625,8.57314,12.134915087890626,8.5,12.134915087890626C8.162099999999999,12.134915087890626,7.8503,12.023195087890626,7.59952,11.834665087890626L4.50558,15.521915087890624C4.80921,15.796415087890624,5,16.193415087890624,5,16.634915087890626C5,17.463315087890624,4.32843,18.134915087890626,3.5,18.134915087890626C2.671573,18.134915087890626,2,17.463315087890624,2,16.634915087890626C2,15.806515087890626,2.671573,15.134915087890626,3.5,15.134915087890626C3.5082500000000003,15.134915087890626,3.51648,15.135015087890626,3.5247,15.135115087890625L7.03382,10.953115087890625C7.01167,10.850565087890626,7,10.744105087890624,7,10.634915087890626C7,9.806495087890625,7.67157,9.134915087890626,8.5,9.134915087890626C9.32843,9.134915087890626,10,9.806495087890625,10,10.634915087890626Z stroke-opacity=0 stroke=none>');const pz=()=>hz();var fz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M18.8532,7.020985087890625Q19.0257,6.734525087890625,19.0257,6.369945087890625Q19.0257,6.020005087890625,18.8499,5.754705087890625Q18.6758,5.489415087890626,18.3649,5.339675087890625Q18.5944,5.209465087890625,18.7214,4.994615087890625Q18.8499,4.779775087890625,18.8499,4.5193550878906255Q18.8499,4.2003480878906245,18.7002,3.951324087890625Q18.5505,3.700673087890625,18.277,3.557444087890625Q18.0052,3.414215087890625,17.6455,3.414215087890625Q17.285800000000002,3.414215087890625,17.0107,3.557444087890625Q16.7357,3.700673087890625,16.5843,3.951324087890625Q16.4346,4.2003480878906245,16.4346,4.5193550878906255Q16.4346,4.779775087890625,16.561500000000002,4.994615087890625Q16.6901,5.209465087890625,16.919600000000003,5.339675087890625Q16.6055,5.489415087890626,16.4297,5.757965087890625Q16.255499999999998,6.024895087890625,16.255499999999998,6.369945087890625Q16.255499999999998,6.734525087890625,16.4297,7.020985087890625Q16.6055,7.305815087890625,16.919600000000003,7.465325087890625Q17.2354,7.624825087890625,17.6455,7.624825087890625Q18.0557,7.624825087890625,18.3682,7.465325087890625Q18.6807,7.305815087890625,18.8532,7.020985087890625ZM8.76432,7.559725087890625L8.13444,7.559725087890625L8.13444,4.214996087890625L7.28971,4.700025087890625L7.2946,4.070139087890625L8.310220000000001,3.479319087890625L8.76432,3.479319087890625L8.76432,7.559725087890625ZM17.1816,4.955555087890625Q17.0042,4.784655087890625,17.0042,4.5095950878906255Q17.0042,4.229645087890625,17.18,4.057119087890625Q17.355800000000002,3.884592087890625,17.6455,3.884592087890625Q17.935200000000002,3.884592087890625,18.1077,4.057119087890625Q18.2803,4.229645087890625,18.2803,4.5095950878906255Q18.2803,4.784655087890625,18.1045,4.955555087890625Q17.930300000000003,5.124825087890625,17.6455,5.124825087890625Q17.3607,5.124825087890625,17.1816,4.955555087890625ZM18.2217,5.7953950878906255Q18.4398,6.005365087890625,18.4398,6.3552950878906245Q18.4398,6.705235087890625,18.2217,6.915195087890625Q18.0052,7.125155087890625,17.6455,7.125155087890625Q17.285800000000002,7.125155087890625,17.067700000000002,6.915195087890625Q16.849600000000002,6.705235087890625,16.849600000000002,6.3552950878906245Q16.849600000000002,6.005365087890625,17.064500000000002,5.7953950878906255Q17.2793,5.585435087890625,17.6455,5.585435087890625Q18.0052,5.585435087890625,18.2217,5.7953950878906255ZM9.60768,11.711495087890626C9.85136,11.444785087890626,10,11.089765087890626,10,10.700025087890625C10,9.871595087890626,9.32843,9.200025087890625,8.5,9.200025087890625C7.67157,9.200025087890625,7,9.871595087890626,7,10.700025087890625C7,10.809205087890625,7.01167,10.915665087890625,7.03382,11.018215087890624L3.5247,15.200215087890625C3.51648,15.200115087890625,3.5082500000000003,15.200015087890625,3.5,15.200015087890625C2.671573,15.200015087890625,2,15.871615087890625,2,16.700015087890627C2,17.528415087890625,2.671573,18.200015087890627,3.5,18.200015087890627C4.32843,18.200015087890627,5,17.528415087890625,5,16.700015087890627C5,16.258515087890625,4.80921,15.861515087890625,4.50558,15.587015087890626L7.59952,11.899765087890625C7.8503,12.088295087890625,8.162099999999999,12.200025087890625,8.5,12.200025087890625C8.57314,12.200025087890625,8.645050000000001,12.194785087890626,8.71539,12.184675087890625L11.3216,15.771815087890625C11.12019,16.027215087890625,11,16.349515087890623,11,16.700015087890627C11,17.528415087890625,11.67157,18.200015087890627,12.5,18.200015087890627C13.3284,18.200015087890627,14,17.528415087890625,14,16.700015087890627C14,16.336015087890623,13.8703,16.002315087890626,13.6547,15.742515087890625L16.781,12.016775087890625C16.994500000000002,12.133605087890626,17.2395,12.200025087890625,17.5,12.200025087890625C18.3284,12.200025087890625,19,11.528445087890624,19,10.700025087890625C19,9.871595087890626,18.3284,9.200025087890625,17.5,9.200025087890625C16.671599999999998,9.200025087890625,16,9.871595087890626,16,10.700025087890625C16,10.898765087890624,16.0387,11.088475087890625,16.108800000000002,11.262055087890625L12.7823,15.226515087890625C12.6908,15.209115087890625,12.5965,15.200015087890625,12.5,15.200015087890625C12.3862,15.200015087890625,12.2754,15.212715087890626,12.1689,15.236715087890625L9.60768,11.711495087890626Z stroke-opacity=0 stroke=none>');const gz=()=>fz();var vz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M9.474616630859375,7.494615087890625L8.844736630859375,7.494615087890625L8.844736630859375,4.149892087890625L8.000006630859374,4.634915087890625L8.004896630859374,4.005035087890625L9.020516630859376,3.414215087890625L9.474616630859375,3.414215087890625L9.474616630859375,7.494615087890625ZM18.529296630859378,4.8318550878906255Q18.307996630859375,5.028795087890625,18.122396630859377,5.385245087890625Q17.868496630859376,5.019035087890625,17.629196630859376,4.8269750878906255Q17.389996630859375,4.634915087890625,17.168596630859376,4.634915087890625Q16.794296630859375,4.634915087890625,16.522496630859376,4.976715087890625Q16.252296630859377,5.3168850878906255,16.252296630859377,5.7856350878906255Q16.252296630859377,6.218575087890625,16.502896630859375,6.521315087890625Q16.755196630859373,6.822415087890625,17.114896630859377,6.822415087890625Q17.368796630859375,6.822415087890625,17.588596630859374,6.625475087890624Q17.809896630859377,6.428535087890625,17.998696630859374,6.0688350878906245Q18.249396630859373,6.439935087890625,18.488596630859377,6.631985087890625Q18.727896630859377,6.822415087890625,18.952496630859375,6.822415087890625Q19.326796630859373,6.822415087890625,19.596996630859376,6.482245087890625Q19.868796630859375,6.140455087890626,19.868796630859375,5.671705087890626Q19.868796630859375,5.238755087890625,19.618196630859376,4.937655087890625Q19.367496630859375,4.634915087890625,19.006196630859375,4.634915087890625Q18.750696630859377,4.634915087890625,18.529296630859378,4.8318550878906255ZM18.337296630859377,5.674955087890625L18.278696630859375,5.596835087890625Q18.449596630859375,5.272935087890625,18.622096630859374,5.1101750878906245Q18.794596630859374,4.947415087890625,18.967096630859373,4.947415087890625Q19.194996630859375,4.947415087890625,19.346396630859374,5.1345950878906255Q19.497696630859377,5.320135087890625,19.497696630859377,5.598455087890625Q19.497696630859377,5.8914250878906245,19.360996630859376,6.096505087890625Q19.224296630859374,6.301585087890626,19.027396630859375,6.301585087890626Q18.915096630859374,6.301585087890626,18.742496630859375,6.146965087890624Q18.569996630859375,5.992335087890625,18.337296630859377,5.674955087890625ZM17.785496630859377,5.779125087890625L17.842496630859372,5.857245087890625Q17.668296630859373,6.186025087890625,17.495796630859374,6.348785087890625Q17.324896630859374,6.509915087890625,17.153996630859375,6.509915087890625Q16.926096630859377,6.509915087890625,16.774796630859377,6.324375087890624Q16.623396630859375,6.137195087890625,16.623396630859375,5.858875087890625Q16.623396630859375,5.565905087890625,16.761696630859376,5.360825087890625Q16.900096630859373,5.1557550878906255,17.095396630859376,5.1557550878906255Q17.228896630859374,5.1557550878906255,17.365596630859375,5.2778250878906245Q17.502296630859377,5.399895087890625,17.785496630859377,5.779125087890625ZM10.710296630859375,10.634915087890626C10.710296630859375,11.024655087890626,10.561656630859375,11.379685087890625,10.317976630859375,11.646395087890625L12.879196630859376,15.171615087890626C12.985696630859374,15.147615087890625,13.096496630859376,15.134915087890626,13.210296630859375,15.134915087890626C13.306796630859376,15.134915087890626,13.401096630859374,15.144015087890624,13.492596630859374,15.161415087890624L16.819096630859377,11.196955087890625C16.748996630859374,11.023375087890624,16.710296630859375,10.833655087890625,16.710296630859375,10.634915087890626C16.710296630859375,9.806495087890625,17.381896630859373,9.134915087890626,18.210296630859375,9.134915087890626C19.038696630859373,9.134915087890626,19.710296630859375,9.806495087890625,19.710296630859375,10.634915087890626C19.710296630859375,11.463345087890625,19.038696630859373,12.134915087890626,18.210296630859375,12.134915087890626C17.949796630859375,12.134915087890626,17.704796630859377,12.068505087890625,17.491296630859374,11.951675087890624L14.364996630859375,15.677415087890624C14.580596630859375,15.937215087890625,14.710296630859375,16.270915087890625,14.710296630859375,16.634915087890626C14.710296630859375,17.463315087890624,14.038696630859375,18.134915087890626,13.210296630859375,18.134915087890626C12.381866630859374,18.134915087890626,11.710296630859375,17.463315087890624,11.710296630859375,16.634915087890626C11.710296630859375,16.284415087890626,11.830486630859374,15.962015087890626,12.031896630859375,15.706715087890625L9.425686630859374,12.119565087890624C9.355346630859376,12.129685087890625,9.283436630859375,12.134915087890626,9.210296630859375,12.134915087890626C8.872396630859374,12.134915087890626,8.560596630859376,12.023195087890626,8.309816630859375,11.834665087890626L5.215876630859375,15.521915087890624C5.519506630859375,15.796415087890624,5.710296630859375,16.193415087890624,5.710296630859375,16.634915087890626C5.710296630859375,17.463315087890624,5.038726630859375,18.134915087890626,4.210296630859375,18.134915087890626C3.381869630859375,18.134915087890626,2.710296630859375,17.463315087890624,2.710296630859375,16.634915087890626C2.710296630859375,15.806515087890626,3.381869630859375,15.134915087890626,4.210296630859375,15.134915087890626C4.218546630859375,15.134915087890626,4.226776630859375,15.135015087890626,4.234996630859375,15.135115087890625L7.744116630859375,10.953115087890625C7.721966630859375,10.850565087890626,7.710296630859375,10.744105087890624,7.710296630859375,10.634915087890626C7.710296630859375,9.806495087890625,8.381866630859374,9.134915087890626,9.210296630859375,9.134915087890626C10.038726630859376,9.134915087890626,10.710296630859375,9.806495087890625,10.710296630859375,10.634915087890626Z stroke-opacity=0 stroke=none>');const mz=()=>vz();var yz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M21,5.5C21,6.32843,20.3284,7,19.5,7C19.4136,7,19.3289,6.99269,19.2465,6.97866L15.6257,15.5086C15.8587,15.7729,16,16.119999999999997,16,16.5C16,17.328400000000002,15.3284,18,14.5,18C13.8469,18,13.2913,17.5826,13.0854,17L3.91465,17C3.70873,17.5826,3.15311,18,2.5,18C1.671573,18,1,17.328400000000002,1,16.5C1,15.6716,1.671573,15,2.5,15C2.5840199999999998,15,2.66643,15.0069,2.74668,15.0202L6.36934,6.48574C6.13933,6.22213,6,5.87733,6,5.5C6,4.671573,6.67157,4,7.5,4C8.15311,4,8.70873,4.417404,8.91465,5L18.0854,5C18.2913,4.417404,18.8469,4,19.5,4C20.3284,4,21,4.671573,21,5.5ZM18.0854,6L8.91465,6C8.892579999999999,6.06243,8.8665,6.12296,8.83672,6.18128L13.9814,15.0921C14.143,15.0325,14.3177,15,14.5,15C14.584,15,14.6664,15.0069,14.7467,15.0202L18.3693,6.48574C18.2462,6.3446,18.149,6.1802,18.0854,6ZM13.2036,15.745L8.0861,6.8811800000000005C7.90605,6.95768,7.70797,7,7.5,7C7.41359,7,7.32888,6.99269,7.24647,6.97866L3.62571,15.5086C3.7512,15.651,3.8501,15.8174,3.91465,16L13.0854,16C13.1169,15.9108,13.1566,15.8255,13.2036,15.745Z stroke-opacity=0 stroke=none>');const bz=()=>yz();var xz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M5.92159,5.93994C6.04014,5.90529,6.152620000000001,5.85639,6.25704,5.79523L9.12729,9.89437C9.045449999999999,10.07959,9,10.28449,9,10.5C9,10.79522,9.08529,11.07053,9.232569999999999,11.30262L4.97573,16.7511L5.92159,5.93994ZM4.92259,5.8848400000000005C4.38078,5.658659999999999,4,5.1238,4,4.5C4,3.671573,4.67157,3,5.5,3C6.2157,3,6.81433,3.50124,6.96399,4.17183L15.1309,4.88634C15.3654,4.36387,15.8902,4,16.5,4C17.328400000000002,4,18,4.67157,18,5.5C18,6.08983,17.659599999999998,6.60015,17.1645,6.84518L18.4264,14.0018C18.4508,14.0006,18.4753,14,18.5,14C19.3284,14,20,14.6716,20,15.5C20,16.328400000000002,19.3284,17,18.5,17C17.932499999999997,17,17.4386,16.6849,17.183799999999998,16.22L5.99686,18.5979C5.946429999999999,19.3807,5.29554,20,4.5,20C3.671573,20,3,19.3284,3,18.5C3,17.869300000000003,3.389292,17.3295,3.94071,17.1077L4.92259,5.8848400000000005ZM5.72452,17.6334C5.69799,17.596,5.6698,17.5599,5.64004,17.525100000000002L10.01843,11.92103C10.16958,11.97223,10.33155,12,10.5,12C10.80059,12,11.08052,11.91158,11.31522,11.75934L17.0606,15.0765C17.0457,15.1271,17.0335,15.1789,17.023899999999998,15.2317L5.72452,17.6334ZM11.92855,10.95875L17.4349,14.1379L16.1699,6.96356C15.9874,6.92257,15.8174,6.8483,15.6667,6.74746L11.99771,10.4165C11.99923,10.44414,12,10.47198,12,10.5C12,10.66,11.97495,10.814160000000001,11.92855,10.95875ZM10.5,9C10.259830000000001,9,10.03285,9.05644,9.83159,9.15679L7.04919,5.1831L15.0493,5.88302C15.054,5.90072,15.059,5.91829,15.0643,5.9357299999999995L11.56066,9.43934C11.28921,9.16789,10.91421,9,10.5,9Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const wz=()=>xz();var Cz=q('<svg viewBox="0 0 22 22"><path d=M4.727219638671875,8.007996215820313L9.973849638671876,2.7629472158203123C10.167279638671875,2.5696791158203123,10.480729638671875,2.5696791158203123,10.674169638671875,2.7629472158203123L13.223329638671874,5.311756215820313C13.416929638671874,5.505236215820313,13.416929638671874,5.8189862158203125,13.223329638671874,6.012466215820313L7.977129638671875,11.257906215820313C7.379859638671875,11.855176215820313,7.407609638671875,12.909396215820312,8.033809638671876,13.535596215820313C8.660409638671876,14.162596215820313,9.713849638671874,14.189996215820312,10.311129638671876,13.591896215820313L15.556929638671875,8.346066215820311C15.750429638671875,8.152526215820313,16.064229638671875,8.152526215820313,16.257629638671872,8.346066215820311L18.806529638671876,10.895266215820312C19.000029638671876,11.088746215820313,19.000029638671876,11.402496215820312,18.806529638671876,11.595976215820313L13.560629638671875,16.841796215820313C11.165619638671876,19.237196215820312,7.197149638671875,19.19919621582031,4.783499638671875,16.785496215820313C2.3698426386718747,14.371896215820312,2.331397638671875,10.403416215820313,4.727219638671875,8.007996215820313ZM12.172299638671875,5.662106215820312L10.323809638671875,3.8136162158203124L5.4287196386718755,8.709096215820313C3.422893638671875,10.714536215820312,3.4549956386718748,14.055196215820313,5.484999638671875,16.08479621582031C7.514609638671875,18.114796215820313,10.855289638671875,18.146496215820314,12.860719638671876,16.141096215820312L15.465629638671874,13.535796215820312L14.090929638671875,12.160756215820312L14.791629638671875,11.460436215820312L16.166229638671876,12.834996215820313L17.755829638671877,11.245226215820313L15.907729638671874,9.396736215820312L11.011839638671875,14.292596215820312C10.042809638671875,15.262396215820312,8.418249638671874,15.243796215820312,7.406019638671875,14.306496215820312L7.333099638671875,14.236296215820312C6.327599638671876,13.230796215820313,6.284009638671876,11.550396215820312,7.276419638671875,10.557586215820312L9.882199638671874,7.952026215820313L8.501079638671875,6.570906215820313L9.201789638671876,5.870186215820313L10.582939638671874,7.251336215820312L12.172299638671875,5.662106215820312Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const _z=e=>(()=>{var t=Cz();return Ve(t,"class",`icon-overlay ${e??""}`),t})();var Sz=q('<svg viewBox="0 0 22 22"><defs><clipPath id=master_svg0_151_615><rect x=0 y=0 width=22 height=22 rx=0></rect></clipPath></defs><g clip-path=url(#master_svg0_151_615)><path d=M19.672,3.0673368C19.4417,2.9354008,19.1463,3.00292252,18.9994,3.2210900000000002L17.4588,5.50622L16.743299999999998,3.781253L13.9915,7.4662L13.9618,7.51108C13.8339,7.72862,13.8936,8.005659999999999,14.1004,8.15391L14.1462,8.183430000000001C14.3683,8.308720000000001,14.6511,8.25001,14.8022,8.047229999999999L16.4907,5.78571L17.246299999999998,7.60713L19.8374,3.7635389999999997L19.8651,3.717088C19.9871,3.484615,19.9023,3.199273,19.672,3.0673368ZM4.79974,8.462530000000001L10.117740000000001,3.252975C10.31381,3.0610145,10.63152,3.0610145,10.82759,3.252975L13.4115,5.78453C13.6076,5.976710000000001,13.6076,6.28833,13.4115,6.4805L8.093869999999999,11.69045C7.48847,12.28368,7.51659,13.3308,8.151309999999999,13.9528C8.786439999999999,14.5755,9.85421,14.6027,10.45961,14.0087L15.7768,8.79831C15.9729,8.60609,16.2909,8.60609,16.487099999999998,8.79831L19.0705,11.33026C19.2667,11.52244,19.2667,11.83406,19.0705,12.02623L13.7533,17.2366C11.32572,19.6158,7.30328,19.578,4.85679,17.1807C2.410298,14.7834,2.371331,10.84174,4.79974,8.462530000000001ZM12.3461,6.1325199999999995L10.47246,4.29654L5.51079,9.15889C3.477674,11.15076,3.510214,14.4688,5.56784,16.4847C7.62506,18.500999999999998,11.01117,18.5325,13.0439,16.540599999999998L15.6842,13.9529L14.2908,12.58718L15.0011,11.89161L16.394399999999997,13.2569L18.0056,11.67786L16.1323,9.84188L11.16985,14.7046C10.18764,15.6679,8.540980000000001,15.6494,7.51498,14.7184L7.44107,14.6487C6.4219,13.65,6.37771,11.98096,7.38362,10.994869999999999L10.02485,8.40693L8.624939999999999,7.03516L9.335180000000001,6.33919L10.73512,7.71099L12.3461,6.1325199999999995Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const kz=e=>(()=>{var t=Sz();return Ve(t,"class",`icon-overlay ${e??""}`),t})();var Mz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11,17C5.80945,17,3.667717,12.85,3.113386,11.575C2.9622047,11.2,2.9622047,10.8,3.113386,10.425C3.667717,9.15,5.80945,5,11,5C16.165399999999998,5,18.3323,9.15,18.8866,10.425C19.0378,10.8,19.0378,11.2,18.8866,11.575C18.3323,12.85,16.165399999999998,17,11,17ZM4.04567,10.8C3.995276,10.925,3.995276,11.05,4.04567,11.175C4.52441,12.325,6.43937,16,11,16C15.5606,16,17.4756,12.325,17.9543,11.2C18.0047,11.075,18.0047,10.95,17.9543,10.825C17.4756,9.675,15.5606,6,11,6C6.43937,6,4.52441,9.675,4.04567,10.8ZM11,13.5C9.61417,13.5,8.480319999999999,12.375,8.480319999999999,11C8.480319999999999,9.625,9.61417,8.5,11,8.5C12.38583,8.5,13.5197,9.625,13.5197,11C13.5197,12.375,12.38583,13.5,11,13.5ZM11,9.5C10.1685,9.5,9.48819,10.175,9.48819,11C9.48819,11.825,10.1685,12.5,11,12.5C11.8315,12.5,12.51181,11.825,12.51181,11C12.51181,10.175,11.8315,9.5,11,9.5Z stroke-opacity=0 fill-opacity=1>');const Tz=()=>Mz();var Ez=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M5.80417,14.9887L4.62563,16.167299999999997C4.43037,16.3625,4.43037,16.6791,4.62563,16.8744C4.82089,17.0696,5.13748,17.0696,5.332739999999999,16.8744L6.62638,15.5807C7.75595,16.290100000000002,9.19328,16.7929,11,16.7929C16.165399999999998,16.7929,18.3323,12.64289,18.8866,11.36789C19.0378,10.99289,19.0378,10.59289,18.8866,10.21789C18.5549,9.45486,17.6456,7.66212,15.8617,6.34545L17.3536,4.853553C17.5488,4.658291,17.5488,4.341709,17.3536,4.146447C17.1583,3.9511845,16.8417,3.9511845,16.6464,4.146447L15.0014,5.7915399999999995C13.9314,5.1969,12.61166,4.792893,11,4.792893C5.80945,4.792893,3.667717,8.94289,3.113386,10.21789C2.9622049,10.59289,2.9622049,10.99289,3.113386,11.36789C3.424435,12.08333,4.2353000000000005,13.70399,5.80417,14.9887ZM7.36012,14.847C8.32327,15.4074,9.52286,15.7929,11,15.7929C15.5606,15.7929,17.4756,12.11789,17.9543,10.99289C18.0047,10.86789,18.0047,10.74289,17.9543,10.61789C17.659,9.90846,16.8171,8.23812,15.1447,7.06241L12.96929,9.23782C13.3134,9.66543,13.5197,10.20642,13.5197,10.79289C13.5197,12.16789,12.38583,13.29289,11,13.29289C10.41596,13.29289,9.87667,13.09308,9.44815,12.75896L7.36012,14.847ZM8.794609999999999,11.99829L6.520099999999999,14.2728C5.06905,13.12119,4.32057,11.628250000000001,4.04567,10.96789C3.995275,10.84289,3.995275,10.71789,4.04567,10.59289C4.52441,9.46789,6.43937,5.79289,11,5.79289C12.28868,5.79289,13.3661,6.086320000000001,14.2596,6.53329L12.19759,8.5953C11.84086,8.40257,11.43271,8.29289,11,8.29289C9.61417,8.29289,8.480319999999999,9.41789,8.480319999999999,10.79289C8.480319999999999,11.22918,8.594470000000001,11.64029,8.794609999999999,11.99829ZM10.16528,12.04183C10.404869999999999,12.20032,10.692070000000001,12.29289,11,12.29289C11.8315,12.29289,12.51181,11.61789,12.51181,10.79289C12.51181,10.48318,12.41593,10.194600000000001,12.25216,9.95494L10.16528,12.04183ZM11.43602,9.35687L9.55616,11.236740000000001C9.512,11.09633,9.48819,10.94724,9.48819,10.79289C9.48819,9.96789,10.1685,9.29289,11,9.29289C11.15142,9.29289,11.29782,9.31528,11.43602,9.35687Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Iz=()=>Ez();var Lz=q('<svg class=icon-overlay viewBox="0 0 22 22"><defs><clipPath id=master_svg0_151_625><rect x=0 y=0 width=22 height=22 rx=0></rect></clipPath></defs><g clip-path=url(#master_svg0_151_625)><path d=M14.5385,9.76923L15.6538,9.76923C16.6538,9.76923,17.4615,10.576920000000001,17.4615,11.576920000000001L17.4615,17.1923C17.4615,18.1923,16.6538,19,15.6538,19L5.80769,19C4.807692,19,4,18.1923,4,17.1923L4,11.576920000000001C4,10.576920000000001,4.807692,9.76923,5.80769,9.76923L7.23077,9.76923L7.23077,7.576919999999999C7.23077,5.61538,8.88462,4,10.88462,4C12.88462,4,14.5385,5.61538,14.5385,7.576919999999999L14.5385,9.76923ZM10.88461,5.15385C9.5,5.15385,8.38461,6.23077,8.38461,7.576919999999999L8.38461,9.76923L13.38462,9.76923L13.38462,7.576919999999999C13.38462,6.23077,12.26923,5.15385,10.88461,5.15385ZM15.6538,17.8462C16,17.8462,16.3077,17.5385,16.3077,17.1923L16.3077,11.576920000000001C16.3077,11.23077,16,10.923079999999999,15.6538,10.923079999999999L5.80769,10.923079999999999C5.46154,10.923079999999999,5.15385,11.23077,5.15385,11.576920000000001L5.15385,17.1923C5.15385,17.5385,5.46154,17.8462,5.80769,17.8462L15.6538,17.8462ZM10.153839999999999,12.65385C10.153839999999999,12.34615,10.42307,12.07692,10.73076,12.07692C11.038450000000001,12.07692,11.307680000000001,12.34615,11.307680000000001,12.65385L11.307680000000001,14.5769C11.307680000000001,14.8846,11.038450000000001,15.1538,10.73076,15.1538C10.42307,15.1538,10.153839999999999,14.8846,10.153839999999999,14.5769L10.153839999999999,12.65385Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Pz=()=>Lz();var Az=q('<svg class=icon-overlay viewBox="0 0 22 22"><defs><clipPath id=master_svg0_151_620><rect x=0 y=0 width=22 height=22 rx=0></rect></clipPath></defs><g clip-path=url(#master_svg0_151_620)><path d=M8.38461,9.76923L15.6538,9.76923C16.6538,9.76923,17.4615,10.576920000000001,17.4615,11.576920000000001L17.4615,17.1923C17.4615,18.1923,16.6538,19,15.6538,19L5.80769,19C4.807692,19,4,18.1923,4,17.1923L4,11.576920000000001C4,10.576920000000001,4.807693,9.76923,5.80769,9.76923L7.23077,9.76923L7.23077,7.576919999999999C7.23077,5.61538,8.88462,4,10.88462,4C12.46154,4,13.84615,4.961539,14.3462,6.423080000000001C14.4615,6.73077,14.3077,7.038460000000001,14,7.15385C13.69231,7.26923,13.38461,7.11538,13.26923,6.80769C12.92308,5.80769,11.96154,5.15385,10.88462,5.15385C9.5,5.15385,8.38461,6.23077,8.38461,7.576919999999999L8.38461,9.76923ZM15.6538,17.8462C16,17.8462,16.3077,17.5385,16.3077,17.1923L16.3077,11.576920000000001C16.3077,11.23077,16,10.923079999999999,15.6538,10.923079999999999L5.80769,10.923079999999999C5.46154,10.923079999999999,5.15385,11.23077,5.15385,11.576920000000001L5.15385,17.1923C5.15385,17.5385,5.46154,17.8462,5.80769,17.8462L15.6538,17.8462ZM10.153839999999999,12.65385C10.153839999999999,12.34615,10.42307,12.07692,10.73076,12.07692C11.03846,12.07692,11.307690000000001,12.34615,11.307690000000001,12.65385L11.307690000000001,14.5769C11.307690000000001,14.8846,11.03846,15.1538,10.73076,15.1538C10.42307,15.1538,10.153839999999999,14.8846,10.153839999999999,14.5769L10.153839999999999,12.65385Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Dz=()=>Az();var Fz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M16.966900000000003,8.67144C16.6669,8.67144,16.4247,8.91558,16.4247,9.21802L16.4247,16.631500000000003C16.4247,17.322,16.007199999999997,17.9068,15.5139,17.9068L13.93072,17.9068L13.93072,9.2162C13.93072,8.91741,13.68675,8.67144,13.38855,8.67144C13.09036,8.67144,12.84639,8.91741,12.84639,9.21802L12.84639,17.9068L10.151810000000001,17.9068L10.151810000000001,9.21802C10.151810000000001,8.91741,9.90783,8.67144,9.609639999999999,8.67144C9.31145,8.67144,9.06747,8.91741,9.06747,9.219850000000001L9.06747,17.9068L7.48614,17.9068C6.99277,17.9068,6.5753,17.322,6.5753,16.631500000000003L6.5753,9.21802C6.5753,8.91558,6.333130000000001,8.67144,6.03313,8.67144C5.73313,8.67144,5.49096,8.91558,5.49096,9.21802L5.49096,16.631500000000003C5.49096,17.9378,6.385540000000001,19,7.48614,19L15.512,19C16.6127,19,17.509,17.9378,17.509,16.631500000000003L17.509,9.21802C17.509,8.91558,17.2669,8.67144,16.966900000000003,8.67144ZM18.4578,6.21183L4.542169,6.21183C4.243976,6.21183,4,6.45779,4,6.75841C4,7.05903,4.243976,7.30499,4.542169,7.30499L18.4578,7.30499C18.756,7.30499,19,7.05903,19,6.75841C19,6.45779,18.756,6.21183,18.4578,6.21183ZM8.68072,5.10045L14.3193,5.10045C14.6175,5.10045,14.8614,4.852666,14.8614,4.550225C14.8614,4.247783,14.6175,4,14.3193,4L8.68072,4C8.38253,4,8.13855,4.247783,8.13855,4.550225C8.13855,4.852666,8.38253,5.10045,8.68072,5.10045Z stroke-opacity=0 fill-opacity=1>');const Rz=()=>Fz();var Oz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=m15.57,0.2l-15.37,15.37l6.33,6.33l15.37,-15.37l-6.33,-6.33zm-13.56,15.37l0.89,-0.89l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.92,-0.92l0.9,0.9l0.9,-0.9l-0.9,-0.9l0.9,-0.9l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.89,-0.89l0.9,0.9l0.9,-0.9l-0.9,-0.9l0.9,-0.9l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.92,-0.92l0.9,0.9l0.9,-0.9l-0.9,-0.9l0.9,-0.9l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.91,-0.91l4.52,4.52l-13.56,13.56l-4.52,-4.52z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Nz=()=>Oz();var zz=q('<svg width=30 height=40 fill=currentColor stroke=currentColor stroke-width=0.06 stroke-linecap=round fill-rule=evenodd clip-rule=evenodd shape-rendering=geometricPrecision text-rendering=geometricPrecision viewBox="0 0 1.45 1.63"><circle transform="matrix(-1.01724 -0.370788 0.370788 -1.01724 0.140283 1.49275)"r=0.13></circle><line fill=transparent x1=0.15 y1=1.49 x2=1.31 y2=1.49></line><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.140293 0.140278)"r=0.13></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.140293 0.945028)"r=0.13></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 1.3066 0.945028)"r=0.13></circle><line fill=transparent x1=1.31 y1=0.14 x2=0.15 y2=0.14></line><line fill=transparent x1=1.31 y1=0.95 x2=0.15 y2=0.95></line><line fill=transparent x1=0.65 y1=1.11 x2=0.65 y2=0.53></line><path fill=transparent d="M0.8 0.42l-0.11 -0.17c-0.02,-0.03 -0.05,-0.03 -0.08,0l-0.11 0.17c-0.02,0.04 -0.02,0.09 0,0.13 0.15,0 0.15,0 0.3,0 0.02,-0.04 0.02,-0.09 0,-0.13z"></path><path fill=transparent d="M0.8 1.21l-0.11 0.17c-0.02,0.04 -0.05,0.03 -0.08,0l-0.11 -0.17c-0.02,-0.04 -0.02,-0.09 0,-0.13 0.15,0 0.15,0 0.3,0 0.02,0.04 0.02,0.09 0,0.13z">');const $z=()=>zz();var Bz=q('<svg width=30 height=40 fill=currentColor stroke=currentColor stroke-width=0.06 stroke-linecap=round fill-rule=evenodd clip-rule=evenodd shape-rendering=geometricPrecision text-rendering=geometricPrecision viewBox="0 0 1.71 1.93"><circle transform="matrix(-1.01724 -0.370788 0.370788 -1.01724 0.165745 1.76369)"r=0.15></circle><line fill=none x1=0.18 y1=1.76 x2=1.54 y2=1.76></line><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.165756 0.165739)"r=0.15></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.165756 0.788812)"r=0.15></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 1.54375 0.788812)"r=0.15></circle><line fill=none x1=1.54 y1=0.17 x2=0.18 y2=0.17></line><line fill=none x1=1.54 y1=0.79 x2=0.18 y2=0.79></line><line fill=none x1=0.77 y1=1.31 x2=0.77 y2=0.63></line><path fill=transparent d="M0.95 0.5l-0.13 -0.2c-0.03,-0.04 -0.07,-0.04 -0.09,0l-0.13 0.2c-0.03,0.04 -0.03,0.11 0,0.15 0.16,0 0.17,0 0.35,0 0.02,-0.04 0.02,-0.11 0,-0.15z"></path><path fill=transparent d="M0.95 1.43l-0.13 0.2c-0.03,0.04 -0.07,0.04 -0.09,0l-0.13 -0.2c-0.03,-0.04 -0.03,-0.11 0,-0.15 0.16,0 0.17,0 0.35,0 0.02,0.04 0.02,0.11 0,0.15z">');const Vz=()=>Bz();var Wz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d="M6 4V18M4 18H8M10 7V4H2V7M17 4V18M17 4L14 7M17 4L20 7M17 18L14 15M17 18L20 15"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');const Uz=()=>Wz();var Hz=q('<svg class=icon-overlay viewBox="0 0 22 22"><path d="M11 2V11M8 11H14M19 5V2H3V5M3 17H19M3 17L6 20M3 17L6 14M19 17L16 20M19 17L16 14"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');const Yz=()=>Hz(),Xz={horizontalStraightLine:mN,horizontalRayLine:bN,horizontalSegment:wN,verticalStraightLine:_N,verticalRayLine:kN,verticalSegment:TN,straightLine:IN,rayLine:PN,segment:DN,arrow:RN,priceLine:NN,priceChannelLine:$N,parallelStraightLine:VN,fibonacciLine:UN,fibonacciSegment:YN,fibonacciCircle:jN,fibonacciSpiral:GN,fibonacciSpeedResistanceFan:QN,fibonacciExtension:JN,gannBox:tz,circle:nz,triangle:oz,rect:sz,parallelogram:cz,threeWaves:dz,fiveWaves:pz,eightWaves:gz,anyWaves:mz,abcd:bz,xabcd:wz,weak_magnet:_z,strong_magnet:kz,lock:Pz,unlock:Dz,visible:Tz,invisible:Iz,remove:Rz,ruler:Nz,longPosition:$z,shortPosition:Vz,simpleAnnotation:Uz,simpleTag:Yz};function jz(e){return[{key:"horizontalStraightLine",text:I("horizontal_straight_line",e)},{key:"horizontalRayLine",text:I("horizontal_ray_line",e)},{key:"horizontalSegment",text:I("horizontal_segment",e)},{key:"verticalStraightLine",text:I("vertical_straight_line",e)},{key:"verticalRayLine",text:I("vertical_ray_line",e)},{key:"verticalSegment",text:I("vertical_segment",e)},{key:"straightLine",text:I("straight_line",e)},{key:"rayLine",text:I("ray_line",e)},{key:"segment",text:I("segment",e)},{key:"arrow",text:I("arrow",e)},{key:"priceLine",text:I("price_line",e)}]}function Zz(e){return[{key:"priceChannelLine",text:I("price_channel_line",e)},{key:"parallelStraightLine",text:I("parallel_straight_line",e)}]}function Gz(e){return[{key:"circle",text:I("circle",e)},{key:"rect",text:I("rect",e)},{key:"parallelogram",text:I("parallelogram",e)},{key:"triangle",text:I("triangle",e)}]}function qz(e){return[{key:"fibonacciLine",text:I("fibonacci_line",e)},{key:"fibonacciSegment",text:I("fibonacci_segment",e)},{key:"fibonacciCircle",text:I("fibonacci_circle",e)},{key:"fibonacciSpiral",text:I("fibonacci_spiral",e)},{key:"fibonacciSpeedResistanceFan",text:I("fibonacci_speed_resistance_fan",e)},{key:"fibonacciExtension",text:I("fibonacci_extension",e)},{key:"gannBox",text:I("gann_box",e)}]}function Qz(e){return[{key:"xabcd",text:I("xabcd",e)},{key:"abcd",text:I("abcd",e)},{key:"threeWaves",text:I("three_waves",e)},{key:"fiveWaves",text:I("five_waves",e)},{key:"eightWaves",text:I("eight_waves",e)},{key:"anyWaves",text:I("any_waves",e)}]}function Kz(e){return[{key:"weak_magnet",text:I("weak_magnet",e)},{key:"strong_magnet",text:I("strong_magnet",e)}]}function Jz(e){return[{key:"ruler",text:I("ruler",e)}]}function e$(e){return[{key:"longPosition",text:I("long_position",e)},{key:"shortPosition",text:I("short_position",e)}]}function t$(e){return[{key:"simpleAnnotation",text:I("simpleAnnotation",e)},{key:"simpleTag",text:I("simpleTag",e)}]}const Io=e=>Xz[e.name](e.class);var xg=q("<span class=split-line>"),r$=q('<div class=item tabindex=0><span style=width:32px;height:32px></span><div class=icon-arrow><svg viewBox="0 0 4 6"><path d=M1.07298,0.159458C0.827521,-0.0531526,0.429553,-0.0531526,0.184094,0.159458C-0.0613648,0.372068,-0.0613648,0.716778,0.184094,0.929388L2.61275,3.03303L0.260362,5.07061C0.0149035,5.28322,0.0149035,5.62793,0.260362,5.84054C0.505822,6.05315,0.903789,6.05315,1.14925,5.84054L3.81591,3.53075C4.01812,3.3556,4.05374,3.0908,3.92279,2.88406C3.93219,2.73496,3.87113,2.58315,3.73964,2.46925L1.07298,0.159458Z stroke=none stroke-opacity=0>'),wg=q("<div class=item><span style=width:32px;height:32px>"),n$=q("<div class=chartspire-ui-drawing-bar><div class=toggle-container>"),by=q("<div class=item tabindex=0><span style=width:32px;height:32px>"),xy=q('<div class=icon-arrow><svg viewBox="0 0 4 6"><path d=M1.07298,0.159458C0.827521,-0.0531526,0.429553,-0.0531526,0.184094,0.159458C-0.0613648,0.372068,-0.0613648,0.716778,0.184094,0.929388L2.61275,3.03303L0.260362,5.07061C0.0149035,5.28322,0.0149035,5.62793,0.260362,5.84054C0.505822,6.05315,0.903789,6.05315,1.14925,5.84054L3.81591,3.53075C4.01812,3.3556,4.05374,3.0908,3.92279,2.88406C3.93219,2.73496,3.87113,2.58315,3.73964,2.46925L1.07298,0.159458Z stroke=none stroke-opacity=0>'),i$=q("<div class=chartspire-ui-drawing-bar-dropdowns><div class=dropdown-list>"),o$=q('<li style="cursor:pointer;display:flex;align-items:center;padding:8px 12px;user-select:none;"><div class=icon-overlay style=pointer-events:none;></div><span style=pointer-events:none;>');const Cg="drawing_tools",a$=e=>{const[t,r]=ye("horizontalStraightLine"),[n,i]=ye("priceChannelLine"),[o,s]=ye("circle"),[u,d]=ye("fibonacciLine"),[h,p]=ye("xabcd"),[f,m]=ye("ruler"),[x,b]=ye("longPosition"),[C,_]=ye("simpleAnnotation"),[k,M]=ye("weak_magnet"),[L,A]=ye("normal"),[P,W]=ye(!1),[D,$]=ye(!0),[z,B]=ye(""),[Z,J]=ye({top:0,item:null});let H={};const ee=Yt(()=>[{key:"singleLine",icon:t(),list:jz(e.locale),setter:r},{key:"moreLine",icon:n(),list:Zz(e.locale),setter:i},{key:"polygon",icon:o(),list:Gz(e.locale),setter:s},{key:"fibonacci",icon:u(),list:qz(e.locale),setter:d},{key:"wave",icon:h(),list:Qz(e.locale),setter:p},{key:"ruler",icon:f(),list:Jz(e.locale),setter:m}]),le=Yt(()=>[{key:"simpleAnnotation",icon:C(),list:t$(e.locale),setter:_},{key:"longPosition",icon:x(),list:e$(e.locale),setter:b}]),ce=Yt(()=>Kz(e.locale)),ae=Yt(()=>{const pe=z();return pe?pe==="mode"?{key:"mode",list:ce(),setter:M}:[...ee(),...le()].find(Y=>Y.key===pe):null}),re=pe=>{var Y;const U=H[pe];if(!U)return;const de=U.getBoundingClientRect(),X=(Y=U.closest(".chartspire-ui-drawing-bar"))==null?void 0:Y.getBoundingClientRect();if(X){const fe=de.top-X.top;J({top:fe,item:ae()})}};rt(()=>{const pe=z();pe&&H[pe]&&re(pe)});const ve=pe=>{pe===z()?B(""):(B(pe),setTimeout(()=>re(pe),10))};return[(()=>{var pe=n$(),Y=pe.firstChild;return R(pe,G($e,{get when(){return!e.drawingBarCollapsed},get children(){return[De(()=>ee().map(U=>(()=>{var de=by(),X=de.firstChild;return de.addEventListener("blur",()=>{B("")}),Tn(fe=>H[U.key]=fe,de),X.$$click=()=>{e.onDrawingItemClick({groupId:Cg,name:U.icon,visible:D(),lock:P(),mode:L()})},R(X,G(Io,{get name(){return U.icon}})),R(de,(()=>{var fe=De(()=>U.list.length>1);return()=>fe()&&(()=>{var ue=xy(),Fe=ue.firstChild;return ue.$$click=()=>ve(U.key),Ne(()=>Ve(Fe,"class",U.key===z()?"rotate":"")),ue})()})(),null),de})())),xg(),De(()=>le().map(U=>(()=>{var de=by(),X=de.firstChild;return de.addEventListener("blur",()=>{B("")}),Tn(fe=>H[U.key]=fe,de),X.$$click=()=>{e.onDrawingItemClick({groupId:Cg,name:U.icon,visible:D(),lock:P(),mode:L()})},R(X,G(Io,{get name(){return U.icon}})),R(de,(()=>{var fe=De(()=>U.list.length>1);return()=>fe()&&(()=>{var ue=xy(),Fe=ue.firstChild;return ue.$$click=()=>ve(U.key),Ne(()=>Ve(Fe,"class",U.key===z()?"rotate":"")),ue})()})(),null),de})())),xg(),(()=>{var U=r$(),de=U.firstChild,X=de.nextSibling,fe=X.firstChild;return U.addEventListener("blur",()=>{B("")}),Tn(ue=>H.mode=ue,U),de.$$click=()=>{let ue=k();L()!=="normal"&&(ue="normal"),A(ue),e.onModeChange(ue)},R(de,(()=>{var ue=De(()=>k()==="weak_magnet");return()=>ue()?De(()=>L()==="weak_magnet")()?G(Io,{name:"weak_magnet",class:"selected"}):G(Io,{name:"weak_magnet"}):De(()=>L()==="strong_magnet")()?G(Io,{name:"strong_magnet",class:"selected"}):G(Io,{name:"strong_magnet"})})()),X.$$click=()=>ve("mode"),Ne(()=>Ve(fe,"class",z()==="mode"?"rotate":"")),U})(),(()=>{var U=wg(),de=U.firstChild;return de.$$click=()=>{const X=!P();W(X),e.onLockChange(X)},R(de,(()=>{var X=De(()=>!!P());return()=>X()?G(Io,{name:"lock"}):G(Io,{name:"unlock"})})()),U})(),(()=>{var U=wg(),de=U.firstChild;return de.$$click=()=>{const X=!D();$(X),e.onVisibleChange(X)},R(de,(()=>{var X=De(()=>!!D());return()=>X()?G(Io,{name:"visible"}):G(Io,{name:"invisible"})})()),U})(),xg(),(()=>{var U=wg(),de=U.firstChild;return de.$$click=()=>{e.onRemoveClick(Cg)},R(de,G(Io,{name:"remove"})),U})()]}}),Y),R(Y,G(bv,{get isExpanded(){return!e.drawingBarCollapsed},onClick:()=>{e.setDrawingBarCollapsed(!e.drawingBarCollapsed)},get ariaLabel(){return e.drawingBarCollapsed?"Expand drawing bar":"Collapse drawing bar"},className:"toggle-button",startingDirection:"left"})),Ne(()=>Ve(pe,"data-collapsed",e.drawingBarCollapsed.toString())),pe})(),De(()=>De(()=>!!(z()&&ae()))()&&(()=>{var pe=i$(),Y=pe.firstChild;return Y.$$click=U=>{U.stopPropagation()},R(Y,()=>{var U;return(U=ae())==null?void 0:U.list.map((de,X)=>(()=>{var fe=o$(),ue=fe.firstChild,Fe=ue.nextSibling;return fe.$$mousedown=Te=>{var Pe;Te.preventDefault(),Te.stopPropagation(),z()==="mode"?(M(de.key),A(de.key),e.onModeChange(de.key)):((Pe=ae())==null||Pe.setter(de.key),e.onDrawingItemClick({name:de.key,lock:P(),mode:L()})),B("")},R(ue,G(Io,{get name(){return de.key}})),R(Fe,()=>de.text),fe})())}),Ne(U=>kn(Y,`top: ${Z().top}px`,U)),pe})())]};Xt(["click","mousedown"]);var s$=q("<img style=width:500px;margin-top:20px>");const l$=e=>G(Nl,{get title(){return I("screenshot",e.locale)},width:540,get buttons(){return[{type:"confirm",children:I("save",e.locale),onClick:()=>{const t=document.createElement("a");t.download="screenshot",t.href=e.url,document.body.appendChild(t),t.click(),t.remove()}}]},get onClose(){return e.onClose},get children(){var t=s$();return Ne(()=>Ve(t,"src",e.url)),t}}),c$={AO:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:5},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:34}],BIAS:[{paramNameKey:"BIAS1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"BIAS2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"BIAS3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"BIAS4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"BIAS5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],BOLL:[{paramNameKey:"period",type:"number",precision:0,min:1,default:20},{paramNameKey:"standard_deviation",type:"number",precision:2,min:1,default:2}],BRAR:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:26}],BBI:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:3},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_4",type:"number",precision:0,min:1,default:24}],CCI:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:20}],CR:[{paramNameKey:"cr",type:"number",precision:0,min:1,default:26},{paramNameKey:"ma1",type:"number",precision:0,min:1,default:10},{paramNameKey:"ma2",type:"number",precision:0,min:1,default:20},{paramNameKey:"ma3",type:"number",precision:0,min:1,default:40},{paramNameKey:"ma4",type:"number",precision:0,min:1,default:60}],EMV:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:10},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:50},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:10}],DMI:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:14},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],DMA:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:10},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:50},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:10}],EMA:[{paramNameKey:"EMA1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"EMA2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"EMA3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"EMA4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"EMA5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],MTM:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],MA:[{paramNameKey:"MA1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"MA2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"MA3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"MA4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"MA5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],MACD:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:26},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:9}],OBV:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:30}],PVT:[],PSY:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],ROC:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],RSI:[{paramNameKey:"RSI1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"RSI2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"RSI3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"RSI4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"RSI5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],SMA:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:2}],KDJ:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:9},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:3},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:3}],SAR:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:2,upColor:"#FF7F50",downColor:"#A020F0"},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:2,upColor:"#FF7F50",downColor:"#A020F0"},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:20,upColor:"#FF7F50",downColor:"#A020F0"}],TRIX:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:9}],VOL:[{paramNameKey:"MA1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"MA2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"MA3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"MA4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"MA5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],VR:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:26},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],WR:[{paramNameKey:"WR1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"WR2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"WR3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"WR4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"WR5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],WEMA:[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}],"Volume Profile Fixed Range":[{paramNameKey:"Value area (range 0-1)",type:"number",precision:0,min:0,max:1,default:.7}],"Force Index":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:13}],"Ichimoku Cloud":[{paramNameKey:"Conversion Period",type:"number",precision:0,min:1,default:9},{paramNameKey:"Base Period",type:"number",precision:0,min:1,default:26},{paramNameKey:"Span Period",type:"number",precision:0,min:1,default:52},{paramNameKey:"Displacement",type:"number",precision:0,min:1,default:26},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],ATR:[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}],ADX:[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14},{paramNameKey:"Adxr Period",type:"number",precision:0,min:1,default:6}],ADXR:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],PDI:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],MDI:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],TR:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],WS:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],"Chaikin Oscillator":[{paramNameKey:"Short Period",type:"number",precision:0,min:1,default:3},{paramNameKey:"Long Period",type:"number",precision:0,min:1,default:10}],"Percentage Price Oscillator":[{paramNameKey:"Fast Period",type:"number",precision:0,min:1,default:12},{paramNameKey:"Slow Period",type:"number",precision:0,min:1,default:26},{paramNameKey:"Signal Period",type:"number",precision:0,min:1,default:9}],"Percentage Volume Oscillator":[{paramNameKey:"Short Period",type:"number",precision:0,min:1,default:12},{paramNameKey:"Long Period",type:"number",precision:0,min:1,default:26},{paramNameKey:"Signal Period",type:"number",precision:0,min:1,default:9}],Qstick:[{paramNameKey:"period",type:"number",precision:0,min:1,default:20}],"Absolute Price Oscillator":[{paramNameKey:"Fast Period",type:"number",precision:0,min:1,default:14},{paramNameKey:"Slow Period",type:"number",precision:0,min:1,default:30}],Aroon:[{paramNameKey:"Length",type:"number",precision:0,min:1,default:14}],"Balance of Power":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:20}],"Double Exponential Moving Average":[{paramNameKey:"EMA1 Period",type:"number",precision:0,min:1,default:10},{paramNameKey:"EMA2 Period",type:"number",precision:0,min:1,default:16}],"Envelope (EMA)":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:20},{paramNameKey:"Percentage",type:"number",precision:0,min:0,max:100,default:20},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],"Envelope (SMA)":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:20},{paramNameKey:"Percentage",type:"number",precision:0,min:1,default:20},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],"Volume Weighted Average Price":[{paramNameKey:"Anchor Period",type:"select",precision:0,options:[{value:"None",label:"None"},{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarter",label:"Quarter"},{value:"Year",label:"Year"}],default:"None"},{paramNameKey:"Source",type:"select",precision:0,options:[{value:"Open",label:"Open"},{value:"High",label:"High"},{value:"Close",label:"Close"},{value:"HLC3",label:"HLC3"},{value:"HLC2",label:"HLC2"},{value:"OHLC4",label:"OHLC4"},{value:"HLCC4",label:"HLCC4"}],default:"Close"},{paramNameKey:"Offset",type:"number",precision:0,min:-100,max:100,default:0},{paramNameKey:"Bands Mode",type:"select",precision:0,options:[{value:"Standard Deviation",label:"Standard Deviation"},{value:"Percentage",label:"Percentage"},{value:"Fixed",label:"Fixed"}],default:"Standard Deviation"},{paramNameKey:"Bands Multiplier",type:"select",precision:0,options:[{value:"0.5",label:"0.5"},{value:"1",label:"1.0"},{value:"1.5",label:"1.5"},{value:"2",label:"2.0"},{value:"2.5",label:"2.5"},{value:"3",label:"3.0"}],default:"2"},{paramNameKey:"Show Bands",type:"boolean",precision:0,default:!0},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],"Negative Volume Index":[{paramNameKey:"Length",type:"number",precision:0,min:1,default:5}],"Money Flow Volume":[],"Money Flow Multiplier":[],"Moving Linear Regression":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}],"Moving Least Square":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}]};var u$=q("<div class=chartspire-ui-indicator-setting-input><span>");const z5=e=>(()=>{var t=u$(),r=t.firstChild;return R(r,()=>e.label),R(t,G(Wa,{style:{width:"120px"},get value(){return e.value},get onChange(){return e.onChange}}),null),t})();var d$=q("<div class=chartspire-ui-indicator-setting-select><span>");const Bp=e=>(()=>{var t=d$(),r=t.firstChild;return R(r,()=>e.label),R(t,G(jp,{style:{width:"120px"},get value(){return e.value},get dataSource(){return e.dataSource},get onSelected(){return e.onSelected}}),null),t})();var h$=q("<div class=chartspire-ui-indicator-setting-styles><span>");const $c=e=>(()=>{var t=h$(),r=t.firstChild;return R(r,()=>e.label),R(t,G(mv,{style:{width:"120px"},get value(){return e.value},get onChange(){return e.onChange}}),null),t})();var p$=q("<div class=styles-container>");const up=({index:e,locale:t,styles:r,setStyles:n,type:i})=>{const o=gn.clone(r());return(()=>{var s=p$();return R(s,(()=>{var u=De(()=>i===T0.line);return()=>u()?[G($c,{get label(){return`${I("Color",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.lines)==null?void 0:h[e])==null?void 0:p.color)??"#000000"},onChange:d=>{var h,p,f;(((p=(h=o==null?void 0:o.lines)==null?void 0:h[e])==null?void 0:p.color)!==void 0||((f=o==null?void 0:o.lines)==null?void 0:f[e])!==void 0)&&(o.lines[e].color=d),n({...o})}}),G(Bp,{get label(){return`${I("Size",t)} ${e+1}`},get value(){var d,h,p;return String(((p=(h=(d=r())==null?void 0:d.lines)==null?void 0:h[e])==null?void 0:p.size)??1)},dataSource:[{key:"1",text:"1"},{key:"2",text:"2"},{key:"3",text:"3"},{key:"4",text:"4"},{key:"5",text:"5"},{key:"6",text:"6"},{key:"7",text:"7"},{key:"8",text:"8"},{key:"9",text:"9"},{key:"10",text:"10"}],onSelected:d=>{var h,p,f;(((p=(h=o==null?void 0:o.lines)==null?void 0:h[e])==null?void 0:p.size)!==void 0||((f=o==null?void 0:o.lines)==null?void 0:f[e])!==void 0)&&(o.lines[e].size=Number(d.key)),n({...o})}}),G(Bp,{get label(){return I("LineType",t)},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.lines)==null?void 0:h[e])==null?void 0:p.style)??"solid"},dataSource:[{key:"solid",text:"Solid"},{key:"dashed",text:"Dashed"}],onSelected:d=>{var h,p,f;(((p=(h=o==null?void 0:o.lines)==null?void 0:h[e])==null?void 0:p.style)!==void 0||((f=o==null?void 0:o.lines)==null?void 0:f[e])!==void 0)&&(o.lines[e].style=d.key),n({...o})}})]:De(()=>i===T0.circle)()?[De(()=>De(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0})()&&G($c,{get label(){return`${I("upColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.upColor)??"#000000"},onChange:d=>{var h,p,f;(((p=(h=o==null?void 0:o.circles)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0||((f=o==null?void 0:o.circles)==null?void 0:f[e])!==void 0)&&(o.circles[e].upColor=d),n({...o})}})),De(()=>De(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0})()&&G($c,{get label(){return`${I("downColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.downColor)??"#000000"},onChange:d=>{var h,p,f;(((p=(h=o==null?void 0:o.circles)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0||((f=o==null?void 0:o.circles)==null?void 0:f[e])!==void 0)&&(o.circles[e].downColor=d),n({...o})}})),De(()=>De(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0})()&&G($c,{get label(){return`${I("noChangeColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.noChangeColor)??"#000000"},onChange:d=>{var h,p,f;(((p=(h=o==null?void 0:o.circles)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0||((f=o==null?void 0:o.circles)==null?void 0:f[e])!==void 0)&&(o.circles[e].noChangeColor=d),n({...o})}}))]:De(()=>i===T0.bar)()?[De(()=>De(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0})()&&G($c,{get label(){return`${I("upColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.upColor)??"#000000"},onChange:d=>{var h,p,f;(((p=(h=o==null?void 0:o.bars)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0||((f=o==null?void 0:o.bars)==null?void 0:f[e])!==void 0)&&(o.bars[e].upColor=d),n({...o})}})),De(()=>De(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0})()&&G($c,{get label(){return`${I("downColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.downColor)??"#000000"},onChange:d=>{var h,p,f;(((p=(h=o==null?void 0:o.bars)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0||((f=o==null?void 0:o.bars)==null?void 0:f[e])!==void 0)&&(o.bars[e].downColor=d),n({...o})}})),De(()=>De(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0})()&&G($c,{get label(){return`${I("noChangeColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.noChangeColor)??"#000000"},onChange:d=>{var h,p,f;(((p=(h=o==null?void 0:o.bars)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0||((f=o==null?void 0:o.bars)==null?void 0:f[e])!==void 0)&&(o.bars[e].noChangeColor=d),n({...o})}}))]:De(()=>i===T0.custom)()?De(()=>De(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.custom)==null?void 0:h[e])==null?void 0:p.opacity)!==void 0})()&&G(z5,{get label(){return`${I("opacity",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.custom)==null?void 0:h[e])==null?void 0:p.opacity)??.3},onChange:d=>{var h,p,f;(((p=(h=o==null?void 0:o.custom)==null?void 0:h[e])==null?void 0:p.opacity)!==void 0||((f=o==null?void 0:o.custom)==null?void 0:f[e])!==void 0)&&(o.custom[e].opacity=d),n({...o})}})):null})()),s})()};var f$=q("<div class=chartspire-ui-indicator-setting-modal-content>"),g$=q("<div class=chartspire-ui-indicator-setting-modal-content> <!> <!> "),v$=q("<div class=chartspire-ui-indicator-setting-modal-wrapper><div class=topbar>"),m$=q("<button>"),dp=q("<div class=styles-container>"),T0=(e=>(e.line="line",e.circle="circle",e.bar="bar",e.custom="custom",e))(T0||{});const y$=e=>{const[t,r]=ye(gn.clone(e.params.calcParams)),[n,i]=ye(gn.clone(e.params.styles)),[o,s]=ye("params"),u=h=>c$[h],d=[{text:"Params",key:"params"},{text:"Style",key:"style"}];return G(Nl,{get title(){return e.params.indicatorName},width:360,contentHeight:"80%",buttonContainerPadding:"30px 30px 20px",get buttons(){return[{type:"confirm",children:I("confirm",e.locale),onClick:()=>{var h;const p=u(e.params.indicatorName),f=[];(h=gn.clone(t()))==null||h.forEach((m,x)=>{!gn.isValid(m)||m===""?"default"in p[x]&&f.push(p[x].default):f.push(m)}),e.onConfirm(f,n()),e.onClose()}}]},get onClose(){return e.onClose},get children(){var h=v$(),p=h.firstChild;return R(p,G(Vn,{each:d,children:f=>(()=>{var m=m$();return m.$$click=()=>s(f.key),R(m,()=>f.text),Ne(()=>st(m,`${o()===f.key?"selected":""}`)),m})()})),R(h,G($e,{get when(){return o()==="params"},get children(){var f=f$();return R(f,()=>{var m;return(m=u(e.params.indicatorName))==null?void 0:m.map((x,b)=>x.type==="boolean"?G(Bp,{get label(){return I(x.paramNameKey,e.locale)},get value(){var C;return(C=t()[b])!=null&&C.value?"true":"false"},dataSource:[{key:"true",text:"Yes"},{key:"false",text:"No"}],onSelected:C=>{const _=gn.clone(t());_[b]={..._[b],value:C.key==="true"},r(_)}}):x.type==="select"?G(Bp,{get label(){return I(x.paramNameKey,e.locale)},get value(){var C;return((C=t()[b])==null?void 0:C.value)??x.default},get dataSource(){var C;return((C=x.options)==null?void 0:C.map(_=>({key:_.value,text:_.label})))??[]},onSelected:C=>{const _=gn.clone(t());_[b]={..._[b],value:C.key},r(_)}}):G(z5,{key:b,get label(){return I(x.paramNameKey,e.locale)},get value(){var C;return((C=t()[b])==null?void 0:C.value)??""},get precision(){return x.precision},get min(){return x.min},onChange:C=>{const _=gn.clone(t());_[b]={..._[b],value:Number(C)},r(_)}}))}),f}}),null),R(h,G($e,{get when(){return o()==="style"},get children(){var f=g$(),m=f.firstChild,x=m.nextSibling,b=x.nextSibling,C=b.nextSibling;return C.nextSibling,R(f,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.lines)==null?void 0:k.map((M,L)=>(()=>{var A=dp();return Ve(A,"key",L),R(A,G(up,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"line"}})),A})())},m),R(f,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.circles)==null?void 0:k.map((M,L)=>(()=>{var A=dp();return Ve(A,"key",L),R(A,G(up,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"circle"}})),A})())},x),R(f,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.bars)==null?void 0:k.map((M,L)=>(()=>{var A=dp();return Ve(A,"key",L),R(A,G(up,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"bar"}})),A})())},C),R(f,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.custom)==null?void 0:k.map((M,L)=>(()=>{var A=dp();return Ve(A,"key",L),R(A,G(up,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"custom"}})),A})())},null),f}}),null),h}})};Xt(["click"]);var b$=q('<svg viewBox="0 0 22 22"><rect x=2 y=2 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=9 y=2 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=16 y=2 width=4 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=2 y=9 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=9 y=9 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=16 y=9 width=4 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=2 y=16 width=5 height=4 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=9 y=16 width=5 height=4 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=16 y=16 width=4 height=4 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none>');const x$=e=>(()=>{var t=b$();return Ne(()=>Ve(t,"class",e.class||"icon-overlay")),t})();var w$=q('<svg viewBox="0 0 24 24"fill=none><path d="M5 2h14v20H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round></path><path d="M7 7h10M7 11h8M7 15h6"stroke=currentColor stroke-width=1.5 stroke-linecap=round>');const C$=e=>(()=>{var t=w$();return Ne(()=>Ve(t,"class",e.class||"icon-overlay")),t})();var _$=q('<svg viewBox="0 0 22 22"fill=none xmlns=http://www.w3.org/2000/svg><path d="M4 6H18M4 10H16M4 14H18M4 18H14"stroke-width=1.5 stroke-linecap=round stroke-linejoin=round></path><circle cx=19 cy=5 r=2.5 stroke-width=1.5 fill=none></circle><path d="M19 4V5L19.5 5.5"stroke-width=1 stroke-linecap=round stroke-linejoin=round></path><circle cx=2 cy=6 r=1 fill=currentColor></circle><circle cx=2 cy=10 r=1 fill=currentColor></circle><circle cx=2 cy=14 r=1 fill=currentColor></circle><circle cx=2 cy=18 r=1 fill=currentColor>');const S$=e=>(()=>{var t=_$();return Ne(()=>Ve(t,"class",e.class)),t})();var k$=q('<div class=item tabindex=0><span style=width:40px;height:40px><svg viewBox="0 0 22 22"><path d="M8 6.00067L21 6.00139M8 12.0007L21 12.0015M8 18.0007L21 18.0015M3.5 6H3.51M3.5 12H3.51M3.5 18H3.51M4 6C4 6.27614 3.77614 6.5 3.5 6.5C3.22386 6.5 3 6.27614 3 6C3 5.72386 3.22386 5.5 3.5 5.5C3.77614 5.5 4 5.72386 4 6ZM4 12C4 12.2761 3.77614 12.5 3.5 12.5C3.22386 12.5 3 12.2761 3 12C3 11.7239 3.22386 11.5 3.5 11.5C3.77614 11.5 4 11.7239 4 12ZM4 18C4 18.2761 3.77614 18.5 3.5 18.5C3.22386 18.5 3 18.2761 3 18C3 17.7239 3.22386 17.5 3.5 17.5C3.77614 17.5 4 17.7239 4 18Z"stroke-width=2 stroke-linecap=round stroke-linejoin=round>'),M$=q('<div class="item paper-trading-item"tabindex=0><span style=width:40px;height:40px>'),T$=q('<div class="item trades-item"tabindex=0><span style=width:40px;height:40px>'),E$=q('<div class="item orderbook-item"tabindex=0><span style=width:40px;height:40px>'),I$=q("<div class=chartspire-ui-right-bar><div class=toggle-container>");const L$=e=>(()=>{var t=I$(),r=t.firstChild;return R(t,G($e,{get when(){return e.isWatchListEnabled&&!e.rightBarCollapsed},get children(){var n=k$(),i=n.firstChild,o=i.firstChild;return n.$$click=()=>{console.log("Watchlist clicked"),e.setWatchListModalVisible!=null&&e.setWatchListModalVisible(s=>!s)},Ne(()=>Ve(o,"class",`icon-overlay ${e.watchListModalVisible?"selected":""}`)),n}}),r),R(t,G($e,{get when(){return e.isPaperTradingEnabled&&!e.rightBarCollapsed},get children(){var n=M$(),i=n.firstChild;return n.$$click=()=>{console.log("Paper Trading clicked"),e.setPaperTradingModalVisible!=null&&e.setPaperTradingModalVisible(o=>!o)},R(i,G(x$,{get class(){return`icon-overlay ${e.paperTradingModalVisible?"selected":""}`}})),n}}),r),R(t,G($e,{get when(){return e.isTradesEnabled&&!e.rightBarCollapsed},get children(){var n=T$(),i=n.firstChild;return n.$$click=()=>{console.log("Trades clicked"),e.setTradesVisible!=null&&e.setTradesVisible(o=>!o)},R(i,G(S$,{get class(){return`icon-overlay ${e.tradesModalVisible?"selected":""}`}})),n}}),r),R(t,G($e,{get when(){return e.isOrderBookEnabled&&!e.rightBarCollapsed},get children(){var n=E$(),i=n.firstChild;return n.$$click=()=>{console.log("Orderbook clicked"),e.setOrderBookVisible!=null&&e.setOrderBookVisible(o=>!o)},R(i,G(C$,{get class(){return`icon-overlay ${e.orderBookModalVisible?"selected":""}`}})),n}}),r),R(r,G(bv,{get isExpanded(){return!e.rightBarCollapsed},onClick:()=>{e.setRightBarCollapsed(!e.rightBarCollapsed)},get ariaLabel(){return e.rightBarCollapsed?"Show sidebar":"Hide sidebar"},className:"toggle-button",startingDirection:"right"})),Ne(()=>Ve(t,"data-collapsed",e.rightBarCollapsed.toString())),t})();Xt(["click"]);const P$=zM.map(e=>e.name),A$=e=>{const t=e.getDataList(),r=e.getIndicators(),n=new Set,i={};r.forEach(p=>{console.log(p.result),P$.includes(p.name)||Object.entries(p.result).forEach(([f,m])=>{const x=m;Object.keys(x).forEach(b=>{let C=!1;n.add(b),i[b]||(i[b]={}),i[b][f]||(i[b][f]=[]),x[b]!==void 0&&x[b]!==null&&(i[b][f].push(x[b]),C=!0),C||n.delete(b)})})});const o=["timestamp","open","high","low","close","volume",...n].join(","),s=t.map((p,f)=>{const m=Array.from(n).map(x=>i[x][f]??"").join(",");return`${p.timestamp},${p.open},${p.high},${p.low},${p.close},${p.volume??""},${m}`}).join(`
`),u=`${o}
${s}`,d=new Blob([u],{type:"text/csv"}),h=document.createElement("a");h.href=URL.createObjectURL(d),h.download="data.csv",document.body.appendChild(h),h.click(),document.body.removeChild(h)};var D$=q('<div class="item tools">'),F$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><rect width=15 height=14 fill=none stroke=currentColor rx=4 transform="translate(.5 .5)">'),R$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14">'),O$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15">'),N$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M5 0v14"></path><path d="M10 0v14">'),z$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 4.5h15"></path><path d="M0 9.5h15">'),$$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M7.5 7h7.5">'),B$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M0 7h7.5">'),V$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M7.5 0v7">'),W$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M7.5 7v7">'),U$=q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7.5h15M7.5 0v14">'),H$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 3.5h15"></path><path d="M0 7h15"></path><path d="M0 10.5h15">'),Y$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M3.75 0v14"></path><path d="M7.5 0v14"></path><path d="M11.25 0v14">'),X$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M7.5 4.5h7.5"></path><path d="M7.5 9.5h7.5">'),j$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M0 4.5h7.5"></path><path d="M0 9.5h7.5">'),Z$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M5 7v7"></path><path d="M10 7v7">'),G$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M5 0v7"></path><path d="M10 0v7">'),q$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 2.8h15"></path><path d="M0 5.6h15"></path><path d="M0 8.4h15"></path><path d="M0 11.2h15">'),Q$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M3 0v14"></path><path d="M6 0v14"></path><path d="M9 0v14"></path><path d="M12 0v14">'),K$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M7.5 3.5h7.5"></path><path d="M7.5 7h7.5"></path><path d="M7.5 10.5h7.5">'),J$=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M0 3.5h7.5"></path><path d="M0 7h7.5"></path><path d="M0 10.5h7.5">'),eB=q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M5 0v14"></path><path d="M10 0v14"></path><path d="M0 7.5h15M7.5">'),tB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M2.5 0v14"></path><path d="M5 0v14"></path><path d="M7.5 0v14"></path><path d="M10 0v14"></path><path d="M12.5 0v14">'),rB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 2.5h15"></path><path d="M0 5h15"></path><path d="M0 7.5h15"></path><path d="M0 10h15"></path><path d="M0 12.5h15">'),nB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 4.5h15"></path><path d="M0 9.5h15"></path><path d="M7.5 0v14">'),iB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 2h15"></path><path d="M0 4h15"></path><path d="M0 6h15"></path><path d="M0 8h15"></path><path d="M0 10h15"></path><path d="M0 12h15">'),oB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M2.14 0v14"></path><path d="M4.28 0v14"></path><path d="M6.42 0v14"></path><path d="M8.57 0v14"></path><path d="M10.71 0v14"></path><path d="M12.85 0v14">'),aB=q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15M3.75 0v14M7.5 0v14M11.25 0v14">'),sB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.75h15"></path><path d="M0 3.5h15"></path><path d="M0 5.25h15"></path><path d="M0 7h15"></path><path d="M0 8.75h15"></path><path d="M0 10.5h15"></path><path d="M0 12.25h15">'),lB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.875 0v14"></path><path d="M3.75 0v14"></path><path d="M5.625 0v14"></path><path d="M7.5 0v14"></path><path d="M9.375 0v14"></path><path d="M11.25 0v14"></path><path d="M13.125 0v14">'),cB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 4.5h15"></path><path d="M0 9.5h15"></path><path d="M5 0v14"></path><path d="M10 0v14">'),uB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.5h15"></path><path d="M0 3h15"></path><path d="M0 4.5h15"></path><path d="M0 6h15"></path><path d="M0 7.5h15"></path><path d="M0 9h15"></path><path d="M0 10.5h15"></path><path d="M0 12h15">'),dB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.67 0v14"></path><path d="M3.33 0v14"></path><path d="M5 0v14"></path><path d="M6.67 0v14"></path><path d="M8.33 0v14"></path><path d="M10 0v14"></path><path d="M11.67 0v14"></path><path d="M13.33 0v14">'),hB=q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15M3 0v14M6 0v14M9 0v14M12 0v14">'),pB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.4h15"></path><path d="M0 2.8h15"></path><path d="M0 4.2h15"></path><path d="M0 5.6h15"></path><path d="M0 7h15"></path><path d="M0 8.4h15"></path><path d="M0 9.8h15"></path><path d="M0 11.2h15"></path><path d="M0 12.6h15">'),fB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.5 0v14"></path><path d="M3 0v14"></path><path d="M4.5 0v14"></path><path d="M6 0v14"></path><path d="M7.5 0v14"></path><path d="M9 0v14"></path><path d="M10.5 0v14"></path><path d="M12 0v14"></path><path d="M13.5 0v14">'),gB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 3.5h15"></path><path d="M0 7h15"></path><path d="M0 10.5h15"></path><path d="M5 0v14"></path><path d="M10 0v14">'),vB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.17h15"></path><path d="M0 2.33h15"></path><path d="M0 3.5h15"></path><path d="M0 4.67h15"></path><path d="M0 5.83h15"></path><path d="M0 7h15"></path><path d="M0 8.17h15"></path><path d="M0 9.33h15"></path><path d="M0 10.5h15"></path><path d="M0 11.67h15"></path><path d="M0 12.83h15">'),mB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.25 0v14"></path><path d="M2.5 0v14"></path><path d="M3.75 0v14"></path><path d="M5 0v14"></path><path d="M6.25 0v14"></path><path d="M7.5 0v14"></path><path d="M8.75 0v14"></path><path d="M10 0v14"></path><path d="M11.25 0v14"></path><path d="M12.5 0v14"></path><path d="M13.75 0v14">'),yB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 7h15"></path><path d="M2.5 0v14"></path><path d="M5 0v14"></path><path d="M7.5 0v14"></path><path d="M10 0v14"></path><path d="M12.5 0v14">'),wy=q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M2 0v14"></path><path d="M5 0v14"></path><path d="M12 0v14"></path><path d="M0 7.5h15M9 0v14">'),bB=q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 3.5h15"></path><path d="M0 7h15"></path><path d="M0 10.5h15"></path><path d="M3.75 0v14"></path><path d="M7.5 0v14"></path><path d="M11.25 0v14">');const xB=e=>(()=>{var t=D$();return Wi(t,"click",e.onMultiChartClick),R(t,(()=>{var r=De(()=>e.multiChart===j.ONE);return()=>r()&&F$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.TWO);return()=>r()&&R$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.TWO_VERTICAL);return()=>r()&&O$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.THREE);return()=>r()&&N$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.THREE_VERTICAL);return()=>r()&&z$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.THREE_MIXED);return()=>r()&&$$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.THREE_MIXED_REVERSE);return()=>r()&&B$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.THREE_MIXED_BOTTOM);return()=>r()&&V$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.THREE_MIXED_TOP);return()=>r()&&W$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FOUR);return()=>r()&&U$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FOUR_VERTICAL);return()=>r()&&H$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FOUR_HORIZONTAL);return()=>r()&&Y$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FOUR_MIXED);return()=>r()&&X$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FOUR_MIXED_REVERSE);return()=>r()&&j$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FOUR_MIXED_TOP);return()=>r()&&Z$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FOUR_MIXED_BOTTOM);return()=>r()&&G$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FIVE_VERTICAL);return()=>r()&&q$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FIVE_HORIZONTAL);return()=>r()&&Q$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FIVE_MIXED);return()=>r()&&K$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FIVE_MIXED_REVERSE);return()=>r()&&J$()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.SIX);return()=>r()&&eB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.SIX_HORIZONTAL);return()=>r()&&tB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.SIX_VERTICAL);return()=>r()&&rB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.SIX_MIXED);return()=>r()&&nB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.SEVEN_VERTICAL);return()=>r()&&iB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.SEVEN_HORIZONTAL);return()=>r()&&oB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.EIGHT);return()=>r()&&aB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.EIGHT_VERTICAL);return()=>r()&&sB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.EIGHT_HORIZONTAL);return()=>r()&&lB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.NINE);return()=>r()&&cB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.NINE_VERTICAL);return()=>r()&&uB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.NINE_HORIZONTAL);return()=>r()&&dB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.TEN);return()=>r()&&hB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.TEN_VERTICAL);return()=>r()&&pB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.TEN_HORIZONTAL);return()=>r()&&fB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.TWELVE);return()=>r()&&gB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.TWELVE_VERTICAL);return()=>r()&&vB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.TWELVE_HORIZONTAL);return()=>r()&&mB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.TWELVE_GRID);return()=>r()&&yB()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.FOURTEEN);return()=>r()&&wy()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.SIXTEEN);return()=>r()&&wy()})(),null),R(t,(()=>{var r=De(()=>e.multiChart===j.SIXTEEN_GRID);return()=>r()&&bB()})(),null),t})();Xt(["click"]);var wB=q("<div class=candle-type-dropdown><div class=candle-icon-container><div class=candle-icon></div><span class=candle-type-text></span><span class=dropdown-indicator>");const hp={candle_solid:'<svg width="20" height="20" stroke="currentColor" stroke-width="0.04" viewBox="0 0 0.63 0.99"><path fill="none" d="M.52.02v.95M.11.02v.95"></path><rect x=".02" y=".16" width=".19" height=".5" rx=".02" ry=".07" fill="currentColor"></rect><rect x=".42" y=".35" width=".19" height=".5" rx=".02" ry=".07" fill="currentColor"></rect></svg>',candle_stroke:'<svg viewBox="0 0 26 26" width="28" height="28" fill="currentColor"><g transform="translate(0.5, 0.5)"><path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1zM9 4v5H7v11h2v3h1v-3h2V9h-2V4H9zm6 3h3v10h-3V7zm-7 3h3v9H8v-9z"></path></g></svg>',candle_up_stroke:`<svg viewBox="0 0 26 26" width="25" height="25" fill="currentColor">
    <g transform="translate(0.5, 0.5)">
      <!-- Right candle (filled) -->
      <path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1z" fill="currentColor"/>
      <path d="M16 6h3v10h-3V6z" fill="currentColor"/>
      
      <!-- Left candle (hollow) -->
      <path d="M9 4v5h-2v11h2v3h1v-3h2V9h-2V4h-1z" stroke="currentColor" stroke-width="0.8" fill="none"/>
    </g>
  </svg>`,candle_down_stroke:`<svg viewBox="0 0 26 26" width="25" height="25" fill="currentColor">
    <g transform="translate(0.5, 0.5)">
      <!-- Right candle (hollow) -->
      <path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1z" stroke="currentColor" stroke-width="0.8" fill="none"/>
      
      <!-- Left candle (filled) -->
      <path d="M9 4v5h-2v11h2v3h1v-3h2V9h-2V4h-1z" fill="currentColor"/>
      <path d="M8 9v9h3V9h-3z" fill="currentColor"/>
    </g>
  </svg>`,ohlc:'<svg stroke="currentColor" stroke-width="0.04" stroke-linecap="round" stroke-linejoin="round" width="18" height="20" fill="none" viewBox="0 0 0.73 1.07"><path d="M.58.02v1.03M.15.02v1.03"></path><path d="M.02.26h.13M.15.7h.12M.58.97h.13M.46.36h.12"></path></svg>',area:'<svg fill="none" stroke="currentColor" stroke-width="0.12" stroke-linejoin="round" width="20" height="20" viewBox="0 0 2.28 1.65"><path d="M.03 1.62.36.78l.38.59.36-.7.36.25.36-.89.42.74v.85z"></path></svg>',heikin_ashi:'<svg width="20" height="20" stroke-width="0.03" stroke="currentColor" viewBox="0 0 0.63 0.99"><path fill="none" d="M.52.02v.96M.11.02v.96"></path><rect fill="currentColor" x=".02" y=".48" width=".19" height=".5" rx=".02" ry=".07"></rect><rect fill="currentColor" x=".42" y=".48" width=".19" height=".5" rx=".02" ry=".07"></rect></svg>',[V0.RENKO]:'<svg viewBox="0 0 26 26" width="25" height="25" fill="currentColor"><g transform="translate(0.5, 0.5)"><path d="M12 4v6h3V4h-3zm3 6v6h3v-6h-3zm3 6v6h3v-6h-3zm-6-6H9v6h3v-6zm-3 6H6v6h3v-6zm4-11h1v4h-1V5zm-3 6h1v4h-1v-4zm-3 6h1v4H7v-4z"></path></g></svg>'},CB=e=>{const t=O5(e).find(r=>r.key==="candle.type");return!t||!t.dataSource?[{value:"candle_solid",label:I("candle_solid",e),icon:hp.candle_solid},{value:"heikin_ashi",label:I("heikin_ashi",e),icon:hp.heikin_ashi}]:t.dataSource.map(r=>({value:r.key,label:r.text,icon:hp[r.key]||hp.candle_solid}))},_B=e=>{const t=CB(e.locale),[r,n]=ye(!1);let i;const[o,s]=ye(t.find(f=>f.value===e.currentCandleType)||t[0]);rt(()=>{const f=e.currentCandleType,m=t.find(x=>x.value===f);m&&s(m)});const u=Yt(()=>t.map(f=>({key:f.value,text:f.label,value:f,icon:f.icon}))),d=f=>{const m=f.value;s(m),e.onCandleTypeChange(m.value)},h=()=>{n(!r())},p=()=>{n(!1)};return[(()=>{var f=wB(),m=f.firstChild,x=m.firstChild,b=x.nextSibling,C=i;return typeof C=="function"?Tn(C,f):i=f,m.$$click=h,R(b,()=>I("charts",e.locale)),Ne(()=>x.innerHTML=o().icon),f})(),G(W0,{get options(){return u()},get selectedKey(){return o().value},onSelect:d,triggerRef:i,get isOpen(){return r()},onClose:p,placement:"bottom",className:"candle-dropdown",maxHeight:600})]};Xt(["click"]);var SB=q('<div class=interval-dropdown><div class=interval-selector><span class=interval-text></span><svg width=8 height=8 viewBox="0 0 8 8"><path d="M4 5.5L1.5 3h5L4 5.5z">');const kB=e=>{const[t,r]=ye(!1);let n;const[i,o]=ye(e.period||e.periods[0]);rt(()=>{const p=e.period;p&&o(p)});const s=Yt(()=>e.periods.map(p=>({key:p.text,text:p.text,value:p}))),u=p=>{const f=p.value;o(f),e.onPeriodChange(f)},d=()=>{r(!t())},h=()=>{r(!1)};return[(()=>{var p=SB(),f=p.firstChild,m=f.firstChild,x=m.nextSibling,b=n;return typeof b=="function"?Tn(b,p):n=p,f.$$click=d,R(m,()=>i().text),Ne(()=>Ve(x,"class",`dropdown-arrow ${t()?"open":""}`)),p})(),G(W0,{get options(){return s()},get selectedKey(){return i().text},onSelect:u,triggerRef:n,get isOpen(){return t()},onClose:h,placement:"bottom",className:"interval-dropdown-portal",maxHeight:500,minWidth:70})]};Xt(["click"]);V0.RENKO;const $5=10;function As(e){return e===V0.RENKO||String(e).toLowerCase()==="renko"}function B5(e,t,r){var n,i,o,s;if(!e||e.length===0)return[];let u=[],d=e[0].open;for(let h=1;h<e.length;h++){const p=e[h].timestamp,f=e[h].close,m=Number((f-d).toFixed(r));if(m>0){let x=m;for(;x>=t;){const b=Number((d+t).toFixed(r)),C={open:d,high:b,low:d,close:b,timestamp:p};(u.length===0||b!==((n=u.at(-1))==null?void 0:n.open)&&b!==((i=u.at(-1))==null?void 0:i.close))&&u.push(C),d=b,x-=t}}else if(m<0){let x=Math.abs(m);for(;x>=t;){const b=Number((d-t).toFixed(r)),C={open:d,high:d,low:b,close:b,timestamp:p};(u.length===0||b!==((o=u.at(-1))==null?void 0:o.open)&&b!==((s=u.at(-1))==null?void 0:s.close))&&u.push(C),d=b,x-=t}}}return u}function MB(e,t,r,n){var i,o,s,u,d;if(t.length===0)return B5([{open:e.open,high:e.high,low:e.low,close:e.close,timestamp:e.timestamp-6e4},e],r,n);let h=[...t],p=((i=h.at(-1))==null?void 0:i.close)||0;const f=e.timestamp;let m=e.close;const x=Number((m-p).toFixed(n));if(x>0&&x>=r){const C=Math.floor(x/r);for(let _=0;_<C;_++){const k=Number((p+r).toFixed(n)),M={open:p,high:k,low:p,close:k,timestamp:f};(h.length===0||k!==((o=h.at(-1))==null?void 0:o.open)&&k!==((s=h.at(-1))==null?void 0:s.close))&&h.push(M),p=k}}else if(x<0&&Math.abs(x)>=r){const C=Math.floor(Math.abs(x)/r);for(let _=0;_<C;_++){const k=Number((p-r).toFixed(n)),M={open:p,high:p,low:k,close:k,timestamp:f};(h.length===0||k!==((u=h.at(-1))==null?void 0:u.open)&&k!==((d=h.at(-1))==null?void 0:d.close))&&h.push(M),p=k}}const b=x-Math.floor(Math.abs(x)/r)*(x>=0?r:-r);if(b!==0&&h.length>0){const C=h.at(-1),_=Number((C.close+b).toFixed(n));C.shadowPrice=_}return h}function TB(e,t){if(e.length===0)return e;const r=[...e],n=r[r.length-1],i=t.close,o={...n,shadowPrice:i};return r[r.length-1]=o,r}function EB(e,t,r){var n;if(!t||t.length===0)return console.warn(`No data provided for Renko chart initialization (chart ${r})`),[];try{const i=((n=e.getStyles().candle.renko)==null?void 0:n.brick.size)||$5;e.getStyles().candle.type="candle_solid";const o=[...t].sort((p,f)=>p.timestamp-f.timestamp),s=B5(o,i,4);if(s.length===0)return console.warn(`Failed to generate Renko bricks for chart ${r} - using original data`),o;const u=o.at(-1),d=MB(u,s,i,4),h=TB(d,u);return h.length>0?h:t}catch(i){return console.error(`Error initializing Renko chart ${r}:`,i),t}}var IB=q("<img alt=symbol>"),LB=q("<div class=symbol><span>"),PB=q('<div class=chartspire-ui-top-bar><div class="item tools"><svg viewBox="0 0 20 20"><path d=M15.873,20L3.65079,20C1.5873,20,0,18.3871,0,16.2903L0,3.70968C-3.78442e-7,1.6129,1.5873,0,3.65079,0L15.873,0C17.9365,0,19.5238,1.6129,19.5238,3.70968C19.5238,4.35484,19.2063,4.51613,18.5714,4.51613C17.9365,4.51613,17.619,4.19355,17.619,3.70968C17.619,2.74194,16.8254,1.93548,15.873,1.93548L3.65079,1.93548C2.69841,1.93548,1.90476,2.74194,1.90476,3.70968L1.90476,16.2903C1.90476,17.2581,2.69841,18.0645,3.65079,18.0645L15.873,18.0645C16.8254,18.0645,17.619,17.2581,17.619,16.2903C17.619,15.8065,18.0952,15.3226,18.5714,15.3226C19.0476,15.3226,19.5238,15.8065,19.5238,16.2903C19.5238,18.2258,17.9365,20,15.873,20ZM14.9206,12.9032C14.7619,12.9032,14.4444,12.9032,14.2857,12.7419L11.2698,9.35484C10.9524,9.03226,10.9524,8.54839,11.2698,8.22581C11.5873,7.90323,12.0635,7.90323,12.381,8.22581L15.3968,11.6129C15.7143,11.9355,15.7143,12.4194,15.3968,12.7419C15.3968,12.9032,15.2381,12.9032,14.9206,12.9032ZM11.4286,13.2258C11.2698,13.2258,11.1111,13.2258,10.9524,13.0645C10.6349,12.7419,10.6349,12.4194,10.9524,12.0968L15.0794,7.74193C15.3968,7.41935,15.7143,7.41935,16.0317,7.74193C16.3492,8.06452,16.3492,8.3871,16.0317,8.70968L11.9048,13.0645C11.746,13.2258,11.5873,13.2258,11.4286,13.2258ZM10.3175,3.70968C10.6349,3.70968,11.4286,3.87097,11.4286,4.67742C11.4286,5.32258,10.4762,5.16129,10.1587,5.16129C8.73016,5.16129,8.25397,5.96774,8.09524,6.6129L7.77778,8.54839L9.36508,8.54839C9.68254,8.54839,10,8.87097,10,9.19355C10,9.51613,9.68254,9.83871,9.36508,9.83871L7.61905,9.83871L6.50794,14.8387Q6.34921,16.2903,5.39683,16.2903Q4.44444,16.2903,4.92064,14.8387L6.03175,10L4.60317,10C4.28571,10,3.96825,9.67742,3.96825,9.35484C3.96825,8.70968,4.28571,8.54839,4.60317,8.54839L6.34921,8.54839L6.8254,6.45161C7.14286,3.70968,9.52381,3.54839,10.3175,3.70968ZM18.4127,6.6129C18.5714,6.12903,18.8889,5.96774,19.3651,5.96774C19.8413,6.12903,20,6.45161,20,6.93548L18.4127,13.3871C18.254,13.871,17.9365,14.0323,17.4603,14.0323C16.9841,13.871,16.8254,13.5484,16.8254,13.0645L18.4127,6.6129Z></path></svg><span></span></div><div><svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd d="M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z M12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 Z M8,17 L8,7 C8,6.21456446 8.86395093,5.73572169 9.52999894,6.1520017 L17.5299989,11.1520017 C18.156667,11.5436692 18.156667,12.4563308 17.5299989,12.8479983 L9.52999894,17.8479983 C8.86395093,18.2642783 8,17.7854355 8,17 Z M15.1132038,12 L10,8.80424764 L10,15.1957524 L15.1132038,12 Z"></path></svg><span></span></div><div></div><div class="item tools csv"><svg viewBox="0 50 500 400"><path d="M430.557,79.556H218.44c21.622,12.688,40.255,29.729,54.859,49.906h157.258 c7.196,0,13.063,5.863,13.063,13.06v238.662c0,7.199-5.866,13.064-13.063,13.064H191.894c-7.198,0-13.062-5.865-13.062-13.064 V222.173c-6.027-3.1-12.33-5.715-18.845-7.732c-3.818,11.764-12.105,21.787-23.508,27.781c-2.39,1.252-4.987,2.014-7.554,2.844 v136.119c0,34.717,28.25,62.971,62.968,62.971h238.663c34.718,0,62.969-28.254,62.969-62.971V142.522 C493.525,107.806,465.275,79.556,430.557,79.556z"></path><path id=XMLID_31_ d="M129.037,175.989c51.419,1.234,96.388,28.283,122.25,68.865c2.371,3.705,6.434,5.848,10.657,5.848 c1.152,0,2.322-0.162,3.46-0.486c5.377-1.545,9.114-6.418,9.179-12.006c0-0.504,0-1.01,0-1.51 c0-81.148-64.853-147.023-145.527-148.957V64.155c0-5.492-3.038-10.512-7.879-13.078c-2.16-1.139-4.533-1.707-6.889-1.707 c-2.94,0-5.848,0.88-8.35,2.584L5.751,120.526C2.162,122.98,0.018,127.041,0,131.394c-0.017,4.338,2.113,8.418,5.687,10.902 l100.17,69.451c2.518,1.753,5.459,2.631,8.414,2.631c2.355,0,4.696-0.553,6.857-1.676c4.855-2.549,7.909-7.6,7.909-13.092V175.989z "></path></svg></div><div class="item tools"><svg viewBox="0 0 20 20"><path d=M19.7361,12.542L18.1916,11.2919C18.2647,10.8678,18.3025,10.4347,18.3025,10.0017C18.3025,9.56861,18.2647,9.13555,18.1916,8.71142L19.7361,7.46135C19.9743,7.26938,20.0615,6.95686,19.9554,6.6756L19.9342,6.61756C19.5074,5.49026,18.8755,4.45449,18.0549,3.53926L18.0124,3.49238C17.8096,3.26692,17.4819,3.1821,17.1848,3.28032L15.2677,3.92544C14.5603,3.3763,13.7704,2.94324,12.9168,2.63966L12.5466,0.742229C12.49,0.449802,12.2472,0.222111,11.9383,0.168536L11.8746,0.157375C10.6461,-0.0524583,9.35391,-0.0524583,8.1254,0.157375L8.06174,0.168536C7.75284,0.222111,7.50997,0.449802,7.45338,0.742229L7.08082,2.64859C6.2343,2.95217,5.44909,3.383,4.74641,3.92991L2.81522,3.28032C2.52047,3.1821,2.19036,3.26469,1.98757,3.49238L1.94513,3.53926C1.12455,4.45672,0.492609,5.49249,0.0658141,6.61756L0.0445921,6.6756C-0.0615171,6.95463,0.0257283,7.26715,0.263885,7.46135L1.82723,8.72482C1.75413,9.14448,1.71876,9.57308,1.71876,9.99944C1.71876,10.428,1.75413,10.8566,1.82723,11.2741L0.263885,12.5375C0.025729,12.7295,-0.0615164,13.042,0.0445929,13.3233L0.0658148,13.3813C0.49261,14.5064,1.12455,15.5444,1.94513,16.4596L1.98757,16.5065C2.19036,16.732,2.51812,16.8168,2.81522,16.7186L4.74641,16.069C5.44909,16.6159,6.2343,17.0489,7.08082,17.3503L7.45338,19.2567C7.50997,19.5491,7.75284,19.7768,8.06174,19.8303L8.1254,19.8415C8.74084,19.9464,9.37042,20,10,20C10.6296,20,11.2615,19.9464,11.8746,19.8415L11.9383,19.8303C12.2472,19.7768,12.49,19.5491,12.5466,19.2567L12.9168,17.3592C13.7704,17.0556,14.5603,16.6248,15.2677,16.0734L17.1848,16.7186C17.4795,16.8168,17.8096,16.7342,18.0124,16.5065L18.0549,16.4596C18.8755,15.5422,19.5074,14.5064,19.9342,13.3813L19.9554,13.3233C20.0615,13.0487,19.9743,12.7362,19.7361,12.542ZM16.5175,8.97483C16.5764,9.3119,16.6071,9.65791,16.6071,10.0039C16.6071,10.3499,16.5764,10.6959,16.5175,11.033L16.3618,11.9281L18.1233,13.3545C17.8568,13.9372,17.5196,14.4863,17.1188,14.9975L14.9305,14.2631L14.1901,14.839C13.6266,15.2765,12.9994,15.6203,12.3203,15.8614L11.4219,16.1806L10.9998,18.3459C10.3372,18.4173,9.66045,18.4173,8.9955,18.3459L8.57342,16.1761L7.6821,15.8524C7.01008,15.6114,6.38521,15.2676,5.82637,14.8323L5.08596,14.2541L2.88361,14.9953C2.48275,14.4841,2.14791,13.9327,1.8791,13.3523L3.65938,11.9125L3.50611,11.0196C3.44952,10.687,3.41887,10.3432,3.41887,10.0039C3.41887,9.66237,3.44716,9.32083,3.50611,8.98822L3.65938,8.09531L1.8791,6.6555C2.14556,6.07288,2.48275,5.52374,2.88361,5.01255L5.08596,5.75367L5.82637,5.17551C6.38521,4.74022,7.01008,4.39645,7.6821,4.15536L8.57578,3.83615L8.99786,1.66638C9.66045,1.59495,10.3372,1.59495,11.0021,1.66638L11.4242,3.83168L12.3226,4.1509C12.9994,4.39198,13.6289,4.73575,14.1925,5.17328L14.9329,5.7492L17.1211,5.01479C17.522,5.52598,17.8568,6.07734,18.1256,6.65773L16.3642,8.08416L16.5175,8.97483ZM10.0024,5.85189C7.7104,5.85189,5.85231,7.61092,5.85231,9.78068C5.85231,11.9504,7.7104,13.7095,10.0024,13.7095C12.2943,13.7095,14.1524,11.9504,14.1524,9.78068C14.1524,7.61092,12.2943,5.85189,10.0024,5.85189ZM11.8699,11.5486C11.37,12.0196,10.7074,12.2808,10.0024,12.2808C9.29732,12.2808,8.63473,12.0196,8.13483,11.5486C7.6373,11.0754,7.36142,10.4481,7.36142,9.78068C7.36142,9.11323,7.6373,8.48596,8.13483,8.01272C8.63473,7.53948,9.29732,7.28054,10.0024,7.28054C10.7074,7.28054,11.37,7.53948,11.8699,8.01272C12.3674,8.48596,12.6433,9.11323,12.6433,9.78068C12.6433,10.4481,12.3674,11.0754,11.8699,11.5486Z></path></svg></div><div class="item tools"><svg viewBox="0 0 20 20"><path d=M6.50977,1L13.4902,1C13.6406,1,13.7695,1.1104910000000001,13.7969,1.2631700000000001L14.0273,2.52277C14.1387,3.13147,14.6543,3.57143,15.2559,3.57143L17.5,3.57143C18.8809,3.57143,20,4.72254,20,6.14286L20,16.4286C20,17.8489,18.8809,19,17.5,19L2.5,19C1.11914,19,0,17.8489,0,16.4286L0,6.14286C0,4.72254,1.11914,3.57143,2.5,3.57143L4.74414,3.57143C5.3457,3.57143,5.86133,3.13147,5.97266,2.52277L6.20312,1.2631700000000001C6.23047,1.1104910000000001,6.35937,1,6.50977,1ZM15.2559,4.857139999999999C14.0547,4.857139999999999,13.0215,3.97522,12.7988,2.75982L12.7129,2.28571L7.28711,2.28571L7.20117,2.75982C6.98047,3.97522,5.94727,4.857139999999999,4.74414,4.857139999999999L2.5,4.857139999999999C1.81055,4.857139999999999,1.25,5.43371,1.25,6.14286L1.25,16.4286C1.25,17.1377,1.81055,17.7143,2.5,17.7143L17.5,17.7143C18.1895,17.7143,18.75,17.1377,18.75,16.4286L18.75,6.14286C18.75,5.43371,18.1895,4.857139999999999,17.5,4.857139999999999L15.2559,4.857139999999999ZM4.375,6.78571L3.125,6.78571C2.7793,6.78571,2.5,6.49844,2.5,6.14286C2.5,5.78728,2.7793,5.5,3.125,5.5L4.375,5.5C4.7207,5.5,5,5.78728,5,6.14286C5,6.49844,4.7207,6.78571,4.375,6.78571ZM10,6.14286C7.06641,6.14286,4.6875,8.58973,4.6875,11.6071C4.6875,14.6246,7.06641,17.0714,10,17.0714C12.9336,17.0714,15.3125,14.6246,15.3125,11.6071C15.3125,8.58973,12.9336,6.14286,10,6.14286ZM10,7.42857C11.0859,7.42857,12.1055,7.8625,12.873,8.65201C13.6406,9.44152,14.0625,10.49018,14.0625,11.6071C14.0625,12.7241,13.6406,13.7728,12.873,14.5623C12.1055,15.3518,11.0859,15.7857,10,15.7857C8.91406,15.7857,7.89453,15.3518,7.12695,14.5623C6.35937,13.7728,5.9375,12.7241,5.9375,11.6071C5.9375,10.49018,6.35938,9.44152,7.12695,8.65201C7.89453,7.8625,8.91406,7.42857,10,7.42857ZM10,9.67857C8.96484,9.67857,8.125,10.54241,8.125,11.6071C8.125,12.6719,8.96484,13.5357,10,13.5357C11.0352,13.5357,11.875,12.6719,11.875,11.6071C11.875,10.54241,11.0352,9.67857,10,9.67857ZM10,10.96429C10.3438,10.96429,10.625,11.2536,10.625,11.6071C10.625,11.9607,10.3438,12.25,10,12.25C9.65625,12.25,9.375,11.9607,9.375,11.6071C9.375,11.2536,9.65625,10.96429,10,10.96429Z></path></svg></div><div class="item tools">'),AB=q('<svg viewBox="0 0 20 20"><path d=M1.08108,0L0,1.079L4.18919,5.27938L2.54826,6.91715L6.9112,6.91715L6.9112,2.56262L5.28957,4.18112L1.08108,0ZM15.8108,5.27938L20,1.079L18.9189,0L14.7104,4.18112L13.0888,2.56262L13.0888,6.91715L17.4517,6.91715L15.8108,5.27938ZM4.16988,14.7014L0.07722,18.8054L1.1583,20L5.27027,15.7996L6.9112,17.4374L6.9112,13.0829L2.54826,13.0829L4.16988,14.7014ZM17.4517,13.0829L13.0888,13.0829L13.0888,17.4374L14.7297,15.7996L18.8417,20L19.9228,18.8054L15.8301,14.7013L17.4517,13.0829Z>'),DB=q('<svg viewBox="0 0 20 20"><path d=M2.93444,1.76899L7.57544,6.40999L6.38918,7.59626L1.76899,2.93444L0,4.70343L0,0L4.70343,0L2.93444,1.76899ZM6.40999,12.4037L1.76899,17.0447L0,15.2758L0,19.9792L4.70343,19.9792L2.93444,18.2102L7.57544,13.5692L6.40999,12.4037ZM15.2758,0L17.0447,1.76899L12.4037,6.40999L13.59,7.59626L18.231,2.95526L20,4.72425L20,0L15.2758,0ZM13.5692,12.4037L12.3829,13.59L17.0239,18.231L15.2549,20L19.9792,20L19.9792,15.2758L18.2102,17.0447L13.5692,12.4037Z>');const FB=e=>{const[t,r]=ye(!1),n=()=>{r(i=>!i)};return ki(()=>{document.addEventListener("fullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("msfullscreenchange",n)}),Br(()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("msfullscreenchange",n)}),(()=>{var i=PB(),o=i.firstChild,s=o.firstChild,u=s.nextSibling,d=o.nextSibling,h=d.firstChild,p=h.nextSibling,f=d.nextSibling,m=f.nextSibling,x=m.nextSibling,b=x.nextSibling,C=b.nextSibling;return Tn(_=>{},i),R(i,G($e,{get when(){return e.symbol},get children(){var _=LB(),k=_.firstChild;return Wi(_,"click",e.onSymbolClick),R(_,G($e,{get when(){return e.symbol.logo},get children(){var M=IB();return M.addEventListener("error",L=>L.currentTarget.style.display="none"),Ne(()=>Ve(M,"src",e.symbol.logo)),M}}),k),R(k,()=>e.symbol.symbol??e.symbol.shortName??e.symbol.name),_}}),o),R(i,G(kB,{get periods(){return e.periods},get period(){return e.period},get onPeriodChange(){return e.onPeriodChange}}),o),Wi(o,"click",e.onIndicatorClick),R(u,()=>I("indicator",e.locale)),R(i,G(_B,{get locale(){return e.locale},get currentCandleType(){return e.currentCandleType},get onCandleTypeChange(){return e.onCandleTypeChange}}),d),Wi(d,"click",As(e.currentCandleType)?void 0:e.onReplayClick),R(p,()=>I("replay",e.locale)),f.style.setProperty("flex","1"),R(i,G(xB,{get onMultiChartClick(){return e.onMultiChartClick},get multiChart(){return e.multiChart}}),m),m.$$click=()=>{A$(e.chart)},Wi(x,"click",e.onSettingClick),Wi(b,"click",e.onScreenshotClick),C.$$click=()=>{t()||e.rootContainer},R(C,(()=>{var _=De(()=>!!t());return()=>_()?AB():DB()})()),Ne(()=>st(d,`item tools ${As(e.currentCandleType)?"disabled":""}`)),i})()};Xt(["click"]);var RB=q("<div class=chartspire-ui-interval-container>"),OB=q("<span>");const NB=e=>{const[t,r]=ye(qe.ONE_DAY),n=[qe.ONE_DAY,qe.FIVE_DAY,qe.ONE_MONTH,qe.THREE_MONTH,qe.SIX_MONTH,qe.ONE_YEAR,qe.FIVE_YEAR],i=()=>{var o;const s=(o=e.widget)==null?void 0:o.getSize();let u={[qe.ONE_DAY]:1440,[qe.FIVE_DAY]:1440,[qe.ONE_MONTH]:1440,[qe.THREE_MONTH]:1440,[qe.SIX_MONTH]:2016,[qe.ONE_YEAR]:365,[qe.FIVE_YEAR]:260}[t()];e.ticker.type===mr.STOCKS&&(u={[qe.ONE_DAY]:390,[qe.FIVE_DAY]:390,[qe.ONE_MONTH]:273,[qe.THREE_MONTH]:390,[qe.SIX_MONTH]:390,[qe.ONE_YEAR]:252,[qe.FIVE_YEAR]:252}[t()]);const d=Math.min(Math.max(((s==null?void 0:s.width)??0)/u,1),50);e.widget.setBarSpace(d);let h={multiplier:u,timespan:Sn.DAY,text:qe.ONE_DAY};t()===qe.ONE_DAY?h={multiplier:1,timespan:Sn.MINUTE,text:qe.ONE_MIN}:t()===qe.FIVE_DAY?h={multiplier:5,timespan:Sn.MINUTE,text:qe.FIVE_MIN}:t()===qe.ONE_MONTH?h={multiplier:1,timespan:Sn.MINUTE,text:qe.THIRTY_MIN}:t()===qe.THREE_MONTH?h={multiplier:1,timespan:Sn.HOUR,text:qe.ONE_HOUR}:t()===qe.SIX_MONTH?h={multiplier:2,timespan:Sn.HOUR,text:qe.TWO_HOUR}:t()===qe.ONE_YEAR?h={multiplier:1,timespan:Sn.DAY,text:qe.ONE_DAY}:t()===qe.FIVE_YEAR&&(h={multiplier:1,timespan:Sn.WEEK,text:qe.ONE_WEEK}),e.widget.setOffsetRightDistance(0),e.setInterval(h)};return(()=>{var o=RB();return R(o,()=>n.map(s=>(()=>{var u=OB();return u.$$click=()=>{console.log("interval clicked",s),r(s),i()},R(u,s),Ne(()=>st(u,`interval-buttons ${s===t()?"selected":""}`)),u})())),o})()};Xt(["click"]);var zB=q('<div class=chartspire-ui-layout-selector><div class=layout-dropdown><div class=layout-selector><span class=layout-text></span><svg width=8 height=8 viewBox="0 0 8 8"><path d="M4 5.5L1.5 3h5L4 5.5z"></path></svg></div></div><span class=button>+</span><span class=button>-'),$B=q('<div class=edit-layout><span class=edit-button><svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z">'),BB=q('<div class=edit-layout-form><span class=confirm-button><svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg></span><span class=cancel-button>X');const VB=e=>{const[t,r]=ye([]),[n,i]=ye(null),[o,s]=ye(""),[u,d]=ye(!1);let h;rt(()=>{e.allLayouts&&r([...new Set(e.allLayouts)])});const p=Yt(()=>t().map(L=>({key:L,text:L,value:L}))),f=L=>{const A=L.value;e.layout===bt.getInstance(e.widget).getDefaultLayout()&&bt.getInstance(e.widget).removeAllOverlays(),b(A)},m=()=>{d(!u())},x=()=>{d(!1)},b=L=>{e.onLayoutChange(L)},C=()=>{if(t().length>=e.layoutLimit+1){alert("You can only have a maximum of "+e.layoutLimit.toString()+" layouts.");return}const L=`Layout${t().length+1}`;if(t().includes(L)){alert("A layout with this name already exists.");return}r([...t(),L]),e.setAllLayouts([...t(),L]),b(L)},_=()=>{if(e.layout===bt.getInstance(e.widget).getDefaultLayout()||!window.confirm("Are you sure you want to delete this layout?"))return;bt.getInstance(e.widget).removeStorage();const L=t().filter(A=>A!==e.layout);r(L),e.setAllLayouts(L),L.length>0?b(L[0]):b(""),i(null)},k=()=>{if(e.layout===bt.getInstance(e.widget).getDefaultLayout())return;const L=t().find(A=>A===e.layout);L&&(i(L),s(L))},M=async()=>{if(e.layout===bt.getInstance(e.widget).getDefaultLayout())return;const L=t().map(A=>A===n()?o():A);r(L),i(null),await bt.getInstance(e.widget).updateLayoutName(o()),e.setAllLayouts(L),b(o())};return[(()=>{var L=zB(),A=L.firstChild,P=A.firstChild,W=P.firstChild,D=W.nextSibling,$=A.nextSibling,z=$.nextSibling,B=h;return typeof B=="function"?Tn(B,L):h=L,P.$$click=m,R(W,()=>e.layout||"Select Layout"),$.$$click=C,z.$$click=_,R(L,(()=>{var Z=De(()=>!!e.layout);return()=>Z()&&(()=>{var J=$B(),H=J.firstChild;return H.$$click=k,R(J,(()=>{var ee=De(()=>n()===e.layout);return()=>ee()&&(()=>{var le=BB(),ce=le.firstChild,ae=ce.nextSibling;return R(le,G(Wa,{class:"layout-input",get value(){return o()},onChange:re=>{s(re)}}),ce),ce.$$click=M,ae.$$click=()=>i(null),le})()})(),null),J})()})(),null),Ne(()=>Ve(D,"class",`dropdown-arrow ${u()?"open":""}`)),L})(),G(W0,{get options(){return p()},get selectedKey(){return e.layout},onSelect:f,triggerRef:h,get isOpen(){return u()},onClose:x,placement:"top",className:"layout-dropdown",maxHeight:800})]};Xt(["click"]);const WB={builtInThemes:["Light Theme 1","Light Theme 2","Midnight Theme","Dark Theme","Dark Gray Theme","Blue Theme","Red Theme","Green Theme","Yellow Theme","Pink Theme"],customThemes:[],allowCustomThemes:!0};class UB{constructor(){xe(this,"storageKey","chartspire-custom-themes")}save(t){try{localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(r){console.warn("Failed to save custom themes to localStorage:",r)}}load(){try{const t=localStorage.getItem(this.storageKey);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load custom themes from localStorage:",t)}return null}}const HB=async()=>null;class YB{constructor(t=!1){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}save(t){this.log("[ExternalThemeStorageProvider] Saving custom themes via callback"),this.log("[ExternalThemeStorageProvider] Themes to save:",t),this.log("[ExternalThemeStorageProvider] Themes count:",t.length),this.logWarn("[ExternalThemeStorageProvider] No save callback registered, themes not saved")}load(){return this.log("[ExternalThemeStorageProvider] Load called - use loadAsync() for external storage"),null}async loadAsync(){try{this.log("[ExternalThemeStorageProvider] Loading custom themes via callback");const t=await HB();return t&&t.length>0?(this.log("[ExternalThemeStorageProvider] Custom themes loaded successfully"),t):(this.log("[ExternalThemeStorageProvider] No custom themes found"),[])}catch(t){return console.error("[ExternalThemeStorageProvider] Error loading custom themes:",t),null}}}const V5=class Id{constructor(t=!1){xe(this,"themeConfig"),xe(this,"customStyleElement",null),xe(this,"storageProvider"),xe(this,"useExternalStorage"),this.themeConfig={...WB},this.useExternalStorage=t,this.storageProvider=t?new YB:new UB,this.loadCustomThemes()}static getInstance(t=!1){return Id.instance||(Id.instance=new Id(t)),Id.instance}static async initializeAsync(t=!1){const r=Id.getInstance(t);return t&&r.isExternalStorageProvider(r.storageProvider)&&await r.loadCustomThemesAsync(),r}isUsingExternalStorage(){return this.useExternalStorage}isExternalStorageProvider(t){return"loadAsync"in t&&typeof t.loadAsync=="function"}setThemeConfig(t){this.themeConfig={...this.themeConfig,...t},this.saveCustomThemes(),this.updateCustomThemeStyles()}addCustomTheme(t){const r=this.themeConfig.customThemes.findIndex(n=>n.name===t.name);r>=0?this.themeConfig.customThemes[r]=t:this.themeConfig.customThemes.push(t),this.saveCustomThemes(),this.updateCustomThemeStyles()}removeCustomTheme(t){this.themeConfig.customThemes=this.themeConfig.customThemes.filter(r=>r.name!==t),this.saveCustomThemes(),this.updateCustomThemeStyles()}getAllThemes(){const t=this.themeConfig.customThemes.map(r=>r.displayName);return[...this.themeConfig.builtInThemes,...t]}getCustomThemes(){return this.themeConfig.customThemes}areCustomThemesAllowed(){return this.themeConfig.allowCustomThemes}isCustomTheme(t){return this.themeConfig.customThemes.some(r=>r.displayName===t||r.name===t)}getCustomTheme(t){return this.themeConfig.customThemes.find(r=>r.displayName===t||r.name===t)}loadCustomThemes(){const t=this.storageProvider.load();t&&(this.themeConfig.customThemes=t,this.updateCustomThemeStyles())}async loadCustomThemesAsync(){if(this.isExternalStorageProvider(this.storageProvider)){const t=await this.storageProvider.loadAsync();t&&(this.themeConfig.customThemes=t,this.updateCustomThemeStyles())}}saveCustomThemes(){this.storageProvider.save(this.themeConfig.customThemes)}updateCustomThemeStyles(){if(this.customStyleElement&&this.customStyleElement.remove(),this.themeConfig.customThemes.length>0){this.customStyleElement=document.createElement("style"),this.customStyleElement.id="chartspire-custom-themes";let t="";for(const r of this.themeConfig.customThemes)t+=this.generateThemeCSS(r);this.customStyleElement.textContent=t,document.head.appendChild(this.customStyleElement)}}generateThemeCSS(t){const r=t.colors;return`
.chartspire-ui[data-theme="${t.name}"] {
	--chartspire-ui-primary-color: ${r.primaryColor};
	--chartspire-ui-selected-color: ${r.selectedColor};
	--chartspire-ui-hover-background-color: ${r.hoverBackgroundColor};
	--chartspire-ui-background-color: ${r.backgroundColor};
	--chartspire-ui-popover-background-color: ${r.popoverBackgroundColor};
	--chartspire-ui-text-color: ${r.textColor};
	--chartspire-ui-text-second-color: ${r.textSecondColor};
	--chartspire-ui-border-color: ${r.borderColor};
}
`}importThemes(t){try{const r=JSON.parse(t);for(const n of r)this.addCustomTheme(n)}catch{throw new Error("Invalid theme JSON format")}}exportThemes(){return JSON.stringify(this.themeConfig.customThemes,null,2)}};xe(V5,"instance");let Cy=V5;var XB=q("<button class=custom-theme-toggle>+"),jB=q('<div class=chartspire-ui-theme-selector><div class=theme-selector-header><svg viewBox="2 2 20 20"><path d="M12 2.75C6.89321 2.75 2.75 6.90121 2.75 12.0261C2.75 16.7885 6.32861 20.7112 10.9326 21.2412C11.395 21.2944 11.89 21.1004 12.2858 20.7036C12.6473 20.3412 12.6473 19.7528 12.2858 19.3904C11.9739 19.0776 11.6611 18.6609 11.4899 18.1872C11.3146 17.702 11.2713 17.0933 11.627 16.5276C11.9499 16.014 12.4341 15.739 12.9421 15.6053C13.4313 15.4766 13.9734 15.4693 14.494 15.5009C14.978 15.5303 15.4991 15.5978 16.0045 15.6633C16.0471 15.6689 16.0896 15.6744 16.132 15.6798C16.6889 15.7517 17.2328 15.8188 17.7581 15.8439C18.8324 15.8954 19.6599 15.76 20.2254 15.2976C20.7667 14.8552 21.25 13.9568 21.25 12.0261C21.25 6.90121 17.1068 2.75 12 2.75ZM1.25 12.0261C1.25 6.07647 6.0611 1.25 12 1.25C17.9389 1.25 22.75 6.07647 22.75 12.0261C22.75 14.1713 22.2132 15.6101 21.1748 16.459C20.1608 17.2879 18.8495 17.398 17.6863 17.3422C17.0929 17.3138 16.4934 17.239 15.9399 17.1675C15.901 17.1625 15.8625 17.1575 15.8241 17.1525C15.3046 17.0853 14.8335 17.0243 14.4032 16.9982C13.937 16.9699 13.5828 16.9878 13.3239 17.0559C13.0837 17.1191 12.968 17.2127 12.8968 17.326C12.858 17.3877 12.8307 17.4837 12.9007 17.6775C12.9749 17.8829 13.1368 18.1195 13.3478 18.3311C14.2933 19.279 14.2933 20.815 13.3478 21.7629C12.6976 22.4148 11.7682 22.8473 10.761 22.7314C5.40565 22.1148 1.25 17.5562 1.25 12.0261ZM9.585 6.24977C9.17079 6.24977 8.835 6.58556 8.835 6.99977C8.835 7.41399 9.17079 7.74977 9.585 7.74977C9.99922 7.74977 10.335 7.41399 10.335 6.99977C10.335 6.58556 9.99922 6.24977 9.585 6.24977ZM7.335 6.99977C7.335 5.75713 8.34236 4.74977 9.585 4.74977C10.8276 4.74977 11.835 5.75713 11.835 6.99977C11.835 8.24241 10.8276 9.24977 9.585 9.24977C8.34236 9.24977 7.335 8.24241 7.335 6.99977ZM14.5 6.25C14.0858 6.25 13.75 6.58579 13.75 7C13.75 7.41421 14.0858 7.75 14.5 7.75C14.9142 7.75 15.25 7.41421 15.25 7C15.25 6.58579 14.9142 6.25 14.5 6.25ZM12.25 7C12.25 5.75736 13.2574 4.75 14.5 4.75C15.7426 4.75 16.75 5.75736 16.75 7C16.75 8.24264 15.7426 9.25 14.5 9.25C13.2574 9.25 12.25 8.24264 12.25 7ZM6.5 10.75C6.08579 10.75 5.75 11.0858 5.75 11.5C5.75 11.9142 6.08579 12.25 6.5 12.25C6.91421 12.25 7.25 11.9142 7.25 11.5C7.25 11.0858 6.91421 10.75 6.5 10.75ZM4.25 11.5C4.25 10.2574 5.25736 9.25 6.5 9.25C7.74264 9.25 8.75 10.2574 8.75 11.5C8.75 12.7426 7.74264 13.75 6.5 13.75C5.25736 13.75 4.25 12.7426 4.25 11.5ZM17.5 10.75C17.0858 10.75 16.75 11.0858 16.75 11.5C16.75 11.9142 17.0858 12.25 17.5 12.25C17.9142 12.25 18.25 11.9142 18.25 11.5C18.25 11.0858 17.9142 10.75 17.5 10.75ZM15.25 11.5C15.25 10.2574 16.2574 9.25 17.5 9.25C18.7426 9.25 19.75 10.2574 19.75 11.5C19.75 12.7426 18.7426 13.75 17.5 13.75C16.2574 13.75 15.25 12.7426 15.25 11.5Z"></path></svg><div class=theme-dropdown><div class=theme-selector><span class=theme-text></span><svg width=8 height=8 viewBox="0 0 8 8"><path d="M4 5.5L1.5 3h5L4 5.5z">'),ZB=q("<div class=import-section><label></label><textarea rows=4></textarea><div class=import-buttons><button></button><button>"),GB=q("<div class=custom-themes-list><h5>"),qB=q("<div class=chartspire-ui><div class=custom-theme-creator><div class=creator-header><h4></h4><button class=close-btn></button></div><div class=theme-form><div class=form-group><label></label><input type=text></div><div class=color-inputs></div><div class=action-buttons><button class=create-btn></button><button class=import-btn></button><button class=export-btn>"),QB=q("<div class=form-group><label><span class=field-description></span></label><div class=color-input-group><input type=color><input type=text>"),KB=q("<div class=theme-item><span class=theme-name></span><div class=theme-actions><button class=edit-btn></button><button class=delete-btn>");const JB=e=>{const[t,r]=ye([]),[n,i]=ye([]),[o,s]=ye(!1),[u,d]=ye({left:0,top:0}),[h,p]=ye(""),[f,m]=ye(null),[x,b]=ye({primaryColor:"#1677ff",selectedColor:"rgba(22, 119, 255, 0.15)",hoverBackgroundColor:"rgba(22, 119, 255, 0.15)",backgroundColor:"#ffffff",popoverBackgroundColor:"#ffffff",textColor:"#051441",textSecondColor:"#76808f",borderColor:"#ebedf1"}),[C,_]=ye(!1),[k,M]=ye(""),[L,A]=ye(!1);let P;localStorage.getItem(Dv);const W=Cy.getInstance(e.themeUseExternalStorage??!1),D=()=>{const Y=W.getAllThemes(),U=W.getCustomThemes(),de=Y.map(X=>W.isCustomTheme(X)?X:I(X,e.locale));r(de),i([...U])};ki(async()=>{if(D(),e.themeUseExternalStorage){await new Promise(U=>setTimeout(U,1e3));try{await Cy.initializeAsync(!0),D()}catch(U){console.error("[ThemeSelector] Failed to initialize external theme storage: ",U)}}const Y=()=>{if(o()){const U=document.querySelector(".custom-theme-toggle");if(U){const de=U.getBoundingClientRect(),X=window.innerWidth<=480?window.innerWidth-16:320,fe=600,ue=window.innerWidth<=480?8:16;let Fe=de.left;Fe+X>window.innerWidth-ue&&(Fe=window.innerWidth-X-ue),Fe<ue&&(Fe=ue);let Te=de.top-fe-8;Te<ue&&(Te=de.bottom+8),Te+fe>window.innerHeight-ue&&(Te=window.innerHeight-fe-ue),d({left:Fe,top:Te})}}};return window.addEventListener("resize",Y),()=>{window.removeEventListener("resize",Y)}});const $=Yt(()=>t().map(Y=>({key:Y,text:Y+(W.isCustomTheme(Y)?" (Custom)":""),value:Y}))),z=Y=>{const U=Y.value;J(U)},B=()=>{A(!L())},Z=()=>{A(!1)},J=Y=>{console.log("[ThemeSelector] handleThemeChange called with:",Y);let U=Y;const de=["Light Theme 1","Light Theme 2","Midnight Theme","Dark Theme","Dark Gray Theme","Blue Theme","Red Theme","Green Theme","Yellow Theme","Pink Theme"];for(const X of de)if(I(X,e.locale)===Y){U=X;break}if(W.isCustomTheme(Y)){const X=W.getCustomTheme(Y);X&&(U=X.name)}console.log("[ThemeSelector] Setting theme to:",U),e.setTheme(U)},H=[{key:"primaryColor",label:"Primary Color",description:"Main accent color for buttons and highlights"},{key:"selectedColor",label:"Selected Color",description:"Color for selected items and active states"},{key:"hoverBackgroundColor",label:"Hover Background",description:"Background color when hovering over elements"},{key:"backgroundColor",label:"Background Color",description:"Main background color of the interface"},{key:"popoverBackgroundColor",label:"Popover Background",description:"Background color for dropdowns and modals"},{key:"textColor",label:"Text Color",description:"Primary text color"},{key:"textSecondColor",label:"Secondary Text",description:"Color for secondary text and labels"},{key:"borderColor",label:"Border Color",description:"Color for borders and dividers"}],ee=(Y,U)=>{b(de=>({...de,[Y]:U}))},le=()=>{if(!h().trim()){alert(I("Please enter a theme name",e.locale));return}const Y={name:h().trim(),displayName:h().trim(),colors:x()};try{W.addCustomTheme(Y),D(),ce();const U=f()?I("Theme updated successfully!",e.locale):I("Theme created successfully!",e.locale);alert(U),s(!1)}catch{const U=f()?I("Failed to update theme",e.locale):I("Failed to create theme",e.locale);alert(U)}},ce=()=>{p(""),m(null),b({primaryColor:"#1677ff",selectedColor:"rgba(22, 119, 255, 0.15)",hoverBackgroundColor:"rgba(22, 119, 255, 0.15)",backgroundColor:"#ffffff",popoverBackgroundColor:"#ffffff",textColor:"#051441",textSecondColor:"#76808f",borderColor:"#ebedf1"})},ae=Y=>{m(Y),p(Y.displayName),b(Y.colors),s(!0)},re=()=>{try{W.importThemes(k()),M(""),_(!1),D(),alert(I("Themes imported successfully!",e.locale))}catch{alert(I("Invalid theme JSON format",e.locale))}},ve=()=>{const Y=W.exportThemes();navigator.clipboard.writeText(Y).then(()=>{alert(I("Themes exported to clipboard!",e.locale))}).catch(()=>{const U=document.createElement("textarea");U.value=Y,document.body.appendChild(U),U.select(),document.execCommand("copy"),document.body.removeChild(U),alert(I("Themes exported to clipboard!",e.locale))})},pe=Y=>{confirm(I(`Are you sure you want to delete the theme "${Y}"?`,e.locale))&&(W.removeCustomTheme(Y),D(),alert(I("Theme deleted successfully!",e.locale)))};return[(()=>{var Y=jB(),U=Y.firstChild,de=U.firstChild,X=de.nextSibling,fe=X.firstChild,ue=fe.firstChild,Fe=ue.nextSibling,Te=P;return typeof Te=="function"?Tn(Te,U):P=U,fe.$$click=B,R(ue,(()=>{var Pe=De(()=>!!e.theme);return()=>Pe()?De(()=>!!W.isCustomTheme(e.theme))()?e.theme+" (Custom)":I(e.theme,e.locale):I("Light Theme 1",e.locale)})()),R(U,G($e,{get when(){return e.themeGeneraterEnabled!==!1},get children(){var Pe=XB();return Pe.$$click=Ce=>{if(!o()){const Ee=Ce.currentTarget.getBoundingClientRect(),Je=window.innerWidth<=480?window.innerWidth-16:320,Qe=600,nt=window.innerWidth<=480?8:16;let Ue=Ee.left;Ue+Je>window.innerWidth-nt&&(Ue=window.innerWidth-Je-nt),Ue<nt&&(Ue=nt);let ct=Ee.top-Qe-8;ct<nt&&(ct=Ee.bottom+8),ct+Qe>window.innerHeight-nt&&(ct=window.innerHeight-Qe-nt),d({left:Ue,top:ct})}s(!o())},Ne(()=>Ve(Pe,"title",I("Create Custom Theme",e.locale))),Pe}}),null),Ne(()=>Ve(Fe,"class",`dropdown-arrow ${L()?"open":""}`)),Y})(),G(W0,{get isOpen(){return L()},onClose:Z,onSelect:z,get options(){return $()},triggerRef:P,placement:"top",maxHeight:800}),G($e,{get when(){return o()},get children(){return G(nv,{get children(){var Y=qB(),U=Y.firstChild,de=U.firstChild,X=de.firstChild,fe=X.nextSibling,ue=de.nextSibling,Fe=ue.firstChild,Te=Fe.firstChild,Pe=Te.nextSibling,Ce=Fe.nextSibling,Ee=Ce.nextSibling,Je=Ee.firstChild,Qe=Je.nextSibling,nt=Qe.nextSibling;return R(X,(()=>{var Ue=De(()=>!!f());return()=>Ue()?I("Edit Custom Theme",e.locale):I("Create Custom Theme",e.locale)})()),fe.$$click=()=>{ce(),s(!1)},R(Te,()=>I("Theme Name",e.locale)),Pe.$$input=Ue=>p(Ue.currentTarget.value),R(Ce,G(Vn,{each:H,children:Ue=>(()=>{var ct=QB(),ut=ct.firstChild,Qt=ut.firstChild,Kt=ut.nextSibling,Mt=Kt.firstChild,gt=Mt.nextSibling;return R(ut,()=>I(Ue.label,e.locale),Qt),R(Qt,()=>I(Ue.description,e.locale)),Mt.$$input=jt=>ee(Ue.key,jt.currentTarget.value),gt.$$input=jt=>ee(Ue.key,jt.currentTarget.value),Ne(()=>Ve(gt,"placeholder",I("Color value (hex, rgb, rgba)",e.locale))),Ne(()=>Mt.value=x()[Ue.key].startsWith("rgba")?"#1677ff":x()[Ue.key]),Ne(()=>gt.value=x()[Ue.key]),ct})()})),Je.$$click=le,R(Je,(()=>{var Ue=De(()=>!!f());return()=>Ue()?I("Update Theme",e.locale):I("Create Theme",e.locale)})()),Qe.$$click=()=>_(!C()),R(Qe,()=>I("Import",e.locale)),nt.$$click=ve,R(nt,()=>I("Export",e.locale)),R(ue,G($e,{get when(){return C()},get children(){var Ue=ZB(),ct=Ue.firstChild,ut=ct.nextSibling,Qt=ut.nextSibling,Kt=Qt.firstChild,Mt=Kt.nextSibling;return R(ct,()=>I("Paste Theme JSON",e.locale)),ut.$$input=gt=>M(gt.currentTarget.value),Kt.$$click=re,R(Kt,()=>I("Import",e.locale)),Mt.$$click=()=>_(!1),R(Mt,()=>I("Cancel",e.locale)),Ne(()=>Ve(ut,"placeholder",I("Paste your theme JSON here...",e.locale))),Ne(()=>ut.value=k()),Ue}}),null),R(ue,G($e,{get when(){return n().length>0},get children(){var Ue=GB(),ct=Ue.firstChild;return R(ct,()=>I("Custom Themes",e.locale)),R(Ue,G(Vn,{get each(){return n()},children:ut=>(()=>{var Qt=KB(),Kt=Qt.firstChild,Mt=Kt.nextSibling,gt=Mt.firstChild,jt=gt.nextSibling;return R(Kt,()=>ut.displayName),gt.$$click=()=>ae(ut),R(gt,()=>I("Edit",e.locale)),jt.$$click=()=>pe(ut.name),R(jt,()=>I("Delete",e.locale)),Qt})()}),null),Ue}}),null),Ne(Ue=>{var ct=e.theme,ut=`${u().left}px`,Qt=`${u().top}px`,Kt=I("Enter theme name",e.locale);return ct!==Ue.e&&Ve(Y,"data-theme",Ue.e=ct),ut!==Ue.t&&((Ue.t=ut)!=null?U.style.setProperty("left",ut):U.style.removeProperty("left")),Qt!==Ue.a&&((Ue.a=Qt)!=null?U.style.setProperty("top",Qt):U.style.removeProperty("top")),Kt!==Ue.o&&Ve(Pe,"placeholder",Ue.o=Kt),Ue},{e:void 0,t:void 0,a:void 0,o:void 0}),Ne(()=>Pe.value=h()),Y}})}})]};Xt(["click","input"]);var eV=q("<div class=chartspire-ui-timezone-container><div class=timezone-display><div class=time-text></div><div class=timezone-text>");const tV=e=>{const[t,r]=ye(""),[n,i]=ye(!1);let o,s;const u=()=>{try{const m=new Date().toLocaleTimeString("en-US",{timeZone:e.timezone.key,hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});r(m)}catch{const m=new Date().toLocaleTimeString("en-US",{timeZone:"UTC",hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});r(m)}},d=Yt(()=>bT(e.locale).map(m=>({key:m.key,text:typeof m.text=="string"?m.text:String(m.text),value:m}))),h=m=>{const x=m.value;e.onTimezoneChange(x)},p=()=>{i(!n())},f=()=>{i(!1)};return ki(()=>{u(),o=window.setInterval(u,1e3)}),Br(()=>{o&&clearInterval(o)}),[(()=>{var m=eV(),x=m.firstChild,b=x.firstChild,C=b.nextSibling,_=s;return typeof _=="function"?Tn(_,m):s=m,x.$$click=p,R(b,t),R(C,(()=>{var k=De(()=>typeof e.timezone.text=="string");return()=>k()&&e.timezone.text.split(" ")[0]||e.timezone.text})()),m})(),G(W0,{get options(){return d()},get selectedKey(){return e.timezone.key},onSelect:h,triggerRef:s,get isOpen(){return n()},onClose:f,placement:"top",className:"timezone-dropdown",maxHeight:800})]};Xt(["click"]);var rV=q("<div class=chartspire-ui-bottom-bar>");const nV=e=>(()=>{var t=rV();return Tn(r=>{},t),R(t,G($e,{get when(){return e.intervalEnabled!==!1},get children(){return G(NB,{get widget(){return e.widget},get ticker(){return e.ticker},get setInterval(){return e.setInterval}})}}),null),R(t,G($e,{get when(){return e.layoutsEnabled!==!1},get children(){return G(VB,{get widget(){return e.widget},get layout(){return e.layout},get allLayouts(){return e.allLayouts},get setAllLayouts(){return e.setAllLayouts},get onLayoutChange(){return e.onLayoutChange},get layoutLimit(){return e.layoutLimit}})}}),null),R(t,G($e,{get when(){return e.themesEnabled!==!1},get children(){return G(JB,{get widget(){return e.widget},get theme(){return e.theme},get setTheme(){return e.setTheme},get locale(){return e.locale},get themeUseExternalStorage(){return e.themeUseExternalStorage},get themeGeneraterEnabled(){return e.themeGeneraterEnabled}})}}),null),R(t,G($e,{get when(){return e.timezoneEnabled!==!1},get children(){return G(tV,{get timezone(){return e.timezone},get onTimezoneChange(){return e.onTimezoneChange},get locale(){return e.locale}})}}),null),t})(),rr={color:"#1677FF",borderColor:"rgba(22, 119, 255, 0.35)",borderSize:1,radius:5,activeColor:"#1677FF",activeBorderColor:"rgba(22, 119, 255, 0.35)",activeBorderSize:3,activeRadius:5},En={style:"fill",color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderSize:0,borderRadius:2,borderColor:"#1677FF",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"rgba(22, 119, 255)"},Lv={style:"fill",color:"rgba(22, 119, 255, 0.25)",borderColor:"#1677FF",borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},Zc={style:"fill",color:"rgba(22, 119, 255)",borderColor:"#1677FF",borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},In={...Lv,borderRadius:2,color:"rgba(22, 119, 255, 0.1)",borderColor:"#1677FF",borderSize:1,borderStyle:"solid",borderDashedValue:[2,2],paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2},Pv={style:"solid",color:"#1677FF",size:1,dashedValue:[2,2]},kr={...Pv,smooth:!1};function iV(){return{point:rr}}function oV(){return{line:kr,point:rr}}function aV(){return{line:kr,point:rr}}function sV(){return{line:kr,point:rr}}function lV(){return{line:kr,point:rr}}function cV(){return{line:kr,point:rr}}function uV(){return{line:kr,point:rr}}function dV(){return{line:kr,point:rr}}function hV(){return{line:kr,point:rr}}function pV(){return{line:kr,point:rr}}function fV(){return{line:kr,text:En,point:rr}}function gV(){return{line:kr,point:rr}}function vV(){return{polygon:Zc,point:rr}}function mV(){return{polygon:Zc,point:rr}}function yV(){return{circle:Lv,point:rr}}function bV(){return{arc:Pv,point:rr}}function xV(){return{text:En}}function wV(){return{line:kr,rect:In,point:rr}}function CV(){return{line:kr,rect:In,point:rr}}function _V(){return{line:kr,text:En,polygon:Zc}}function SV(){return{text:En,line:kr,polygon:Zc}}function kV(){return{polygon:Zc,rect:In,point:rr}}function MV(){return{point:rr,rect:In,polygon:Zc}}function TV(){return{line:kr,rect:In,text:En,point:rr}}function EV(){return{line:kr,rect:In,text:En,point:rr}}function IV(){return{circle:Lv,rect:In,text:En,point:rr}}function LV(){return{line:kr,rect:In,text:En,arc:Pv,point:rr}}function PV(){return{line:kr,rect:In,text:En,point:rr}}function AV(){return{line:kr,rect:In,text:En,point:rr}}function DV(){return{line:kr,rect:In,text:En,point:rr}}function FV(){return{line:kr,rect:In,text:En,point:rr}}function RV(){return{line:kr,rect:In,text:En,point:rr}}function OV(){return{line:kr,rect:In,text:En,point:rr}}function NV(){return{line:kr,rect:In,text:En,point:rr}}function zV(){return{line:kr,rect:In,text:En,point:rr}}function $V(){return{line:kr,rect:In,text:En,point:rr}}function BV(){return{line:kr,rect:In,text:En,point:rr,polygon:Zc}}function VV(){return{rect:In,text:En,point:rr}}const _g={pointStyle:()=>tt.cloneDeep(iV()),horizontalStraightLineStyle:()=>tt.cloneDeep(oV()),horizontalRayLineStyle:()=>tt.cloneDeep(sV()),horizontalSegmentStyle:()=>tt.cloneDeep(aV()),verticalStraightLineStyle:()=>tt.cloneDeep(uV()),verticalRayLineStyle:()=>tt.cloneDeep(lV()),verticalSegmentStyle:()=>tt.cloneDeep(cV()),straightLineStyle:()=>tt.cloneDeep(gV()),rayLineStyle:()=>tt.cloneDeep(dV()),segmentStyle:()=>tt.cloneDeep(hV()),arrowStyle:()=>tt.cloneDeep(pV()),priceLineStyle:()=>tt.cloneDeep(fV()),rectStyle:()=>tt.cloneDeep(vV()),polygonStyle:()=>tt.cloneDeep(mV()),circleStyle:()=>tt.cloneDeep(yV()),arcStyle:()=>tt.cloneDeep(bV()),textStyle:()=>tt.cloneDeep(xV()),priceChannelLineStyle:()=>tt.cloneDeep(wV()),simpleTagStyle:()=>tt.cloneDeep(_V()),simpleAnnotationStyle:()=>tt.cloneDeep(SV()),parallelStraightLineStyle:()=>tt.cloneDeep(CV()),parallelogramStyle:()=>tt.cloneDeep(kV()),triangleStyle:()=>tt.cloneDeep(MV()),fibonacciSpiralStyle:()=>tt.cloneDeep(LV()),fibonacciCircleStyle:()=>tt.cloneDeep(IV()),fibonacciExtensionStyle:()=>tt.cloneDeep(PV()),fibonacciLineStyle:()=>tt.cloneDeep(TV()),fibonacciSegmentStyle:()=>tt.cloneDeep(EV()),fibonacciSpeedResistanceFanStyle:()=>tt.cloneDeep(AV()),gannBoxStyle:()=>tt.cloneDeep(DV()),abcdStyle:()=>tt.cloneDeep(RV()),anyWavesStyle:()=>tt.cloneDeep($V()),eightWavesStyle:()=>tt.cloneDeep(zV()),fiveWavesStyle:()=>tt.cloneDeep(NV()),threeWavesStyle:()=>tt.cloneDeep(OV()),xabcdStyle:()=>tt.cloneDeep(FV()),rulerStyle:()=>tt.cloneDeep(BV()),rrStyle:()=>tt.cloneDeep(VV())},_y={createPointFigures:({bounding:e,coordinates:t})=>({type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]},ignoreEvent:!1}),createYAxisFigures:({overlay:e,coordinates:t,bounding:r,yAxis:n})=>{var i;const o=(n==null?void 0:n.isFromZero())??!1;let s="left",u=0;o?(s="left",u=0):(s="right",u=r.width);let d="";return e.extendData!=null&&(typeof e.extendData!="function"?d=e.extendData??"":d=e.extendData(e)),d===""&&typeof((i=e.points[0])==null?void 0:i.value)=="number"&&(d=e.points[0].value.toString()),{type:"text",attrs:{x:u,y:t[0].y,text:d,align:s,baseline:"middle"}}}},WV={createPointFigures:({overlay:e,coordinates:t})=>{let r="";e.extendData&&(r=typeof e.extendData=="function"?e.extendData(e):e.extendData||"");const n=t[0].x,i=t[0].y-6,o=i-50,s=o-5;return[{type:"line",attrs:{coordinates:[{x:n,y:i},{x:n,y:o}]},ignoreEvent:!1},{type:"polygon",attrs:{coordinates:[{x:n,y:o},{x:n-4,y:s},{x:n+4,y:s}]},ignoreEvent:!1},{type:"text",attrs:{x:n,y:s,text:r,align:"center",baseline:"bottom"},ignoreEvent:!1}]}};function Av(e){if(e.name==="simpleTag"||e.name==="simpleAnnotation"){e.createPointFigures||(e.name==="simpleTag"?(e.createPointFigures=_y.createPointFigures,e.createYAxisFigures=_y.createYAxisFigures):e.name==="simpleAnnotation"&&(e.createPointFigures=WV.createPointFigures));const t=e.createPointFigures;e.createPointFigures=r=>{if(t){const n=t(r);if(Array.isArray(n))return n.map(i=>({...i,ignoreEvent:!1}));if(n)return{...n,ignoreEvent:!1}}return[]}}}var UV=q("<div class=overlay-type>Text"),HV=q("<div class=component><span>Label Text"),YV=q("<div class=chartspire-ui-overlay-setting-modal-content><div class=content>"),XV=q("<div class=overlay-type>"),jV=q("<div>"),ZV=q("<div class=component><span>");const W5=e=>{let t=e.overlay.styles?e.overlay.styles:_g[`${e.overlay.name}Style`]();(e.overlay.name==="simpleTag"||e.overlay.name==="simpleAnnotation")&&(t=_g[`${e.overlay.name}Style`]());const r=dN(e.locale);let n=[],i=[];t&&(n=Object.keys(r),i=Object.keys(t));const o=d=>{const[h,p,f]=d.split(".");if(t&&t[p]&&t&&t[p][f]!==void 0)return t[p][f];{const m=_g[`${e.overlay.name}Style`]();if(m&&m[p]&&m[p][f]!==void 0)return m[p][f]}},s=(d,h,p)=>{const f=d.key.split(".")[2];t[p][f]=h,(m=>{const x=tt.cloneDeep(m),[b,C,_]=d.key.split("."),k=C?`${C}.${_}`:`${C}.${_}`;C?tt.set(x,k,h):tt.set(x,`${d.key}`,h);const M={id:e.overlay.id,styles:x};if(e.widget.overrideOverlay(M),bt.getInstance(e.widget).overrideOverlay(M),e.chartId){const L=Rs(),A={...e.overlay,styles:x};L.onOverlayUpdated(e.chartId,A)}return x})(t)},u=d=>{const h=typeof d=="number"?String(d):d,p={id:e.overlay.id,extendData:h};if(e.widget.overrideOverlay(p),bt.getInstance(e.widget).overrideOverlay(p),e.chartId){const f=Rs(),m={...e.overlay,extendData:h};f.onOverlayUpdated(e.chartId,m)}(e.overlay.name==="simpleTag"||e.overlay.name==="simpleAnnotation")&&Av(e.overlay)};return G(Nl,{get title(){return`Style ${e.overlay.name}`},width:360,contentHeight:"90%",onClose:()=>{e.setOverlayVisible(!1),e.setShowOverlaySetting(!1)},get children(){var d=YV(),h=d.firstChild;return R(h,G($e,{get when(){return e.overlay.name==="simpleTag"||e.overlay.name==="simpleAnnotation"},get children(){return[UV(),(()=>{var p=HV();return p.firstChild,R(p,G(Wa,{style:{width:"120px"},get value(){return typeof e.overlay.extendData=="string"?e.overlay.extendData:""},onChange:f=>{u(f)}}),null),p})()]}}),null),R(h,G(Vn,{each:i,children:p=>{if(n.includes(p))return[(()=>{var f=XV();return R(f,p),f})(),G(Vn,{get each(){return r[p]},children:f=>{let m;const x=o(f.key);if(x!==void 0){switch(f.component){case"select":{m=G(jp,{style:{width:"120px"},get value(){return I(x,e.locale)},get dataSource(){return f.dataSource},onSelected:b=>{const C=b.key;s(f,C,p)}});break}case"input":{m=[G($e,{get when(){return tt.isArray(x)},get children(){var b=jV();return b.style.setProperty("width","120px"),b.style.setProperty("display","flex"),b.style.setProperty("flex-direction","row"),b.style.setProperty("align-items","center"),b.style.setProperty("vertical-align","middle"),R(b,G(Wa,{style:{width:"50px","margin-right":"10px"},get value(){return x[0]??"4"},onChange:C=>{let _=o(f.key);_[0]=Number(C),s(f,_,p)}}),null),R(b,G(Wa,{style:{width:"50px","margin-left":"10px"},get value(){return x[1]??"4"},onChange:C=>{let _=o(f.key);_[1]=Number(C),s(f,_,p)}}),null),b}}),G($e,{get when(){return!tt.isArray(x)},get children(){return G(Wa,{style:{width:"120px"},value:x??"4",onChange:b=>{let C=Number(b);s(f,C,p)}})}})];break}case"color":{m=G(mv,{style:{width:"120px"},value:x,opacityEnabled:!0,onChange:b=>{s(f,b,p)}});break}}if(m)return(()=>{var b=ZV(),C=b.firstChild;return R(C,()=>f.text),R(b,m,null),b})()}}})]}}),null),d}})};var GV=q("<div class=chartspire-ui-popup-background><div class=popup><button>Settings</button><button>Remove</button><button>Close");const qV=e=>{const[t,r]=ye(e.overlayMousePosition),[n,i]=ye(!1),o=p=>{p.preventDefault()},s=()=>{const p=t();try{const f=e.widget.getDom("candle_pane");if(f){const m=f.getBoundingClientRect();return{x:m.left+p.x,y:m.top+p.y}}}catch(f){console.warn("Failed to get chart container bounds for popup positioning:",f)}return p},u=()=>{e.setShowOverlaySetting?(e.setShowOverlaySetting(!0),e.setOverlayVisible(!1)):(i(!0),e.setOverlayVisible(!1))},d=()=>{e.setOverlayVisible(!1)},h=()=>{e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()?bt.getInstance(e.widget).deleteOverlay(e.overlay):e.widget.removeOverlay(e.overlay),e.chartId&&Dd()&&Rs().onOverlayRemoved(e.chartId,e.overlay),d()};return(()=>{var p=GV(),f=p.firstChild,m=f.firstChild,x=m.nextSibling,b=x.nextSibling;return p.$$contextmenu=o,f.style.setProperty("position","fixed"),f.style.setProperty("z-index","1000011"),m.$$click=u,x.$$click=h,b.$$click=d,R(p,G($e,{get when(){return n()&&!e.setShowOverlaySetting},get children(){return G(W5,{get widget(){return e.widget},get locale(){return e.locale},get overlay(){return e.overlay},get setOverlayVisible(){return e.setOverlayVisible},setShowOverlaySetting:i,get chartId(){return e.chartId},onConfirm:C=>{console.log("Selected color:",C),i(!1)}})}}),null),Ne(C=>{var _=`${s().y}px`,k=`${s().x}px`;return _!==C.e&&((C.e=_)!=null?f.style.setProperty("top",_):f.style.removeProperty("top")),k!==C.t&&((C.t=k)!=null?f.style.setProperty("left",k):f.style.removeProperty("left")),C},{e:void 0,t:void 0}),p})()};Xt(["contextmenu","click"]);const QV=e=>G($e,{get when(){return e.screenshotUrl.length>0},get children(){return G(l$,{get locale(){return e.locale},get url(){return e.screenshotUrl},onClose:()=>{e.setScreenshotUrl("")}})}}),KV=e=>G($e,{get when(){return e.indicatorSettingModalParams.visible},get children(){return G(y$,{get locale(){return e.locale},get params(){return e.indicatorSettingModalParams},onClose:()=>{e.setIndicatorSettingModalParams({visible:!1,indicatorName:"",paneId:"",calcParams:[],styles:{}})},onConfirm:(t,r)=>{const n=e.indicatorSettingModalParams;e.widget.overrideIndicator({name:n.indicatorName,calcParams:t,styles:r}),e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()&&bt.getInstance(e.widget).saveIndicators()}})}}),JV=e=>G($e,{get when(){return e.isActive},get children(){return G(FB,{get chart(){return e.widget},get rootContainer(){return e.rootContainer},get locale(){return e.locale},get symbol(){return e.symbols},get spread(){return e.drawingBarVisible},get period(){return e.period},get periods(){return e.periods},get multiChart(){return e.multiChart},get layout(){return e.layout},get allLayouts(){return e.allLayouts},get setAllLayouts(){return e.setAllLayouts},get currentCandleType(){return e.currentCandleType},get onCandleTypeChange(){return e.onCandleTypeChange},onMenuClick:async()=>{try{await KM(()=>e.setDrawingBarVisible(!e.drawingBarVisible)),e.widget.resize()}catch(t){console.error(t)}},onSymbolClick:()=>{e.setSymbolSearchModalVisible(!e.symbolSearchModalVisible)},get onPeriodChange(){return e.setPeriod},onIndicatorClick:()=>{e.setIndicatorModalVisible(!e.indicatorModalVisible)},onSettingClick:()=>{e.setSettingModalVisible(!e.settingModalVisible)},onScreenshotClick:()=>{if(e.widget!=null){const t=e.widget.getConvertPictureUrl(!0,"jpeg",e.theme==="dark"?"#151517":"#ffffff");e.setScreenshotUrl(t)}},onMultiChartClick:()=>{e.setMultiChartModalVisible(!e.multiChartModalVisible)},onReplayClick:()=>{e.setReplayModalVisible(!e.replayModalVisible)},get onLayoutChange(){return e.setLayout},get layoutLimit(){return e.layoutLimit}})}}),eW=e=>{const t=Rs();return G($e,{get when(){return e.drawingBarVisible&&e.isActive},get children(){return G(a$,{get locale(){return e.locale},get widget(){return e.widget},get currentLayout(){return e.currentLayout},get setOverlaySettingVisible(){return e.setOverlaySettingVisible},get setOverlayStyles(){return e.setOverlayStyles},get setOverlayMousePosition(){return e.setOverlayMousePosition},get drawingBarCollapsed(){return e.drawingBarCollapsed},get setDrawingBarCollapsed(){return e.setDrawingBarCollapsed},onDrawingItemClick:r=>{const n={...r,onDrawing:function(i){return e.chartIds&&Dd()&&t.onOverlayUpdated(e.chartIds,i.overlay),!1},onDrawEnd:function(i){return e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()&&bt.getInstance(i.chart).saveOverlay(i.overlay),(i.overlay.name==="simpleTag"||i.overlay.name==="simpleAnnotation")&&Av(i.overlay),e.chartIds&&Dd()&&t.onOverlayCreated(e.chartIds,i.overlay),!0},onRightClick:function(i){var o;const s=i.x||0,u=i.y||0,d=Ud(s,u);return e.setOverlayMousePosition(d),e.setOverlaySettingVisible(!0),e.setOverlayStyles(i.overlay),(o=i.preventDefault)==null||o.call(i),!0},onDoubleClick:function(i){const o=i.x||0,s=i.y||0,u=Ud(o,s);return e.setOverlayMousePosition(u),e.setOverlaySettingVisible(!0),e.setOverlayStyles(i.overlay),!0},onPressedMoving:function(i){return e.chartIds&&Dd()&&t.onOverlayUpdated(e.chartIds,i.overlay),!1},onPressedMoveEnd:function(i){return e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()&&setTimeout(()=>{bt.getInstance(i.chart).overrideOverlay(i.overlay)},0),e.chartIds&&Dd()&&t.onOverlayUpdated(e.chartIds,i.overlay),!0}};e.widget.createOverlay(n)},onModeChange:r=>{},onLockChange:r=>{const n=e.widget.getOverlays();n&&typeof n.forEach=="function"&&n.forEach(i=>{e.widget.overrideOverlay({id:i.id,lock:r})})},onVisibleChange:r=>{const n=e.widget.getOverlays();n&&typeof n.forEach=="function"&&n.forEach(i=>{e.widget.overrideOverlay({id:i.id,visible:r})})},onRemoveClick:r=>{const n=e.widget.getOverlays(),i=[];n&&typeof n.forEach=="function"&&n.forEach(o=>{i.push(o)}),e.currentLayout!==bt.getInstance(e.widget).getDefaultLayout()?bt.getInstance(e.widget).removeAllOverlays(!0):n&&typeof n.forEach=="function"&&n.forEach(o=>{e.widget.removeOverlay({id:o.id})}),e.chartIds&&i.forEach(o=>{t.onOverlayRemoved(e.chartIds,o)})}})}})},tW=(e,t)=>e===j.THREE_MIXED?t==="chart1"?"three-chart-mixed-large":"three-chart-mixed-small":e===j.THREE_MIXED_REVERSE?t==="chart3"?"three-chart-mixed-reverse-large":"three-chart-mixed-reverse-small":e===j.THREE_MIXED_BOTTOM?t==="chart3"?"three-chart-mixed-bottom-large":"three-chart-mixed-bottom-small":e===j.THREE_MIXED_TOP?t==="chart1"?"three-chart-mixed-top-large":"three-chart-mixed-top-small":e===j.FOUR_MIXED?t==="chart1"?"four-chart-mixed-large":"four-chart-mixed-small":e===j.FOUR_MIXED_REVERSE?t==="chart4"?"four-chart-mixed-reverse-large":"four-chart-mixed-reverse-small":e===j.FOUR_MIXED_TOP?t==="chart1"?"four-chart-mixed-top-large":"four-chart-mixed-top-small":e===j.FOUR_MIXED_BOTTOM?t==="chart4"?"four-chart-mixed-bottom-large":"four-chart-mixed-bottom-small":e===j.FIVE_MIXED?t==="chart1"?"five-chart-mixed-large":"five-chart-mixed-small":e===j.FIVE_MIXED_REVERSE?t==="chart5"?"five-chart-mixed-reverse-large":"five-chart-mixed-reverse-small":rW(e),rW=e=>{switch(e){case j.TWO:return"two-chart";case j.TWO_VERTICAL:return"two-chart-vertical";case j.THREE:return"three-chart";case j.THREE_VERTICAL:return"three-chart-vertical";case j.FOUR:return"four-chart";case j.FOUR_VERTICAL:return"four-chart-vertical";case j.FOUR_HORIZONTAL:return"four-chart-horizontal";case j.FIVE_VERTICAL:return"five-chart-vertical";case j.FIVE_HORIZONTAL:return"five-chart-horizontal";case j.SIX:return"six-chart";case j.SIX_HORIZONTAL:return"six-chart-horizontal";case j.SIX_VERTICAL:return"six-chart-vertical";case j.SIX_MIXED:return"six-chart-mixed";case j.SEVEN_VERTICAL:return"seven-chart-vertical";case j.SEVEN_HORIZONTAL:return"seven-chart-horizontal";case j.EIGHT:return"eight-chart";case j.EIGHT_VERTICAL:return"eight-chart-vertical";case j.EIGHT_HORIZONTAL:return"eight-chart-horizontal";case j.NINE:return"nine-chart";case j.NINE_VERTICAL:return"nine-chart-vertical";case j.NINE_HORIZONTAL:return"nine-chart-horizontal";case j.TEN:return"ten-chart";case j.TEN_VERTICAL:return"ten-chart-vertical";case j.TEN_HORIZONTAL:return"ten-chart-horizontal";case j.TWELVE:return"twelve-chart";case j.TWELVE_VERTICAL:return"twelve-chart-vertical";case j.TWELVE_HORIZONTAL:return"twelve-chart-horizontal";case j.TWELVE_GRID:return"twelve-chart-grid";case j.FOURTEEN:return"fourteen-chart";case j.SIXTEEN:return"sixteen-chart";case j.SIXTEEN_GRID:return"sixteen-chart-grid";case j.ONE:default:return"one-chart"}};var nW=q("<div><div>");const iW=e=>{const t=()=>{e.onClick!=null&&e.onClick()},r=()=>{e.onClick!=null&&e.onClick()};return(()=>{var n=nW(),i=n.firstChild;R(n,G($e,{get when(){return e.loadingVisible},get children(){return G(B2,{})}}),i),i.$$touchend=r,i.$$click=t;var o=e.ref;return typeof o=="function"?Tn(o,i):e.ref=i,Ne(s=>{var u=`chartspire-ui-content ${tW(e.multiChart,e.chartIds)}`,d=`
          chartspire-ui-widget
          ${e.chartIds}
          ${e.isActive&&e.multiChart>1?"active-chart":""}
          `,h=e.chartIds,p=e.drawingBarVisible,f=e.drawingBarCollapsed,m=String(e.multiChart),x=e.isActive;return u!==s.e&&st(n,s.e=u),d!==s.t&&st(i,s.t=d),h!==s.a&&Ve(i,"data-chart-id",s.a=h),p!==s.o&&Ve(i,"data-drawing-bar-visible",s.o=p),f!==s.i&&Ve(i,"data-drawing-bar-collapsed",s.i=f),m!==s.n&&Ve(i,"multichart-amount",s.n=m),x!==s.s&&Ve(i,"is-active-chart",s.s=x),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),n})()};Xt(["click","touchend"]);const oW=e=>G($e,{get when(){return e.symbolModalVisible},get children(){return G(W2,{get locale(){return e.locale},get onSymbolSelected(){return e.setSymbol},onClose:()=>{e.setSymbolSearchModalVisible(!1)},get enabledSymbolTypes(){return e.enabledSymbolTypes??[]}})}});function aW(e,t,r){rt(()=>{e()&&r(!0)}),rt(()=>{t()||r(!1)})}function sW(e,t){rt(()=>{e()&&$U(t())})}function lW(e,t){rt(()=>{e()&&(t(),e()>1?Py(!0):Py(!1))})}const U5=()=>({axis:{position:"right",inside:!1,reverse:!1,scrollZoomEnabled:!0,gap:{top:.2,bottom:.1}},dragEnabled:!0,state:"normal"});function cW(e,t,r,n,i,o,s,u,d,h,p,f){rt(async()=>{if(r()&&i()&&e()&&t!=null){if(o([]),s(z2({})),await bt.getInstance(Ze(t)).removeAllOverlays(),YU(Ze(t)),r()===bt.getInstance(Ze(t)).getDefaultLayout())return Ze(t).setStyles(Ui(Or())),dW(Ze(t)),f&&Ui(Or()).candle&&Ui(Or()).candle.type&&f(Ui(Or()).candle.type),null;Fv(r());const m=await bt.getInstance(Ze(t)).getLayoutFromStore()??Pd();if(Ze(t)!==null&&f){await uW(Ze(t),m,f),await hW(Ze(t),m),await pW(Ze(t),m,d,h,p,Ze(n));const x=await bt.getInstance(Ze(t)).getIndicators(m);u(x.indicators)}}})}async function uW(e,t,r){const n=await bt.getInstance(e).getStyles(t);n?(e.setStyles(n),r&&n.candle&&n.candle.type&&r(n.candle.type)):(e.setStyles(Ui(Or())),r&&Ui(Or()).candle&&Ui(Or()).candle.type&&r(Ui(Or()).candle.type))}function dW(e){e.setPaneOptions(U5())}async function hW(e,t){const r=await bt.getInstance(e).getPaneOptionsFromStore(t);r&&r.paneOptions&&Object.keys(r.paneOptions).length>0&&e.setPaneOptions(r.paneOptions)}async function pW(e,t,r,n,i,o){const s=await bt.getInstance(e).getOverlays(t);tt.forEach(s,u=>{var d,h,p;(d=bt.getInstance(e))!=null&&d.isDefaultLayout()||o.symbol===((h=u==null?void 0:u.symbolInfo)==null?void 0:h.symbol)&&o.type===((p=u==null?void 0:u.symbolInfo)==null?void 0:p.type)&&(u.overlay.onDrawEnd=f=>(bt.getInstance(f.chart).saveOverlay(f.overlay),!0),u.overlay.onRightClick=f=>{var m;const x=Ud(f.x??0,f.y??0);return i(x),r(!0),n(f.overlay),(m=f.preventDefault)==null||m.call(f),!0},u.overlay.onDoubleClick=f=>{const m=Ud(f.x??0,f.y??0);return i(m),r(!0),n(f.overlay),!0},u.overlay.onPressedMoveEnd=f=>{var m;return(m=bt.getInstance(e))!=null&&m.isDefaultLayout()||setTimeout(()=>{bt.getInstance(f.chart).overrideOverlay(f.overlay)},0),!0},(u.overlay.name==="simpleTag"||u.overlay.name==="simpleAnnotation")&&Av(u.overlay),e.createOverlay(u.overlay))})}function fW(e,t,r){rt(()=>{const n=t();n!=null&&n.priceCurrency?(r.innerHTML=n.priceCurrency.toLocaleUpperCase(),r.style.display="flex"):r.style.display="none"})}function gW(e,t){rt(()=>{e(),t()})}function vW(e,t){rt(()=>{e()&&t()})}function mW(e,t){rt(()=>{console.log("useLocaleEffect",t()),Ze(e).setLocale(t())})}let H5=new Intl.DateTimeFormat("en",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"America/Los_Angeles"});function yW(e){H5=new Intl.DateTimeFormat("en",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:e})}function bW(){return H5}function xW(e,t,r){rt(()=>{if(Ze(e)==null)return;const n=t().key;yW(n),r()})}function wW(e,t,r){rt(()=>{t()&&Ze(e)&&(Ze(e).setStyles(t()),r(Ze(e).getStyles()))})}function CW(e,t){Rv.applyStylesToChart(e,t)}function _W(e,t){rt(()=>{Ze(e).setStyles(t),CW(Ze(e),t)})}const Bc=new Map;class $0{constructor(t,r,n){xe(this,"chart"),xe(this,"replayCandle"),xe(this,"replaySpeed"),xe(this,"hasReplaySpeedChanged",!1),xe(this,"dataList",[]),xe(this,"currentReplayData",[]),xe(this,"isPaused",!1),xe(this,"currentCallback",null),xe(this,"currentRightList",[]),xe(this,"selectedCandleIndex",null),xe(this,"currentIndex",0),xe(this,"intervalId",null),this.chart=t,this.replayCandle=r,this.replaySpeed=n}static getInstance(t,r,n,i){var o;if(!Bc.has(t)||((o=Bc.get(t))==null?void 0:o.chart)==null){const s=new $0(r,n,i);Bc.set(t,s)}return Bc.get(t)}static destroyInstance(t){Bc.has(t)&&Bc.delete(t)}static getInstancesMap(){return Bc}getCurrentReplayData(){return this.currentReplayData}setCurrentCallback(t){this.currentCallback=t}startReplayInterval(){if(this.currentRightList.length===0){console.warn("Replay: No data available for replay interval");return}if(!this.currentCallback){console.warn("Replay: No callback available for replay interval");return}this.clearCurrentInterval(),this.isPaused=!1;const t=this.validateReplaySpeed();this.createReplayInterval(this.currentRightList,this.currentCallback,t)}stopReplayInterval(){this.cleanupReplayState()}initializeReplayData(){var t;this.hasReplaySpeedChanged=!0,this.dataList=((t=this.chart)==null?void 0:t.getDataList())??[],this.selectedCandleIndex=this.replayCandle()}setupInitialChartState(t){var r;this.currentReplayData=[...t],(r=this.chart)==null||r.setDataLoader({getBars:({callback:n})=>{n(t)},subscribeBar:()=>{console.log("subscribeBar called during replay, returning",t.length,"data points")},unsubscribeBar:()=>{console.warn("unsubscribeBar called during replay")}})}getDataListToRightOfCandle(){try{if(!this.hasReplaySpeedChanged&&(this.initializeReplayData(),this.selectedCandleIndex!=null)){const t=this.selectedCandleIndex.dataIndex,r=this.dataList.slice(0,t+1);return this.dataList.slice(t+1)}if(this.selectedCandleIndex!==null)return this.dataList.slice(this.selectedCandleIndex.dataIndex+1)}catch(t){console.error("Error trying to get data to replay:",t)}return[]}isReplayPaused(){return this.isPaused&&this.currentIndex>0}isReplayActive(){return this.intervalId!==null}updateReplaySpeed(){try{if(!this.isReplayActive()||!this.currentCallback||this.currentRightList.length===0)return;const t=this.validateReplaySpeed();this.clearCurrentInterval(),this.createReplayInterval(this.currentRightList,this.currentCallback,t)}catch(t){console.error("Error updating replay speed:",t)}}validateReplaySpeed(){const t=Number(YA(this.replaySpeed().key));return isNaN(t)||t<=0?(console.warn("Invalid replay speed. Must be a positive number., Return set to 1x"),1e3):t}clearCurrentInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}cleanupReplayState(){this.clearCurrentInterval(),this.currentCallback=null,this.currentRightList=[],this.isPaused=!1}createReplayInterval(t,r,n){this.intervalId=setInterval(()=>{try{if(this.currentIndex<t.length){const i=t[this.currentIndex];this.currentReplayData.push(i),r(i),this.currentIndex++}else this.cleanupReplayState()}catch(i){console.error("Error during replay interval:",i),this.clearCurrentInterval()}},n)}initializeFreshReplay(){if(this.currentIndex=0,this.isPaused=!1,this.selectedCandleIndex!=null){const t=this.selectedCandleIndex.dataIndex;this.currentReplayData=this.dataList.slice(0,t+1)}else this.currentReplayData=[]}prepareResumeReplay(){this.isPaused=!1}startReplay(t){try{if(!Array.isArray(t)||t.length===0){console.warn("Invalid data provided for replay");return}if(this.currentRightList=[...t],this.isReplayPaused())if(this.prepareResumeReplay(),this.currentCallback){const r=this.validateReplaySpeed();this.createReplayInterval(t,this.currentCallback,r)}else console.warn("No callback available for resume, this should not happen");else this.initializeFreshReplay(),console.log("Replay: Using ChartDataProvider to create replay data loader"),console.log("Replay: Ready for ChartDataProvider integration - call createDataLoader with isReplayMode=true")}catch(r){console.log("Error starting replay:",r)}}pauseReplay(){try{this.intervalId!==null&&(this.clearCurrentInterval(),this.isPaused=!0)}catch(t){console.log("Error while pausing replay:",t)}}skipReplay(){try{this.pauseReplay(),this.currentReplayData=[...this.dataList],this.currentIndex=this.dataList.length,this.isPaused=!1,console.log("Replay: Skipping to end and transitioning back to live mode"),console.log("Replay: Skip completed - caller should transition to live mode via ChartDataProvider")}catch(t){console.log("Error while skipping to end:",t)}}}const SW=(e,t,r)=>{const n=()=>({key:"1x",text:UA("1x",e)}),i=B=>$0.getInstance(r,Ze(o),()=>Ze(C),B||(()=>Ze(h))),[o,s]=ye(t),[u,d]=ye(!1),[h,p]=ye(n()),[f,m]=ye(!1),[x,b]=ye(!1),[C,_]=ye(null),[k,M]=ye(!0),[L,A]=ye(""),[P,W]=ye(!1),[D,$]=ye(!1);rt(()=>{const B=i();if(f()&&!x())if(Ze(C)!=null){B.startReplay(B.getDataListToRightOfCandle());const Z=$r.getInstance(),J=Z.getConfig(r);if(J&&J.symbol&&Ze(o)){console.log("useReplay: Creating replay data loader via ChartDataProvider");const H=Z.createDataLoader(r,J.symbol,J.interval,J.candleType||void 0,void 0,!1).unsubscribeBar;console.log("useReplay: Cleaning up existing live subscription before replay"),H(),setTimeout(()=>{const ee=Z.createDataLoader(r,J.symbol,J.interval,J.candleType||void 0,void 0,!0);console.warn("useReplay: Setting replay data loader"),Ze(o).setDataLoader(ee),$(!0),M(!1)},100)}else console.warn("useReplay: Missing config or widget for replay data loader"),M(!0)}else M(!0);else x()&&B.pauseReplay(),$(!1)}),rt(()=>{const B=h();D()&&i(()=>B).updateReplaySpeed()}),rt(()=>{u()?M(!0):(m(!1),b(!1))}),rt(()=>{if(P()){i().skipReplay();const B=$r.getInstance(),Z=B.getConfig(r);if(Z&&Z.symbol&&Ze(o)){console.log("useReplay: Transitioning back to live mode after skip");const J=B.createDataLoader(r,Z.symbol,Z.interval,Z.candleType||void 0,void 0,!1);console.log("useReplay: Setting live data loader"),Ze(o).setDataLoader(J)}z()}});const z=()=>{const B=i();if(B){B.skipReplay();const Z=$r.getInstance(),J=Z.getConfig(r);if(J&&J.symbol&&Ze(o)){console.log("useReplay: Transitioning back to live mode on close");const H=Z.createDataLoader(r,J.symbol,J.interval,J.candleType||void 0,void 0,!1);console.log("useReplay: Setting live data loader on close"),Ze(o).setDataLoader(H)}}_(null),d(!1),p(n()),m(!1),b(!0),M(!0),A(""),W(!1),$0.destroyInstance(r)};return{replayModalVisible:u,setReplayModalVisible:d,replaySpeed:h,setReplaySpeed:p,replayPlay:f,setReplayPlay:m,replayPaused:x,setReplayPaused:b,replayCandle:C,setReplayCandle:_,isAlertVisible:k,setIsAlertVisible:M,alertMessage:L,setAlertMessage:A,resetReplayState:z,setSkipToEnd:W,skipToEnd:P,isPlaying:D,setIsPlaying:$,setReplayWidget:s}};function kW(e){rt(()=>{e()})}function Sy(e,t,r,n,i){const o=$r.getInstance(),s=o.getConfig(i);s&&o.setPreviousSymbol(i,s.symbol);const u=o.createDataLoader(i,t,r,n).unsubscribeBar;u(),setTimeout(()=>{const d=o.createDataLoader(i,t,r,n);e.setDataLoader(d)},100)}function MW(e,t,r,n,i,o,s,u,d){const[h,p]=ye(null);return rt(()=>{const f=e();if(f){const m=f.getStyles();m&&m.candle&&m.candle.type&&n(m.candle.type)}}),rt(()=>{const f=e(),m=t(),x=r();if(f==null||m==null)return;const b=h();p(x);const C={...m,candle:{...m.candle,type:x}};f.setStyles(C),f.resize();const _=As(x)&&!As(b),k=!As(x)&&As(b);(_||k)&&i&&o&&d&&f&&Sy(f,Ze(i),Ze(o),x,d)}),rt(()=>{if(s()&&Ze(e)){const f=Ze(e),m=Ze(r),x=Ze(i),b=Ze(o);As(m)&&Sy(f,x,b,m,d),u(!1)}}),f=>{n(f);const m=e();if(m){const x=m.getStyles();x.candle.type=f,m.setStyles(x),bt.getInstance(m).saveStyles()}}}function TW(e){return e===V0.RENKO||String(e).toLowerCase()==="renko"}const EW=(e,t,r,n)=>{rt(()=>{const i=t();if(i&&TW(e())){const o=s=>{s.preventDefault(),n({x:s.clientX,y:s.clientY}),r(!0)};i.addEventListener("contextmenu",o),Br(()=>{i.removeEventListener("contextmenu",o)})}})};function IW(e){rt(()=>{Or()==="Dark Theme"||Or()==="Midnight Theme"||Or()==="Dark Gray Theme"||Or()==="Blue Theme"||Or()==="Red Theme"||Or()==="Green Theme"||Or()==="Yellow Theme"||Or(),Ze(e).setStyles(Ui(Or()))})}function LW(e,t){rt(tv(()=>{var r,n,i,o;return[(r=t())==null?void 0:r.symbol,(n=t())==null?void 0:n.exchange,(i=t())==null?void 0:i.pricePrecision,(o=t())==null?void 0:o.volumePrecision]},async()=>{var r;t()&&Ze(e)&&(await bt.getInstance(Ze(e)).removeAllOverlays(),(r=Ze(e))==null||r.setSymbol({ticker:t().symbol}))}))}function PW(e,t){const[r,n]=ye(!1);return rt(()=>{const i=r()?"24px":"52px";document.documentElement.style.setProperty("--right-bar-width",i),setTimeout(()=>{t(o=>!o)},350)}),{rightBarCollapsed:r,setRightBarCollapsed:n}}const[ky,AW]=ye(!1),x0=[];function DW(e){return e&&!x0.includes(e)&&x0.push(e),rt(()=>{const t=ky()?"24px":"60px";document.documentElement.style.setProperty("--drawing-bar-width",t),setTimeout(()=>{x0.forEach(r=>r())},350)}),{drawingBarCollapsed:ky,setDrawingBarCollapsed:AW,cleanUpDrawingBar:e?()=>{const t=x0.indexOf(e);t>-1&&x0.splice(t,1)}:void 0}}function FW(e,t,r,n,i){const[o,s]=ye({timeRemaining:"",isActive:!1,nextCandleTimestamp:0});let u=null;const d=(b,C)=>{const _=new Date(b);switch(C.timespan){case"minute":const k=Math.floor(_.getUTCMinutes()/C.multiplier)*C.multiplier;_.setUTCMinutes(k+C.multiplier,0,0);break;case"hour":const M=Math.floor(_.getUTCHours()/C.multiplier)*C.multiplier;_.setUTCHours(M+C.multiplier,0,0,0);break;case"day":_.setUTCDate(_.getUTCDate()+C.multiplier),_.setUTCHours(0,0,0,0);break;case"week":const L=_.getUTCDay(),A=L===0?1:8-L;_.setUTCDate(_.getUTCDate()+A+(C.multiplier-1)*7),_.setUTCHours(0,0,0,0);break;case"month":_.setUTCMonth(_.getUTCMonth()+C.multiplier,1),_.setUTCHours(0,0,0,0);break;default:_.setUTCMinutes(_.getUTCMinutes()+1,0,0)}return _.getTime()},h=b=>{const C=Math.floor(b/1e3),_=Math.floor(C/86400),k=Math.floor(C%86400/3600),M=Math.floor(C%3600/60),L=C%60;return _>0?k>0?`${_}d ${k}h`:`${_}d`:k>0?k>=12?`${k}h ${M}m`:`${k.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`:`${M.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`},p=()=>{const b=Date.now(),C=t(),_=d(b,C),k=_-b;if(k<=0){const M=d(b,C),L=M-b;s({timeRemaining:h(L),isActive:!0,nextCandleTimestamp:M})}else s({timeRemaining:h(k),isActive:!0,nextCandleTimestamp:_})},f=()=>{u||(p(),u=setInterval(p,1e3))},m=()=>{u&&(clearInterval(u),u=null);const b=e();if(b)try{b.setStyles({candle:{priceMark:{last:{text:{extendTexts:[]}}}}})}catch(C){console.warn("Error clearing timer on stop:",C)}s({timeRemaining:"",isActive:!1,nextCandleTimestamp:0})},x=()=>{var b,C;const _=e(),k=o();if(_)try{if(!k.isActive||!r()){_.setStyles({candle:{priceMark:{last:{text:{extendTexts:[]}}}}});return}const M={show:!0,color:"#D0D0D0",size:13,family:i||"monospace",weight:"normal",style:"fill",borderStyle:"solid",borderDashedValue:[2,2],borderSize:0,borderColor:"transparent",paddingTop:2,paddingBottom:2,paddingLeft:4,paddingRight:4,position:"below_price",updateInterval:0,borderRadius:2},L=((C=(b=_.getStyles().candle)==null?void 0:b.priceMark)==null?void 0:C.last)||{},A=`${k.timeRemaining}`,P=_.getFormatter();_.setFormatter({...P,formatExtendText:({type:W,index:D})=>W==="last_price"&&D===0?A:""}),_.setStyles({candle:{priceMark:{last:{...L,show:!0,extendTexts:[M]}}}})}catch(M){console.warn("Error updating price mark timer:",M)}};return rt(()=>{const b=e(),C=r();t(),b&&C?f():m()}),rt(()=>{t(),r()&&(m(),setTimeout(()=>{r()&&f()},100))}),rt(()=>{n&&(n(),r()&&(m(),setTimeout(()=>{r()&&f()},200)))}),rt(()=>{x()}),Br(()=>{m()}),{timerState:o,startTimer:f,stopTimer:m}}function RW(e,t,r){let n={...e()};rt(()=>{const i=e(),o=t();console.log("useSymbolPropsToState triggered with symbol:",i);const s=i.symbol!==n.symbol||i.exchange!==n.exchange,u=i.symbol!==o.symbol||i.exchange!==o.exchange;s&&u&&(console.log("useSymbolPropsToState: Syncing symbol change from",o,"to",i),r(i)),n={...i}})}function OW(e,t,r,n,i,o){rt(tv(()=>{var s,u;return[(s=r())==null?void 0:s.multiplier,(u=r())==null?void 0:u.timespan]},()=>{const s=Ze(t),u=Ze(r),d=Ze(n);s&&u&&($r.getInstance().setPreviousSymbol(i,d),e?o({chartId:i,skipBroadcast:!1,interval:u}):e=!0,s.setPeriod({span:u.multiplier,type:u.timespan}))}))}function NW(e,t,r,n,i){rt(tv(()=>[e().interval.timespan,e().interval.multiplier,e().interval.text,e().skipBroadcast],()=>{if(E5()&&e().chartId.id!==t.id){const o=e(),s=Ze(r),u=Ze(n);(s==null?void 0:s.text)!==o.interval.text&&(o.skipBroadcast||($r.getInstance().setPreviousSymbol(t,u),i(o.interval)))}}))}function zW({chartRef:e,period:t,setChart:r,timezone:n,documentResize:i}){window.addEventListener("resize",i);const o=$W(e,t);n&&n.key&&(console.log("setting timezone",n.key),o.setTimezone(n.key)),r(o);const s=o.getDom("candle_pane","yAxis"),u=document.createElement("span");return u.className="chartspire-price-unit",s==null||s.appendChild(u),{chart:o,priceUnitDom:u}}function $W(e,t){const r=r4(e,{formatter:{formatDate:n=>{const i=bW(),o=t();if(n.type==="xAxis"){const u=BW(o,n.template);return gn.formatDate(i,n.timestamp,u)}const s=VW(o);return gn.formatDate(i,n.timestamp,s)}}});if(!r)throw new Error("Failed to initialize chart");return r}function BW(e,t){switch(e.timespan){case"minute":return"HH:mm";case"hour":return"(DD) HH:mm";case"day":return e.multiplier===1?"MM-DD":"YYYY-MM-DD";case"week":return"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";default:return t}}function VW(e){switch(e.timespan){case"minute":return"MM-DD HH:mm";case"hour":return"YYYY-MM-DD HH:mm";case"day":case"week":return"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";default:return"YYYY-MM-DD HH:mm"}}async function WW({chart:e,layout:t,symbol:r,updateIndicators:n,addMainIndicatorsToChart:i}){const o=bt.getInstance(e),s=await UW(o,t);await HW(o,s,n,i);const u=await YW(o,s,e);return await XW(o,s,r,e),{savedStyles:u,layoutData:s}}async function UW(e,t){return t()===e.getDefaultLayout()?e.getDefaultLayoutData():await e.getLayoutFromStore()??e.getDefaultLayoutData()}async function HW(e,t,r,n){const i=await e.getIndicators(t);r(i.indicators),n()}async function YW(e,t,r){const n=await e.getStyles(t);return n!=null&&r.setStyles(n),n}async function XW(e,t,r,n){const i=await e.getOverlays(t);tt.forEach(i,o=>{var s;i!=null&&r().symbol===((s=o.symbolInfo)==null?void 0:s.symbol)&&r().type===o.symbolInfo.type&&n.createOverlay(o.overlay)})}function jW(e,t,r,n,i,o){r(e);const s=e.data.current.timestamp,u=new Date(s);n("Candle selected from date: "+u.toLocaleString()+" - Press play to start replay"),Fv(t),i(o)}function ZW({chart:e,layout:t,mainIndicators:r,setMainIndicators:n,subIndicators:i,setSubIndicators:o,setReplayCandle:s,setAlertMessage:u,setReplayWidget:d,setIndicatorSettingModalParams:h}){const p=G5({chart:e,mainIndicators:r,setMainIndicators:n,subIndicators:i,setSubIndicators:o,setIndicatorSettingModalParams:h});e.subscribeAction("onIndicatorTooltipFeatureClick",p);const f=Rv.createCandleTooltipIconClickHandler(e);e.subscribeAction("onCandleTooltipFeatureClick",f),e.subscribeAction("onCandleBarClick",m=>{jW(m,t,s,u,d,e)})}async function GW({chart:e,setAllLayouts:t,layoutLimit:r}){const n=await bt.getInstance(e).getNameOfAllLayouts();t(n.slice(0,r))}function qW({chart:e,chartIds:t,symbol:r,period:n,popupHandlers:i}){const o=S5(),s=k5(),u=Rs(),d=r.symbol,h=r.type?String(r.type):void 0;return o.registerChart(t,e,d,h),s.registerChart(t,e,d,h),u.registerChart(t,e,d,h,n.timespan+n.multiplier,i),{syncManager:o,timeSyncManager:s,drawingSyncManager:u,initialSymbol:{symbol:d,type:h}}}function QW({chart:e,chartIds:t,isActiveChart:r,timeSyncManager:n}){let i=null,o=0,s={x:0,y:0},u={x:0,y:0};const d=e.getDom("candle_pane");if(!d)return()=>{};const h=(C,_)=>{if(r()){o=Date.now(),s={x:C,y:_};const k=d.getBoundingClientRect();u={x:C-k.left,y:_-k.top}}},p=(C,_)=>{var k;if(r()){const M=Date.now()-o,L=Math.sqrt(Math.pow(C-s.x,2)+Math.pow(_-s.y,2));if(M<300&&L<5){try{const A=e.convertFromPixel([u],{paneId:"candle_pane"});if(A&&Array.isArray(A)&&(k=A[0])!=null&&k.timestamp){const P=A[0].timestamp;n.syncTime(t,P)}}catch(A){console.error("[TimeSync] Error converting interaction position to timestamp:",A)}i&&clearTimeout(i),i=setTimeout(()=>{},150)}}},f=C=>{if(C.preventDefault(),C.touches.length===1){const _=C.touches[0];h(_.clientX,_.clientY)}},m=C=>{if(C.preventDefault(),C.changedTouches.length===1){const _=C.changedTouches[0];p(_.clientX,_.clientY)}},x=C=>{h(C.clientX,C.clientY)},b=C=>{p(C.clientX,C.clientY)};return d.addEventListener("mousedown",x),d.addEventListener("mouseup",b),d.addEventListener("touchstart",f,{passive:!1}),d.addEventListener("touchend",m,{passive:!1}),()=>{d.removeEventListener("mousedown",x),d.removeEventListener("mouseup",b),d.removeEventListener("touchstart",f),d.removeEventListener("touchend",m),i&&clearTimeout(i)}}function KW({chart:e,chartIds:t,isActiveChart:r,syncManager:n}){e.subscribeAction("onCrosshairChange",i=>{const o=i;if(o.paneId==="candle_pane"&&r()){if(!o.timestamp&&o.x!==void 0)try{const s=e.convertFromPixel([{x:o.x}],{paneId:o.paneId});if(s&&Array.isArray(s)&&s[0]){const u=s[0];if(u.timestamp&&(o.timestamp=u.timestamp),u.dataIndex!==void 0&&(o.dataIndex=u.dataIndex),u.dataIndex!==void 0){const d=e.getDataList();d&&d[u.dataIndex]&&(o.kLineData=d[u.dataIndex],!o.timestamp&&o.kLineData.timestamp&&(o.timestamp=o.kLineData.timestamp))}}}catch(s){console.error("Error converting x to timestamp:",s)}n.resetCrosshairVisibility(t),n.syncCrosshair(t,o)}})}async function JW(e,t,r,n,i,o,s,u,d,h,p,f,m,x,b,C,_,k,M,L,A){console.log("setupChart called",i());const{chart:P,priceUnitDom:W}=zW({chartRef:e,period:t,setChart:n,timezone:L(),documentResize:C});await WW({chart:P,layout:o,symbol:i,updateIndicators:_,addMainIndicatorsToChart:M}),console.log("[setupChart] Registering chart with sync managers for chartId:",k.chartIds);const D=qW({chart:P,chartIds:k.chartIds,symbol:i(),period:t(),popupHandlers:A});console.log("[setupChart] Setting up sync effects for chartId:",k.chartIds),console.log("[setupChart] Setting up crosshair and mouse event handlers for chartId:",k.chartIds),KW({chart:P,chartIds:k.chartIds,isActiveChart:()=>k.isActiveChart??!0,syncManager:D.syncManager}),QW({chart:P,chartIds:k.chartIds,isActiveChart:()=>k.isActiveChart??!0,timeSyncManager:D.timeSyncManager}),ZW({chart:P,layout:o,mainIndicators:s,setMainIndicators:u,subIndicators:d,setSubIndicators:h,setReplayCandle:p,setAlertMessage:f,setReplayWidget:m,setIndicatorSettingModalParams:b}),await GW({chart:P,setAllLayouts:x,layoutLimit:k.layoutLimit}),fW(()=>P,i,W)}function My(e,t,r,n){console.log(`cleanUpMainUI: Starting cleanup for chart ${r.id}`);try{S5().unregisterChart(r),k5().unregisterChart(r),Rs().unregisterChart(r),console.log(`[cleanUpMainUI] Successfully unregistered chart ${r.id} from sync managers`)}catch(o){console.error(`[cleanUpMainUI] Error unregistering chart ${r.id} from sync managers:`,o)}n&&n.getAttribute("data-chart-id"),window.removeEventListener("resize",e);const i=$r.getInstance().getDataFeed();i&&(console.log(`cleanUpMainUI: Calling unsubscribeAllForChart for ${r.id}`),i.unsubscribeAllForChart(r.id),i.getActiveSubscriptions()===0&&KU()),console.log(`cleanUpMainUI: Cleanup completed for chart ${r.id}`)}function eU(e,t,r,n,i,o){if(!e){console.warn("initializeChartData: Chart not available");return}console.log(`initializeChartData [${n}]: Setting up chart for ${t.symbol} ${r.multiplier}${r.timespan}`);const s=$r.getInstance().createDataLoader(n,t,r,o,i);e.setDataLoader(s),console.log(`initializeChartData [${n}]: Initialization complete`)}function tU(e){console.log(`cleanupChartData [${e}]: Cleaning up`),$r.getInstance().cleanup(e)}const rU=e=>G($e,{get when(){return e.isActive},get children(){return G(nV,{get widget(){return e.widget},get ticker(){return e.symbol},get setInterval(){return e.setInterval},get layout(){return e.layout},get allLayouts(){return e.allLayouts},get setAllLayouts(){return e.setAllLayouts},get layoutLimit(){return e.layoutLimit},get onLayoutChange(){return e.onLayoutChange},get theme(){return e.theme},get setTheme(){return e.setTheme},get locale(){return e.locale},get themeUseExternalStorage(){return e.themeUseExternalStorage},get timezone(){return e.timezone},get onTimezoneChange(){return e.onTimezoneChange},get intervalEnabled(){return e.intervalEnabled},get layoutsEnabled(){return e.layoutsEnabled},get themesEnabled(){return e.themesEnabled},get themeGeneraterEnabled(){return e.themeGeneraterEnabled},get timezoneEnabled(){return e.timezoneEnabled}})}}),nU=e=>{const[t,r]=ye(!1);return[G($e,{get when(){return e.overlayOptionsVisible},get children(){return G(qV,{get setOverlayVisible(){return e.setOverlayOptionsVisible},get overlay(){return e.overlayStyles},get widget(){return e.widget},get locale(){return e.locale},get currentLayout(){return e.currentLayout},get chartId(){return e.chartId},get overlayMousePosition(){return e.overlayMousePosition},setShowOverlaySetting:r})}}),G($e,{get when(){return t()},get children(){return G(W5,{get widget(){return e.widget},get locale(){return e.locale},get overlay(){return e.overlayStyles},get setOverlayVisible(){return e.setOverlayOptionsVisible},setShowOverlaySetting:r,get chartId(){return e.chartId},onConfirm:n=>{console.log("Selected color:",n),r(!1)}})}})]};var iU=q("<div class=chartspire-ui-renko-setting-modal-content><div class=content><div class=setting-item><span></span></div><div class=setting-footer><button class=cancel-button></button><button class=confirm-button>");const oU=e=>{var t,r;const n=((r=(t=e.widget.getStyles().candle.renko)==null?void 0:t.brick)==null?void 0:r.size)||$5,[i,o]=ye(n.toString()),s=()=>{const d=e.widget.getStyles();d.candle.renko||(d.candle.renko={brick:{size:10}}),d.candle.renko||(d.candle.renko={brick:{size:10}});const h=Number(i());!isNaN(h)&&h>0?(d.candle.renko&&(d.candle.renko={brick:{size:h}}),e.widget.setStyles(d),bt.getInstance(e.widget).saveStyles(),e.widget.resize(),e.setRenkoRefresh(!0),console.log(`Renko brick size updated to ${h}`)):console.error("Invalid brick size"),e.setShowRenkoSetting(!1),e.setRenkoPopupVisible(!1),e.onConfirm()},u=()=>{e.setShowRenkoSetting(!1)};return G(Nl,{get title(){return I("renko_settings",e.locale)||"Renko Settings"},contentHeight:"auto",onClose:u,get children(){var d=iU(),h=d.firstChild,p=h.firstChild,f=p.firstChild,m=p.nextSibling,x=m.firstChild,b=x.nextSibling;return R(f,()=>I("brick_size",e.locale)||"Brick Size"),R(p,G(Wa,{style:{width:"120px"},get value(){return i()},onChange:C=>o(C),min:.1}),null),x.$$click=u,R(x,()=>I("cancel",e.locale)||"Cancel"),b.$$click=s,R(b,()=>I("save",e.locale)||"Save"),d}})};Xt(["click"]);var aU=q("<div class=chartspire-ui-popup-background><div class=popup><button>Brick Size Settings</button><button>Close");const sU=e=>{const[t,r]=ye(!1),n=s=>{s.preventDefault()},i=()=>{r(!0)},o=()=>{e.setRenkoPopupVisible(!1)};return(()=>{var s=aU(),u=s.firstChild,d=u.firstChild,h=d.nextSibling;return s.$$contextmenu=n,d.$$click=i,h.$$click=o,R(s,G($e,{get when(){return t()},get children(){return G(oU,{get widget(){return e.widget},get locale(){return e.locale},get setRenkoPopupVisible(){return e.setRenkoPopupVisible},setShowRenkoSetting:r,get setRenkoRefresh(){return e.setRenkoRefresh},onConfirm:()=>{r(!1)}})}}),null),Ne(p=>{var f=`${e.renkoMousePosition.y}px`,m=`${e.renkoMousePosition.x}px`;return f!==p.e&&((p.e=f)!=null?u.style.setProperty("top",f):u.style.removeProperty("top")),m!==p.t&&((p.t=m)!=null?u.style.setProperty("left",m):u.style.removeProperty("left")),p},{e:void 0,t:void 0}),s})()};Xt(["contextmenu","click"]);const lU=()=>{const[e,t]=Ol({timezoneModalVisible:!1,multiChartModalVisible:!1,symbolSearchModalVisible:!1,indicatorModalVisible:!1,settingModalVisible:!1,overlaySettingVisible:!1,renkoPopupVisible:!1});return{modalState:e,setModalState:t,toggleModal:(r,n)=>{t(r,n??!e[r])},closeAllModals:()=>{t({timezoneModalVisible:!1,multiChartModalVisible:!1,symbolSearchModalVisible:!1,indicatorModalVisible:!1,settingModalVisible:!1,overlaySettingVisible:!1,renkoPopupVisible:!1})}}},cU=e=>{const[t,r]=Ol({chart:null,symbol:{...e.symbol},interval:{...e.interval},mainIndicators:[...e.mainIndicators],subIndicators:{},candleType:"candle_solid",layout:"default",hasLayoutChanged:!1});return{chartData:t,setChartData:r}},uU=e=>{const[t,r]=Ol({drawingBarVisible:!!e.drawingBarVisible,loadingVisible:!1,drawingBarCollapsed:!1,screenshotUrl:"",renkoRefresh:!1});return{uiState:t,setUIState:r}},dU=()=>{const[e,t]=Ol({overlayMousePosition:{x:0,y:0},renkoMousePosition:{x:0,y:0}});return{positions:e,setPositions:t}},hU=e=>{const[t,r]=Ol({styles:{...e.styles},chartStyles:void 0,overlay:null,indicatorSettingModalParams:{visible:!1,indicatorName:"",paneId:"",calcParams:[],styles:{}}});return{settings:t,setSettings:r}};var pU=q('<i class="icon-close chartspire-ui-load-icon">');const Sg=new Set,[Ty,kg]=ye([]),[pp,fU]=ye("en-US"),[kd,fp]=ye({key:"Etc/UTC",text:xp("Etc/UTC","en-US")}),gU=e=>{const t=e.chartIds;let r=!1;fp({key:e.timezone??"Etc/UTC",text:xp(e.timezone??"Etc/UTC","en-US")}),Sg.has(t)?console.warn(`Chart ${t.id} is being mounted again, this may cause issues`):(console.log(`Mounting chart ${t.id} for the first time`),Sg.add(t));let n;const[i,o]=ye(!1),{modalState:s,setModalState:u}=lU(),{chartData:d,setChartData:h}=cU(e),{uiState:p,setUIState:f}=uU(e),{positions:m,setPositions:x}=dU(),{settings:b,setSettings:C}=hU(e),{drawingBarCollapsed:_,setDrawingBarCollapsed:k,cleanUpDrawingBar:M}=DW(()=>{var X;return(X=d.chart)==null?void 0:X.resize()});RW(()=>e.symbol,()=>d.symbol,X=>{console.log("useSymbolPropsToState triggered with symbol:",X),h("symbol",X)});const L=X=>{k(X),f("drawingBarCollapsed",X)},A=()=>{var X;(X=d.chart)==null||X.resize()},P=X=>{xT(X,d.chart,fe=>h("mainIndicators",fe),fe=>h("subIndicators",fe))},W=()=>{wT(d.mainIndicators,d.chart)};ki(()=>{const X={destroy:()=>{console.log("MainUI destroy called for chart:",t.id),My(A,d.symbol,t,n)},setStyles:fe=>{setTimeout(()=>{var ue;(ue=d.chart)==null||ue.setStyles(fe),DE(fe)},50)},getStyles:()=>d.chart?d.chart.getStyles():{},setLocale:fe=>{var ue;fU(fe),(ue=d.chart)==null||ue.setLocale(fe),fp({key:kd().key,text:xp(kd().key,fe)})},getLocale:()=>pp(),setTimezone:fe=>{fp({key:fe,text:xp(fe,pp())})},getTimezone:()=>kd().key,setSymbol:fe=>{h("symbol",fe)},getSymbol:()=>d.symbol,setInterval:fe=>{h("interval",fe)},getInterval:()=>d.interval,getMultiCharts:()=>e.multiChartLimit,getUnderlyingChart:()=>d.chart};e.ref(X)});const{replayModalVisible:D,setReplayModalVisible:$,replaySpeed:z,setReplaySpeed:B,setReplayPlay:Z,setReplayPaused:J,replayCandle:H,setReplayCandle:ee,isAlertVisible:le,alertMessage:ce,setAlertMessage:ae,resetReplayState:re,setSkipToEnd:ve,isPlaying:pe,setReplayWidget:Y}=SW(e.locale,d.chart,t),U=MW(()=>d.chart,()=>b.chartStyles,()=>d.candleType,X=>h("candleType",X),()=>d.symbol,()=>d.interval,()=>p.renkoRefresh,X=>f("renkoRefresh",X),t);ki(async()=>{h("layout",bt.getInstance(d.chart||{}).getDefaultLayout()),await JW(n,()=>d.interval,()=>d.chart,X=>{h("chart",X),X&&($r.getInstance().updateChartReference(t,X),eU(X,d.symbol,d.interval,t,fe=>f("loadingVisible",fe),d.candleType),o(!0))},()=>d.symbol,()=>d.layout,()=>d.mainIndicators,X=>h("mainIndicators",X),()=>d.subIndicators,X=>h("subIndicators",X),ee,ae,Y,kg,X=>C("indicatorSettingModalParams",X),A,P,e,W,kd,{setOverlaySettingVisible:X=>u("overlaySettingVisible",X),setOverlayStyles:X=>C("overlay",X),setOverlayMousePosition:X=>x("overlayMousePosition",X)})}),Br(()=>{My(A,d.symbol,t,n),tU(t),console.log(`Removing chart ${t.id} from mounted charts tracking`),Sg.delete(t),M&&M()}),_W(()=>d.chart,e.theme),mW(()=>d.chart,pp),xW(()=>d.chart,kd,A),wW(()=>d.chart,()=>b.styles,X=>C("chartStyles",X)),lW(()=>e.multiChartLimit,A),gW(()=>e.resizeChart,A),vW(()=>e.rightBarExpandedViewVisible,A),sW(()=>e.isActiveChart,()=>d.symbol),aW(()=>d.layout,()=>e.isActiveChart,X=>h("hasLayoutChanged",X)),cW(()=>e.isActiveChart,()=>d.chart,()=>d.layout,()=>d.symbol,()=>d.hasLayoutChanged,X=>h("mainIndicators",X),X=>h("subIndicators",X),P,X=>u("overlaySettingVisible",X),X=>C("overlay",X),X=>x("overlayMousePosition",X),X=>h("candleType",X)),kW(W),EW(()=>d.candleType,()=>n,X=>u("renkoPopupVisible",X),X=>x("renkoMousePosition",X)),IW(()=>d.chart),LW(()=>d.chart,()=>d.symbol),FW(()=>d.chart,()=>d.interval,()=>e.candleCloseTimerEnabled??!1,()=>d.symbol,e.fontFamily),OW(r,()=>d.chart,()=>d.interval,()=>d.symbol,t,e.setCommonInterval),NW(e.commonInterval,t,()=>d.interval,()=>d.symbol,X=>h("interval",X));const de=X=>{n=X};return[pU(),G(nU,{get overlayOptionsVisible(){return s.overlaySettingVisible},setOverlayOptionsVisible:X=>u("overlaySettingVisible",X),get overlayStyles(){return b.overlay},get widget(){return d.chart},get locale(){return e.locale},get currentLayout(){return d.layout},chartId:t,get overlayMousePosition(){return m.overlayMousePosition}}),G($e,{get when(){return s.renkoPopupVisible},get children(){return G(sU,{get widget(){return d.chart},setRenkoPopupVisible:X=>u("renkoPopupVisible",X),get locale(){return pp()},get renkoMousePosition(){return m.renkoMousePosition},setRenkoRefresh:X=>f("renkoRefresh",X)})}}),G(oW,{get enabledSymbolTypes(){return e.enabledSymbolTypes},setSymbol:X=>{sv().requestSymbolChange(e.chartIds,X)},get symbolModalVisible(){return s.symbolSearchModalVisible},setSymbolSearchModalVisible:X=>u("symbolSearchModalVisible",X),get locale(){return e.locale}}),G(eD,{mainIndicators:()=>d.mainIndicators,setMainIndicators:X=>h("mainIndicators",X),subIndicators:()=>d.subIndicators,setSubIndicators:X=>h("subIndicators",z2(X)),get indicatorModalVisible(){return s.indicatorModalVisible},setIndicatorModalVisible:X=>u("indicatorModalVisible",X),get widget(){return d.chart},get locale(){return e.locale},get currentLayout(){return d.layout}}),G($e,{get when(){return s.multiChartModalVisible},get children(){return G(dD,{get multiChart(){return e.multiChartLimit},get maxMultiCharts(){return e.maxMultiCharts},get onMultiChartClick(){return e.onMultiChartClick},setMultiChartModalVisible:X=>u("multiChartModalVisible",X),get locale(){return e.locale}})}}),G(ZA,{get locale(){return e.locale},get replaySpeed(){return z()},setReplaySpeed:B,get replayCandle(){return H()},onPlay:Z,onPause:J,onClose:re,skipReplay:ve,isPlaying:pe,get chartId(){return t.id},get isAlertVisible(){return le()},get alertMessage(){return ce()},get replayModalVisible(){return D()},get isActive(){return e.isActiveChart}}),G(gN,{settingModalVisible:()=>s.settingModalVisible,setSettingModalVisible:X=>u("settingModalVisible",X),get widget(){return d.chart},widgetDefaultStyles:()=>b.chartStyles,get locale(){return e.locale},get currentLayout(){return d.layout}}),G(QV,{get screenshotUrl(){return p.screenshotUrl},setScreenshotUrl:X=>f("screenshotUrl",X),get locale(){return e.locale}}),G(KV,{get locale(){return e.locale},get widget(){return d.chart},get currentLayout(){return d.layout},get indicatorSettingModalParams(){return b.indicatorSettingModalParams},setIndicatorSettingModalParams:X=>C("indicatorSettingModalParams",X)}),G(JV,{get rootContainer(){return e.rootContainer},get locale(){return e.locale},get symbols(){return d.symbol},get spread(){return p.drawingBarVisible},get period(){return d.interval},setPeriod:X=>{h("interval",X),e.isActiveChart&&e.onIntervalChange&&e.onIntervalChange(X)},get periods(){return e.periods},get multiChart(){return e.multiChartLimit},get widget(){return d.chart},get theme(){return e.theme},get isActive(){return e.isActiveChart},setIndicatorModalVisible:X=>u("indicatorModalVisible",X),setMultiChartModalVisible:X=>u("multiChartModalVisible",X),get replayModalVisible(){return D()},setReplayModalVisible:$,setSettingModalVisible:X=>u("settingModalVisible",X),setScreenshotUrl:X=>f("screenshotUrl",X),setTimezoneModalVisible:X=>u("timezoneModalVisible",X),get symbolSearchModalVisible(){return s.symbolSearchModalVisible},setSymbolSearchModalVisible:X=>u("symbolSearchModalVisible",X),get drawingBarVisible(){return p.drawingBarVisible},setDrawingBarVisible:X=>f("drawingBarVisible",X),get layout(){return d.layout},setLayout:X=>h("layout",X),get allLayouts(){return Ty()},setAllLayouts:kg,get layoutLimit(){return e.layoutLimit},get currentCandleType(){return d.candleType},onCandleTypeChange:U,get indicatorModalVisible(){return s.indicatorModalVisible},get settingModalVisible(){return s.settingModalVisible},get multiChartModalVisible(){return s.multiChartModalVisible}}),G(eW,{get isActive(){return e.isActiveChart},get locale(){return e.locale},get drawingBarVisible(){return p.drawingBarVisible},get widget(){return d.chart},get currentLayout(){return d.layout},setOverlaySettingVisible:X=>u("overlaySettingVisible",X),setOverlayStyles:X=>C("overlay",X),setOverlayMousePosition:X=>x("overlayMousePosition",X),chartIds:t,get drawingBarCollapsed(){return _()},setDrawingBarCollapsed:L}),G(rU,{get isActive(){return e.isActiveChart},get widget(){return d.chart},get symbol(){return d.symbol},setInterval:X=>{h("interval",X),e.isActiveChart&&e.onIntervalChange&&e.onIntervalChange(X)},get layout(){return d.layout},get allLayouts(){return Ty()},setAllLayouts:kg,get layoutLimit(){return e.layoutLimit},onLayoutChange:X=>h("layout",X),get theme(){return e.theme},get setTheme(){return e.setTheme},get locale(){return e.locale},get timezone(){return kd()},onTimezoneChange:X=>{fp(X)},get intervalEnabled(){return e.intervalEnabled??!0},get layoutsEnabled(){return e.layoutsEnabled??!0},get themesEnabled(){return e.themesEnabled??!0},get themeGeneraterEnabled(){return e.themeGeneraterEnabled??!0},get themeUseExternalStorage(){return e.themeUseExternalStorage??!1},get timezoneEnabled(){return e.timezoneEnabled??!0}}),G(iW,{ref:de,get chartIds(){return t.id},get multiChart(){return e.multiChartLimit},get isActive(){return e.isActiveChart},get loadingVisible(){return p.loadingVisible},get drawingBarVisible(){return p.drawingBarVisible},get drawingBarCollapsed(){return _()},get onClick(){return e.onClick}})]};function vU(e,t,r){rt(()=>{const n=e.slice(0,t());r(n[0])})}function mU(e,t){rt(()=>{e==null||e.setAttribute("data-theme",t()),localStorage.setItem(Dv,t())})}const Md={MIN_POSITION_REGULAR:20,MAX_POSITION_REGULAR:80,MIN_POSITION_GRID:15,MAX_POSITION_GRID:85,DEFAULT_SPLIT_POSITION:50,DEFAULT_SECOND_SPLIT_POSITION:75},Vc={SINGLE:1,SPLIT:2,GRID:3},gp={WATCHLIST:"watchlist",PAPER_TRADING:"papertrading",ORDERBOOK:"orderbook",TRADES:"trades"},yU=1e3,Si={CONTAINER:"chartspire-ui-right-bar-extended-view",MODAL_CONTAINER:"modal-container",MODAL_PANEL:"modal-panel",SPLIT_HANDLE:"split-handle",SPLIT_HANDLE_INDICATOR:"split-handle-indicator",RESIZABLE_HANDLE:"resizable-handle",SINGLE_VIEW:"single-view",SPLIT_VIEW:"split-view",GRID_VIEW:"grid-view",FIRST_SPLIT_HANDLE:"first-split-handle"};function bU(e){const t=Yt(()=>{const s=e(),u=[];return s.watchListModalVisible&&u.push(gp.WATCHLIST),s.paperTradingModalVisible&&u.push(gp.PAPER_TRADING),s.orderbookModalVisible&&u.push(gp.ORDERBOOK),s.tradesModalVisible&&u.push(gp.TRADES),u}),r=Yt(()=>t().length),n=Yt(()=>r()===Vc.SINGLE),i=Yt(()=>r()===Vc.SPLIT),o=Yt(()=>r()===Vc.GRID);return{visiblePanels:t,visibleModalCount:r,isSingleView:n,isSplitView:i,isGridView:o,getPanelHeight:(s,u)=>{const d=t(),h=d.indexOf(s);return d.length===Vc.SINGLE?"100%":d.length===Vc.SPLIT?h===0?`${u}%`:`${100-u}%`:d.length===Vc.GRID?void 0:"100%"},getPanelWidth:s=>(t().length,Vc.GRID,"100%")}}function xU(){const[e,t]=ye(Md.DEFAULT_SPLIT_POSITION),[r,n]=ye(Md.DEFAULT_SECOND_SPLIT_POSITION);let i=0;return{splitPosition:e,setSplitPosition:t,secondSplitPosition:r,setSecondSplitPosition:n,handleSplitStart:(o,s)=>{i=s},handleSplitMove:(o,s)=>{const u=document.querySelector(`.${Si.CONTAINER} .${Si.MODAL_CONTAINER}`);if(!u)return;const d=u.getBoundingClientRect(),h=o/d.height*100;let p=i+h;s?p=Math.max(Md.MIN_POSITION_GRID,Math.min(Md.MAX_POSITION_GRID,p)):p=Math.max(Md.MIN_POSITION_REGULAR,Math.min(Md.MAX_POSITION_REGULAR,p)),t(p)},handleSplitEnd:()=>{i=0}}}var wU=q("<div><div>");const CU=e=>{let t=!1,r=0;const n=h=>{h.preventDefault(),h.stopPropagation(),t=!0,r=h.clientY,e.onSplitStart(h.clientY,e.splitPosition),document.addEventListener("mousemove",i),document.addEventListener("mouseup",o)},i=h=>{if(!t)return;const p=h.clientY-r;e.onSplitMove(p)},o=()=>{t&&(t=!1,document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o),e.onSplitEnd())},s=h=>{h.preventDefault(),h.stopPropagation();const p=h.touches[0];p&&(t=!0,r=p.clientY,e.onSplitStart(p.clientY,e.splitPosition),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",d))},u=h=>{if(!t)return;h.preventDefault();const p=h.touches[0];if(!p)return;const f=p.clientY-r;e.onSplitMove(f)},d=()=>{t&&(t=!1,document.removeEventListener("touchmove",u),document.removeEventListener("touchend",d),e.onSplitEnd())};return Br(()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",d)}),(()=>{var h=wU(),p=h.firstChild;return h.$$touchstart=s,h.$$mousedown=n,Ne(f=>{var m=`${Si.SPLIT_HANDLE} ${Si.FIRST_SPLIT_HANDLE}`,x=`${e.splitPosition}%`,b=Si.SPLIT_HANDLE_INDICATOR;return m!==f.e&&st(h,f.e=m),x!==f.t&&((f.t=x)!=null?h.style.setProperty("top",x):h.style.removeProperty("top")),b!==f.a&&st(p,f.a=b),f},{e:void 0,t:void 0,a:void 0}),h})()};Xt(["mousedown","touchstart"]);var w0=q("<div>"),_U=q("<div><div>");const SU=e=>{const[t,r]=ye(parseInt(getComputedStyle(document.documentElement).getPropertyValue("--right-bar-extended-view-width"),10)),[n,i]=ye(0),o=()=>({watchListModalVisible:e.watchListModalVisible,paperTradingModalVisible:e.paperTradingModalVisible,orderbookModalVisible:e.orderBookModalVisible,tradesModalVisible:e.tradesModalVisible}),{visibleModalCount:s,isSplitView:u,isGridView:d,getPanelHeight:h,getPanelWidth:p}=bU(o),{splitPosition:f,handleSplitStart:m,handleSplitMove:x,handleSplitEnd:b}=xU();let C,_;rt(()=>{if(e.chart&&e.paperTradingModalVisible&&e.currentSymbol()){const z=()=>{try{const Z=e.chart.getDataList();if(Z&&Z.length>0){const J=Z[Z.length-1];i(J.close||0)}}catch(Z){console.error("Error getting current price from chart:",Z)}};z();const B=setInterval(z,yU);return()=>{clearInterval(B)}}});const k=z=>{C=z.clientX,_=t(),document.addEventListener("mousemove",M),document.addEventListener("mouseup",L)},M=z=>{const B=_-(z.clientX-C);r(B),document.documentElement.style.setProperty("--right-bar-extended-view-width",`${B}px`),e.resizeChart(Z=>!Z)},L=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",L)},A=(z,B)=>{m(z,B)},P=z=>{x(z,d())},W=()=>{b()};Br(()=>{console.log("Cleaning up right bar extended view modal"),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",L)});const D=()=>d()?Si.GRID_VIEW:u()?Si.SPLIT_VIEW:Si.SINGLE_VIEW,$=()=>d()?{"--split-top":`${f()}fr`,"--split-bottom":`${100-f()}fr`}:{};return(()=>{var z=_U(),B=z.firstChild;return B.$$mousedown=k,R(z,G($e,{get when(){return s()>0},get children(){var Z=w0();return R(Z,G($e,{get when(){return e.watchListModalVisible},get children(){var J=w0();return R(J,G(HE,{get locale(){return e.locale},get watchListLimit(){return e.watchListLimit},get watchListAmount(){return e.watchListAmount},get subscribedSymbolsURL(){return e.subscribedTickersURL},get useExternalWatchListStorage(){return e.useExternalWatchListStorage},get setInterval(){return e.setInterval},get watchListHttp(){return e.watchListHttp},get watchListHttpInterval(){return e.watchListHttpInterval},get watchListHttpBatchSize(){return e.watchListHttpBatchSize},get watchListHttpRetryEnabled(){return e.watchListHttpRetryEnabled},get watchListHttpMaxRetries(){return e.watchListHttpMaxRetries},get enabledSymbolTypes(){return e.enabledSymbolTypes}})),Ne(H=>{var ee=`${Si.MODAL_PANEL} watchlist-panel`,le={...h("watchlist",f())&&{height:h("watchlist",f())},width:p("watchlist")};return ee!==H.e&&st(J,H.e=ee),H.t=kn(J,le,H.t),H},{e:void 0,t:void 0}),J}}),null),R(Z,G($e,{get when(){return e.paperTradingModalVisible},get children(){var J=w0();return R(J,G(kP,{get symbol(){return e.currentSymbol()||{symbol:"",type:null}},get currentPrice(){return n()},get locale(){return e.locale},get priceTrackingConfig(){return{updateInterval:e.priceTrackingInterval,enableLogging:e.priceTrackingLogging}},get paperTradingUseExternalStorage(){return e.useExternalPaperTradingStorage},get paperTradingMaxTrades(){return e.paperTradingMaxTrades}})),Ne(H=>{var ee=`${Si.MODAL_PANEL} paper-trading-panel`,le={...h("papertrading",f())&&{height:h("papertrading",f())},width:p("papertrading")};return ee!==H.e&&st(J,H.e=ee),H.t=kn(J,le,H.t),H},{e:void 0,t:void 0}),J}}),null),R(Z,G($e,{get when(){return e.tradesModalVisible},get children(){var J=w0();return R(J,G(NA,{get locale(){return e.locale},currentSymbol:()=>e.currentSymbol(),get tradesMaxRows(){return e.tradesMaxRows},get timeFormat(){return e.tradesTimeFormat}})),Ne(H=>{var ee=`${Si.MODAL_PANEL} trades-panel`,le={...h("trades",f())&&{height:h("trades",f())},width:p("trades")};return ee!==H.e&&st(J,H.e=ee),H.t=kn(J,le,H.t),H},{e:void 0,t:void 0}),J}}),null),R(Z,G($e,{get when(){return e.orderBookModalVisible},get children(){var J=w0();return R(J,G(pA,{get locale(){return e.locale},currentSymbol:()=>e.currentSymbol(),get orderBookMaxRows(){return e.orderBookMaxRows},get orderBookDepthVisualization(){return e.orderBookDepthVisualization}})),Ne(H=>{var ee=`${Si.MODAL_PANEL} orderbook-panel`,le={...h("orderbook",f())&&{height:h("orderbook",f())},width:p("orderbook")};return ee!==H.e&&st(J,H.e=ee),H.t=kn(J,le,H.t),H},{e:void 0,t:void 0}),J}}),null),R(Z,G($e,{get when(){return u()||d()},get children(){return G(CU,{get splitPosition(){return f()},get isGridView(){return d()},onSplitStart:A,onSplitMove:P,onSplitEnd:W})}}),null),Ne(J=>{var H=`${Si.MODAL_CONTAINER} ${D()}`,ee=$();return H!==J.e&&st(Z,J.e=H),J.t=kn(Z,ee,J.t),J},{e:void 0,t:void 0}),Z}}),null),Ne(Z=>{var J=Si.CONTAINER,H=`${t()}px`,ee=Si.RESIZABLE_HANDLE;return J!==Z.e&&st(z,Z.e=J),H!==Z.t&&((Z.t=H)!=null?z.style.setProperty("width",H):z.style.removeProperty("width")),ee!==Z.a&&st(B,Z.a=ee),Z},{e:void 0,t:void 0,a:void 0}),z})()};Xt(["mousedown"]);const kU=3,MU=e=>{var t;let r,n,i,o,s,u,d,h;const p=((t=e.defaultOpenComponents)==null?void 0:t.slice(0,3))||[],[f,m]=ye(p),{rightBarCollapsed:x,setRightBarCollapsed:b}=PW(e.chartComponentApis,e.resizeChart);if(e.watchListEnabled){const A=p.includes("watchlist");[r,n]=ye(A)}if(e.isPaperTradingEnabled){const A=p.includes("papertrading");[i,o]=ye(A)}if(e.isOrderBookEnabled){const A=p.includes("orderbook");[s,u]=ye(A)}if(e.isTradesEnabled){const A=p.includes("trades");[d,h]=ye(A)}const C=(A,P,W)=>!P||!W?null:D=>{const $=W(),z=typeof D=="function"?D($):D;m(z?B=>{const Z=B.filter(J=>J!==A);if(Z.push(A),Z.length>kU){const J=Z.shift();if(J)switch(J){case"watchlist":n&&n(!1);break;case"papertrading":o&&o(!1);break;case"orderbook":u&&u(!1);break;case"trades":h&&h(!1);break}}return Z}:B=>B.filter(Z=>Z!==A)),P(z)},_=C("watchlist",n,r),k=C("papertrading",o,i),M=C("orderbook",u,s),L=C("trades",h,d);return rt(()=>{((r==null?void 0:r())??!1)||((i==null?void 0:i())??!1)||((s==null?void 0:s())??!1)||((d==null?void 0:d())??!1)?(e.setRightBarExpandedViewVisible(!0),x()&&b(!1)):e.setRightBarExpandedViewVisible(!1),e.resizeChart(A=>!A)}),[G(L$,{get isWatchListEnabled(){return e.watchListEnabled},get isPaperTradingEnabled(){return e.isPaperTradingEnabled},get watchListModalVisible(){return r!=null?r():!1},get paperTradingModalVisible(){return i!=null?i():!1},get isOrderBookEnabled(){return e.isOrderBookEnabled},get orderBookModalVisible(){return s!=null?s():!1},get isTradesEnabled(){return e.isTradesEnabled},get tradesModalVisible(){return d!=null?d():!1},setWatchListModalVisible:_,setPaperTradingModalVisible:k,setOrderBookVisible:M,setTradesVisible:L,get rightBarCollapsed(){return x()},setRightBarCollapsed:b}),G($e,{get when(){return e.rightBarExpandedViewVisible()},get children(){return G(SU,{get locale(){return e.locale},get watchListModalVisible(){return r!=null?r():!1},get paperTradingModalVisible(){return i!=null?i():!1},get orderBookModalVisible(){return s!=null?s():!1},get tradesModalVisible(){return d!=null?d():!1},get priceTrackingInterval(){return e.paperTradingPriceTrackingInterval},get priceTrackingLogging(){return e.paperTradingPriceTrackingLogging},get useExternalPaperTradingStorage(){return e.paperTradingUseExternalStorage},get paperTradingMaxTrades(){return e.paperTradingMaxTrades},get watchListLimit(){return e.watchListLimit},get watchListAmount(){return e.watchListAmount},get subscribedTickersURL(){return e.subscribedSymbolsURL??null},get resizeChart(){return e.resizeChart},get useExternalWatchListStorage(){return e.watchListUseExternalStorage},get chart(){return e.chart},get currentSymbol(){return e.currentSymbol},get setInterval(){return e.setInterval},get orderBookMaxRows(){return e.orderBookMaxRows},get orderBookDepthVisualization(){return e.orderBookDepthVisualization},get tradesMaxRows(){return e.tradesMaxRows??50},get tradesTimeFormat(){return e.tradesTimeFormat},get watchListHttp(){return e.watchListHttp},get watchListHttpInterval(){return e.watchListHttpInterval},get watchListHttpBatchSize(){return e.watchListHttpBatchSize},get watchListHttpRetryEnabled(){return e.watchListHttpRetryEnabled},get watchListHttpMaxRetries(){return e.watchListHttpMaxRetries},get enabledSymbolTypes(){return e.enabledSymbolTypes}})}})]},TU=e=>({[j.ONE]:1,[j.TWO]:2,[j.TWO_VERTICAL]:2,[j.THREE]:3,[j.THREE_VERTICAL]:3,[j.THREE_MIXED]:3,[j.THREE_MIXED_REVERSE]:3,[j.THREE_MIXED_BOTTOM]:3,[j.THREE_MIXED_TOP]:3,[j.FOUR]:4,[j.FOUR_VERTICAL]:4,[j.FOUR_HORIZONTAL]:4,[j.FOUR_MIXED]:4,[j.FOUR_MIXED_REVERSE]:4,[j.FOUR_MIXED_TOP]:4,[j.FOUR_MIXED_BOTTOM]:4,[j.FIVE_VERTICAL]:5,[j.FIVE_HORIZONTAL]:5,[j.FIVE_MIXED]:5,[j.FIVE_MIXED_REVERSE]:5,[j.FIVE_MIXED_TOP]:5,[j.SIX]:6,[j.SIX_HORIZONTAL]:6,[j.SIX_VERTICAL]:6,[j.SIX_MIXED]:6,[j.SEVEN_HORIZONTAL]:7,[j.SEVEN_VERTICAL]:7,[j.EIGHT]:8,[j.EIGHT_VERTICAL]:8,[j.EIGHT_HORIZONTAL]:8,[j.NINE]:9,[j.NINE_VERTICAL]:9,[j.NINE_HORIZONTAL]:9,[j.TEN]:10,[j.TEN_VERTICAL]:10,[j.TEN_HORIZONTAL]:10,[j.TWELVE]:12,[j.TWELVE_VERTICAL]:12,[j.TWELVE_HORIZONTAL]:12,[j.TWELVE_GRID]:12,[j.FOURTEEN]:14,[j.SIXTEEN]:16,[j.SIXTEEN_GRID]:16})[e]??e,EU=e=>({[j.ONE]:"one-charts",[j.TWO]:"two-charts",[j.TWO_VERTICAL]:"two-charts-vertical",[j.THREE]:"three-charts",[j.THREE_VERTICAL]:"three-charts-vertical",[j.THREE_MIXED]:"three-charts-mixed",[j.THREE_MIXED_REVERSE]:"three-charts-mixed-reverse",[j.THREE_MIXED_BOTTOM]:"three-charts-mixed-bottom",[j.THREE_MIXED_TOP]:"three-charts-mixed-top",[j.FOUR]:"four-charts",[j.FOUR_VERTICAL]:"four-charts-vertical",[j.FOUR_HORIZONTAL]:"four-charts-horizontal",[j.FOUR_MIXED]:"four-charts-mixed",[j.FOUR_MIXED_REVERSE]:"four-charts-mixed-reverse",[j.FOUR_MIXED_TOP]:"four-charts-mixed-top",[j.FOUR_MIXED_BOTTOM]:"four-charts-mixed-bottom",[j.FIVE_VERTICAL]:"five-charts-vertical",[j.FIVE_HORIZONTAL]:"five-charts-horizontal",[j.FIVE_MIXED]:"five-charts-mixed",[j.FIVE_MIXED_REVERSE]:"five-charts-mixed-reverse",[j.FIVE_MIXED_TOP]:"five-charts-mixed-top",[j.SIX]:"six-charts",[j.SIX_HORIZONTAL]:"six-charts-horizontal",[j.SIX_VERTICAL]:"six-charts-vertical",[j.SIX_MIXED]:"six-charts-mixed",[j.SEVEN_HORIZONTAL]:"seven-charts-horizontal",[j.SEVEN_VERTICAL]:"seven-charts-vertical",[j.EIGHT]:"eight-charts",[j.EIGHT_VERTICAL]:"eight-charts-vertical",[j.EIGHT_HORIZONTAL]:"eight-charts-horizontal",[j.NINE]:"nine-charts",[j.NINE_VERTICAL]:"nine-charts-vertical",[j.NINE_HORIZONTAL]:"nine-charts-horizontal",[j.TEN]:"ten-charts",[j.TEN_VERTICAL]:"ten-charts-vertical",[j.TEN_HORIZONTAL]:"ten-charts-horizontal",[j.TWELVE]:"twelve-charts",[j.TWELVE_VERTICAL]:"twelve-charts-vertical",[j.TWELVE_HORIZONTAL]:"twelve-charts-horizontal",[j.TWELVE_GRID]:"twelve-charts-grid",[j.FOURTEEN]:"fourteen-charts",[j.SIXTEEN]:"sixteen-charts",[j.SIXTEEN_GRID]:"sixteen-charts-grid"})[e]??"one-charts",Y5=class E0{constructor(){xe(this,"registeredDataFeeds",new Map)}static getInstance(){return E0.instance||(E0.instance=new E0),E0.instance}registerDataFeed(t,r,...n){if(this.registeredDataFeeds.has(t))throw new Error(`DataFeed with name "${t}" is already registered`);const i=new r(...n);this.validateDataFeedImplementation(i,t),this.registeredDataFeeds.set(t,r),console.log(`DataFeedRegistry: Registered datafeed "${t}"`)}createDataFeed(t,...r){const n=this.registeredDataFeeds.get(t);if(!n)throw new Error(`DataFeed with name "${t}" is not registered`);return new n(...r)}isRegistered(t){return this.registeredDataFeeds.has(t)}getRegisteredNames(){return Array.from(this.registeredDataFeeds.keys())}unregisterDataFeed(t){const r=this.registeredDataFeeds.delete(t);return r&&console.log(`DataFeedRegistry: Unregistered datafeed "${t}"`),r}clear(){this.registeredDataFeeds.clear(),console.log("DataFeedRegistry: Cleared all registered datafeeds")}validateDataFeedImplementation(t,r){const n=["searchSymbols","getHistoricalTimeSeries","getPrice","getOrderBook","subscribeSymbol","unsubscribeSymbol","unsubscribeAllForChart","subscribeOrderBookData","unsubscribeOrderBookData","closeWebsocket","clearAllListeners","debugChannels","getActiveSubscriptions"];for(const o of n)if(typeof t[o]!="function")throw new Error(`DataFeed "${r}" must implement method: ${o}`);const i=["subscribeTradeData","unsubscribeTradeData"];for(const o of i)t[o]&&typeof t[o]!="function"&&console.warn(`DataFeed "${r}" has invalid implementation for optional method: ${o}`)}};xe(Y5,"instance",null);let IU=Y5;function LU(){return IU.getInstance()}function PU(e,t){return r=>{const n=e();if(console.log("IntervalHandler: handleSetInterval called for chart:",n),console.log("IntervalHandler: Available chart APIs:",Object.keys(t)),t[n.id]){const i=typeof r=="function"?r({multiplier:1,timespan:"minute",text:"1m"}):r;console.log("IntervalHandler: Setting interval on chart:",n,"to:",i),t[n.id].chart.setInterval(i,n)}else console.error("IntervalHandler: Chart API not found for:",n)}}var AU=q("<div class=chartspire><div>");let Sp=!0,Ir='Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',Lr="normal";const[Ld,Vp]=ye(1);let X5=250;const Dv="chartspire-theme";let Lo="en-US";const DU=localStorage.getItem(Dv)??I("Light Theme 1",Lo),[Or,Ey]=ye(DU),[$a,Iy]=ye({id:"chart1"});class FU{constructor(t){xe(this,"_rootContainer",null),xe(this,"_container"),xe(this,"_chartApi",null),xe(this,"_chartComponentApis",{}),xe(this,"_dispose"),xe(this,"_allChartIds",[]),xe(this,"_visibleChartIds",()=>[]);var r,n;if(t.theme&&Ey(t.theme),Lo=t.locale??"en-US",t.fontFamily&&(Ir=t.fontFamily),t.fontWeight&&(Lr=t.fontWeight.toString()),t.customStyles&&EE(t.customStyles),gn.isString(t.container)){if(this._container=document.getElementById(t.container),this._container==null)throw new Error("Container is null")}else this._container=t.container;if(xv(),this._rootContainer=document.createElement("div"),this._rootContainer.className="chartspire-root-container",(r=this._container)==null||r.appendChild(this._rootContainer),this._container.classList.add("chartspire-ui"),(n=this._container)==null||n.setAttribute("data-theme",Or()),t.fontFamily?(this._container.style.setProperty("--chartspire-ui-font-family",t.fontFamily),console.log("ChartSpire: Font family set to:",t.fontFamily),console.log("ChartSpire: CSS custom property value:",this._container.style.getPropertyValue("--chartspire-ui-font-family"))):this._container.style.setProperty("--chartspire-ui-font-family",Ir),t.fontWeight?this._container.style.setProperty("--chartspire-ui-font-weight",t.fontWeight.toString()):this._container.style.setProperty("--chartspire-ui-font-weight",Lr),mU(this._container,Or),t.defaultDataFeed){let i;if(typeof t.defaultDataFeed=="string"){const o=LU();if(!o.isRegistered(t.defaultDataFeed))throw new Error(`DataFeed "${t.defaultDataFeed}" is not registered. Use DataFeedRegistry.registerDataFeed() to register it first.`);i=o.createDataFeed(t.defaultDataFeed)}else i=t.defaultDataFeed;$r.initializeWithDataFeed(i)}Sp=t.layoutUseExternalStorage??!1,X5=t.multiChartDelay??500,this._dispose=Od(i=>{let o=t.multiChartLimit??j.SIXTEEN;(o<1||o>16)&&(o=j.SIXTEEN,console.warn("Invalid multiChartLimit value. It must be between 1 and 16. Defaulting to 16."));const s=[{id:"chart1"},{id:"chart2"},{id:"chart3"},{id:"chart4"},{id:"chart5"},{id:"chart6"},{id:"chart7"},{id:"chart8"},{id:"chart9"},{id:"chart10"},{id:"chart11"},{id:"chart12"},{id:"chart13"},{id:"chart14"},{id:"chart15"},{id:"chart16"}].slice(0,o);this._allChartIds=s,Vp(j.ONE);const u=Yt(()=>{const M=Ld(),L=TU(M);return s.slice(0,L)});this._visibleChartIds=u;const[d,h]=ye(!1),[p,f]=ye(!1);let[m,x]=ye(Object.fromEntries(s.map(M=>[M.id,t.symbol])));const b=PU($a,this._chartComponentApis);sv().initialize(m,x,u,$a,(M,L,A)=>{this.setSymbol(M,L,A)}),vU(s,Ld,$a);const C=M=>{Iy(M)},[_,k]=ye({chartId:{id:"chart1"},skipBroadcast:!0,interval:t.interval});return dT(()=>{const M=this;return(()=>{var L=AU(),A=L.firstChild;return Tn(P=>M._rootContainer=P,L),R(A,G(Vn,{get each(){return u()},children:(P,W)=>G(gU,{ref:D=>{if(M._chartApi=D,(D==null?void 0:D.destroy)!=null){M._chartComponentApis[P.id]={onCleanUp:D.destroy,chart:D,underlyingChart:null};const $=()=>{var z;const B=(z=D.getUnderlyingChart)==null?void 0:z.call(D);B&&M._chartComponentApis[P.id]?M._chartComponentApis[P.id].underlyingChart=B:B||M._chartComponentApis[P.id]&&setTimeout($,100)};$()}},get rootContainer(){return M._rootContainer},get styles(){return t.styles??{}},get customStyles(){return t.customStyles},watermark:"options.watermark ?? (Logo as Node)",get locale(){return t.locale??"en-US"},get drawingBarVisible(){return t.drawingBarVisible??!0},get symbol(){var D;return((D=m())==null?void 0:D[P.id])??t.symbol},get interval(){return t.interval},get periods(){return t.periods??[{multiplier:1,timespan:Sn.MINUTE,text:qe.ONE_MIN},{multiplier:3,timespan:Sn.MINUTE,text:qe.THREE_MIN},{multiplier:5,timespan:Sn.MINUTE,text:qe.FIVE_MIN},{multiplier:15,timespan:Sn.MINUTE,text:qe.FIFTEEN_MIN},{multiplier:30,timespan:Sn.MINUTE,text:qe.THIRTY_MIN},{multiplier:1,timespan:Sn.HOUR,text:qe.ONE_HOUR},{multiplier:2,timespan:Sn.HOUR,text:qe.TWO_HOUR},{multiplier:4,timespan:Sn.HOUR,text:qe.FOUR_HOUR},{multiplier:1,timespan:Sn.DAY,text:qe.ONE_DAY},{multiplier:1,timespan:Sn.WEEK,text:qe.ONE_WEEK},{multiplier:1,timespan:Sn.MONTH,text:qe.ONE_MONTH}]},get timezone(){return t.timezone??"Etc/UTC"},get mainIndicators(){return t.mainIndicators??[]},get subIndicators(){return t.subIndicators??[]},maxMultiCharts:o,get defaultDataFeed(){return $r.getInstance().getDataFeed()},get layoutLimit(){return t.layoutLimit??20},get themeUseExternalStorage(){return t.themeUseExternalStorage??!1},onClick:()=>{C(P)},get isActiveChart(){return $a().id===P.id},get multiChartLimit(){return Ld()},onMultiChartClick:nD,chartIds:P,get theme(){return Or()},setTheme:Ey,onSymbolChange:D=>{},onIntervalChange:D=>{M.setInterval(D,P)},get rightBarExpandedViewVisible(){return d()},get resizeChart(){return p()},get candleCloseTimerEnabled(){return t.candleCloseTimerEnabled??!1},get fontFamily(){return t.fontFamily??"monospace"},get enabledSymbolTypes(){return t.enabledSymbolTypes},get intervalEnabled(){return t.intervalEnabled??!0},get layoutsEnabled(){return t.layoutsEnabled??!0},get themesEnabled(){return t.themesEnabled??!0},get themeGeneraterEnabled(){return t.themeGeneraterEnabled??!0},get timezoneEnabled(){return t.timezoneEnabled??!0},commonInterval:_,setCommonInterval:D=>{k(D)}})})),R(L,G(MU,{get isPaperTradingEnabled(){return t.paperTradingEnabled??!1},get paperTradingPriceTrackingInterval(){return t.paperTradingPriceTrackingInterval},get paperTradingPriceTrackingLogging(){return t.paperTradingPriceTrackingLogging},get paperTradingUseExternalStorage(){return t.paperTradingUseExternalStorage??!1},get paperTradingMaxTrades(){return t.paperTradingMaxTrades},get defaultOpenComponents(){return t.defaultOpenComponents},get subscribedSymbolsURL(){return t.subscribedSymbolsURL??null},get watchListLimit(){return t.watchListLimit??50},get watchListAmount(){return t.watchListAmount??5},get watchListUseExternalStorage(){return t.watchListUseExternalStorage??!1},setInterval:b,rightBarExpandedViewVisible:d,setRightBarExpandedViewVisible:h,get locale(){return t.locale??"en-US"},resizeChart:f,get chart(){var P;return((P=M._chartComponentApis[$a().id])==null?void 0:P.underlyingChart)||null},currentSymbol:()=>{var P;const W=(P=M._chartComponentApis[$a().id])==null?void 0:P.chart;return(W==null?void 0:W.getSymbol($a()))??t.symbol},get chartComponentApis(){return M._chartComponentApis},get isOrderBookEnabled(){return t.orderBookEnabled??!1},get orderBookMaxRows(){return t.orderBookMaxRows??10},get orderBookDepthVisualization(){return t.orderBookDepthVisualization??"cumulative"},get isTradesEnabled(){return t.tradesEnabled??!1},get tradesMaxRows(){return t.tradesMaxRows??50},get tradesTimeFormat(){return t.tradesTimeFormat??"24h"},get watchListEnabled(){return t.watchListEnabled??!1},get watchListHttp(){return t.watchListHttp??!1},get watchListHttpInterval(){return t.watchListHttpInterval??5e3},get watchListHttpBatchSize(){return t.watchListHttpBatchSize??10},get watchListHttpRetryEnabled(){return t.watchListHttpRetryEnabled??!0},get watchListHttpMaxRetries(){return t.watchListHttpMaxRetries??3},get enabledSymbolTypes(){return t.enabledSymbolTypes??[]}}),null),Ne(P=>{var W=`chartspire-ui-parent-flex ${EU(Ld())}`,D=d();return W!==P.e&&st(A,P.e=W),D!==P.t&&Ve(A,"right-bar-extended-view-visible",P.t=D),P},{e:void 0,t:void 0}),L})()},this._container),i})}setTheme(t){var r;const n=[I("Light Theme 1",Lo),I("Light Theme 2",Lo),I("Midnight Theme",Lo),I("Dark Theme",Lo),I("Dark Gray Theme",Lo),I("Blue Theme",Lo),I("Red Theme",Lo),I("Green Theme",Lo),I("Yellow Theme",Lo),I("Pink Theme",Lo)];if(!n.includes(t)){console.error("Invalid theme: ",t," should be one of: ",n);return}(r=this._container)==null||r.setAttribute("data-theme",t)}getTheme(){return Or()}setStyles(t){Object.values(this._chartComponentApis).forEach(r=>{console.log("setting styles",t),r.chart.setStyles(t)})}getStyles(){return this._chartComponentApis[$a().id].chart.getStyles()}setCustomStyles(t){_0().updateCustomOverrides(t);const r=Or();Object.values(this._chartComponentApis).forEach(n=>{n.chart.setStyles(Ui(r))})}getCustomStyles(){return _0().getCustomOverrides()}clearCustomStyles(){_0().clearCustomOverrides();const t=Or();Object.values(this._chartComponentApis).forEach(r=>{r.chart.setStyles(Ui(t))})}hasCustomStyles(){return _0().hasCustomStyles()}setLocale(t){Object.values(this._chartComponentApis).forEach(r=>{console.log("setting locale",t),r.chart.setLocale(t)})}getLocale(){var t;return((t=this._chartApi)==null?void 0:t.getLocale())??"en-US"}setFontFamily(t){Ir=t,this._container&&(this._container.style.setProperty("--chartspire-ui-font-family",t),console.log("ChartSpire: Font family updated to:",t),console.log("ChartSpire: CSS custom property value:",this._container.style.getPropertyValue("--chartspire-ui-font-family")))}getFontFamily(){return this._container&&this._container.style.getPropertyValue("--chartspire-ui-font-family")||'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'}setFontWeight(t){Lr=t.toString(),this._container&&(this._container.style.setProperty("--chartspire-ui-font-weight",t.toString()),console.log("ChartSpire: Font weight updated to:",t),console.log("ChartSpire: CSS custom property value:",this._container.style.getPropertyValue("--chartspire-ui-font-weight")))}getFontWeight(){return this._container&&this._container.style.getPropertyValue("--chartspire-ui-font-weight")||"normal"}setTimezone(t){Object.values(this._chartComponentApis).forEach(r=>{r.chart.setTimezone(t)})}getTimezone(){var t;return((t=this._chartApi)==null?void 0:t.getTimezone())??"America/New_York"}setSymbol(t,r,n){if(this._chartComponentApis[r.id]==null){console.error("Chart not found: ",r);return}if(n==null){console.error("Data feed is null");return}console.debug("ChartSpire setSymbol called with symbol:",t),this._chartComponentApis[r.id].chart.setSymbol(t,r,n)}getSymbol(t){return this._chartComponentApis[t.id]==null?(console.error("Chart not found: ",t),null):this._chartComponentApis[t.id].chart.getSymbol(t)}setInterval(t,r){if(this._chartComponentApis[r.id]==null){console.error("Chart not found: ",r);return}this._chartComponentApis[r.id].chart.setInterval(t,r)}getInterval(t){return this._chartComponentApis[t.id]==null?(console.error("Chart not found: ",t),null):this._chartComponentApis[t.id].chart.getInterval(t)}getActiveChart(){return this._chartApi}getChart(t){return this._chartComponentApis[t.id]==null?(console.error("Chart not found"),null):this._chartComponentApis[t.id].chart}isActiveChart(t){return $a().id===t.id}setActiveChart(t){if(this._chartComponentApis[t.id]==null){console.error("Chart not found: ",t);return}Iy(t)}getMultiChart(){return Ld()}getAllChartIds(){return[...this._allChartIds]}getVisibleChartIds(){return[...this._visibleChartIds()]}destroy(){console.log("Destroying chart");const t=Object.keys(this._chartComponentApis).length;console.log(`Destroying ${t} charts`),Object.entries(this._chartComponentApis).forEach(([r,n])=>{n.onCleanUp()}),this._dispose(),tD(),this._container.classList.remove("chartspire-ui"),this._container.removeAttribute("data-theme"),this._container.innerHTML="",this._container=null,this._chartApi=null,this._chartComponentApis={}}syncAllSymbolsToActiveChart(){}syncAllIntervalsToActiveChart(){}}const RU=()=>(console.warn("No getStoreCallback set."),null),OU=()=>(console.warn("No updateStoreCallback set."),null),NU=()=>(console.warn("No deleteStoreCallback set."),null);class zU{async getAllLayouts(){try{return console.warn("Retrieving from Store"),Sp&&!RU()?(console.warn("No callback is set. "),{}):localStorage}catch(t){console.warn("Error getting all layouts: ",t)}return{}}async removeStorage(t){try{if(Sp){const r=NU();r&&await r(t)}else localStorage.removeItem(t)}catch(r){console.warn("Error removing storage: ",r)}}async addToStore(t,r){try{if(Sp){const n=OU();n&&await n(t,r)}else localStorage.setItem(t,JSON.stringify(r))}catch(n){console.warn("Error updating storage: ",n)}}getLayoutEntry(t,r){return Object.entries(r).map(([n,i])=>({key:n,value:i})).find(n=>n.key===t)}async getLayoutFromStore(t){try{const r=await this.getAllLayouts();if(r instanceof Storage)return JSON.parse(r.getItem(t));const n=this.getLayoutEntry(t,r);return n?n.value:null}catch(r){console.warn("Error getting layout from store: ",r)}return{indicatorStore:{indicators:[]},stylesStore:{},overlayStore:{overlay:{},tickerInfo:{}}}}}const[Ly,$U]=ye(null),[BU,Fv]=ye("default"),[VU,Py]=ye(!1),Pd=()=>({indicatorStore:{indicators:[]},stylesStore:Or()==="Light Theme 1"||Or()==="Light Theme 2"?Ui("Light Theme 1"):Ui("Dark Theme"),overlayStore:[],paneOptionsStore:{paneOptions:U5()}}),j5=class Z5{constructor(t){xe(this,"chart"),xe(this,"storageProvider"),xe(this,"stylesStore","stylesStore"),xe(this,"indicatorStore","indicatorStore"),xe(this,"overlayStore","overlayStore"),xe(this,"paneOptionsStore","paneOptionsStore"),xe(this,"defaultLayoutStore","default_mainStore"),this.chart=t,this.storageProvider=new zU}static getInstance(t){return this.instances.has(t)||this.instances.set(t,new Z5(t)),this.instances.get(t)}get getSelectedLayoutName(){return(Ze(BU).replace(/\s+/g,"")??"default")+"_mainStore"}getDefaultLayout(){return this.defaultLayoutStore.replace("_mainStore","")}isDefaultLayout(){return this.getSelectedLayoutName===this.defaultLayoutStore}async getNameOfAllLayouts(){try{const t=[],r=await this.storageProvider.getAllLayouts();let n=0;t.push(this.getDefaultLayout()),r instanceof Storage?n=r.length:n=Object.keys(r).length;for(let i=0;i<n;i++)if(r instanceof Storage){const o=r.key(i);o!=null&&o.endsWith("_mainStore")&&t.push(o.replace("_mainStore",""))}else{const o=Object.keys(r)[i];o.endsWith("_mainStore")&&t.push(o.replace("_mainStore",""))}return t}catch(t){console.warn("Error getting the list of all names for layouts: ",t)}return[]}saveIndicators(){if(!(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore))try{const t=this.createIndicatorStoreFromChart();this.addDataToLayout(this.indicatorStore,t)}catch(t){console.warn("Error saving indicators:",t)}}async getIndicators(t){try{if(this.getSelectedLayoutName===this.defaultLayoutStore)return{indicators:[]};if(t){const r=t[this.indicatorStore];if(r)return r}}catch(r){console.warn("Error getting indicators: ",r)}return{indicators:[]}}saveStyles(){if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore)return;const t=this.getStylesFromChart();if(t)try{this.addDataToLayout(this.stylesStore,t)}catch(r){console.warn("Error saving styles:",r)}}async getStyles(t){if(this.getSelectedLayoutName===this.defaultLayoutStore)return null;try{if(t){const r=t[this.stylesStore];if(r)return r}}catch(r){console.warn("Error getting styles:",r)}return null}savePaneOptions(){if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore)return;const t={paneOptions:this.getPaneOptionsFromChart()};if(t)try{this.addDataToLayout(this.paneOptionsStore,t)}catch(r){console.warn("Error saving pane options:",r)}}async getPaneOptionsFromStore(t){if(this.getSelectedLayoutName===this.defaultLayoutStore)return{paneOptions:{}};try{if(t){const r=t[this.paneOptionsStore];if(r)return r}}catch(r){console.warn("Error getting pane options from store:",r)}return{paneOptions:{}}}removeNullValuesAndSpecificFields(t,r){const n={};for(const i in t){const o=t[i];r.includes(i)||o!==null&&(typeof o=="object"&&!Array.isArray(o)?n[i]=this.removeNullValuesAndSpecificFields(o,r):n[i]=o)}return n}async saveOverlay(t){if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore||t===null||Ly()===null)return;const r={overlay:this.removeNullValuesAndSpecificFields(t,["visible","lock","zLevel","mode","needDefaultPointFigure","needDefaultXAxisFigure","needDefaultYAxisFigure","modeSensitivity","totalStep","currentStep","groupId","_prevPressedPoints","logo","paneId","createPointFigures","createYAxisFigures","createXAxisFigures","onDrawStart","onDrawing","onDrawEnd","onPressedMoveStart","onPressedMoving","onPressedMoveEnd","onMoveStart","onMoving","onMoveEnd","onRightClick","onClick"]),symbolInfo:this.getActiveChartSymbol()};try{const n=await this.getLayoutFromStore()??Pd();let i=await this.getOverlays(n);Array.isArray(i)||(i=[]),i==null||i.push(r),this.addDataToLayout(this.overlayStore,i)}catch(n){console.warn("Error saving overlay:",n)}}async overrideOverlay(t){try{if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore||t===null)return;const r=await this.getLayoutFromStore()??Pd();let n=await this.getOverlays(r);if(!n||n.length===0){console.warn("No overlays found, nothing to override");return}n.forEach(i=>{i.overlay.id===(t==null?void 0:t.id)&&(console.log("Found overlay in store, overriding... ",t==null?void 0:t.id),t.styles&&(i.overlay.styles=t.styles),t.extendData&&(i.overlay.extendData=t.extendData),t.points&&(console.log("Updating points for overlay: ",t.id),i.overlay.points=t.points))}),this.addDataToLayout(this.overlayStore,n)}catch(r){console.warn("Error overriding overlay: ",r)}}async deleteOverlay(t){if(!(!this.chart||!this.getSelectedLayoutName))try{this.chart.removeOverlay(t);const r=await this.getLayoutFromStore();if(r){console.log("Deleting overlay for symbol: ",this.getActiveChartSymbol());const n=r.overlayStore.filter(i=>i.overlay.id!==t.id);await this.addDataToLayout(this.overlayStore,n)}else console.warn("Unable to delete overlay, layout not found")}catch(r){console.warn("Error deleting overlay:",r)}}async getOverlays(t){if(this.getSelectedLayoutName===this.defaultLayoutStore)return[];if(t){const r=t[this.overlayStore];if(r)return r}return[]}async removeAllOverlays(t=!1){var r;if((r=this.chart.getOverlays())==null||r.forEach(n=>{this.chart.removeOverlay(n)}),t){const n=await this.getLayoutFromStore();n&&(tt.forEach(n.overlayStore,i=>{var o;i.symbolInfo.symbol===((o=this.getActiveChartSymbol())==null?void 0:o.symbol)&&(n.overlayStore=n.overlayStore.filter(s=>s!==i))}),this.addDataToLayout(this.overlayStore,n.overlayStore))}}async updateLayoutName(t){if(this.getSelectedLayoutName!==this.defaultLayoutStore)try{const r=await this.getLayoutFromStore()??Pd();if(r){const n=t.replace(/\s+/g,"")+"_mainStore",i={indicatorStore:r[this.indicatorStore],stylesStore:r[this.stylesStore],overlayStore:r[this.overlayStore],paneOptionsStore:r[this.paneOptionsStore]};await this.storageProvider.addToStore(n,i),await this.storageProvider.removeStorage(this.getSelectedLayoutName),Fv(t)}}catch(r){console.warn("Error updating store name:",r)}}getActiveChartSymbol(){return Ly()}async removeStorage(){this.getSelectedLayoutName!==this.getDefaultLayout()&&await this.storageProvider.removeStorage(this.getSelectedLayoutName)}async addDataToLayout(t,r){try{console.warn("Adding data to Store");let n;if(VU()?n=await this.getLayoutFromStore()??Pd():n=this.createLayoutFromChart(),n){const i=n instanceof Storage?JSON.parse(n):n;i&&(i[t]=r,await this.storageProvider.addToStore(this.getSelectedLayoutName,i))}}catch(n){console.warn("Error updating storage: ",n)}}async getLayoutFromStore(){return await this.storageProvider.getLayoutFromStore(this.getSelectedLayoutName)}getDefaultLayoutData(){return Pd()}createLayoutFromChart(){var t;const r=this.createIndicatorStoreFromChart(),n=this.getStylesFromChart(),i={paneOptions:this.getPaneOptionsFromChart()},o=[];return(t=this.chart.getOverlays())==null||t.forEach(s=>{o.push({overlay:s,symbolInfo:this.getActiveChartSymbol()})}),{indicatorStore:r,stylesStore:n,overlayStore:o,paneOptionsStore:i}}createIndicatorStoreFromChart(){const t=this.chart.getIndicators(),r=t.filter(i=>i.paneId==="candle_pane");t.forEach(i=>{F0.forEach(o=>{o===i.name&&r.push(i)})});const n=[];return tt.forEach(r,i=>{const o={id:i.id,name:i.name,paneId:i.paneId,calcParams:i.calcParams,visible:i.visible,zLevel:i.zLevel,precision:i.precision,shortName:i.shortName,shouldOhlc:i.shouldOhlc,shouldFormatBigNumber:i.shouldFormatBigNumber,extendData:i.extendData,series:i.series,minValue:i.minValue,maxValue:i.maxValue,styles:i.styles,figures:i.figures};n.push(o)}),{indicators:n}}getStylesFromChart(){return this.chart.getStyles()}getPaneOptionsFromChart(){const t=this.chart.getPaneOptions();return t===null?{}:Array.isArray(t)?t.length>0?t[0]:{}:t||{}}};xe(j5,"instances",new Map);let bt=j5;class Ay{static getIconsForCandleTooltip(t){var r,n;const i=t.id||"unknown",o=jc.getCandleTooltipCollapseState(i);return(((n=(r=t.getStyles().candle)==null?void 0:r.tooltip)==null?void 0:n.features)||[]).map(s=>s.id==="arrow_down"?{...s,...Rd.createArrowIcon(o)}:s)}}class jc{static handleIconClick(t,r,n,i,o,s,u){console.log("TooltipIconHandler.handleIconClick called with data:",r);const d=r.paneId,h=r.indicator,p=r.feature;if(console.log("Parsed data - paneId:",d,"indicator:",h,"feature:",p),h&&p){const f=h.name,m=p.id;switch(console.log(`Processing icon click: ${m} for indicator: ${f}`),m){case"invisible":this.handleVisibilityToggle(t,f,d,!0);break;case"visible":this.handleVisibilityToggle(t,f,d,!1);break;case"setting":this.handleSettings(t,f,d,n);break;case"close":this.handleClose(t,f,d,i,o,s,u);break;case"arrow_down":this.handleArrowDown(t,f);break;default:console.warn(`Unknown tooltip icon: ${m}`)}}}static handleVisibilityToggle(t,r,n,i){t.overrideIndicator({name:r,visible:i,paneId:n})}static handleSettings(t,r,n,i){const o=t.getIndicators({name:r,paneId:n});if(o&&o.length>0){const s=o[0];s&&i({visible:!0,indicatorName:r,paneId:n,calcParams:s.calcParams,styles:s.styles})}}static handleClose(t,r,n,i,o,s,u){if(console.log(`TooltipIconHandler.handleClose: Attempting to close indicator ${r} in pane ${n}`),n==="candle_pane"){const d=i(),h=d.indexOf(r);if(h===-1)console.warn(`Indicator ${r} not found in main indicators array. Skipping state update.`),t.removeIndicator({name:r,paneId:"candle_pane"});else{const p=[...d];t.removeIndicator({name:r,paneId:"candle_pane"}),p.splice(h,1),o(p)}}else{const d=s();if(!(r in d))console.warn(`Indicator ${r} not found in sub indicators. Skipping state update.`),t.removeIndicator({name:r,paneId:n});else{const h={...d};t.removeIndicator({name:r,paneId:n}),delete h[r],u(h)}}bt.getInstance(t).saveIndicators()}static handleArrowDown(t,r){const n=t.id||"unknown",i=this.getIndicatorCollapseState(r,n);this.setIndicatorCollapseState(r,!i,n);const o=t.getIndicators().find(s=>s.name===r);o&&t.overrideIndicator(o)}static handleCandleTooltipIconClick(t,r){const n=r.feature;if(n&&n.id==="arrow_down"){const i=t.id||"unknown",o=this.getCandleTooltipCollapseState(i);this.setCandleTooltipCollapseState(!o,i),this.updateCandleTooltipStyles(t,!o)}}static updateCandleTooltipStyles(t,r){var n,i,o,s,u,d,h,p,f;const m=t.id||"unknown",x=t.getStyles();if(r){const b=(o=(i=(n=x.candle)==null?void 0:n.tooltip)==null?void 0:i.legend)==null?void 0:o.template;b&&!this.originalCandleTemplates.has(m)&&this.originalCandleTemplates.set(m,b);const C=(k,M)=>{if(Array.isArray(b))return b.length>0?[b[0]]:[];if(typeof b=="function")try{const L=b(k,M);return Array.isArray(L)&&L.length>0?[L[0]]:[]}catch{return[]}return[]},_=Ay.getIconsForCandleTooltip(t);t.setStyles({candle:{tooltip:{...(s=x.candle)==null?void 0:s.tooltip,features:_,legend:{...(d=(u=x.candle)==null?void 0:u.tooltip)==null?void 0:d.legend,template:C}}}})}else{const b=this.originalCandleTemplates.get(m),C=Ay.getIconsForCandleTooltip(t);t.setStyles({candle:{tooltip:{...(h=x.candle)==null?void 0:h.tooltip,features:C,legend:{...(f=(p=x.candle)==null?void 0:p.tooltip)==null?void 0:f.legend,template:b}}}})}}static createKey(t,r){return`${t}:${r}`}static getIndicatorCollapseState(t,r){if(!r)return!1;const n=this.createKey(r,t);return this.collapsedIndicators.has(n)}static setIndicatorCollapseState(t,r,n){if(!n)return;const i=this.createKey(n,t);r?this.collapsedIndicators.add(i):this.collapsedIndicators.delete(i)}static getCandleTooltipCollapseState(t){if(!t)return!1;const r=this.createKey(t,"candle");return this.collapsedIndicators.has(r)}static setCandleTooltipCollapseState(t,r){if(!r)return;const n=this.createKey(r,"candle");t?this.collapsedIndicators.add(n):this.collapsedIndicators.delete(n)}static getCurrentCandleTooltipChartId(){return null}}xe(jc,"collapsedIndicators",new Set),xe(jc,"originalCandleTemplates",new Map);function G5({chart:e,mainIndicators:t,setMainIndicators:r,subIndicators:n,setSubIndicators:i,setIndicatorSettingModalParams:o}){return s=>{jc.handleIconClick(e,s,o,t,r,n,i)}}class WU{static getIconsForIndicator(t,r){const n=t.getStyles().indicator.tooltip.features,i=[],o=t.id||"unknown",s=jc.getIndicatorCollapseState(r.name,o),u=n.find(m=>m.id==="visible"),d=n.find(m=>m.id==="invisible"),h=n.find(m=>m.id==="setting"),p=n.find(m=>m.id==="close"),f=n.find(m=>m.id==="arrow_down");if(s){if(r.visible?(u&&i.push(this.applyIconPadding(u)),h&&i.push(this.applyIconPadding(h))):(d&&i.push(this.applyIconPadding(d)),h&&i.push(this.applyIconPadding(h))),f){const m={...f,...Rd.createArrowIcon(!0)};i.push(this.applyIconPadding(m))}return p&&i.push(this.applyIconPadding(p)),i}if(r.visible){if(u&&i.push(this.applyIconPadding(u)),h&&i.push(this.applyIconPadding(h)),f){const m={...f,...Rd.createArrowIcon(!1)};i.push(this.applyIconPadding(m))}p&&i.push(this.applyIconPadding(p))}else{if(d&&i.push(this.applyIconPadding(d)),h&&i.push(this.applyIconPadding(h)),f){const m={...f,...Rd.createArrowIcon(!1)};i.push(this.applyIconPadding(m))}p&&i.push(this.applyIconPadding(p))}return i}static applyIconPadding(t){return t.id==="arrow_down"&&(t.marginTop!==void 0||t.marginLeft!==void 0)?t:{...t,marginTop:1,marginLeft:4}}static getIconById(t,r){return t.getStyles().indicator.tooltip.features.find(n=>n.id===r)}static getAllIcons(t){return t.getStyles().indicator.tooltip.features}}class UU{static createDataSource(t){return({indicator:r,crosshair:n})=>{const i=t.id||"unknown",o=jc.getIndicatorCollapseState(r.name,i)?[]:this.createLegends(t,r,n),s=WU.getIconsForIndicator(t,r);return{name:r.name,calcParamsText:"",features:s,legends:o}}}static createLegends(t,r,n){var i,o;const s=r.result,u=((o=(i=n.kLineData)==null?void 0:i.timestamp)==null?void 0:o.toString())??"",d=s[u],h=[];if(d){for(const p in d)if(Object.prototype.hasOwnProperty.call(d,p)&&d[p]!==void 0){const f=this.determineValueColor(t,r,h.length);h.push({title:p.toUpperCase()+": ",value:{text:d[p].toFixed(2),color:f}})}}return h}static determineValueColor(t,r,n){let i=t.getStyles().indicator.lines[n%t.getStyles().indicator.lines.length].color;const o=r.styles;return o&&(o.lines?i=o.lines[n%o.lines.length].color:o.circles&&(i=o.circles[n%o.circles.length].upColor)),i}}class Rv{static applyStylesToChart(t,r){if(!t)return;const n=HM.createTooltipConfig(r),i=YM.createCandleTooltipConfig(r);t.setStyles({indicator:{tooltip:n},candle:{tooltip:i}})}static createIndicatorWithTooltip(t,r,n=!0,i,o){const s={name:r,visible:!0,createTooltipDataSource:UU.createDataSource(t)},u=(t==null?void 0:t.createIndicator(s,i,o))??null;return n&&bt.getInstance(t).saveIndicators(),u}static createIconClickHandler(t){return G5(t)}static createCandleTooltipIconClickHandler(t){return r=>{jc.handleCandleTooltipIconClick(t,r)}}static updateTheme(t,r){this.applyStylesToChart(t,r)}}function Hg(e,t,r,n,i){return Rv.createIndicatorWithTooltip(e,t,r,n,i)}const HU=(e,t,r)=>{let n=t,i=n;switch(e.timespan){case"minute":{n=n-n%(60*1e3),i=n-r*e.multiplier*60*1e3;break}case"hour":{n=n-n%(3600*1e3),i=n-r*e.multiplier*60*60*1e3;break}case"day":{n=n-n%(3600*1e3),i=n-r*e.multiplier*24*60*60*1e3;break}case"week":{const o=new Date(n).getDay(),s=o===0?6:o-1;n=n-s*60*60*24;const u=new Date(n);n=new Date(`${u.getFullYear()}-${u.getMonth()+1}-${u.getDate()}`).getTime(),i=r*e.multiplier*7*24*60*60*1e3;break}case"month":{const o=new Date(n),s=o.getFullYear(),u=o.getMonth()+1;n=new Date(`${s}-${u}-01`).getTime(),i=r*e.multiplier*30*24*60*60*1e3;const d=new Date(i);i=new Date(`${d.getFullYear()}-${d.getMonth()+1}-01`).getTime();break}case"year":{const o=new Date(n).getFullYear();n=new Date(`${o}-01-01`).getTime(),i=r*e.multiplier*365*24*60*60*1e3;const s=new Date(i);i=new Date(`${s.getFullYear()}-01-01`).getTime();break}}return[i,n]},YU=e=>{e.getIndicators().forEach(t=>{e.removeIndicator({id:t.id})})},kp=new Map;function XU(e){return kp.has(e)||kp.set(e,{currentCandle:null,targetInterval:{multiplier:1,timespan:"minute",text:"1m"},lastTimestamp:0,initialized:!1,lastVolume:0,isFirstDataPoint:!0}),kp.get(e)}function jU(e){kp.set(e,{currentCandle:null,targetInterval:{multiplier:1,timespan:"minute",text:"1m"},lastTimestamp:0,initialized:!1,lastVolume:0,isFirstDataPoint:!0})}function ZU(e,t,r){if(!r.currentCandle)return!0;const n=new Date(r.currentCandle.timestamp),i=new Date(e);switch(t.timespan){case"minute":const o=t.multiplier,s=n.getUTCHours()*60+n.getUTCMinutes(),u=i.getUTCHours()*60+i.getUTCMinutes();return Math.floor(s/o)!==Math.floor(u/o);case"hour":const d=t.multiplier,h=n.getUTCHours(),p=i.getUTCHours(),f=Math.floor(h/d)!==Math.floor(p/d),m=n.getUTCDate()!==i.getUTCDate();return!!(f||m);case"day":return Math.floor((i.getTime()-n.getTime())/(1440*60*1e3))>=t.multiplier;case"week":const x=_=>{const k=new Date(_.getTime());let M=k.getUTCDay();M===0&&(M=7);const L=M-1;return k.setUTCDate(k.getUTCDate()-L),k.setUTCHours(0,0,0,0),k},b=x(n),C=x(i);return b.getTime()!==C.getTime();case"month":return(i.getUTCFullYear()-n.getUTCFullYear())*12+(i.getUTCMonth()-n.getUTCMonth())>=t.multiplier;default:return console.warn(`Unknown interval: ${t.timespan}`),!0}}function q5(e,t){const r=new Date(e);r.toISOString();let n=new Date(e);switch(t.timespan){case"minute":const i=Math.floor(r.getUTCMinutes()/t.multiplier)*t.multiplier;n.setUTCMinutes(i,0,0);break;case"hour":const o=r.getUTCHours(),s=Math.floor(o/t.multiplier)*t.multiplier;n.setUTCHours(s,0,0,0);break;case"day":if(n.setUTCHours(0,0,0,0),t.multiplier>1){const h=Math.floor(r.getTime()/864e5)%t.multiplier;n.setTime(n.getTime()-h*24*60*60*1e3)}break;case"week":let u=r.getUTCDay();u===0&&(u=7);const d=u-1;if(n.setUTCDate(r.getUTCDate()-d),n.setUTCHours(0,0,0,0),t.multiplier>1){const h=new Date(Date.UTC(2e3,0,3)).getTime(),p=(Math.floor((n.getTime()-h)/6048e5)%t.multiplier+t.multiplier)%t.multiplier;p>0&&n.setTime(n.getTime()-p*6048e5)}break;case"month":if(n.setUTCDate(1),n.setUTCHours(0,0,0,0),t.multiplier>1){const h=r.getUTCMonth(),p=h%t.multiplier;n.setUTCMonth(h-p)}break;default:return e}return n.getTime()}function Q5(e,t){try{const r=e.getDataList();return!r||r.length===0?(console.log(`No existing data found in chart for timestamp lookup: ${new Date(t).toISOString()}`),null):r.find(i=>i.timestamp===t)||null}catch(r){return console.error("Error finding existing candle:",r),null}}function GU(e,t,r,n){if(!n.initialized)try{const i=q5(t,r),o=Q5(e,i);if(o)n.currentCandle={...o};else if(r.timespan==="week"){const s=(h=>{const p=new Date(h.getTime());let f=p.getUTCDay();return f===0&&(f=7),p.setUTCDate(p.getUTCDate()-(f-1)),p.setUTCHours(0,0,0,0),p})(new Date(t)),u=new Date(s.getTime()+10080*60*1e3),d=e.getDataList();if(d&&d.length>0){const h=d.find(p=>{const f=new Date(p.timestamp).getTime();return f>=s.getTime()&&f<u.getTime()});h&&(n.currentCandle={...h,timestamp:i})}}n.initialized=!0}catch(i){console.error("Error initializing from existing data:",i),n.initialized=!0}}function qU(e,t,r,n,i){if(r.timespan==="minute"&&r.multiplier===1){i?i(t):console.warn("candleAggregate called without callback for 1-minute data");return}const o=XU(n);o.targetInterval=r,o.initialized||GU(e,t.timestamp,r,o);const s=t.timestamp;o.lastTimestamp=s;const u=q5(s,r),d=t.volume||0,h=Math.max(0,d-o.lastVolume);if(o.lastVolume=d,!o.currentCandle||ZU(s,r,o)){o.lastVolume=d,o.isFirstDataPoint=!0,o.currentCandle&&i&&i(o.currentCandle);const p=Q5(e,u);if(p){o.currentCandle={...p},o.currentCandle.high=Math.max(p.high,t.high),o.currentCandle.low=Math.min(p.low,t.low),o.currentCandle.close=t.close;const f=p.volume||0;o.currentCandle.volume=f}else o.currentCandle={open:t.open,high:t.high,low:t.low,close:t.close,volume:d,timestamp:u};i&&i(o.currentCandle)}else if(o.currentCandle){const p=o.currentCandle;p.high=Math.max(p.high,t.high),p.low=Math.min(p.low,t.low),p.close=t.close,o.isFirstDataPoint||(p.volume=(p.volume||0)+h),i&&i(p)}o.isFirstDataPoint=!1}const Dy={multiplier:1,timespan:"minute",text:"1m"},K5=class Ad{constructor(){xe(this,"chartConfigs",new Map),xe(this,"previousSymbols",new Map),xe(this,"dataFeed",new eH)}static getInstance(){return Ad.instance||(Ad.instance=new Ad),Ad.instance}setDataFeed(t){this.dataFeed=t,console.log("ChartDataProvider: Data feed instance set")}getDataFeed(){return this.dataFeed}static initializeWithDataFeed(t){Ad.getInstance().setDataFeed(t),console.log("ChartDataProvider initialized with data feed:",t.constructor.name)}createDataLoader(t,r,n,i,o,s){return{getBars:this.createGetBarsHandler(t,r,n,i,o,s),subscribeBar:this.createSubscribeBarHandler(t,s),unsubscribeBar:this.createUnsubscribeBarHandler(t,s)}}createGetBarsHandler(t,r,n,i,o,s){return async({callback:u})=>{o&&o(!0);try{if(!this.dataFeed){console.error(`ChartDataProvider [${t.id}]: No data feed available. Make sure setDataFeed() was called first.`),u([]);return}if(s&&this.handleReplayGetBars(t,u,o))return;let d=this.chartConfigs.get(t);if(d){const m=d.symbol;d.symbol=r,d.interval=n,d.candleType=i||null,d.dataFeed=this.dataFeed,console.debug(`ChartDataProvider [${t.id}]: Updated existing config, chart reference: ${d.chart?"preserved":"still null"}, oldTicker:`,m,"newTicker:",r)}else d={symbol:r,interval:n,candleType:i||null,dataFeed:this.dataFeed,chart:null},this.chartConfigs.set(t,d),console.debug(`ChartDataProvider [${t.id}]: Created new config, chart reference: null`);jU(t);const[h,p]=HU(n,new Date().getTime(),500);let f=await this.dataFeed.getHistoricalTimeSeries(r,n,h,p,r.type);if(i&&As(i)&&f.length>0&&(f=this.handleRenkoGetBars(t,f,i),f.length===0)){u([]);return}u(f)}catch(d){console.warn(`ChartDataProvider [${t.id}]: Error fetching data:`,d),u([])}finally{o&&o(!1)}}}createSubscribeBarHandler(t,r){return({callback:n})=>{const i=this.chartConfigs.get(t);if(!i){console.warn(`ChartDataProvider [${t.id}]: No config found for subscribeBar`);return}if(r){if(this.handleReplaySubscribe(t,n))return;console.warn(`ChartDataProvider [${t.id}]: Replay mode not handled`)}if(As(i.candleType)){if(this.handleRenkoSubscribe(t))return;console.warn(`ChartDataProvider [${t.id}]: Renko mode not handled`)}this.handleStandardSubscribe(t,n)}}createUnsubscribeBarHandler(t,r){return async()=>{console.warn("createUnsubscribeBarHandler called");const n=this.chartConfigs.get(t);if(console.debug(`ChartDataProvider [${t.id}]: Unsubscribe handler called, config:`,n),!n)return;const i=this.getPreviousSymbol(t);console.warn(`ChartDataProvider [${t.id}]: Unsubscribe handler called, previousSymbol:`,i,"currentConfig.ticker:",n.symbol),!(r&&await this.handleReplayUnsubscribe(t))&&await this.handleStandardUnsubscribe(t)}}updateChartReference(t,r){let n=this.chartConfigs.get(t);n?(n.chart=r,console.debug(`ChartDataProvider [${t.id}]: Updated chart reference in existing config`)):(console.error("ChartDataProvider: No config found for updateChartReference",t),n={symbol:{symbol:"",type:mr.CRYPTO},interval:{multiplier:1,timespan:"minute",text:"1m"},candleType:null,dataFeed:this.dataFeed,chart:r},this.chartConfigs.set(t,n),console.debug(`ChartDataProvider [${t.id}]: Created new config with chart reference`))}cleanup(t){this.chartConfigs.delete(t),console.warn(`ChartDataProvider [${t.id}]: Configuration cleaned up`)}getConfig(t){return this.chartConfigs.get(t)}setPreviousSymbol(t,r){console.log("ChartDataProvider: Setting previous symbol for chart:",t,r);const n={...r};this.previousSymbols.set(t.id,n)}getPreviousSymbol(t){const r=this.previousSymbols.get(t.id);return console.debug(`ChartDataProvider [${t.id}]: getPreviousSymbol called, returning:`,r),r}getReplayInstance(t){return $0.getInstancesMap().get(t)||null}handleReplayGetBars(t,r,n){console.debug(`ChartDataProvider [${t.id}]: REPLAY MODE - Getting initial replay data`);const i=this.getReplayInstance(t);if(i){const o=i.getCurrentReplayData();return console.debug(`ChartDataProvider [${t.id}]: Returning ${o.length} initial replay data points`),r(o),n&&n(!1),!0}else return console.warn(`ChartDataProvider [${t.id}]: No replay instance found for replay mode`),!1}handleReplaySubscribe(t,r){console.log(`ChartDataProvider [${t.id}]: REPLAY MODE - Setting up replay subscription`);const n=this.getReplayInstance(t);return n?(n.setCurrentCallback(r),n.startReplayInterval(),console.debug(`ChartDataProvider [${t.id}]: Replay interval started`),!0):(console.warn(`ChartDataProvider [${t.id}]: No replay instance found for replay subscription`),!1)}async handleReplayUnsubscribe(t){console.warn(`ChartDataProvider [${t.id}]: REPLAY MODE - Cleaning up replay subscription`);const r=this.getReplayInstance(t);return r?(r.stopReplayInterval(),console.warn(`ChartDataProvider [${t.id}]: Replay interval stopped`),!0):!1}handleRenkoGetBars(t,r,n){const i=this.chartConfigs.get(t);if(!(i!=null&&i.chart))return console.error(`ChartDataProvider [${t.id}]: Chart reference is null for Renko processing. Make sure updateChartReference was called before creating the data loader.`),[];console.log(`ChartDataProvider [${t.id}]: Processing ${r.length} data points for Renko chart`);const o=EB(i.chart,r,t);return console.log(`ChartDataProvider [${t.id}]: Generated ${o.length} Renko bricks`),o}handleRenkoSubscribe(t){return console.warn(`ChartDataProvider [${t.id}]: Renko detected - live subscription disabled`),!0}handleStandardSubscribe(t,r){var n;const i=this.chartConfigs.get(t);if(!i){console.warn(`ChartDataProvider [${t.id}]: No config found for subscribeBar`);return}if(!i.chart){console.error(`ChartDataProvider [${t.id}]: Chart reference is null. Make sure updateChartReference was called before creating the data loader.`);return}(n=this.dataFeed)==null||n.subscribeSymbol(i.symbol,Dy,o=>{i.chart?qU(i.chart,o,i.interval,t,r):console.warn(`ChartDataProvider [${t.id}]: Chart reference became null during data processing`)},t.id)}async handleStandardUnsubscribe(t){var r;const n=this.chartConfigs.get(t);if(!n)return;const i=this.getPreviousSymbol(t)||n.symbol;i?await((r=this.dataFeed)==null?void 0:r.unsubscribeSymbol(i,Dy,t.id)):console.warn(`ChartDataProvider [${t.id}]: No symbol found for unsubscribe`)}};xe(K5,"instance");let $r=K5;function QU(e){const t=[{name:mr.CRYPTO,class:J5}];(e!=null?t.filter(r=>r.name.toLowerCase()!==e.toLowerCase()):t).forEach(r=>{r.class.checkAndCloseIfNoSubscriptions()})}function KU(){const e=$r.getInstance().getDataFeed();e&&(console.log("Closing websocket for ",e),e.closeWebsocket())}const Il=class Se{async getPrice(t,r){try{if(r!==void 0&&r!==mr.CRYPTO)return console.warn("BinanceDataFeed: getPrice only supports crypto symbols"),null;const n=`https://api.binance.com/api/v3/ticker/price?symbol=${t.symbol.toUpperCase()}`,i=await fetch(n);if(!i.ok)throw new Error(`Network response was not ok: ${i.statusText}`);const o=await i.json();if(!o.price)throw new Error("No price data in response");return parseFloat(o.price)}catch(n){return console.error("BinanceDataFeed: Failed to fetch price for",t.symbol,":",n),null}}async searchSymbols(t,r){try{if(r!==void 0&&r!==mr.CRYPTO)return[];(t===void 0||t==="")&&(t="BTCUSDT");const n=`https://api.binance.com/api/v3/exchangeInfo?symbol=${t.toUpperCase()}`,i=await fetch(n);if(console.log("response",i),!i.ok)throw new Error(`Network response was not ok: ${i.statusText}`);const o=await i.json();if(console.log("result",o),!o.symbols||!Array.isArray(o.symbols))throw new Error("Invalid response format: 'symbols' not found or not an array.");return console.log(o.symbols),(o.symbols!=null?o.symbols:[]).map(s=>({symbol:s.symbol,exchange:"binance",logo:"binance-logo.svg",type:mr.CRYPTO}))}catch(n){return console.error("Failed to fetch data from Binance API:",n),[]}}async getHistoricalTimeSeries(t,r,n,i,o){console.warn("Fetching historical time series for crypto");const s=1e3,u=Hc(mr.CRYPTO,r);let d=[],h=s,p,f=Math.ceil(s/1e3);try{for(;h>0&&f>0;){const m=Math.min(1e3,h),x=await JU(t.symbol,u,m,p).catch(b=>(console.error("Failed to fetch candle data:",b),[]));if(!x||x.length===0){console.warn("No data returned, stopping further requests");break}if(d=[...x,...d],h-=x.length,f--,p=x[0][0],d.length>=s)break}return d.length<s&&console.warn(`Requested ${s} data points, but only fetched ${d.length}`),d.slice(0,s).map(m=>({timestamp:m[0],open:parseFloat(m[1]),high:parseFloat(m[2]),low:parseFloat(m[3]),close:parseFloat(m[4]),volume:parseFloat(m[5])}))}catch(m){return console.error("An error occurred during data fetching:",m),[]}}async subscribeSymbol(t,r,n,i){var o;if((t==null?void 0:t.symbol)==null){console.warn("Invalid symbol: Symbol must have a valid symbol.");return}if(r==null){console.warn("Invalid period: Period cannot be null or undefined.");return}if(i==null){console.warn("Invalid subscriberUID: subscriberUID cannot be null or undefined.");return}try{QU(mr.CRYPTO),((o=Se._ws)==null?void 0:o.readyState)!==WebSocket.OPEN?await this.createWebSocket(t,r,i):(console.log("WebSocket is already connected, proceeding to subscribe"),await this.subscribe(t,r,i)),this.addListener(t,r,n,i)}catch(s){console.error("Failed to subscribe to symbol: ",s)}}subscribeAllTickers(t,r,n,i=500,o){const s=async u=>{await new Promise(d=>setTimeout(d,u))};t.length!==0&&this.subscribeSymbol(t[0],r,n,o).then(async()=>{console.log(`Subscribed to symbol: ${t[0].symbol}`),console.log("Applying initial delay of 3 seconds"),await s(3e3);for(let u=1;u<t.length;u++)setTimeout(()=>{this.subscribeSymbol(t[u],r,n,o).then(()=>{console.log(`Subscribed to symbol: ${t[u].symbol}`)})},(u-1)*i)})}async getOrderBook(t,r){try{if(r!==void 0&&r!==mr.CRYPTO)return console.warn("BinanceDataFeed: getOrderBook only supports crypto symbols"),null;const n=`https://api.binance.com/api/v3/depth?symbol=${t.symbol.toUpperCase()}&limit=20`,i=await fetch(n);if(!i.ok)throw new Error(`Network response was not ok: ${i.statusText}`);const o=await i.json();if(!o.bids||!o.asks)throw new Error("No order book data in response");return{bids:o.bids,asks:o.asks,timestamp:Date.now()}}catch(n){return console.error("BinanceDataFeed: Failed to fetch order book for",t.symbol,":",n),null}}unsubscribeSymbol(t,r,n){!this.validateTickerPeriodUuid(t,r,n)||n==null||this.removeListener(t.symbol,r,n)&&this.unSubscribeToSymbol(t.symbol,r)}unsubscribeAllTickers(t,r,n,i){console.log("Unsubscribing all tickers"),t.forEach((o,s)=>{!this.validateTickerPeriodUuid(o,r,i)||i==null||setTimeout(()=>{console.log("Subscribed Symbols Before",Se._subscribedSymbolListenersMap.size),this.removeListener(o.symbol,r,i)&&this.unSubscribeToSymbol(o.symbol,r),Se.checkAndCloseIfNoSubscriptions()},s*n)})}closeWebsocket(){Se.closeWebsocket()}static closeWebsocket(){var t;console.warn("Closing websocket connection"),(t=Se._ws)==null||t.close(),Se._ws=void 0,Se._subscribedSymbolListenersMap.clear(),Se._subscribedSymbolsMap.clear(),Se._domListenersMap.clear(),Se._domSubscriptionsMap.clear(),Se._tradeListenersMap.clear(),Se._tradeSubscriptionsMap.clear()}async createWebSocket(t,r,n){var i,o;if(!(((i=Se._ws)==null?void 0:i.readyState)===WebSocket.OPEN||((o=Se._ws)==null?void 0:o.readyState)===WebSocket.CONNECTING)){console.warn("Creating new ws connection"),Se._ws=new WebSocket("wss://stream.binance.com:9443/ws");try{await this.waitForWebSocketToOpen(Se._ws),console.log("WebSocket connection established"),await this.subscribe(t,r,n)}catch(s){console.warn("Failed to establish Binance websocket connection: ",s)}}}async subscribe(t,r,n){var i,o,s,u;Se._ws==null&&await this.createWebSocket(t,r,n);const d=`${t.symbol.toLowerCase()}_${r.text}`;if(Se._subscribedSymbolsMap.set(d,(Se._subscribedSymbolsMap.get(d)??0)+1),console.log("Subscribed ",d," count: ",Se._subscribedSymbolsMap.get(d)),console.log("=== Active Subscriptions After Backend Subscribe ==="),this.debugChannels(),console.log("=== End Active Subscriptions ==="),Se._subscribedSymbolsMap.get(d)>1){console.log("No need to re-subscribe as we are already subscribed for ticker: ",t);return}try{const h=t.symbol.toLowerCase(),p=Hc(mr.CRYPTO,r),f=JSON.stringify({method:"SUBSCRIBE",params:[`${h}@kline_${p}`],id:1});((i=Se._ws)==null?void 0:i.readyState)===WebSocket.OPEN?(console.log("WebSocket is open, sending subscription message"),(o=Se._ws)==null||o.send(f)):((s=Se._ws)==null?void 0:s.readyState)===WebSocket.CONNECTING?(console.log("WebSocket is still connecting, waiting for connection to be established"),await this.waitForWebSocketToOpen(Se._ws),(u=Se._ws)==null||u.send(f)):await this.createWebSocket(t,r,n),console.log(`Subscribed to ${h}@kline_${p}`)}catch(h){console.error("Failed to subscribe to symbol: ",h),Se._subscribedSymbolsMap.set(d,(Se._subscribedSymbolsMap.get(d)??0)-1)}}getActiveSubscriptions(){return Se._subscribedSymbolListenersMap.size+Se._domListenersMap.size+Se._tradeListenersMap.size}subscribeTradeData(t,r,n){if(!(t!=null&&t.symbol)){console.warn("Invalid ticker for trade subscription");return}if(!n){console.warn("Invalid uuid for trade subscription");return}try{this.subscribeToTradeSymbol(t,n),this.addTradeListener(t,r,n)}catch(i){console.error("Failed to subscribe to trade data:",i)}}unsubscribeTradeData(t,r){if(!(t!=null&&t.symbol)||!r){console.warn("Invalid ticker or uuid for trade unsubscription");return}try{this.removeTradeListener(t.symbol,r)&&this.unsubscribeFromTradeSymbol(t.symbol)}catch(n){console.error("Failed to unsubscribe from trade data:",n)}}unSubscribeToSymbol(t,r){var n;const i=`${t.toLowerCase()}_${r.text}`;if(Se._subscribedSymbolsMap.set(i,(Se._subscribedSymbolsMap.get(i)??1)-1),console.log("Unsubscribed ",i," count: ",Se._subscribedSymbolsMap.get(i)),Se._subscribedSymbolsMap.get(i)>=1){console.log("No need to un-subscribe as another chart is using this interval");return}const o=t.toLowerCase(),s=Hc(mr.CRYPTO,r),u=JSON.stringify({method:"UNSUBSCRIBE",params:[`${o}@kline_${s}`],id:2});(n=Se._ws)==null||n.send(u),Se._subscribedSymbolsMap.delete(i),console.log(`Un subscribed to ${o}@kline_${s}`)}static checkAndCloseIfNoSubscriptions(){Se._subscribedSymbolListenersMap.size===0&&Se._domListenersMap.size===0&&Se._tradeListenersMap.size===0&&Se._ws!==void 0&&(console.log("Closing Binance websocket connection"),Se.closeWebsocket())}addListener(t,r,n,i){const o=`${t.symbol.toLowerCase()}_${r.text}_${i}`,s=u=>{const d=JSON.parse(u.data),h=d==null?void 0:d.k,p=Hc(mr.CRYPTO,r);if(h!=null&&h.s.toLowerCase()===t.symbol.toLowerCase()&&h.i===p){const f=d.k;n({timestamp:f.t,open:parseFloat(f.o),high:parseFloat(f.h),low:parseFloat(f.l),close:parseFloat(f.c),volume:parseFloat(f.v),turnover:parseFloat(f.q)},t)}};Se._ws.addEventListener("message",s),Se._subscribedSymbolListenersMap.set(o,s),console.log("Adding Listener for: ",o," count: ",Se._subscribedSymbolListenersMap.size),console.log("=== Active Subscriptions After Adding Listener ==="),this.debugChannels(),console.log("=== End Active Subscriptions ===")}removeListener(t,r,n){const i=`${t.toLowerCase()}_${r.text}_${n}`,o=Se._subscribedSymbolListenersMap.get(i);return o!=null?(console.log("Removing Listener for: ",i),Se._ws.removeEventListener("message",o),Se._subscribedSymbolListenersMap.delete(i),console.log("=== Active Subscriptions After Removing Listener ==="),this.debugChannels(),console.log("=== End Active Subscriptions ==="),!0):!1}async waitForWebSocketToOpen(t){await new Promise((r,n)=>{t.readyState===WebSocket.OPEN?(console.log("WebSocket is open"),r()):(t.onopen=()=>{console.log("WebSocket connection opened"),r()},t.onerror=i=>{n(i),console.error("Binance WebSocket error: ",i)})})}validateTickerPeriodUuid(t,r,n){switch(!0){case(t==null?void 0:t.symbol)==null:return console.warn("Invalid symbol: Symbol must have a valid ticker."),!1;case r==null:return console.warn("Invalid period: Period cannot be null or undefined."),!1;case n==null:console.warn("Invalid subscriberUID: Uuid cannot be null");default:return!0}}clearAllListeners(){console.log("BinanceDataFeed: Clearing all listeners"),Se._subscribedSymbolListenersMap.clear(),Se._subscribedSymbolsMap.clear(),Se._domListenersMap.clear(),Se._domSubscriptionsMap.clear(),Se._tradeListenersMap.clear(),Se._tradeSubscriptionsMap.clear()}unsubscribeAllForChart(t){console.log(`BinanceDataFeed: unsubscribeAllForChart called for chart ${t}`);const r=[];for(const[o,s]of Se._subscribedSymbolListenersMap.entries())o.endsWith(`_${t}`)&&r.push(o);for(const o of r){const s=o.split("_");if(s.length>=3){const u=s[0],d=s[1],h=s[2],p={text:d,multiplier:parseInt(d)||1,timespan:d.includes("m")?"minute":d.includes("h")?"hour":d.includes("d")?"day":"minute"};this.removeListener(u,p,h)&&this.unSubscribeToSymbol(u,p),console.log(`BinanceDataFeed: Properly cleaned up ticker subscription ${o}`)}else Se._subscribedSymbolListenersMap.delete(o),console.log(`BinanceDataFeed: Removed subscription ${o} (fallback cleanup)`)}const n=[];for(const[o,s]of Se._domListenersMap.entries())o.endsWith(`_${t}`)&&n.push(o);for(const o of n){const s=o.split("_");if(s.length>=3){const u=s[0];this.removeDOMListener(u,t)&&this.unsubscribeFromDOMSymbol(u),console.log(`BinanceDataFeed: Properly cleaned up DOM subscription ${o}`)}else Se._domListenersMap.delete(o),console.log(`BinanceDataFeed: Removed DOM subscription ${o} (fallback cleanup)`)}const i=[];for(const[o,s]of Se._tradeListenersMap.entries())o.endsWith(`_${t}`)&&i.push(o);for(const o of i){const s=o.split("_");if(s.length>=3){const u=s[0];this.removeTradeListener(u,t)&&this.unsubscribeFromTradeSymbol(u),console.log(`BinanceDataFeed: Properly cleaned up trade subscription ${o}`)}else Se._tradeListenersMap.delete(o),console.log(`BinanceDataFeed: Removed trade subscription ${o} (fallback cleanup)`)}Se.checkAndCloseIfNoSubscriptions(),console.log(`BinanceDataFeed: Cleaned up ${r.length} ticker subscriptions, ${n.length} DOM subscriptions, and ${i.length} trade subscriptions for chart ${t}`),this.debugChannels()}debugChannels(){var t,r,n;console.log("=== BinanceDataFeed Debug: Active Subscriptions ==="),console.log(`WebSocket Status: ${((t=Se._ws)==null?void 0:t.readyState)===WebSocket.OPEN?"OPEN":((r=Se._ws)==null?void 0:r.readyState)===WebSocket.CONNECTING?"CONNECTING":((n=Se._ws)==null?void 0:n.readyState)===WebSocket.CLOSED?"CLOSED":"UNDEFINED"}`),console.log("Ticker Subscriptions (Backend):");for(const[i,o]of Se._subscribedSymbolsMap.entries())console.log(`  ${i}: ${o} backend subscriptions`);console.log("Ticker Listeners (Frontend):");for(const[i,o]of Se._subscribedSymbolListenersMap.entries())console.log(`  ${i}: listener registered`);console.log("DOM Subscriptions (Backend):");for(const[i,o]of Se._domSubscriptionsMap.entries())console.log(`  ${i}: ${o} backend subscriptions`);console.log("DOM Listeners (Frontend):");for(const[i,o]of Se._domListenersMap.entries())console.log(`  ${i}: listener registered`);console.log("Trade Subscriptions (Backend):");for(const[i,o]of Se._tradeSubscriptionsMap.entries())console.log(`  ${i}: ${o} backend subscriptions`);console.log("Trade Listeners (Frontend):");for(const[i,o]of Se._tradeListenersMap.entries())console.log(`  ${i}: listener registered`);console.log(`Total Active Listeners: ${this.getActiveSubscriptions()}`),console.log("=== End Debug ===")}subscribeOrderBookData(t,r,n){if(!(t!=null&&t.symbol)){console.warn("Invalid ticker for DOM subscription");return}if(!n){console.warn("Invalid uuid for DOM subscription");return}try{this.subscribeToDOMSymbol(t,n),this.addDOMListener(t,r,n)}catch(i){console.error("Failed to subscribe to DOM data:",i)}}unsubscribeOrderBookData(t,r){if(!(t!=null&&t.symbol)||!r){console.warn("Invalid ticker or uuid for DOM unsubscription");return}try{this.removeDOMListener(t.symbol,r)&&this.unsubscribeFromDOMSymbol(t.symbol)}catch(n){console.error("Failed to unsubscribe from DOM data:",n)}}async subscribeToDOMSymbol(t,r){var n,i,o,s,u,d;if(((n=Se._ws)==null?void 0:n.readyState)!==WebSocket.OPEN&&((i=Se._ws)==null?void 0:i.readyState)!==WebSocket.CONNECTING){console.warn("Creating new ws connection for DOM"),Se._ws=new WebSocket("wss://stream.binance.com:9443/ws");try{await this.waitForWebSocketToOpen(Se._ws),console.log("WebSocket connection established for DOM")}catch(p){console.warn("Failed to establish Binance websocket connection for DOM: ",p);return}}const h=`${t.symbol.toLowerCase()}_dom`;if(Se._domSubscriptionsMap.set(h,(Se._domSubscriptionsMap.get(h)??0)+1),console.log("DOM Subscribed ",h," count: ",Se._domSubscriptionsMap.get(h)),Se._domSubscriptionsMap.get(h)>1){console.log("No need to re-subscribe to DOM as we are already subscribed for symbol: ",t);return}try{const p=t.symbol.toLowerCase(),f=JSON.stringify({method:"SUBSCRIBE",params:[`${p}@depth20@1000ms`],id:Date.now()});((o=Se._ws)==null?void 0:o.readyState)===WebSocket.OPEN?(console.log("WebSocket is open, sending DOM subscription message:",f),(s=Se._ws)==null||s.send(f)):((u=Se._ws)==null?void 0:u.readyState)===WebSocket.CONNECTING&&(console.log("WebSocket is still connecting, waiting for connection to be established for DOM"),await this.waitForWebSocketToOpen(Se._ws),(d=Se._ws)==null||d.send(f)),console.log(`Subscribed to DOM for ${p}@depth20@1000ms`)}catch(p){console.error("Failed to subscribe to DOM symbol: ",p),Se._domSubscriptionsMap.set(h,(Se._domSubscriptionsMap.get(h)??0)-1)}}unsubscribeFromDOMSymbol(t){var r;const n=`${t.toLowerCase()}_dom`;if(Se._domSubscriptionsMap.set(n,(Se._domSubscriptionsMap.get(n)??1)-1),console.log("DOM Unsubscribed ",n," count: ",Se._domSubscriptionsMap.get(n)),Se._domSubscriptionsMap.get(n)>=1){console.log("No need to un-subscribe from DOM as another component is using this symbol");return}const i=t.toLowerCase(),o=JSON.stringify({method:"UNSUBSCRIBE",params:[`${i}@depth20@1000ms`],id:Date.now()});(r=Se._ws)==null||r.send(o),Se._domSubscriptionsMap.delete(n),console.log(`Un subscribed from DOM for ${i}@depth20@1000ms`)}addDOMListener(t,r,n){const i=`${t.symbol.toLowerCase()}_dom_${n}`,o=s=>{try{const u=JSON.parse(s.data);if(u.stream&&u.stream.includes(t.symbol.toLowerCase()),u.stream&&u.stream.includes("@depth20@")){const d=u.data,h={bids:d.bids||[],asks:d.asks||[],timestamp:d.lastUpdateId||Date.now()};r(h,t)}else if(u.e==="depthUpdate"&&u.s&&u.s.toLowerCase()===t.symbol.toLowerCase()){const d=u,h={bids:d.b||[],asks:d.a||[],timestamp:d.E};r(h,t)}else if(u.bids&&u.asks&&!u.e){const d={bids:u.bids||[],asks:u.asks||[],timestamp:Date.now()};r(d,t)}}catch(u){console.error("Error parsing DOM data:",u)}};Se._ws.addEventListener("message",o),Se._domListenersMap.set(i,o),console.log("Adding DOM Listener for: ",i," count: ",Se._domListenersMap.size)}removeDOMListener(t,r){const n=`${t.toLowerCase()}_dom_${r}`,i=Se._domListenersMap.get(n);return i!=null?(console.log("Removing DOM Listener for: ",n),Se._ws.removeEventListener("message",i),Se._domListenersMap.delete(n),!0):!1}async subscribeToTradeSymbol(t,r){var n,i,o,s,u,d;if(((n=Se._ws)==null?void 0:n.readyState)!==WebSocket.OPEN&&((i=Se._ws)==null?void 0:i.readyState)!==WebSocket.CONNECTING){console.warn("Creating new ws connection for trades"),Se._ws=new WebSocket("wss://stream.binance.com:9443/ws");try{await this.waitForWebSocketToOpen(Se._ws),console.log("WebSocket connection established for trades")}catch(p){console.warn("Failed to establish Binance websocket connection for trades: ",p);return}}const h=`${t.symbol.toLowerCase()}_trades`;if(Se._tradeSubscriptionsMap.set(h,(Se._tradeSubscriptionsMap.get(h)??0)+1),console.log("Trade Subscribed ",h," count: ",Se._tradeSubscriptionsMap.get(h)),Se._tradeSubscriptionsMap.get(h)>1){console.log("No need to re-subscribe to trades as we are already subscribed for symbol: ",t);return}try{const p=t.symbol.toLowerCase(),f=JSON.stringify({method:"SUBSCRIBE",params:[`${p}@trade`],id:Date.now()});((o=Se._ws)==null?void 0:o.readyState)===WebSocket.OPEN?(console.log("WebSocket is open, sending trade subscription message:",f),(s=Se._ws)==null||s.send(f)):((u=Se._ws)==null?void 0:u.readyState)===WebSocket.CONNECTING&&(console.log("WebSocket is still connecting, waiting for connection to be established for trades"),await this.waitForWebSocketToOpen(Se._ws),(d=Se._ws)==null||d.send(f)),console.log(`Subscribed to trades for ${p}@trade`)}catch(p){console.error("Failed to subscribe to trade symbol: ",p),Se._tradeSubscriptionsMap.set(h,(Se._tradeSubscriptionsMap.get(h)??0)-1)}}unsubscribeFromTradeSymbol(t){var r;const n=`${t.toLowerCase()}_trades`;if(Se._tradeSubscriptionsMap.set(n,(Se._tradeSubscriptionsMap.get(n)??1)-1),console.log("Trade Unsubscribed ",n," count: ",Se._tradeSubscriptionsMap.get(n)),Se._tradeSubscriptionsMap.get(n)>=1){console.log("No need to un-subscribe from trades as another component is using this symbol");return}const i=t.toLowerCase(),o=JSON.stringify({method:"UNSUBSCRIBE",params:[`${i}@trade`],id:Date.now()});(r=Se._ws)==null||r.send(o),Se._tradeSubscriptionsMap.delete(n),console.log(`Un subscribed from trades for ${i}@trade`)}addTradeListener(t,r,n){const i=`${t.symbol.toLowerCase()}_trades_${n}`,o=s=>{try{const u=JSON.parse(s.data);if(u.e==="trade"&&u.s&&u.s.toLowerCase()===t.symbol.toLowerCase()){console.log("Trade: Processing trade data for",u.s);const d=u,h={trades:[{id:String(d.t),price:d.p,quantity:d.q,timestamp:d.T,side:d.m?"sell":"buy"}],symbol:t.symbol,exchange:t.exchange||"binance",lastUpdated:d.T};console.log("Trade: Calling callback with trade data:",h),r(h,t)}}catch(u){console.error("Error parsing trade data:",u)}};Se._ws.addEventListener("message",o),Se._tradeListenersMap.set(i,o),console.log("Adding Trade Listener for: ",i," count: ",Se._tradeListenersMap.size)}removeTradeListener(t,r){const n=`${t.toLowerCase()}_trades_${r}`,i=Se._tradeListenersMap.get(n);return i!=null?(console.log("Removing Trade Listener for: ",n),Se._ws.removeEventListener("message",i),Se._tradeListenersMap.delete(n),!0):!1}};xe(Il,"_ws"),xe(Il,"_subscribedSymbolListenersMap",new Map),xe(Il,"_subscribedSymbolsMap",new Map),xe(Il,"_domListenersMap",new Map),xe(Il,"_domSubscriptionsMap",new Map),xe(Il,"_tradeListenersMap",new Map),xe(Il,"_tradeSubscriptionsMap",new Map);let J5=Il;async function JU(e,t,r,n){let i=`https://api.binance.com/api/v3/klines?symbol=${e}&interval=${t}&limit=${r}`;return n!=null&&(i+=`&endTime=${n}`),await(await fetch(i)).json()}const Td={baseUrl:"http://localhost:3000",endpoints:{search:"",historical:"",websocket:"",orderBook:"",price:""},headers:{"Content-Type":"application/json"},websocket:{enabled:!0,reconnectInterval:5e3,maxReconnectAttempts:3}};class eH{constructor(t){xe(this,"config"),xe(this,"websocket",null),xe(this,"reconnectAttempts",0),xe(this,"clientId"),xe(this,"channelSubscriptions",new Map),xe(this,"subscriberCallbacks",new Map),xe(this,"orderBookCallbacks",new Map),xe(this,"pendingOrderBookSubscriptions",new Set),xe(this,"tradeCallbacks",new Map),xe(this,"pendingTradeSubscriptions",new Set);var r,n,i,o,s,u;this.config={...Td,...t,endpoints:{...Td.endpoints,...t==null?void 0:t.endpoints},headers:{...Td.headers,...t==null?void 0:t.headers},websocket:{enabled:((r=t==null?void 0:t.websocket)==null?void 0:r.enabled)??((n=Td.websocket)==null?void 0:n.enabled)??!0,reconnectInterval:((i=t==null?void 0:t.websocket)==null?void 0:i.reconnectInterval)??((o=Td.websocket)==null?void 0:o.reconnectInterval)??5e3,maxReconnectAttempts:((s=t==null?void 0:t.websocket)==null?void 0:s.maxReconnectAttempts)??((u=Td.websocket)==null?void 0:u.maxReconnectAttempts)??3}},this.clientId=this.generateClientId()}generateClientId(){const t=Date.now(),r=Math.random().toString(36).substr(2,9);return`client_${t}_${r}`}async searchSymbols(t,r){(!t||t==="")&&(t=r===mr.CRYPTO?"BTC":"AAPL");const n=this.getTypeIdentifier(r),i=`${this.config.baseUrl}/${this.config.endpoints.search}/${n}?symbol=${encodeURIComponent(t)}`;try{console.log(`UnifiedDataFeed: Searching for ${t} in market-data/${n}`);const o=await fetch(i,{method:"GET",headers:this.config.headers});if(!o.ok)return console.error(`UnifiedDataFeed: Search request failed with status ${o.status}`),[];const s=await o.json();return!(s!=null&&s.data)||!Array.isArray(s.data)?(console.warn("UnifiedDataFeed: No data received from search API"),[]):(console.log(`UnifiedDataFeed: Found ${s.data.length} results for ${t}`),s.data.map(u=>this.transformSearchResult(u,r)))}catch(o){return console.error("UnifiedDataFeed: Error fetching search data:",o),[]}}async getHistoricalTimeSeries(t,r,n,i,o){console.warn("UnifiedDataFeed: getHistoricalTimeSeries called");const s=t.type,u=this.getTypeIdentifier(s),d=Hc(s,r);console.log("tickerType",s,"mapped to",u);const h=`${this.config.baseUrl}/${this.config.endpoints.historical}/${u}?symbol=${encodeURIComponent(t.symbol)}&interval=${encodeURIComponent(d)}&from=${n}&to=${i}`;console.log("UnifiedDataFeed: Fetching historical data for ",h);try{console.log(`UnifiedDataFeed: Fetching historical data for ${t.symbol} (market-data/${s})`);const p=await fetch(h,{method:"GET",headers:this.config.headers});if(!p.ok)return console.error(`UnifiedDataFeed: Historical data request failed with status ${p.status}`),[];const f=await p.json();return!(f!=null&&f.values)||!Array.isArray(f.values)?(console.warn("UnifiedDataFeed: No historical data received"),[]):f.values.map(m=>this.transformHistoricalData(m))}catch(p){return console.error("UnifiedDataFeed: Error fetching historical data:",p),[]}}async getPrice(t,r){console.warn("UnifiedDataFeed: getPrice called");const n=r||t.type,i=this.getTypeIdentifier(n),o=this.config.endpoints.price||"price",s=`${this.config.baseUrl}/${o}/${i}?symbol=${encodeURIComponent(t.symbol)}`;try{console.log(`UnifiedDataFeed: Fetching current price for ${t.symbol} on ${t.exchange||"default"} (market-data/${i})`);const u=await fetch(s,{method:"GET",headers:this.config.headers});if(!u.ok)return console.error(`UnifiedDataFeed: Price request failed with status ${u.status}`),null;const d=await u.json();if(typeof d=="number")return d;if((d==null?void 0:d.price)!==void 0)return Number(d.price);if((d==null?void 0:d.close)!==void 0)return Number(d.close);if(d!=null&&d.values&&Array.isArray(d.values)&&d.values.length>0){const h=d.values[d.values.length-1];return Number(h.close||h.c)}return console.warn("UnifiedDataFeed: No price data found in response"),null}catch(u){return console.error("UnifiedDataFeed: Error fetching price data:",u),null}}async getOrderBook(t,r){console.warn("UnifiedDataFeed: getOrderBook called");const n=r||t.type,i=this.getTypeIdentifier(n),o=`${this.config.baseUrl}${this.config.endpoints.orderBook}/${i}?symbol=${encodeURIComponent(t.symbol)}`;try{console.log(`UnifiedDataFeed: Fetching order book for ${t.symbol} (market-data/${i})`);const s=await fetch(o,{method:"GET",headers:this.config.headers});if(!s.ok)return console.error(`UnifiedDataFeed: Order book request failed with status ${s.status}`),null;const u=await s.json();return!(u!=null&&u.bids)||!(u!=null&&u.asks)?(console.warn("UnifiedDataFeed: No order book data received"),null):(console.log(`UnifiedDataFeed: Received order book data for ${t.symbol}`),{bids:u.bids,asks:u.asks,timestamp:u.timestamp})}catch(s){return console.error("UnifiedDataFeed: Error fetching order book data:",s),null}}subscribeSymbol(t,r,n,i){console.warn("UnifiedDataFeed: subscribeTicker called (channel-based)");const o=(t.exchange||"default").toLowerCase(),s=`${t.symbol}_${o}_${r.multiplier}${r.timespan}`,u=i||`${t.symbol}_${Date.now()}`;console.log(`UnifiedDataFeed: Subscribing to channel ${s} with handler ${u}`),this.subscriberCallbacks.set(u,n);let d=this.channelSubscriptions.get(s);if(d){if(d.handlers.find(h=>h.id===u)){console.warn(`UnifiedDataFeed: Handler ${u} already exists in channel ${s}, skipping duplicate`);return}d.handlers.push({id:u,callback:n}),console.log(`UnifiedDataFeed: Added handler ${u} to existing channel ${s}`),console.log(`UnifiedDataFeed: Channel ${s} now has ${d.handlers.length} handlers:`,d.handlers.map(h=>h.id))}else d={symbol:t.symbol,period:r,ticker:{...t},handlers:[{id:u,callback:n}]},this.channelSubscriptions.set(s,d),this.createBackendSubscription(t,r,s),console.log(`UnifiedDataFeed: Created new channel ${s} with handler ${u}`);this.debugChannels()}unsubscribeSymbol(t,r,n){console.warn("UnifiedDataFeed: unsubscribeTicker called (channel-based)");const i=(t.exchange||"default").toLowerCase(),o=`${t.symbol}_${i}_${r.multiplier}${r.timespan}`,s=n||`${t.symbol}_${Date.now()}`;console.log(`UnifiedDataFeed: Unsubscribing handler ${s} from channel ${o}`),this.subscriberCallbacks.delete(s);const u=this.channelSubscriptions.get(o);if(!u){console.warn(`UnifiedDataFeed: Channel ${o} not found for unsubscription`);return}console.log(`UnifiedDataFeed: Channel ${o} has ${u.handlers.length} handlers before removal:`,u.handlers.map(h=>h.id));const d=u.handlers.findIndex(h=>h.id===s);d!==-1?(u.handlers.splice(d,1),console.log(`UnifiedDataFeed: Removed handler ${s} from channel ${o}`)):console.warn(`UnifiedDataFeed: Handler ${s} not found in channel ${o}`),console.log(`UnifiedDataFeed: Channel ${o} has ${u.handlers.length} handlers after removal:`,u.handlers.map(h=>h.id)),u.handlers.length===0&&(console.log(`UnifiedDataFeed: No more handlers for channel ${o}, removing backend subscription`),this.removeBackendSubscription(u.backendSubscriptionId,t,r),this.channelSubscriptions.delete(o)),this.debugChannels()}unsubscribeAllForChart(t){console.log(`UnifiedDataFeed: unsubscribeAllForChart called for chart ${t}`);let r=0;const n=[];for(const[i,o]of this.channelSubscriptions.entries()){const s=o.handlers.findIndex(u=>u.id===t);s!==-1&&(console.log(`UnifiedDataFeed: Found chart ${t} in channel ${i}`),o.handlers.splice(s,1),r++,o.handlers.length===0?(console.log(`UnifiedDataFeed: Channel ${i} has no more handlers, marking for removal`),n.push(i)):console.log(`UnifiedDataFeed: Channel ${i} still has ${o.handlers.length} handlers:`,o.handlers.map(u=>u.id)))}for(const i of n){const o=this.channelSubscriptions.get(i);if(o){console.log(`UnifiedDataFeed: Removing backend subscription for channel ${i}`);const s=i.split("_");if(s.length>=3){const u=s[0],d=s[1];s.slice(2).join("_");const h={symbol:u,exchange:d,type:mr.CRYPTO},p={multiplier:1,timespan:"minute",text:"1m"};this.removeBackendSubscription(o.backendSubscriptionId,h,p)}this.channelSubscriptions.delete(i)}}console.log(`UnifiedDataFeed: Removed chart ${t} from ${r} channels, cleaned up ${n.length} empty channels`),this.debugChannels()}subscribeOrderBookData(t,r,n){var i;if(console.warn("UnifiedDataFeed: subscribeOrderBookData called"),!((i=this.config.websocket)!=null&&i.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping order book subscription for:",t.symbol);return}const o=t.type,s=(t.exchange||"default").toLowerCase(),u=`${t.symbol}_${s}_orderbook`,d=`${t.symbol}_orderbook_${n}`;if(console.log(`UnifiedDataFeed: Subscribing to order book for ${t.symbol}`),this.pendingOrderBookSubscriptions.has(d)){console.log("UnifiedDataFeed: Order book subscription already pending, skipping duplicate");return}this.orderBookCallbacks.set(d,r);const h={event:"subscribe",data:{type:this.getTypeIdentifier(o),symbol:t.symbol,dataType:"orderbook",subscriptionId:u,uuid:n,exchange:s,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending order book subscription message:",h),this.sendWebSocketMessage(h)||(console.error("UnifiedDataFeed: WebSocket not available for order book, retrying in 1 second"),this.pendingOrderBookSubscriptions.add(d),setTimeout(()=>{console.log("UnifiedDataFeed: Retrying order book subscription after delay"),this.pendingOrderBookSubscriptions.delete(d),this.subscribeOrderBookData(t,r,n)},1e3))}unsubscribeOrderBookData(t,r){var n;if(console.warn("UnifiedDataFeed: unsubscribeOrderBookData called"),!((n=this.config.websocket)!=null&&n.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping order book unsubscription for:",t.symbol);return}const i=t.type,o=(t.exchange||"default").toLowerCase(),s=`${t.symbol}_${o}_orderbook`,u=`${t.symbol}_orderbook_${r}`;console.log(`UnifiedDataFeed: Unsubscribing from order book for ${t.symbol}`),this.orderBookCallbacks.delete(u);const d={event:"unsubscribe",data:{subscriptionId:s,type:this.getTypeIdentifier(i),symbol:t.symbol,dataType:"orderbook",uuid:r,exchange:o,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending order book unsubscription message:",d),this.sendWebSocketMessage(d)}subscribeTradeData(t,r,n){var i;if(console.warn("UnifiedDataFeed: subscribeTradeData called"),!((i=this.config.websocket)!=null&&i.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping trade subscription for:",t.symbol);return}const o=t.type,s=(t.exchange||"default").toLowerCase(),u=`${t.symbol}_${s}_trades`,d=`${t.symbol}_trades_${n}`;if(console.log(`UnifiedDataFeed: Subscribing to trades for ${t.symbol}`),this.pendingTradeSubscriptions.has(d)){console.log("UnifiedDataFeed: Trade subscription already pending, skipping duplicate");return}this.tradeCallbacks.set(d,r);const h={event:"subscribe",data:{type:this.getTypeIdentifier(o),symbol:t.symbol,dataType:"trades",subscriptionId:u,uuid:n,exchange:s,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending trade subscription message:",h),this.sendWebSocketMessage(h)||(console.error("UnifiedDataFeed: WebSocket not available for trades, retrying in 1 second"),this.pendingTradeSubscriptions.add(d),setTimeout(()=>{console.log("UnifiedDataFeed: Retrying trade subscription after delay"),this.pendingTradeSubscriptions.delete(d),this.subscribeTradeData(t,r,n)},1e3))}unsubscribeTradeData(t,r){var n;if(console.warn("UnifiedDataFeed: unsubscribeTradeData called"),!((n=this.config.websocket)!=null&&n.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping trade unsubscription for:",t.symbol);return}const i=t.type,o=(t.exchange||"default").toLowerCase(),s=`${t.symbol}_${o}_trades`,u=`${t.symbol}_trades_${r}`;console.log(`UnifiedDataFeed: Unsubscribing from trades for ${t.symbol}`),this.tradeCallbacks.delete(u);const d={event:"unsubscribe",data:{subscriptionId:s,type:this.getTypeIdentifier(i),symbol:t.symbol,dataType:"trades",uuid:r,exchange:o,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending trade unsubscription message:",d),this.sendWebSocketMessage(d)}closeWebsocket(){console.warn("UnifiedDataFeed: closeWebsocket called"),console.log("UnifiedDataFeed: Closing WebSocket connection"),this.websocket&&((this.websocket.readyState===WebSocket.OPEN||this.websocket.readyState===WebSocket.CONNECTING)&&this.websocket.close(),this.websocket=null),this.reconnectAttempts=0,this.orderBookCallbacks.clear(),this.pendingOrderBookSubscriptions.clear(),this.tradeCallbacks.clear(),this.pendingTradeSubscriptions.clear(),this.channelSubscriptions.clear(),this.subscriberCallbacks.clear()}clearAllListeners(){console.warn("UnifiedDataFeed: clearAllListeners called"),console.log("UnifiedDataFeed: Clearing all listeners"),this.closeWebsocket()}debugChannels(){console.log("=== UnifiedDataFeed Debug: Active Channels ===");for(const[t,r]of this.channelSubscriptions.entries())console.log(`Channel: ${t}`),console.log(`  Handlers (${r.handlers.length}):`,r.handlers.map(n=>n.id)),console.log(`  Backend Subscription ID: ${r.backendSubscriptionId}`);console.log("=== End Debug ===")}getActiveSubscriptions(){return console.log("UnifiedDataFeed: Active subscriptions:",this.channelSubscriptions.size+this.orderBookCallbacks.size),this.channelSubscriptions.size+this.orderBookCallbacks.size}sendWebSocketMessage(t){const r=this.getOrCreateWebSocket();if(r&&r.readyState===WebSocket.OPEN)return r.send(JSON.stringify(t)),!0;if(r&&r.readyState===WebSocket.CONNECTING){const n=()=>{r.send(JSON.stringify(t)),r.removeEventListener("open",n)};return r.addEventListener("open",n),!0}return!1}getOrCreateWebSocket(){var t;if(!((t=this.config.websocket)!=null&&t.enabled))return null;if(!this.websocket||this.websocket.readyState===WebSocket.CLOSED||this.websocket.readyState===WebSocket.CLOSING)try{const r=`${this.config.baseUrl.replace("http","ws")}/${this.config.endpoints.websocket||"/websocket"}`;this.websocket=new WebSocket(r),this.websocket.onopen=()=>{this.reconnectAttempts=0},this.websocket.onmessage=n=>{this.handleWebSocketMessage(n)},this.websocket.onerror=n=>{console.error("UnifiedDataFeed: WebSocket error:",n)},this.websocket.onclose=n=>{console.warn("UnifiedDataFeed: WebSocket closed with code:",n.code,"reason:",n.reason),this.handleWebSocketReconnect()}}catch(r){return console.error("UnifiedDataFeed: Failed to create WebSocket:",r),null}return this.websocket}handleWebSocketMessage(t){try{const r=JSON.parse(t.data);if(r.event){const n=r;switch(n.event){case"subscribed":case"subscription_acknowledged":this.handleSubscriptionResponse(n);break;case"unsubscribed":case"unsubscription_acknowledged":this.handleUnsubscriptionResponse(n);break;case"subscription_error":case"unsubscription_error":case"error":this.handleErrorMessage(n);break;case"market_data":this.handleMarketDataMessage(n);break;case"connected":case"disconnected":this.handleConnectionMessage(n);break;case"pong":break;default:console.log("UnifiedDataFeed: Unknown event type:",n.event),this.handleMarketData(r)}}else this.handleMarketData(r)}catch(r){console.error("UnifiedDataFeed: Error parsing WebSocket message:",r)}}handleSubscriptionResponse(t){var r;console.log(`UnifiedDataFeed: ${t.event} for ${(r=t.data)==null?void 0:r.symbol}`)}handleUnsubscriptionResponse(t){var r;console.log(`UnifiedDataFeed: ${t.event} for ${(r=t.data)==null?void 0:r.symbol}`)}handleErrorMessage(t){var r;console.error(`UnifiedDataFeed: ${t.event}:`,(r=t.data)==null?void 0:r.error)}handleMarketDataMessage(t){this.handleMarketData(t.data)}handleConnectionMessage(t){console.log(`UnifiedDataFeed: ${t.event}`)}handleMarketData(t){if(!t)return;const r=t.type||"kline",n=t.exchange||"crypto",i=t.symbol,o=t.data||t;if(r==="kline"||o.e==="kline"&&o.k){const s=o.k||o,u=(i||s.s).toLowerCase(),d=n;for(const[h,p]of this.channelSubscriptions.entries()){const[f,m]=h.split("_");if(f.toLowerCase()===u&&(m===d||m==="default")){const x={timestamp:s.timestamp||s.t,open:parseFloat(s.open||s.o),high:parseFloat(s.high||s.h),low:parseFloat(s.low||s.l),close:parseFloat(s.close||s.c),volume:parseFloat(s.volume||s.v),turnover:parseFloat(s.turnover||s.q)};p.handlers.forEach(b=>{b.callback(x,p.ticker)})}}}else if(r==="orderbook"){const s=i.toLowerCase(),u={bids:o.bids||[],asks:o.asks||[],timestamp:o.timestamp||Date.now()};for(const[d,h]of this.orderBookCallbacks.entries()){const[p]=d.split("_");p.toLowerCase()===s&&h(u)}}else if(r==="trades"){const s=i.toLowerCase(),u=n;let d;o.trades&&Array.isArray(o.trades)?d=o.trades:d=[{id:o.tradeId||String(o.timestamp||Date.now()),price:String(o.price||0),quantity:String(o.quantity||0),timestamp:o.timestamp||Date.now(),side:o.side||"buy",tradeType:o.tradeType}];const h={trades:d,symbol:i,exchange:u,lastUpdated:o.timestamp||Date.now()};for(const[p,f]of this.tradeCallbacks.entries()){const[m]=p.split("_");m.toLowerCase()===s&&f(h)}}}handleWebSocketReconnect(){var t,r;const n=((t=this.config.websocket)==null?void 0:t.maxReconnectAttempts)||3;if(this.reconnectAttempts<n){const i=((r=this.config.websocket)==null?void 0:r.reconnectInterval)||5e3;setTimeout(()=>{console.log(`UnifiedDataFeed: Attempting to reconnect WebSocket (attempt ${this.reconnectAttempts+1})`),this.reconnectAttempts+=1,this.getOrCreateWebSocket()},i)}else console.error("UnifiedDataFeed: Max reconnection attempts reached, clearing pending subscriptions"),this.pendingOrderBookSubscriptions.clear()}getTypeIdentifier(t){switch(t){case mr.STOCKS:return"stocks";case mr.CRYPTO:return"crypto";case mr.FOREX:return"forex";case mr.FUTURES:return"futures";case"all":return"all";default:return"all"}}createBackendSubscription(t,r,n){var i;if(!((i=this.config.websocket)!=null&&i.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping backend subscription for channel:",n);return}const o=n,s={event:"subscribe",data:{type:this.getTypeIdentifier(t.type),symbol:t.symbol,dataType:"kline",interval:Hc(t.type,r),subscriptionId:o,exchange:(t.exchange||"default").toLowerCase(),clientId:this.clientId}};if(console.log("UnifiedDataFeed: Sending backend subscription:",s),this.sendWebSocketMessage(s)){const u=this.channelSubscriptions.get(n);u&&(u.backendSubscriptionId=o)}else console.error("UnifiedDataFeed: WebSocket not available for backend subscription, retrying in 1 second"),setTimeout(()=>{console.log("UnifiedDataFeed: Retrying backend subscription after delay"),this.createBackendSubscription(t,r,n)},1e3)}removeBackendSubscription(t,r,n){if(!t)return;const i=(r.exchange||"default").toLowerCase(),o={event:"unsubscribe",data:{subscriptionId:t,type:this.getTypeIdentifier(r.type),symbol:r.symbol,dataType:"kline",interval:Hc(r.type,n),exchange:i,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending backend unsubscription:",o),this.sendWebSocketMessage(o)}transformSearchResult(t,r){const n=t.type||r;return{symbol:t.symbol,name:t.name,shortName:t.shortName||t.symbol,exchange:t.exchange,market:t.market||this.getMarketFromType(n),type:n||"UNKNOWN",pricePrecision:t.pricePrecision||this.getDefaultPrecision(n,"price"),volumePrecision:t.volumePrecision||this.getDefaultPrecision(n,"volume"),priceCurrency:t.priceCurrency,logo:t.logo}}transformHistoricalData(t){return{timestamp:new Date(t.datetime||t.timestamp).getTime(),open:parseFloat(t.open),high:parseFloat(t.high),low:parseFloat(t.low),close:parseFloat(t.close),volume:parseFloat(t.volume||0)}}getMarketFromType(t){switch(t){case mr.STOCKS:return"Stock";case mr.CRYPTO:return"Cryptocurrency";case mr.FOREX:return"Foreign Exchange";case mr.FUTURES:return"Futures";default:return"Unknown"}}getDefaultPrecision(t,r){if(r==="volume")return 0;switch(t){case mr.CRYPTO:return 6;case mr.FOREX:return 5;case mr.STOCKS:case mr.FUTURES:default:return 2}}}ev.forEach(e=>{Hy(e)});Lk.forEach(e=>{H8(e)});const tH=()=>{const e=I0.useRef(null),t=I0.useRef(null);return I0.useEffect(()=>{if(e.current){const r={container:e.current,rootContainer:e.current,locale:"en-US",setTheme:()=>{},symbol:{exchange:"binance",market:"Crypto",name:"Bitcoin",shortName:"BTCUSDT",symbol:"BTCUSDT",priceCurrency:"usd",type:mr.CRYPTO},interval:{multiplier:1,timespan:"week",text:"W"},watchListEnabled:!0,watchListUseExternalStorage:!1,defaultDataFeed:new J5,layoutUseExternalStorage:!1,layoutLimit:10,paperTradingEnabled:!0,paperTradingUseExternalStorage:!1,paperTradingPriceTrackingInterval:3e4,paperTradingMaxTrades:100,multiChartLimit:16,themeUseExternalStorage:!1,orderBookEnabled:!0,enabledSymbolTypes:[mr.CRYPTO],tradesEnabled:!0,candleCloseTimerEnabled:!0};t.current=new FU(r)}return()=>{t.current&&(console.warn("chartRef.current.destroy() called in ChartSpireReact.tsx useEffect cleanup function"),t.current.destroy(),t.current=null)}},[]),Ll.jsx("div",{id:"container",ref:e})},Fy={statusBar:{backgroundColor:"#ff6b6b",color:"white",padding:"8px 16px",textAlign:"center",fontWeight:"bold",fontSize:"14px",position:"absolute",top:0,left:0,right:0,zIndex:1000020,width:"100%",boxSizing:"border-box"},closeButton:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"18px",padding:"2px 6px"}};function rH(){const[e,t]=I0.useState(!0);return Ll.jsxs(Ll.Fragment,{children:[e&&Ll.jsxs("div",{style:Fy.statusBar,children:[" Alpha v1.0.0-alpha15: Data from Binance API. This is a pre-release version for testing purposes only.",Ll.jsx("button",{style:Fy.closeButton,onClick:()=>t(!1),title:"Hide status bar",children:""})]}),Ll.jsx(tH,{})]})}P6.createRoot(document.getElementById("root")).render(Ll.jsx(I0.StrictMode,{children:Ll.jsx(rH,{})}));
