(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Zf={exports:{}},d0={},Gf={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function C6(){if(qv)return zt;qv=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function m(j){return j===null||typeof j!="object"?null:(j=g&&j[g]||j["@@iterator"],typeof j=="function"?j:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function _(j,Z,pe){this.props=j,this.context=Z,this.refs=C,this.updater=pe||b}_.prototype.isReactComponent={},_.prototype.setState=function(j,Z){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},_.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function k(){}k.prototype=_.prototype;function M(j,Z,pe){this.props=j,this.context=Z,this.refs=C,this.updater=pe||b}var L=M.prototype=new k;L.constructor=M,x(L,_.prototype),L.isPureReactComponent=!0;var A=Array.isArray,P=Object.prototype.hasOwnProperty,$={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function z(j,Z,pe){var Y,fe={},ve=null,$e=null;if(Z!=null)for(Y in Z.ref!==void 0&&($e=Z.ref),Z.key!==void 0&&(ve=""+Z.key),Z)P.call(Z,Y)&&!R.hasOwnProperty(Y)&&(fe[Y]=Z[Y]);var Ie=arguments.length-2;if(Ie===1)fe.children=pe;else if(1<Ie){for(var Oe=Array(Ie),Ce=0;Ce<Ie;Ce++)Oe[Ce]=arguments[Ce+2];fe.children=Oe}if(j&&j.defaultProps)for(Y in Ie=j.defaultProps,Ie)fe[Y]===void 0&&(fe[Y]=Ie[Y]);return{$$typeof:e,type:j,key:ve,ref:$e,props:fe,_owner:$.current}}function B(j,Z){return{$$typeof:e,type:j.type,key:Z,ref:j.ref,props:j.props,_owner:j._owner}}function W(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function X(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(pe){return Z[pe]})}var ee=/\/+/g;function U(j,Z){return typeof j=="object"&&j!==null&&j.key!=null?X(""+j.key):Z.toString(36)}function q(j,Z,pe,Y,fe){var ve=typeof j;(ve==="undefined"||ve==="boolean")&&(j=null);var $e=!1;if(j===null)$e=!0;else switch(ve){case"string":case"number":$e=!0;break;case"object":switch(j.$$typeof){case e:case t:$e=!0}}if($e)return $e=j,fe=fe($e),j=Y===""?"."+U($e,0):Y,A(fe)?(pe="",j!=null&&(pe=j.replace(ee,"$&/")+"/"),q(fe,Z,pe,"",function(Ce){return Ce})):fe!=null&&(W(fe)&&(fe=B(fe,pe+(!fe.key||$e&&$e.key===fe.key?"":(""+fe.key).replace(ee,"$&/")+"/")+j)),Z.push(fe)),1;if($e=0,Y=Y===""?".":Y+":",A(j))for(var Ie=0;Ie<j.length;Ie++){ve=j[Ie];var Oe=Y+U(ve,Ie);$e+=q(ve,Z,pe,Oe,fe)}else if(Oe=m(j),typeof Oe=="function")for(j=Oe.call(j),Ie=0;!(ve=j.next()).done;)ve=ve.value,Oe=Y+U(ve,Ie++),$e+=q(ve,Z,pe,Oe,fe);else if(ve==="object")throw Z=String(j),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return $e}function ie(j,Z,pe){if(j==null)return j;var Y=[],fe=0;return q(j,Y,"","",function(ve){return Z.call(pe,ve,fe++)}),Y}function le(j){if(j._status===-1){var Z=j._result;Z=Z(),Z.then(function(pe){(j._status===0||j._status===-1)&&(j._status=1,j._result=pe)},function(pe){(j._status===0||j._status===-1)&&(j._status=2,j._result=pe)}),j._status===-1&&(j._status=0,j._result=Z)}if(j._status===1)return j._result.default;throw j._result}var ae={current:null},te={transition:null},ce={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:te,ReactCurrentOwner:$};function ue(){throw Error("act(...) is not supported in production builds of React.")}return zt.Children={map:ie,forEach:function(j,Z,pe){ie(j,function(){Z.apply(this,arguments)},pe)},count:function(j){var Z=0;return ie(j,function(){Z++}),Z},toArray:function(j){return ie(j,function(Z){return Z})||[]},only:function(j){if(!W(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},zt.Component=_,zt.Fragment=r,zt.Profiler=i,zt.PureComponent=M,zt.StrictMode=n,zt.Suspense=d,zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,zt.act=ue,zt.cloneElement=function(j,Z,pe){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Y=x({},j.props),fe=j.key,ve=j.ref,$e=j._owner;if(Z!=null){if(Z.ref!==void 0&&(ve=Z.ref,$e=$.current),Z.key!==void 0&&(fe=""+Z.key),j.type&&j.type.defaultProps)var Ie=j.type.defaultProps;for(Oe in Z)P.call(Z,Oe)&&!R.hasOwnProperty(Oe)&&(Y[Oe]=Z[Oe]===void 0&&Ie!==void 0?Ie[Oe]:Z[Oe])}var Oe=arguments.length-2;if(Oe===1)Y.children=pe;else if(1<Oe){Ie=Array(Oe);for(var Ce=0;Ce<Oe;Ce++)Ie[Ce]=arguments[Ce+2];Y.children=Ie}return{$$typeof:e,type:j.type,key:fe,ref:ve,props:Y,_owner:$e}},zt.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:o,_context:j},j.Consumer=j},zt.createElement=z,zt.createFactory=function(j){var Z=z.bind(null,j);return Z.type=j,Z},zt.createRef=function(){return{current:null}},zt.forwardRef=function(j){return{$$typeof:u,render:j}},zt.isValidElement=W,zt.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:le}},zt.memo=function(j,Z){return{$$typeof:h,type:j,compare:Z===void 0?null:Z}},zt.startTransition=function(j){var Z=te.transition;te.transition={};try{j()}finally{te.transition=Z}},zt.unstable_act=ue,zt.useCallback=function(j,Z){return ae.current.useCallback(j,Z)},zt.useContext=function(j){return ae.current.useContext(j)},zt.useDebugValue=function(){},zt.useDeferredValue=function(j){return ae.current.useDeferredValue(j)},zt.useEffect=function(j,Z){return ae.current.useEffect(j,Z)},zt.useId=function(){return ae.current.useId()},zt.useImperativeHandle=function(j,Z,pe){return ae.current.useImperativeHandle(j,Z,pe)},zt.useInsertionEffect=function(j,Z){return ae.current.useInsertionEffect(j,Z)},zt.useLayoutEffect=function(j,Z){return ae.current.useLayoutEffect(j,Z)},zt.useMemo=function(j,Z){return ae.current.useMemo(j,Z)},zt.useReducer=function(j,Z,pe){return ae.current.useReducer(j,Z,pe)},zt.useRef=function(j){return ae.current.useRef(j)},zt.useState=function(j){return ae.current.useState(j)},zt.useSyncExternalStore=function(j,Z,pe){return ae.current.useSyncExternalStore(j,Z,pe)},zt.useTransition=function(){return ae.current.useTransition()},zt.version="18.3.1",zt}var Jv;function Ug(){return Jv||(Jv=1,Gf.exports=C6()),Gf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function _6(){if(em)return d0;em=1;var e=Ug(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(u,d,h){var p,g={},m=null,b=null;h!==void 0&&(m=""+h),d.key!==void 0&&(m=""+d.key),d.ref!==void 0&&(b=d.ref);for(p in d)n.call(d,p)&&!o.hasOwnProperty(p)&&(g[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)g[p]===void 0&&(g[p]=d[p]);return{$$typeof:t,type:u,key:m,ref:b,props:g,_owner:i.current}}return d0.Fragment=r,d0.jsx=s,d0.jsxs=s,d0}var tm;function S6(){return tm||(tm=1,Zf.exports=_6()),Zf.exports}var Ml=S6(),E0=Ug(),J1={},Qf={exports:{}},Vi={},Kf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function k6(){return rm||(rm=1,function(e){function t(te,ce){var ue=te.length;te.push(ce);e:for(;0<ue;){var j=ue-1>>>1,Z=te[j];if(0<i(Z,ce))te[j]=ce,te[ue]=Z,ue=j;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var ce=te[0],ue=te.pop();if(ue!==ce){te[0]=ue;e:for(var j=0,Z=te.length,pe=Z>>>1;j<pe;){var Y=2*(j+1)-1,fe=te[Y],ve=Y+1,$e=te[ve];if(0>i(fe,ue))ve<Z&&0>i($e,fe)?(te[j]=$e,te[ve]=ue,j=ve):(te[j]=fe,te[Y]=ue,j=Y);else if(ve<Z&&0>i($e,ue))te[j]=$e,te[ve]=ue,j=ve;else break e}}return ce}function i(te,ce){var ue=te.sortIndex-ce.sortIndex;return ue!==0?ue:te.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var d=[],h=[],p=1,g=null,m=3,b=!1,x=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(te){for(var ce=r(h);ce!==null;){if(ce.callback===null)n(h);else if(ce.startTime<=te)n(h),ce.sortIndex=ce.expirationTime,t(d,ce);else break;ce=r(h)}}function A(te){if(C=!1,L(te),!x)if(r(d)!==null)x=!0,le(P);else{var ce=r(h);ce!==null&&ae(A,ce.startTime-te)}}function P(te,ce){x=!1,C&&(C=!1,k(z),z=-1),b=!0;var ue=m;try{for(L(ce),g=r(d);g!==null&&(!(g.expirationTime>ce)||te&&!X());){var j=g.callback;if(typeof j=="function"){g.callback=null,m=g.priorityLevel;var Z=j(g.expirationTime<=ce);ce=e.unstable_now(),typeof Z=="function"?g.callback=Z:g===r(d)&&n(d),L(ce)}else n(d);g=r(d)}if(g!==null)var pe=!0;else{var Y=r(h);Y!==null&&ae(A,Y.startTime-ce),pe=!1}return pe}finally{g=null,m=ue,b=!1}}var $=!1,R=null,z=-1,B=5,W=-1;function X(){return!(e.unstable_now()-W<B)}function ee(){if(R!==null){var te=e.unstable_now();W=te;var ce=!0;try{ce=R(!0,te)}finally{ce?U():($=!1,R=null)}}else $=!1}var U;if(typeof M=="function")U=function(){M(ee)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ie=q.port2;q.port1.onmessage=ee,U=function(){ie.postMessage(null)}}else U=function(){_(ee,0)};function le(te){R=te,$||($=!0,U())}function ae(te,ce){z=_(function(){te(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){x||b||(x=!0,le(P))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(te){switch(m){case 1:case 2:case 3:var ce=3;break;default:ce=m}var ue=m;m=ce;try{return te()}finally{m=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ue=m;m=te;try{return ce()}finally{m=ue}},e.unstable_scheduleCallback=function(te,ce,ue){var j=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?j+ue:j):ue=j,te){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ue+Z,te={id:p++,callback:ce,priorityLevel:te,startTime:ue,expirationTime:Z,sortIndex:-1},ue>j?(te.sortIndex=ue,t(h,te),r(d)===null&&te===r(h)&&(C?(k(z),z=-1):C=!0,ae(A,ue-j))):(te.sortIndex=Z,t(d,te),x||b||(x=!0,le(P))),te},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(te){var ce=m;return function(){var ue=m;m=ce;try{return te.apply(this,arguments)}finally{m=ue}}}}(qf)),qf}var nm;function T6(){return nm||(nm=1,Kf.exports=k6()),Kf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im;function E6(){if(im)return Vi;im=1;var e=Ug(),t=T6();function r(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,v=1;v<arguments.length;v++)l+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(a,l){s(a,l),s(a+"Capture",l)}function s(a,l){for(i[a]=l,a=0;a<l.length;a++)n.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function m(a){return d.call(g,a)?!0:d.call(p,a)?!1:h.test(a)?g[a]=!0:(p[a]=!0,!1)}function b(a,l,v,y){if(v!==null&&v.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:v!==null?!v.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function x(a,l,v,y){if(l===null||typeof l>"u"||b(a,l,v,y))return!0;if(y)return!1;if(v!==null)switch(v.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(a,l,v,y,S,T,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=v,this.propertyName=a,this.type=l,this.sanitizeURL=T,this.removeEmptyString=O}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){_[a]=new C(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];_[l]=new C(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){_[a]=new C(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){_[a]=new C(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){_[a]=new C(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){_[a]=new C(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){_[a]=new C(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){_[a]=new C(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){_[a]=new C(a,5,!1,a.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(k,M);_[l]=new C(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(k,M);_[l]=new C(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(k,M);_[l]=new C(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){_[a]=new C(a,1,!1,a.toLowerCase(),null,!1,!1)}),_.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){_[a]=new C(a,1,!1,a.toLowerCase(),null,!0,!0)});function L(a,l,v,y){var S=_.hasOwnProperty(l)?_[l]:null;(S!==null?S.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(x(l,v,S,y)&&(v=null),y||S===null?m(l)&&(v===null?a.removeAttribute(l):a.setAttribute(l,""+v)):S.mustUseProperty?a[S.propertyName]=v===null?S.type===3?!1:"":v:(l=S.attributeName,y=S.attributeNamespace,v===null?a.removeAttribute(l):(S=S.type,v=S===3||S===4&&v===!0?"":""+v,y?a.setAttributeNS(y,l,v):a.setAttribute(l,v))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),$=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),X=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),te=Symbol.iterator;function ce(a){return a===null||typeof a!="object"?null:(a=te&&a[te]||a["@@iterator"],typeof a=="function"?a:null)}var ue=Object.assign,j;function Z(a){if(j===void 0)try{throw Error()}catch(v){var l=v.stack.trim().match(/\n( *(at )?)/);j=l&&l[1]||""}return`
`+j+a}var pe=!1;function Y(a,l){if(!a||pe)return"";pe=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ye){var y=ye}Reflect.construct(a,[],l)}else{try{l.call()}catch(ye){y=ye}a.call(l.prototype)}else{try{throw Error()}catch(ye){y=ye}a()}}catch(ye){if(ye&&y&&typeof ye.stack=="string"){for(var S=ye.stack.split(`
`),T=y.stack.split(`
`),O=S.length-1,K=T.length-1;1<=O&&0<=K&&S[O]!==T[K];)K--;for(;1<=O&&0<=K;O--,K--)if(S[O]!==T[K]){if(O!==1||K!==1)do if(O--,K--,0>K||S[O]!==T[K]){var re=`
`+S[O].replace(" at new "," at ");return a.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",a.displayName)),re}while(1<=O&&0<=K);break}}}finally{pe=!1,Error.prepareStackTrace=v}return(a=a?a.displayName||a.name:"")?Z(a):""}function fe(a){switch(a.tag){case 5:return Z(a.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return a=Y(a.type,!1),a;case 11:return a=Y(a.type.render,!1),a;case 1:return a=Y(a.type,!0),a;default:return""}}function ve(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case R:return"Fragment";case $:return"Portal";case B:return"Profiler";case z:return"StrictMode";case U:return"Suspense";case q:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case X:return(a.displayName||"Context")+".Consumer";case W:return(a._context.displayName||"Context")+".Provider";case ee:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ie:return l=a.displayName||null,l!==null?l:ve(a.type)||"Memo";case le:l=a._payload,a=a._init;try{return ve(a(l))}catch{}}return null}function $e(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(l);case 8:return l===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ie(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Oe(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ce(a){var l=Oe(a)?"checked":"value",v=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var S=v.get,T=v.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return S.call(this)},set:function(O){y=""+O,T.call(this,O)}}),Object.defineProperty(a,l,{enumerable:v.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Le(a){a._valueTracker||(a._valueTracker=Ce(a))}function Ve(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var v=l.getValue(),y="";return a&&(y=Oe(a)?a.checked?"true":"false":a.value),a=y,a!==v?(l.setValue(a),!0):!1}function je(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function qe(a,l){var v=l.checked;return ue({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??a._wrapperState.initialChecked})}function ht(a,l){var v=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;v=Ie(l.value!=null?l.value:v),a._wrapperState={initialChecked:y,initialValue:v,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function vt(a,l){l=l.checked,l!=null&&L(a,"checked",l,!1)}function bt(a,l){vt(a,l);var v=Ie(l.value),y=l.type;if(v!=null)y==="number"?(v===0&&a.value===""||a.value!=v)&&(a.value=""+v):a.value!==""+v&&(a.value=""+v);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?dr(a,l.type,v):l.hasOwnProperty("defaultValue")&&dr(a,l.type,Ie(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function or(a,l,v){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,v||l===a.value||(a.value=l),a.defaultValue=l}v=a.name,v!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,v!==""&&(a.name=v)}function dr(a,l,v){(l!=="number"||je(a.ownerDocument)!==a)&&(v==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+v&&(a.defaultValue=""+v))}var qt=Array.isArray;function It(a,l,v,y){if(a=a.options,l){l={};for(var S=0;S<v.length;S++)l["$"+v[S]]=!0;for(v=0;v<a.length;v++)S=l.hasOwnProperty("$"+a[v].value),a[v].selected!==S&&(a[v].selected=S),S&&y&&(a[v].defaultSelected=!0)}else{for(v=""+Ie(v),l=null,S=0;S<a.length;S++){if(a[S].value===v){a[S].selected=!0,y&&(a[S].defaultSelected=!0);return}l!==null||a[S].disabled||(l=a[S])}l!==null&&(l.selected=!0)}}function mr(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(r(91));return ue({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function ln(a,l){var v=l.value;if(v==null){if(v=l.children,l=l.defaultValue,v!=null){if(l!=null)throw Error(r(92));if(qt(v)){if(1<v.length)throw Error(r(93));v=v[0]}l=v}l==null&&(l=""),v=l}a._wrapperState={initialValue:Ie(v)}}function yn(a,l){var v=Ie(l.value),y=Ie(l.defaultValue);v!=null&&(v=""+v,v!==a.value&&(a.value=v),l.defaultValue==null&&a.defaultValue!==v&&(a.defaultValue=v)),y!=null&&(a.defaultValue=""+y)}function cr(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Dt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ht(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Dt(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Jt,Gr=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,v,y,S){MSApp.execUnsafeLocalFunction(function(){return a(l,v,y,S)})}:a}(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Jt=Jt||document.createElement("div"),Jt.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Jt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function ur(a,l){if(l){var v=a.firstChild;if(v&&v===a.lastChild&&v.nodeType===3){v.nodeValue=l;return}}a.textContent=l}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kt=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(a){kt.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Vr[l]=Vr[a]})});function Ue(a,l,v){return l==null||typeof l=="boolean"||l===""?"":v||typeof l!="number"||l===0||Vr.hasOwnProperty(a)&&Vr[a]?(""+l).trim():l+"px"}function Ct(a,l){a=a.style;for(var v in l)if(l.hasOwnProperty(v)){var y=v.indexOf("--")===0,S=Ue(v,l[v],y);v==="float"&&(v="cssFloat"),y?a.setProperty(v,S):a[v]=S}}var xt=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(a,l){if(l){if(xt[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(r(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(r(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(r(61))}if(l.style!=null&&typeof l.style!="object")throw Error(r(62))}}function wt(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vt=null;function Yt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yr=null,hr=null,sr=null;function qn(a){if(a=Dn(a)){if(typeof yr!="function")throw Error(r(280));var l=a.stateNode;l&&(l=Cu(l),yr(a.stateNode,a.type,l))}}function Ur(a){hr?sr?sr.push(a):sr=[a]:hr=a}function Hr(){if(hr){var a=hr,l=sr;if(sr=hr=null,qn(a),l)for(a=0;a<l.length;a++)qn(l[a])}}function Jn(a,l){return a(l)}function Lt(){}var Pr=!1;function St(a,l,v){if(Pr)return a(l,v);Pr=!0;try{return Jn(a,l,v)}finally{Pr=!1,(hr!==null||sr!==null)&&(Lt(),Hr())}}function Ar(a,l){var v=a.stateNode;if(v===null)return null;var y=Cu(v);if(y===null)return null;v=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(v&&typeof v!="function")throw Error(r(231,l,typeof v));return v}var wr=!1;if(u)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){wr=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{wr=!1}function tn(a,l,v,y,S,T,O,K,re){var ye=Array.prototype.slice.call(arguments,3);try{l.apply(v,ye)}catch(Me){this.onError(Me)}}var Yr=!1,rn=null,bn=!1,Ln=null,Hi={onError:function(a){Yr=!0,rn=a}};function lo(a,l,v,y,S,T,O,K,re){Yr=!1,rn=null,tn.apply(Hi,arguments)}function Xa(a,l,v,y,S,T,O,K,re){if(lo.apply(this,arguments),Yr){if(Yr){var ye=rn;Yr=!1,rn=null}else throw Error(r(198));bn||(bn=!0,Ln=ye)}}function fi(a){var l=a,v=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(v=l.return),a=l.return;while(a)}return l.tag===3?v:null}function ca(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function Bs(a){if(fi(a)!==a)throw Error(r(188))}function ua(a){var l=a.alternate;if(!l){if(l=fi(a),l===null)throw Error(r(188));return l!==a?null:a}for(var v=a,y=l;;){var S=v.return;if(S===null)break;var T=S.alternate;if(T===null){if(y=S.return,y!==null){v=y;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===v)return Bs(S),a;if(T===y)return Bs(S),l;T=T.sibling}throw Error(r(188))}if(v.return!==y.return)v=S,y=T;else{for(var O=!1,K=S.child;K;){if(K===v){O=!0,v=S,y=T;break}if(K===y){O=!0,y=S,v=T;break}K=K.sibling}if(!O){for(K=T.child;K;){if(K===v){O=!0,v=T,y=S;break}if(K===y){O=!0,y=T,v=S;break}K=K.sibling}if(!O)throw Error(r(189))}}if(v.alternate!==y)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?a:l}function ja(a){return a=ua(a),a!==null?Za(a):null}function Za(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Za(a);if(l!==null)return l;a=a.sibling}return null}var zl=t.unstable_scheduleCallback,Bl=t.unstable_cancelCallback,Ga=t.unstable_shouldYield,jc=t.unstable_requestPaint,br=t.unstable_now,Zc=t.unstable_getCurrentPriorityLevel,$s=t.unstable_ImmediatePriority,$l=t.unstable_UserBlockingPriority,da=t.unstable_NormalPriority,Gc=t.unstable_LowPriority,Vs=t.unstable_IdlePriority,Qa=null,Re=null;function Qc(a){if(Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(Qa,a,void 0,(a.current.flags&128)===128)}catch{}}var ei=Math.clz32?Math.clz32:Ul,Vl=Math.log,Wl=Math.LN2;function Ul(a){return a>>>=0,a===0?32:31-(Vl(a)/Wl|0)|0}var Oo=64,Ka=4194304;function No(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function co(a,l){var v=a.pendingLanes;if(v===0)return 0;var y=0,S=a.suspendedLanes,T=a.pingedLanes,O=v&268435455;if(O!==0){var K=O&~S;K!==0?y=No(K):(T&=O,T!==0&&(y=No(T)))}else O=v&~S,O!==0?y=No(O):T!==0&&(y=No(T));if(y===0)return 0;if(l!==0&&l!==y&&(l&S)===0&&(S=y&-y,T=l&-l,S>=T||S===16&&(T&4194240)!==0))return l;if((y&4)!==0&&(y|=v&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=y;0<l;)v=31-ei(l),S=1<<v,y|=a[v],l&=~S;return y}function Hl(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kc(a,l){for(var v=a.suspendedLanes,y=a.pingedLanes,S=a.expirationTimes,T=a.pendingLanes;0<T;){var O=31-ei(T),K=1<<O,re=S[O];re===-1?((K&v)===0||(K&y)!==0)&&(S[O]=Hl(K,l)):re<=l&&(a.expiredLanes|=K),T&=~K}}function qa(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Ws(){var a=Oo;return Oo<<=1,(Oo&4194240)===0&&(Oo=64),a}function ha(a){for(var l=[],v=0;31>v;v++)l.push(a);return l}function pa(a,l,v){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-ei(l),a[l]=v}function Yl(a,l){var v=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<v;){var S=31-ei(v),T=1<<S;l[S]=0,y[S]=-1,a[S]=-1,v&=~T}}function fa(a,l){var v=a.entangledLanes|=l;for(a=a.entanglements;v;){var y=31-ei(v),S=1<<y;S&l|a[y]&l&&(a[y]|=l),v&=~S}}var Xt=0;function uo(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Us,Ja,Xl,Hs,Ys,es=!1,ga=[],Yi=null,Xi=null,ji=null,zo=new Map,va=new Map,Zi=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jl(a,l){switch(a){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":zo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(l.pointerId)}}function ho(a,l,v,y,S,T){return a===null||a.nativeEvent!==T?(a={blockedOn:l,domEventName:v,eventSystemFlags:y,nativeEvent:T,targetContainers:[S]},l!==null&&(l=Dn(l),l!==null&&Ja(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),a)}function Jc(a,l,v,y,S){switch(l){case"focusin":return Yi=ho(Yi,a,l,v,y,S),!0;case"dragenter":return Xi=ho(Xi,a,l,v,y,S),!0;case"mouseover":return ji=ho(ji,a,l,v,y,S),!0;case"pointerover":var T=S.pointerId;return zo.set(T,ho(zo.get(T)||null,a,l,v,y,S)),!0;case"gotpointercapture":return T=S.pointerId,va.set(T,ho(va.get(T)||null,a,l,v,y,S)),!0}return!1}function Zl(a){var l=vo(a.target);if(l!==null){var v=fi(l);if(v!==null){if(l=v.tag,l===13){if(l=ca(v),l!==null){a.blockedOn=l,Ys(a.priority,function(){Xl(v)});return}}else if(l===3&&v.stateNode.current.memoizedState.isDehydrated){a.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ts(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var v=nu(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(v===null){v=a.nativeEvent;var y=new v.constructor(v.type,v);Vt=y,v.target.dispatchEvent(y),Vt=null}else return l=Dn(v),l!==null&&Ja(l),a.blockedOn=v,!1;l.shift()}return!0}function Gl(a,l,v){ts(a)&&v.delete(l)}function eu(){es=!1,Yi!==null&&ts(Yi)&&(Yi=null),Xi!==null&&ts(Xi)&&(Xi=null),ji!==null&&ts(ji)&&(ji=null),zo.forEach(Gl),va.forEach(Gl)}function er(a,l){a.blockedOn===l&&(a.blockedOn=null,es||(es=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,eu)))}function Zt(a){function l(S){return er(S,a)}if(0<ga.length){er(ga[0],a);for(var v=1;v<ga.length;v++){var y=ga[v];y.blockedOn===a&&(y.blockedOn=null)}}for(Yi!==null&&er(Yi,a),Xi!==null&&er(Xi,a),ji!==null&&er(ji,a),zo.forEach(l),va.forEach(l),v=0;v<Zi.length;v++)y=Zi[v],y.blockedOn===a&&(y.blockedOn=null);for(;0<Zi.length&&(v=Zi[0],v.blockedOn===null);)Zl(v),v.blockedOn===null&&Zi.shift()}var Xs=A.ReactCurrentBatchConfig,tu=!0;function ef(a,l,v,y){var S=Xt,T=Xs.transition;Xs.transition=null;try{Xt=1,Kd(a,l,v,y)}finally{Xt=S,Xs.transition=T}}function tf(a,l,v,y){var S=Xt,T=Xs.transition;Xs.transition=null;try{Xt=4,Kd(a,l,v,y)}finally{Xt=S,Xs.transition=T}}function Kd(a,l,v,y){if(tu){var S=nu(a,l,v,y);if(S===null)fh(a,l,y,ru,v),jl(a,y);else if(Jc(S,a,l,v,y))y.stopPropagation();else if(jl(a,y),l&4&&-1<qc.indexOf(a)){for(;S!==null;){var T=Dn(S);if(T!==null&&Us(T),T=nu(a,l,v,y),T===null&&fh(a,l,y,ru,v),T===S)break;S=T}S!==null&&y.stopPropagation()}else fh(a,l,y,null,v)}}var ru=null;function nu(a,l,v,y){if(ru=null,a=Yt(y),a=vo(a),a!==null)if(l=fi(a),l===null)a=null;else if(v=l.tag,v===13){if(a=ca(l),a!==null)return a;a=null}else if(v===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return ru=a,null}function V0(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zc()){case $s:return 1;case $l:return 4;case da:case Gc:return 16;case Vs:return 536870912;default:return 16}default:return 16}}var Dr=null,Ql=null,po=null;function qd(){if(po)return po;var a,l=Ql,v=l.length,y,S="value"in Dr?Dr.value:Dr.textContent,T=S.length;for(a=0;a<v&&l[a]===S[a];a++);var O=v-a;for(y=1;y<=O&&l[v-y]===S[T-y];y++);return po=S.slice(a,1<y?1-y:void 0)}function js(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Vn(){return!0}function Jd(){return!1}function ti(a){function l(v,y,S,T,O){this._reactName=v,this._targetInst=S,this.type=y,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var K in a)a.hasOwnProperty(K)&&(v=a[K],this[K]=v?v(T):T[K]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Vn:Jd,this.isPropagationStopped=Jd,this}return ue(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Vn)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Vn)},persist:function(){},isPersistent:Vn}),l}var rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iu=ti(rs),Zs=ue({},rs,{view:0,detail:0}),W0=ti(Zs),Wn,eh,Pn,ou=ue({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Pn&&(Pn&&a.type==="mousemove"?(Wn=a.screenX-Pn.screenX,eh=a.screenY-Pn.screenY):eh=Wn=0,Pn=a),Wn)},movementY:function(a){return"movementY"in a?a.movementY:eh}}),th=ti(ou),ma=ue({},ou,{dataTransfer:0}),au=ti(ma),rh=ue({},Zs,{relatedTarget:0}),Cr=ti(rh),ya=ue({},rs,{animationName:0,elapsedTime:0,pseudoElement:0}),nh=ti(ya),rf=ue({},rs,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ih=ti(rf),nf=ue({},rs,{data:0}),U0=ti(nf),of={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gs(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=su[a])?!!l[a]:!1}function oh(){return Gs}var Y0=ue({},Zs,{key:function(a){if(a.key){var l=of[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=js(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?H0[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oh,charCode:function(a){return a.type==="keypress"?js(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?js(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),X0=ti(Y0),ah=ue({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lu=ti(ah),j0=ue({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oh}),af=ti(j0),sh=ue({},rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),lh=ti(sh),sf=ue({},ou,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Z0=ti(sf),gi=[9,13,27,32],Kl=u&&"CompositionEvent"in window,Bo=null;u&&"documentMode"in document&&(Bo=document.documentMode);var G0=u&&"TextEvent"in window&&!Bo,ch=u&&(!Kl||Bo&&8<Bo&&11>=Bo),Q0=" ",K0=!1;function q0(a,l){switch(a){case"keyup":return gi.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J0(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Qs=!1;function Ks(a,l){switch(a){case"compositionend":return J0(l);case"keypress":return l.which!==32?null:(K0=!0,Q0);case"textInput":return a=l.data,a===Q0&&K0?null:a;default:return null}}function lf(a,l){if(Qs)return a==="compositionend"||!Kl&&q0(a,l)?(a=qd(),po=Ql=Dr=null,Qs=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ch&&l.locale!=="ko"?null:l.data;default:return null}}var cf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cu(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!cf[a.type]:l==="textarea"}function uh(a,l,v,y){Ur(y),l=yu(l,"onChange"),0<l.length&&(v=new iu("onChange","change",null,v,y),a.push({event:v,listeners:l}))}var Ti=null,ba=null;function uf(a){a1(a,0)}function uu(a){var l=Tt(a);if(Ve(l))return a}function df(a,l){if(a==="change")return l}var ns=!1;if(u){var vi;if(u){var du="oninput"in document;if(!du){var e1=document.createElement("div");e1.setAttribute("oninput","return;"),du=typeof e1.oninput=="function"}vi=du}else vi=!1;ns=vi&&(!document.documentMode||9<document.documentMode)}function t1(){Ti&&(Ti.detachEvent("onpropertychange",r1),ba=Ti=null)}function r1(a){if(a.propertyName==="value"&&uu(ba)){var l=[];uh(l,ba,a,Yt(a)),St(uf,l)}}function hf(a,l,v){a==="focusin"?(t1(),Ti=l,ba=v,Ti.attachEvent("onpropertychange",r1)):a==="focusout"&&t1()}function pf(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return uu(ba)}function qs(a,l){if(a==="click")return uu(l)}function se(a,l){if(a==="input"||a==="change")return uu(l)}function _e(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var me=typeof Object.is=="function"?Object.is:_e;function Ye(a,l){if(me(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var v=Object.keys(a),y=Object.keys(l);if(v.length!==y.length)return!1;for(y=0;y<v.length;y++){var S=v[y];if(!d.call(l,S)||!me(a[S],l[S]))return!1}return!0}function yt(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function tr(a,l){var v=yt(a);a=0;for(var y;v;){if(v.nodeType===3){if(y=a+v.textContent.length,a<=l&&y>=l)return{node:v,offset:l-a};a=y}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=yt(v)}}function Qr(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Qr(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function fr(){for(var a=window,l=je();l instanceof a.HTMLIFrameElement;){try{var v=typeof l.contentWindow.location.href=="string"}catch{v=!1}if(v)a=l.contentWindow;else break;l=je(a.document)}return l}function ql(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function ff(a){var l=fr(),v=a.focusedElem,y=a.selectionRange;if(l!==v&&v&&v.ownerDocument&&Qr(v.ownerDocument.documentElement,v)){if(y!==null&&ql(v)){if(l=y.start,a=y.end,a===void 0&&(a=l),"selectionStart"in v)v.selectionStart=l,v.selectionEnd=Math.min(a,v.value.length);else if(a=(l=v.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var S=v.textContent.length,T=Math.min(y.start,S);y=y.end===void 0?T:Math.min(y.end,S),!a.extend&&T>y&&(S=y,y=T,T=S),S=tr(v,T);var O=tr(v,y);S&&O&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),a.removeAllRanges(),T>y?(a.addRange(l),a.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),a.addRange(l)))}}for(l=[],a=v;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<l.length;v++)a=l[v],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Ei=u&&"documentMode"in document&&11>=document.documentMode,$o=null,dh=null,fo=null,Js=!1;function Jl(a,l,v){var y=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Js||$o==null||$o!==je(y)||(y=$o,"selectionStart"in y&&ql(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),fo&&Ye(fo,y)||(fo=y,y=yu(dh,"onSelect"),0<y.length&&(l=new iu("onSelect","select",null,l,v),a.push({event:l,listeners:y}),l.target=$o)))}function rr(a,l){var v={};return v[a.toLowerCase()]=l.toLowerCase(),v["Webkit"+a]="webkit"+l,v["Moz"+a]="moz"+l,v}var el={animationend:rr("Animation","AnimationEnd"),animationiteration:rr("Animation","AnimationIteration"),animationstart:rr("Animation","AnimationStart"),transitionend:rr("Transition","TransitionEnd")},hu={},ec={};u&&(ec=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function pu(a){if(hu[a])return hu[a];if(!el[a])return a;var l=el[a],v;for(v in l)if(l.hasOwnProperty(v)&&v in ec)return hu[a]=l[v];return a}var n1=pu("animationend"),i1=pu("animationiteration"),tc=pu("animationstart"),Vo=pu("transitionend"),rc=new Map,hh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(a,l){rc.set(a,l),o(l,[a])}for(var fu=0;fu<hh.length;fu++){var gu=hh[fu],vu=gu.toLowerCase(),o1=gu[0].toUpperCase()+gu.slice(1);Gi(vu,"on"+o1)}Gi(n1,"onAnimationEnd"),Gi(i1,"onAnimationIteration"),Gi(tc,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(Vo,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),is=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function nc(a,l,v){var y=a.type||"unknown-event";a.currentTarget=v,Xa(y,l,void 0,a),a.currentTarget=null}function a1(a,l){l=(l&4)!==0;for(var v=0;v<a.length;v++){var y=a[v],S=y.event;y=y.listeners;e:{var T=void 0;if(l)for(var O=y.length-1;0<=O;O--){var K=y[O],re=K.instance,ye=K.currentTarget;if(K=K.listener,re!==T&&S.isPropagationStopped())break e;nc(S,K,ye),T=re}else for(O=0;O<y.length;O++){if(K=y[O],re=K.instance,ye=K.currentTarget,K=K.listener,re!==T&&S.isPropagationStopped())break e;nc(S,K,ye),T=re}}}if(bn)throw a=Ln,bn=!1,Ln=null,a}function Tr(a,l){var v=l[wu];v===void 0&&(v=l[wu]=new Set);var y=a+"__bubble";v.has(y)||(mu(l,a,2,!1),v.add(y))}function ph(a,l,v){var y=0;l&&(y|=4),mu(v,a,y,l)}var os="_reactListening"+Math.random().toString(36).slice(2);function xa(a){if(!a[os]){a[os]=!0,n.forEach(function(v){v!=="selectionchange"&&(is.has(v)||ph(v,!1,a),ph(v,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[os]||(l[os]=!0,ph("selectionchange",!1,l))}}function mu(a,l,v,y){switch(V0(l)){case 1:var S=ef;break;case 4:S=tf;break;default:S=Kd}v=S.bind(null,l,v,a),S=void 0,!wr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),y?S!==void 0?a.addEventListener(l,v,{capture:!0,passive:S}):a.addEventListener(l,v,!0):S!==void 0?a.addEventListener(l,v,{passive:S}):a.addEventListener(l,v,!1)}function fh(a,l,v,y,S){var T=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var K=y.stateNode.containerInfo;if(K===S||K.nodeType===8&&K.parentNode===S)break;if(O===4)for(O=y.return;O!==null;){var re=O.tag;if((re===3||re===4)&&(re=O.stateNode.containerInfo,re===S||re.nodeType===8&&re.parentNode===S))return;O=O.return}for(;K!==null;){if(O=vo(K),O===null)return;if(re=O.tag,re===5||re===6){y=T=O;continue e}K=K.parentNode}}y=y.return}St(function(){var ye=T,Me=Yt(v),Fe=[];e:{var Ee=rc.get(a);if(Ee!==void 0){var Xe=iu,Je=a;switch(a){case"keypress":if(js(v)===0)break e;case"keydown":case"keyup":Xe=X0;break;case"focusin":Je="focus",Xe=Cr;break;case"focusout":Je="blur",Xe=Cr;break;case"beforeblur":case"afterblur":Xe=Cr;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=af;break;case n1:case i1:case tc:Xe=nh;break;case Vo:Xe=lh;break;case"scroll":Xe=W0;break;case"wheel":Xe=Z0;break;case"copy":case"cut":case"paste":Xe=ih;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=lu}var et=(l&4)!==0,jr=!et&&a==="scroll",he=et?Ee!==null?Ee+"Capture":null:Ee;et=[];for(var oe=ye,ge;oe!==null;){ge=oe;var Ne=ge.stateNode;if(ge.tag===5&&Ne!==null&&(ge=Ne,he!==null&&(Ne=Ar(oe,he),Ne!=null&&et.push(tl(oe,Ne,ge)))),jr)break;oe=oe.return}0<et.length&&(Ee=new Xe(Ee,Je,null,v,Me),Fe.push({event:Ee,listeners:et}))}}if((l&7)===0){e:{if(Ee=a==="mouseover"||a==="pointerover",Xe=a==="mouseout"||a==="pointerout",Ee&&v!==Vt&&(Je=v.relatedTarget||v.fromElement)&&(vo(Je)||Je[mi]))break e;if((Xe||Ee)&&(Ee=Me.window===Me?Me:(Ee=Me.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,Xe?(Je=v.relatedTarget||v.toElement,Xe=ye,Je=Je?vo(Je):null,Je!==null&&(jr=fi(Je),Je!==jr||Je.tag!==5&&Je.tag!==6)&&(Je=null)):(Xe=null,Je=ye),Xe!==Je)){if(et=th,Ne="onMouseLeave",he="onMouseEnter",oe="mouse",(a==="pointerout"||a==="pointerover")&&(et=lu,Ne="onPointerLeave",he="onPointerEnter",oe="pointer"),jr=Xe==null?Ee:Tt(Xe),ge=Je==null?Ee:Tt(Je),Ee=new et(Ne,oe+"leave",Xe,v,Me),Ee.target=jr,Ee.relatedTarget=ge,Ne=null,vo(Me)===ye&&(et=new et(he,oe+"enter",Je,v,Me),et.target=ge,et.relatedTarget=jr,Ne=et),jr=Ne,Xe&&Je)t:{for(et=Xe,he=Je,oe=0,ge=et;ge;ge=rl(ge))oe++;for(ge=0,Ne=he;Ne;Ne=rl(Ne))ge++;for(;0<oe-ge;)et=rl(et),oe--;for(;0<ge-oe;)he=rl(he),ge--;for(;oe--;){if(et===he||he!==null&&et===he.alternate)break t;et=rl(et),he=rl(he)}et=null}else et=null;Xe!==null&&Kr(Fe,Ee,Xe,et,!1),Je!==null&&jr!==null&&Kr(Fe,jr,Je,et,!0)}}e:{if(Ee=ye?Tt(ye):window,Xe=Ee.nodeName&&Ee.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Ee.type==="file")var rt=df;else if(cu(Ee))if(ns)rt=se;else{rt=pf;var lt=hf}else(Xe=Ee.nodeName)&&Xe.toLowerCase()==="input"&&(Ee.type==="checkbox"||Ee.type==="radio")&&(rt=qs);if(rt&&(rt=rt(a,ye))){uh(Fe,rt,v,Me);break e}lt&&lt(a,Ee,ye),a==="focusout"&&(lt=Ee._wrapperState)&&lt.controlled&&Ee.type==="number"&&dr(Ee,"number",Ee.value)}switch(lt=ye?Tt(ye):window,a){case"focusin":(cu(lt)||lt.contentEditable==="true")&&($o=lt,dh=ye,fo=null);break;case"focusout":fo=dh=$o=null;break;case"mousedown":Js=!0;break;case"contextmenu":case"mouseup":case"dragend":Js=!1,Jl(Fe,v,Me);break;case"selectionchange":if(Ei)break;case"keydown":case"keyup":Jl(Fe,v,Me)}var st;if(Kl)e:{switch(a){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Qs?q0(a,v)&&(pt="onCompositionEnd"):a==="keydown"&&v.keyCode===229&&(pt="onCompositionStart");pt&&(ch&&v.locale!=="ko"&&(Qs||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Qs&&(st=qd()):(Dr=Me,Ql="value"in Dr?Dr.value:Dr.textContent,Qs=!0)),lt=yu(ye,pt),0<lt.length&&(pt=new U0(pt,a,null,v,Me),Fe.push({event:pt,listeners:lt}),st?pt.data=st:(st=J0(v),st!==null&&(pt.data=st)))),(st=G0?Ks(a,v):lf(a,v))&&(ye=yu(ye,"onBeforeInput"),0<ye.length&&(Me=new U0("onBeforeInput","beforeinput",null,v,Me),Fe.push({event:Me,listeners:ye}),Me.data=st))}a1(Fe,l)})}function tl(a,l,v){return{instance:a,listener:l,currentTarget:v}}function yu(a,l){for(var v=l+"Capture",y=[];a!==null;){var S=a,T=S.stateNode;S.tag===5&&T!==null&&(S=T,T=Ar(a,v),T!=null&&y.unshift(tl(a,T,S)),T=Ar(a,l),T!=null&&y.push(tl(a,T,S))),a=a.return}return y}function rl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Kr(a,l,v,y,S){for(var T=l._reactName,O=[];v!==null&&v!==y;){var K=v,re=K.alternate,ye=K.stateNode;if(re!==null&&re===y)break;K.tag===5&&ye!==null&&(K=ye,S?(re=Ar(v,T),re!=null&&O.unshift(tl(v,re,K))):S||(re=Ar(v,T),re!=null&&O.push(tl(v,re,K)))),v=v.return}O.length!==0&&a.push({event:l,listeners:O})}var An=/\r\n?/g,gf=/\u0000|\uFFFD/g;function s1(a){return(typeof a=="string"?a:""+a).replace(An,`
`).replace(gf,"")}function ic(a,l,v){if(l=s1(l),s1(a)!==l&&v)throw Error(r(425))}function bu(){}var oc=null,as=null;function ac(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var wa=typeof setTimeout=="function"?setTimeout:void 0,sc=typeof clearTimeout=="function"?clearTimeout:void 0,nl=typeof Promise=="function"?Promise:void 0,xu=typeof queueMicrotask=="function"?queueMicrotask:typeof nl<"u"?function(a){return nl.resolve(null).then(a).catch(il)}:wa;function il(a){setTimeout(function(){throw a})}function gh(a,l){var v=l,y=0;do{var S=v.nextSibling;if(a.removeChild(v),S&&S.nodeType===8)if(v=S.data,v==="/$"){if(y===0){a.removeChild(S),Zt(l);return}y--}else v!=="$"&&v!=="$?"&&v!=="$!"||y++;v=S}while(v);Zt(l)}function Ca(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function l1(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var v=a.data;if(v==="$"||v==="$!"||v==="$?"){if(l===0)return a;l--}else v==="/$"&&l++}a=a.previousSibling}return null}var ol=Math.random().toString(36).slice(2),go="__reactFiber$"+ol,_a="__reactProps$"+ol,mi="__reactContainer$"+ol,wu="__reactEvents$"+ol,N="__reactListeners$"+ol,al="__reactHandles$"+ol;function vo(a){var l=a[go];if(l)return l;for(var v=a.parentNode;v;){if(l=v[mi]||v[go]){if(v=l.alternate,l.child!==null||v!==null&&v.child!==null)for(a=l1(a);a!==null;){if(v=a[go])return v;a=l1(a)}return l}a=v,v=a.parentNode}return null}function Dn(a){return a=a[go]||a[mi],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Tt(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(r(33))}function Cu(a){return a[_a]||null}var vh=[],sl=-1;function ri(a){return{current:a}}function Er(a){0>sl||(a.current=vh[sl],vh[sl]=null,sl--)}function _r(a,l){sl++,vh[sl]=a.current,a.current=l}var Sa={},Fn=ri(Sa),ni=ri(!1),Un=Sa;function ll(a,l){var v=a.type.contextTypes;if(!v)return Sa;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var S={},T;for(T in v)S[T]=l[T];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=S),S}function ii(a){return a=a.childContextTypes,a!=null}function _u(){Er(ni),Er(Fn)}function c1(a,l,v){if(Fn.current!==Sa)throw Error(r(168));_r(Fn,l),_r(ni,v)}function u1(a,l,v){var y=a.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return v;y=y.getChildContext();for(var S in y)if(!(S in l))throw Error(r(108,$e(a)||"Unknown",S));return ue({},v,y)}function Mi(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Sa,Un=Fn.current,_r(Fn,a),_r(ni,ni.current),!0}function d1(a,l,v){var y=a.stateNode;if(!y)throw Error(r(169));v?(a=u1(a,l,Un),y.__reactInternalMemoizedMergedChildContext=a,Er(ni),Er(Fn),_r(Fn,a)):Er(ni),_r(ni,v)}var Uo=null,Su=!1,mh=!1;function h1(a){Uo===null?Uo=[a]:Uo.push(a)}function ss(a){Su=!0,h1(a)}function ka(){if(!mh&&Uo!==null){mh=!0;var a=0,l=Xt;try{var v=Uo;for(Xt=1;a<v.length;a++){var y=v[a];do y=y(!0);while(y!==null)}Uo=null,Su=!1}catch(S){throw Uo!==null&&(Uo=Uo.slice(a+1)),zl($s,ka),S}finally{Xt=l,mh=!1}}return null}var cl=[],Rn=0,ku=null,Tu=0,Ii=[],Li=0,ls=null,mo=1,yo="";function cs(a,l){cl[Rn++]=Tu,cl[Rn++]=ku,ku=a,Tu=l}function p1(a,l,v){Ii[Li++]=mo,Ii[Li++]=yo,Ii[Li++]=ls,ls=a;var y=mo;a=yo;var S=32-ei(y)-1;y&=~(1<<S),v+=1;var T=32-ei(l)+S;if(30<T){var O=S-S%5;T=(y&(1<<O)-1).toString(32),y>>=O,S-=O,mo=1<<32-ei(l)+S|v<<S|y,yo=T+a}else mo=1<<T|v<<S|y,yo=a}function lc(a){a.return!==null&&(cs(a,1),p1(a,1,0))}function us(a){for(;a===ku;)ku=cl[--Rn],cl[Rn]=null,Tu=cl[--Rn],cl[Rn]=null;for(;a===ls;)ls=Ii[--Li],Ii[Li]=null,yo=Ii[--Li],Ii[Li]=null,mo=Ii[--Li],Ii[Li]=null}var On=null,yi=null,Mr=!1,Qi=null;function bo(a,l){var v=Ni(5,null,null,0);v.elementType="DELETED",v.stateNode=l,v.return=a,l=a.deletions,l===null?(a.deletions=[v],a.flags|=16):l.push(v)}function Eu(a,l){switch(a.tag){case 5:var v=a.type;return l=l.nodeType!==1||v.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,On=a,yi=Ca(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,On=a,yi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(v=ls!==null?{id:mo,overflow:yo}:null,a.memoizedState={dehydrated:l,treeContext:v,retryLane:1073741824},v=Ni(18,null,null,0),v.stateNode=l,v.return=a,a.child=v,On=a,yi=null,!0):!1;default:return!1}}function Ho(a){return(a.mode&1)!==0&&(a.flags&128)===0}function oi(a){if(Mr){var l=yi;if(l){var v=l;if(!Eu(a,l)){if(Ho(a))throw Error(r(418));l=Ca(v.nextSibling);var y=On;l&&Eu(a,l)?bo(y,v):(a.flags=a.flags&-4097|2,Mr=!1,On=a)}}else{if(Ho(a))throw Error(r(418));a.flags=a.flags&-4097|2,Mr=!1,On=a}}}function f1(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;On=a}function cc(a){if(a!==On)return!1;if(!Mr)return f1(a),Mr=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!ac(a.type,a.memoizedProps)),l&&(l=yi)){if(Ho(a))throw yh(),Error(r(418));for(;l;)bo(a,l),l=Ca(l.nextSibling)}if(f1(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var v=a.data;if(v==="/$"){if(l===0){yi=Ca(a.nextSibling);break e}l--}else v!=="$"&&v!=="$!"&&v!=="$?"||l++}a=a.nextSibling}yi=null}}else yi=On?Ca(a.stateNode.nextSibling):null;return!0}function yh(){for(var a=yi;a;)a=Ca(a.nextSibling)}function xo(){yi=On=null,Mr=!1}function wo(a){Qi===null?Qi=[a]:Qi.push(a)}var g1=A.ReactCurrentBatchConfig;function uc(a,l,v){if(a=v.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(r(309));var y=v.stateNode}if(!y)throw Error(r(147,a));var S=y,T=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(O){var K=S.refs;O===null?delete K[T]:K[T]=O},l._stringRef=T,l)}if(typeof a!="string")throw Error(r(284));if(!v._owner)throw Error(r(290,a))}return a}function ds(a,l){throw a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function v1(a){var l=a._init;return l(a._payload)}function bh(a){function l(he,oe){if(a){var ge=he.deletions;ge===null?(he.deletions=[oe],he.flags|=16):ge.push(oe)}}function v(he,oe){if(!a)return null;for(;oe!==null;)l(he,oe),oe=oe.sibling;return null}function y(he,oe){for(he=new Map;oe!==null;)oe.key!==null?he.set(oe.key,oe):he.set(oe.index,oe),oe=oe.sibling;return he}function S(he,oe){return he=no(he,oe),he.index=0,he.sibling=null,he}function T(he,oe,ge){return he.index=ge,a?(ge=he.alternate,ge!==null?(ge=ge.index,ge<oe?(he.flags|=2,oe):ge):(he.flags|=2,oe)):(he.flags|=1048576,oe)}function O(he){return a&&he.alternate===null&&(he.flags|=2),he}function K(he,oe,ge,Ne){return oe===null||oe.tag!==6?(oe=o0(ge,he.mode,Ne),oe.return=he,oe):(oe=S(oe,ge),oe.return=he,oe)}function re(he,oe,ge,Ne){var rt=ge.type;return rt===R?Me(he,oe,ge.props.children,Ne,ge.key):oe!==null&&(oe.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===le&&v1(rt)===oe.type)?(Ne=S(oe,ge.props),Ne.ref=uc(he,oe,ge),Ne.return=he,Ne):(Ne=ld(ge.type,ge.key,ge.props,null,he.mode,Ne),Ne.ref=uc(he,oe,ge),Ne.return=he,Ne)}function ye(he,oe,ge,Ne){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ge.containerInfo||oe.stateNode.implementation!==ge.implementation?(oe=a0(ge,he.mode,Ne),oe.return=he,oe):(oe=S(oe,ge.children||[]),oe.return=he,oe)}function Me(he,oe,ge,Ne,rt){return oe===null||oe.tag!==7?(oe=Cs(ge,he.mode,Ne,rt),oe.return=he,oe):(oe=S(oe,ge),oe.return=he,oe)}function Fe(he,oe,ge){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=o0(""+oe,he.mode,ge),oe.return=he,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case P:return ge=ld(oe.type,oe.key,oe.props,null,he.mode,ge),ge.ref=uc(he,null,oe),ge.return=he,ge;case $:return oe=a0(oe,he.mode,ge),oe.return=he,oe;case le:var Ne=oe._init;return Fe(he,Ne(oe._payload),ge)}if(qt(oe)||ce(oe))return oe=Cs(oe,he.mode,ge,null),oe.return=he,oe;ds(he,oe)}return null}function Ee(he,oe,ge,Ne){var rt=oe!==null?oe.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return rt!==null?null:K(he,oe,""+ge,Ne);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:return ge.key===rt?re(he,oe,ge,Ne):null;case $:return ge.key===rt?ye(he,oe,ge,Ne):null;case le:return rt=ge._init,Ee(he,oe,rt(ge._payload),Ne)}if(qt(ge)||ce(ge))return rt!==null?null:Me(he,oe,ge,Ne,null);ds(he,ge)}return null}function Xe(he,oe,ge,Ne,rt){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return he=he.get(ge)||null,K(oe,he,""+Ne,rt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case P:return he=he.get(Ne.key===null?ge:Ne.key)||null,re(oe,he,Ne,rt);case $:return he=he.get(Ne.key===null?ge:Ne.key)||null,ye(oe,he,Ne,rt);case le:var lt=Ne._init;return Xe(he,oe,ge,lt(Ne._payload),rt)}if(qt(Ne)||ce(Ne))return he=he.get(ge)||null,Me(oe,he,Ne,rt,null);ds(oe,Ne)}return null}function Je(he,oe,ge,Ne){for(var rt=null,lt=null,st=oe,pt=oe=0,dn=null;st!==null&&pt<ge.length;pt++){st.index>pt?(dn=st,st=null):dn=st.sibling;var nr=Ee(he,st,ge[pt],Ne);if(nr===null){st===null&&(st=dn);break}a&&st&&nr.alternate===null&&l(he,st),oe=T(nr,oe,pt),lt===null?rt=nr:lt.sibling=nr,lt=nr,st=dn}if(pt===ge.length)return v(he,st),Mr&&cs(he,pt),rt;if(st===null){for(;pt<ge.length;pt++)st=Fe(he,ge[pt],Ne),st!==null&&(oe=T(st,oe,pt),lt===null?rt=st:lt.sibling=st,lt=st);return Mr&&cs(he,pt),rt}for(st=y(he,st);pt<ge.length;pt++)dn=Xe(st,he,pt,ge[pt],Ne),dn!==null&&(a&&dn.alternate!==null&&st.delete(dn.key===null?pt:dn.key),oe=T(dn,oe,pt),lt===null?rt=dn:lt.sibling=dn,lt=dn);return a&&st.forEach(function(Na){return l(he,Na)}),Mr&&cs(he,pt),rt}function et(he,oe,ge,Ne){var rt=ce(ge);if(typeof rt!="function")throw Error(r(150));if(ge=rt.call(ge),ge==null)throw Error(r(151));for(var lt=rt=null,st=oe,pt=oe=0,dn=null,nr=ge.next();st!==null&&!nr.done;pt++,nr=ge.next()){st.index>pt?(dn=st,st=null):dn=st.sibling;var Na=Ee(he,st,nr.value,Ne);if(Na===null){st===null&&(st=dn);break}a&&st&&Na.alternate===null&&l(he,st),oe=T(Na,oe,pt),lt===null?rt=Na:lt.sibling=Na,lt=Na,st=dn}if(nr.done)return v(he,st),Mr&&cs(he,pt),rt;if(st===null){for(;!nr.done;pt++,nr=ge.next())nr=Fe(he,nr.value,Ne),nr!==null&&(oe=T(nr,oe,pt),lt===null?rt=nr:lt.sibling=nr,lt=nr);return Mr&&cs(he,pt),rt}for(st=y(he,st);!nr.done;pt++,nr=ge.next())nr=Xe(st,he,pt,nr.value,Ne),nr!==null&&(a&&nr.alternate!==null&&st.delete(nr.key===null?pt:nr.key),oe=T(nr,oe,pt),lt===null?rt=nr:lt.sibling=nr,lt=nr);return a&&st.forEach(function(Of){return l(he,Of)}),Mr&&cs(he,pt),rt}function jr(he,oe,ge,Ne){if(typeof ge=="object"&&ge!==null&&ge.type===R&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:e:{for(var rt=ge.key,lt=oe;lt!==null;){if(lt.key===rt){if(rt=ge.type,rt===R){if(lt.tag===7){v(he,lt.sibling),oe=S(lt,ge.props.children),oe.return=he,he=oe;break e}}else if(lt.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===le&&v1(rt)===lt.type){v(he,lt.sibling),oe=S(lt,ge.props),oe.ref=uc(he,lt,ge),oe.return=he,he=oe;break e}v(he,lt);break}else l(he,lt);lt=lt.sibling}ge.type===R?(oe=Cs(ge.props.children,he.mode,Ne,ge.key),oe.return=he,he=oe):(Ne=ld(ge.type,ge.key,ge.props,null,he.mode,Ne),Ne.ref=uc(he,oe,ge),Ne.return=he,he=Ne)}return O(he);case $:e:{for(lt=ge.key;oe!==null;){if(oe.key===lt)if(oe.tag===4&&oe.stateNode.containerInfo===ge.containerInfo&&oe.stateNode.implementation===ge.implementation){v(he,oe.sibling),oe=S(oe,ge.children||[]),oe.return=he,he=oe;break e}else{v(he,oe);break}else l(he,oe);oe=oe.sibling}oe=a0(ge,he.mode,Ne),oe.return=he,he=oe}return O(he);case le:return lt=ge._init,jr(he,oe,lt(ge._payload),Ne)}if(qt(ge))return Je(he,oe,ge,Ne);if(ce(ge))return et(he,oe,ge,Ne);ds(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,oe!==null&&oe.tag===6?(v(he,oe.sibling),oe=S(oe,ge),oe.return=he,he=oe):(v(he,oe),oe=o0(ge,he.mode,Ne),oe.return=he,he=oe),O(he)):v(he,oe)}return jr}var Wr=bh(!0),Mu=bh(!1),dc=ri(null),bi=null,Ta=null,ul=null;function Yo(){ul=Ta=bi=null}function Iu(a){var l=dc.current;Er(dc),a._currentValue=l}function xn(a,l,v){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===v)break;a=a.return}}function Ea(a,l){bi=a,ul=Ta=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Yn=!0),a.firstContext=null)}function Pi(a){var l=a._currentValue;if(ul!==a)if(a={context:a,memoizedValue:l,next:null},Ta===null){if(bi===null)throw Error(r(308));Ta=a,bi.dependencies={lanes:0,firstContext:a}}else Ta=Ta.next=a;return l}var hs=null;function xh(a){hs===null?hs=[a]:hs.push(a)}function Lu(a,l,v,y){var S=l.interleaved;return S===null?(v.next=v,xh(l)):(v.next=S.next,S.next=v),l.interleaved=v,Xo(a,y)}function Xo(a,l){a.lanes|=l;var v=a.alternate;for(v!==null&&(v.lanes|=l),v=a,a=a.return;a!==null;)a.childLanes|=l,v=a.alternate,v!==null&&(v.childLanes|=l),v=a,a=a.return;return v.tag===3?v.stateNode:null}var Ai=!1;function Pu(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m1(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function jo(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Di(a,l,v){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Gt&2)!==0){var S=y.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),y.pending=l,Xo(a,v)}return S=y.interleaved,S===null?(l.next=l,xh(y)):(l.next=S.next,S.next=l),y.interleaved=l,Xo(a,v)}function Au(a,l,v){if(l=l.updateQueue,l!==null&&(l=l.shared,(v&4194240)!==0)){var y=l.lanes;y&=a.pendingLanes,v|=y,l.lanes=v,fa(a,v)}}function y1(a,l){var v=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,v===y)){var S=null,T=null;if(v=v.firstBaseUpdate,v!==null){do{var O={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};T===null?S=T=O:T=T.next=O,v=v.next}while(v!==null);T===null?S=T=l:T=T.next=l}else S=T=l;v={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:y.shared,effects:y.effects},a.updateQueue=v;return}a=v.lastBaseUpdate,a===null?v.firstBaseUpdate=l:a.next=l,v.lastBaseUpdate=l}function dl(a,l,v,y){var S=a.updateQueue;Ai=!1;var T=S.firstBaseUpdate,O=S.lastBaseUpdate,K=S.shared.pending;if(K!==null){S.shared.pending=null;var re=K,ye=re.next;re.next=null,O===null?T=ye:O.next=ye,O=re;var Me=a.alternate;Me!==null&&(Me=Me.updateQueue,K=Me.lastBaseUpdate,K!==O&&(K===null?Me.firstBaseUpdate=ye:K.next=ye,Me.lastBaseUpdate=re))}if(T!==null){var Fe=S.baseState;O=0,Me=ye=re=null,K=T;do{var Ee=K.lane,Xe=K.eventTime;if((y&Ee)===Ee){Me!==null&&(Me=Me.next={eventTime:Xe,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var Je=a,et=K;switch(Ee=l,Xe=v,et.tag){case 1:if(Je=et.payload,typeof Je=="function"){Fe=Je.call(Xe,Fe,Ee);break e}Fe=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=et.payload,Ee=typeof Je=="function"?Je.call(Xe,Fe,Ee):Je,Ee==null)break e;Fe=ue({},Fe,Ee);break e;case 2:Ai=!0}}K.callback!==null&&K.lane!==0&&(a.flags|=64,Ee=S.effects,Ee===null?S.effects=[K]:Ee.push(K))}else Xe={eventTime:Xe,lane:Ee,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Me===null?(ye=Me=Xe,re=Fe):Me=Me.next=Xe,O|=Ee;if(K=K.next,K===null){if(K=S.shared.pending,K===null)break;Ee=K,K=Ee.next,Ee.next=null,S.lastBaseUpdate=Ee,S.shared.pending=null}}while(!0);if(Me===null&&(re=Fe),S.baseState=re,S.firstBaseUpdate=ye,S.lastBaseUpdate=Me,l=S.shared.interleaved,l!==null){S=l;do O|=S.lane,S=S.next;while(S!==l)}else T===null&&(S.shared.lanes=0);Aa|=O,a.lanes=O,a.memoizedState=Fe}}function wh(a,l,v){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var y=a[l],S=y.callback;if(S!==null){if(y.callback=null,y=v,typeof S!="function")throw Error(r(191,S));S.call(y)}}}var hc={},Co=ri(hc),pc=ri(hc),hl=ri(hc);function Zo(a){if(a===hc)throw Error(r(174));return a}function Ch(a,l){switch(_r(hl,l),_r(pc,a),_r(Co,hc),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ht(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Ht(l,a)}Er(Co),_r(Co,l)}function Ma(){Er(Co),Er(pc),Er(hl)}function _h(a){Zo(hl.current);var l=Zo(Co.current),v=Ht(l,a.type);l!==v&&(_r(pc,a),_r(Co,v))}function Du(a){pc.current===a&&(Er(Co),Er(pc))}var Fr=ri(0);function ps(a){for(var l=a;l!==null;){if(l.tag===13){var v=l.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Sh=[];function Fu(){for(var a=0;a<Sh.length;a++)Sh[a]._workInProgressVersionPrimary=null;Sh.length=0}var fc=A.ReactCurrentDispatcher,kh=A.ReactCurrentBatchConfig,Ia=0,Nr=null,Xr=null,nn=null,pl=!1,gc=!1,fs=0,Ft=0;function Nn(){throw Error(r(321))}function Th(a,l){if(l===null)return!1;for(var v=0;v<l.length&&v<a.length;v++)if(!me(a[v],l[v]))return!1;return!0}function gs(a,l,v,y,S,T){if(Ia=T,Nr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,fc.current=a===null||a.memoizedState===null?mf:Vu,a=v(y,S),gc){T=0;do{if(gc=!1,fs=0,25<=T)throw Error(r(301));T+=1,nn=Xr=null,l.updateQueue=null,fc.current=ml,a=v(y,S)}while(gc)}if(fc.current=$u,l=Xr!==null&&Xr.next!==null,Ia=0,nn=Xr=Nr=null,pl=!1,l)throw Error(r(300));return a}function Ru(){var a=fs!==0;return fs=0,a}function _o(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Nr.memoizedState=nn=a:nn=nn.next=a,nn}function Fi(){if(Xr===null){var a=Nr.alternate;a=a!==null?a.memoizedState:null}else a=Xr.next;var l=nn===null?Nr.memoizedState:nn.next;if(l!==null)nn=l,Xr=a;else{if(a===null)throw Error(r(310));Xr=a,a={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},nn===null?Nr.memoizedState=nn=a:nn=nn.next=a}return nn}function zn(a,l){return typeof l=="function"?l(a):l}function Eh(a){var l=Fi(),v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=a;var y=Xr,S=y.baseQueue,T=v.pending;if(T!==null){if(S!==null){var O=S.next;S.next=T.next,T.next=O}y.baseQueue=S=T,v.pending=null}if(S!==null){T=S.next,y=y.baseState;var K=O=null,re=null,ye=T;do{var Me=ye.lane;if((Ia&Me)===Me)re!==null&&(re=re.next={lane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),y=ye.hasEagerState?ye.eagerState:a(y,ye.action);else{var Fe={lane:Me,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null};re===null?(K=re=Fe,O=y):re=re.next=Fe,Nr.lanes|=Me,Aa|=Me}ye=ye.next}while(ye!==null&&ye!==T);re===null?O=y:re.next=K,me(y,l.memoizedState)||(Yn=!0),l.memoizedState=y,l.baseState=O,l.baseQueue=re,v.lastRenderedState=y}if(a=v.interleaved,a!==null){S=a;do T=S.lane,Nr.lanes|=T,Aa|=T,S=S.next;while(S!==a)}else S===null&&(v.lanes=0);return[l.memoizedState,v.dispatch]}function fl(a){var l=Fi(),v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=a;var y=v.dispatch,S=v.pending,T=l.memoizedState;if(S!==null){v.pending=null;var O=S=S.next;do T=a(T,O.action),O=O.next;while(O!==S);me(T,l.memoizedState)||(Yn=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),v.lastRenderedState=T}return[T,y]}function Ou(){}function Mh(a,l){var v=Nr,y=Fi(),S=l(),T=!me(y.memoizedState,S);if(T&&(y.memoizedState=S,Yn=!0),y=y.queue,So(Go.bind(null,v,y,a),[a]),y.getSnapshot!==l||T||nn!==null&&nn.memoizedState.tag&1){if(v.flags|=2048,gl(9,ai.bind(null,v,y,S,l),void 0,null),un===null)throw Error(r(349));(Ia&30)!==0||Ih(v,l,S)}return S}function Ih(a,l,v){a.flags|=16384,a={getSnapshot:l,value:v},l=Nr.updateQueue,l===null?(l={lastEffect:null,stores:null},Nr.updateQueue=l,l.stores=[a]):(v=l.stores,v===null?l.stores=[a]:v.push(a))}function ai(a,l,v,y){l.value=v,l.getSnapshot=y,Nu(l)&&Lh(a)}function Go(a,l,v){return v(function(){Nu(l)&&Lh(a)})}function Nu(a){var l=a.getSnapshot;a=a.value;try{var v=l();return!me(a,v)}catch{return!0}}function Lh(a){var l=Xo(a,1);l!==null&&ro(l,a,1,-1)}function vc(a){var l=_o();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zn,lastRenderedState:a},l.queue=a,a=a.dispatch=S1.bind(null,Nr,a),[l.memoizedState,a]}function gl(a,l,v,y){return a={tag:a,create:l,destroy:v,deps:y,next:null},l=Nr.updateQueue,l===null?(l={lastEffect:null,stores:null},Nr.updateQueue=l,l.lastEffect=a.next=a):(v=l.lastEffect,v===null?l.lastEffect=a.next=a:(y=v.next,v.next=a,a.next=y,l.lastEffect=a)),a}function zu(){return Fi().memoizedState}function mc(a,l,v,y){var S=_o();Nr.flags|=a,S.memoizedState=gl(1|l,v,void 0,y===void 0?null:y)}function vl(a,l,v,y){var S=Fi();y=y===void 0?null:y;var T=void 0;if(Xr!==null){var O=Xr.memoizedState;if(T=O.destroy,y!==null&&Th(y,O.deps)){S.memoizedState=gl(l,v,T,y);return}}Nr.flags|=a,S.memoizedState=gl(1|l,v,T,y)}function Bu(a,l){return mc(8390656,8,a,l)}function So(a,l){return vl(2048,8,a,l)}function b1(a,l){return vl(4,2,a,l)}function Qo(a,l){return vl(4,4,a,l)}function Ph(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Ah(a,l,v){return v=v!=null?v.concat([a]):null,vl(4,4,Ph.bind(null,l,a),v)}function yc(){}function x1(a,l){var v=Fi();l=l===void 0?null:l;var y=v.memoizedState;return y!==null&&l!==null&&Th(l,y[1])?y[0]:(v.memoizedState=[a,l],a)}function w1(a,l){var v=Fi();l=l===void 0?null:l;var y=v.memoizedState;return y!==null&&l!==null&&Th(l,y[1])?y[0]:(a=a(),v.memoizedState=[a,l],a)}function C1(a,l,v){return(Ia&21)===0?(a.baseState&&(a.baseState=!1,Yn=!0),a.memoizedState=v):(me(v,l)||(v=Ws(),Nr.lanes|=v,Aa|=v,a.baseState=!0),l)}function _1(a,l){var v=Xt;Xt=v!==0&&4>v?v:4,a(!0);var y=kh.transition;kh.transition={};try{a(!1),l()}finally{Xt=v,kh.transition=y}}function Dh(){return Fi().memoizedState}function vf(a,l,v){var y=Ra(a);if(v={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null},Fh(a))Hn(l,v);else if(v=Lu(a,l,v,y),v!==null){var S=Zn();ro(v,a,y,S),Ki(v,l,y)}}function S1(a,l,v){var y=Ra(a),S={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null};if(Fh(a))Hn(l,S);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var O=l.lastRenderedState,K=T(O,v);if(S.hasEagerState=!0,S.eagerState=K,me(K,O)){var re=l.interleaved;re===null?(S.next=S,xh(l)):(S.next=re.next,re.next=S),l.interleaved=S;return}}catch{}finally{}v=Lu(a,l,S,y),v!==null&&(S=Zn(),ro(v,a,y,S),Ki(v,l,y))}}function Fh(a){var l=a.alternate;return a===Nr||l!==null&&l===Nr}function Hn(a,l){gc=pl=!0;var v=a.pending;v===null?l.next=l:(l.next=v.next,v.next=l),a.pending=l}function Ki(a,l,v){if((v&4194240)!==0){var y=l.lanes;y&=a.pendingLanes,v|=y,l.lanes=v,fa(a,v)}}var $u={readContext:Pi,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},mf={readContext:Pi,useCallback:function(a,l){return _o().memoizedState=[a,l===void 0?null:l],a},useContext:Pi,useEffect:Bu,useImperativeHandle:function(a,l,v){return v=v!=null?v.concat([a]):null,mc(4194308,4,Ph.bind(null,l,a),v)},useLayoutEffect:function(a,l){return mc(4194308,4,a,l)},useInsertionEffect:function(a,l){return mc(4,2,a,l)},useMemo:function(a,l){var v=_o();return l=l===void 0?null:l,a=a(),v.memoizedState=[a,l],a},useReducer:function(a,l,v){var y=_o();return l=v!==void 0?v(l):l,y.memoizedState=y.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},y.queue=a,a=a.dispatch=vf.bind(null,Nr,a),[y.memoizedState,a]},useRef:function(a){var l=_o();return a={current:a},l.memoizedState=a},useState:vc,useDebugValue:yc,useDeferredValue:function(a){return _o().memoizedState=a},useTransition:function(){var a=vc(!1),l=a[0];return a=_1.bind(null,a[1]),_o().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,v){var y=Nr,S=_o();if(Mr){if(v===void 0)throw Error(r(407));v=v()}else{if(v=l(),un===null)throw Error(r(349));(Ia&30)!==0||Ih(y,l,v)}S.memoizedState=v;var T={value:v,getSnapshot:l};return S.queue=T,Bu(Go.bind(null,y,T,a),[a]),y.flags|=2048,gl(9,ai.bind(null,y,T,v,l),void 0,null),v},useId:function(){var a=_o(),l=un.identifierPrefix;if(Mr){var v=yo,y=mo;v=(y&~(1<<32-ei(y)-1)).toString(32)+v,l=":"+l+"R"+v,v=fs++,0<v&&(l+="H"+v.toString(32)),l+=":"}else v=Ft++,l=":"+l+"r"+v.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},Vu={readContext:Pi,useCallback:x1,useContext:Pi,useEffect:So,useImperativeHandle:Ah,useInsertionEffect:b1,useLayoutEffect:Qo,useMemo:w1,useReducer:Eh,useRef:zu,useState:function(){return Eh(zn)},useDebugValue:yc,useDeferredValue:function(a){var l=Fi();return C1(l,Xr.memoizedState,a)},useTransition:function(){var a=Eh(zn)[0],l=Fi().memoizedState;return[a,l]},useMutableSource:Ou,useSyncExternalStore:Mh,useId:Dh,unstable_isNewReconciler:!1},ml={readContext:Pi,useCallback:x1,useContext:Pi,useEffect:So,useImperativeHandle:Ah,useInsertionEffect:b1,useLayoutEffect:Qo,useMemo:w1,useReducer:fl,useRef:zu,useState:function(){return fl(zn)},useDebugValue:yc,useDeferredValue:function(a){var l=Fi();return Xr===null?l.memoizedState=a:C1(l,Xr.memoizedState,a)},useTransition:function(){var a=fl(zn)[0],l=Fi().memoizedState;return[a,l]},useMutableSource:Ou,useSyncExternalStore:Mh,useId:Dh,unstable_isNewReconciler:!1};function Ri(a,l){if(a&&a.defaultProps){l=ue({},l),a=a.defaultProps;for(var v in a)l[v]===void 0&&(l[v]=a[v]);return l}return l}function Wu(a,l,v,y){l=a.memoizedState,v=v(y,l),v=v==null?l:ue({},l,v),a.memoizedState=v,a.lanes===0&&(a.updateQueue.baseState=v)}var Uu={isMounted:function(a){return(a=a._reactInternals)?fi(a)===a:!1},enqueueSetState:function(a,l,v){a=a._reactInternals;var y=Zn(),S=Ra(a),T=jo(y,S);T.payload=l,v!=null&&(T.callback=v),l=Di(a,T,S),l!==null&&(ro(l,a,S,y),Au(l,a,S))},enqueueReplaceState:function(a,l,v){a=a._reactInternals;var y=Zn(),S=Ra(a),T=jo(y,S);T.tag=1,T.payload=l,v!=null&&(T.callback=v),l=Di(a,T,S),l!==null&&(ro(l,a,S,y),Au(l,a,S))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var v=Zn(),y=Ra(a),S=jo(v,y);S.tag=2,l!=null&&(S.callback=l),l=Di(a,S,y),l!==null&&(ro(l,a,y,v),Au(l,a,y))}};function Rh(a,l,v,y,S,T,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,T,O):l.prototype&&l.prototype.isPureReactComponent?!Ye(v,y)||!Ye(S,T):!0}function vs(a,l,v){var y=!1,S=Sa,T=l.contextType;return typeof T=="object"&&T!==null?T=Pi(T):(S=ii(l)?Un:Fn.current,y=l.contextTypes,T=(y=y!=null)?ll(a,S):Sa),l=new l(v,T),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Uu,a.stateNode=l,l._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=T),l}function yl(a,l,v,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(v,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(v,y),l.state!==a&&Uu.enqueueReplaceState(l,l.state,null)}function Oh(a,l,v,y){var S=a.stateNode;S.props=v,S.state=a.memoizedState,S.refs={},Pu(a);var T=l.contextType;typeof T=="object"&&T!==null?S.context=Pi(T):(T=ii(l)?Un:Fn.current,S.context=ll(a,T)),S.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Wu(a,l,T,v),S.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&Uu.enqueueReplaceState(S,S.state,null),dl(a,v,S,y),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function ms(a,l){try{var v="",y=l;do v+=fe(y),y=y.return;while(y);var S=v}catch(T){S=`
Error generating stack: `+T.message+`
`+T.stack}return{value:a,source:l,stack:S,digest:null}}function Hu(a,l,v){return{value:a,source:null,stack:v??null,digest:l??null}}function bl(a,l){try{console.error(l.value)}catch(v){setTimeout(function(){throw v})}}var k1=typeof WeakMap=="function"?WeakMap:Map;function bc(a,l,v){v=jo(-1,v),v.tag=3,v.payload={element:null};var y=l.value;return v.callback=function(){td||(td=!0,qh=y),bl(a,l)},v}function Yu(a,l,v){v=jo(-1,v),v.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var S=l.value;v.payload=function(){return y(S)},v.callback=function(){bl(a,l)}}var T=a.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(v.callback=function(){bl(a,l),typeof y!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),v}function xc(a,l,v){var y=a.pingCache;if(y===null){y=a.pingCache=new k1;var S=new Set;y.set(l,S)}else S=y.get(l),S===void 0&&(S=new Set,y.set(l,S));S.has(v)||(S.add(v),a=kf.bind(null,a,l,v),l.then(a,a))}function T1(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function Nh(a,l,v,y,S){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(l=jo(-1,1),l.tag=2,Di(v,l,1))),v.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var Xu=A.ReactCurrentOwner,Yn=!1;function wn(a,l,v,y){l.child=a===null?Mu(l,null,v,y):Wr(l,a.child,v,y)}function E1(a,l,v,y,S){v=v.render;var T=l.ref;return Ea(l,S),y=gs(a,l,v,y,T,S),v=Ru(),a!==null&&!Yn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,qi(a,l,S)):(Mr&&v&&lc(l),l.flags|=1,wn(a,l,y,S),l.child)}function zh(a,l,v,y,S){if(a===null){var T=v.type;return typeof T=="function"&&!sd(T)&&T.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(l.tag=15,l.type=T,ko(a,l,T,y,S)):(a=ld(v.type,null,y,l,l.mode,S),a.ref=l.ref,a.return=l,l.child=a)}if(T=a.child,(a.lanes&S)===0){var O=T.memoizedProps;if(v=v.compare,v=v!==null?v:Ye,v(O,y)&&a.ref===l.ref)return qi(a,l,S)}return l.flags|=1,a=no(T,y),a.ref=l.ref,a.return=l,l.child=a}function ko(a,l,v,y,S){if(a!==null){var T=a.memoizedProps;if(Ye(T,y)&&a.ref===l.ref)if(Yn=!1,l.pendingProps=y=T,(a.lanes&S)!==0)(a.flags&131072)!==0&&(Yn=!0);else return l.lanes=a.lanes,qi(a,l,S)}return Vh(a,l,v,y,S)}function Bh(a,l,v){var y=l.pendingProps,S=y.children,T=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(_l,wi),wi|=v;else{if((v&1073741824)===0)return a=T!==null?T.baseLanes|v:v,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,_r(_l,wi),wi|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=T!==null?T.baseLanes:v,_r(_l,wi),wi|=y}else T!==null?(y=T.baseLanes|v,l.memoizedState=null):y=v,_r(_l,wi),wi|=y;return wn(a,l,S,v),l.child}function $h(a,l){var v=l.ref;(a===null&&v!==null||a!==null&&a.ref!==v)&&(l.flags|=512,l.flags|=2097152)}function Vh(a,l,v,y,S){var T=ii(v)?Un:Fn.current;return T=ll(l,T),Ea(l,S),v=gs(a,l,v,y,T,S),y=Ru(),a!==null&&!Yn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,qi(a,l,S)):(Mr&&y&&lc(l),l.flags|=1,wn(a,l,v,S),l.child)}function Wh(a,l,v,y,S){if(ii(v)){var T=!0;Mi(l)}else T=!1;if(Ea(l,S),l.stateNode===null)Zu(a,l),vs(l,v,y),Oh(l,v,y,S),y=!0;else if(a===null){var O=l.stateNode,K=l.memoizedProps;O.props=K;var re=O.context,ye=v.contextType;typeof ye=="object"&&ye!==null?ye=Pi(ye):(ye=ii(v)?Un:Fn.current,ye=ll(l,ye));var Me=v.getDerivedStateFromProps,Fe=typeof Me=="function"||typeof O.getSnapshotBeforeUpdate=="function";Fe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(K!==y||re!==ye)&&yl(l,O,y,ye),Ai=!1;var Ee=l.memoizedState;O.state=Ee,dl(l,y,O,S),re=l.memoizedState,K!==y||Ee!==re||ni.current||Ai?(typeof Me=="function"&&(Wu(l,v,Me,y),re=l.memoizedState),(K=Ai||Rh(l,v,K,y,Ee,re,ye))?(Fe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=re),O.props=y,O.state=re,O.context=ye,y=K):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{O=l.stateNode,m1(a,l),K=l.memoizedProps,ye=l.type===l.elementType?K:Ri(l.type,K),O.props=ye,Fe=l.pendingProps,Ee=O.context,re=v.contextType,typeof re=="object"&&re!==null?re=Pi(re):(re=ii(v)?Un:Fn.current,re=ll(l,re));var Xe=v.getDerivedStateFromProps;(Me=typeof Xe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(K!==Fe||Ee!==re)&&yl(l,O,y,re),Ai=!1,Ee=l.memoizedState,O.state=Ee,dl(l,y,O,S);var Je=l.memoizedState;K!==Fe||Ee!==Je||ni.current||Ai?(typeof Xe=="function"&&(Wu(l,v,Xe,y),Je=l.memoizedState),(ye=Ai||Rh(l,v,ye,y,Ee,Je,re)||!1)?(Me||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,Je,re),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,Je,re)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||K===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Je),O.props=y,O.state=Je,O.context=re,y=ye):(typeof O.componentDidUpdate!="function"||K===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=1024),y=!1)}return Uh(a,l,v,y,T,S)}function Uh(a,l,v,y,S,T){$h(a,l);var O=(l.flags&128)!==0;if(!y&&!O)return S&&d1(l,v,!1),qi(a,l,T);y=l.stateNode,Xu.current=l;var K=O&&typeof v.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,a!==null&&O?(l.child=Wr(l,a.child,null,T),l.child=Wr(l,null,K,T)):wn(a,l,K,T),l.memoizedState=y.state,S&&d1(l,v,!0),l.child}function M1(a){var l=a.stateNode;l.pendingContext?c1(a,l.pendingContext,l.pendingContext!==l.context):l.context&&c1(a,l.context,!1),Ch(a,l.containerInfo)}function To(a,l,v,y,S){return xo(),wo(S),l.flags|=256,wn(a,l,v,y),l.child}var wc={dehydrated:null,treeContext:null,retryLane:0};function Cc(a){return{baseLanes:a,cachePool:null,transitions:null}}function ju(a,l,v){var y=l.pendingProps,S=Fr.current,T=!1,O=(l.flags&128)!==0,K;if((K=O)||(K=a!==null&&a.memoizedState===null?!1:(S&2)!==0),K?(T=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),_r(Fr,S&1),a===null)return oi(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=y.children,a=y.fallback,T?(y=l.mode,T=l.child,O={mode:"hidden",children:O},(y&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=O):T=cd(O,y,0,null),a=Cs(a,y,v,null),T.return=l,a.return=l,T.sibling=a,l.child=T,l.child.memoizedState=Cc(v),l.memoizedState=wc,a):xl(l,O));if(S=a.memoizedState,S!==null&&(K=S.dehydrated,K!==null))return ut(a,l,O,y,K,S,v);if(T){T=y.fallback,O=l.mode,S=a.child,K=S.sibling;var re={mode:"hidden",children:y.children};return(O&1)===0&&l.child!==S?(y=l.child,y.childLanes=0,y.pendingProps=re,l.deletions=null):(y=no(S,re),y.subtreeFlags=S.subtreeFlags&14680064),K!==null?T=no(K,T):(T=Cs(T,O,v,null),T.flags|=2),T.return=l,y.return=l,y.sibling=T,l.child=y,y=T,T=l.child,O=a.child.memoizedState,O=O===null?Cc(v):{baseLanes:O.baseLanes|v,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=a.childLanes&~v,l.memoizedState=wc,y}return T=a.child,a=T.sibling,y=no(T,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=v),y.return=l,y.sibling=null,a!==null&&(v=l.deletions,v===null?(l.deletions=[a],l.flags|=16):v.push(a)),l.child=y,l.memoizedState=null,y}function xl(a,l){return l=cd({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Ko(a,l,v,y){return y!==null&&wo(y),Wr(l,a.child,null,v),a=xl(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function ut(a,l,v,y,S,T,O){if(v)return l.flags&256?(l.flags&=-257,y=Hu(Error(r(422))),Ko(a,l,O,y)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(T=y.fallback,S=l.mode,y=cd({mode:"visible",children:y.children},S,0,null),T=Cs(T,S,O,null),T.flags|=2,y.return=l,T.return=l,y.sibling=T,l.child=y,(l.mode&1)!==0&&Wr(l,a.child,null,O),l.child.memoizedState=Cc(O),l.memoizedState=wc,T);if((l.mode&1)===0)return Ko(a,l,O,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var K=y.dgst;return y=K,T=Error(r(419)),y=Hu(T,y,void 0),Ko(a,l,O,y)}if(K=(O&a.childLanes)!==0,Yn||K){if(y=un,y!==null){switch(O&-O){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|O))!==0?0:S,S!==0&&S!==T.retryLane&&(T.retryLane=S,Xo(a,S),ro(y,a,S,-1))}return i0(),y=Hu(Error(r(421))),Ko(a,l,O,y)}return S.data==="$?"?(l.flags|=128,l.child=a.child,l=Tf.bind(null,a),S._reactRetry=l,null):(a=T.treeContext,yi=Ca(S.nextSibling),On=l,Mr=!0,Qi=null,a!==null&&(Ii[Li++]=mo,Ii[Li++]=yo,Ii[Li++]=ls,mo=a.id,yo=a.overflow,ls=l),l=xl(l,y.children),l.flags|=4096,l)}function _c(a,l,v){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),xn(a.return,l,v)}function Sc(a,l,v,y,S){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:v,tailMode:S}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=v,T.tailMode=S)}function La(a,l,v){var y=l.pendingProps,S=y.revealOrder,T=y.tail;if(wn(a,l,y.children,v),y=Fr.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&_c(a,v,l);else if(a.tag===19)_c(a,v,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(_r(Fr,y),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(v=l.child,S=null;v!==null;)a=v.alternate,a!==null&&ps(a)===null&&(S=v),v=v.sibling;v=S,v===null?(S=l.child,l.child=null):(S=v.sibling,v.sibling=null),Sc(l,!1,S,v,T);break;case"backwards":for(v=null,S=l.child,l.child=null;S!==null;){if(a=S.alternate,a!==null&&ps(a)===null){l.child=S;break}a=S.sibling,S.sibling=v,v=S,S=a}Sc(l,!0,v,null,T);break;case"together":Sc(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Zu(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function qi(a,l,v){if(a!==null&&(l.dependencies=a.dependencies),Aa|=l.lanes,(v&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,v=no(a,a.pendingProps),l.child=v,v.return=l;a.sibling!==null;)a=a.sibling,v=v.sibling=no(a,a.pendingProps),v.return=l;v.sibling=null}return l.child}function I1(a,l,v){switch(l.tag){case 3:M1(l),xo();break;case 5:_h(l);break;case 1:ii(l.type)&&Mi(l);break;case 4:Ch(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,S=l.memoizedProps.value;_r(dc,y._currentValue),y._currentValue=S;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(_r(Fr,Fr.current&1),l.flags|=128,null):(v&l.child.childLanes)!==0?ju(a,l,v):(_r(Fr,Fr.current&1),a=qi(a,l,v),a!==null?a.sibling:null);_r(Fr,Fr.current&1);break;case 19:if(y=(v&l.childLanes)!==0,(a.flags&128)!==0){if(y)return La(a,l,v);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),_r(Fr,Fr.current),y)break;return null;case 22:case 23:return l.lanes=0,Bh(a,l,v)}return qi(a,l,v)}var Cn,Hh,L1,Yh;Cn=function(a,l){for(var v=l.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break;for(;v.sibling===null;){if(v.return===null||v.return===l)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Hh=function(){},L1=function(a,l,v,y){var S=a.memoizedProps;if(S!==y){a=l.stateNode,Zo(Co.current);var T=null;switch(v){case"input":S=qe(a,S),y=qe(a,y),T=[];break;case"select":S=ue({},S,{value:void 0}),y=ue({},y,{value:void 0}),T=[];break;case"textarea":S=mr(a,S),y=mr(a,y),T=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=bu)}_t(v,y);var O;v=null;for(ye in S)if(!y.hasOwnProperty(ye)&&S.hasOwnProperty(ye)&&S[ye]!=null)if(ye==="style"){var K=S[ye];for(O in K)K.hasOwnProperty(O)&&(v||(v={}),v[O]="")}else ye!=="dangerouslySetInnerHTML"&&ye!=="children"&&ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&ye!=="autoFocus"&&(i.hasOwnProperty(ye)?T||(T=[]):(T=T||[]).push(ye,null));for(ye in y){var re=y[ye];if(K=S!=null?S[ye]:void 0,y.hasOwnProperty(ye)&&re!==K&&(re!=null||K!=null))if(ye==="style")if(K){for(O in K)!K.hasOwnProperty(O)||re&&re.hasOwnProperty(O)||(v||(v={}),v[O]="");for(O in re)re.hasOwnProperty(O)&&K[O]!==re[O]&&(v||(v={}),v[O]=re[O])}else v||(T||(T=[]),T.push(ye,v)),v=re;else ye==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,K=K?K.__html:void 0,re!=null&&K!==re&&(T=T||[]).push(ye,re)):ye==="children"?typeof re!="string"&&typeof re!="number"||(T=T||[]).push(ye,""+re):ye!=="suppressContentEditableWarning"&&ye!=="suppressHydrationWarning"&&(i.hasOwnProperty(ye)?(re!=null&&ye==="onScroll"&&Tr("scroll",a),T||K===re||(T=[])):(T=T||[]).push(ye,re))}v&&(T=T||[]).push("style",v);var ye=T;(l.updateQueue=ye)&&(l.flags|=4)}},Yh=function(a,l,v,y){v!==y&&(l.flags|=4)};function kc(a,l){if(!Mr)switch(a.tailMode){case"hidden":l=a.tail;for(var v=null;l!==null;)l.alternate!==null&&(v=l),l=l.sibling;v===null?a.tail=null:v.sibling=null;break;case"collapsed":v=a.tail;for(var y=null;v!==null;)v.alternate!==null&&(y=v),v=v.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function _n(a){var l=a.alternate!==null&&a.alternate.child===a.child,v=0,y=0;if(l)for(var S=a.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=y,a.childLanes=v,l}function yf(a,l,v){var y=l.pendingProps;switch(us(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(l),null;case 1:return ii(l.type)&&_u(),_n(l),null;case 3:return y=l.stateNode,Ma(),Er(ni),Er(Fn),Fu(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(cc(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Qi!==null&&(t0(Qi),Qi=null))),Hh(a,l),_n(l),null;case 5:Du(l);var S=Zo(hl.current);if(v=l.type,a!==null&&l.stateNode!=null)L1(a,l,v,y,S),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(r(166));return _n(l),null}if(a=Zo(Co.current),cc(l)){y=l.stateNode,v=l.type;var T=l.memoizedProps;switch(y[go]=l,y[_a]=T,a=(l.mode&1)!==0,v){case"dialog":Tr("cancel",y),Tr("close",y);break;case"iframe":case"object":case"embed":Tr("load",y);break;case"video":case"audio":for(S=0;S<Wo.length;S++)Tr(Wo[S],y);break;case"source":Tr("error",y);break;case"img":case"image":case"link":Tr("error",y),Tr("load",y);break;case"details":Tr("toggle",y);break;case"input":ht(y,T),Tr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!T.multiple},Tr("invalid",y);break;case"textarea":ln(y,T),Tr("invalid",y)}_t(v,T),S=null;for(var O in T)if(T.hasOwnProperty(O)){var K=T[O];O==="children"?typeof K=="string"?y.textContent!==K&&(T.suppressHydrationWarning!==!0&&ic(y.textContent,K,a),S=["children",K]):typeof K=="number"&&y.textContent!==""+K&&(T.suppressHydrationWarning!==!0&&ic(y.textContent,K,a),S=["children",""+K]):i.hasOwnProperty(O)&&K!=null&&O==="onScroll"&&Tr("scroll",y)}switch(v){case"input":Le(y),or(y,T,!0);break;case"textarea":Le(y),cr(y);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(y.onclick=bu)}y=S,l.updateQueue=y,y!==null&&(l.flags|=4)}else{O=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Dt(v)),a==="http://www.w3.org/1999/xhtml"?v==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=O.createElement(v,{is:y.is}):(a=O.createElement(v),v==="select"&&(O=a,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):a=O.createElementNS(a,v),a[go]=l,a[_a]=y,Cn(a,l,!1,!1),l.stateNode=a;e:{switch(O=wt(v,y),v){case"dialog":Tr("cancel",a),Tr("close",a),S=y;break;case"iframe":case"object":case"embed":Tr("load",a),S=y;break;case"video":case"audio":for(S=0;S<Wo.length;S++)Tr(Wo[S],a);S=y;break;case"source":Tr("error",a),S=y;break;case"img":case"image":case"link":Tr("error",a),Tr("load",a),S=y;break;case"details":Tr("toggle",a),S=y;break;case"input":ht(a,y),S=qe(a,y),Tr("invalid",a);break;case"option":S=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},S=ue({},y,{value:void 0}),Tr("invalid",a);break;case"textarea":ln(a,y),S=mr(a,y),Tr("invalid",a);break;default:S=y}_t(v,S),K=S;for(T in K)if(K.hasOwnProperty(T)){var re=K[T];T==="style"?Ct(a,re):T==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&Gr(a,re)):T==="children"?typeof re=="string"?(v!=="textarea"||re!=="")&&ur(a,re):typeof re=="number"&&ur(a,""+re):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(i.hasOwnProperty(T)?re!=null&&T==="onScroll"&&Tr("scroll",a):re!=null&&L(a,T,re,O))}switch(v){case"input":Le(a),or(a,y,!1);break;case"textarea":Le(a),cr(a);break;case"option":y.value!=null&&a.setAttribute("value",""+Ie(y.value));break;case"select":a.multiple=!!y.multiple,T=y.value,T!=null?It(a,!!y.multiple,T,!1):y.defaultValue!=null&&It(a,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=bu)}switch(v){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return _n(l),null;case 6:if(a&&l.stateNode!=null)Yh(a,l,a.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(r(166));if(v=Zo(hl.current),Zo(Co.current),cc(l)){if(y=l.stateNode,v=l.memoizedProps,y[go]=l,(T=y.nodeValue!==v)&&(a=On,a!==null))switch(a.tag){case 3:ic(y.nodeValue,v,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&ic(y.nodeValue,v,(a.mode&1)!==0)}T&&(l.flags|=4)}else y=(v.nodeType===9?v:v.ownerDocument).createTextNode(y),y[go]=l,l.stateNode=y}return _n(l),null;case 13:if(Er(Fr),y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Mr&&yi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)yh(),xo(),l.flags|=98560,T=!1;else if(T=cc(l),y!==null&&y.dehydrated!==null){if(a===null){if(!T)throw Error(r(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[go]=l}else xo(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;_n(l),T=!1}else Qi!==null&&(t0(Qi),Qi=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=v,l):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Fr.current&1)!==0?on===0&&(on=3):i0())),l.updateQueue!==null&&(l.flags|=4),_n(l),null);case 4:return Ma(),Hh(a,l),a===null&&xa(l.stateNode.containerInfo),_n(l),null;case 10:return Iu(l.type._context),_n(l),null;case 17:return ii(l.type)&&_u(),_n(l),null;case 19:if(Er(Fr),T=l.memoizedState,T===null)return _n(l),null;if(y=(l.flags&128)!==0,O=T.rendering,O===null)if(y)kc(T,!1);else{if(on!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(O=ps(a),O!==null){for(l.flags|=128,kc(T,!1),y=O.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=v,v=l.child;v!==null;)T=v,a=y,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=a,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,a=O.dependencies,T.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),v=v.sibling;return _r(Fr,Fr.current&1|2),l.child}a=a.sibling}T.tail!==null&&br()>ys&&(l.flags|=128,y=!0,kc(T,!1),l.lanes=4194304)}else{if(!y)if(a=ps(O),a!==null){if(l.flags|=128,y=!0,v=a.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),kc(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!Mr)return _n(l),null}else 2*br()-T.renderingStartTime>ys&&v!==1073741824&&(l.flags|=128,y=!0,kc(T,!1),l.lanes=4194304);T.isBackwards?(O.sibling=l.child,l.child=O):(v=T.last,v!==null?v.sibling=O:l.child=O,T.last=O)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=br(),l.sibling=null,v=Fr.current,_r(Fr,y?v&1|2:v&1),l):(_n(l),null);case 22:case 23:return n0(),y=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(wi&1073741824)!==0&&(_n(l),l.subtreeFlags&6&&(l.flags|=8192)):_n(l),null;case 24:return null;case 25:return null}throw Error(r(156,l.tag))}function bf(a,l){switch(us(l),l.tag){case 1:return ii(l.type)&&_u(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Ma(),Er(ni),Er(Fn),Fu(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Du(l),null;case 13:if(Er(Fr),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));xo()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Er(Fr),null;case 4:return Ma(),null;case 10:return Iu(l.type._context),null;case 22:case 23:return n0(),null;case 24:return null;default:return null}}var Gu=!1,Rr=!1,Xn=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function wl(a,l){var v=a.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(y){zr(a,l,y)}else v.current=null}function Tc(a,l,v){try{v()}catch(y){zr(a,l,y)}}var P1=!1;function xf(a,l){if(oc=tu,a=fr(),ql(a)){if("selectionStart"in a)var v={start:a.selectionStart,end:a.selectionEnd};else e:{v=(v=a.ownerDocument)&&v.defaultView||window;var y=v.getSelection&&v.getSelection();if(y&&y.rangeCount!==0){v=y.anchorNode;var S=y.anchorOffset,T=y.focusNode;y=y.focusOffset;try{v.nodeType,T.nodeType}catch{v=null;break e}var O=0,K=-1,re=-1,ye=0,Me=0,Fe=a,Ee=null;t:for(;;){for(var Xe;Fe!==v||S!==0&&Fe.nodeType!==3||(K=O+S),Fe!==T||y!==0&&Fe.nodeType!==3||(re=O+y),Fe.nodeType===3&&(O+=Fe.nodeValue.length),(Xe=Fe.firstChild)!==null;)Ee=Fe,Fe=Xe;for(;;){if(Fe===a)break t;if(Ee===v&&++ye===S&&(K=O),Ee===T&&++Me===y&&(re=O),(Xe=Fe.nextSibling)!==null)break;Fe=Ee,Ee=Fe.parentNode}Fe=Xe}v=K===-1||re===-1?null:{start:K,end:re}}else v=null}v=v||{start:0,end:0}}else v=null;for(as={focusedElem:a,selectionRange:v},tu=!1,Qe=l;Qe!==null;)if(l=Qe,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Qe=a;else for(;Qe!==null;){l=Qe;try{var Je=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Je!==null){var et=Je.memoizedProps,jr=Je.memoizedState,he=l.stateNode,oe=he.getSnapshotBeforeUpdate(l.elementType===l.type?et:Ri(l.type,et),jr);he.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var ge=l.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ne){zr(l,l.return,Ne)}if(a=l.sibling,a!==null){a.return=l.return,Qe=a;break}Qe=l.return}return Je=P1,P1=!1,Je}function qo(a,l,v){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&a)===a){var T=S.destroy;S.destroy=void 0,T!==void 0&&Tc(l,v,T)}S=S.next}while(S!==y)}}function Ec(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var v=l=l.next;do{if((v.tag&a)===a){var y=v.create;v.destroy=y()}v=v.next}while(v!==l)}}function Qu(a){var l=a.ref;if(l!==null){var v=a.stateNode;switch(a.tag){case 5:a=v;break;default:a=v}typeof l=="function"?l(a):l.current=a}}function A1(a){var l=a.alternate;l!==null&&(a.alternate=null,A1(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[go],delete l[_a],delete l[wu],delete l[N],delete l[al])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function D1(a){return a.tag===5||a.tag===3||a.tag===4}function F1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||D1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Xh(a,l,v){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?v.nodeType===8?v.parentNode.insertBefore(a,l):v.insertBefore(a,l):(v.nodeType===8?(l=v.parentNode,l.insertBefore(a,v)):(l=v,l.appendChild(a)),v=v._reactRootContainer,v!=null||l.onclick!==null||(l.onclick=bu));else if(y!==4&&(a=a.child,a!==null))for(Xh(a,l,v),a=a.sibling;a!==null;)Xh(a,l,v),a=a.sibling}function Ku(a,l,v){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?v.insertBefore(a,l):v.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(Ku(a,l,v),a=a.sibling;a!==null;)Ku(a,l,v),a=a.sibling}var cn=null,Ji=!1;function Eo(a,l,v){for(v=v.child;v!==null;)jh(a,l,v),v=v.sibling}function jh(a,l,v){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(Qa,v)}catch{}switch(v.tag){case 5:Rr||wl(v,l);case 6:var y=cn,S=Ji;cn=null,Eo(a,l,v),cn=y,Ji=S,cn!==null&&(Ji?(a=cn,v=v.stateNode,a.nodeType===8?a.parentNode.removeChild(v):a.removeChild(v)):cn.removeChild(v.stateNode));break;case 18:cn!==null&&(Ji?(a=cn,v=v.stateNode,a.nodeType===8?gh(a.parentNode,v):a.nodeType===1&&gh(a,v),Zt(a)):gh(cn,v.stateNode));break;case 4:y=cn,S=Ji,cn=v.stateNode.containerInfo,Ji=!0,Eo(a,l,v),cn=y,Ji=S;break;case 0:case 11:case 14:case 15:if(!Rr&&(y=v.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var T=S,O=T.destroy;T=T.tag,O!==void 0&&((T&2)!==0||(T&4)!==0)&&Tc(v,l,O),S=S.next}while(S!==y)}Eo(a,l,v);break;case 1:if(!Rr&&(wl(v,l),y=v.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=v.memoizedProps,y.state=v.memoizedState,y.componentWillUnmount()}catch(K){zr(v,l,K)}Eo(a,l,v);break;case 21:Eo(a,l,v);break;case 22:v.mode&1?(Rr=(y=Rr)||v.memoizedState!==null,Eo(a,l,v),Rr=y):Eo(a,l,v);break;default:Eo(a,l,v)}}function Cl(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var v=a.stateNode;v===null&&(v=a.stateNode=new Xn),l.forEach(function(y){var S=Ef.bind(null,a,y);v.has(y)||(v.add(y),y.then(S,S))})}}function xi(a,l){var v=l.deletions;if(v!==null)for(var y=0;y<v.length;y++){var S=v[y];try{var T=a,O=l,K=O;e:for(;K!==null;){switch(K.tag){case 5:cn=K.stateNode,Ji=!1;break e;case 3:cn=K.stateNode.containerInfo,Ji=!0;break e;case 4:cn=K.stateNode.containerInfo,Ji=!0;break e}K=K.return}if(cn===null)throw Error(r(160));jh(T,O,S),cn=null,Ji=!1;var re=S.alternate;re!==null&&(re.return=null),S.return=null}catch(ye){zr(S,l,ye)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Zh(l,a),l=l.sibling}function Zh(a,l){var v=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(xi(l,a),eo(a),y&4){try{qo(3,a,a.return),Ec(3,a)}catch(et){zr(a,a.return,et)}try{qo(5,a,a.return)}catch(et){zr(a,a.return,et)}}break;case 1:xi(l,a),eo(a),y&512&&v!==null&&wl(v,v.return);break;case 5:if(xi(l,a),eo(a),y&512&&v!==null&&wl(v,v.return),a.flags&32){var S=a.stateNode;try{ur(S,"")}catch(et){zr(a,a.return,et)}}if(y&4&&(S=a.stateNode,S!=null)){var T=a.memoizedProps,O=v!==null?v.memoizedProps:T,K=a.type,re=a.updateQueue;if(a.updateQueue=null,re!==null)try{K==="input"&&T.type==="radio"&&T.name!=null&&vt(S,T),wt(K,O);var ye=wt(K,T);for(O=0;O<re.length;O+=2){var Me=re[O],Fe=re[O+1];Me==="style"?Ct(S,Fe):Me==="dangerouslySetInnerHTML"?Gr(S,Fe):Me==="children"?ur(S,Fe):L(S,Me,Fe,ye)}switch(K){case"input":bt(S,T);break;case"textarea":yn(S,T);break;case"select":var Ee=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!T.multiple;var Xe=T.value;Xe!=null?It(S,!!T.multiple,Xe,!1):Ee!==!!T.multiple&&(T.defaultValue!=null?It(S,!!T.multiple,T.defaultValue,!0):It(S,!!T.multiple,T.multiple?[]:"",!1))}S[_a]=T}catch(et){zr(a,a.return,et)}}break;case 6:if(xi(l,a),eo(a),y&4){if(a.stateNode===null)throw Error(r(162));S=a.stateNode,T=a.memoizedProps;try{S.nodeValue=T}catch(et){zr(a,a.return,et)}}break;case 3:if(xi(l,a),eo(a),y&4&&v!==null&&v.memoizedState.isDehydrated)try{Zt(l.containerInfo)}catch(et){zr(a,a.return,et)}break;case 4:xi(l,a),eo(a);break;case 13:xi(l,a),eo(a),S=a.child,S.flags&8192&&(T=S.memoizedState!==null,S.stateNode.isHidden=T,!T||S.alternate!==null&&S.alternate.memoizedState!==null||(Kh=br())),y&4&&Cl(a);break;case 22:if(Me=v!==null&&v.memoizedState!==null,a.mode&1?(Rr=(ye=Rr)||Me,xi(l,a),Rr=ye):xi(l,a),eo(a),y&8192){if(ye=a.memoizedState!==null,(a.stateNode.isHidden=ye)&&!Me&&(a.mode&1)!==0)for(Qe=a,Me=a.child;Me!==null;){for(Fe=Qe=Me;Qe!==null;){switch(Ee=Qe,Xe=Ee.child,Ee.tag){case 0:case 11:case 14:case 15:qo(4,Ee,Ee.return);break;case 1:wl(Ee,Ee.return);var Je=Ee.stateNode;if(typeof Je.componentWillUnmount=="function"){y=Ee,v=Ee.return;try{l=y,Je.props=l.memoizedProps,Je.state=l.memoizedState,Je.componentWillUnmount()}catch(et){zr(y,v,et)}}break;case 5:wl(Ee,Ee.return);break;case 22:if(Ee.memoizedState!==null){Pa(Fe);continue}}Xe!==null?(Xe.return=Ee,Qe=Xe):Pa(Fe)}Me=Me.sibling}e:for(Me=null,Fe=a;;){if(Fe.tag===5){if(Me===null){Me=Fe;try{S=Fe.stateNode,ye?(T=S.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(K=Fe.stateNode,re=Fe.memoizedProps.style,O=re!=null&&re.hasOwnProperty("display")?re.display:null,K.style.display=Ue("display",O))}catch(et){zr(a,a.return,et)}}}else if(Fe.tag===6){if(Me===null)try{Fe.stateNode.nodeValue=ye?"":Fe.memoizedProps}catch(et){zr(a,a.return,et)}}else if((Fe.tag!==22&&Fe.tag!==23||Fe.memoizedState===null||Fe===a)&&Fe.child!==null){Fe.child.return=Fe,Fe=Fe.child;continue}if(Fe===a)break e;for(;Fe.sibling===null;){if(Fe.return===null||Fe.return===a)break e;Me===Fe&&(Me=null),Fe=Fe.return}Me===Fe&&(Me=null),Fe.sibling.return=Fe.return,Fe=Fe.sibling}}break;case 19:xi(l,a),eo(a),y&4&&Cl(a);break;case 21:break;default:xi(l,a),eo(a)}}function eo(a){var l=a.flags;if(l&2){try{e:{for(var v=a.return;v!==null;){if(D1(v)){var y=v;break e}v=v.return}throw Error(r(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(ur(S,""),y.flags&=-33);var T=F1(a);Ku(a,T,S);break;case 3:case 4:var O=y.stateNode.containerInfo,K=F1(a);Xh(a,K,O);break;default:throw Error(r(161))}}catch(re){zr(a,a.return,re)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function qu(a,l,v){Qe=a,Gh(a)}function Gh(a,l,v){for(var y=(a.mode&1)!==0;Qe!==null;){var S=Qe,T=S.child;if(S.tag===22&&y){var O=S.memoizedState!==null||Gu;if(!O){var K=S.alternate,re=K!==null&&K.memoizedState!==null||Rr;K=Gu;var ye=Rr;if(Gu=O,(Rr=re)&&!ye)for(Qe=S;Qe!==null;)O=Qe,re=O.child,O.tag===22&&O.memoizedState!==null?R1(S):re!==null?(re.return=O,Qe=re):R1(S);for(;T!==null;)Qe=T,Gh(T),T=T.sibling;Qe=S,Gu=K,Rr=ye}to(a)}else(S.subtreeFlags&8772)!==0&&T!==null?(T.return=S,Qe=T):to(a)}}function to(a){for(;Qe!==null;){var l=Qe;if((l.flags&8772)!==0){var v=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Rr||Ec(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Rr)if(v===null)y.componentDidMount();else{var S=l.elementType===l.type?v.memoizedProps:Ri(l.type,v.memoizedProps);y.componentDidUpdate(S,v.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&wh(l,T,y);break;case 3:var O=l.updateQueue;if(O!==null){if(v=null,l.child!==null)switch(l.child.tag){case 5:v=l.child.stateNode;break;case 1:v=l.child.stateNode}wh(l,O,v)}break;case 5:var K=l.stateNode;if(v===null&&l.flags&4){v=K;var re=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&v.focus();break;case"img":re.src&&(v.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ye=l.alternate;if(ye!==null){var Me=ye.memoizedState;if(Me!==null){var Fe=Me.dehydrated;Fe!==null&&Zt(Fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Rr||l.flags&512&&Qu(l)}catch(Ee){zr(l,l.return,Ee)}}if(l===a){Qe=null;break}if(v=l.sibling,v!==null){v.return=l.return,Qe=v;break}Qe=l.return}}function Pa(a){for(;Qe!==null;){var l=Qe;if(l===a){Qe=null;break}var v=l.sibling;if(v!==null){v.return=l.return,Qe=v;break}Qe=l.return}}function R1(a){for(;Qe!==null;){var l=Qe;try{switch(l.tag){case 0:case 11:case 15:var v=l.return;try{Ec(4,l)}catch(re){zr(l,v,re)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var S=l.return;try{y.componentDidMount()}catch(re){zr(l,S,re)}}var T=l.return;try{Qu(l)}catch(re){zr(l,T,re)}break;case 5:var O=l.return;try{Qu(l)}catch(re){zr(l,O,re)}}}catch(re){zr(l,l.return,re)}if(l===a){Qe=null;break}var K=l.sibling;if(K!==null){K.return=l.return,Qe=K;break}Qe=l.return}}var O1=Math.ceil,Ju=A.ReactCurrentDispatcher,Qh=A.ReactCurrentOwner,Oi=A.ReactCurrentBatchConfig,Gt=0,un=null,qr=null,Sn=0,wi=0,_l=ri(0),on=0,Mc=null,Aa=0,Ic=0,ed=0,Lc=null,si=null,Kh=0,ys=1/0,Jo=null,td=!1,qh=null,Da=null,rd=!1,Fa=null,jn=0,Pc=0,Jh=null,nd=-1,Ac=0;function Zn(){return(Gt&6)!==0?br():nd!==-1?nd:nd=br()}function Ra(a){return(a.mode&1)===0?1:(Gt&2)!==0&&Sn!==0?Sn&-Sn:g1.transition!==null?(Ac===0&&(Ac=Ws()),Ac):(a=Xt,a!==0||(a=window.event,a=a===void 0?16:V0(a.type)),a)}function ro(a,l,v,y){if(50<Pc)throw Pc=0,Jh=null,Error(r(185));pa(a,v,y),((Gt&2)===0||a!==un)&&(a===un&&((Gt&2)===0&&(Ic|=v),on===4&&Oa(a,Sn)),li(a,y),v===1&&Gt===0&&(l.mode&1)===0&&(ys=br()+500,Su&&ka()))}function li(a,l){var v=a.callbackNode;Kc(a,l);var y=co(a,a===un?Sn:0);if(y===0)v!==null&&Bl(v),a.callbackNode=null,a.callbackPriority=0;else if(l=y&-y,a.callbackPriority!==l){if(v!=null&&Bl(v),l===1)a.tag===0?ss(N1.bind(null,a)):h1(N1.bind(null,a)),xu(function(){(Gt&6)===0&&ka()}),v=null;else{switch(uo(y)){case 1:v=$s;break;case 4:v=$l;break;case 16:v=da;break;case 536870912:v=Vs;break;default:v=da}v=H1(v,id.bind(null,a))}a.callbackPriority=l,a.callbackNode=v}}function id(a,l){if(nd=-1,Ac=0,(Gt&6)!==0)throw Error(r(327));var v=a.callbackNode;if(Sl()&&a.callbackNode!==v)return null;var y=co(a,a===un?Sn:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||l)l=od(a,y);else{l=y;var S=Gt;Gt|=2;var T=B1();(un!==a||Sn!==l)&&(Jo=null,ys=br()+500,xs(a,l));do try{_f();break}catch(K){z1(a,K)}while(!0);Yo(),Ju.current=T,Gt=S,qr!==null?l=0:(un=null,Sn=0,l=on)}if(l!==0){if(l===2&&(S=qa(a),S!==0&&(y=S,l=e0(a,S))),l===1)throw v=Mc,xs(a,0),Oa(a,y),li(a,br()),v;if(l===6)Oa(a,y);else{if(S=a.current.alternate,(y&30)===0&&!wf(S)&&(l=od(a,y),l===2&&(T=qa(a),T!==0&&(y=T,l=e0(a,T))),l===1))throw v=Mc,xs(a,0),Oa(a,y),li(a,br()),v;switch(a.finishedWork=S,a.finishedLanes=y,l){case 0:case 1:throw Error(r(345));case 2:ws(a,si,Jo);break;case 3:if(Oa(a,y),(y&130023424)===y&&(l=Kh+500-br(),10<l)){if(co(a,0)!==0)break;if(S=a.suspendedLanes,(S&y)!==y){Zn(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=wa(ws.bind(null,a,si,Jo),l);break}ws(a,si,Jo);break;case 4:if(Oa(a,y),(y&4194240)===y)break;for(l=a.eventTimes,S=-1;0<y;){var O=31-ei(y);T=1<<O,O=l[O],O>S&&(S=O),y&=~T}if(y=S,y=br()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*O1(y/1960))-y,10<y){a.timeoutHandle=wa(ws.bind(null,a,si,Jo),y);break}ws(a,si,Jo);break;case 5:ws(a,si,Jo);break;default:throw Error(r(329))}}}return li(a,br()),a.callbackNode===v?id.bind(null,a):null}function e0(a,l){var v=Lc;return a.current.memoizedState.isDehydrated&&(xs(a,l).flags|=256),a=od(a,l),a!==2&&(l=si,si=v,l!==null&&t0(l)),a}function t0(a){si===null?si=a:si.push.apply(si,a)}function wf(a){for(var l=a;;){if(l.flags&16384){var v=l.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var y=0;y<v.length;y++){var S=v[y],T=S.getSnapshot;S=S.value;try{if(!me(T(),S))return!1}catch{return!1}}}if(v=l.child,l.subtreeFlags&16384&&v!==null)v.return=l,l=v;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Oa(a,l){for(l&=~ed,l&=~Ic,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var v=31-ei(l),y=1<<v;a[v]=-1,l&=~y}}function N1(a){if((Gt&6)!==0)throw Error(r(327));Sl();var l=co(a,0);if((l&1)===0)return li(a,br()),null;var v=od(a,l);if(a.tag!==0&&v===2){var y=qa(a);y!==0&&(l=y,v=e0(a,y))}if(v===1)throw v=Mc,xs(a,0),Oa(a,l),li(a,br()),v;if(v===6)throw Error(r(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,ws(a,si,Jo),li(a,br()),null}function r0(a,l){var v=Gt;Gt|=1;try{return a(l)}finally{Gt=v,Gt===0&&(ys=br()+500,Su&&ka())}}function bs(a){Fa!==null&&Fa.tag===0&&(Gt&6)===0&&Sl();var l=Gt;Gt|=1;var v=Oi.transition,y=Xt;try{if(Oi.transition=null,Xt=1,a)return a()}finally{Xt=y,Oi.transition=v,Gt=l,(Gt&6)===0&&ka()}}function n0(){wi=_l.current,Er(_l)}function xs(a,l){a.finishedWork=null,a.finishedLanes=0;var v=a.timeoutHandle;if(v!==-1&&(a.timeoutHandle=-1,sc(v)),qr!==null)for(v=qr.return;v!==null;){var y=v;switch(us(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&_u();break;case 3:Ma(),Er(ni),Er(Fn),Fu();break;case 5:Du(y);break;case 4:Ma();break;case 13:Er(Fr);break;case 19:Er(Fr);break;case 10:Iu(y.type._context);break;case 22:case 23:n0()}v=v.return}if(un=a,qr=a=no(a.current,null),Sn=wi=l,on=0,Mc=null,ed=Ic=Aa=0,si=Lc=null,hs!==null){for(l=0;l<hs.length;l++)if(v=hs[l],y=v.interleaved,y!==null){v.interleaved=null;var S=y.next,T=v.pending;if(T!==null){var O=T.next;T.next=S,y.next=O}v.pending=y}hs=null}return a}function z1(a,l){do{var v=qr;try{if(Yo(),fc.current=$u,pl){for(var y=Nr.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}pl=!1}if(Ia=0,nn=Xr=Nr=null,gc=!1,fs=0,Qh.current=null,v===null||v.return===null){on=1,Mc=l,qr=null;break}e:{var T=a,O=v.return,K=v,re=l;if(l=Sn,K.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var ye=re,Me=K,Fe=Me.tag;if((Me.mode&1)===0&&(Fe===0||Fe===11||Fe===15)){var Ee=Me.alternate;Ee?(Me.updateQueue=Ee.updateQueue,Me.memoizedState=Ee.memoizedState,Me.lanes=Ee.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Xe=T1(O);if(Xe!==null){Xe.flags&=-257,Nh(Xe,O,K,T,l),Xe.mode&1&&xc(T,ye,l),l=Xe,re=ye;var Je=l.updateQueue;if(Je===null){var et=new Set;et.add(re),l.updateQueue=et}else Je.add(re);break e}else{if((l&1)===0){xc(T,ye,l),i0();break e}re=Error(r(426))}}else if(Mr&&K.mode&1){var jr=T1(O);if(jr!==null){(jr.flags&65536)===0&&(jr.flags|=256),Nh(jr,O,K,T,l),wo(ms(re,K));break e}}T=re=ms(re,K),on!==4&&(on=2),Lc===null?Lc=[T]:Lc.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var he=bc(T,re,l);y1(T,he);break e;case 1:K=re;var oe=T.type,ge=T.stateNode;if((T.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Da===null||!Da.has(ge)))){T.flags|=65536,l&=-l,T.lanes|=l;var Ne=Yu(T,K,l);y1(T,Ne);break e}}T=T.return}while(T!==null)}V1(v)}catch(rt){l=rt,qr===v&&v!==null&&(qr=v=v.return);continue}break}while(!0)}function B1(){var a=Ju.current;return Ju.current=$u,a===null?$u:a}function i0(){(on===0||on===3||on===2)&&(on=4),un===null||(Aa&268435455)===0&&(Ic&268435455)===0||Oa(un,Sn)}function od(a,l){var v=Gt;Gt|=2;var y=B1();(un!==a||Sn!==l)&&(Jo=null,xs(a,l));do try{Cf();break}catch(S){z1(a,S)}while(!0);if(Yo(),Gt=v,Ju.current=y,qr!==null)throw Error(r(261));return un=null,Sn=0,on}function Cf(){for(;qr!==null;)$1(qr)}function _f(){for(;qr!==null&&!Ga();)$1(qr)}function $1(a){var l=U1(a.alternate,a,wi);a.memoizedProps=a.pendingProps,l===null?V1(a):qr=l,Qh.current=null}function V1(a){var l=a;do{var v=l.alternate;if(a=l.return,(l.flags&32768)===0){if(v=yf(v,l,wi),v!==null){qr=v;return}}else{if(v=bf(v,l),v!==null){v.flags&=32767,qr=v;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{on=6,qr=null;return}}if(l=l.sibling,l!==null){qr=l;return}qr=l=a}while(l!==null);on===0&&(on=5)}function ws(a,l,v){var y=Xt,S=Oi.transition;try{Oi.transition=null,Xt=1,Sf(a,l,v,y)}finally{Oi.transition=S,Xt=y}return null}function Sf(a,l,v,y){do Sl();while(Fa!==null);if((Gt&6)!==0)throw Error(r(327));v=a.finishedWork;var S=a.finishedLanes;if(v===null)return null;if(a.finishedWork=null,a.finishedLanes=0,v===a.current)throw Error(r(177));a.callbackNode=null,a.callbackPriority=0;var T=v.lanes|v.childLanes;if(Yl(a,T),a===un&&(qr=un=null,Sn=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||rd||(rd=!0,H1(da,function(){return Sl(),null})),T=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||T){T=Oi.transition,Oi.transition=null;var O=Xt;Xt=1;var K=Gt;Gt|=4,Qh.current=null,xf(a,v),Zh(v,a),ff(as),tu=!!oc,as=oc=null,a.current=v,qu(v),jc(),Gt=K,Xt=O,Oi.transition=T}else a.current=v;if(rd&&(rd=!1,Fa=a,jn=S),T=a.pendingLanes,T===0&&(Da=null),Qc(v.stateNode),li(a,br()),l!==null)for(y=a.onRecoverableError,v=0;v<l.length;v++)S=l[v],y(S.value,{componentStack:S.stack,digest:S.digest});if(td)throw td=!1,a=qh,qh=null,a;return(jn&1)!==0&&a.tag!==0&&Sl(),T=a.pendingLanes,(T&1)!==0?a===Jh?Pc++:(Pc=0,Jh=a):Pc=0,ka(),null}function Sl(){if(Fa!==null){var a=uo(jn),l=Oi.transition,v=Xt;try{if(Oi.transition=null,Xt=16>a?16:a,Fa===null)var y=!1;else{if(a=Fa,Fa=null,jn=0,(Gt&6)!==0)throw Error(r(331));var S=Gt;for(Gt|=4,Qe=a.current;Qe!==null;){var T=Qe,O=T.child;if((Qe.flags&16)!==0){var K=T.deletions;if(K!==null){for(var re=0;re<K.length;re++){var ye=K[re];for(Qe=ye;Qe!==null;){var Me=Qe;switch(Me.tag){case 0:case 11:case 15:qo(8,Me,T)}var Fe=Me.child;if(Fe!==null)Fe.return=Me,Qe=Fe;else for(;Qe!==null;){Me=Qe;var Ee=Me.sibling,Xe=Me.return;if(A1(Me),Me===ye){Qe=null;break}if(Ee!==null){Ee.return=Xe,Qe=Ee;break}Qe=Xe}}}var Je=T.alternate;if(Je!==null){var et=Je.child;if(et!==null){Je.child=null;do{var jr=et.sibling;et.sibling=null,et=jr}while(et!==null)}}Qe=T}}if((T.subtreeFlags&2064)!==0&&O!==null)O.return=T,Qe=O;else e:for(;Qe!==null;){if(T=Qe,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:qo(9,T,T.return)}var he=T.sibling;if(he!==null){he.return=T.return,Qe=he;break e}Qe=T.return}}var oe=a.current;for(Qe=oe;Qe!==null;){O=Qe;var ge=O.child;if((O.subtreeFlags&2064)!==0&&ge!==null)ge.return=O,Qe=ge;else e:for(O=oe;Qe!==null;){if(K=Qe,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:Ec(9,K)}}catch(rt){zr(K,K.return,rt)}if(K===O){Qe=null;break e}var Ne=K.sibling;if(Ne!==null){Ne.return=K.return,Qe=Ne;break e}Qe=K.return}}if(Gt=S,ka(),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(Qa,a)}catch{}y=!0}return y}finally{Xt=v,Oi.transition=l}}return!1}function ad(a,l,v){l=ms(v,l),l=bc(a,l,1),a=Di(a,l,1),l=Zn(),a!==null&&(pa(a,1,l),li(a,l))}function zr(a,l,v){if(a.tag===3)ad(a,a,v);else for(;l!==null;){if(l.tag===3){ad(l,a,v);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Da===null||!Da.has(y))){a=ms(v,a),a=Yu(l,a,1),l=Di(l,a,1),a=Zn(),l!==null&&(pa(l,1,a),li(l,a));break}}l=l.return}}function kf(a,l,v){var y=a.pingCache;y!==null&&y.delete(l),l=Zn(),a.pingedLanes|=a.suspendedLanes&v,un===a&&(Sn&v)===v&&(on===4||on===3&&(Sn&130023424)===Sn&&500>br()-Kh?xs(a,0):ed|=v),li(a,l)}function W1(a,l){l===0&&((a.mode&1)===0?l=1:(l=Ka,Ka<<=1,(Ka&130023424)===0&&(Ka=4194304)));var v=Zn();a=Xo(a,l),a!==null&&(pa(a,l,v),li(a,v))}function Tf(a){var l=a.memoizedState,v=0;l!==null&&(v=l.retryLane),W1(a,v)}function Ef(a,l){var v=0;switch(a.tag){case 13:var y=a.stateNode,S=a.memoizedState;S!==null&&(v=S.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(l),W1(a,v)}var U1;U1=function(a,l,v){if(a!==null)if(a.memoizedProps!==l.pendingProps||ni.current)Yn=!0;else{if((a.lanes&v)===0&&(l.flags&128)===0)return Yn=!1,I1(a,l,v);Yn=(a.flags&131072)!==0}else Yn=!1,Mr&&(l.flags&1048576)!==0&&p1(l,Tu,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Zu(a,l),a=l.pendingProps;var S=ll(l,Fn.current);Ea(l,v),S=gs(null,l,y,a,S,v);var T=Ru();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ii(y)?(T=!0,Mi(l)):T=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Pu(l),S.updater=Uu,l.stateNode=S,S._reactInternals=l,Oh(l,y,a,v),l=Uh(null,l,y,!0,T,v)):(l.tag=0,Mr&&T&&lc(l),wn(null,l,S,v),l=l.child),l;case 16:y=l.elementType;e:{switch(Zu(a,l),a=l.pendingProps,S=y._init,y=S(y._payload),l.type=y,S=l.tag=If(y),a=Ri(y,a),S){case 0:l=Vh(null,l,y,a,v);break e;case 1:l=Wh(null,l,y,a,v);break e;case 11:l=E1(null,l,y,a,v);break e;case 14:l=zh(null,l,y,Ri(y.type,a),v);break e}throw Error(r(306,y,""))}return l;case 0:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ri(y,S),Vh(a,l,y,S,v);case 1:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ri(y,S),Wh(a,l,y,S,v);case 3:e:{if(M1(l),a===null)throw Error(r(387));y=l.pendingProps,T=l.memoizedState,S=T.element,m1(a,l),dl(l,y,null,v);var O=l.memoizedState;if(y=O.element,T.isDehydrated)if(T={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){S=ms(Error(r(423)),l),l=To(a,l,y,v,S);break e}else if(y!==S){S=ms(Error(r(424)),l),l=To(a,l,y,v,S);break e}else for(yi=Ca(l.stateNode.containerInfo.firstChild),On=l,Mr=!0,Qi=null,v=Mu(l,null,y,v),l.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(xo(),y===S){l=qi(a,l,v);break e}wn(a,l,y,v)}l=l.child}return l;case 5:return _h(l),a===null&&oi(l),y=l.type,S=l.pendingProps,T=a!==null?a.memoizedProps:null,O=S.children,ac(y,S)?O=null:T!==null&&ac(y,T)&&(l.flags|=32),$h(a,l),wn(a,l,O,v),l.child;case 6:return a===null&&oi(l),null;case 13:return ju(a,l,v);case 4:return Ch(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=Wr(l,null,y,v):wn(a,l,y,v),l.child;case 11:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ri(y,S),E1(a,l,y,S,v);case 7:return wn(a,l,l.pendingProps,v),l.child;case 8:return wn(a,l,l.pendingProps.children,v),l.child;case 12:return wn(a,l,l.pendingProps.children,v),l.child;case 10:e:{if(y=l.type._context,S=l.pendingProps,T=l.memoizedProps,O=S.value,_r(dc,y._currentValue),y._currentValue=O,T!==null)if(me(T.value,O)){if(T.children===S.children&&!ni.current){l=qi(a,l,v);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var K=T.dependencies;if(K!==null){O=T.child;for(var re=K.firstContext;re!==null;){if(re.context===y){if(T.tag===1){re=jo(-1,v&-v),re.tag=2;var ye=T.updateQueue;if(ye!==null){ye=ye.shared;var Me=ye.pending;Me===null?re.next=re:(re.next=Me.next,Me.next=re),ye.pending=re}}T.lanes|=v,re=T.alternate,re!==null&&(re.lanes|=v),xn(T.return,v,l),K.lanes|=v;break}re=re.next}}else if(T.tag===10)O=T.type===l.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(r(341));O.lanes|=v,K=O.alternate,K!==null&&(K.lanes|=v),xn(O,v,l),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===l){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}wn(a,l,S.children,v),l=l.child}return l;case 9:return S=l.type,y=l.pendingProps.children,Ea(l,v),S=Pi(S),y=y(S),l.flags|=1,wn(a,l,y,v),l.child;case 14:return y=l.type,S=Ri(y,l.pendingProps),S=Ri(y.type,S),zh(a,l,y,S,v);case 15:return ko(a,l,l.type,l.pendingProps,v);case 17:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ri(y,S),Zu(a,l),l.tag=1,ii(y)?(a=!0,Mi(l)):a=!1,Ea(l,v),vs(l,y,S),Oh(l,y,S,v),Uh(null,l,y,!0,a,v);case 19:return La(a,l,v);case 22:return Bh(a,l,v)}throw Error(r(156,l.tag))};function H1(a,l){return zl(a,l)}function Mf(a,l,v,y){this.tag=a,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ni(a,l,v,y){return new Mf(a,l,v,y)}function sd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function If(a){if(typeof a=="function")return sd(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ee)return 11;if(a===ie)return 14}return 2}function no(a,l){var v=a.alternate;return v===null?(v=Ni(a.tag,l,a.key,a.mode),v.elementType=a.elementType,v.type=a.type,v.stateNode=a.stateNode,v.alternate=a,a.alternate=v):(v.pendingProps=l,v.type=a.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=a.flags&14680064,v.childLanes=a.childLanes,v.lanes=a.lanes,v.child=a.child,v.memoizedProps=a.memoizedProps,v.memoizedState=a.memoizedState,v.updateQueue=a.updateQueue,l=a.dependencies,v.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},v.sibling=a.sibling,v.index=a.index,v.ref=a.ref,v}function ld(a,l,v,y,S,T){var O=2;if(y=a,typeof a=="function")sd(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case R:return Cs(v.children,S,T,l);case z:O=8,S|=8;break;case B:return a=Ni(12,v,l,S|2),a.elementType=B,a.lanes=T,a;case U:return a=Ni(13,v,l,S),a.elementType=U,a.lanes=T,a;case q:return a=Ni(19,v,l,S),a.elementType=q,a.lanes=T,a;case ae:return cd(v,S,T,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case W:O=10;break e;case X:O=9;break e;case ee:O=11;break e;case ie:O=14;break e;case le:O=16,y=null;break e}throw Error(r(130,a==null?a:typeof a,""))}return l=Ni(O,v,l,S),l.elementType=a,l.type=y,l.lanes=T,l}function Cs(a,l,v,y){return a=Ni(7,a,y,l),a.lanes=v,a}function cd(a,l,v,y){return a=Ni(22,a,y,l),a.elementType=ae,a.lanes=v,a.stateNode={isHidden:!1},a}function o0(a,l,v){return a=Ni(6,a,null,l),a.lanes=v,a}function a0(a,l,v){return l=Ni(4,a.children!==null?a.children:[],a.key,l),l.lanes=v,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function Lf(a,l,v,y,S){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function s0(a,l,v,y,S,T,O,K,re){return a=new Lf(a,l,v,K,re),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Ni(3,null,null,l),a.current=T,T.stateNode=a,T.memoizedState={element:y,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pu(T),a}function Pf(a,l,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:y==null?null:""+y,children:a,containerInfo:l,implementation:v}}function Y1(a){if(!a)return Sa;a=a._reactInternals;e:{if(fi(a)!==a||a.tag!==1)throw Error(r(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ii(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(r(171))}if(a.tag===1){var v=a.type;if(ii(v))return u1(a,v,l)}return l}function X1(a,l,v,y,S,T,O,K,re){return a=s0(v,y,!0,a,S,T,O,K,re),a.context=Y1(null),v=a.current,y=Zn(),S=Ra(v),T=jo(y,S),T.callback=l??null,Di(v,T,S),a.current.lanes=S,pa(a,S,y),li(a,y),a}function ud(a,l,v,y){var S=l.current,T=Zn(),O=Ra(S);return v=Y1(v),l.context===null?l.context=v:l.pendingContext=v,l=jo(T,O),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=Di(S,l,O),a!==null&&(ro(a,S,O,T),Au(a,S,O)),O}function dd(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function j1(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var v=a.retryLane;a.retryLane=v!==0&&v<l?v:l}}function l0(a,l){j1(a,l),(a=a.alternate)&&j1(a,l)}function Af(){return null}var Z1=typeof reportError=="function"?reportError:function(a){console.error(a)};function hd(a){this._internalRoot=a}Dc.prototype.render=hd.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));ud(a,l,null,null)},Dc.prototype.unmount=hd.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;bs(function(){ud(null,a,null,null)}),l[mi]=null}};function Dc(a){this._internalRoot=a}Dc.prototype.unstable_scheduleHydration=function(a){if(a){var l=Hs();a={blockedOn:null,target:a,priority:l};for(var v=0;v<Zi.length&&l!==0&&l<Zi[v].priority;v++);Zi.splice(v,0,a),v===0&&Zl(a)}};function c0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function pd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function G1(){}function Df(a,l,v,y,S){if(S){if(typeof y=="function"){var T=y;y=function(){var ye=dd(O);T.call(ye)}}var O=X1(l,y,a,0,null,!1,!1,"",G1);return a._reactRootContainer=O,a[mi]=O.current,xa(a.nodeType===8?a.parentNode:a),bs(),O}for(;S=a.lastChild;)a.removeChild(S);if(typeof y=="function"){var K=y;y=function(){var ye=dd(re);K.call(ye)}}var re=s0(a,0,!1,null,null,!1,!1,"",G1);return a._reactRootContainer=re,a[mi]=re.current,xa(a.nodeType===8?a.parentNode:a),bs(function(){ud(l,re,v,y)}),re}function _s(a,l,v,y,S){var T=v._reactRootContainer;if(T){var O=T;if(typeof S=="function"){var K=S;S=function(){var re=dd(O);K.call(re)}}ud(l,O,a,S)}else O=Df(v,l,a,S,y);return dd(O)}Us=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var v=No(l.pendingLanes);v!==0&&(fa(l,v|1),li(l,br()),(Gt&6)===0&&(ys=br()+500,ka()))}break;case 13:bs(function(){var y=Xo(a,1);if(y!==null){var S=Zn();ro(y,a,1,S)}}),l0(a,1)}},Ja=function(a){if(a.tag===13){var l=Xo(a,134217728);if(l!==null){var v=Zn();ro(l,a,134217728,v)}l0(a,134217728)}},Xl=function(a){if(a.tag===13){var l=Ra(a),v=Xo(a,l);if(v!==null){var y=Zn();ro(v,a,l,y)}l0(a,l)}},Hs=function(){return Xt},Ys=function(a,l){var v=Xt;try{return Xt=a,l()}finally{Xt=v}},yr=function(a,l,v){switch(l){case"input":if(bt(a,v),l=v.name,v.type==="radio"&&l!=null){for(v=a;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<v.length;l++){var y=v[l];if(y!==a&&y.form===a.form){var S=Cu(y);if(!S)throw Error(r(90));Ve(y),bt(y,S)}}}break;case"textarea":yn(a,v);break;case"select":l=v.value,l!=null&&It(a,!!v.multiple,l,!1)}},Jn=r0,Lt=bs;var Ff={usingClientEntryPoint:!1,Events:[Dn,Tt,Cu,Ur,Hr,r0]},Fc={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rf={bundleType:Fc.bundleType,version:Fc.version,rendererPackageName:Fc.rendererPackageName,rendererConfig:Fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ja(a),a===null?null:a.stateNode},findFiberByHostInstance:Fc.findFiberByHostInstance||Af,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{Qa=fd.inject(Rf),Re=fd}catch{}}return Vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ff,Vi.createPortal=function(a,l){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c0(l))throw Error(r(200));return Pf(a,l,null,v)},Vi.createRoot=function(a,l){if(!c0(a))throw Error(r(299));var v=!1,y="",S=Z1;return l!=null&&(l.unstable_strictMode===!0&&(v=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=s0(a,1,!1,null,null,v,!1,y,S),a[mi]=l.current,xa(a.nodeType===8?a.parentNode:a),new hd(l)},Vi.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=ja(l),a=a===null?null:a.stateNode,a},Vi.flushSync=function(a){return bs(a)},Vi.hydrate=function(a,l,v){if(!pd(l))throw Error(r(200));return _s(null,a,l,!0,v)},Vi.hydrateRoot=function(a,l,v){if(!c0(a))throw Error(r(405));var y=v!=null&&v.hydratedSources||null,S=!1,T="",O=Z1;if(v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(T=v.identifierPrefix),v.onRecoverableError!==void 0&&(O=v.onRecoverableError)),l=X1(l,null,a,1,v??null,S,!1,T,O),a[mi]=l.current,xa(a),y)for(a=0;a<y.length;a++)v=y[a],S=v._getVersion,S=S(v._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[v,S]:l.mutableSourceEagerHydrationData.push(v,S);return new Dc(l)},Vi.render=function(a,l,v){if(!pd(l))throw Error(r(200));return _s(null,a,l,!1,v)},Vi.unmountComponentAtNode=function(a){if(!pd(a))throw Error(r(40));return a._reactRootContainer?(bs(function(){_s(null,null,a,!1,function(){a._reactRootContainer=null,a[mi]=null})}),!0):!1},Vi.unstable_batchedUpdates=r0,Vi.unstable_renderSubtreeIntoContainer=function(a,l,v,y){if(!pd(v))throw Error(r(200));if(a==null||a._reactInternals===void 0)throw Error(r(38));return _s(a,l,v,!1,y)},Vi.version="18.3.1-next-f1338f8080-20240426",Vi}var om;function M6(){if(om)return Qf.exports;om=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Qf.exports=E6(),Qf.exports}var am;function I6(){if(am)return J1;am=1;var e=M6();return J1.createRoot=e.createRoot,J1.hydrateRoot=e.hydrateRoot,J1}var L6=I6(),P6=Object.defineProperty,A6=(e,t,r)=>t in e?P6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xe=(e,t,r)=>(A6(e,typeof t!="symbol"?t+"":t,r),r);/**
     * @license
     * KLineChart v10.0.0-alpha8
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */var kg=function(e,t){return kg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},kg(e,t)};function Pt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kg(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ze=function(){return Ze=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ze.apply(this,arguments)};function Sp(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Dy(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(p){try{h(n.next(p))}catch(g){s(g)}}function d(p){try{h(n.throw(p))}catch(g){s(g)}}function h(p){p.done?o(p.value):i(p.value).then(u,d)}h((n=n.apply(e,[])).next())})}function Fy(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(h){return function(p){return d([h,p])}}function d(h){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(p){h=[6,p],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function sa(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function B0(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function Vp(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function vn(e,t){if(!(!na(e)&&!na(t))){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=e[r],i=t[r];na(i)&&na(n)?vn(n,i):we(t[r])&&(e[r]=Od(t[r]))}}}function Od(e){if(!na(e))return e;var t=null;Va(e)?t=[]:t={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=e[r];na(n)?t[r]=Od(n):t[r]=n}return t}function Va(e){return Object.prototype.toString.call(e)==="[object Array]"}function pi(e){return typeof e=="function"}function na(e){return typeof e=="object"&&we(e)}function ct(e){return typeof e=="number"&&Number.isFinite(e)}function we(e){return e!=null}function L0(e){return typeof e=="boolean"}function lr(e){return typeof e=="string"}function Nd(e){return e==="transparent"||e==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(e)||/^[hH][Ss][Ll][Aa]\(([\s]*(3603[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(e)}function Il(e,t){var r=e.replace(/^#/,""),n=parseInt(r,16),i=n>>16&255,o=n>>8&255,s=n&255;return"rgba(".concat(i,", ").concat(o,", ").concat(s,", ").concat(t??1,")")}var dt={RED:"#F92855",GREEN:"#2DC08E",WHITE:"#FFFFFF",GREY:"#76808F",BLUE:"#1677FF"};function D6(){return{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]}}}function F6(){var e={show:!0,color:dt.GREY,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"};return{type:"candle_solid",bar:{compareRule:"current_open",upColor:dt.GREEN,downColor:dt.RED,noChangeColor:dt.GREY,upBorderColor:dt.GREEN,downBorderColor:dt.RED,noChangeBorderColor:dt.GREY,upWickColor:dt.GREEN,downWickColor:dt.RED,noChangeWickColor:dt.GREY},area:{lineSize:2,lineColor:dt.BLUE,smooth:!1,value:"close",backgroundColor:[{offset:0,color:Il(dt.BLUE,.01)},{offset:1,color:Il(dt.BLUE,.2)}],point:{show:!0,color:dt.BLUE,radius:4,rippleColor:Il(dt.BLUE,.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:Ze({},e),low:Ze({},e),last:{show:!0,compareRule:"current_open",upColor:dt.GREEN,downColor:dt.RED,noChangeColor:dt.GREY,line:{show:!0,style:"dashed",dashedValue:[4,4],size:1},text:{show:!0,style:"fill",size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:"solid",borderSize:0,borderDashedValue:[2,2],color:dt.WHITE,family:"Helvetica Neue",weight:"normal",borderRadius:2},extendTexts:[]}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",rect:{position:"fixed",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},title:{show:!0,size:14,family:"Helvetica Neue",weight:"normal",color:dt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,template:"{ticker}  {period}"},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:dt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a",template:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}]},features:[]},renko:{brick:{size:10}}}}function R6(){var e=Il(dt.GREEN,.7),t=Il(dt.RED,.7);return{ohlc:{compareRule:"current_open",upColor:e,downColor:t,noChangeColor:dt.GREY},bars:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:e,downColor:t,noChangeColor:dt.GREY}],lines:["#FF9600","#935EBD",dt.BLUE,"#E11D74","#01C5C4"].map(function(r){return{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:r}}),circles:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:e,downColor:t,noChangeColor:dt.GREY}],lastValueMark:{show:!1,text:{show:!1,style:"fill",color:dt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",title:{show:!0,showName:!0,showParams:!0,size:12,family:"Helvetica Neue",weight:"normal",color:dt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:dt.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a"},features:[]}}}function sm(){return{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:dt.GREY,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}}}function O6(){return{show:!0,horizontal:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:dt.GREY},text:{show:!0,style:"fill",color:dt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:dt.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:dt.GREY},features:[]},vertical:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:dt.GREY},text:{show:!0,style:"fill",color:dt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:dt.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:dt.GREY}}}}function N6(){var e=Il(dt.BLUE,.35),t=Il(dt.BLUE,.25);function r(){return{style:"fill",color:dt.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:dt.BLUE,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:dt.BLUE}}return{point:{color:dt.BLUE,borderColor:e,borderSize:1,radius:5,activeColor:dt.BLUE,activeBorderColor:e,activeBorderSize:3,activeRadius:5},line:{style:"solid",smooth:!1,color:dt.BLUE,size:1,dashedValue:[2,2]},rect:{style:"fill",color:t,borderColor:dt.BLUE,borderSize:1,borderRadius:0,borderStyle:"solid",borderDashedValue:[2,2]},polygon:{style:"fill",color:dt.BLUE,borderColor:dt.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},circle:{style:"fill",color:t,borderColor:dt.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},arc:{style:"solid",color:dt.BLUE,size:1,dashedValue:[2,2]},text:r()}}function z6(){return{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:Il(dt.BLUE,.08)}}function Ry(){return{grid:D6(),candle:F6(),indicator:R6(),xAxis:sm(),yAxis:sm(),separator:z6(),crosshair:O6(),overlay:N6()}}var B6=/\\(\\)?/g,$6=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function En(e,t,r){if(we(e)){var n=[];t.replace($6,function(u){for(var d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];var p=u;return we(d[1])?p=d[2].replace(B6,"$1"):we(d[0])&&(p=d[0].trim()),n.push(p),""});for(var i=e,o=0,s=n.length;we(i)&&o<s;)i=i==null?void 0:i[n[o++]];return we(i)?i:r??"--"}return r??"--"}function V6(e,t){var r={};return e.formatToParts(new Date(t)).forEach(function(n){var i=n.type,o=n.value;switch(i){case"year":{r.YYYY=o;break}case"month":{r.MM=o;break}case"day":{r.DD=o;break}case"hour":{r.HH=o==="24"?"00":o;break}case"minute":{r.mm=o;break}case"second":{r.ss=o;break}}}),r}function Oy(e,t,r){var n=V6(e,t);return r.replace(/YYYY|MM|DD|HH|mm|ss/g,function(i){return n[i]})}function Kn(e,t){var r=+e;return ct(r)?r.toFixed(t??2):"".concat(e)}function Ny(e){var t=+e;if(ct(t)){if(t>1e9)return"".concat(+(t/1e9).toFixed(3),"B");if(t>1e6)return"".concat(+(t/1e6).toFixed(3),"M");if(t>1e3)return"".concat(+(t/1e3).toFixed(3),"K")}return"".concat(e)}function zy(e,t){var r="".concat(e);if(t.length===0)return r;if(r.includes(".")){var n=r.split(".");return"".concat(n[0].replace(/(\d)(?=(\d{3})+$)/g,function(i){return"".concat(i).concat(t)}),".").concat(n[1])}return r.replace(/(\d)(?=(\d{3})+$)/g,function(i){return"".concat(i).concat(t)})}function By(e,t){var r="".concat(e),n=new RegExp("\\.0{"+t+",}[1-9][0-9]*$");if(n.test(r)){var i=r.split("."),o=i.length-1,s=i[o],u=/0*/.exec(s);if(we(u)){var d=u[0].length;return i[o]=s.replace(/0*/,"0{".concat(d,"}")),i.join(".")}}return r}function lm(e,t){return e.replace(/\{(\w+)\}/g,function(r,n){var i=t[n];return we(i)?i:"{".concat(n,"}")})}var h0=null;function Ll(e){var t,r;return(r=(t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.devicePixelRatio)!==null&&r!==void 0?r:1}function Hc(e,t,r){return"".concat(t??"normal"," ").concat(e??12,"px ").concat(r??"Helvetica Neue")}function ia(e,t,r,n){if(!we(h0)){var i=document.createElement("canvas"),o=Ll(i);h0=i.getContext("2d"),h0.scale(o,o)}return h0.font=Hc(t,r,n),Math.round(h0.measureText(e).width)}function kp(e){var t={width:0,height:0,left:0,right:0,top:0,bottom:0};return we(e)&&vn(t,e),t}var Pd=-1;function Tp(e){return pi(window.requestAnimationFrame)?window.requestAnimationFrame(e):window.setTimeout(e,20)}function cm(e){pi(window.cancelAnimationFrame)?window.cancelAnimationFrame(e):window.clearTimeout(e)}function um(e){if(pi(window.requestIdleCallback))return window.requestIdleCallback(e);var t=performance.now();return window.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-t))}})},1)}function W6(e){pi(window.cancelIdleCallback)?window.cancelIdleCallback(e):window.clearTimeout(e)}var Tg=function(){function e(t){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,vn(this._options,t)}return e.prototype._loop=function(){var t=this;this._running=!0;var r=function(){var n;if(t._running){var i=new Date().getTime()-t._time;i<t._options.duration?((n=t._doFrameCallback)===null||n===void 0||n.call(t,i),Tp(r)):(t.stop(),t._currentIterationCount++,t._currentIterationCount<t._options.iterationCount&&t.start())}};Tp(r)},e.prototype.doFrame=function(t){return this._doFrameCallback=t,this},e.prototype.setDuration=function(t){return this._options.duration=t,this},e.prototype.setIterationCount=function(t){return this._options.iterationCount=t,this},e.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},e.prototype.stop=function(){var t;this._running&&((t=this._doFrameCallback)===null||t===void 0||t.call(this,this._options.duration)),this._running=!1},e}(),Jf=1,dm=new Date().getTime();function fp(e){var t=new Date().getTime();return t===dm?++Jf:Jf=1,dm=t,"".concat(e??"").concat(t,"_").concat(Jf)}function Os(e,t){var r,n=document.createElement(e),i=t??{};for(var o in i)n.style[o]=(r=i[o])!==null&&r!==void 0?r:"";return n}function Eg(e,t,r){var n=0,i=0;for(i=e.length-1;n!==i;){var o=Math.floor((i+n)/2),s=i-n,u=e[o][t];if(r===e[n][t])return n;if(r===e[i][t])return i;if(r===u)return o;if(r>u?n=o:i=o,s<=2)break}return n}function U6(e){var t=Math.floor(Ms(e)),r=Vc(t),n=e/r,i=0;return n<1.5?i=1:n<2.5?i=2:n<3.5?i=3:n<4.5?i=4:n<5.5?i=5:n<6.5?i=6:i=8,e=i*r,+e.toFixed(Math.abs(t))}function hm(e,t){t=Math.max(0,t??0);var r=Math.pow(10,t);return Math.round(e*r)/r}function H6(e){var t=e.toString(),r=t.indexOf("e");if(r>0){var n=+t.slice(r+1);return n<0?-n:0}var i=t.indexOf(".");return i<0?0:t.length-1-i}function $y(e,t,r){for(var n,i,o=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],s=e.length,u=0;u<s;){var d=e[u];o[0]=Math.max((n=d[t])!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,o[0]),o[1]=Math.min((i=d[r])!==null&&i!==void 0?i:Number.MAX_SAFE_INTEGER,o[1]),++u}return o}function Ms(e){return e===0?0:Math.log10(e)}function Vc(e){return Math.pow(10,e)}function pm(){return{from:0,to:0,realFrom:0,realTo:0}}function fm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join("_")}var Y6=function(){function e(t){this._requestIdleCallbackId=Pd,this._tasks=t??[],this._operateTasks()}return e.prototype._operateTasks=function(t){var r=this;this._requestIdleCallbackId!==Pd&&(W6(this._requestIdleCallbackId),this._requestIdleCallbackId=Pd),t==null||t(),this._requestIdleCallbackId=um(function(n){r._runTasks(n)})},e.prototype._runTasks=function(t){for(var r=this;t.timeRemaining()>0&&this._tasks.length>0;){var n=this._tasks.shift();n==null||n.handler()}this._tasks.length>0&&(this._requestIdleCallbackId=um(function(i){r._runTasks(i)}))},e.prototype.addTask=function(t){var r=this;return this._operateTasks(function(){var n=r._tasks.findIndex(function(i){return i.id===t.id});n>-1?r._tasks[n]=t:r._tasks.push(t)}),this},e.prototype.removeTask=function(t){var r=this;return we(t)&&this._operateTasks(function(){if(we(t)){var n=r._tasks.findIndex(function(i){return i.id===t});n>-1&&r._tasks.splice(n,1)}else r._tasks=[]}),this},e}(),X6=function(){function e(){this._callbacks=[]}return e.prototype.subscribe=function(t){var r=this._callbacks.indexOf(t);r<0&&this._callbacks.push(t)},e.prototype.unsubscribe=function(t){if(pi(t)){var r=this._callbacks.indexOf(t);r>-1&&this._callbacks.splice(r,1)}else this._callbacks=[]},e.prototype.execute=function(t){this._callbacks.forEach(function(r){r(t)})},e.prototype.isEmpty=function(){return this._callbacks.length===0},e}();function Hg(e,t,r,n){var i=e.result,o=e.figures,s=e.styles,u=En(s,"circles",r.circles),d=u.length,h=En(s,"bars",r.bars),p=h.length,g=En(s,"lines",r.lines),m=g.length,b=0,x=0,C=0,_,k=0;o.forEach(function(M){var L,A,P,$;switch(M.type){case"circle":{k=b;var R=u[b%d];_=Ze(Ze({},R),{color:R.noChangeColor}),b++;break}case"bar":{k=x;var z=h[x%p];_=Ze(Ze({},z),{color:z.noChangeColor}),x++;break}case"line":{k=C,_=g[C%m],C++;break}}if(we(M.type)){var B=(L=M.styles)===null||L===void 0?void 0:L.call(M,{data:{prev:i[(A=t.prev)!==null&&A!==void 0?A:""],current:i[(P=t.current)!==null&&P!==void 0?P:""],next:i[($=t.next)!==null&&$!==void 0?$:""]},indicator:e,defaultStyles:r});n(M,Ze(Ze({},_),B),k)}})}var Vy=function(){function e(t){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series="normal",this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(r,n){var i=JSON.stringify(r.calcParams)!==JSON.stringify(n.calcParams)||r.figures!==n.figures||r.calc!==n.calc,o=i||r.shortName!==n.shortName||r.series!==n.series||r.minValue!==n.minValue||r.maxValue!==n.maxValue||r.precision!==n.precision||r.shouldOhlc!==n.shouldOhlc||r.shouldFormatBigNumber!==n.shouldFormatBigNumber||r.visible!==n.visible||r.zLevel!==n.zLevel||r.extendData!==n.extendData||r.regenerateFigures!==n.regenerateFigures||r.createTooltipDataSource!==n.createTooltipDataSource||r.draw!==n.draw;return{calc:i,draw:o}},this.calc=function(){return{}},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.onDataStateChange=null,this.result={},this._lockSeriesPrecision=!1,this.override(t),this._lockSeriesPrecision=!1}return e.prototype.override=function(t){var r,n,i=this,o=i.result,s=Sp(i,["result"]);this._prevIndicator=Ze(Ze({},Od(s)),{result:o});var u=t.id,d=t.name,h=t.shortName,p=t.precision,g=t.styles,m=t.figures,b=t.calcParams,x=Sp(t,["id","name","shortName","precision","styles","figures","calcParams"]);!lr(this.id)&&lr(u)&&(this.id=u),lr(this.name)||(this.name=d??""),this.shortName=(r=h??this.shortName)!==null&&r!==void 0?r:this.name,ct(p)&&(this.precision=p,this._lockSeriesPrecision=!0),we(g)&&((n=this.styles)!==null&&n!==void 0||(this.styles={}),vn(this.styles,g)),vn(this,x),we(b)&&(this.calcParams=b,pi(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=m??this.figures},e.prototype.setSeriesPrecision=function(t){this._lockSeriesPrecision||(this.precision=t)},e.prototype.shouldUpdateImp=function(){var t=this._prevIndicator.zLevel!==this.zLevel,r=this.shouldUpdate(this._prevIndicator,this);return L0(r)?{calc:r,draw:r,sort:t}:Ze(Ze({},r),{sort:t})},e.prototype.calcImp=function(t){return Dy(this,void 0,void 0,function(){var r;return Fy(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.calc(t,this)];case 1:return r=n.sent(),this.result=r,[2,!0];case 2:return n.sent(),[2,!1];case 3:return[2]}})})},e.extend=function(t){var r=function(n){Pt(i,n);function i(){return n.call(this,t)||this}return i}(e);return r},e}(),j6={name:"AVP",shortName:"AVP",series:"price",precision:2,styles:{lines:[{color:"#A020F0",size:1}]},figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(e){var t=0,r=0;return e.reduce(function(n,i){var o,s,u={},d=(o=i.turnover)!==null&&o!==void 0?o:0,h=(s=i.volume)!==null&&s!==void 0?s:0;return t+=d,r+=h,r!==0&&(u.avp=t/r),n[i.timestamp]=u,n},{})}},Z6={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(e){var t,r,n=e.data,i=e.indicator,o=e.defaultStyles,s=n.prev,u=n.current,d=(t=s==null?void 0:s.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,h=(r=u==null?void 0:u.ao)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER,p="";h>d?p=En(i.styles,"bars[0].upColor",o.bars[0].upColor):p=En(i.styles,"bars[0].downColor",o.bars[0].downColor);var g=h>d?"stroke":"fill";return{color:p,style:g,borderColor:p}}}],calc:function(e,t){var r=t.calcParams,n=Math.max(r[0],r[1]),i=0,o=0,s=0,u=0;return e.reduce(function(d,h,p){var g={},m=(h.low+h.high)/2;if(i+=m,o+=m,p>=r[0]-1){s=i/r[0];var b=e[p-(r[0]-1)];i-=(b.low+b.high)/2}if(p>=r[1]-1){u=o/r[1];var b=e[p-(r[1]-1)];o-=(b.low+b.high)/2}return p>=n-1&&(g.ao=s-u),d[h.timestamp]=g,d},{})}},G6={name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#ff0000",size:1}]},figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"bias".concat(r+1),title:"BIAS".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[];return e.reduce(function(o,s,u){var d={},h=s.close;return r.forEach(function(p,g){var m;if(i[g]=((m=i[g])!==null&&m!==void 0?m:0)+h,u>=p-1){var b=i[g]/r[g];d[n[g].key]=(h-b)/b*100,i[g]-=e[u-(p-1)].close}}),o[s.timestamp]=d,o},{})}};function Q6(e,t){var r=e.length,n=0;return e.forEach(function(i){var o=i.close-t;n+=o*o}),n=Math.abs(n),Math.sqrt(n/r)}var K6={name:"BOLL",shortName:"BOLL",series:"price",calcParams:[20,2],precision:2,shouldOhlc:!0,styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=r[0]-1,i=0;return e.reduce(function(o,s,u){var d=s.close,h={};if(i+=d,u>=n){h.mid=i/r[0];var p=Q6(e.slice(u-n,u+1),h.mid);h.up=h.mid+r[1]*p,h.dn=h.mid-r[1]*p,i-=e[u-n].close}return o[s.timestamp]=h,o},{})}},q6={name:"BRAR",shortName:"BRAR",calcParams:[26],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0;return e.reduce(function(u,d,h){var p,g,m={},b=d.high,x=d.low,C=d.open,_=((p=e[h-1])!==null&&p!==void 0?p:d).close;if(o+=b-C,s+=C-x,n+=b-_,i+=_-x,h>=r[0]-1){s!==0?m.ar=o/s*100:m.ar=0,i!==0?m.br=n/i*100:m.br=0;var k=e[h-(r[0]-1)],M=k.high,L=k.low,A=k.open,P=((g=e[h-r[0]])!==null&&g!==void 0?g:e[h-(r[0]-1)]).close;n-=M-P,i-=P-L,o-=M-A,s-=A-L}return u[d.timestamp]=m,u},{})}},J6={name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=Math.max.apply(Math,Vp([],B0(r),!1)),i=[],o=[];return e.reduce(function(s,u,d){var h={},p=u.close;if(r.forEach(function(m,b){var x;i[b]=((x=i[b])!==null&&x!==void 0?x:0)+p,d>=m-1&&(o[b]=i[b]/m,i[b]-=e[d-(m-1)].close)}),d>=n-1){var g=0;o.forEach(function(m){g+=m}),h.bbi=g/4}return s[u.timestamp]=h,s},{})}},e8={name:"CCI",shortName:"CCI",calcParams:[20],styles:{lines:[{color:"#007FFF",size:1}]},figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=r[0]-1,i=0,o=[];return e.reduce(function(s,u,d){var h={},p=(u.high+u.low+u.close)/3;if(i+=p,o.push(p),d>=n){var g=i/r[0],m=o.slice(d-n,d+1),b=0;m.forEach(function(_){b+=Math.abs(_-g)});var x=b/r[0];h.cci=x!==0?(p-g)/x/.015:0;var C=(e[d-n].high+e[d-n].low+e[d-n].close)/3;i-=C}return s[u.timestamp]=h,s},{})}},t8={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#FFFF00",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=Math.ceil(r[1]/2.5+1),i=Math.ceil(r[2]/2.5+1),o=Math.ceil(r[3]/2.5+1),s=Math.ceil(r[4]/2.5+1),u=0,d=[],h=0,p=[],g=0,m=[],b=0,x=[],C=[],_={};return e.forEach(function(k,M){var L,A,P,$,R,z={},B=(L=e[M-1])!==null&&L!==void 0?L:k,W=(B.high+B.close+B.low+B.open)/4,X=Math.max(0,k.high-W),ee=Math.max(0,W-k.low);M>=r[0]-1&&(ee!==0?z.cr=X/ee*100:z.cr=0,u+=z.cr,h+=z.cr,g+=z.cr,b+=z.cr,M>=r[0]+r[1]-2&&(d.push(u/r[1]),M>=r[0]+r[1]+n-3&&(z.ma1=d[d.length-1-n]),u-=(A=C[M-(r[1]-1)].cr)!==null&&A!==void 0?A:0),M>=r[0]+r[2]-2&&(p.push(h/r[2]),M>=r[0]+r[2]+i-3&&(z.ma2=p[p.length-1-i]),h-=(P=C[M-(r[2]-1)].cr)!==null&&P!==void 0?P:0),M>=r[0]+r[3]-2&&(m.push(g/r[3]),M>=r[0]+r[3]+o-3&&(z.ma3=m[m.length-1-o]),g-=($=C[M-(r[3]-1)].cr)!==null&&$!==void 0?$:0),M>=r[0]+r[4]-2&&(x.push(b/r[4]),M>=r[0]+r[4]+s-3&&(z.ma4=x[x.length-1-s]),b-=(R=C[M-(r[4]-1)].cr)!==null&&R!==void 0?R:0)),C.push(z),_[k.timestamp]=z}),_}},r8={name:"DMA",shortName:"DMA",calcParams:[10,50,10],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=Math.max(r[0],r[1]),i=0,o=0,s=0,u=[],d={};return e.forEach(function(h,p){var g,m={},b=h.close;i+=b,o+=b;var x=0,C=0;if(p>=r[0]-1&&(x=i/r[0],i-=e[p-(r[0]-1)].close),p>=r[1]-1&&(C=o/r[1],o-=e[p-(r[1]-1)].close),p>=n-1){var _=x-C;m.dma=_,s+=_,p>=n+r[2]-2&&(m.ama=s/r[2],s-=(g=u[p-(r[2]-1)].dma)!==null&&g!==void 0?g:0)}u.push(m),d[h.timestamp]=m}),d}},n8={name:"DMI",shortName:"DMI",calcParams:[14,6],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=0,g=[],m={};return e.forEach(function(b,x){var C,_,k={},M=(C=e[x-1])!==null&&C!==void 0?C:b,L=M.close,A=b.high,P=b.low,$=A-P,R=Math.abs(A-L),z=Math.abs(L-P),B=A-M.high,W=M.low-P,X=Math.max(Math.max($,R),z),ee=B>0&&B>W?B:0,U=W>0&&W>B?W:0;if(n+=X,i+=ee,o+=U,x>=r[0]-1){x>r[0]-1?(s=s-s/r[0]+X,u=u-u/r[0]+ee,d=d-d/r[0]+U):(s=n,u=i,d=o);var q=0,ie=0;s!==0&&(q=u*100/s,ie=d*100/s),k.pdi=q,k.mdi=ie;var le=0;ie+q!==0&&(le=Math.abs(ie-q)/(ie+q)*100),h+=le,x>=r[0]*2-2&&(x>r[0]*2-2?p=(p*(r[0]-1)+le)/r[0]:p=h/r[0],k.adx=p,x>=r[0]*2+r[1]-3&&(k.adxr=(((_=g[x-(r[1]-1)].adx)!==null&&_!==void 0?_:0)+p)/2))}g.push(k),m[b.timestamp]=k}),m}},i8={name:"EMV",shortName:"EMV",calcParams:[14,9],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=[];return e.reduce(function(o,s,u){var d,h={};if(u>0){var p=e[u-1],g=s.high,m=s.low,b=(d=s.volume)!==null&&d!==void 0?d:0,x=(g+m)/2-(p.high+p.low)/2;if(b===0||g-m===0)h.emv=0;else{var C=b/1e8/(g-m);h.emv=x/C}n+=h.emv,i.push(h.emv),u>=r[0]&&(h.maEmv=n/r[0],n-=i[u-r[0]])}return o[s.timestamp]=h,o},{})}},o8={name:"EMA",shortName:"EMA",series:"price",calcParams:[6,12,20],styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"ema".concat(r+1),title:"EMA".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=0,o=[];return e.reduce(function(s,u,d){var h={},p=u.close;return i+=p,r.forEach(function(g,m){d>=g-1&&(d>g-1?o[m]=(2*p+(g-1)*o[m])/(g+1):o[m]=i/g,h[n[m].key]=o[m])}),s[u.timestamp]=h,s},{})}},a8={name:"MTM",shortName:"MTM",calcParams:[12,6],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=[],o={};return e.forEach(function(s,u){var d,h={};if(u>=r[0]){var p=s.close,g=e[u-r[0]].close;h.mtm=p-g,n+=h.mtm,u>=r[0]+r[1]-1&&(h.maMtm=n/r[1],n-=(d=i[u-(r[1]-1)].mtm)!==null&&d!==void 0?d:0)}i.push(h),o[s.timestamp]=h}),o}},s8={name:"MA",shortName:"MA",series:"price",calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"ma".concat(r+1),title:"MA".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[];return e.reduce(function(o,s,u){var d={},h=s.close;return r.forEach(function(p,g){var m;i[g]=((m=i[g])!==null&&m!==void 0?m:0)+h,u>=p-1&&(d[n[g].key]=i[g]/p,i[g]-=e[u-(p-1)].close)}),o[s.timestamp]=d,o},{})}},l8={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(e){var t,r,n=e.data,i=e.indicator,o=e.defaultStyles,s=n.prev,u=n.current,d=(t=s==null?void 0:s.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,h=(r=u==null?void 0:u.macd)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER,p="";h>0?p=En(i.styles,"bars[0].upColor",o.bars[0].upColor):h<0?p=En(i.styles,"bars[0].downColor",o.bars[0].downColor):p=En(i.styles,"bars[0].noChangeColor",o.bars[0].noChangeColor);var g=d<h?"stroke":"fill";return{style:g,color:p,borderColor:p}}}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=0,d=0,h=Math.max(r[0],r[1]);return e.reduce(function(p,g,m){var b={},x=g.close;return n+=x,m>=r[0]-1&&(m>r[0]-1?i=(2*x+(r[0]-1)*i)/(r[0]+1):i=n/r[0]),m>=r[1]-1&&(m>r[1]-1?o=(2*x+(r[1]-1)*o)/(r[1]+1):o=n/r[1]),m>=h-1&&(s=i-o,b.dif=s,u+=s,m>=h+r[2]-2&&(m>h+r[2]-2?d=(s*2+d*(r[2]-1))/(r[2]+1):d=u/r[2],b.macd=(s-d)*2,b.dea=d)),p[g.timestamp]=b,p},{})}},c8={name:"OBV",shortName:"OBV",calcParams:[30],styles:{lines:[{color:"#A020F0",size:1},{color:"#007FFF",size:1}]},figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=[],s={};return e.forEach(function(u,d){var h,p,g,m,b=(h=e[d-1])!==null&&h!==void 0?h:u;u.close<b.close?i-=(p=u.volume)!==null&&p!==void 0?p:0:u.close>b.close&&(i+=(g=u.volume)!==null&&g!==void 0?g:0);var x={obv:i};n+=i,d>=r[0]-1&&(x.maObv=n/r[0],n-=(m=o[d-(r[0]-1)].obv)!==null&&m!==void 0?m:0),o.push(x),s[u.timestamp]=x}),s}},u8={name:"PVT",shortName:"PVT",styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(e){var t=0;return e.reduce(function(r,n,i){var o,s,u={},d=n.close,h=(o=n.volume)!==null&&o!==void 0?o:1,p=((s=e[i-1])!==null&&s!==void 0?s:n).close,g=0,m=p*h;return m!==0&&(g=(d-p)/m),t+=g,u.pvt=t,r[n.timestamp]=u,r},{})}},d8={name:"PSY",shortName:"PSY",calcParams:[12,6],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=[],s=[],u={};return e.forEach(function(d,h){var p,g,m={},b=((p=e[h-1])!==null&&p!==void 0?p:d).close,x=d.close-b>0?1:0;o.push(x),n+=x,h>=r[0]-1&&(m.psy=n/r[0]*100,i+=m.psy,h>=r[0]+r[1]-2&&(m.maPsy=i/r[1],i-=(g=s[h-(r[1]-1)].psy)!==null&&g!==void 0?g:0),n-=o[h-(r[0]-1)]),s.push(m),u[d.timestamp]=m}),u}},h8={name:"ROC",shortName:"ROC",calcParams:[12,6],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=[],i={},o=0;return e.forEach(function(s,u){var d,h,p={};if(u>=r[0]-1){var g=s.close,m=((d=e[u-r[0]])!==null&&d!==void 0?d:e[u-(r[0]-1)]).close;m!==0?p.roc=(g-m)/m*100:p.roc=0,o+=p.roc,u>=r[0]-1+r[1]-1&&(p.maRoc=o/r[1],o-=(h=n[u-(r[1]-1)].roc)!==null&&h!==void 0?h:0)}n.push(p),i[s.timestamp]=p}),i}},p8={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){var n=r+1;return{key:"rsi".concat(n),title:"RSI".concat(n,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[],o=[];return e.reduce(function(s,u,d){var h,p={},g=((h=e[d-1])!==null&&h!==void 0?h:u).close,m=u.close-g;return r.forEach(function(b,x){var C,_,k;if(m>0?i[x]=((C=i[x])!==null&&C!==void 0?C:0)+m:o[x]=((_=o[x])!==null&&_!==void 0?_:0)+Math.abs(m),d>=b-1){o[x]!==0?p[n[x].key]=100-100/(1+i[x]/o[x]):p[n[x].key]=0;var M=e[d-(b-1)],L=(k=e[d-b])!==null&&k!==void 0?k:M,A=M.close-L.close;A>0?i[x]-=A:o[x]-=Math.abs(A)}}),s[u.timestamp]=p,s},{})}},f8={name:"SMA",shortName:"SMA",series:"price",calcParams:[12,2],precision:2,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(e,t){var r=t.calcParams,n=0,i=0;return e.reduce(function(o,s,u){var d={},h=s.close;return n+=h,u>=r[0]-1&&(u>r[0]-1?i=(h*r[1]+i*(r[0]-r[1]+1))/(r[0]+1):i=n/r[0],d.sma=i),o[s.timestamp]=d,o},{})}},g8={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=[],i={};return e.forEach(function(o,s){var u,d,h,p,g={},m=o.close;if(s>=r[0]-1){var b=$y(e.slice(s-(r[0]-1),s+1),"high","low"),x=b[0],C=b[1],_=x-C,k=(m-C)/(_===0?1:_)*100;g.k=((r[1]-1)*((d=(u=n[s-1])===null||u===void 0?void 0:u.k)!==null&&d!==void 0?d:50)+k)/r[1],g.d=((r[2]-1)*((p=(h=n[s-1])===null||h===void 0?void 0:h.d)!==null&&p!==void 0?p:50)+g.k)/r[2],g.j=3*g.k-2*g.d}n.push(g),i[o.timestamp]=g}),i}},v8={name:"SAR",shortName:"SAR",series:"price",calcParams:[2,2,20],precision:2,shouldOhlc:!0,styles:{circles:[{upColor:"#FF7F50",downColor:"#A020F0",noChangeColor:"#A8A8A8"}]},figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(e){var t,r,n,i=e.data,o=e.indicator,s=e.defaultStyles,u=i.current,d=(t=u==null?void 0:u.sar)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,h=(((r=u==null?void 0:u.high)!==null&&r!==void 0?r:0)+((n=u==null?void 0:u.low)!==null&&n!==void 0?n:0))/2,p=d<h?En(o.styles,"circles[0].upColor",s.circles[0].upColor):En(o.styles,"circles[0].downColor",s.circles[0].downColor);return{color:p}}}],calc:function(e,t){var r=t.calcParams,n=r[0]/100,i=r[1]/100,o=r[2]/100,s=n,u=-100,d=!1,h=0;return e.reduce(function(p,g,m){var b=h,x=g.high,C=g.low;if(d){(u===-100||u<x)&&(u=x,s=Math.min(s+i,o)),h=b+s*(u-b);var _=Math.min(e[Math.max(1,m)-1].low,C);h>g.low?(h=u,s=n,u=-100,d=!d):h>_&&(h=_)}else{(u===-100||u>C)&&(u=C,s=Math.min(s+i,o)),h=b+s*(u-b);var k=Math.max(e[Math.max(1,m)-1].high,x);h<g.high?(h=u,s=0,u=-100,d=!d):h<k&&(h=k)}return p[g.timestamp]={high:x,low:C,sar:h},p},{})}},m8={name:"TRIX",shortName:"TRIX",calcParams:[12,9],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=[],g={};return e.forEach(function(m,b){var x,C={},_=m.close;if(n+=_,b>=r[0]-1&&(b>r[0]-1?i=(2*_+(r[0]-1)*i)/(r[0]+1):i=n/r[0],u+=i,b>=r[0]*2-2&&(b>r[0]*2-2?o=(2*i+(r[0]-1)*o)/(r[0]+1):o=u/r[0],d+=o,b>=r[0]*3-3))){var k=0,M=0;b>r[0]*3-3?(k=(2*o+(r[0]-1)*s)/(r[0]+1),M=(k-s)/s*100):k=d/r[0],s=k,C.trix=M,h+=M,b>=r[0]*3+r[1]-4&&(C.maTrix=h/r[1],h-=(x=p[b-(r[1]-1)].trix)!==null&&x!==void 0?x:0)}p.push(C),g[m.timestamp]=C}),g}};function gm(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(e){var t=e.data,r=e.indicator,n=e.defaultStyles,i=t.current,o=En(r.styles,"bars[0].noChangeColor",n.bars[0].noChangeColor);return we(i)&&(i.close>i.open?o=En(r.styles,"bars[0].upColor",n.bars[0].upColor):i.close<i.open&&(o=En(r.styles,"bars[0].downColor",n.bars[0].downColor))),{color:o}}}}var y8={name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},gm()],regenerateFigures:function(e){var t=e.map(function(r,n){return{key:"ma".concat(n+1),title:"MA".concat(r,": "),type:"line"}});return t.push(gm()),t},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[];return e.reduce(function(o,s,u){var d,h=(d=s.volume)!==null&&d!==void 0?d:0,p={volume:h,open:s.open,close:s.close};return r.forEach(function(g,m){var b,x;i[m]=((b=i[m])!==null&&b!==void 0?b:0)+h,u>=g-1&&(p[n[m].key]=i[m]/g,i[m]-=(x=e[u-(g-1)].volume)!==null&&x!==void 0?x:0)}),o[s.timestamp]=p,o},{})}},b8={name:"VR",shortName:"VR",calcParams:[26,6],styles:{lines:[{color:"#FF6E6E",size:2},{color:"#FFD700",size:4}]},figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=[],d={};return e.forEach(function(h,p){var g,m,b,x,C,_={},k=h.close,M=((g=e[p-1])!==null&&g!==void 0?g:h).close,L=(m=h.volume)!==null&&m!==void 0?m:0;if(k>M?n+=L:k<M?i+=L:o+=L,p>=r[0]-1){var A=o/2;i+A===0?_.vr=0:_.vr=(n+A)/(i+A)*100,s+=_.vr,p>=r[0]+r[1]-2&&(_.maVr=s/r[1],s-=(b=u[p-(r[1]-1)].vr)!==null&&b!==void 0?b:0);var P=e[p-(r[0]-1)],$=(x=e[p-r[0]])!==null&&x!==void 0?x:P,R=P.close,z=(C=P.volume)!==null&&C!==void 0?C:0;R>$.close?n-=z:R<$.close?i-=z:o-=z}u.push(_),d[h.timestamp]=_}),d}},x8={name:"WR",shortName:"WR",calcParams:[6,10,14],styles:{lines:[{color:"#A020F0",size:1},{color:"#FFD700",size:1},{color:"#FF6E6E",size:1}]},figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"wr".concat(r+1),title:"WR".concat(r+1,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures;return e.reduce(function(i,o,s){var u={},d=o.close;return r.forEach(function(h,p){var g=h-1;if(s>=g){var m=$y(e.slice(s-g,s+1),"high","low"),b=m[0],x=m[1],C=b-x;u[n[p].key]=C===0?0:(d-b)/C*100}}),i[o.timestamp]=u,i},{})}},Yg={},w8=[j6,Z6,G6,K6,q6,J6,e8,t8,r8,n8,i8,o8,a8,s8,l8,c8,u8,d8,h8,p8,f8,g8,v8,m8,y8,b8,x8];w8.forEach(function(e){Yg[e.name]=Vy.extend(e)});function Wy(e){Yg[e.name]=Vy.extend(e)}function Uy(e){var t;return(t=Yg[e])!==null&&t!==void 0?t:null}function ra(e,t){var r,n=(r=t==null?void 0:t.ignoreEvent)!==null&&r!==void 0?r:!1;return L0(n)?!n:!n.includes(e)}var vm=1,p0=-1,C8="overlay_",md="overlay_figure_",Hy=function(){function e(t){this.groupId="",this.totalStep=1,this.currentStep=vm,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode="normal",this.modeSensitivity=8,this.points=[],this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseMove=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevZLevel=0,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(t)}return e.prototype.override=function(t){var r,n;this._prevOverlay=Od(this);var i=t.id,o=t.name;t.currentStep;var s=t.points,u=t.styles,d=Sp(t,["id","name","currentStep","points","styles"]);if(vn(this,d),lr(this.name)||(this.name=o??""),!lr(this.id)&&lr(i)&&(this.id=i),we(u)&&((r=this.styles)!==null&&r!==void 0||(this.styles={}),vn(this.styles,u)),Va(s)&&s.length>0){var h=0;if(this.points=Vp([],B0(s),!1),s.length>=this.totalStep-1?(this.currentStep=p0,h=this.totalStep-1):(this.currentStep=s.length+1,h=s.length),pi(this.performEventMoveForDrawing))for(var p=0;p<h;p++)this.performEventMoveForDrawing({currentStep:p+2,mode:this.mode,points:this.points,performPointIndex:p,performPoint:this.points[p]});this.currentStep===p0&&((n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},e.prototype.getPrevZLevel=function(){return this._prevZLevel},e.prototype.setPrevZLevel=function(t){this._prevZLevel=t},e.prototype.shouldUpdate=function(){var t=this._prevOverlay.zLevel!==this.zLevel,r=t||JSON.stringify(this._prevOverlay.points)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles;return{sort:t,draw:r}},e.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=p0:this.currentStep++},e.prototype.forceComplete=function(){this.currentStep=p0},e.prototype.isDrawing=function(){return this.currentStep!==p0},e.prototype.isStart=function(){return this.currentStep===vm},e.prototype.eventMoveForDrawing=function(t){var r,n=this.currentStep-1,i={};ct(t.timestamp)&&(i.timestamp=t.timestamp),ct(t.dataIndex)&&(i.dataIndex=t.dataIndex),ct(t.value)&&(i.value=t.value),this.points[n]=i,(r=this.performEventMoveForDrawing)===null||r===void 0||r.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:n,performPoint:i})},e.prototype.eventPressedPointMove=function(t,r){var n;this.points[r].timestamp=t.timestamp,ct(t.value)&&(this.points[r].value=t.value),(n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:r,performPoint:this.points[r]})},e.prototype.startPressedMove=function(t){this._prevPressedPoint=Ze({},t),this._prevPressedPoints=Od(this.points)},e.prototype.eventPressedOtherMove=function(t,r){if(this._prevPressedPoint!==null){var n=null;ct(t.dataIndex)&&ct(this._prevPressedPoint.dataIndex)&&(n=t.dataIndex-this._prevPressedPoint.dataIndex);var i=null;ct(t.value)&&ct(this._prevPressedPoint.value)&&(i=t.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(o){var s;ct(o.timestamp)&&(o.dataIndex=r.timestampToDataIndex(o.timestamp));var u=Ze({},o);return ct(n)&&ct(o.dataIndex)&&(u.dataIndex=o.dataIndex+n,u.timestamp=(s=r.dataIndexToTimestamp(u.dataIndex))!==null&&s!==void 0?s:void 0),ct(i)&&ct(o.value)&&(u.value=o.value+i),u})}},e.extend=function(t){var r=function(n){Pt(i,n);function i(){return n.call(this,t)||this}return i}(e);return r},e}(),_8={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t,r,n,i=e.chart,o=e.coordinates,s=e.bounding,u=e.overlay,d=e.yAxis,h=u.points;if(o.length>0){var p=0;if(!((t=d==null?void 0:d.isInCandle())!==null&&t!==void 0)||t)p=(n=(r=i.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2;else{var g=i.getIndicators({paneId:u.paneId});g.forEach(function(L){p=Math.max(p,L.precision)})}var m=[],b=[],x=0,C=s.width;if(o.length>1&&ct(h[0].value)&&ct(h[1].value)){var _=[1,.786,.618,.5,.382,.236,0],k=o[0].y-o[1].y,M=h[0].value-h[1].value;_.forEach(function(L){var A,P=o[1].y+k*L,$=i.getDecimalFold().format(i.getThousandsSeparator().format((((A=h[1].value)!==null&&A!==void 0?A:0)+M*L).toFixed(p)));m.push({coordinates:[{x,y:P},{x:C,y:P}]}),b.push({x,y:P,text:"".concat($," (").concat((L*100).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:m},{type:"text",isCheckEvent:!1,attrs:b}]}return[]}},S8={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding,n={x:0,y:t[0].y};return we(t[1])&&t[0].x<t[1].x&&(n.x=r.width),[{type:"line",attrs:{coordinates:[t[0],n]}}]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].value=r.value,t[1].value=r.value},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].value=n.value)}},k8={name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=[];return t.length===2&&r.push({coordinates:t}),[{type:"line",attrs:r}]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].value=r.value,t[1].value=r.value},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].value=n.value)}},T8={name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:r.width,y:t[0].y}]}}]}},Xg=function(){function e(){this._children=[],this._callbacks=new Map}return e.prototype.registerEvent=function(t,r){return this._callbacks.set(t,r),this},e.prototype.onEvent=function(t,r){var n=this._callbacks.get(t);return we(n)&&this.checkEventOn(r)?n(r):!1},e.prototype.dispatchEventToChildren=function(t,r){var n=this._children.length-1;if(n>-1){for(var i=n;i>-1;i--)if(this._children[i].dispatchEvent(t,r))return!0}return!1},e.prototype.dispatchEvent=function(t,r){return this.dispatchEventToChildren(t,r)?!0:this.onEvent(t,r)},e.prototype.addChild=function(t){return this._children.push(t),this},e.prototype.clear=function(){this._children=[]},e}(),$n=2,E8=function(e){Pt(t,e);function t(r){var n=e.call(this)||this;return n.attrs=r.attrs,n.styles=r.styles,n}return t.prototype.checkEventOn=function(r){return this.checkEventOnImp(r,this.attrs,this.styles)},t.prototype.setAttrs=function(r){return this.attrs=r,this},t.prototype.setStyles=function(r){return this.styles=r,this},t.prototype.draw=function(r){this.drawImp(r,this.attrs,this.styles)},t.extend=function(r){var n=function(i){Pt(o,i);function o(){return i!==null&&i.apply(this,arguments)||this}return o.prototype.checkEventOnImp=function(s,u,d){return r.checkEventOn(s,u,d)},o.prototype.drawImp=function(s,u,d){r.draw(s,u,d)},o}(t);return n},t}(Xg);function Yy(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){var u=s.value,d=u.coordinates;if(d.length>1)for(var h=1;h<d.length;h++){var p=d[h-1],g=d[h];if(p.x===g.x){if(Math.abs(p.y-e.y)+Math.abs(g.y-e.y)-Math.abs(p.y-g.y)<$n+$n&&Math.abs(e.x-p.x)<$n)return!0}else{var m=Wp(p,g),b=jg(m,e),x=Math.abs(b-e.y);if(Math.abs(p.x-e.x)+Math.abs(g.x-e.x)-Math.abs(p.x-g.x)<$n+$n&&x*x/(m[0]*m[0]+1)<$n*$n)return!0}}}}catch(C){r={error:C}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function jg(e,t){return e!==null?t.x*e[0]+e[1]:t.y}function P0(e,t,r){var n=Wp(e,t);return jg(n,r)}function Wp(e,t){var r=e.x-t.x;if(r!==0){var n=(e.y-t.y)/r,i=e.y-n*e.x;return[n,i]}return null}function Xy(e,t,r){var n=t.length,i=ct(r)?r>0&&r<1?r:0:r?.5:0;if(i>0&&n>2){for(var o=t[0].x,s=t[0].y,u=1;u<n-1;u++){var d=t[u-1],h=t[u],p=t[u+1],g=h.x-d.x,m=h.y-d.y,b=p.x-h.x,x=p.y-h.y,C=p.x-d.x,_=p.y-d.y,k=Math.sqrt(g*g+m*m),M=Math.sqrt(b*b+x*x),L=M/(M+k),A=h.x+C*i*L,P=h.y+_*i*L;A=Math.min(A,Math.max(p.x,h.x)),P=Math.min(P,Math.max(p.y,h.y)),A=Math.max(A,Math.min(p.x,h.x)),P=Math.max(P,Math.min(p.y,h.y)),C=A-h.x,_=P-h.y;var $=h.x-C*k/M,R=h.y-_*k/M;$=Math.min($,Math.max(d.x,h.x)),R=Math.min(R,Math.max(d.y,h.y)),$=Math.max($,Math.min(d.x,h.x)),R=Math.max(R,Math.min(d.y,h.y)),C=h.x-$,_=h.y-R,A=h.x+C*M/k,P=h.y+_*M/k,e.bezierCurveTo(o,s,$,R,h.x,h.y),o=A,s=P}var z=t[n-1];e.bezierCurveTo(o,s,z.x,z.y,z.x,z.y)}else for(var u=1;u<n;u++)e.lineTo(t[u].x,t[u].y)}function M8(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"solid":i,s=r.smooth,u=s===void 0?!1:s,d=r.size,h=d===void 0?1:d,p=r.color,g=p===void 0?"currentColor":p,m=r.dashedValue,b=m===void 0?[2,2]:m;e.lineWidth=h,e.strokeStyle=g,o==="dashed"?e.setLineDash(b):e.setLineDash([]);var x=h%2===1?.5:0;n.forEach(function(C){var _=C.coordinates;_.length>1&&(_.length===2&&(_[0].x===_[1].x||_[0].y===_[1].y)?(e.beginPath(),_[0].x===_[1].x?(e.moveTo(_[0].x+x,_[0].y),e.lineTo(_[1].x+x,_[1].y)):(e.moveTo(_[0].x,_[0].y+x),e.lineTo(_[1].x,_[1].y+x)),e.stroke(),e.closePath()):(e.save(),h%2===1&&e.translate(.5,.5),e.beginPath(),e.moveTo(_[0].x,_[0].y),Xy(e,_,u),e.stroke(),e.closePath(),e.restore()))})}var I8={name:"line",checkEventOn:Yy,draw:function(e,t,r){M8(e,t,r)}};function jy(e,t,r){var n=r??0,i=[];if(e.length>1)if(e[0].x===e[1].x){var o=0,s=t.height;if(i.push({coordinates:[{x:e[0].x,y:o},{x:e[0].x,y:s}]}),e.length>2){i.push({coordinates:[{x:e[2].x,y:o},{x:e[2].x,y:s}]});for(var u=e[0].x-e[2].x,d=0;d<n;d++){var h=u*(d+1);i.push({coordinates:[{x:e[0].x+h,y:o},{x:e[0].x+h,y:s}]})}}}else{var p=0,g=t.width,m=Wp(e[0],e[1]),b=m[0],x=m[1];if(i.push({coordinates:[{x:p,y:p*b+x},{x:g,y:g*b+x}]}),e.length>2){var C=e[2].y-b*e[2].x;i.push({coordinates:[{x:p,y:p*b+C},{x:g,y:g*b+C}]});for(var u=x-C,d=0;d<n;d++){var _=x+u*(d+1);i.push({coordinates:[{x:p,y:p*b+_},{x:g,y:g*b+_}]})}}}return i}var L8={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:jy(t,r)}]}},P8={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:jy(t,r,1)}]}},A8={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t,r,n,i=e.chart,o=e.coordinates,s=e.bounding,u=e.overlay,d=e.yAxis,h=0;if(!((t=d==null?void 0:d.isInCandle())!==null&&t!==void 0)||t)h=(n=(r=i.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2;else{var p=i.getIndicators({paneId:u.paneId});p.forEach(function(b){h=Math.max(h,b.precision)})}var g=u.points[0].value,m=g===void 0?0:g;return[{type:"line",attrs:{coordinates:[o[0],{x:s.width,y:o[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:o[0].x,y:o[0].y,text:i.getDecimalFold().format(i.getThousandsSeparator().format(m.toFixed(h))),baseline:"bottom"}}]}};function D8(e,t){if(e.length>1){var r={x:0,y:0};return e[0].x===e[1].x&&e[0].y!==e[1].y?e[0].y<e[1].y?r={x:e[0].x,y:t.height}:r={x:e[0].x,y:0}:e[0].x>e[1].x?r={x:0,y:P0(e[0],e[1],{x:0,y:e[0].y})}:r={x:t.width,y:P0(e[0],e[1],{x:t.width,y:e[0].y})},{coordinates:[e[0],r]}}return[]}var F8={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:D8(t,r)}]}},R8={name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]}},O8={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return t.length===2?t[0].x===t[1].x?[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:r.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:P0(t[0],t[1],{x:0,y:t[0].y})},{x:r.width,y:P0(t[0],t[1],{x:r.width,y:t[0].y})}]}}]:[]}},N8={name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;if(t.length===2){var n={x:t[0].x,y:0};return t[0].y<t[1].y&&(n.y=r.height),[{type:"line",attrs:{coordinates:[t[0],n]}}]}return[]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].timestamp=r.timestamp,t[0].dataIndex=r.dataIndex,t[1].timestamp=r.timestamp,t[1].dataIndex=r.dataIndex},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].timestamp=n.timestamp,r[0].dataIndex=n.dataIndex)}},z8={name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].timestamp=r.timestamp,t[0].dataIndex=r.dataIndex,t[1].timestamp=r.timestamp,t[1].dataIndex=r.dataIndex},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].timestamp=n.timestamp,r[0].dataIndex=n.dataIndex)}},B8={name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:r.height}]}}]}},$8={name:"simpleAnnotation",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(e){var t,r=e.overlay,n=e.coordinates,i="";we(r.extendData)&&(pi(r.extendData)?i=r.extendData(r):i=(t=r.extendData)!==null&&t!==void 0?t:"");var o=n[0].x,s=n[0].y-6,u=s-50,d=u-5;return[{type:"line",attrs:{coordinates:[{x:o,y:s},{x:o,y:u}]},ignoreEvent:!1},{type:"polygon",attrs:{coordinates:[{x:o,y:u},{x:o-4,y:d},{x:o+4,y:d}]},ignoreEvent:!1},{type:"text",attrs:{x:o,y:d,text:i,align:"center",baseline:"bottom"},ignoreEvent:!1}]}},V8={name:"simpleTag",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(e){var t=e.bounding,r=e.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:r[0].y},{x:t.width,y:r[0].y}]},ignoreEvent:!1}},createYAxisFigures:function(e){var t,r,n,i,o=e.chart,s=e.overlay,u=e.coordinates,d=e.bounding,h=e.yAxis,p=(t=h==null?void 0:h.isFromZero())!==null&&t!==void 0?t:!1,g="left",m=0;p?(g="left",m=0):(g="right",m=d.width);var b="";return we(s.extendData)&&(pi(s.extendData)?b=s.extendData(s):b=(r=s.extendData)!==null&&r!==void 0?r:""),!we(b)&&ct(s.points[0].value)&&(b=Kn(s.points[0].value,(i=(n=o.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&i!==void 0?i:2)),{type:"text",attrs:{x:m,y:u[0].y,text:b,align:g,baseline:"middle"}}}},Zg={},W8=[_8,S8,k8,T8,L8,P8,A8,F8,R8,O8,N8,z8,B8,$8,V8];W8.forEach(function(e){Zg[e.name]=Hy.extend(e)});function U8(e){Zg[e.name]=Hy.extend(e)}function H8(e){var t;return(t=Zg[e])!==null&&t!==void 0?t:null}var Y8={grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},title:{color:"#76808F"},legend:{color:"#76808F"}}},indicator:{tooltip:{title:{color:"#76808F"},legend:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},X8={grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},title:{color:"#929AA5"},legend:{color:"#929AA5"}}},indicator:{tooltip:{title:{color:"#929AA5"},legend:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}},j8={light:Y8,dark:X8};function Z8(e){var t;return(t=j8[e])!==null&&t!==void 0?t:null}var gp=30,Zy=100,Nt={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},mm={MIN:1,MAX:50},G8=10,Q8=80,K8=.2,Mg=10,q8=function(){function e(t,r){var n=this;this._styles=Ry(),this._formatter={formatDate:function(g){var m=g.dateTimeFormat,b=g.timestamp,x=g.template;return Oy(m,b,x)},formatBigNumber:Ny,formatExtendText:function(g){return""}},this._innerFormatter={formatDate:function(g,m,b){return n._formatter.formatDate({dateTimeFormat:n._dateTimeFormat,timestamp:g,template:m,type:b})},formatBigNumber:function(g){return n._formatter.formatBigNumber(g)},formatExtendText:function(g){return n._formatter.formatExtendText(g)}},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(g){return zy(g,n._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(g){return By(g,n._decimalFold.threshold)}},this._symbol=null,this._period=null,this._dataList=[],this._dataLoader=null,this._loading=!1,this._dataLoadMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=G8,this._offsetRightDistance=Q8,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole="bar_count",this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=pm(),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._actions=new Map,this._indicators=new Map,this._taskScheduler=new Y6,this._overlays=new Map,this._progressOverlayInfo=null,this._lastPriceMarkExtendTextUpdateTimers=[],this._pressedOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._clickOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._chart=t,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var i=r??{},o=i.styles,s=i.locale,u=i.timezone,d=i.formatter,h=i.thousandsSeparator,p=i.decimalFold;we(o)&&this.setStyles(o),lr(s)&&this.setLocale(s),this.setTimezone(u??""),we(d)&&this.setFormatter(d),we(h)&&this.setThousandsSeparator(h),we(p)&&this.setDecimalFold(p)}return e.prototype.setStyles=function(t){var r=this,n,i,o,s,u,d,h=null;if(lr(t)?h=Z8(t):h=t,vn(this._styles,h),Va((o=(i=(n=h==null?void 0:h.candle)===null||n===void 0?void 0:n.tooltip)===null||i===void 0?void 0:i.legend)===null||o===void 0?void 0:o.template)&&(this._styles.candle.tooltip.legend.template=h.candle.tooltip.legend.template),we((d=(u=(s=h==null?void 0:h.candle)===null||s===void 0?void 0:s.priceMark)===null||u===void 0?void 0:u.last)===null||d===void 0?void 0:d.extendTexts)){this._clearLastPriceMarkExtendTextUpdateTimer();var p=[];this._styles.candle.priceMark.last.extendTexts.forEach(function(g){var m=g.updateInterval;if(g.show&&m>0&&!p.includes(m)){p.push(m);var b=setInterval(function(){r._chart.updatePane(0,Nt.CANDLE)},m);r._lastPriceMarkExtendTextUpdateTimers.push(b)}})}},e.prototype.getStyles=function(){return this._styles},e.prototype.setFormatter=function(t){vn(this._formatter,t)},e.prototype.getFormatter=function(){return this._formatter},e.prototype.getInnerFormatter=function(){return this._innerFormatter},e.prototype.setLocale=function(t){this._locale=t},e.prototype.getLocale=function(){return this._locale},e.prototype.setTimezone=function(t){if(!we(this._dateTimeFormat)||this.getTimezone()!==t){var r={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};t.length>0&&(r.timeZone=t);var n=null;try{n=new Intl.DateTimeFormat("en",r)}catch{}n!==null&&(this._dateTimeFormat=n)}},e.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},e.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},e.prototype.setThousandsSeparator=function(t){vn(this._thousandsSeparator,t)},e.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},e.prototype.setDecimalFold=function(t){vn(this._decimalFold,t)},e.prototype.getDecimalFold=function(){return this._decimalFold},e.prototype.setSymbol=function(t){this._processDataUnsubscribe(),this._symbol=t,this._synchronizeIndicatorSeriesPrecision(),this.resetData()},e.prototype.getSymbol=function(){return this._symbol},e.prototype.setPeriod=function(t){this._processDataUnsubscribe(),this._period=t,this.resetData()},e.prototype.getPeriod=function(){return this._period},e.prototype.getDataList=function(){return this._dataList},e.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},e.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},e.prototype._addData=function(t,r,n){var i=this,o,s,u=!1,d=!1,h=0;if(Va(t)){var p={backward:!1,forward:!1};switch(L0(n)?(p.backward=n,p.forward=n):(p.backward=(o=n==null?void 0:n.backward)!==null&&o!==void 0?o:!1,p.forward=(s=n==null?void 0:n.forward)!==null&&s!==void 0?s:!1),h=t.length,r){case"init":{this._clearData(),this._dataList=t,this._dataLoadMore.backward=p.backward,this._dataLoadMore.forward=p.forward,this.setOffsetRightDistance(this._offsetRightDistance),d=!0;break}case"backward":{this._dataList=this._dataList.concat(t),this._dataLoadMore.backward=p.backward,this._lastBarRightSideDiffBarCount-=h,d=h>0;break}case"forward":{this._dataList=t.concat(this._dataList),this._dataLoadMore.forward=p.forward,d=h>0;break}}u=!0}else{var g=this._dataList.length,m=t.timestamp,b=En(this._dataList[g-1],"timestamp",0);if(m>b){this._dataList.push(t);var x=this.getLastBarRightSideDiffBarCount();x<0&&this.setLastBarRightSideDiffBarCount(--x),h=1,u=!0,d=!0}else m===b&&(this._dataList[g-1]=t,u=!0,d=!0)}if(u&&d){this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0});var C=this.getIndicatorsByFilter({});C.forEach(function(_){i._addIndicatorCalcTask(_,r)}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:r!=="init"})}},e.prototype.setDataLoader=function(t){this._dataLoader=t,this.resetData()},e.prototype._calcOptimalBarSpace=function(){var t=4,r=1-K8*Math.atan(Math.max(t,this._barSpace)-t)/(Math.PI*.5),n=Math.min(Math.floor(this._barSpace*r),Math.floor(this._barSpace));n%2===0&&n+2>=this._barSpace&&--n,this._gapBarSpace=Math.max(1,n)},e.prototype._adjustVisibleRange=function(){var t,r,n=this._dataList.length,i=this._totalBarSpace/this._barSpace,o=0,s=0;this._scrollLimitRole==="distance"?(o=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,s=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(o=this._minVisibleBarCount.left,s=this._minVisibleBarCount.right),o=Math.max(0,o),s=Math.max(0,s);var u=i-Math.min(o,n);this._lastBarRightSideDiffBarCount>u&&(this._lastBarRightSideDiffBarCount=u);var d=-n+Math.min(s,n);this._lastBarRightSideDiffBarCount<d&&(this._lastBarRightSideDiffBarCount=d);var h=Math.round(this._lastBarRightSideDiffBarCount+n+.5),p=h;h>n&&(h=n);var g=Math.round(h-i)-1;g<0&&(g=0);var m=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-i)-1:g;this._visibleRange={from:g,to:h,realFrom:m,realTo:p},this.executeAction("onVisibleRangeChange",this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var b=m;b<p;b++){var x=this._dataList[b],C=this.dataIndexToCoordinate(b);this._visibleRangeDataList.push({dataIndex:b,x:C,data:{prev:(t=this._dataList[b-1])!==null&&t!==void 0?t:x,current:x,next:(r=this._dataList[b+1])!==null&&r!==void 0?r:x}}),we(x)&&(this._visibleRangeHighLowPrice[0].price<x.high&&(this._visibleRangeHighLowPrice[0].price=x.high,this._visibleRangeHighLowPrice[0].x=C),this._visibleRangeHighLowPrice[1].price>x.low&&(this._visibleRangeHighLowPrice[1].price=x.low,this._visibleRangeHighLowPrice[1].x=C))}g===0?this._dataLoadMore.forward&&this._processDataLoad("forward"):h===n&&this._dataLoadMore.backward&&this._processDataLoad("backward")},e.prototype._processDataLoad=function(t){var r=this,n,i,o,s;if(!this._loading&&we(this._dataLoader)&&we(this._symbol)&&we(this._period)){this._loading=!0;var u={type:t,symbol:this._symbol,period:this._period,timestamp:null,callback:function(d,h){var p,g;r._loading=!1,r._addData(d,t,h),t==="init"&&((g=(p=r._dataLoader)===null||p===void 0?void 0:p.subscribeBar)===null||g===void 0||g.call(p,{symbol:r._symbol,period:r._period,callback:function(m){r._addData(m,"update")}}))}};switch(t){case"backward":{u.timestamp=(i=(n=this._dataList[this._dataList.length-1])===null||n===void 0?void 0:n.timestamp)!==null&&i!==void 0?i:null;break}case"forward":{u.timestamp=(s=(o=this._dataList[0])===null||o===void 0?void 0:o.timestamp)!==null&&s!==void 0?s:null;break}}this._dataLoader.getBars(u)}},e.prototype._processDataUnsubscribe=function(){var t,r;we(this._dataLoader)&&we(this._symbol)&&we(this._period)&&((r=(t=this._dataLoader).unsubscribeBar)===null||r===void 0||r.call(t,{symbol:this._symbol,period:this._period}))},e.prototype.resetData=function(){this._loading=!1,this._processDataLoad("init")},e.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},e.prototype.setBarSpace=function(t,r){t<mm.MIN||t>mm.MAX||this._barSpace===t||(this._barSpace=t,this._calcOptimalBarSpace(),r==null||r(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0}))},e.prototype.setTotalBarSpace=function(t){this._totalBarSpace!==t&&(this._totalBarSpace=t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}))},e.prototype.setOffsetRightDistance=function(t,r){return this._offsetRightDistance=this._scrollLimitRole==="distance"?Math.min(this._maxOffsetDistance.right,t):t,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,(r??!1)&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0})),this},e.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},e.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},e.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},e.prototype.setLastBarRightSideDiffBarCount=function(t){this._lastBarRightSideDiffBarCount=t},e.prototype.setMaxOffsetLeftDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.left=t},e.prototype.setMaxOffsetRightDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.right=t},e.prototype.setLeftMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.left=t},e.prototype.setRightMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.right=t},e.prototype.getVisibleRange=function(){return this._visibleRange},e.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},e.prototype.scroll=function(t){if(this._scrollEnabled){var r=t/this._barSpace,n=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-r,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0});var i=Math.round(n-this._lastBarRightSideDiffBarCount*this._barSpace);i!==0&&this.executeAction("onScroll",{distance:i})}},e.prototype.getDataByDataIndex=function(t){var r;return(r=this._dataList[t])!==null&&r!==void 0?r:null},e.prototype.coordinateToFloatIndex=function(t){var r=this._dataList.length,n=(this._totalBarSpace-t)/this._barSpace,i=r+this._lastBarRightSideDiffBarCount-n;return Math.round(i*1e6)/1e6},e.prototype.dataIndexToTimestamp=function(t){var r=this._dataList.length;if(r===0)return null;var n=this.getDataByDataIndex(t);if(we(n))return n.timestamp;if(we(this._period)){var i=r-1,o=null,s=0;if(t>i?(o=this._dataList[i].timestamp,s=t-i):t<0&&(o=this._dataList[0].timestamp,s=t),ct(o)){var u=this._period,d=u.type,h=u.span;switch(d){case"second":return o+h*1e3*s;case"minute":return o+h*60*1e3*s;case"hour":return o+h*60*60*1e3*s;case"day":return o+h*24*60*60*1e3*s;case"week":return o+h*7*24*60*60*1e3*s;case"month":{var p=new Date(o),g=p.getDate();p.setDate(1),p.setMonth(p.getMonth()+h*s);var m=new Date(p.getFullYear(),p.getMonth()+1,0).getDate();return p.setDate(Math.min(g,m)),p.getTime()}case"year":{var p=new Date(o);return p.setFullYear(p.getFullYear()+h*s),p.getTime()}}}}return null},e.prototype.timestampToDataIndex=function(t){var r=this._dataList.length;if(r===0)return 0;if(we(this._period)){var n=null,i=0,o=r-1,s=this._dataList[o].timestamp;t>s&&(n=s,i=o);var u=this._dataList[0].timestamp;if(t<u&&(n=u,i=0),ct(n)){var d=this._period,h=d.type,p=d.span;switch(h){case"second":return i+Math.floor((t-n)/(p*1e3));case"minute":return i+Math.floor((t-n)/(p*60*1e3));case"hour":return i+Math.floor((t-n)/(p*60*60*1e3));case"day":return i+Math.floor((t-n)/(p*24*60*60*1e3));case"week":return i+Math.floor((t-n)/(p*7*24*60*60*1e3));case"month":{var g=new Date(n),m=new Date(t),b=g.getFullYear(),x=m.getFullYear(),C=g.getMonth(),_=m.getMonth();return i+Math.floor(((x-b)*12+(_-C))/p)}case"year":{var b=new Date(n).getFullYear(),x=new Date(t).getFullYear();return i+Math.floor((x-b)/p)}}}}return Eg(this._dataList,"timestamp",t)},e.prototype.dataIndexToCoordinate=function(t){var r=this._dataList.length,n=r+this._lastBarRightSideDiffBarCount-t;return Math.floor(this._totalBarSpace-(n-.5)*this._barSpace+.5)},e.prototype.coordinateToDataIndex=function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1},e.prototype.zoom=function(t,r){var n=this,i;if(this._zoomEnabled){var o=r??null;ct(o==null?void 0:o.x)||(o={x:(i=this._crosshair.x)!==null&&i!==void 0?i:this._totalBarSpace/2});var s=o.x,u=this.coordinateToFloatIndex(s),d=this._barSpace,h=this._barSpace+t*(this._barSpace/Mg);this.setBarSpace(h,function(){n._lastBarRightSideDiffBarCount+=u-n.coordinateToFloatIndex(s)});var p=this._barSpace/d;p!==1&&this.executeAction("onZoom",{scale:p})}},e.prototype.setZoomEnabled=function(t){this._zoomEnabled=t},e.prototype.isZoomEnabled=function(){return this._zoomEnabled},e.prototype.setScrollEnabled=function(t){this._scrollEnabled=t},e.prototype.isScrollEnabled=function(){return this._scrollEnabled},e.prototype.setCrosshair=function(t,r){var n,i=r??{},o=i.notInvalidate,s=i.notExecuteAction,u=i.forceInvalidate,d=t??{},h=0,p=0;ct(d.x)?(h=this.coordinateToDataIndex(d.x),h<0?p=0:h>this._dataList.length-1?p=this._dataList.length-1:p=h):(h=this._dataList.length-1,p=h);var g=this._dataList[p],m=this.dataIndexToCoordinate(h),b={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=Ze(Ze({},d),{realX:m,kLineData:g,realDataIndex:h,dataIndex:p,timestamp:(n=this.dataIndexToTimestamp(h))!==null&&n!==void 0?n:void 0}),(b.x!==d.x||b.y!==d.y||b.paneId!==d.paneId||(u??!1))&&(we(g)&&!(s??!1)&&this.hasAction("onCrosshairChange")&&lr(this._crosshair.paneId)&&this.executeAction("onCrosshairChange",t),(o??!1)||this._chart.updatePane(1))},e.prototype.getCrosshair=function(){return this._crosshair},e.prototype.executeAction=function(t,r){var n;(n=this._actions.get(t))===null||n===void 0||n.execute(r)},e.prototype.subscribeAction=function(t,r){var n;this._actions.has(t)||this._actions.set(t,new X6),(n=this._actions.get(t))===null||n===void 0||n.subscribe(r)},e.prototype.unsubscribeAction=function(t,r){var n=this._actions.get(t);we(n)&&(n.unsubscribe(r),n.isEmpty()&&this._actions.delete(t))},e.prototype.hasAction=function(t){var r=this._actions.get(t);return we(r)&&!r.isEmpty()},e.prototype._sortIndicators=function(t){var r;lr(t)?(r=this._indicators.get(t))===null||r===void 0||r.sort(function(n,i){return n.zLevel-i.zLevel}):this._indicators.forEach(function(n){n.sort(function(i,o){return i.zLevel-o.zLevel})})},e.prototype._addIndicatorCalcTask=function(t,r){var n=this;this._taskScheduler.addTask({id:fm(t.id),handler:function(){var i;(i=t.onDataStateChange)===null||i===void 0||i.call(t,{state:"loading",type:r,indicator:t}),t.calcImp(n._dataList).then(function(o){var s;o&&(n._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:r!=="init"}),(s=t.onDataStateChange)===null||s===void 0||s.call(t,{state:"ready",type:r,indicator:t}))}).catch(function(){var o;(o=t.onDataStateChange)===null||o===void 0||o.call(t,{state:"error",type:r,indicator:t})})}})},e.prototype.addIndicator=function(t,r,n){var i=t.name,o=this.getIndicatorsByFilter(t);if(o.length>0)return!1;var s=this.getIndicatorsByPaneId(r),u=Uy(i),d=new u;return this._synchronizeIndicatorSeriesPrecision(d),d.paneId=r,d.override(t),n||(this.removeIndicator({paneId:r}),s=[]),s.push(d),this._indicators.set(r,s),this._sortIndicators(r),this._addIndicatorCalcTask(d,"init"),!0},e.prototype.getIndicatorsByPaneId=function(t){var r;return(r=this._indicators.get(t))!==null&&r!==void 0?r:[]},e.prototype.getIndicatorsByFilter=function(t){var r=t.paneId,n=t.name,i=t.id,o=function(u){return we(i)?u.id===i:!we(n)||u.name===n},s=[];return we(r)?s=s.concat(this.getIndicatorsByPaneId(r).filter(o)):this._indicators.forEach(function(u){s=s.concat(u.filter(o))}),s},e.prototype.removeIndicator=function(t){var r=this,n=!1,i=this.getIndicatorsByFilter(t);return i.forEach(function(o){var s=r.getIndicatorsByPaneId(o.paneId),u=s.findIndex(function(d){return d.id===o.id});u>-1&&(r._taskScheduler.removeTask(fm(o.id)),s.splice(u,1),n=!0),s.length===0&&r._indicators.delete(o.paneId)}),n},e.prototype.hasIndicators=function(t){return this._indicators.has(t)},e.prototype._synchronizeIndicatorSeriesPrecision=function(t){if(we(this._symbol)){var r=this._symbol,n=r.pricePrecision,i=n===void 0?2:n,o=r.volumePrecision,s=o===void 0?0:o,u=function(d){switch(d.series){case"price":{d.setSeriesPrecision(i);break}case"volume":{d.setSeriesPrecision(s);break}}};we(t)?u(t):this._indicators.forEach(function(d){d.forEach(function(h){u(h)})})}},e.prototype.overrideIndicator=function(t){var r=this,n=!1,i=!1,o=this.getIndicatorsByFilter(t);return o.forEach(function(s){s.override(t);var u=s.shouldUpdateImp(),d=u.calc,h=u.draw,p=u.sort;p&&(i=!0),d?r._addIndicatorCalcTask(s,"update"):h&&(n=!0)}),i&&this._sortIndicators(),n?(this._chart.layout({update:!0}),!0):!1},e.prototype.getOverlaysByFilter=function(t){var r,n=t.id,i=t.groupId,o=t.paneId,s=t.name,u=function(p){return we(n)?p.id===n:we(i)?p.groupId===i&&(!we(s)||p.name===s):!we(s)||p.name===s},d=[];we(o)?d=d.concat(this.getOverlaysByPaneId(o).filter(u)):this._overlays.forEach(function(p){d=d.concat(p.filter(u))});var h=(r=this._progressOverlayInfo)===null||r===void 0?void 0:r.overlay;return we(h)&&u(h)&&d.push(h),d},e.prototype.getOverlaysByPaneId=function(t){var r;if(!lr(t)){var n=[];return this._overlays.forEach(function(i){n=n.concat(i)}),n}return(r=this._overlays.get(t))!==null&&r!==void 0?r:[]},e.prototype._sortOverlays=function(t){var r;lr(t)?(r=this._overlays.get(t))===null||r===void 0||r.sort(function(n,i){return n.zLevel-i.zLevel}):this._overlays.forEach(function(n){n.sort(function(i,o){return i.zLevel-o.zLevel})})},e.prototype.addOverlays=function(t,r){var n=this,i=[],o=t.map(function(s,u){var d,h,p,g,m,b,x,C;if(we(s.id)){var _=null;try{for(var k=sa(n._overlays),M=k.next();!M.done;M=k.next()){var L=M.value,A=L[1],P=A.find(function(W){return W.id===s.id});if(we(P)){_=P;break}}}catch(W){d={error:W}}finally{try{M&&!M.done&&(h=k.return)&&h.call(k)}finally{if(d)throw d.error}}if(we(_))return s.id}var $=H8(s.name);if(we($)){var R=(p=s.id)!==null&&p!==void 0?p:fp(C8),P=new $,z=(g=s.paneId)!==null&&g!==void 0?g:Nt.CANDLE;s.id=R,(m=s.groupId)!==null&&m!==void 0||(s.groupId=R);var B=n.getOverlaysByPaneId(z).length;return(b=s.zLevel)!==null&&b!==void 0||(s.zLevel=B),P.override(s),i.includes(z)||i.push(z),P.isDrawing()?n._progressOverlayInfo={paneId:z,overlay:P,appointPaneFlag:r[u]}:(n._overlays.has(z)||n._overlays.set(z,[]),(x=n._overlays.get(z))===null||x===void 0||x.push(P)),P.isStart()&&((C=P.onDrawStart)===null||C===void 0||C.call(P,{overlay:P,chart:n._chart})),R}return null});return i.length>0&&(this._sortOverlays(),i.forEach(function(s){n._chart.updatePane(1,s)}),this._chart.updatePane(1,Nt.X_AXIS)),o},e.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},e.prototype.progressOverlayComplete=function(){var t;if(this._progressOverlayInfo!==null){var r=this._progressOverlayInfo,n=r.overlay,i=r.paneId;n.isDrawing()||(this._overlays.has(i)||this._overlays.set(i,[]),(t=this._overlays.get(i))===null||t===void 0||t.push(n),this._sortOverlays(i),this._progressOverlayInfo=null)}},e.prototype.updateProgressOverlayInfo=function(t,r){this._progressOverlayInfo!==null&&(L0(r)&&r&&(this._progressOverlayInfo.appointPaneFlag=r),this._progressOverlayInfo.paneId=t,this._progressOverlayInfo.overlay.override({paneId:t}))},e.prototype.overrideOverlay=function(t){var r=this,n=!1,i=[],o=this.getOverlaysByFilter(t);return o.forEach(function(s){s.override(t);var u=s.shouldUpdate(),d=u.sort,h=u.draw;d&&(n=!0),(d||h)&&(i.includes(s.paneId)||i.push(s.paneId))}),n&&this._sortOverlays(),i.length>0?(i.forEach(function(s){r._chart.updatePane(1,s)}),this._chart.updatePane(1,Nt.X_AXIS),!0):!1},e.prototype.removeOverlay=function(t){var r=this,n=[],i=this.getOverlaysByFilter(t);return i.forEach(function(o){var s,u=o.paneId,d=r.getOverlaysByPaneId(o.paneId);if((s=o.onRemoved)===null||s===void 0||s.call(o,{overlay:o,chart:r._chart}),n.includes(u)||n.push(u),o.isDrawing())r._progressOverlayInfo=null;else{var h=d.findIndex(function(p){return p.id===o.id});h>-1&&d.splice(h,1)}d.length===0&&r._overlays.delete(u)}),n.length>0?(n.forEach(function(o){r._chart.updatePane(1,o)}),this._chart.updatePane(1,Nt.X_AXIS),!0):!1},e.prototype.setPressedOverlayInfo=function(t){this._pressedOverlayInfo=t},e.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},e.prototype.setHoverOverlayInfo=function(t,r,n){var i=this._hoverOverlayInfo,o=i.overlay,s=i.figureType,u=i.figureIndex,d=i.figure,h=t.overlay;if(((o==null?void 0:o.id)!==(h==null?void 0:h.id)||s!==t.figureType||u!==t.figureIndex)&&(this._hoverOverlayInfo=t,(o==null?void 0:o.id)!==(h==null?void 0:h.id))){var p=!1,g=!1;o!==null&&(o.override({zLevel:o.getPrevZLevel()}),g=!0,n(o,d)&&(p=!0)),h!==null&&(h.setPrevZLevel(h.zLevel),h.override({zLevel:Number.MAX_SAFE_INTEGER}),g=!0,r(h,t.figure)&&(p=!0)),g&&this._sortOverlays(),p||this._chart.updatePane(1)}},e.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},e.prototype.setClickOverlayInfo=function(t,r,n){var i=this._clickOverlayInfo,o=i.paneId,s=i.overlay,u=i.figureType,d=i.figure,h=i.figureIndex,p=t.overlay;((s==null?void 0:s.id)!==(p==null?void 0:p.id)||u!==t.figureType||h!==t.figureIndex)&&(this._clickOverlayInfo=t,(s==null?void 0:s.id)!==(p==null?void 0:p.id)&&(we(s)&&n(s,d),we(p)&&r(p,t.figure),this._chart.updatePane(1,t.paneId),o!==t.paneId&&this._chart.updatePane(1,o),this._chart.updatePane(1,Nt.X_AXIS)))},e.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},e.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},e.prototype.isOverlayDrawing=function(){var t,r;return(r=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay.isDrawing())!==null&&r!==void 0?r:!1},e.prototype._clearLastPriceMarkExtendTextUpdateTimer=function(){this._lastPriceMarkExtendTextUpdateTimers.forEach(function(t){clearInterval(t)}),this._lastPriceMarkExtendTextUpdateTimers=[]},e.prototype._clearData=function(){this._dataLoadMore.backward=!1,this._dataLoadMore.forward=!1,this._loading=!1,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange=pm(),this._crosshair={}},e.prototype.getChart=function(){return this._chart},e.prototype.destroy=function(){this._clearData(),this._clearLastPriceMarkExtendTextUpdateTimer(),this._taskScheduler.removeTask(),this._overlays.clear(),this._indicators.clear(),this._actions.clear()},e}(),Bt={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"},M0=7;function J8(){return Dy(this,void 0,void 0,function(){return Fy(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t){var r=new ResizeObserver(function(n){t(n.every(function(i){return"devicePixelContentBoxSize"in i})),r.disconnect()});r.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,e.sent()]}})})}var ym=function(){function e(t,r){var n=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=Pd,this._mediaQueryListener=function(){var i=Ll(n._element);n._nextPixelWidth=Math.round(n._element.clientWidth*i),n._nextPixelHeight=Math.round(n._element.clientHeight*i),n._resetPixelRatio()},this._listener=r,this._element=Os("canvas",t),this._ctx=this._element.getContext("2d"),J8().then(function(i){n._supportedDevicePixelContentBox=i,i?(n._resizeObserver=new ResizeObserver(function(o){var s=o.find(function(d){return d.target===n._element}),u=s==null?void 0:s.devicePixelContentBoxSize[0];we(u)&&(n._nextPixelWidth=u.inlineSize,n._nextPixelHeight=u.blockSize,(n._pixelWidth!==n._nextPixelWidth||n._pixelHeight!==n._nextPixelHeight)&&n._resetPixelRatio())}),n._resizeObserver.observe(n._element,{box:"device-pixel-content-box"})):(n._mediaQueryList=window.matchMedia("(resolution: ".concat(Ll(n._element),"dppx)")),n._mediaQueryList.addListener(n._mediaQueryListener))}).catch(function(i){return!1})}return e.prototype._resetPixelRatio=function(){var t=this;this._executeListener(function(){var r=t._element.clientWidth,n=t._element.clientHeight;t._width=r,t._height=n,t._pixelWidth=t._nextPixelWidth,t._pixelHeight=t._nextPixelHeight,t._element.width=t._nextPixelWidth,t._element.height=t._nextPixelHeight;var i=t._nextPixelWidth/r,o=t._nextPixelHeight/n;t._ctx.scale(i,o)})},e.prototype._executeListener=function(t){var r=this;this._requestAnimationId===Pd&&(this._requestAnimationId=Tp(function(){r._ctx.clearRect(0,0,r._width,r._height),t==null||t(),r._listener(),r._requestAnimationId=Pd}))},e.prototype.update=function(t,r){if(this._width!==t||this._height!==r){if(this._element.style.width="".concat(t,"px"),this._element.style.height="".concat(r,"px"),!this._supportedDevicePixelContentBox){var n=Ll(this._element);this._nextPixelWidth=Math.round(t*n),this._nextPixelHeight=Math.round(r*n),this._resetPixelRatio()}}else this._executeListener()},e.prototype.getElement=function(){return this._element},e.prototype.getContext=function(){return this._ctx},e.prototype.destroy=function(){we(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),we(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},e}(),Gy=function(e){Pt(t,e);function t(r,n){var i=e.call(this)||this;return i._bounding=kp(),i._cursor="crosshair",i._forceCursor=null,i._pane=n,i._rootContainer=r,i._container=i.createContainer(),r.appendChild(i._container),i}return t.prototype.setBounding=function(r){return vn(this._bounding,r),this},t.prototype.getContainer=function(){return this._container},t.prototype.getBounding=function(){return this._bounding},t.prototype.getPane=function(){return this._pane},t.prototype.checkEventOn=function(r){return!0},t.prototype.setCursor=function(r){lr(this._forceCursor)||r!==this._cursor&&(this._cursor=r,this._container.style.cursor=this._cursor)},t.prototype.setForceCursor=function(r){var n;r!==this._forceCursor&&(this._forceCursor=r,this._container.style.cursor=(n=this._forceCursor)!==null&&n!==void 0?n:this._cursor)},t.prototype.getForceCursor=function(){return this._forceCursor},t.prototype.update=function(r){this.updateImp(this._container,this._bounding,r??3)},t.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},t}(Xg),Gg=function(e){Pt(t,e);function t(r,n){var i=e.call(this,r,n)||this;i._mainCanvas=new ym({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateMain(i._mainCanvas.getContext())}),i._overlayCanvas=new ym({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateOverlay(i._overlayCanvas.getContext())});var o=i.getContainer();return o.appendChild(i._mainCanvas.getElement()),o.appendChild(i._overlayCanvas.getElement()),i}return t.prototype.createContainer=function(){return Os("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},t.prototype.updateImp=function(r,n,i){var o=n.width,s=n.height,u=n.left;r.style.left="".concat(u,"px");var d=i,h=r.clientWidth,p=r.clientHeight;switch((o!==h||s!==p)&&(r.style.width="".concat(o,"px"),r.style.height="".concat(s,"px"),d=3),d){case 0:{this._mainCanvas.update(o,s);break}case 1:{this._overlayCanvas.update(o,s);break}case 3:case 4:{this._mainCanvas.update(o,s),this._overlayCanvas.update(o,s);break}}},t.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},t.prototype.getImage=function(r){var n=this.getBounding(),i=n.width,o=n.height,s=Os("canvas",{width:"".concat(i,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),u=s.getContext("2d"),d=Ll(s);return s.width=i*d,s.height=o*d,u.scale(d,d),u.drawImage(this._mainCanvas.getElement(),0,0,i,o),r&&u.drawImage(this._overlayCanvas.getElement(),0,0,i,o),s},t}(Gy);function Qy(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){var u=s.value,d=u.x,h=u.y,p=u.r,g=e.x-d,m=e.y-h;if(!(g*g+m*m>p*p))return!0}}catch(b){r={error:b}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function eb(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"fill":i,s=r.color,u=s===void 0?"currentColor":s,d=r.borderSize,h=d===void 0?1:d,p=r.borderColor,g=p===void 0?"currentColor":p,m=r.borderStyle,b=m===void 0?"solid":m,x=r.borderDashedValue,C=x===void 0?[2,2]:x,_=(o==="fill"||r.style==="stroke_fill")&&(!lr(u)||!Nd(u));_&&(e.fillStyle=u,n.forEach(function(k){var M=k.x,L=k.y,A=k.r;e.beginPath(),e.arc(M,L,A,0,Math.PI*2),e.closePath(),e.fill()})),(o==="stroke"||r.style==="stroke_fill")&&h>0&&!Nd(g)&&(e.strokeStyle=g,e.lineWidth=h,b==="dashed"?e.setLineDash(C):e.setLineDash([]),n.forEach(function(k){var M=k.x,L=k.y,A=k.r;(!_||A>h)&&(e.beginPath(),e.arc(M,L,A,0,Math.PI*2),e.closePath(),e.stroke())}))}var tb={name:"circle",checkEventOn:Qy,draw:function(e,t,r){eb(e,t,r)}};function Ky(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){for(var u=s.value,d=!1,h=u.coordinates,p=0,g=h.length-1;p<h.length;g=p++)h[p].y>e.y!=h[g].y>e.y&&e.x<(h[g].x-h[p].x)*(e.y-h[p].y)/(h[g].y-h[p].y)+h[p].x&&(d=!d);if(d)return!0}}catch(m){r={error:m}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function rb(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"fill":i,s=r.color,u=s===void 0?"currentColor":s,d=r.borderSize,h=d===void 0?1:d,p=r.borderColor,g=p===void 0?"currentColor":p,m=r.borderStyle,b=m===void 0?"solid":m,x=r.borderDashedValue,C=x===void 0?[2,2]:x;(o==="fill"||r.style==="stroke_fill")&&(!lr(u)||!Nd(u))&&(e.fillStyle=u,n.forEach(function(_){var k=_.coordinates;e.beginPath(),e.moveTo(k[0].x,k[0].y);for(var M=1;M<k.length;M++)e.lineTo(k[M].x,k[M].y);e.closePath(),e.fill()})),(o==="stroke"||r.style==="stroke_fill")&&h>0&&!Nd(g)&&(e.strokeStyle=g,e.lineWidth=h,b==="dashed"?e.setLineDash(C):e.setLineDash([]),n.forEach(function(_){var k=_.coordinates;e.beginPath(),e.moveTo(k[0].x,k[0].y);for(var M=1;M<k.length;M++)e.lineTo(k[M].x,k[M].y);e.closePath(),e.stroke()}))}var nb={name:"polygon",checkEventOn:Ky,draw:function(e,t,r){rb(e,t,r)}};function Qg(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){var u=s.value,d=u.x,h=u.width;h<$n*2&&(d-=$n,h=$n*2);var p=u.y,g=u.height;if(g<$n*2&&(p-=$n,g=$n*2),e.x>=d&&e.x<=d+h&&e.y>=p&&e.y<=p+g)return!0}}catch(m){r={error:m}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function qy(e,t,r){var n,i=[];i=i.concat(t);var o=r.style,s=o===void 0?"fill":o,u=r.color,d=u===void 0?"transparent":u,h=r.borderSize,p=h===void 0?1:h,g=r.borderColor,m=g===void 0?"transparent":g,b=r.borderStyle,x=b===void 0?"solid":b,C=r.borderRadius,_=C===void 0?0:C,k=r.borderDashedValue,M=k===void 0?[2,2]:k,L=(n=e.roundRect)!==null&&n!==void 0?n:e.rect,A=(s==="fill"||r.style==="stroke_fill")&&(!lr(d)||!Nd(d));if(A&&(e.fillStyle=d,i.forEach(function(R){var z=R.x,B=R.y,W=R.width,X=R.height;e.beginPath(),L.call(e,z,B,W,X,_),e.closePath(),e.fill()})),(s==="stroke"||r.style==="stroke_fill")&&p>0&&!Nd(m)){e.strokeStyle=m,e.fillStyle=m,e.lineWidth=p,x==="dashed"?e.setLineDash(M):e.setLineDash([]);var P=p%2===1?.5:0,$=Math.round(P*2);i.forEach(function(R){var z=R.x,B=R.y,W=R.width,X=R.height;W>p*2&&X>p*2?(e.beginPath(),L.call(e,z+P,B+P,W-$,X-$,_),e.closePath(),e.stroke()):A||e.fillRect(z,B,W,X)})}}var ib={name:"rect",checkEventOn:Qg,draw:function(e,t,r){qy(e,t,r)}};function Jy(e,t){var r=t.size,n=r===void 0?12:r,i=t.paddingLeft,o=i===void 0?0:i,s=t.paddingTop,u=s===void 0?0:s,d=t.paddingRight,h=d===void 0?0:d,p=t.paddingBottom,g=p===void 0?0:p,m=t.weight,b=m===void 0?"normal":m,x=t.family,C=e.x,_=e.y,k=e.text,M=e.align,L=M===void 0?"left":M,A=e.baseline,P=A===void 0?"top":A,$=e.width,R=e.height,z=$??o+ia(k,n,b,x)+h,B=R??u+n+g,W=0;switch(L){case"left":case"start":{W=C;break}case"right":case"end":{W=C-z;break}default:{W=C-z/2;break}}var X=0;switch(P){case"top":case"hanging":{X=_;break}case"bottom":case"ideographic":case"alphabetic":{X=_-B;break}default:{X=_-B/2;break}}return{x:W,y:X,width:z,height:B}}function e2(e,t,r){var n,i,o=[];o=o.concat(t);try{for(var s=sa(o),u=s.next();!u.done;u=s.next()){var d=u.value,h=Jy(d,r),p=h.x,g=h.y,m=h.width,b=h.height;if(e.x>=p&&e.x<=p+m&&e.y>=g&&e.y<=g+b)return!0}}catch(x){n={error:x}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return!1}function ob(e,t,r){var n=[];n=n.concat(t);var i=r.color,o=i===void 0?"currentColor":i,s=r.size,u=s===void 0?12:s,d=r.family,h=r.weight,p=r.paddingLeft,g=p===void 0?0:p,m=r.paddingTop,b=m===void 0?0:m,x=r.paddingRight,C=x===void 0?0:x,_=n.map(function(k){return Jy(k,r)});qy(e,_,Ze(Ze({},r),{color:r.backgroundColor})),e.textAlign="left",e.textBaseline="top",e.font=Hc(u,h,d),e.fillStyle=o,n.forEach(function(k,M){var L=_[M];e.fillText(k.text,L.x+g,L.y+b,L.width-g-C)})}var ab={name:"text",checkEventOn:e2,draw:function(e,t,r){ob(e,t,r)}};function sb(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}function t2(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=sa(i),s=o.next();!s.done;s=o.next()){var u=s.value;if(Math.abs(sb(e,u)-u.r)<$n){var d=u.r,h=u.startAngle,p=u.endAngle,g=d*Math.cos(h)+u.x,m=d*Math.sin(h)+u.y,b=d*Math.cos(p)+u.x,x=d*Math.sin(p)+u.y;if(e.x<=Math.max(g,b)+$n&&e.x>=Math.min(g,b)-$n&&e.y<=Math.max(m,x)+$n&&e.y>=Math.min(m,x)-$n)return!0}}}catch(C){r={error:C}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function lb(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"solid":i,s=r.size,u=s===void 0?1:s,d=r.color,h=d===void 0?"currentColor":d,p=r.dashedValue,g=p===void 0?[2,2]:p;e.lineWidth=u,e.strokeStyle=h,o==="dashed"?e.setLineDash(g):e.setLineDash([]),n.forEach(function(m){var b=m.x,x=m.y,C=m.r,_=m.startAngle,k=m.endAngle;e.beginPath(),e.arc(b,x,C,_,k),e.stroke(),e.closePath()})}var cb={name:"arc",checkEventOn:t2,draw:function(e,t,r){lb(e,t,r)}};function bm(e,t,r,n,i,o,s){var u=B0(n,7),d=u[0],h=u[1],p=u[2],g=u[3],m=u[4],b=u[5],x=u[6],C=s?t+b:b+i,_=s?r+x:x+o,k=ub(t,r,d,h,p,g,m,C,_);k.forEach(function(M){e.bezierCurveTo(M[0],M[1],M[2],M[3],M[4],M[5])})}function ub(e,t,r,n,i,o,s,u,d){for(var h=db(e,t,r,n,i,o,s,u,d),p=h.cx,g=h.cy,m=h.startAngle,b=h.deltaAngle,x=[],C=Math.ceil(Math.abs(b)/(Math.PI/2)),_=0;_<C;_++){var k=m+_*b/C,M=m+(_+1)*b/C,L=hb(p,g,r,n,i,k,M);x.push(L)}return x}function db(e,t,r,n,i,o,s,u,d){var h=i*Math.PI/180,p=(e-u)/2,g=(t-d)/2,m=Math.cos(h)*p+Math.sin(h)*g,b=-Math.sin(h)*p+Math.cos(h)*g,x=Math.pow(m,2)/Math.pow(r,2)+Math.pow(b,2)/Math.pow(n,2);x>1&&(r*=Math.sqrt(x),n*=Math.sqrt(x));var C=o===s?-1:1,_=Math.pow(r,2)*Math.pow(n,2)-Math.pow(r,2)*Math.pow(b,2)-Math.pow(n,2)*Math.pow(m,2),k=Math.pow(r,2)*Math.pow(b,2)+Math.pow(n,2)*Math.pow(m,2),M=C*Math.sqrt(Math.abs(_/k))*(r*b/n),L=C*Math.sqrt(Math.abs(_/k))*(-n*m/r),A=Math.cos(h)*M-Math.sin(h)*L+(e+u)/2,P=Math.sin(h)*M+Math.cos(h)*L+(t+d)/2,$=Math.atan2((b-L)/n,(m-M)/r),R=Math.atan2((-b-L)/n,(-m-M)/r)-$;return R<0&&s===1?R+=2*Math.PI:R>0&&s===0&&(R-=2*Math.PI),{cx:A,cy:P,startAngle:$,deltaAngle:R}}function hb(e,t,r,n,i,o,s){var u=Math.sin(s-o)*(Math.sqrt(4+3*Math.pow(Math.tan((s-o)/2),2))-1)/3,d=Math.cos(i),h=Math.sin(i),p=e+r*Math.cos(o)*d-n*Math.sin(o)*h,g=t+r*Math.cos(o)*h+n*Math.sin(o)*d,m=e+r*Math.cos(s)*d-n*Math.sin(s)*h,b=t+r*Math.cos(s)*h+n*Math.sin(s)*d,x=p+u*(-r*Math.sin(o)*d-n*Math.cos(o)*h),C=g+u*(-r*Math.sin(o)*h+n*Math.cos(o)*d),_=m-u*(-r*Math.sin(s)*d-n*Math.cos(s)*h),k=b-u*(-r*Math.sin(s)*h+n*Math.cos(s)*d);return[x,C,_,k,m,b]}function pb(e,t,r){var n=[];n=n.concat(t);var i=r.lineWidth,o=i===void 0?1:i,s=r.color,u=s===void 0?"currentColor":s;e.lineWidth=o,e.strokeStyle=u,e.setLineDash([]),n.forEach(function(d){var h=d.x,p=d.y,g=d.path,m=g.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi);if(we(m)){var b=h,x=p;e.beginPath(),m.forEach(function(C){var _=0,k=0,M=0,L=0,A=C[0],P=C.slice(1).trim().split(/[\s,]+/).map(Number);switch(A){case"M":_=P[0]+b,k=P[1]+x,e.moveTo(_,k),M=_,L=k;break;case"m":_+=P[0],k+=P[1],e.moveTo(_,k),M=_,L=k;break;case"L":_=P[0]+b,k=P[1]+x,e.lineTo(_,k);break;case"l":_+=P[0],k+=P[1],e.lineTo(_,k);break;case"H":_=P[0]+b,e.lineTo(_,k);break;case"h":_+=P[0],e.lineTo(_,k);break;case"V":k=P[0]+x,e.lineTo(_,k);break;case"v":k+=P[0],e.lineTo(_,k);break;case"C":e.bezierCurveTo(P[0]+b,P[1]+x,P[2]+b,P[3]+x,P[4]+b,P[5]+x),_=P[4]+b,k=P[5]+x;break;case"c":e.bezierCurveTo(_+P[0],k+P[1],_+P[2],k+P[3],_+P[4],k+P[5]),_+=P[4],k+=P[5];break;case"S":e.bezierCurveTo(_,k,P[0]+b,P[1]+x,P[2]+b,P[3]+x),_=P[2]+b,k=P[3]+x;break;case"s":e.bezierCurveTo(_,k,_+P[0],k+P[1],_+P[2],k+P[3]),_+=P[2],k+=P[3];break;case"Q":e.quadraticCurveTo(P[0]+b,P[1]+x,P[2]+b,P[3]+x),_=P[2]+b,k=P[3]+x;break;case"q":e.quadraticCurveTo(_+P[0],k+P[1],_+P[2],k+P[3]),_+=P[2],k+=P[3];break;case"T":e.quadraticCurveTo(_,k,P[0]+b,P[1]+x),_=P[0]+b,k=P[1]+x;break;case"t":e.quadraticCurveTo(_,k,_+P[0],k+P[1]),_+=P[0],k+=P[1];break;case"A":bm(e,_,k,P,b,x,!1),_=P[5]+b,k=P[6]+x;break;case"a":bm(e,_,k,P,b,x,!0),_+=P[5],k+=P[6];break;case"Z":case"z":e.closePath(),_=M,k=L;break}}),r.style==="fill"?e.fill():e.stroke()}})}var fb={name:"path",checkEventOn:Qg,draw:function(e,t,r){pb(e,t,r)}},Kg={},gb=[tb,I8,nb,ib,ab,cb,fb];gb.forEach(function(e){Kg[e.name]=E8.extend(e)});function vb(e){var t;return(t=Kg[e])!==null&&t!==void 0?t:null}function zd(e){var t;return(t=Kg[e])!==null&&t!==void 0?t:null}var Ro=function(e){Pt(t,e);function t(r){var n=e.call(this)||this;return n._widget=r,n}return t.prototype.getWidget=function(){return this._widget},t.prototype.createFigure=function(r,n){var i=vb(r.name);if(i!==null){var o=new i(r);if(we(n)){for(var s in n)n.hasOwnProperty(s)&&o.registerEvent(s,n[s]);this.addChild(o)}return o}return null},t.prototype.draw=function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.clear(),this.drawImp(r,n)},t.prototype.checkEventOn=function(r){return!0},t}(Xg),mb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i,o=this.getWidget(),s=this.getWidget().getPane(),u=s.getChart(),d=o.getBounding(),h=u.getStyles().grid,p=h.show;if(p){r.save(),r.globalCompositeOperation="destination-over";var g=h.horizontal,m=g.show;if(m){var b=s.getAxisComponent(),x=b.getTicks().map(function(M){return{coordinates:[{x:0,y:M.coord},{x:d.width,y:M.coord}]}});(n=this.createFigure({name:"line",attrs:x,styles:g}))===null||n===void 0||n.draw(r)}var C=h.vertical,_=C.show;if(_){var k=u.getXAxisPane().getAxisComponent(),x=k.getTicks().map(function(L){return{coordinates:[{x:L.coord,y:0},{x:L.coord,y:d.height}]}});(i=this.createFigure({name:"line",attrs:x,styles:C}))===null||i===void 0||i.draw(r)}r.restore()}},t}(Ro),r2=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.eachChildren=function(r){for(var n=this.getWidget().getPane(),i=n.getChart().getChartStore(),o=i.getVisibleRangeDataList(),s=i.getBarSpace(),u=o.length,d=0;d<u;)r(o[d],s,d),++d},t}(Ro),xm=1e-6,n2=function(e){Pt(t,e);function t(){var r=e.apply(this,Vp([],B0(arguments),!1))||this;return r._heikinAshiCache=new Map,r._boundCandleBarClickEvent=function(n){return function(){return r.getWidget().getPane().getChart().getChartStore().executeAction("onCandleBarClick",n),!1}},r}return t.prototype.drawImp=function(r){var n=this,i=this.getWidget().getPane(),o=i.getId()===Nt.CANDLE,s=i.getChart().getChartStore(),u=this.getCandleBarOptions();if(u!==null){var d=u.type,h=u.styles,p=0,g=0;if(u.type==="ohlc"){var m=s.getBarSpace().gapBar;p=Math.min(Math.max(Math.round(m*.2),1),8),p>2&&p%2===1&&p--,g=Math.floor(p/2)}u.type!=="heikin_ashi"&&this._heikinAshiCache.clear();var b=i.getAxisComponent();this.eachChildren(function(x,C){var _,k=x.x,M=x.data,L=M.current,A=M.prev;if(we(L)){var P=L.open,$=L.high,R=L.low,z=L.close,B=h.compareRule==="current_open"?P:(_=A==null?void 0:A.close)!==null&&_!==void 0?_:z,W=[];z>B?(W[0]=h.upColor,W[1]=h.upBorderColor,W[2]=h.upWickColor):z<B?(W[0]=h.downColor,W[1]=h.downBorderColor,W[2]=h.downWickColor):(W[0]=h.noChangeColor,W[1]=h.noChangeBorderColor,W[2]=h.noChangeWickColor);var X=b.convertToPixel(P),ee=b.convertToPixel(z),U=[X,ee,b.convertToPixel($),b.convertToPixel(R)];U.sort(function(ae,te){return ae-te});var q=C.gapBar%2===0?1:0,ie=[];switch(d){case"candle_solid":{ie=n._createSolidBar(k,U,C,W,q);break}case"candle_stroke":{ie=n._createStrokeBar(k,U,C,W,q);break}case"candle_up_stroke":{z>P?ie=n._createStrokeBar(k,U,C,W,q):ie=n._createSolidBar(k,U,C,W,q);break}case"candle_down_stroke":{P>z?ie=n._createStrokeBar(k,U,C,W,q):ie=n._createSolidBar(k,U,C,W,q);break}case"ohlc":{ie=[{name:"rect",attrs:[{x:k-g,y:U[0],width:p,height:U[3]-U[0]},{x:k-C.halfGapBar,y:X+p>U[3]?U[3]-p:X,width:C.halfGapBar-g,height:p},{x:k+g,y:ee+p>U[3]?U[3]-p:ee,width:C.halfGapBar-g,height:p}],styles:{color:W[0]}}];break}case"heikin_ashi":{var le=n._calculateHeikinAshi(x);W=n._getHeikinAshiColors(le.haValues.open,le.haValues.close,P,z,h),ie=n._createSolidBar(k,le.priceY,C,W,q);break}}ie.forEach(function(ae){var te,ce=null;o&&(ce={mouseClickEvent:n._boundCandleBarClickEvent(x)}),(te=n.createFigure(ae,ce??void 0))===null||te===void 0||te.draw(r)})}})}},t.prototype.getCandleBarOptions=function(){var r=this.getWidget().getPane().getChart().getStyles().candle;return{type:r.type,styles:r.bar}},t.prototype._createSolidBar=function(r,n,i,o,s){return[{name:"rect",attrs:{x:r,y:n[0],width:1,height:n[3]-n[0]},styles:{color:o[2]}},{name:"rect",attrs:{x:r-i.halfGapBar,y:n[1],width:i.gapBar+s,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke_fill",color:o[0],borderColor:o[1]}}]},t.prototype._createStrokeBar=function(r,n,i,o,s){return[{name:"rect",attrs:[{x:r,y:n[0],width:1,height:n[1]-n[0]},{x:r,y:n[2],width:1,height:n[3]-n[2]}],styles:{color:o[2]}},{name:"rect",attrs:{x:r-i.halfGapBar,y:n[1],width:i.gapBar+s,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke",borderColor:o[1]}}]},t.prototype._calculateHeikinAshi=function(r){var n=r.data,i=r.dataIndex,o=n.current,s=o.open,u=o.high,d=o.low,h=o.close,p=this._heikinAshiCache.get(i);if(p!==void 0){var g=this.getWidget().getPane().getAxisComponent(),m=[g.convertToPixel(p.open),g.convertToPixel(p.close),g.convertToPixel(p.high),g.convertToPixel(p.low)];return m.sort(function($,R){return $-R}),{priceY:m,haValues:p}}var b=(s+u+d+h)/4,x=0;if(i>0){var C=this._getHeikinAshiValues(i-1);if(C!==null)x=(C.open+C.close)/2;else{var _=this.getPreviousData(i);_!==null?x=(_.open+_.close)/2:x=s}}else x=(s+h)/2;var k=Math.max(u,x,b),M=Math.min(d,x,b),L={open:x,high:k,low:M,close:b};this._heikinAshiCache.set(i,L);var A=this.getWidget().getPane().getAxisComponent(),P=[A.convertToPixel(x),A.convertToPixel(b),A.convertToPixel(k),A.convertToPixel(M)];return P.sort(function($,R){return $-R}),{priceY:P,haValues:L}},t.prototype._getHeikinAshiValues=function(r){var n=this._heikinAshiCache.get(r);if(n!==void 0)return n;var i=this.getWidget().getPane().getChart().getChartStore().getDataList();if(r<0||r>=i.length)return null;var o=i[r],s=null;r>0&&(s=this._getHeikinAshiValues(r-1));var u=o.open,d=o.high,h=o.low,p=o.close,g=(u+d+h+p)/4,m=0;s!==null?m=(s.open+s.close)/2:m=(u+p)/2;var b=Math.max(d,m,g),x=Math.min(h,m,g),C={open:m,high:b,low:x,close:g};return this._heikinAshiCache.set(r,C),C},t.prototype.getPreviousData=function(r){var n=this.getWidget().getPane(),i=n.getChart().getChartStore(),o=i.getDataList();return r<=0||r>=o.length?null:r>0&&r<o.length?o[r-1]:null},t.prototype._getHeikinAshiColors=function(r,n,i,o,s){var u=[],d=n-r;return d>xm?(u[0]=s.upColor,u[1]=s.upBorderColor,u[2]=s.upWickColor):d<-xm?(u[0]=s.downColor,u[1]=s.downBorderColor,u[2]=s.downWickColor):o>i?(u[0]=s.upColor,u[1]=s.upBorderColor,u[2]=s.upWickColor):o<i?(u[0]=s.downColor,u[1]=s.downBorderColor,u[2]=s.downWickColor):(u[0]=s.noChangeColor,u[1]=s.noChangeBorderColor,u[2]=s.noChangeWickColor),u},t}(r2),yb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCandleBarOptions=function(){var r,n,i=this.getWidget().getPane(),o=i.getAxisComponent();if(!o.isInCandle()){var s=i.getChart().getChartStore(),u=s.getIndicatorsByPaneId(i.getId());try{for(var d=sa(u),h=d.next();!h.done;h=d.next()){var p=h.value;if(p.shouldOhlc&&p.visible){var g=p.styles,m=s.getStyles().indicator,b=En(g,"ohlc.compareRule",m.ohlc.compareRule),x=En(g,"ohlc.upColor",m.ohlc.upColor),C=En(g,"ohlc.downColor",m.ohlc.downColor),_=En(g,"ohlc.noChangeColor",m.ohlc.noChangeColor);return{type:"ohlc",styles:{compareRule:b,upColor:x,downColor:C,noChangeColor:_,upBorderColor:x,downBorderColor:C,noChangeBorderColor:_,upWickColor:x,downWickColor:C,noChangeWickColor:_}}}}}catch(k){r={error:k}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}}return null},t.prototype.drawImp=function(r){var n=this;e.prototype.drawImp.call(this,r);var i=this.getWidget(),o=i.getPane(),s=o.getChart(),u=i.getBounding(),d=s.getXAxisPane().getAxisComponent(),h=o.getAxisComponent(),p=s.getChartStore(),g=p.getIndicatorsByPaneId(o.getId()),m=p.getStyles().indicator;r.save(),g.forEach(function(b){if(b.visible){b.zLevel<0?r.globalCompositeOperation="destination-over":r.globalCompositeOperation="source-over";var x=!1;if(b.draw!==null&&(r.save(),x=b.draw({ctx:r,chart:s,indicator:b,bounding:u,xAxis:d,yAxis:h}),r.restore()),!x){var C=b.result,_=[];n.eachChildren(function(k,M){var L,A,P,$,R,z,B,W,X,ee,U,q,ie,le,ae,te=M.halfGapBar,ce=k.dataIndex,ue=k.x,j=k.data,Z=d.convertToPixel(ce-1),pe=d.convertToPixel(ce+1),Y=(P=C[(A=(L=j.prev)===null||L===void 0?void 0:L.timestamp)!==null&&A!==void 0?A:""])!==null&&P!==void 0?P:{},fe=(z=C[(R=($=j.current)===null||$===void 0?void 0:$.timestamp)!==null&&R!==void 0?R:""])!==null&&z!==void 0?z:{},ve=(X=C[(W=(B=j.next)===null||B===void 0?void 0:B.timestamp)!==null&&W!==void 0?W:""])!==null&&X!==void 0?X:{},$e={x:Z},Ie={x:ue},Oe={x:pe};b.figures.forEach(function(Ce){var Le=Ce.key,Ve=Y[Le];ct(Ve)&&($e[Le]=h.convertToPixel(Ve));var je=fe[Le];ct(je)&&(Ie[Le]=h.convertToPixel(je));var qe=ve[Le];ct(qe)&&(Oe[Le]=h.convertToPixel(qe))}),Hg(b,{prev:(U=(ee=j.prev)===null||ee===void 0?void 0:ee.timestamp)!==null&&U!==void 0?U:null,current:(ie=(q=j.current)===null||q===void 0?void 0:q.timestamp)!==null&&ie!==void 0?ie:null,next:(ae=(le=j.next)===null||le===void 0?void 0:le.timestamp)!==null&&ae!==void 0?ae:null},m,function(Ce,Le,Ve){var je,qe,ht;if(we(fe[Ce.key])){var vt=Ie[Ce.key],bt=(je=Ce.attrs)===null||je===void 0?void 0:je.call(Ce,{data:{prev:Y,current:fe,next:ve},coordinate:{prev:$e,current:Ie,next:Oe},bounding:u,barSpace:M,xAxis:d,yAxis:h});if(!we(bt))switch(Ce.type){case"circle":{bt={x:ue,y:vt,r:Math.max(1,te)};break}case"rect":case"bar":{var or=(qe=Ce.baseValue)!==null&&qe!==void 0?qe:h.getRange().from,dr=h.convertToPixel(or),qt=Math.abs(dr-vt);or!==fe[Ce.key]&&(qt=Math.max(1,qt));var It=0;vt>dr?It=dr:It=vt,bt={x:ue-te,y:It,width:Math.max(1,te*2),height:qt};break}case"line":{we(_[Ve])||(_[Ve]=[]),ct(Ie[Ce.key])&&ct(Oe[Ce.key])&&_[Ve].push({coordinates:[{x:Ie.x,y:Ie[Ce.key]},{x:Oe.x,y:Oe[Ce.key]}],styles:Le});break}}var mr=Ce.type;we(bt)&&mr!=="line"&&((ht=n.createFigure({name:mr==="bar"?"rect":mr,attrs:bt,styles:Le}))===null||ht===void 0||ht.draw(r))}})}),_.forEach(function(k){var M,L,A,P;if(k.length>1){for(var $=[{coordinates:[k[0].coordinates[0],k[0].coordinates[1]],styles:k[0].styles}],R=1;R<k.length;R++){var z=$[$.length-1],B=k[R],W=z.coordinates[z.coordinates.length-1];W.x===B.coordinates[0].x&&W.y===B.coordinates[0].y&&z.styles.style===B.styles.style&&z.styles.color===B.styles.color&&z.styles.size===B.styles.size&&z.styles.smooth===B.styles.smooth&&((M=z.styles.dashedValue)===null||M===void 0?void 0:M[0])===((L=B.styles.dashedValue)===null||L===void 0?void 0:L[0])&&((A=z.styles.dashedValue)===null||A===void 0?void 0:A[1])===((P=B.styles.dashedValue)===null||P===void 0?void 0:P[1])?z.coordinates.push(B.coordinates[1]):$.push({coordinates:[B.coordinates[0],B.coordinates[1]],styles:B.styles})}$.forEach(function(X){var ee,U=X.coordinates,q=X.styles;(ee=n.createFigure({name:"line",attrs:{coordinates:U},styles:q}))===null||ee===void 0||ee.draw(r)})}})}}}),r.restore()},t}(n2),bb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this.getWidget(),i=n.getPane(),o=n.getBounding(),s=n.getPane().getChart().getChartStore(),u=s.getCrosshair(),d=s.getStyles().crosshair;if(lr(u.paneId)&&d.show){if(u.paneId===i.getId()){var h=u.y;this._drawLine(r,[{x:0,y:h},{x:o.width,y:h}],d.horizontal)}var p=u.realX;this._drawLine(r,[{x:p,y:0},{x:p,y:o.height}],d.vertical)}},t.prototype._drawLine=function(r,n,i){var o;if(i.show){var s=i.line;s.show&&((o=this.createFigure({name:"line",attrs:{coordinates:n},styles:s}))===null||o===void 0||o.draw(r))}},t}(Ro),i2=function(e){Pt(t,e);function t(r){var n=e.call(this,r)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(i,o){return function(){var s=n.getWidget().getPane();return s.getChart().getChartStore().executeAction(i,o),!0}},n._featureMouseMoveEvent=function(i){return function(){return n._activeFeatureInfo=i,!0}},n.registerEvent("mouseMoveEvent",function(i){return n._activeFeatureInfo=null,!1}),n}return t.prototype.drawImp=function(r){var n=this.getWidget(),i=n.getPane(),o=i.getChart().getChartStore(),s=o.getCrosshair();if(we(s.kLineData)){var u=n.getBounding(),d=o.getStyles().indicator.tooltip,h=d.offsetLeft,p=d.offsetTop,g=d.offsetRight;this.drawIndicatorTooltip(r,h,p,u.width-g)}},t.prototype.drawIndicatorTooltip=function(r,n,i,o){var s=this,u=this.getWidget().getPane(),d=u.getChart().getChartStore(),h=d.getStyles().indicator,p=h.tooltip;if(this.isDrawTooltip(d.getCrosshair(),p)){var g=d.getIndicatorsByPaneId(u.getId()),m=p.title,b=p.legend;g.forEach(function(x){var C=0,_={x:n,y:i},k=s.getIndicatorTooltipData(x),M=k.name,L=k.calcParamsText,A=k.legends,P=k.features,$=M.length>0,R=A.length>0;if($||R){var z=s.classifyTooltipFeatures(P);if(C=s.drawStandardTooltipFeatures(r,z[0],_,x,n,C,o),$){var B=M;L.length>0&&(B="".concat(B).concat(L));var W=m.color;C=s.drawStandardTooltipLegends(r,[{title:{text:"",color:W},value:{text:B,color:W}}],_,n,C,o,m)}C=s.drawStandardTooltipFeatures(r,z[1],_,x,n,C,o),R&&(C=s.drawStandardTooltipLegends(r,A,_,n,C,o,b)),C=s.drawStandardTooltipFeatures(r,z[2],_,x,n,C,o),i=_.y+C}})}return i},t.prototype.drawStandardTooltipFeatures=function(r,n,i,o,s,u,d){var h=this;if(n.length>0){var p=0,g=0;n.forEach(function(x){var C=x.marginLeft,_=C===void 0?0:C,k=x.marginTop,M=k===void 0?0:k,L=x.marginRight,A=L===void 0?0:L,P=x.marginBottom,$=P===void 0?0:P,R=x.paddingLeft,z=R===void 0?0:R,B=x.paddingTop,W=B===void 0?0:B,X=x.paddingRight,ee=X===void 0?0:X,U=x.paddingBottom,q=U===void 0?0:U,ie=x.size,le=ie===void 0?0:ie,ae=x.type,te=x.content,ce=0;if(ae==="icon_font"){var ue=te;r.font=Hc(le,"normal",ue.family),ce=r.measureText(ue.code).width}else ce=le;p+=_+z+ce+ee+A,g=Math.max(g,M+W+le+q+$)}),i.x+p>d?(i.x=s,i.y+=u,u=g):u=Math.max(u,g);var m=this.getWidget().getPane(),b=m.getId();n.forEach(function(x){var C,_,k,M,L,A=x.marginLeft,P=A===void 0?0:A,$=x.marginTop,R=$===void 0?0:$,z=x.marginRight,B=z===void 0?0:z,W=x.paddingLeft,X=W===void 0?0:W,ee=x.paddingTop,U=ee===void 0?0:ee,q=x.paddingRight,ie=q===void 0?0:q,le=x.paddingBottom,ae=le===void 0?0:le,te=x.backgroundColor,ce=x.activeBackgroundColor,ue=x.borderRadius,j=x.size,Z=j===void 0?0:j,pe=x.color,Y=x.activeColor,fe=x.type,ve=x.content,$e=pe,Ie=te;((C=h._activeFeatureInfo)===null||C===void 0?void 0:C.paneId)===b&&((_=h._activeFeatureInfo.indicator)===null||_===void 0?void 0:_.id)===(o==null?void 0:o.id)&&h._activeFeatureInfo.feature.id===x.id&&($e=Y??pe,Ie=ce??te);var Oe="onCandleTooltipFeatureClick",Ce={paneId:b,feature:x};we(o)&&(Oe="onIndicatorTooltipFeatureClick",Ce.indicator=o);var Le={mouseClickEvent:h._featureClickEvent(Oe,Ce),mouseMoveEvent:h._featureMouseMoveEvent(Ce)},Ve=0;if(fe==="icon_font"){var je=ve;(k=h.createFigure({name:"text",attrs:{text:je.code,x:i.x+P,y:i.y+R},styles:{paddingLeft:X,paddingTop:U,paddingRight:ie,paddingBottom:ae,borderRadius:ue,size:Z,family:je.family,color:$e,backgroundColor:Ie}},Le))===null||k===void 0||k.draw(r),Ve=r.measureText(je.code).width}else{(M=h.createFigure({name:"rect",attrs:{x:i.x+P,y:i.y+R,width:Z,height:Z},styles:{paddingLeft:X,paddingTop:U,paddingRight:ie,paddingBottom:ae,color:Ie}},Le))===null||M===void 0||M.draw(r);var qe=ve;(L=h.createFigure({name:"path",attrs:{path:qe.path,x:i.x+P+X,y:i.y+R+U,width:Z,height:Z},styles:{style:qe.style,lineWidth:qe.lineWidth,color:$e}}))===null||L===void 0||L.draw(r),Ve=Z}i.x+=P+X+Ve+ie+B})}return u},t.prototype.drawStandardTooltipLegends=function(r,n,i,o,s,u,d){var h=this;if(n.length>0){var p=d.marginLeft,g=d.marginTop,m=d.marginRight,b=d.marginBottom,x=d.size,C=d.family,_=d.weight;r.font=Hc(x,_,C),n.forEach(function(k){var M,L,A=k.title,P=k.value,$=r.measureText(A.text).width,R=r.measureText(P.text).width,z=$+R,B=g+x+b;i.x+p+z+m>u?(i.x=o,i.y+=s,s=B):s=Math.max(s,B),A.text.length>0&&((M=h.createFigure({name:"text",attrs:{x:i.x+p,y:i.y+g,text:A.text},styles:{color:A.color,size:x,family:C,weight:_}}))===null||M===void 0||M.draw(r)),(L=h.createFigure({name:"text",attrs:{x:i.x+p+$,y:i.y+g,text:P.text},styles:{color:P.color,size:x,family:C,weight:_}}))===null||L===void 0||L.draw(r),i.x+=p+z+m})}return s},t.prototype.isDrawTooltip=function(r,n){var i=n.showRule;return i==="always"||i==="follow_cross"&&lr(r.paneId)},t.prototype.getIndicatorTooltipData=function(r){var n,i,o,s=this.getWidget().getPane().getChart().getChartStore(),u=s.getStyles().indicator,d=u.tooltip,h=d.title,p="",g="";if(h.show&&(h.showName&&(p=r.shortName),h.showParams)){var m=r.calcParams;m.length>0&&(g="(".concat(m.join(","),")"))}var b={name:p,calcParamsText:g,legends:[],features:d.features},x=s.getCrosshair().dataIndex,C=r.result,_=s.getInnerFormatter(),k=s.getDecimalFold(),M=s.getThousandsSeparator(),L=[];if(r.visible){var A=s.getDataList(),P=(n=A[x])!==null&&n!==void 0?n:{},$=(i=A[x-1])!==null&&i!==void 0?i:{},R=C[P.timestamp];!we(R)&&x===A.length-1&&(R=C[$.timestamp]);var z=d.legend.defaultValue;Hg(r,{prev:$.timestamp,current:P.timestamp,next:(o=A[x])===null||o===void 0?void 0:o.timestamp},u,function(ce,ue){if(lr(ce.title)){var j=ue.color,Z=R==null?void 0:R[ce.key];ct(Z)&&(Z=Kn(Z,r.precision),r.shouldFormatBigNumber&&(Z=_.formatBigNumber(Z)),Z=k.format(M.format(Z))),L.push({title:{text:ce.title,color:j},value:{text:Z??z,color:j}})}}),b.legends=L}if(pi(r.createTooltipDataSource)){var B=this.getWidget(),W=B.getPane(),X=W.getChart(),ee=r.createTooltipDataSource({chart:X,indicator:r,crosshair:s.getCrosshair(),bounding:B.getBounding(),xAxis:W.getChart().getXAxisPane().getAxisComponent(),yAxis:W.getAxisComponent()}),U=ee.name,q=ee.calcParamsText,ie=ee.legends,le=ee.features;if(h.show&&(lr(U)&&h.showName&&(b.name=U),lr(q)&&h.showParams&&(b.calcParamsText=q)),we(le)&&(b.features=le),we(ie)&&r.visible){var ae=[],te=u.tooltip.legend.color;ie.forEach(function(ce){var ue={text:"",color:te};na(ce.title)?ue=ce.title:ue.text=ce.title;var j={text:"",color:te};na(ce.value)?j=ce.value:j.text=ce.value,ct(Number(j.text))&&(j.text=k.format(M.format(j.text))),ae.push({title:ue,value:j})}),b.legends=ae}}return b},t.prototype.classifyTooltipFeatures=function(r){var n=[],i=[],o=[];return r.forEach(function(s){switch(s.position){case"left":{n.push(s);break}case"middle":{i.push(s);break}case"right":{o.push(s);break}}}),[n,i,o]},t}(Ro),o2=function(e){Pt(t,e);function t(r){var n=e.call(this,r)||this;return n._initEvent(),n}return t.prototype._initEvent=function(){var r=this,n=this.getWidget(),i=n.getPane(),o=i.getId(),s=i.getChart(),u=s.getChartStore();this.registerEvent("mouseMoveEvent",function(d){var h,p=u.getProgressOverlayInfo();if(p!==null){var g=p.overlay,m=p.paneId;g.isStart()&&(u.updateProgressOverlayInfo(o),m=o);var b=g.points.length-1;return g.isDrawing()&&m===o&&(g.eventMoveForDrawing(r._coordinateToPoint(g,d)),(h=g.onDrawing)===null||h===void 0||h.call(g,Ze({chart:s,overlay:g},d))),r._figureMouseMoveEvent(g,"point",b,{key:"".concat(md,"point_").concat(b),type:"circle",attrs:{}})(d)}return u.setHoverOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(x,C){return r._processOverlayMouseEnterEvent(x,C,d)},function(x,C){return r._processOverlayMouseLeaveEvent(x,C,d)}),n.setForceCursor(null),!1}).registerEvent("mouseClickEvent",function(d){var h,p,g=u.getProgressOverlayInfo();if(g!==null){var m=g.overlay,b=g.paneId;m.isStart()&&(u.updateProgressOverlayInfo(o,!0),b=o);var x=m.points.length-1;return m.isDrawing()&&b===o&&(m.eventMoveForDrawing(r._coordinateToPoint(m,d)),(h=m.onDrawing)===null||h===void 0||h.call(m,Ze({chart:s,overlay:m},d)),m.nextStep(),m.isDrawing()||(u.progressOverlayComplete(),(p=m.onDrawEnd)===null||p===void 0||p.call(m,Ze({chart:s,overlay:m},d)))),r._figureMouseClickEvent(m,"point",x,{key:"".concat(md,"point_").concat(x),type:"circle",attrs:{}})(d)}return u.setClickOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(C,_){return r._processOverlaySelectedEvent(C,_,d)},function(C,_){return r._processOverlayDeselectedEvent(C,_,d)}),!1}).registerEvent("mouseDoubleClickEvent",function(d){var h,p=u.getProgressOverlayInfo();if(p!==null){var g=p.overlay,m=p.paneId;g.isDrawing()&&m===o&&(g.forceComplete(),g.isDrawing()||(u.progressOverlayComplete(),(h=g.onDrawEnd)===null||h===void 0||h.call(g,Ze({chart:s,overlay:g},d))));var b=g.points.length-1;return r._figureMouseClickEvent(g,"point",b,{key:"".concat(md,"point_").concat(b),type:"circle",attrs:{}})(d)}return!1}).registerEvent("mouseRightClickEvent",function(d){var h=u.getProgressOverlayInfo();if(h!==null){var p=h.overlay;if(p.isDrawing()){var g=p.points.length-1;return r._figureMouseRightClickEvent(p,"point",g,{key:"".concat(md,"point_").concat(g),type:"circle",attrs:{}})(d)}}return!1}).registerEvent("mouseUpEvent",function(d){var h,p=u.getPressedOverlayInfo(),g=p.overlay,m=p.figure;return g!==null&&ra("onPressedMoveEnd",m)&&((h=g.onPressedMoveEnd)===null||h===void 0||h.call(g,Ze({chart:s,overlay:g,figure:m??void 0},d))),u.setPressedOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null}),!1}).registerEvent("pressedMouseMoveEvent",function(d){var h,p=u.getPressedOverlayInfo(),g=p.overlay,m=p.figureType,b=p.figureIndex,x=p.figure;if(g!==null&&ra("onPressedMoving",x)){if(!g.lock){var C=r._coordinateToPoint(g,d);m==="point"?g.eventPressedPointMove(C,b):g.eventPressedOtherMove(C,r.getWidget().getPane().getChart().getChartStore());var _=!1;(h=g.onPressedMoving)===null||h===void 0||h.call(g,Ze(Ze({chart:s,overlay:g,figure:x??void 0},d),{preventDefault:function(){_=!0}})),_?r.getWidget().setForceCursor(null):r.getWidget().setForceCursor("pointer")}return!0}return r.getWidget().setForceCursor(null),!1})},t.prototype._createFigureEvents=function(r,n,i,o){return r.isDrawing()?null:{mouseMoveEvent:this._figureMouseMoveEvent(r,n,i,o),mouseDownEvent:this._figureMouseDownEvent(r,n,i,o),mouseClickEvent:this._figureMouseClickEvent(r,n,i,o),mouseRightClickEvent:this._figureMouseRightClickEvent(r,n,i,o),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(r,n,i,o)}},t.prototype._processOverlayMouseEnterEvent=function(r,n,i){return pi(r.onMouseEnter)&&ra("onMouseEnter",n)?(r.onMouseEnter(Ze({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._processOverlayMouseLeaveEvent=function(r,n,i){return pi(r.onMouseLeave)&&ra("onMouseLeave",n)?(r.onMouseLeave(Ze({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._processOverlaySelectedEvent=function(r,n,i){var o;return ra("onSelected",n)?((o=r.onSelected)===null||o===void 0||o.call(r,Ze({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._processOverlayDeselectedEvent=function(r,n,i){var o;return ra("onDeselected",n)?((o=r.onDeselected)===null||o===void 0||o.call(r,Ze({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._figureMouseMoveEvent=function(r,n,i,o){var s=this;return function(u){var d,h=s.getWidget().getPane(),p=!r.isDrawing()&&ra("onMouseMove",o);if(p){var g=!1;(d=r.onMouseMove)===null||d===void 0||d.call(r,Ze(Ze({chart:h.getChart(),overlay:r,figure:o},u),{preventDefault:function(){g=!0}})),g?s.getWidget().setForceCursor(null):s.getWidget().setForceCursor("pointer")}return h.getChart().getChartStore().setHoverOverlayInfo({paneId:h.getId(),overlay:r,figureType:n,figure:o,figureIndex:i},function(m,b){return s._processOverlayMouseEnterEvent(m,b,u)},function(m,b){return s._processOverlayMouseLeaveEvent(m,b,u)}),p}},t.prototype._figureMouseDownEvent=function(r,n,i,o){var s=this;return function(u){var d,h=s.getWidget().getPane(),p=h.getId();return r.startPressedMove(s._coordinateToPoint(r,u)),ra("onPressedMoveStart",o)?((d=r.onPressedMoveStart)===null||d===void 0||d.call(r,Ze({chart:h.getChart(),overlay:r,figure:o},u)),h.getChart().getChartStore().setPressedOverlayInfo({paneId:p,overlay:r,figureType:n,figureIndex:i,figure:o}),!r.isDrawing()):!1}},t.prototype._figureMouseClickEvent=function(r,n,i,o){var s=this;return function(u){var d,h=s.getWidget().getPane(),p=h.getId(),g=!r.isDrawing()&&ra("onClick",o);return g&&((d=r.onClick)===null||d===void 0||d.call(r,Ze({chart:s.getWidget().getPane().getChart(),overlay:r,figure:o},u))),h.getChart().getChartStore().setClickOverlayInfo({paneId:p,overlay:r,figureType:n,figureIndex:i,figure:o},function(m,b){return s._processOverlaySelectedEvent(m,b,u)},function(m,b){return s._processOverlayDeselectedEvent(m,b,u)}),g}},t.prototype._figureMouseDoubleClickEvent=function(r,n,i,o){var s=this;return function(u){var d;return ra("onDoubleClick",o)?((d=r.onDoubleClick)===null||d===void 0||d.call(r,Ze(Ze({},u),{chart:s.getWidget().getPane().getChart(),figure:o,overlay:r})),!r.isDrawing()):!1}},t.prototype._figureMouseRightClickEvent=function(r,n,i,o){var s=this;return function(u){var d;if(ra("onRightClick",o)){var h=!1;return(d=r.onRightClick)===null||d===void 0||d.call(r,Ze(Ze({chart:s.getWidget().getPane().getChart(),overlay:r,figure:o},u),{preventDefault:function(){h=!0}})),h||s.getWidget().getPane().getChart().getChartStore().removeOverlay(r),!r.isDrawing()}return!1}},t.prototype._coordinateToPoint=function(r,n){var i,o={},s=this.getWidget().getPane(),u=s.getChart(),d=s.getId(),h=u.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var p=u.getXAxisPane().getAxisComponent(),g=p.convertFromPixel(n.x),m=(i=h.dataIndexToTimestamp(g))!==null&&i!==void 0?i:void 0;o.timestamp=m,o.dataIndex=g}if(this.coordinateToPointValueFlag()){var b=s.getAxisComponent(),x=b.convertFromPixel(n.y);if(r.mode!=="normal"&&d===Nt.CANDLE&&ct(o.dataIndex)){var C=h.getDataByDataIndex(o.dataIndex);if(C!==null){var _=r.modeSensitivity;if(x>C.high)if(r.mode==="weak_magnet"){var k=b.convertToPixel(C.high),M=b.convertFromPixel(k-_);x<M&&(x=C.high)}else x=C.high;else if(x<C.low)if(r.mode==="weak_magnet"){var L=b.convertToPixel(C.low),M=b.convertFromPixel(L-_);x>M&&(x=C.low)}else x=C.low;else{var A=Math.max(C.open,C.close),P=Math.min(C.open,C.close);x>A?x-A<C.high-x?x=A:x=C.high:x<P?x-C.low<P-x?x=C.low:x=P:A-x<x-P?x=A:x=P}}}o.value=x}return o},t.prototype.coordinateToPointValueFlag=function(){return!0},t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.dispatchEvent=function(r,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(r,n):e.prototype.dispatchEvent.call(this,r,n)},t.prototype.drawImp=function(r){var n=this,i=this.getCompleteOverlays();i.forEach(function(s){s.visible&&n._drawOverlay(r,s)});var o=this.getProgressOverlay();we(o)&&o.visible&&this._drawOverlay(r,o)},t.prototype._drawOverlay=function(r,n){var i=n.points,o=this.getWidget().getPane(),s=o.getChart(),u=s.getChartStore(),d=o.getAxisComponent(),h=s.getXAxisPane().getAxisComponent(),p=i.map(function(m){var b,x=null;ct(m.timestamp)&&(x=u.timestampToDataIndex(m.timestamp));var C={x:0,y:0};return ct(x)&&(C.x=h.convertToPixel(x)),ct(m.value)&&(C.y=(b=d==null?void 0:d.convertToPixel(m.value))!==null&&b!==void 0?b:0),C});if(p.length>0){var g=[].concat(this.getFigures(n,p));this.drawFigures(r,n,g)}this.drawDefaultFigures(r,n,p)},t.prototype.drawFigures=function(r,n,i){var o=this,s=this.getWidget().getPane().getChart().getStyles().overlay;i.forEach(function(u,d){var h=u.type,p=u.styles,g=u.attrs,m=[].concat(g);m.forEach(function(b){var x,C,_=o._createFigureEvents(n,"other",d,u),k=Ze(Ze(Ze({},s[h]),(x=n.styles)===null||x===void 0?void 0:x[h]),p);(C=o.createFigure({name:h,attrs:b,styles:k},_??void 0))===null||C===void 0||C.draw(r)})})},t.prototype.getCompleteOverlays=function(){var r=this.getWidget().getPane();return r.getChart().getChartStore().getOverlaysByPaneId(r.getId())},t.prototype.getProgressOverlay=function(){var r=this.getWidget().getPane(),n=r.getChart().getChartStore().getProgressOverlayInfo();return we(n)&&n.paneId===r.getId()?n.overlay:null},t.prototype.getFigures=function(r,n){var i,o,s=this.getWidget(),u=s.getPane(),d=u.getChart(),h=u.getAxisComponent(),p=d.getXAxisPane().getAxisComponent(),g=s.getBounding();return(o=(i=r.createPointFigures)===null||i===void 0?void 0:i.call(r,{chart:d,overlay:r,coordinates:n,bounding:g,xAxis:p,yAxis:h}))!==null&&o!==void 0?o:[]},t.prototype.drawDefaultFigures=function(r,n,i){var o=this,s,u;if(n.needDefaultPointFigure){var d=this.getWidget().getPane().getChart().getChartStore(),h=d.getHoverOverlayInfo(),p=d.getClickOverlayInfo();if(((s=h.overlay)===null||s===void 0?void 0:s.id)===n.id&&h.figureType!=="none"||((u=p.overlay)===null||u===void 0?void 0:u.id)===n.id&&p.figureType!=="none"){var g=d.getStyles().overlay,m=n.styles,b=Ze(Ze({},g.point),m==null?void 0:m.point);i.forEach(function(x,C){var _,k,M,L,A,P=x.x,$=x.y,R=b.radius,z=b.color,B=b.borderColor,W=b.borderSize;((_=h.overlay)===null||_===void 0?void 0:_.id)===n.id&&h.figureType==="point"&&((k=h.figure)===null||k===void 0?void 0:k.key)==="".concat(md,"point_").concat(C)&&(R=b.activeRadius,z=b.activeColor,B=b.activeBorderColor,W=b.activeBorderSize),(L=o.createFigure({name:"circle",attrs:{x:P,y:$,r:R+W},styles:{color:B}},(M=o._createFigureEvents(n,"point",C,{key:"".concat(md,"point_").concat(C),type:"circle",attrs:{x:P,y:$,r:R+W},styles:{color:B}}))!==null&&M!==void 0?M:void 0))===null||L===void 0||L.draw(r),(A=o.createFigure({name:"circle",attrs:{x:P,y:$,r:R},styles:{color:z}}))===null||A===void 0||A.draw(r)})}}},t}(Ro),a2=function(e){Pt(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._gridView=new mb(i),i._indicatorView=new yb(i),i._crosshairLineView=new bb(i),i._tooltipView=i.createTooltipView(),i._overlayView=new o2(i),i.addChild(i._tooltipView),i.addChild(i._overlayView),i}return t.prototype.getName=function(){return Bt.MAIN},t.prototype.updateMain=function(r){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(r),this._indicatorView.draw(r),this._gridView.draw(r))},t.prototype.createTooltipView=function(){return new i2(this)},t.prototype.updateMainContent=function(r){},t.prototype.updateOverlayContent=function(r){},t.prototype.updateOverlay=function(r){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(r),this._crosshairLineView.draw(r),this.updateOverlayContent(r)),this._tooltipView.draw(r)},t}(Gg),xb=function(e){Pt(t,e);function t(){var r=e.apply(this,Vp([],B0(arguments),!1))||this;return r._ripplePoint=r.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),r._animationFrameTime=0,r._animation=new Tg({iterationCount:1/0}).doFrame(function(n){r._animationFrameTime=n;var i=r.getWidget().getPane();i.getChart().updatePane(0,i.getId())}),r}return t.prototype.drawImp=function(r){var n,i,o,s=this.getWidget(),u=s.getPane(),d=u.getChart(),h=d.getDataList(),p=h.length-1,g=s.getBounding(),m=u.getAxisComponent(),b=d.getStyles().candle.area,x=[],C=Number.MAX_SAFE_INTEGER,_=Number.MIN_SAFE_INTEGER,k=null;if(this.eachChildren(function(R){var z=R.x,B=R.data.current,W=B==null?void 0:B[b.value];if(ct(W)){var X=m.convertToPixel(W);_===Number.MIN_SAFE_INTEGER&&(_=z),x.push({x:z,y:X}),C=Math.min(C,X),R.dataIndex===p&&(k={x:z,y:X})}}),x.length>0){(n=this.createFigure({name:"line",attrs:{coordinates:x},styles:{color:b.lineColor,size:b.lineSize,smooth:b.smooth}}))===null||n===void 0||n.draw(r);var M=b.backgroundColor,L="";if(Va(M)){var A=r.createLinearGradient(0,g.height,0,C);try{M.forEach(function(R){var z=R.offset,B=R.color;A.addColorStop(z,B)})}catch{}L=A}else L=M;r.fillStyle=L,r.beginPath(),r.moveTo(_,g.height),r.lineTo(x[0].x,x[0].y),Xy(r,x,b.smooth),r.lineTo(x[x.length-1].x,g.height),r.closePath(),r.fill()}var P=b.point;if(P.show&&we(k)){(i=this.createFigure({name:"circle",attrs:{x:k.x,y:k.y,r:P.radius},styles:{style:"fill",color:P.color}}))===null||i===void 0||i.draw(r);var $=P.rippleRadius;P.animation&&($=P.radius+this._animationFrameTime/P.animationDuration*(P.rippleRadius-P.radius),this._animation.setDuration(P.animationDuration).start()),(o=this._ripplePoint)===null||o===void 0||o.setAttrs({x:k.x,y:k.y,r:$}).setStyles({style:"fill",color:P.rippleColor}).draw(r)}else this.stopAnimation()},t.prototype.stopAnimation=function(){this._animation.stop()},t}(r2),wb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i,o=this.getWidget(),s=o.getPane(),u=s.getChart().getChartStore(),d=u.getStyles().candle.priceMark,h=d.high,p=d.low;if(d.show&&(h.show||p.show)){var g=u.getVisibleRangeHighLowPrice(),m=(i=(n=u.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&i!==void 0?i:2,b=s.getAxisComponent(),x=g[0],C=x.price,_=x.x,k=g[1],M=k.price,L=k.x,A=b.convertToPixel(C),P=b.convertToPixel(M),$=u.getDecimalFold(),R=u.getThousandsSeparator();h.show&&C!==Number.MIN_SAFE_INTEGER&&this._drawMark(r,$.format(R.format(Kn(C,m))),{x:_,y:A},A<P?[-2,-5]:[2,5],h),p.show&&M!==Number.MAX_SAFE_INTEGER&&this._drawMark(r,$.format(R.format(Kn(M,m))),{x:L,y:P},A<P?[2,5]:[-2,-5],p)}},t.prototype._drawMark=function(r,n,i,o,s){var u,d,h,p=i.x,g=i.y+o[0];(u=this.createFigure({name:"line",attrs:{coordinates:[{x:p-2,y:g+o[0]},{x:p,y:g},{x:p+2,y:g+o[0]}]},styles:{color:s.color}}))===null||u===void 0||u.draw(r);var m=0,b=0,x="left",C=this.getWidget().getBounding().width;p>C/2?(m=p-5,b=m-s.textOffset,x="right"):(m=p+5,x="left",b=m+s.textOffset);var _=g+o[1];(d=this.createFigure({name:"line",attrs:{coordinates:[{x:p,y:g},{x:p,y:_},{x:m,y:_}]},styles:{color:s.color}}))===null||d===void 0||d.draw(r),(h=this.createFigure({name:"text",attrs:{x:b,y:_,text:n,align:x,baseline:"middle"},styles:{color:s.color,size:s.textSize,family:s.textFamily,weight:s.textWeight}}))===null||h===void 0||h.draw(r)},t}(Ro),Cb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i,o,s=this.getWidget(),u=s.getPane(),d=s.getBounding(),h=u.getChart().getChartStore(),p=h.getStyles().candle.priceMark,g=p.last,m=g.line;if(p.show&&g.show&&m.show){var b=u.getAxisComponent(),x=h.getDataList(),C=x[x.length-1];if(we(C)){var _=C.close,k=C.open,M=g.compareRule==="current_open"?k:(i=(n=x[x.length-2])===null||n===void 0?void 0:n.close)!==null&&i!==void 0?i:_,L=b.convertToNicePixel(_),A="";_>M?A=g.upColor:_<M?A=g.downColor:A=g.noChangeColor,(o=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:L},{x:d.width,y:L}]},styles:{style:m.style,color:A,size:m.size,dashedValue:m.dashedValue}}))===null||o===void 0||o.draw(r)}}},t}(Ro),_b={second:"HH:mm:ss",minute:"HH:mm",hour:"MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},s2={second:"HH:mm:ss",minute:"YYYY-MM-DD HH:mm",hour:"YYYY-MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},Sb={time:"",open:"",high:"",low:"",close:"",volume:"",turnover:"",change:"",second:"",minute:"",hour:"",day:"",week:"",month:"",year:""},kb={time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: ",second:"S",minute:"",hour:"H",day:"D",week:"W",month:"M",year:"Y"},Tb={"zh-CN":Sb,"en-US":kb};function wm(e,t){var r;return(r=Tb[t][e])!==null&&r!==void 0?r:e}var Eb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this.getWidget(),i=n.getPane().getChart().getChartStore(),o=i.getCrosshair();if(we(o.kLineData)){var s=n.getBounding(),u=i.getStyles(),d=u.candle,h=u.indicator;if(d.tooltip.showType==="rect"&&h.tooltip.showType==="rect"){var p=this.isDrawTooltip(o,d.tooltip),g=this.isDrawTooltip(o,h.tooltip);this._drawRectTooltip(r,p,g,d.tooltip.offsetTop)}else if(d.tooltip.showType==="standard"&&h.tooltip.showType==="standard"){var m=d.tooltip,b=m.offsetLeft,x=m.offsetTop,C=m.offsetRight,_=s.width-C,k=this._drawCandleStandardTooltip(r,b,x,_);this.drawIndicatorTooltip(r,b,k,_)}else if(d.tooltip.showType==="rect"&&h.tooltip.showType==="standard"){var M=d.tooltip,b=M.offsetLeft,x=M.offsetTop,C=M.offsetRight,_=s.width-C,L=this.drawIndicatorTooltip(r,b,x,_),p=this.isDrawTooltip(o,d.tooltip);this._drawRectTooltip(r,p,!1,L)}else{var A=d.tooltip,b=A.offsetLeft,x=A.offsetTop,C=A.offsetRight,_=s.width-C,P=this._drawCandleStandardTooltip(r,b,x,_),g=this.isDrawTooltip(o,h.tooltip);this._drawRectTooltip(r,!1,g,P)}}},t.prototype._drawCandleStandardTooltip=function(r,n,i,o){var s,u=this.getWidget().getPane().getChart().getChartStore(),d=u.getStyles().candle,h=d.tooltip,p=h.legend,g=0,m={x:n,y:i},b=u.getCrosshair();if(this.isDrawTooltip(b,h)){var x=h.title;if(x.show){var C=(s=u.getPeriod())!==null&&s!==void 0?s:{},_=C.type,k=_===void 0?"":_,M=C.span,L=M===void 0?"":M,A=lm(x.template,Ze(Ze({},u.getSymbol()),{period:"".concat(L).concat(wm(k,u.getLocale()))})),P=x.color,$=this.drawStandardTooltipLegends(r,[{title:{text:"",color:P},value:{text:A,color:P}}],{x:n,y:i},n,0,o,x);m.y=m.y+$}var R=this._getCandleTooltipLegends(),z=this.classifyTooltipFeatures(h.features);g=this.drawStandardTooltipFeatures(r,z[0],m,null,n,g,o),g=this.drawStandardTooltipFeatures(r,z[1],m,null,n,g,o),R.length>0&&(g=this.drawStandardTooltipLegends(r,R,m,n,g,o,p)),g=this.drawStandardTooltipFeatures(r,z[2],m,null,n,g,o)}return m.y+g},t.prototype._drawRectTooltip=function(r,n,i,o){var s=this,u,d,h=this.getWidget(),p=h.getPane(),g=p.getChart().getChartStore(),m=g.getStyles(),b=m.candle,x=m.indicator,C=b.tooltip,_=x.tooltip;if(n||i){var k=this._getCandleTooltipLegends(),M=C.offsetLeft,L=C.offsetTop,A=C.offsetRight,P=C.offsetBottom,$=C.legend,R=$.marginLeft,z=$.marginRight,B=$.marginTop,W=$.marginBottom,X=$.size,ee=$.weight,U=$.family,q=C.rect,ie=q.position,le=q.paddingLeft,ae=q.paddingRight,te=q.paddingTop,ce=q.paddingBottom,ue=q.offsetLeft,j=q.offsetRight,Z=q.offsetTop,pe=q.offsetBottom,Y=q.borderSize,fe=q.borderRadius,ve=q.borderColor,$e=q.color,Ie=0,Oe=0,Ce=0;n&&(r.font=Hc(X,ee,U),k.forEach(function(xt){var _t=xt.title,wt=xt.value,Vt="".concat(_t.text).concat(wt.text),Yt=r.measureText(Vt).width+R+z;Ie=Math.max(Ie,Yt)}),Ce+=(W+B+X)*k.length);var Le=_.legend,Ve=Le.marginLeft,je=Le.marginRight,qe=Le.marginTop,ht=Le.marginBottom,vt=Le.size,bt=Le.weight,or=Le.family,dr=[];if(i){var qt=g.getIndicatorsByPaneId(p.getId());r.font=Hc(vt,bt,or),qt.forEach(function(xt){var _t=s.getIndicatorTooltipData(xt).legends;dr.push(_t),_t.forEach(function(wt){var Vt=wt.title,Yt=wt.value,yr="".concat(Vt.text).concat(Yt.text),hr=r.measureText(yr).width+Ve+je;Ie=Math.max(Ie,hr),Ce+=qe+ht+vt})})}if(Oe+=Ie,Oe!==0&&Ce!==0){var It=g.getCrosshair(),mr=h.getBounding(),ln=p.getYAxisWidget().getBounding();Oe+=Y*2+le+ae,Ce+=Y*2+te+ce;var yn=mr.width/2,cr=ie==="pointer"&&It.paneId===Nt.CANDLE,Dt=((u=It.realX)!==null&&u!==void 0?u:0)>yn,Ht=0;if(cr){var Jt=It.realX;Dt?Ht=Jt-j-Oe:Ht=Jt+ue}else{var Gr=this.getWidget().getPane().getAxisComponent();Dt?(Ht=ue+M,Gr.inside&&Gr.position==="left"&&(Ht+=ln.width)):(Ht=mr.width-j-Oe-A,Gr.inside&&Gr.position==="right"&&(Ht-=ln.width))}var ur=o+Z;if(cr){var Vr=It.y;ur=Vr-Ce/2,ur+Ce>mr.height-pe-P&&(ur=mr.height-pe-Ce-P),ur<o+Z&&(ur=o+Z+L)}(d=this.createFigure({name:"rect",attrs:{x:Ht,y:ur,width:Oe,height:Ce},styles:{style:"stroke_fill",color:$e,borderColor:ve,borderSize:Y,borderRadius:fe}}))===null||d===void 0||d.draw(r);var kt=Ht+Y+le+R,Ue=ur+Y+te;if(n&&k.forEach(function(xt){var _t,wt;Ue+=B;var Vt=xt.title;(_t=s.createFigure({name:"text",attrs:{x:kt,y:Ue,text:Vt.text},styles:{color:Vt.color,size:X,family:U,weight:ee}}))===null||_t===void 0||_t.draw(r);var Yt=xt.value;(wt=s.createFigure({name:"text",attrs:{x:Ht+Oe-Y-z-ae,y:Ue,text:Yt.text,align:"right"},styles:{color:Yt.color,size:X,family:U,weight:ee}}))===null||wt===void 0||wt.draw(r),Ue+=X+W}),i){var Ct=Ht+Y+le+Ve;dr.forEach(function(xt){xt.forEach(function(_t){var wt,Vt;Ue+=qe;var Yt=_t.title,yr=_t.value;(wt=s.createFigure({name:"text",attrs:{x:Ct,y:Ue,text:Yt.text},styles:{color:Yt.color,size:vt,family:or,weight:bt}}))===null||wt===void 0||wt.draw(r),(Vt=s.createFigure({name:"text",attrs:{x:Ht+Oe-Y-je-ae,y:Ue,text:yr.text,align:"right"},styles:{color:yr.color,size:vt,family:or,weight:bt}}))===null||Vt===void 0||Vt.draw(r),Ue+=vt+ht})})}}}},t.prototype._getCandleTooltipLegends=function(){var r,n,i,o,s,u,d,h,p=this.getWidget().getPane().getChart().getChartStore(),g=p.getStyles().candle,m=p.getDataList(),b=p.getInnerFormatter(),x=p.getDecimalFold(),C=p.getThousandsSeparator(),_=p.getLocale(),k=(r=p.getSymbol())!==null&&r!==void 0?r:{},M=k.pricePrecision,L=M===void 0?2:M,A=k.volumePrecision,P=A===void 0?0:A,$=p.getPeriod(),R=(n=p.getCrosshair().dataIndex)!==null&&n!==void 0?n:0,z=g.tooltip,B=z.legend,W=B.color,X=B.defaultValue,ee=B.template,U=(i=m[R-1])!==null&&i!==void 0?i:null,q=m[R],ie=(o=U==null?void 0:U.close)!==null&&o!==void 0?o:q.close,le=q.close-ie,ae=Ze(Ze({},q),{time:b.formatDate(q.timestamp,s2[(s=$==null?void 0:$.type)!==null&&s!==void 0?s:"day"],"tooltip"),open:x.format(C.format(Kn(q.open,L))),high:x.format(C.format(Kn(q.high,L))),low:x.format(C.format(Kn(q.low,L))),close:x.format(C.format(Kn(q.close,L))),volume:x.format(C.format(b.formatBigNumber(Kn((u=q.volume)!==null&&u!==void 0?u:X,P)))),turnover:x.format(C.format(Kn((d=q.turnover)!==null&&d!==void 0?d:X,L))),change:ie===0?X:"".concat(C.format(Kn(le/ie*100)),"%")}),te=pi(ee)?ee({prev:U,current:q,next:(h=m[R+1])!==null&&h!==void 0?h:null},g):ee;return te.map(function(ce){var ue=ce.title,j=ce.value,Z={text:"",color:W};na(ue)?Z=Ze({},ue):Z.text=ue,Z.text=wm(Z.text,_);var pe={text:X,color:W};return na(j)?pe=Ze({},j):pe.text=j,we(/{change}/.exec(pe.text))&&(pe.color=le===0?g.priceMark.last.noChangeColor:le>0?g.priceMark.last.upColor:g.priceMark.last.downColor),pe.text=lm(pe.text,ae),{title:Z,value:pe}})},t}(i2),Mb=function(e){Pt(t,e);function t(r){var n=e.call(this,r)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(i){return function(){var o=n.getWidget().getPane();return o.getChart().getChartStore().executeAction("onCrosshairFeatureClick",i),!0}},n._featureMouseMoveEvent=function(i){return function(){return n._activeFeatureInfo=i,n.getWidget().setForceCursor("pointer"),!0}},n.registerEvent("mouseMoveEvent",function(i){return n._activeFeatureInfo=null,n.getWidget().setForceCursor(null),!1}),n}return t.prototype.drawImp=function(r){var n=this,i,o,s=this.getWidget(),u=s.getPane(),d=s.getPane().getChart().getChartStore(),h=d.getCrosshair(),p=this.getWidget(),g=p.getPane().getAxisComponent();if(lr(h.paneId)&&h.paneId===u.getId()&&g.isInCandle()){var m=d.getStyles().crosshair,b=m.horizontal.features;if(m.show&&m.horizontal.show&&b.length>0){var x=g.position==="right",C=p.getBounding(),_=0,k=m.horizontal.text;if(g.inside&&k.show){var M=g.convertFromPixel(h.y),L=g.getRange(),A=g.displayValueToText(g.realValueToDisplayValue(g.valueToRealValue(M,{range:L}),{range:L}),(o=(i=d.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&o!==void 0?o:2);A=d.getDecimalFold().format(d.getThousandsSeparator().format(A)),_=k.paddingLeft+ia(A,k.size,k.weight,k.family)+k.paddingRight}var P=_;x&&(P=C.width-_);var $=h.y;b.forEach(function(R){var z,B,W,X,ee=R.marginLeft,U=ee===void 0?0:ee,q=R.marginTop,ie=q===void 0?0:q,le=R.marginRight,ae=le===void 0?0:le,te=R.paddingLeft,ce=te===void 0?0:te,ue=R.paddingTop,j=ue===void 0?0:ue,Z=R.paddingRight,pe=Z===void 0?0:Z,Y=R.paddingBottom,fe=Y===void 0?0:Y,ve=R.color,$e=R.activeColor,Ie=R.backgroundColor,Oe=R.activeBackgroundColor,Ce=R.borderRadius,Le=R.size,Ve=Le===void 0?0:Le,je=R.type,qe=R.content,ht=Ve;if(je==="icon_font"){var vt=qe;ht=ce+ia(vt.code,Ve,"normal",vt.family)+pe}x?P-=ht+ae:P+=U;var bt=ve,or=Ie;((z=n._activeFeatureInfo)===null||z===void 0?void 0:z.feature.id)===R.id&&(bt=$e??ve,or=Oe??Ie);var dr={mouseClickEvent:n._featureClickEvent({crosshair:h,feature:R}),mouseMoveEvent:n._featureMouseMoveEvent({crosshair:h,feature:R})};if(je==="icon_font"){var vt=qe;(B=n.createFigure({name:"text",attrs:{text:vt.code,x:P,y:$+ie,baseline:"middle"},styles:{paddingLeft:ce,paddingTop:j,paddingRight:pe,paddingBottom:fe,borderRadius:Ce,size:Ve,family:vt.family,color:bt,backgroundColor:or}},dr))===null||B===void 0||B.draw(r)}else{(W=n.createFigure({name:"rect",attrs:{x:P,y:$+ie-Ve/2,width:Ve,height:Ve},styles:{paddingLeft:ce,paddingTop:j,paddingRight:pe,paddingBottom:fe,color:or}},dr))===null||W===void 0||W.draw(r);var qt=qe;(X=n.createFigure({name:"path",attrs:{path:qt.path,x:P,y:$+ie+j-Ve/2,width:Ve,height:Ve},styles:{style:qt.style,lineWidth:qt.lineWidth,color:bt}}))===null||X===void 0||X.draw(r)}x?P-=U:P+=ht+ae})}}},t}(Ro),Ib=function(e){Pt(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._candleBarView=new n2(i),i._candleAreaView=new xb(i),i._candleHighLowPriceView=new wb(i),i._candleLastPriceLineView=new Cb(i),i._crosshairFeatureView=new Mb(i),i.addChild(i._candleBarView),i.addChild(i._crosshairFeatureView),i}return t.prototype.updateMainContent=function(r){var n=this.getPane().getChart().getStyles().candle;n.type!=="area"?(this._candleBarView.draw(r),this._candleHighLowPriceView.draw(r),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(r),this._candleLastPriceLineView.draw(r)},t.prototype.updateOverlayContent=function(r){this._crosshairFeatureView.draw(r)},t.prototype.createTooltipView=function(){return new Eb(this)},t}(a2),l2=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r,n){var i=this,o,s,u=this.getWidget(),d=u.getPane(),h=u.getBounding(),p=d.getAxisComponent(),g=this.getAxisStyles(d.getChart().getStyles());if(g.show&&(g.axisLine.show&&((o=this.createFigure({name:"line",attrs:this.createAxisLine(h,g),styles:g.axisLine}))===null||o===void 0||o.draw(r)),!n[0])){var m=p.getTicks();if(g.tickLine.show){var b=this.createTickLines(m,h,g);b.forEach(function(C){var _;(_=i.createFigure({name:"line",attrs:C,styles:g.tickLine}))===null||_===void 0||_.draw(r)})}if(g.tickText.show){var x=this.createTickTexts(m,h,g);(s=this.createFigure({name:"text",attrs:x,styles:g.tickText}))===null||s===void 0||s.draw(r)}}},t}(Ro),Lb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(r){return r.yAxis},t.prototype.createAxisLine=function(r,n){var i=this.getWidget().getPane().getAxisComponent(),o=n.axisLine.size,s=0;return i.isFromZero()?s=0:s=r.width-o,{coordinates:[{x:s,y:0},{x:s,y:r.height}]}},t.prototype.createTickLines=function(r,n,i){var o=this.getWidget().getPane().getAxisComponent(),s=i.axisLine,u=i.tickLine,d=0,h=0;return o.isFromZero()?(d=0,s.show&&(d+=s.size),h=d+u.length):(d=n.width,s.show&&(d-=s.size),h=d-u.length),r.map(function(p){return{coordinates:[{x:d,y:p.coord},{x:h,y:p.coord}]}})},t.prototype.createTickTexts=function(r,n,i){var o=this.getWidget().getPane().getAxisComponent(),s=i.axisLine,u=i.tickLine,d=i.tickText,h=0;o.isFromZero()?(h=d.marginStart,s.show&&(h+=s.size),u.show&&(h+=u.length)):(h=n.width-d.marginEnd,s.show&&(h-=s.size),u.show&&(h-=u.length));var p=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return r.map(function(g){return{x:h,y:g.coord,text:g.text,align:p,baseline:"middle"}})},t}(l2),Pb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this,i,o,s,u,d=this.getWidget(),h=d.getPane(),p=d.getBounding(),g=h.getChart().getChartStore(),m=g.getStyles().candle.priceMark,b=m.last,x=b.text;if(m.show&&b.show&&x.show){var C=(o=(i=g.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&o!==void 0?o:2,_=h.getAxisComponent(),k=g.getDataList(),M=k[k.length-1];if(we(M)){var L=M.close,A=M.open,P=b.compareRule==="current_open"?A:(u=(s=k[k.length-2])===null||s===void 0?void 0:s.close)!==null&&u!==void 0?u:L,$=_.convertToNicePixel(L),R="";L>P?R=b.upColor:L<P?R=b.downColor:R=b.noChangeColor;var z=0,B="left";_.isFromZero()?(z=0,B="left"):(z=p.width,B="right");var W=[],X=_.getRange(),ee=_.displayValueToText(_.realValueToDisplayValue(_.valueToRealValue(L,{range:X}),{range:X}),C);ee=g.getDecimalFold().format(g.getThousandsSeparator().format(ee));var U=x.paddingLeft,q=x.paddingRight,ie=x.paddingTop,le=x.paddingBottom,ae=x.size,te=x.family,ce=x.weight,ue=U+ia(ee,ae,ce,te)+q,j=ie+ae+le;W.push({name:"text",attrs:{x:z,y:$,width:ue,height:j,text:ee,align:B,baseline:"middle"},styles:Ze(Ze({},x),{backgroundColor:R})});var Z=g.getInnerFormatter().formatExtendText,pe=ae/2,Y=$-pe-ie,fe=$+pe+le;b.extendTexts.forEach(function(ve,$e){var Ie=Z({type:"last_price",data:M,index:$e});if(Ie.length>0&&ve.show){var Oe=ve.size/2,Ce=0;ve.position==="above_price"?(Y-=ve.paddingBottom+Oe,Ce=Y,Y-=Oe+ve.paddingTop):(fe+=ve.paddingTop+Oe,Ce=fe,fe+=Oe+ve.paddingBottom),ue=Math.max(ue,ve.paddingLeft+ia(Ie,ve.size,ve.weight,ve.family)+ve.paddingRight),W.push({name:"text",attrs:{x:z,y:Ce,width:ue,height:ve.paddingTop+ve.size+ve.paddingBottom,text:Ie,align:B,baseline:"middle"},styles:Ze(Ze({},ve),{backgroundColor:R})})}}),W.forEach(function(ve){var $e;ve.attrs.width=ue,($e=n.createFigure(ve))===null||$e===void 0||$e.draw(r)})}}},t}(Ro),Ab=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this,i,o,s=this.getWidget(),u=s.getPane(),d=s.getBounding(),h=u.getChart().getChartStore(),p=h.getStyles().indicator,g=p.lastValueMark,m=g.text;if(g.show){var b=u.getAxisComponent(),x=b.getRange(),C=h.getDataList(),_=(i=C[C.length-1])!==null&&i!==void 0?i:{},k=(o=C[C.length-2])!==null&&o!==void 0?o:{},M=h.getIndicatorsByPaneId(u.getId()),L=h.getInnerFormatter(),A=h.getDecimalFold(),P=h.getThousandsSeparator();M.forEach(function($){var R,z,B=$.result,W=(z=(R=B[_.timestamp])!==null&&R!==void 0?R:B[k.timestamp])!==null&&z!==void 0?z:{};if(we(W)&&$.visible){var X=$.precision;Hg($,{prev:k.timestamp,current:_.timestamp,next:null},p,function(ee,U){var q,ie=W[ee.key];if(ct(ie)){var le=b.convertToNicePixel(ie),ae=b.displayValueToText(b.realValueToDisplayValue(b.valueToRealValue(ie,{range:x}),{range:x}),X);$.shouldFormatBigNumber&&(ae=L.formatBigNumber(ae)),ae=A.format(P.format(ae));var te=0,ce="left";b.isFromZero()?(te=0,ce="left"):(te=d.width,ce="right"),(q=n.createFigure({name:"text",attrs:{x:te,y:le,text:ae,align:ce,baseline:"middle"},styles:Ze(Ze({},m),{backgroundColor:U.color})}))===null||q===void 0||q.draw(r)}})}})}},t}(Ro),c2=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},t.prototype.drawDefaultFigures=function(r,n,i){this.drawFigures(r,n,this.getDefaultFigures(n,i))},t.prototype.getDefaultFigures=function(r,n){var i,o=this.getWidget(),s=o.getPane(),u=s.getChart().getChartStore(),d=u.getClickOverlayInfo(),h=[];if(r.needDefaultYAxisFigure&&r.id===((i=d.overlay)===null||i===void 0?void 0:i.id)&&d.paneId===s.getId()){var p=s.getAxisComponent(),g=o.getBounding(),m=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER,x=p.isFromZero(),C="left",_=0;x?(C="left",_=0):(C="right",_=g.width);var k=u.getDecimalFold(),M=u.getThousandsSeparator();n.forEach(function(L,A){var P,$,R=r.points[A];if(ct(R.value)){m=Math.min(m,L.y),b=Math.max(b,L.y);var z=k.format(M.format(Kn(R.value,($=(P=u.getSymbol())===null||P===void 0?void 0:P.pricePrecision)!==null&&$!==void 0?$:2)));h.push({type:"text",attrs:{x:_,y:L.y,text:z,align:C,baseline:"middle"},ignoreEvent:!0})}}),n.length>1&&h.unshift({type:"rect",attrs:{x:0,y:m,width:g.width,height:b-m},ignoreEvent:!0})}return h},t.prototype.getFigures=function(r,n){var i,o,s=this.getWidget(),u=s.getPane(),d=u.getChart(),h=u.getAxisComponent(),p=d.getXAxisPane().getAxisComponent(),g=s.getBounding();return(o=(i=r.createYAxisFigures)===null||i===void 0?void 0:i.call(r,{chart:d,overlay:r,coordinates:n,bounding:g,xAxis:p,yAxis:h}))!==null&&o!==void 0?o:[]},t}(o2),u2=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i=this.getWidget(),o=i.getPane(),s=i.getPane().getChart().getChartStore(),u=s.getCrosshair();if(lr(u.paneId)&&this.compare(u,o.getId())){var d=s.getStyles().crosshair;if(d.show){var h=this.getDirectionStyles(d),p=h.text;if(h.show&&p.show){var g=i.getBounding(),m=o.getAxisComponent(),b=this.getText(u,s,m);r.font=Hc(p.size,p.weight,p.family),(n=this.createFigure({name:"text",attrs:this.getTextAttrs(b,r.measureText(b).width,u,g,m,p),styles:p}))===null||n===void 0||n.draw(r)}}}},t.prototype.compare=function(r,n){return r.paneId===n},t.prototype.getDirectionStyles=function(r){return r.horizontal},t.prototype.getText=function(r,n,i){var o,s,u=i,d=i.convertFromPixel(r.y),h=0,p=!1;if(u.isInCandle())h=(s=(o=n.getSymbol())===null||o===void 0?void 0:o.pricePrecision)!==null&&s!==void 0?s:2;else{var g=n.getIndicatorsByPaneId(r.paneId);g.forEach(function(x){h=Math.max(x.precision,h),p||(p=x.shouldFormatBigNumber)})}var m=u.getRange(),b=u.displayValueToText(u.realValueToDisplayValue(u.valueToRealValue(d,{range:m}),{range:m}),h);return p&&(b=n.getInnerFormatter().formatBigNumber(b)),n.getDecimalFold().format(n.getThousandsSeparator().format(b))},t.prototype.getTextAttrs=function(r,n,i,o,s,u){var d=s,h=0,p="left";return d.isFromZero()?(h=0,p="left"):(h=o.width,p="right"),{x:h,y:i.y,text:r,align:p,baseline:"middle"}},t}(Ro),Db=function(e){Pt(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._yAxisView=new Lb(i),i._candleLastPriceLabelView=new Pb(i),i._indicatorLastValueView=new Ab(i),i._overlayYAxisView=new c2(i),i._crosshairHorizontalLabelView=new u2(i),i.setCursor("ns-resize"),i.addChild(i._overlayYAxisView),i}return t.prototype.getName=function(){return Bt.Y_AXIS},t.prototype.updateMain=function(r){var n=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(r,n),n||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(r),this._indicatorLastValueView.draw(r))},t.prototype.updateOverlay=function(r){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(r),this._crosshairHorizontalLabelView.draw(r))},t}(Gg);function Cm(){return{from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0}}var d2=function(){function e(t){this.scrollZoomEnabled=!0,this._range=Cm(),this._prevRange=Cm(),this._ticks=[],this._autoCalcTickFlag=!0,this._parent=t}return e.prototype.getParent=function(){return this._parent},e.prototype.buildTicks=function(t){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||t?(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0):!1},e.prototype.getTicks=function(){return this._ticks},e.prototype.setRange=function(t){this._autoCalcTickFlag=!1,this._range=t},e.prototype.getRange=function(){return this._range},e.prototype.setAutoCalcTickFlag=function(t){this._autoCalcTickFlag=t},e.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},e}(),ep=8,vp=function(e){Pt(t,e);function t(r,n){var i=e.call(this,r)||this;return i.reverse=!1,i.inside=!1,i.position="right",i.gap={top:.2,bottom:.1},i.createRange=function(o){return o.defaultRange},i.minSpan=function(o){return Vc(-o)},i.valueToRealValue=function(o){return o},i.realValueToDisplayValue=function(o){return o},i.displayValueToRealValue=function(o){return o},i.realValueToValue=function(o){return o},i.displayValueToText=function(o,s){return Kn(o,s)},i.override(n),i}return t.prototype.override=function(r){var n=r.name,i=r.gap,o=Sp(r,["name","gap"]);lr(this.name)||(this.name=n),vn(this.gap,i),vn(this,o)},t.prototype.createRangeImp=function(){var r,n,i=this.getParent(),o=i.getChart(),s=o.getChartStore(),u=i.getId(),d=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER,p=!1,g=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,b=Number.MAX_SAFE_INTEGER,x=s.getIndicatorsByPaneId(u);x.forEach(function($e){p||(p=$e.shouldOhlc),b=Math.min(b,$e.precision),ct($e.minValue)&&(g=Math.min(g,$e.minValue)),ct($e.maxValue)&&(m=Math.max(m,$e.maxValue))});var C=4,_=this.isInCandle();if(_){var k=(n=(r=s.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2;b!==Number.MAX_SAFE_INTEGER?C=Math.min(b,k):C=k}else b!==Number.MAX_SAFE_INTEGER&&(C=b);var M=s.getVisibleRangeDataList(),L=o.getStyles().candle,A=L.type==="area",P=L.area.value,$=_&&!A||!_&&p;M.forEach(function($e){var Ie=$e.data.current;if(we(Ie)){if($&&(d=Math.min(d,Ie.low),h=Math.max(h,Ie.high)),_&&A){var Oe=Ie[P];ct(Oe)&&(d=Math.min(d,Oe),h=Math.max(h,Oe))}x.forEach(function(Ce){var Le,Ve=Ce.result,je=Ce.figures,qe=(Le=Ve[Ie.timestamp])!==null&&Le!==void 0?Le:{};je.forEach(function(ht){var vt=qe[ht.key];ct(vt)&&(d=Math.min(d,vt),h=Math.max(h,vt))})})}}),d!==Number.MAX_SAFE_INTEGER&&h!==Number.MIN_SAFE_INTEGER?(d=Math.min(g,d),h=Math.max(m,h)):(d=0,h=10);var R=h-d,z={from:d,to:h,range:R,realFrom:d,realTo:h,realRange:R,displayFrom:d,displayTo:h,displayRange:R},B=this.createRange({chart:o,paneId:u,defaultRange:z}),W=B.realFrom,X=B.realTo,ee=B.realRange,U=this.minSpan(C);if(W===X||ee<U){var q=g===W,ie=m===X,le=ep/2;W=q?W:ie?W-ep*U:W-le*U,X=ie?X:q?X+ep*U:X+le*U}var ae=this.getBounding().height,te=this.gap,ce=te.top,ue=te.bottom,j=ce;j>=1&&(j=j/ae);var Z=ue;Z>=1&&(Z=Z/ae),ee=X-W,W=W-ee*Z,X=X+ee*j;var pe=this.realValueToValue(W,{range:B}),Y=this.realValueToValue(X,{range:B}),fe=this.realValueToDisplayValue(W,{range:B}),ve=this.realValueToDisplayValue(X,{range:B});return{from:pe,to:Y,range:Y-pe,realFrom:W,realTo:X,realRange:X-W,displayFrom:fe,displayTo:ve,displayRange:ve-fe}},t.prototype.isInCandle=function(){return this.getParent().getId()===Nt.CANDLE},t.prototype.isFromZero=function(){return this.position==="left"&&this.inside||this.position==="right"&&!this.inside},t.prototype.createTicksImp=function(){var r=this,n,i,o,s,u=this.getRange(),d=u.displayFrom,h=u.displayTo,p=u.displayRange,g=[];if(p>=0){var m=U6(p/ep),b=H6(m),x=hm(Math.ceil(d/m)*m,b),C=hm(Math.floor(h/m)*m,b),_=0,k=x;if(m!==0)for(;k<=C;){var M=k.toFixed(b);g[_]={text:M,coord:0,value:M},++_,k+=m}}var L=this.getParent(),A=(i=(n=L.getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&i!==void 0?i:0,P=L.getChart().getChartStore(),$=[],R=P.getIndicatorsByPaneId(L.getId()),z=P.getStyles(),B=0,W=!1;this.isInCandle()?B=(s=(o=P.getSymbol())===null||o===void 0?void 0:o.pricePrecision)!==null&&s!==void 0?s:2:R.forEach(function(le){B=Math.max(B,le.precision),W||(W=le.shouldFormatBigNumber)});var X=P.getInnerFormatter(),ee=P.getThousandsSeparator(),U=P.getDecimalFold(),q=z.xAxis.tickText.size,ie=NaN;return g.forEach(function(le){var ae=le.value,te=r.displayValueToText(+ae,B),ce=r.convertToPixel(r.realValueToValue(r.displayValueToRealValue(+ae,{range:u}),{range:u}));W&&(te=X.formatBigNumber(ae)),te=U.format(ee.format(te));var ue=ct(ie);ce>q&&ce<A-q&&(ue&&Math.abs(ie-ce)>q*2||!ue)&&($.push({text:te,coord:ce,value:ae}),ie=ce)}),pi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:$}):$},t.prototype.getAutoSize=function(){var r,n,i=this.getParent(),o=i.getChart(),s=o.getChartStore(),u=s.getStyles(),d=u.yAxis,h=d.size;if(h!=="auto")return h;var p=0;if(d.show&&(d.axisLine.show&&(p+=d.axisLine.size),d.tickLine.show&&(p+=d.tickLine.length),d.tickText.show)){var g=0;this.getTicks().forEach(function(ce){g=Math.max(g,ia(ce.text,d.tickText.size,d.tickText.weight,d.tickText.family))}),p+=d.tickText.marginStart+d.tickText.marginEnd+g}var m=u.candle.priceMark,b=m.show&&m.last.show&&m.last.text.show,x=0,C=u.crosshair,_=C.show&&C.horizontal.show&&C.horizontal.text.show,k=0;if(b||_){var M=(n=(r=s.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2,L=this.getRange().displayTo;if(b){var A=s.getDataList(),P=A[A.length-1];if(we(P)){var $=m.last.text,R=$.paddingLeft,z=$.paddingRight,B=$.size,W=$.family,X=$.weight;x=R+ia(Kn(P.close,M),B,X,W)+z;var ee=s.getInnerFormatter().formatExtendText;m.last.extendTexts.forEach(function(ce,ue){var j=ee({type:"last_price",data:P,index:ue});j.length>0&&ce.show&&(x=Math.max(x,ce.paddingLeft+ia(j,ce.size,ce.weight,ce.family)+ce.paddingRight))})}}if(_){var U=s.getIndicatorsByPaneId(i.getId()),q=0,ie=!1;U.forEach(function(ce){q=Math.max(ce.precision,q),ie||(ie=ce.shouldFormatBigNumber)});var le=2;if(this.isInCandle()){var ae=u.indicator.lastValueMark;ae.show&&ae.text.show?le=Math.max(q,M):le=M}else le=q;var te=Kn(L,le);ie&&(te=s.getInnerFormatter().formatBigNumber(te)),te=s.getDecimalFold().format(te),k+=C.horizontal.text.paddingLeft+C.horizontal.text.paddingRight+C.horizontal.text.borderSize*2+ia(te,C.horizontal.text.size,C.horizontal.text.weight,C.horizontal.text.family)}}return Math.max(p,x,k)},t.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},t.prototype.convertFromPixel=function(r){var n=this.getBounding().height,i=this.getRange(),o=i.realFrom,s=i.realRange,u=this.reverse?r/n:1-r/n,d=u*s+o;return this.realValueToValue(d,{range:i})},t.prototype.convertToPixel=function(r){var n,i,o=this.getRange(),s=this.valueToRealValue(r,{range:o}),u=(i=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&i!==void 0?i:0,d=o.realFrom,h=o.realRange,p=(s-d)/h;return this.reverse?Math.round(p*u):Math.round((1-p)*u)},t.prototype.convertToNicePixel=function(r){var n,i,o=(i=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&i!==void 0?i:0,s=this.convertToPixel(r);return Math.round(Math.max(o*.05,Math.min(s,o*.98)))},t.extend=function(r){var n=function(i){Pt(o,i);function o(s){return i.call(this,s,r)||this}return o}(t);return n},t}(d2),Fb={name:"normal"},Rb={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(e){return"".concat(Kn(e,2),"%")},valueToRealValue:function(e,t){var r=t.range;return(e-r.from)/r.range*r.realRange+r.realFrom},realValueToValue:function(e,t){var r=t.range;return(e-r.realFrom)/r.realRange*r.range+r.from},createRange:function(e){var t=e.chart,r=e.defaultRange,n=t.getDataList(),i=t.getVisibleRange(),o=n[i.from];if(we(o)){var s=r.from,u=r.to,d=r.range,h=(r.from-o.close)/o.close*100,p=(r.to-o.close)/o.close*100,g=p-h;return{from:s,to:u,range:d,realFrom:h,realTo:p,realRange:g,displayFrom:h,displayTo:p,displayRange:g}}return r}},Ob={name:"logarithm",minSpan:function(e){return .05*Vc(-e)},valueToRealValue:function(e){return e<0?-Ms(Math.abs(e)):Ms(e)},realValueToDisplayValue:function(e){return e<0?-Vc(Math.abs(e)):Vc(e)},displayValueToRealValue:function(e){return e<0?-Ms(Math.abs(e)):Ms(e)},realValueToValue:function(e){return e<0?-Vc(Math.abs(e)):Vc(e)},createRange:function(e){var t=e.defaultRange,r=t.from,n=t.to,i=t.range,o=r<0?-Ms(Math.abs(r)):Ms(r),s=n<0?-Ms(Math.abs(n)):Ms(n);return{from:r,to:n,range:i,realFrom:o,realTo:s,realRange:s-o,displayFrom:r,displayTo:n,displayRange:i}}},_m={normal:vp.extend(Fb),percentage:vp.extend(Rb),logarithm:vp.extend(Ob)};function Nb(e){var t;return(t=_m[e])!==null&&t!==void 0?t:_m.normal}var h2=function(){function e(t,r){this._bounding=kp(),this._originalBounding=kp(),this._visible=!0,this._chart=t,this._id=r,this._container=Os("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"})}return e.prototype.getContainer=function(){return this._container},e.prototype.setVisible=function(t){this._visible!==t&&(this._container.style.display=t?"block":"none",this._visible=t)},e.prototype.getVisible=function(){return this._visible},e.prototype.getId=function(){return this._id},e.prototype.getChart=function(){return this._chart},e.prototype.getBounding=function(){return this._bounding},e.prototype.setOriginalBounding=function(t){vn(this._originalBounding,t)},e.prototype.getOriginalBounding=function(){return this._originalBounding},e.prototype.update=function(t){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(t??3,this._container,this._bounding)},e}(),p2=function(e){Pt(t,e);function t(r,n,i){var o=e.call(this,r,n)||this;o._yAxisWidget=null,o._options={id:"",minHeight:gp,dragEnabled:!0,order:0,height:Zy,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var s=o.getContainer();return o._mainWidget=o.createMainWidget(s),o._yAxisWidget=o.createYAxisWidget(s),o.setOptions(i),o}return t.prototype.setOptions=function(r){var n,i,o,s,u,d=this.getId();if(d===Nt.CANDLE||d===Nt.X_AXIS){var h=(n=r.axis)===null||n===void 0?void 0:n.name;(!we(this._axis)||we(h)&&this._options.axis.name!==h)&&(this._axis=this.createAxisComponent(h??"normal"))}else we(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof vp&&this._axis.setAutoCalcTickFlag(!0),vn(this._options,r),this._axis.override(Ze(Ze({},this._options.axis),{name:(o=(i=r.axis)===null||i===void 0?void 0:i.name)!==null&&o!==void 0?o:"normal"}));var p=null,g="default";return this.getId()===Nt.X_AXIS?(p=this.getMainWidget().getContainer(),g="ew-resize"):(p=this.getYAxisWidget().getContainer(),g="ns-resize"),!((u=(s=r.axis)===null||s===void 0?void 0:s.scrollZoomEnabled)!==null&&u!==void 0)||u?p.style.cursor=g:p.style.cursor="default",this},t.prototype.getOptions=function(){return this._options},t.prototype.getAxisComponent=function(){return this._axis},t.prototype.setBounding=function(r,n,i,o){var s,u,d,h;vn(this.getBounding(),r);var p={};we(r.height)&&(p.height=r.height),we(r.top)&&(p.top=r.top),this._mainWidget.setBounding(p);var g=we(n);if(g&&this._mainWidget.setBounding(n),we(this._yAxisWidget)){this._yAxisWidget.setBounding(p);var m=this._axis;m.position==="left"?we(i)&&this._yAxisWidget.setBounding(Ze(Ze({},i),{left:0})):we(o)&&(this._yAxisWidget.setBounding(o),g&&this._yAxisWidget.setBounding({left:((s=n.left)!==null&&s!==void 0?s:0)+((u=n.width)!==null&&u!==void 0?u:0)+((d=n.right)!==null&&d!==void 0?d:0)-((h=o.width)!==null&&h!==void 0?h:0)}))}return this},t.prototype.getMainWidget=function(){return this._mainWidget},t.prototype.getYAxisWidget=function(){return this._yAxisWidget},t.prototype.updateImp=function(r){var n;this._mainWidget.update(r),(n=this._yAxisWidget)===null||n===void 0||n.update(r)},t.prototype.destroy=function(){var r;this._mainWidget.destroy(),(r=this._yAxisWidget)===null||r===void 0||r.destroy()},t.prototype.getImage=function(r){var n=this.getBounding(),i=n.width,o=n.height,s=Os("canvas",{width:"".concat(i,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),u=s.getContext("2d"),d=Ll(s);s.width=i*d,s.height=o*d,u.scale(d,d);var h=this._mainWidget.getBounding();if(u.drawImage(this._mainWidget.getImage(r),h.left,0,h.width,h.height),this._yAxisWidget!==null){var p=this._yAxisWidget.getBounding();u.drawImage(this._yAxisWidget.getImage(r),p.left,0,p.width,p.height)}return s},t.prototype.createYAxisWidget=function(r){return null},t}(h2),f2=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(r){var n=Nb(r??"default");return new n(this)},t.prototype.createMainWidget=function(r){return new a2(r,this)},t.prototype.createYAxisWidget=function(r){return new Db(r,this)},t}(p2),zb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createMainWidget=function(r){return new Ib(r,this)},t}(f2),Bb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(r){return r.xAxis},t.prototype.createAxisLine=function(r){return{coordinates:[{x:0,y:0},{x:r.width,y:0}]}},t.prototype.createTickLines=function(r,n,i){var o=i.tickLine,s=i.axisLine.size;return r.map(function(u){return{coordinates:[{x:u.coord,y:0},{x:u.coord,y:s+o.length}]}})},t.prototype.createTickTexts=function(r,n,i){var o=i.tickText,s=i.axisLine.size,u=i.tickLine.length;return r.map(function(d){return{x:d.coord,y:s+u+o.marginStart,text:d.text,align:"center",baseline:"top"}})},t}(l2),$b=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.coordinateToPointValueFlag=function(){return!1},t.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},t.prototype.getProgressOverlay=function(){var r,n;return(n=(r=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||r===void 0?void 0:r.overlay)!==null&&n!==void 0?n:null},t.prototype.getDefaultFigures=function(r,n){var i,o=[],s=this.getWidget(),u=s.getPane(),d=u.getChart().getChartStore(),h=d.getClickOverlayInfo();if(r.needDefaultXAxisFigure&&r.id===((i=h.overlay)===null||i===void 0?void 0:i.id)){var p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;n.forEach(function(m,b){p=Math.min(p,m.x),g=Math.max(g,m.x);var x=r.points[b];if(ct(x.timestamp)){var C=d.getInnerFormatter().formatDate(x.timestamp,"YYYY-MM-DD HH:mm","crosshair");o.push({type:"text",attrs:{x:m.x,y:0,text:C,align:"center"},ignoreEvent:!0})}}),n.length>1&&o.unshift({type:"rect",attrs:{x:p,y:0,width:g-p,height:s.getBounding().height},ignoreEvent:!0})}return o},t.prototype.getFigures=function(r,n){var i,o,s=this.getWidget(),u=s.getPane(),d=u.getChart(),h=u.getAxisComponent(),p=d.getXAxisPane().getAxisComponent(),g=s.getBounding();return(o=(i=r.createXAxisFigures)===null||i===void 0?void 0:i.call(r,{chart:d,overlay:r,coordinates:n,bounding:g,xAxis:p,yAxis:h}))!==null&&o!==void 0?o:[]},t}(c2),Vb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(r){return we(r.timestamp)},t.prototype.getDirectionStyles=function(r){return r.vertical},t.prototype.getText=function(r,n){var i,o,s=r.timestamp;return n.getInnerFormatter().formatDate(s,s2[(o=(i=n.getPeriod())===null||i===void 0?void 0:i.type)!==null&&o!==void 0?o:"day"],"crosshair")},t.prototype.getTextAttrs=function(r,n,i,o,s,u){var d=i.realX,h=0,p="center";return d-n/2-u.paddingLeft<0?(h=0,p="left"):d+n/2+u.paddingRight>o.width?(h=o.width,p="right"):h=d,{x:h,y:0,text:r,align:p,baseline:"top"}},t}(u2),Wb=function(e){Pt(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._xAxisView=new Bb(i),i._overlayXAxisView=new $b(i),i._crosshairVerticalLabelView=new Vb(i),i.setCursor("ew-resize"),i.addChild(i._overlayXAxisView),i}return t.prototype.getName=function(){return Bt.X_AXIS},t.prototype.updateMain=function(r){this._xAxisView.draw(r)},t.prototype.updateOverlay=function(r){this._overlayXAxisView.draw(r),this._crosshairVerticalLabelView.draw(r)},t}(Gg),Ub=function(e){Pt(t,e);function t(r,n){var i=e.call(this,r)||this;return i.override(n),i}return t.prototype.override=function(r){var n=r.name,i=r.scrollZoomEnabled,o=r.createTicks;lr(this.name)||(this.name=n),this.scrollZoomEnabled=i??this.scrollZoomEnabled,this.createTicks=o??this.createTicks},t.prototype.createRangeImp=function(){var r=this.getParent().getChart().getChartStore(),n=r.getVisibleRange(),i=n.realFrom,o=n.realTo,s=i,u=o,d=o-i+1,h={from:s,to:u,range:d,realFrom:s,realTo:u,realRange:d,displayFrom:s,displayTo:u,displayRange:d};return h},t.prototype.createTicksImp=function(){var r,n=this.getRange(),i=n.realFrom,o=n.realTo,s=n.from,u=this.getParent().getChart().getChartStore(),d=u.getInnerFormatter().formatDate,h=u.getPeriod(),p=[],g=u.getBarSpace().bar,m=u.getStyles().xAxis.tickText,b=Math.max(ia("YYYY-MM-DD HH:mm:ss",m.size,m.weight,m.family),this.getBounding().width/8),x=Math.ceil(b/g);x%2!==0&&(x+=1);for(var C=Math.max(0,Math.floor(i/x)*x),_=C;_<o;_+=x)if(_>=s){var k=u.dataIndexToTimestamp(_);ct(k)&&p.push({coord:this.convertToPixel(_),value:k,text:d(k,_b[(r=h==null?void 0:h.type)!==null&&r!==void 0?r:"day"],"xAxis")})}return pi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:p}):p},t.prototype.getAutoSize=function(){var r=this.getParent().getChart().getStyles(),n=r.xAxis,i=n.size;if(i!=="auto")return i;var o=r.crosshair,s=0;n.show&&(n.axisLine.show&&(s+=n.axisLine.size),n.tickLine.show&&(s+=n.tickLine.length),n.tickText.show&&(s+=n.tickText.marginStart+n.tickText.marginEnd+n.tickText.size));var u=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(u+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+o.vertical.text.borderSize*2+o.vertical.text.size),Math.max(s,u)},t.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},t.prototype.convertTimestampFromPixel=function(r){var n=this.getParent().getChart().getChartStore(),i=n.coordinateToDataIndex(r);return n.dataIndexToTimestamp(i)},t.prototype.convertTimestampToPixel=function(r){var n=this.getParent().getChart().getChartStore(),i=n.timestampToDataIndex(r);return n.dataIndexToCoordinate(i)},t.prototype.convertFromPixel=function(r){return this.getParent().getChart().getChartStore().coordinateToDataIndex(r)},t.prototype.convertToPixel=function(r){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(r)},t.extend=function(r){var n=function(i){Pt(o,i);function o(s){return i.call(this,s,r)||this}return o}(t);return n},t}(d2),Hb={name:"normal"},Sm={normal:Ub.extend(Hb)};function Yb(e){var t;return(t=Sm[e])!==null&&t!==void 0?t:Sm.normal}var Xb=function(e){Pt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(r){var n=Yb(r);return new n(this)},t.prototype.createMainWidget=function(r){return new Wb(r,this)},t}(p2);function jb(e,t){var r=0;return function(){var n=Date.now();n-r>t&&(e.apply(this,arguments),r=n)}}var Zb=function(e){Pt(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._dragFlag=!1,i._dragStartY=0,i._topPaneHeight=0,i._bottomPaneHeight=0,i._topPane=null,i._bottomPane=null,i._pressedMouseMoveEvent=jb(i._pressedTouchMouseMoveEvent,20),i.registerEvent("touchStartEvent",i._mouseDownEvent.bind(i)).registerEvent("touchMoveEvent",i._pressedMouseMoveEvent.bind(i)).registerEvent("touchEndEvent",i._mouseUpEvent.bind(i)).registerEvent("mouseDownEvent",i._mouseDownEvent.bind(i)).registerEvent("mouseUpEvent",i._mouseUpEvent.bind(i)).registerEvent("pressedMouseMoveEvent",i._pressedMouseMoveEvent.bind(i)).registerEvent("mouseEnterEvent",i._mouseEnterEvent.bind(i)).registerEvent("mouseLeaveEvent",i._mouseLeaveEvent.bind(i)),i}return t.prototype.getName=function(){return Bt.SEPARATOR},t.prototype._mouseDownEvent=function(r){var n=this;this._dragFlag=!0,this._dragStartY=r.pageY;var i=this.getPane(),o=i.getChart();this._topPane=i.getTopPane(),this._bottomPane=i.getBottomPane();var s=o.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var u=s.findIndex(function(g){var m;return g.getId()===((m=n._topPane)===null||m===void 0?void 0:m.getId())}),d=u-1;d>-1;d--){var h=s[d];if(h.getOptions().state!=="minimize"){this._topPane=h;break}}if(this._bottomPane.getOptions().state==="minimize")for(var u=s.findIndex(function(b){var x;return b.getId()===((x=n._bottomPane)===null||x===void 0?void 0:x.getId())}),d=u+1;d<s.length;d++){var p=s[d];if(p.getOptions().state!=="minimize"){this._bottomPane=p;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},t.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},t.prototype._pressedTouchMouseMoveEvent=function(r){var n=r.pageY-this._dragStartY,i=n<0;if(we(this._topPane)&&we(this._bottomPane)){var o=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&o.state!=="minimize"&&o.dragEnabled){var s=null,u=null,d=0,h=0;i?(s=this._topPane,u=this._bottomPane,d=this._topPaneHeight,h=this._bottomPaneHeight):(s=this._bottomPane,u=this._topPane,d=this._bottomPaneHeight,h=this._topPaneHeight);var p=s.getOptions().minHeight;if(d>p){var g=Math.max(d-Math.abs(n),p),m=d-g;s.setBounding({height:g}),u.setBounding({height:h+m});var b=this.getPane(),x=b.getChart();x.getChartStore().executeAction("onPaneDrag",{paneId:b.getId()}),x.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},t.prototype._mouseEnterEvent=function(){var r=this.getPane(),n=r.getBottomPane();if(n.getOptions().dragEnabled){var i=r.getChart(),o=i.getStyles().separator;return this.getContainer().style.background=o.activeBackgroundColor,!0}return!1},t.prototype._mouseLeaveEvent=function(){return this._dragFlag?!1:(this.getContainer().style.background="transparent",!0)},t.prototype.createContainer=function(){return Os("div",{width:"100%",height:"".concat(M0,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},t.prototype.updateImp=function(r,n,i){if(i===4||i===2){var o=this.getPane().getChart().getStyles().separator;r.style.top="".concat(-Math.floor((M0-o.size)/2),"px"),r.style.height="".concat(M0,"px")}},t}(Gy),Gb=function(e){Pt(t,e);function t(r,n,i,o){var s=e.call(this,r,n)||this;return s.getContainer().style.overflow="",s._topPane=i,s._bottomPane=o,s._separatorWidget=new Zb(s.getContainer(),s),s}return t.prototype.setBounding=function(r){return vn(this.getBounding(),r),this},t.prototype.getTopPane=function(){return this._topPane},t.prototype.setTopPane=function(r){return this._topPane=r,this},t.prototype.getBottomPane=function(){return this._bottomPane},t.prototype.setBottomPane=function(r){return this._bottomPane=r,this},t.prototype.getWidget=function(){return this._separatorWidget},t.prototype.getImage=function(r){var n=this.getBounding(),i=n.width,o=n.height,s=this.getChart().getStyles().separator,u=Os("canvas",{width:"".concat(i,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),d=u.getContext("2d"),h=Ll(u);return u.width=i*h,u.height=o*h,d.scale(h,h),d.fillStyle=s.color,d.fillRect(0,0,i,o),u},t.prototype.updateImp=function(r,n,i){if(r===4||r===2){var o=this.getChart().getStyles().separator;n.style.backgroundColor=o.color,n.style.height="".concat(i.height,"px"),n.style.marginLeft="".concat(i.left,"px"),n.style.width="".concat(i.width,"px"),this._separatorWidget.update(r)}},t}(h2);function km(){return typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("firefox")}function eg(){return typeof window>"u"?!1:/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var tp={ResetClick:500,LongTap:500,PreventFiresTouchEvents:500},yd={CancelClick:5,CancelTap:5,DoubleClick:5,DoubleTap:30},f0={Left:0,Middle:1,Right:2},Qb=10,Kb=function(){function e(t,r,n){var i=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!eg(),this._onFirefoxOutsideMouseUp=function(o){i._mouseUpHandler(o)},this._onMobileSafariDoubleClick=function(o){if(i._firesTouchEvents(o)){if(++i._tapCount,i._tapTimeoutId!==null&&i._tapCount>1){var s=i._mouseTouchMoveWithDownInfo(i._getCoordinate(o),i._tapCoordinate).manhattanDistance;s<yd.DoubleTap&&!i._cancelTap&&i._processEvent(i._makeCompatEvent(o),i._handler.doubleTapEvent),i._resetTapTimeout()}}else if(++i._clickCount,i._clickTimeoutId!==null&&i._clickCount>1){var s=i._mouseTouchMoveWithDownInfo(i._getCoordinate(o),i._clickCoordinate).manhattanDistance;s<yd.DoubleClick&&!i._cancelClick&&i._processEvent(i._makeCompatEvent(o),i._handler.mouseDoubleClickEvent),i._resetClickTimeout()}},this._target=t,this._handler=r,this._options=n,this._init()}return e.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},e.prototype._mouseEnterHandler=function(t){var r=this,n,i,o;(n=this._unsubscribeMousemove)===null||n===void 0||n.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(o=this._unsubscribeContextMenu)===null||o===void 0||o.call(this);var s=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){r._target.removeEventListener("mousemove",s)},this._target.addEventListener("mousemove",s);var u=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){r._target.removeEventListener("wheel",u)},this._target.addEventListener("wheel",u,{passive:!1});var d=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){r._target.removeEventListener("contextmenu",d)},this._target.addEventListener("contextmenu",d,{passive:!1}),!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},e.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._mouseMoveHandler=function(t){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},e.prototype._mouseWheelHandler=function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){if(!we(this._handler.mouseWheelHortEvent)||(this._preventDefault(t),Math.abs(t.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(t),-t.deltaX)}else{if(!we(this._handler.mouseWheelVertEvent))return;var r=-(t.deltaY/100);if(r===0)return;switch(this._preventDefault(t),t.deltaMode){case t.DOM_DELTA_PAGE:{r*=120;break}case t.DOM_DELTA_LINE:{r*=32;break}}if(r!==0){var n=Math.sign(r)*Math.min(1,Math.abs(r));this._handler.mouseWheelVertEvent(this._makeCompatEvent(t),n)}}},e.prototype._contextMenuHandler=function(t){this._preventDefault(t)},e.prototype._touchMoveHandler=function(t){var r=this._touchWithId(t.changedTouches,this._activeTouchId);if(r!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(r),this._touchMoveStartCoordinate),i=n.xOffset,o=n.yOffset,s=n.manhattanDistance;if(!(!this._touchMoveExceededManhattanDistance&&s<yd.CancelTap)){if(!this._touchMoveExceededManhattanDistance){var u=i*.5,d=o>=u&&!this._options.treatVertDragAsPageScroll(),h=u>o&&!this._options.treatHorzDragAsPageScroll();!d&&!h&&(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(t,r),this._handler.touchMoveEvent)}}},e.prototype._mouseMoveWithDownHandler=function(t){if(t.button===f0.Left){var r=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._mouseMoveStartCoordinate),n=r.manhattanDistance;n>=yd.CancelClick&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(t),this._handler.pressedMouseMoveEvent)}},e.prototype._mouseTouchMoveWithDownInfo=function(t,r){var n=Math.abs(r.x-t.x),i=Math.abs(r.y-t.y),o=n+i;return{xOffset:n,yOffset:i,manhattanDistance:o}},e.prototype._touchEndHandler=function(t){var r=this._touchWithId(t.changedTouches,this._activeTouchId);if(r===null&&t.touches.length===0&&(r=t.changedTouches[0]),r!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._makeCompatEvent(t,r);if(this._processEvent(n,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1){var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(r),this._tapCoordinate).manhattanDistance;i<yd.DoubleTap&&!this._cancelTap&&this._processEvent(n,this._handler.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processEvent(n,this._handler.tapEvent),we(this._handler.tapEvent)&&this._preventDefault(t));this._tapCount===0&&this._preventDefault(t),t.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(t))}},e.prototype._mouseUpHandler=function(t){if(t.button===f0.Left){var r=this._makeCompatEvent(t);if(this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),km()){var n=this._target.ownerDocument.documentElement;n.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(t))if(this._processEvent(r,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1){var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._clickCoordinate).manhattanDistance;i<yd.DoubleClick&&!this._cancelClick&&this._processEvent(r,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processEvent(r,this._handler.mouseClickEvent)}},e.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},e.prototype._touchStartHandler=function(t){if(this._activeTouchId===null){var r=t.changedTouches[0];this._activeTouchId=r.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(t);var n=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(r),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{var i=this._touchMoveHandler.bind(this),o=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){n.removeEventListener("touchmove",i),n.removeEventListener("touchend",o)},n.addEventListener("touchmove",i,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),tp.LongTap)}this._processEvent(this._makeCompatEvent(t,r),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),tp.ResetClick),this._tapCoordinate=this._getCoordinate(r))}},e.prototype._mouseDownHandler=function(t){if(t.button===f0.Right){this._preventDefault(t),this._processEvent(this._makeCompatEvent(t),this._handler.mouseRightClickEvent);return}if(t.button===f0.Left){var r=this._target.ownerDocument.documentElement;km()&&r.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{var n=this._mouseMoveWithDownHandler.bind(this),i=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){r.removeEventListener("mousemove",n),r.removeEventListener("mouseup",i)},r.addEventListener("mousemove",n),r.addEventListener("mouseup",i)}this._mousePressed=!0,!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),tp.ResetClick),this._clickCoordinate=this._getCoordinate(t)))}},e.prototype._init=function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));{var r=this._target.ownerDocument,n=function(i){t._handler.mouseDownOutsideEvent!=null&&(i.composed&&t._target.contains(i.composedPath()[0])||i.target!==null&&t._target.contains(i.target)||t._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){r.removeEventListener("touchstart",n)},this._unsubscribeOutsideMouseEvents=function(){r.removeEventListener("mousedown",n)},r.addEventListener("mousedown",n),r.addEventListener("touchstart",n,{passive:!0})}eg()&&(this._unsubscribeMobileSafariEvents=function(){t._target.removeEventListener("dblclick",t._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(i){if(i.button===f0.Middle)return i.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},e.prototype._initPinch=function(){var t=this;!we(this._handler.pinchStartEvent)&&!we(this._handler.pinchEvent)&&!we(this._handler.pinchEndEvent)||(this._target.addEventListener("touchstart",function(r){t._checkPinchState(r.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(r){if(!(r.touches.length!==2||t._startPinchMiddleCoordinate===null)&&we(t._handler.pinchEvent)){var n=t._getTouchDistance(r.touches[0],r.touches[1]),i=n/t._startPinchDistance;t._handler.pinchEvent(Ze(Ze({},t._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),t._preventDefault(r)}},{passive:!1}),this._target.addEventListener("touchend",function(r){t._checkPinchState(r.touches)}))},e.prototype._checkPinchState=function(t){t.length===1&&(this._pinchPrevented=!1),t.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)},e.prototype._startPinch=function(t){var r=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(t[0].clientX-r.left+(t[1].clientX-r.left))/2,y:(t[0].clientY-r.top+(t[1].clientY-r.top))/2},this._startPinchDistance=this._getTouchDistance(t[0],t[1]),we(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},e.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,we(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},e.prototype._mouseLeaveHandler=function(t){var r,n,i;(r=this._unsubscribeMousemove)===null||r===void 0||r.call(this),(n=this._unsubscribeMouseWheel)===null||n===void 0||n.call(this),(i=this._unsubscribeContextMenu)===null||i===void 0||i.call(this),!this._firesTouchEvents(t)&&this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!eg())},e.prototype._longTapHandler=function(t){var r=this._touchWithId(t.touches,this._activeTouchId);r!==null&&(this._processEvent(this._makeCompatEvent(t,r),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},e.prototype._firesTouchEvents=function(t){var r;return we((r=t.sourceCapabilities)===null||r===void 0?void 0:r.firesTouchEvents)?t.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(t)<this._lastTouchEventTimeStamp+tp.PreventFiresTouchEvents},e.prototype._processEvent=function(t,r){r==null||r.call(this._handler,t)},e.prototype._makeCompatEvent=function(t,r){var n=this,i=r??t,o=this._target.getBoundingClientRect();return{x:i.clientX-o.left,y:i.clientY-o.top,pageX:i.pageX,pageY:i.pageY,isTouch:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click"&&t.type!=="wheel",preventDefault:function(){t.type!=="touchstart"&&n._preventDefault(t)}}},e.prototype._getTouchDistance=function(t,r){var n=t.clientX-r.clientX,i=t.clientY-r.clientY;return Math.sqrt(n*n+i*i)},e.prototype._preventDefault=function(t){t.cancelable&&t.preventDefault()},e.prototype._getCoordinate=function(t){return{x:t.pageX,y:t.pageY}},e.prototype._eventTimeStamp=function(t){var r;return(r=t.timeStamp)!==null&&r!==void 0?r:performance.now()},e.prototype._touchWithId=function(t,r){for(var n=0;n<t.length;++n)if(t[n].identifier===r)return t[n];return null},e}(),qb=function(){function e(t,r){var n=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(i){if(i.shiftKey)switch(i.code){case"Equal":{n._chart.getChartStore().zoom(.5);break}case"Minus":{n._chart.getChartStore().zoom(-.5);break}case"ArrowLeft":{var o=n._chart.getChartStore();o.startScroll(),o.scroll(-3*o.getBarSpace().bar);break}case"ArrowRight":{var o=n._chart.getChartStore();o.startScroll(),o.scroll(3*o.getBarSpace().bar);break}}},this._container=t,this._chart=r,this._event=new Kb(t,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),t.addEventListener("keydown",this._boundKeyBoardDownEvent)}return e.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},e.prototype.pinchEvent=function(t,r){var n=this._findWidgetByEvent(t),i=n.pane,o=n.widget;if((i==null?void 0:i.getId())!==Nt.X_AXIS&&(o==null?void 0:o.getName())===Bt.MAIN){var s=this._makeWidgetEvent(t,o),u=(r-this._pinchScale)*5;return this._pinchScale=r,this._chart.getChartStore().zoom(u,{x:s.x,y:s.y}),!0}return!1},e.prototype.mouseWheelHortEvent=function(t,r){var n=this._chart.getChartStore();return n.startScroll(),n.scroll(r),!0},e.prototype.mouseWheelVertEvent=function(t,r){var n=this._findWidgetByEvent(t).widget,i=this._makeWidgetEvent(t,n),o=n==null?void 0:n.getName();return o===Bt.MAIN?(this._chart.getChartStore().zoom(r,{x:i.x,y:i.y}),!0):!1},e.prototype.mouseDownEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget;if(this._mouseDownWidget=i,i!==null){var o=this._makeWidgetEvent(t,i),s=i.getName();switch(s){case Bt.SEPARATOR:return i.dispatchEvent("mouseDownEvent",o);case Bt.MAIN:{var u=n.getAxisComponent();if(!u.getAutoCalcTickFlag()){var d=u.getRange();this._prevYAxisRange=Ze({},d)}return this._startScrollCoordinate={x:o.x,y:o.y},this._chart.getChartStore().startScroll(),i.dispatchEvent("mouseDownEvent",o)}case Bt.X_AXIS:return this._processXAxisScrollStartEvent(i,o);case Bt.Y_AXIS:return this._processYAxisScaleStartEvent(i,o)}}return!1},e.prototype.mouseMoveEvent=function(t){var r,n,i,o=this._findWidgetByEvent(t),s=o.pane,u=o.widget,d=this._makeWidgetEvent(t,u);if((((r=this._mouseMoveTriggerWidgetInfo.pane)===null||r===void 0?void 0:r.getId())!==(s==null?void 0:s.getId())||((n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0?void 0:n.getName())!==(u==null?void 0:u.getName()))&&(u==null||u.dispatchEvent("mouseEnterEvent",d),(i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0||i.dispatchEvent("mouseLeaveEvent",d),this._mouseMoveTriggerWidgetInfo={pane:s,widget:u}),u!==null){var h=u.getName();switch(h){case Bt.MAIN:{var p=u.dispatchEvent("mouseMoveEvent",d),g={x:d.x,y:d.y,paneId:s==null?void 0:s.getId()};return p?(u.getForceCursor()!=="pointer"&&(g=void 0),u.setCursor("pointer")):u.setCursor("crosshair"),this._chart.getChartStore().setCrosshair(g),p}case Bt.SEPARATOR:case Bt.X_AXIS:case Bt.Y_AXIS:{var p=u.dispatchEvent("mouseMoveEvent",d);return this._chart.getChartStore().setCrosshair(),p}}}return!1},e.prototype.pressedMouseMoveEvent=function(t){var r,n;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===Bt.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",t);var i=this._findWidgetByEvent(t),o=i.pane,s=i.widget;if(s!==null&&((r=this._mouseDownWidget)===null||r===void 0?void 0:r.getPane().getId())===(o==null?void 0:o.getId())&&((n=this._mouseDownWidget)===null||n===void 0?void 0:n.getName())===s.getName()){var u=this._makeWidgetEvent(t,s),d=s.getName();switch(d){case Bt.MAIN:{var h=void 0,p=s.dispatchEvent("pressedMouseMoveEvent",u);return p||this._processMainScrollingEvent(s,u),(!p||s.getForceCursor()==="pointer")&&(h={x:u.x,y:u.y,paneId:o==null?void 0:o.getId()}),this._chart.getChartStore().setCrosshair(h,{forceInvalidate:!0}),p}case Bt.X_AXIS:return this._processXAxisScrollingEvent(s,u);case Bt.Y_AXIS:return this._processYAxisScalingEvent(s,u)}}return!1},e.prototype.mouseUpEvent=function(t){var r=this._findWidgetByEvent(t).widget,n=!1;if(r!==null){var i=this._makeWidgetEvent(t,r),o=r.getName();switch(o){case Bt.MAIN:case Bt.SEPARATOR:case Bt.X_AXIS:case Bt.Y_AXIS:{n=r.dispatchEvent("mouseUpEvent",i);break}}n&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,n},e.prototype.mouseClickEvent=function(t){var r=this._findWidgetByEvent(t).widget;if(r!==null){var n=this._makeWidgetEvent(t,r);return r.dispatchEvent("mouseClickEvent",n)}return!1},e.prototype.mouseRightClickEvent=function(t){var r=this._findWidgetByEvent(t).widget,n=!1;if(r!==null){var i=this._makeWidgetEvent(t,r),o=r.getName();switch(o){case Bt.MAIN:case Bt.X_AXIS:case Bt.Y_AXIS:{n=r.dispatchEvent("mouseRightClickEvent",i);break}}n&&this._chart.updatePane(1)}return!1},e.prototype.mouseDoubleClickEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget;if(i!==null){var o=i.getName();switch(o){case Bt.MAIN:{var s=this._makeWidgetEvent(t,i);return i.dispatchEvent("mouseDoubleClickEvent",s)}case Bt.Y_AXIS:{var u=n.getAxisComponent();if(!u.getAutoCalcTickFlag())return u.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0;break}}}return!1},e.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},e.prototype.touchStartEvent=function(t){var r,n=this._findWidgetByEvent(t),i=n.pane,o=n.widget;if(o!==null){var s=this._makeWidgetEvent(t,o);(r=s.preventDefault)===null||r===void 0||r.call(s);var u=o.getName();switch(u){case Bt.MAIN:{var d=this._chart.getChartStore();if(o.dispatchEvent("mouseDownEvent",s))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,d.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;this._flingScrollRequestId!==null&&(cm(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime();var h=i.getAxisComponent();if(!h.getAutoCalcTickFlag()){var p=h.getRange();this._prevYAxisRange=Ze({},p)}if(this._startScrollCoordinate={x:s.x,y:s.y},d.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var g=s.x-this._touchCoordinate.x,m=s.y-this._touchCoordinate.y,b=Math.sqrt(g*g+m*m);b<Qb?(this._touchCoordinate={x:s.x,y:s.y},d.setCrosshair({x:s.x,y:s.y,paneId:i==null?void 0:i.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,d.setCrosshair())}return!0}case Bt.X_AXIS:return this._processXAxisScrollStartEvent(o,s);case Bt.Y_AXIS:return this._processYAxisScaleStartEvent(o,s)}}return!1},e.prototype.touchMoveEvent=function(t){var r,n=this._findWidgetByEvent(t),i=n.pane,o=n.widget;if(o!==null){var s=this._makeWidgetEvent(t,o);(r=s.preventDefault)===null||r===void 0||r.call(s);var u=o.getName(),d=this._chart.getChartStore();switch(u){case Bt.MAIN:return o.dispatchEvent("pressedMouseMoveEvent",s)?(d.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0):(this._touchCoordinate!==null?d.setCrosshair({x:s.x,y:s.y,paneId:i==null?void 0:i.getId()}):this._processMainScrollingEvent(o,s),!0);case Bt.X_AXIS:return this._processXAxisScrollingEvent(o,s);case Bt.Y_AXIS:return this._processYAxisScalingEvent(o,s)}}return!1},e.prototype.touchEndEvent=function(t){var r=this,n=this._findWidgetByEvent(t).widget;if(n!==null){var i=this._makeWidgetEvent(t,n),o=n.getName();switch(o){case Bt.MAIN:{if(n.dispatchEvent("mouseUpEvent",i),this._startScrollCoordinate!==null){var s=new Date().getTime()-this._flingStartTime,u=i.x-this._startScrollCoordinate.x,d=u/(s>0?s:1)*20;if(s<200&&Math.abs(d)>0){var h=this._chart.getChartStore(),p=function(){r._flingScrollRequestId=Tp(function(){h.startScroll(),h.scroll(d),d=d*(1-.025),Math.abs(d)<1?r._flingScrollRequestId!==null&&(cm(r._flingScrollRequestId),r._flingScrollRequestId=null):p()})};p()}}return!0}case Bt.X_AXIS:case Bt.Y_AXIS:{var g=n.dispatchEvent("mouseUpEvent",i);g&&this._chart.updatePane(1)}}this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0}return!1},e.prototype.tapEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget,o=!1;if(i!==null){var s=this._makeWidgetEvent(t,i),u=i.dispatchEvent("mouseClickEvent",s);if(i.getName()===Bt.MAIN){var d=this._makeWidgetEvent(t,i),h=this._chart.getChartStore();u?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,h.setCrosshair(void 0,{notInvalidate:!0}),o=!0):(!this._touchCancelCrosshair&&!this._touchZoomed&&(this._touchCoordinate={x:d.x,y:d.y},h.setCrosshair({x:d.x,y:d.y,paneId:n==null?void 0:n.getId()},{notInvalidate:!0}),o=!0),this._touchCancelCrosshair=!1)}(o||u)&&this._chart.updatePane(1)}return o},e.prototype.doubleTapEvent=function(t){return this.mouseDoubleClickEvent(t)},e.prototype.longTapEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget;if(i!==null&&i.getName()===Bt.MAIN){var o=this._makeWidgetEvent(t,i);return this._touchCoordinate={x:o.x,y:o.y},this._chart.getChartStore().setCrosshair({x:o.x,y:o.y,paneId:n==null?void 0:n.getId()}),!0}return!1},e.prototype._processMainScrollingEvent=function(t,r){if(this._startScrollCoordinate!==null){var n=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&!n.getAutoCalcTickFlag()&&n.scrollZoomEnabled){var i=this._prevYAxisRange,o=i.from,s=i.to,u=i.range,d=0;n.reverse?d=this._startScrollCoordinate.y-r.y:d=r.y-this._startScrollCoordinate.y;var h=t.getBounding(),p=d/h.height,g=u*p,m=o+g,b=s+g,x=n.valueToRealValue(m,{range:this._prevYAxisRange}),C=n.valueToRealValue(b,{range:this._prevYAxisRange}),_=n.realValueToDisplayValue(x,{range:this._prevYAxisRange}),k=n.realValueToDisplayValue(C,{range:this._prevYAxisRange});n.setRange({from:m,to:b,range:b-m,realFrom:x,realTo:C,realRange:C-x,displayFrom:_,displayTo:k,displayRange:k-_})}var M=r.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(M)}},e.prototype._processXAxisScrollStartEvent=function(t,r){var n=t.dispatchEvent("mouseDownEvent",r);return n&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:r.x,y:r.y},this._xAxisStartScaleDistance=r.pageX,n},e.prototype._processXAxisScrollingEvent=function(t,r){var n,i=t.dispatchEvent("pressedMouseMoveEvent",r);if(i)this._chart.updatePane(1);else{var o=t.getPane().getAxisComponent();if(o.scrollZoomEnabled&&this._xAxisStartScaleDistance!==0){var s=this._xAxisStartScaleDistance/r.pageX;if(Number.isFinite(s)){var u=(s-this._xAxisScale)*10;this._xAxisScale=s,this._chart.getChartStore().zoom(u,(n=this._xAxisStartScaleCoordinate)!==null&&n!==void 0?n:void 0)}}}return i},e.prototype._processYAxisScaleStartEvent=function(t,r){var n=t.dispatchEvent("mouseDownEvent",r);n&&this._chart.updatePane(1);var i=t.getPane().getAxisComponent().getRange();return this._prevYAxisRange=Ze({},i),this._yAxisStartScaleDistance=r.pageY,n},e.prototype._processYAxisScalingEvent=function(t,r){var n=t.dispatchEvent("pressedMouseMoveEvent",r);if(n)this._chart.updatePane(1);else{var i=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&i.scrollZoomEnabled&&this._yAxisStartScaleDistance!==0){var o=this._prevYAxisRange,s=o.from,u=o.to,d=o.range,h=r.pageY/this._yAxisStartScaleDistance,p=d*h,g=(p-d)/2,m=s-g,b=u+g,x=i.valueToRealValue(m,{range:this._prevYAxisRange}),C=i.valueToRealValue(b,{range:this._prevYAxisRange}),_=i.realValueToDisplayValue(x,{range:this._prevYAxisRange}),k=i.realValueToDisplayValue(C,{range:this._prevYAxisRange});i.setRange({from:m,to:b,range:p,realFrom:x,realTo:C,realRange:C-x,displayFrom:_,displayTo:k,displayRange:k-_}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}}return n},e.prototype._findWidgetByEvent=function(t){var r,n,i,o,s=t.x,u=t.y,d=this._chart.getSeparatorPanes(),h=this._chart.getStyles().separator.size;try{for(var p=sa(d),g=p.next();!g.done;g=p.next()){var m=g.value,b=m[1],x=b.getBounding(),C=x.top-Math.round((M0-h)/2);if(s>=x.left&&s<=x.left+x.width&&u>=C&&u<=C+M0)return{pane:b,widget:b.getWidget()}}}catch(W){r={error:W}}finally{try{g&&!g.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}var _=this._chart.getDrawPanes(),k=null;try{for(var M=sa(_),L=M.next();!L.done;L=M.next()){var A=L.value,x=A.getBounding();if(s>=x.left&&s<=x.left+x.width&&u>=x.top&&u<=x.top+x.height){k=A;break}}}catch(W){i={error:W}}finally{try{L&&!L.done&&(o=M.return)&&o.call(M)}finally{if(i)throw i.error}}var P=null;if(k!==null){if(!we(P)){var $=k.getMainWidget(),R=$.getBounding();s>=R.left&&s<=R.left+R.width&&u>=R.top&&u<=R.top+R.height&&(P=$)}if(!we(P)){var z=k.getYAxisWidget();if(z!==null){var B=z.getBounding();s>=B.left&&s<=B.left+B.width&&u>=B.top&&u<=B.top+B.height&&(P=z)}}}return{pane:k,widget:P}},e.prototype._makeWidgetEvent=function(t,r){var n,i,o,s=(n=r==null?void 0:r.getBounding())!==null&&n!==void 0?n:null;return Ze(Ze({},t),{x:t.x-((i=s==null?void 0:s.left)!==null&&i!==void 0?i:0),y:t.y-((o=s==null?void 0:s.top)!==null&&o!==void 0?o:0)})},e.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},e}(),Jb=function(){function e(t,r){this._chartBounding=kp(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={sort:!0,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._cacheYAxisWidth={left:0,right:0},this._initContainer(t),this._chartEvent=new qb(this._chartContainer,this),this._chartStore=new q8(this,r),this._initPanes(r),this._layout()}return e.prototype._initContainer=function(t){this._container=t,this._chartContainer=Os("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer),this._cacheChartBounding()},e.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},e.prototype._initPanes=function(t){var r=this,n,i=(n=t==null?void 0:t.layout)!==null&&n!==void 0?n:[{type:"candle"}],o=function(u){var d,h;if(!we(r._candlePane)){var p=(d=u.options)!==null&&d!==void 0?d:{};vn(p,{id:Nt.CANDLE}),r._candlePane=r._createPane(zb,Nt.CANDLE,p);var g=(h=u.content)!==null&&h!==void 0?h:[];g.forEach(function(m){r.createIndicator(m,!0,p)})}},s=function(u){if(!we(r._xAxisPane)){var d=r._createPane(Xb,Nt.X_AXIS,u??{});r._xAxisPane=d}};i.forEach(function(u){var d,h,p;switch(u.type){case"candle":{o(u);break}case"indicator":{var g=(d=u.content)!==null&&d!==void 0?d:[];if(g.length>0){var m=(p=(h=u.options)===null||h===void 0?void 0:h.id)!==null&&p!==void 0?p:null;we(m)&&(m=fp(Nt.INDICATOR));var b=Ze(Ze({},u.options),{id:m});g.forEach(function(x){r.createIndicator(x,!0,b)})}break}case"xAxis":{s(u.options);break}}}),o({}),s({order:Number.MAX_SAFE_INTEGER})},e.prototype._createPane=function(t,r,n){var i=new t(this,r,n??{});return this._drawPanes.push(i),i},e.prototype._recalculatePaneHeight=function(t,r,n){if(n===0)return!1;var i=this._drawPanes.filter(function(g){var m=g.getId();return g.getOptions().state==="normal"&&m!==t.getId()&&m!==Nt.X_AXIS}),o=i.length;if(o===0)return!1;if(t.getId()!==Nt.CANDLE&&we(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var s=this._candlePane.getBounding().height;if(s>0){var u=this._candlePane.getOptions().minHeight,d=s+n;d<u&&(d=u,r-=s+n-d),this._candlePane.setBounding({height:d})}}else{var h=n,p=Math.floor(n/o);i.forEach(function(g,m){var b=g.getBounding().height,x=0;m===o-1?x=b+h:x=b+p,x<g.getOptions().minHeight&&(x=g.getOptions().minHeight),g.setBounding({height:x}),h-=x-b}),Math.abs(h)>0&&(r-=h)}return t.setBounding({height:r}),!0},e.prototype.getDrawPaneById=function(t){if(t===Nt.CANDLE)return this._candlePane;if(t===Nt.X_AXIS)return this._xAxisPane;var r=this._drawPanes.find(function(n){return n.getId()===t});return r??null},e.prototype.getContainer=function(){return this._container},e.prototype.getChartStore=function(){return this._chartStore},e.prototype.getXAxisPane=function(){return this._xAxisPane},e.prototype.getDrawPanes=function(){return this._drawPanes},e.prototype.getSeparatorPanes=function(){return this._separatorPanes},e.prototype.layout=function(t){var r=this,n,i,o,s,u,d,h;(n=t.sort)!==null&&n!==void 0&&n&&(this._layoutOptions.sort=t.sort),(i=t.measureHeight)!==null&&i!==void 0&&i&&(this._layoutOptions.measureHeight=t.measureHeight),(o=t.measureWidth)!==null&&o!==void 0&&o&&(this._layoutOptions.measureWidth=t.measureWidth),(s=t.update)!==null&&s!==void 0&&s&&(this._layoutOptions.update=t.update),(u=t.buildYAxisTick)!==null&&u!==void 0&&u&&(this._layoutOptions.buildYAxisTick=t.buildYAxisTick),(d=t.cacheYAxisWidth)!==null&&d!==void 0&&d&&(this._layoutOptions.cacheYAxisWidth=t.cacheYAxisWidth),(h=t.buildYAxisTick)!==null&&h!==void 0&&h&&(this._layoutOptions.forceBuildYAxisTick=t.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(p){r._layout(),r._layoutPending=!1}).catch(function(p){}))},e.prototype._layout=function(){var t=this,r=this._layoutOptions,n=r.sort,i=r.measureHeight,o=r.measureWidth,s=r.update,u=r.buildYAxisTick,d=r.cacheYAxisWidth,h=r.forceBuildYAxisTick;if(n){for(;we(this._chartContainer.firstChild);)this._chartContainer.removeChild(this._chartContainer.firstChild);this._separatorPanes.clear(),this._drawPanes.sort(function(le,ae){return le.getOptions().order-ae.getOptions().order});var p=null;this._drawPanes.forEach(function(le){if(le.getId()!==Nt.X_AXIS){if(we(p)){var ae=new Gb(t,"",p,le);t._chartContainer.appendChild(ae.getContainer()),t._separatorPanes.set(le,ae)}p=le}t._chartContainer.appendChild(le.getContainer())})}if(i){var g=this._chartBounding.height,m=this.getStyles().separator.size,b=this._xAxisPane.getAxisComponent().getAutoSize(),x=g-b;x<0&&(x=0),this._drawPanes.forEach(function(le){var ae=le.getId();if(we(t._separatorPanes.get(le))&&(x-=m),ae!==Nt.X_AXIS&&ae!==Nt.CANDLE&&le.getVisible()){var te=le.getBounding().height;te>x?(te=x,x=0):x-=te,le.setBounding({height:te})}}),this._candlePane.setBounding({height:Math.max(x,0)}),this._xAxisPane.setBounding({height:b});var C=0;this._drawPanes.forEach(function(le){var ae=t._separatorPanes.get(le);we(ae)&&(ae.setBounding({height:m,top:C}),C+=m),le.setBounding({top:C}),C+=le.getBounding().height})}var _=o;if((u||h)&&this._drawPanes.forEach(function(le){var ae=le.getAxisComponent().buildTicks(h);_||(_=ae)}),_){var k=this._chartBounding.width,M=this.getStyles(),L=0,A=!0,P=0,$=!0;this._drawPanes.forEach(function(le){if(le.getId()!==Nt.X_AXIS){var ae=le.getAxisComponent(),te=ae.inside,ce=ae.getAutoSize();ae.position==="left"?(L=Math.max(L,ce),te&&(A=!1)):(P=Math.max(P,ce),te&&($=!1))}}),d&&(L=Math.max(this._cacheYAxisWidth.left,L),P=Math.max(this._cacheYAxisWidth.right,P)),this._cacheYAxisWidth.left=L,this._cacheYAxisWidth.right=P;var R=k,z=0,B=0;A&&(R-=L,z=L),$&&(R-=P,B=P),this._chartStore.setTotalBarSpace(R);var W={width:k},X={width:R,left:z,right:B},ee={width:L},U={width:P},q=M.separator.fill,ie={};q?ie=W:ie=X,this._drawPanes.forEach(function(le){var ae;(ae=t._separatorPanes.get(le))===null||ae===void 0||ae.setBounding(ie),le.setBounding(W,X,ee,U)})}s&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={sort:!1,measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1}},e.prototype.updatePane=function(t,r){var n=this;if(we(r)){var i=this.getDrawPaneById(r);i==null||i.update(t)}else this._drawPanes.forEach(function(o){var s;o.update(t),(s=n._separatorPanes.get(o))===null||s===void 0||s.update(t)})},e.prototype.getDom=function(t,r){var n,i;if(we(t)){var o=this.getDrawPaneById(t);if(we(o)){var s=r??"root";switch(s){case"root":return o.getContainer();case"main":return o.getMainWidget().getContainer();case"yAxis":return(i=(n=o.getYAxisWidget())===null||n===void 0?void 0:n.getContainer())!==null&&i!==void 0?i:null}}}else return this._chartContainer;return null},e.prototype.getSize=function(t,r){var n,i;if(we(t)){var o=this.getDrawPaneById(t);if(we(o)){var s=r??"root";switch(s){case"root":return o.getBounding();case"main":return o.getMainWidget().getBounding();case"yAxis":return(i=(n=o.getYAxisWidget())===null||n===void 0?void 0:n.getBounding())!==null&&i!==void 0?i:null}}}else return this._chartBounding;return null},e.prototype.setSymbol=function(t){this._chartStore.setSymbol(t)},e.prototype.getSymbol=function(){return this._chartStore.getSymbol()},e.prototype.setPeriod=function(t){this._chartStore.setPeriod(t)},e.prototype.getPeriod=function(){return this._chartStore.getPeriod()},e.prototype.setStyles=function(t){var r=this;this._setOptions(function(){r._chartStore.setStyles(t)})},e.prototype.getStyles=function(){return this._chartStore.getStyles()},e.prototype.setFormatter=function(t){var r=this;this._setOptions(function(){r._chartStore.setFormatter(t)})},e.prototype.getFormatter=function(){return this._chartStore.getFormatter()},e.prototype.setLocale=function(t){var r=this;this._setOptions(function(){r._chartStore.setLocale(t)})},e.prototype.getLocale=function(){return this._chartStore.getLocale()},e.prototype.setTimezone=function(t){var r=this;this._setOptions(function(){r._chartStore.setTimezone(t)})},e.prototype.getTimezone=function(){return this._chartStore.getTimezone()},e.prototype.setThousandsSeparator=function(t){var r=this;this._setOptions(function(){r._chartStore.setThousandsSeparator(t)})},e.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},e.prototype.setDecimalFold=function(t){var r=this;this._setOptions(function(){r._chartStore.setDecimalFold(t)})},e.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},e.prototype._setOptions=function(t){t(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},e.prototype.setOffsetRightDistance=function(t){this._chartStore.setOffsetRightDistance(t,!0)},e.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},e.prototype.setMaxOffsetLeftDistance=function(t){t<0||this._chartStore.setMaxOffsetLeftDistance(t)},e.prototype.setMaxOffsetRightDistance=function(t){t<0||this._chartStore.setMaxOffsetRightDistance(t)},e.prototype.setLeftMinVisibleBarCount=function(t){t<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(t))},e.prototype.setRightMinVisibleBarCount=function(t){t<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(t))},e.prototype.setBarSpace=function(t){this._chartStore.setBarSpace(t)},e.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},e.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},e.prototype.resetData=function(){this._chartStore.resetData()},e.prototype.getDataList=function(){return this._chartStore.getDataList()},e.prototype.setDataLoader=function(t){this._chartStore.setDataLoader(t)},e.prototype.createIndicator=function(t,r,n){var i,o=lr(t)?{name:t}:t;if(Uy(o.name)===null)return null;var s=n??{};lr(s.id)||(s.id=fp(Nt.INDICATOR)),lr(o.id)||(o.id=fp(o.name));var u=this._chartStore.addIndicator(o,s.id,r??!1);if(u){var d=!1;return we(this.getDrawPaneById(s.id))||(this._createPane(f2,s.id,s),(i=s.height)!==null&&i!==void 0||(s.height=Zy),d=!0),this.setPaneOptions(s),this.layout({sort:d,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),o.id}return null},e.prototype.overrideIndicator=function(t){return this._chartStore.overrideIndicator(t)},e.prototype.getIndicators=function(t){return this._chartStore.getIndicatorsByFilter(t??{})},e.prototype.removeIndicator=function(t){var r=this,n=this._chartStore.removeIndicator(t??{});if(n){var i=!1,o=[];this._drawPanes.forEach(function(s){var u=s.getId();u!==Nt.CANDLE&&u!==Nt.X_AXIS&&o.push(u)}),o.forEach(function(s){if(!r._chartStore.hasIndicators(s)){var u=r._drawPanes.findIndex(function(h){return h.getId()===s}),d=r._drawPanes[u];we(d)&&(i=!0,r._recalculatePaneHeight(d,0,d.getBounding().height),r._drawPanes.splice(u,1),d.destroy())}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({sort:i,measureHeight:i,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return n},e.prototype.createOverlay=function(t){var r=this,n=[],i=[],o=function(u){!we(u.paneId)||r.getDrawPaneById(u.paneId)===null?(u.paneId=Nt.CANDLE,i.push(!1)):i.push(!0),n.push(u)};lr(t)?o({name:t}):Va(t)?t.forEach(function(u){var d=null;lr(u)?d={name:u}:d=u,o(d)}):o(t);var s=this._chartStore.addOverlays(n,i);return Va(t)?s:s[0]},e.prototype.getOverlays=function(t){return this._chartStore.getOverlaysByFilter(t??{})},e.prototype.overrideOverlay=function(t){return this._chartStore.overrideOverlay(t)},e.prototype.removeOverlay=function(t){return this._chartStore.removeOverlay(t??{})},e.prototype.setPaneOptions=function(t){var r,n,i=this,o,s=!1,u=!1,d=we(t.id),h=function(C){var _=C.getId();if(d&&t.id===_||!d){if(_!==Nt.X_AXIS){if(ct(t.height)&&t.height>0){var k=Math.max((o=t.minHeight)!==null&&o!==void 0?o:C.getOptions().minHeight,0),M=Math.max(k,t.height);u=!0,s=!0,C.setOriginalBounding({height:M}),p._recalculatePaneHeight(C,M,-M)}if(we(t.state)&&C.getOptions().state!==t.state){s=!0,u=!0;var L=t.state;switch(L){case"maximize":{var A=p._drawPanes.find(function(B){var W=B.getId();return B.getOptions().state==="maximize"&&W!==Nt.X_AXIS});if(!we(A)){C.getOptions().state==="normal"&&C.setOriginalBounding({height:C.getBounding().height}),C.setOptions({state:L});var P=p._chartBounding.height;C.setBounding({height:P-p._xAxisPane.getBounding().height}),p._drawPanes.forEach(function(B){var W;B.getId()!==Nt.X_AXIS&&B.getId()!==_&&(B.setBounding({height:B.getOriginalBounding().height}),B.setVisible(!1),(W=i._separatorPanes.get(B))===null||W===void 0||W.setVisible(!1))})}break}case"minimize":{var M=C.getBounding().height,$=C.getOptions().state,R=M-gp;$==="maximize"&&(R=C.getOriginalBounding().height-gp),p._recalculatePaneHeight(C,gp,R)&&($==="normal"&&C.setOriginalBounding({height:M}),C.setOptions({state:L})),p._drawPanes.forEach(function(W){var X;W.getId()!==Nt.X_AXIS&&(W.setVisible(!0),(X=i._separatorPanes.get(W))===null||X===void 0||X.setVisible(!0))});break}default:{var M=C.getOriginalBounding().height;p._recalculatePaneHeight(C,M,C.getBounding().height-M)&&C.setOptions({state:L}),p._drawPanes.forEach(function(W){var X;W.getId()!==Nt.X_AXIS&&(W.setVisible(!0),(X=i._separatorPanes.get(W))===null||X===void 0||X.setVisible(!0))});break}}}}we(t.axis)&&(u=!0);var z=Ze({},t);if(delete z.state,C.setOptions(z),_===t.id)return"break"}},p=this;try{for(var g=sa(this._drawPanes),m=g.next();!m.done;m=g.next()){var b=m.value,x=h(b);if(x==="break")break}}catch(C){r={error:C}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}u&&this.layout({measureHeight:s,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},e.prototype.getPaneOptions=function(t){var r;if(we(t)){var n=this.getDrawPaneById(t);return(r=n==null?void 0:n.getOptions())!==null&&r!==void 0?r:null}return this._drawPanes.map(function(i){return i.getOptions()})},e.prototype.setZoomEnabled=function(t){this._chartStore.setZoomEnabled(t)},e.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},e.prototype.setScrollEnabled=function(t){this._chartStore.setScrollEnabled(t)},e.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},e.prototype.scrollByDistance=function(t,r){var n=this,i=ct(r)&&r>0?r:0;if(this._chartStore.startScroll(),i>0){var o=new Tg({duration:i});o.doFrame(function(s){var u=t*(s/i);n._chartStore.scroll(u)}),o.start()}else this._chartStore.scroll(t)},e.prototype.scrollToRealTime=function(t){var r=this._chartStore.getBarSpace().bar,n=this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/r,i=n*r;this.scrollByDistance(i,t)},e.prototype.scrollToDataIndex=function(t,r){var n=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-t))*this._chartStore.getBarSpace().bar;this.scrollByDistance(n,r)},e.prototype.scrollToTimestamp=function(t,r){var n=Eg(this.getDataList(),"timestamp",t);this.scrollToDataIndex(n,r)},e.prototype.zoomAtCoordinate=function(t,r,n){var i=this,o=ct(n)&&n>0?n:0,s=this._chartStore.getBarSpace().bar,u=s*t,d=u-s;if(o>0){var h=0,p=new Tg({duration:o});p.doFrame(function(g){var m=d*(g/o),b=(m-h)/i._chartStore.getBarSpace().bar*Mg;i._chartStore.zoom(b,r),h=m}),p.start()}else this._chartStore.zoom(d/s*Mg,r)},e.prototype.zoomAtDataIndex=function(t,r,n){var i=this._chartStore.dataIndexToCoordinate(r);this.zoomAtCoordinate(t,{x:i,y:0},n)},e.prototype.zoomAtTimestamp=function(t,r,n){var i=Eg(this.getDataList(),"timestamp",r);this.zoomAtDataIndex(t,i,n)},e.prototype.convertToPixel=function(t,r){var n=this,i,o=r??{},s=o.paneId,u=s===void 0?Nt.CANDLE:s,d=o.absolute,h=d===void 0?!1:d,p=[];if(u!==Nt.X_AXIS){var g=this.getDrawPaneById(u);if(g!==null){var m=g.getBounding(),b=[].concat(t),x=this._xAxisPane.getAxisComponent(),C=g.getAxisComponent();p=b.map(function(_){var k={},M=_.dataIndex;if(ct(_.timestamp)&&(M=n._chartStore.timestampToDataIndex(_.timestamp)),ct(M)&&(k.x=x.convertToPixel(M)),ct(_.value)){var L=C.convertToPixel(_.value);k.y=h?m.top+L:L}return k})}}return Va(t)?p:(i=p[0])!==null&&i!==void 0?i:{}},e.prototype.convertFromPixel=function(t,r){var n=this,i,o=r??{},s=o.paneId,u=s===void 0?Nt.CANDLE:s,d=o.absolute,h=d===void 0?!1:d,p=[];if(u!==Nt.X_AXIS){var g=this.getDrawPaneById(u);if(g!==null){var m=g.getBounding(),b=[].concat(t),x=this._xAxisPane.getAxisComponent(),C=g.getAxisComponent();p=b.map(function(_){var k,M={};if(ct(_.x)){var L=x.convertFromPixel(_.x);M.dataIndex=L,M.timestamp=(k=n._chartStore.dataIndexToTimestamp(L))!==null&&k!==void 0?k:void 0}if(ct(_.y)){var A=h?_.y-m.top:_.y;M.value=C.convertFromPixel(A)}return M})}}return Va(t)?p:(i=p[0])!==null&&i!==void 0?i:{}},e.prototype.executeAction=function(t,r){var n;switch(t){case"onCrosshairChange":{var i=Ze({},r);(n=i.paneId)!==null&&n!==void 0||(i.paneId=Nt.CANDLE),this._chartStore.setCrosshair(i,{notExecuteAction:!0});break}}},e.prototype.subscribeAction=function(t,r){this._chartStore.subscribeAction(t,r)},e.prototype.unsubscribeAction=function(t,r){this._chartStore.unsubscribeAction(t,r)},e.prototype.getConvertPictureUrl=function(t,r,n){var i=this,o=this._chartBounding,s=o.width,u=o.height,d=Os("canvas",{width:"".concat(s,"px"),height:"".concat(u,"px"),boxSizing:"border-box"}),h=d.getContext("2d"),p=Ll(d);d.width=s*p,d.height=u*p,h.scale(p,p),h.fillStyle=n??"#FFFFFF",h.fillRect(0,0,s,u);var g=t??!1;return this._drawPanes.forEach(function(m){var b=i._separatorPanes.get(m);if(we(b)){var x=b.getBounding();h.drawImage(b.getImage(g),x.left,x.top,x.width,x.height)}var C=m.getBounding();h.drawImage(m.getImage(g),0,C.top,s,C.height)}),d.toDataURL("image/".concat(r??"jpeg"))},e.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},e.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(t){t.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._chartStore.destroy(),this._container.removeChild(this._chartContainer)},e}(),Tm=new Map,e4=1;function t4(e,t){var r=null;if(lr(e)?r=document.getElementById(e):r=e,r===null)return null;var n=Tm.get(r.id);if(we(n))return n;var i="k_line_chart_".concat(e4++);return n=new Jb(r,t),n.id=i,r.setAttribute("k-line-chart-id",i),Tm.set(i,n),n}var gn={clone:Od,merge:vn,isString:lr,isNumber:ct,isValid:we,isObject:na,isArray:Va,isFunction:pi,isBoolean:L0,formatValue:En,formatPrecision:Kn,formatBigNumber:Ny,formatDate:Oy,formatThousands:zy,formatFoldDecimal:By,calcTextWidth:ia,getLinearSlopeIntercept:Wp,getLinearYFromSlopeIntercept:jg,getLinearYFromCoordinates:P0,checkCoordinateOnArc:t2,checkCoordinateOnCircle:Qy,checkCoordinateOnLine:Yy,checkCoordinateOnPolygon:Ky,checkCoordinateOnRect:Qg,checkCoordinateOnText:e2};const r4="",n4="",i4="",o4="",a4="",s4="",l4="",c4="",u4="",d4="",h4="",p4="",f4="",g4="MA()",v4="EMA()",m4="SMA",y4="BOLL()",b4="BBI()",x4="SAR()",w4="VOL()",C4="MACD()",_4="KDJ()",S4="RSI()",k4="BIAS()",T4="BRAR()",E4="CCI()",M4="DMI()",I4="CR()",L4="PSY()",P4="DMA()",A4="TRIX()",D4="OBV()",F4="VR()",R4="WR()",O4="MTM()",N4="EMV()",z4="ROC()",B4="PVT()",$4="AO()",V4="",W4="(UTC-10) ",U4="(UTC-8) ",H4="(UTC-7) ",Y4="(UTC-5) ",X4="(UTC-4) ",j4="(UTC-3) ",Z4="(UTC+1) ",G4="(UTC+2) ",Q4="(UTC+3) ",K4="(UTC+4) ",q4="(UTC+5) ",J4="(UTC+6) ",e7="(UTC+7) ",t7="(UTC+8) ",r7="(UTC+9) ",n7="(UTC+10) ",i7="(UTC+12) ",o7="",a7="",s7="",l7="",c7="",u7="",d7="",h7="",p7="",f7="",g7="",v7="",m7="",y7="",b7="",x7="",w7="",C7="",_7="",S7="",k7="",T7="",E7="",M7="",I7="",L7="",P7="",A7="",D7="",F7="",R7="",O7="",N7="ABCD",z7="XABCD",B7="",$7="",V7="",W7="",U7="1",H7="2",Y7="3",X7="4",j7="5",Z7="",G7="",Q7="",K7="",q7="",J7="",ex="",tx="OHLC",rx="",nx="",ix="",ox="",ax="",sx="",lx="",cx="",ux="",dx="",hx="",px="",fx="",gx="",vx="",mx="",yx="",bx="",xx="",wx="",Cx="",_x="",Sx="",kx="...",Tx="",Ex="12",Mx="24",Ix="",Lx={indicator:r4,main_indicator:n4,sub_indicator:i4,favourites:o4,setting:a4,replay:s4,timezone:l4,screenshot:c4,full_screen:u4,exit_full_screen:d4,save:h4,confirm:p4,cancel:f4,ma:g4,ema:v4,sma:m4,boll:y4,bbi:b4,sar:x4,vol:w4,macd:C4,kdj:_4,rsi:S4,bias:k4,brar:T4,cci:E4,dmi:M4,cr:I4,psy:L4,dma:P4,trix:A4,obv:D4,vr:F4,wr:R4,mtm:O4,emv:N4,roc:z4,pvt:B4,ao:$4,utc:V4,honolulu:W4,juneau:U4,los_angeles:H4,chicago:Y4,toronto:X4,sao_paulo:j4,london:Z4,berlin:G4,bahrain:Q4,dubai:K4,ashkhabad:q4,almaty:J4,bangkok:e7,shanghai:t7,tokyo:r7,sydney:n7,norfolk:i7,D:o7,"5D":"5",W:a7,M:s7,"3M":"3","6M":"6",Y:l7,"5Y":"5","Light Theme 1":"1","Light Theme 2":"2","Midnight Theme":"","Dark Theme":"","Dark Gray Theme":"","Blue Theme":"","Red Theme":"","Green Theme":"","Yellow Theme":"","Pink Theme":"",horizontal_straight_line:c7,horizontal_ray_line:u7,horizontal_segment:d7,vertical_straight_line:h7,vertical_ray_line:p7,vertical_segment:f7,straight_line:g7,ray_line:v7,segment:m7,arrow:y7,price_line:b7,price_channel_line:x7,parallel_straight_line:w7,fibonacci_line:C7,fibonacci_segment:_7,fibonacci_circle:S7,fibonacci_spiral:k7,fibonacci_speed_resistance_fan:T7,fibonacci_extension:E7,gann_box:M7,rect:I7,parallelogram:L7,circle:P7,triangle:A7,three_waves:D7,five_waves:F7,eight_waves:R7,any_waves:O7,abcd:N7,xabcd:z7,weak_magnet:B7,strong_magnet:$7,symbol_search:V7,symbol_code:W7,params_1:U7,params_2:H7,params_3:Y7,params_4:X7,params_5:j7,period:Z7,standard_deviation:G7,candle_type:Q7,candle_solid:K7,candle_stroke:q7,candle_up_stroke:J7,candle_down_stroke:ex,ohlc:tx,area:rx,heikin_ashi:nx,last_price_show:ix,high_price_show:ox,low_price_show:ax,indicator_last_value_show:sx,price_axis_type:lx,normal:cx,percentage:ux,log:dx,reverse_coordinate:hx,grid_show:px,restore_default:fx,volumeBars:gx,trades:vx,trade_time:mx,trade_price:yx,trade_quantity:bx,trade_amount:xx,trade_side:wx,buy:Cx,sell:_x,no_trades_available:Sx,loading_trades:kx,trades_error:Tx,time_format_12h:Ex,time_format_24h:Mx,latest_trades:Ix},Px="Indicator",Ax="Indicators",Dx="Main Indicator",Fx="Sub Indicator",Rx="Favourites",Ox="Setting",Nx="Replay",zx="Timezone",Bx="Screenshot",$x="Full Screen",Vx="Exit",Wx="Save",Ux="Confirm",Hx="Cancel",Yx="MA - Moving Average",Xx="EMA - Exponential Moving Average",jx="SMA - Simple Moving Average",Zx="BOLL - Bolinger Bands",Gx="BBI - Bull And Bearlndex",Qx="SAR - Stop and Reverse",Kx="VOL - Volume (sub)",qx="MACD - Moving Average Convergence / Divergence",Jx="KDJ - KDJ Index",ew="RSI - Relative Strength Index",tw="BIAS - Bias Ratio",rw="BRAR - Emotional Index",nw="CCI - Commodity Channel Index",iw="DMI - Directional Movement Index (PDI, MDI, ADX, ADXR)",ow="PDI - Plus Directional Indicator",aw="MDI - Minus Directional Indicator",sw="ADX - Average Directional Index",lw="ADXR - Average Directional Index Rating",cw="CR - Energy Index",uw="PSY - Psychological Line",dw="DMA - Different of Moving Average",hw="TRIX - Triple Exponentially Smoothed Moving Average",pw="OBV - On Balance Volume",fw="VR - Volatility Volume Ratio",gw="WR - Williams %R",vw="MTM - Momentum Index",mw="EMV - Ease of Movement Value",yw="ROC - Price Rate of Change",bw="PVT - Price and Volume Trend",xw="AO - Awesome Oscillator",ww="ADL - Accumulation/Distribution Line",Cw="MFI - Money Flow Index",_w="VOL - Volume",Sw="WMA - Weighted Moving Average",kw="WEM - Weighted Exponential Moving Average",Tw="QS - Qstick",Ew="AROON - Aroon",Mw="ATR - Average True Range",Iw="TR - True Range",Lw="WS - Wilder's Smoothing",Pw="UTC",Aw="(UTC-10) Honolulu",Dw="(UTC-8) Juneau",Fw="(UTC-7) Los Angeles",Rw="(UTC-5) Chicago",Ow="(UTC-4) Toronto",Nw="(UTC-3) Sao Paulo",zw="(UTC+1) London",Bw="(UTC+2) Berlin",$w="(UTC+3) Bahrain",Vw="(UTC+4) Dubai",Ww="(UTC+5) Ashkhabad",Uw="(UTC+6) Almaty",Hw="(UTC+7) Bangkok",Yw="(UTC+8) Shanghai",Xw="(UTC+9) Tokyo",jw="(UTC+10) Sydney",Zw="(UTC+12) Norfolk",Gw="D",Qw="W",Kw="M",qw="Y",Jw="Horizontal Line",eC="Horizontal Ray",tC="Horizontal Segment",rC="Vertical Line",nC="Vertical Ray",iC="Vertical Segment",oC="Trend Line",aC="Ray",sC="Segment",lC="Arrow",cC="Price Line",uC="Price Channel Line",dC="Parallel Line",hC="Fibonacci Line",pC="Fibonacci Segment",fC="Fibonacci Circle",gC="Fibonacci Spiral",vC="Fibonacci Sector",mC="Fibonacci Extension",yC="Gann Box",bC="Rect",xC="Parallelogram",wC="Circle",CC="Triangle",_C="Three Waves",SC="Five Waves",kC="Eight Waves",TC="Any Waves",EC="ABCD Pattern",MC="XABCD Pattern",IC="Weak Magnet",LC="Strong Magnet",PC="Symbol Search",AC="Symbol Code",DC="Parameter 1",FC="Parameter 2",RC="Parameter 3",OC="Parameter 4",NC="Parameter 5",zC="Period",BC="Standard Deviation",$C="Charts",VC="Candle Type",WC="Candle Solid",UC="Candle Stroke",HC="Candle Up Stroke",YC="Candle Down Stroke",XC="OHLC",jC="Area",ZC="Heikin Ashi",GC="Renko",QC="Brick Size",KC="Show Last Price",qC="Show Highest Price",JC="Show Lowest Price",e_="Show indicator's last value",t_="Restore Defaults",r_="Standard",n_="Current Open",i_="Previous Close",o_="Close",a_="Open",s_="High",l_="Low",c_="Auto",u_="Right",d_="Left",h_="Normal",p_="Percentage",f_="Log",g_="Show Grids",v_="Show Horizontal Grids",m_="Horizontal Grid Size",y_="Horizontal Grid Color",b_="Show Vertical Grids",x_="Vertical Grid Size",w_="Vertical Grid Color",C_="Grid Horizontal Style",__="Grid Horizontal Dashed Value",S_="Grid Vertical Style",k_="Grid Vertical Dashed Value",T_="Pane Options",E_="Fill Stroke",M_="Always",I_="Stroke",L_="Stroke Fill",P_="Ruler",A_="RR",D_="Enable Crosshair Sync",F_="Enable Time Sync",R_="Enable Symbol Sync",O_="Enable Interval Sync",N_="Enable Drawing Sync",z_="Multichart",B_="Paper Trading",$_="Balance",V_="Trade",W_="Positions",U_="Orders",H_="Trades",Y_="Cash",X_="Market",j_="Limit",Z_="Buy",G_="Sell",Q_="Quantity",K_="Price",q_="Estimated Total",J_="No open positions",eS="Avg Price",tS="Current Price",rS="P&L",nS="Close Position",iS="No pending orders",oS="Status",aS="Cancel Order",sS="No trades executed",lS="Your trade history will appear here",cS="Clear All Trades",uS="Are you sure you want to clear all {count} trades? This action cannot be undone.",dS="Symbol/Side",hS="Qty",pS="Total",fS="Date/Time",gS="Cash Amount",vS="Operation",mS="Add Cash",yS="Remove Cash",bS="Pending buy orders",xS="Balance after removal",wS="Max safe removal",CS=" Insufficient funds for pending orders!",_S="Add",SS="Remove",kS=" Reset Trading Account",TS=` RESET TRADING ACCOUNT 

This will permanently delete:
 {orders} pending orders
 {positions} open positions
 {trades} trade records
 Reset balance to $10,000

This action cannot be undone!

Are you sure you want to continue?`,ES=` Trading account has been reset successfully!

 Balance: $10,000
 All orders, positions, and trades cleared`,MS="Pending Orders Summary",IS="Pending Buy Orders",LS="Pending Sell Orders",PS="Available Cash",AS="Max Cash Removal",DS="Order Book",FS="Size",RS="Price",OS="Amount",NS="Bids",zS="Asks",BS="Select a symbol to view order book",$S="Loading order book...",VS="Amount",WS="Individual order quantities",US="Cumulative",HS="Cumulative market depth",YS="Time",XS="Price",jS="Quantity",ZS="Amount",GS="Side",QS="No trades available",KS="Loading trades...",qS="Error loading trades",JS="12-hour format",ek="24-hour format",tk="Latest Trades",rk={indicator:Px,indicators:Ax,main_indicator:Dx,sub_indicator:Fx,favourites:Rx,setting:Ox,replay:Nx,timezone:zx,screenshot:Bx,full_screen:$x,exit_full_screen:Vx,save:Wx,confirm:Ux,cancel:Hx,ma:Yx,ema:Xx,sma:jx,boll:Zx,bbi:Gx,sar:Qx,vol:Kx,macd:qx,kdj:Jx,rsi:ew,bias:tw,brar:rw,cci:nw,dmi:iw,pdi:ow,mdi:aw,adx:sw,adxr:lw,cr:cw,psy:uw,dma:dw,trix:hw,obv:pw,vr:fw,wr:gw,mtm:vw,emv:mw,roc:yw,pvt:bw,ao:xw,adl:ww,"force index":"FI - Force Index",mfi:Cw,"volume weighted average price":"VWAP - Volume Weighted Average Price",volumebars:_w,"volume profile fixed range":"Volume Profile - Fixed Range",wma:Sw,wema:kw,"chandelier exit":"CE -  Chandelier Exit","keltner channels":"KC - Keltner Channels","ichimoku cloud":"IC - Ichimoku Cloud","chaikin oscillator":"CO - Chaikin Oscillator","percentage price oscillator":"PPO - Percentage Price Oscillator","percentage volume oscillator":"PVO - Percentage Volume Oscillator",qstick:Tw,"absolute price oscillator":"APO - Absolute Price Oscillator","balance of power":"BOP - Balance of Power",aroon:Ew,"double exponential moving average":"DEMA - Double Exponential Moving Average",atr:Mw,tr:Iw,"envelope (sma)":"ENV (SMA) - Envelope (SMA)","envelope (ema)":"ENV (EMA) - Envelope (EMA)",ws:Lw,"volume price trend":"VPT - Volume Price Trend","negative volume index":"NVI - Negative Volume Index","money flow volume":"MFV - Money Flow Volume","money flow multiplier":"MFM - Money Flow Multiplier","average price":"AVP - Average Price","moving linear regression":"MLR - Moving Linear Regression","moving least square":"MLS - Moving Least Square",utc:Pw,honolulu:Aw,juneau:Dw,los_angeles:Fw,chicago:Rw,toronto:Ow,sao_paulo:Nw,london:zw,berlin:Bw,bahrain:$w,dubai:Vw,ashkhabad:Ww,almaty:Uw,bangkok:Hw,shanghai:Yw,tokyo:Xw,sydney:jw,norfolk:Zw,D:Gw,"5D":"5D",W:Qw,M:Kw,"3M":"3M","6M":"6M",Y:qw,"5Y":"5Y","Light Theme 1":"Light Theme 1","Light Theme 2":"Light Theme 2","Midnight Theme":"Midnight Theme","Dark Theme":"Dark Theme","Dark Gray Theme":"Dark Gray Theme","Blue Theme":"Blue Theme","Red Theme":"Red Theme","Green Theme":"Green Theme","Yellow Theme":"Yellow Theme","Pink Theme":"Pink Theme",horizontal_straight_line:Jw,horizontal_ray_line:eC,horizontal_segment:tC,vertical_straight_line:rC,vertical_ray_line:nC,vertical_segment:iC,straight_line:oC,ray_line:aC,segment:sC,arrow:lC,price_line:cC,price_channel_line:uC,parallel_straight_line:dC,fibonacci_line:hC,fibonacci_segment:pC,fibonacci_circle:fC,fibonacci_spiral:gC,fibonacci_speed_resistance_fan:vC,fibonacci_extension:mC,gann_box:yC,rect:bC,parallelogram:xC,circle:wC,triangle:CC,three_waves:_C,five_waves:SC,eight_waves:kC,any_waves:TC,abcd:EC,xabcd:MC,weak_magnet:IC,strong_magnet:LC,symbol_search:PC,symbol_code:AC,params_1:DC,params_2:FC,params_3:RC,params_4:OC,params_5:NC,period:zC,standard_deviation:BC,charts:$C,candle_type:VC,candle_solid:WC,candle_stroke:UC,candle_up_stroke:HC,candle_down_stroke:YC,ohlc:XC,area:jC,heikin_ashi:ZC,renko:GC,brick_size:QC,last_price_show:KC,high_price_show:qC,low_price_show:JC,indicator_last_value_show:e_,restore_default:t_,standard:r_,"candle.bar.compareRule":"Candle Compare Rule","candle.bar.upColor":"Candle Up Color","candle.bar.downColor":"Candle Down Color","candle.bar.noChangeColor":"Candle No Change Color","candle.bar.upBorderColor":"Candle Up Border Color","candle.bar.downBorderColor":"Candle Down Border Color","candle.bar.noChangeBorderColor":"Candle No Change Border Color","candle.bar.upWickColor":"Candle Up Wick Color","candle.bar.downWickColor":"Candle Down Wick Color","candle.bar.noChangeWickColor":"Candle No Change Wick Color","candle.priceMark.show":"Show Price Mark","candle.priceMark.high.show":"Show High Price Mark","candle.priceMark.high.color":"High Price Mark Color","candle.priceMark.high.textOffset":"High Price Mark Text Offset","candle.priceMark.high.textSize":"High Price Mark Text Size","candle.priceMark.high.textFamily":"High Price Mark Text Family","candle.priceMark.high.textWeight":"High Price Mark Text Weight","candle.priceMark.low.show":"Show Low Price Mark","candle.priceMark.low.color":"Low Price Mark Color","candle.priceMark.low.textOffset":"Low Price Mark Text Offset","candle.priceMark.low.textSize":"Low Price Mark Text Size","candle.priceMark.low.textFamily":"Low Price Mark Text Family","candle.priceMark.low.textWeight":"Low Price Mark Text Weight","candle.priceMark.last.show":"Show Last Price Mark","candle.priceMark.last.compareRule":"Last Price Mark Compare Rule","candle.priceMark.last.upColor":"Last Price Mark Up Color","candle.priceMark.last.downColor":"Last Price Mark Down Color","candle.priceMark.last.noChangeColor":"Last Price Mark No Change Color","candle.priceMark.last.line.show":"Show Last Price Mark Line","candle.priceMark.last.line.style":"Last Price Mark Line Style","candle.priceMark.last.line.size":"Last Price Mark Line Size","candle.priceMark.last.line.dashedValue":"Last Price Mark Line Dashed Value","candle.priceMark.last.text.show":"Show Last Price Mark Text","candle.priceMark.last.text.style":"Last Price Mark Text Style","candle.priceMark.last.text.size":"Last Price Mark Text Size","candle.priceMark.last.text.color":"Last Price Mark Text Color",current_open:n_,previous_close:i_,"candle.area.lineSize":"Area Line Size","candle.area.lineColor":"Area Line Color","candle.area.value":"Area Value","candle.area.smooth":"Area Smooth",close:o_,open:a_,high:s_,low:l_,"candle.area.point.show":"Show Area Point","candle.area.point.color":"Area Point Color","candle.area.point.radius":"Area Point Radius","candle.area.point.rippleColor":"Area Point Ripple Color","candle.area.point.rippleRadius":"Area Point Ripple Radius","candle.area.point.animation":"Area Point Animation","candle.renko.brick.size":"Renko Brick Size",auto:c_,"xAxis.size":"X-Axis Size","xAxis.tickText.family":"X-Axis Tick Text Family","xAxis.tickText.marginStart":"X-Axis Tick Text Margin Start","xAxis.tickText.marginEnd":"X-Axis Tick Text Margin End",right:u_,left:d_,normal:h_,percentage:p_,log:f_,"candle.tooltip.showRule":"Candle Tooltip","candle.tooltip.showType":"Candle Tooltip Type","candle.tooltip.rect.position":"Candle Tooltip Rect Position","candle.tooltip.rect.color":"Candle Tooltip Rect Color","candle.tooltip.rect.borderColor":"Candle Tooltip Rect Border Color","candle.tooltip.text.size":"Candle Tooltip Text Size","candle.tooltip.text.weight":"Candle Tooltip Text Weight","candle.tooltip.text.color":"Candle Tooltip Text Color","indicator.lastValueMark.show":"Show Last Value Mark","indicator.lastValueMark.text.show":"Show Last Value Mark Text","indicator.lastValueMark.text.style":"Last Value Mark Text Style","indicator.lastValueMark.text.size":"Last Value Mark Text Size","indicator.lastValueMark.text.weight":"Last Value Mark Text Weight","indicator.lastValueMark.text.color":"Last Value Mark Text Color","indicator.lastValueMark.text.borderStyle":"Last Value Mark Text Border Style","indicator.lastValueMark.text.borderColor":"Last Value Mark Text Border Color","indicator.lastValueMark.text.borderSize":"Last Value Mark Text Border Size","indicator.lastValueMark.text.borderDashedValue":"Last Value Mark Text Border Border Dashed Value","indicator.lastValueMark.text.paddingLeft":"Last Value Mark Text Border Padding Left","indicator.lastValueMark.text.paddingTop":"Last Value Mark Text Border Style Padding Top","indicator.lastValueMark.text.paddingRight":"Last Value Mark Text Border Padding Right","indicator.lastValueMark.text.paddingBottom":"Last Value Mark Text Border Padding Bottom","indicator.lastValueMark.text.borderRadius":"Last Value Mark Text Border Border Radius","indicator.tooltip.showRule":"Show Tooltip Rule","indicator.tooltip.showType":"Show Tooltip Type","indicator.tooltip.title.show":"Show Tooltip","indicator.tooltip.title.showName":"Show Tooltip Name","indicator.tooltip.title.showParams":"Show Tooltip Params","indicator.tooltip.title.size":"Tooltip Title Size","indicator.tooltip.title.weight":"Tooltip Title Weight","indicator.tooltip.title.color":"Tooltip Title Color","indicator.tooltip.title.marginLeft":"Tooltip Title Margin Left","indicator.tooltip.title.marginTop":"Tooltip Title Margin Top","indicator.tooltip.title.marginRight":"Tooltip Title Margin Right","indicator.tooltip.title.marginBottom":"Tooltip Title Margin Bottom","indicator.tooltip.offsetTop":"Tooltip Offset Top","indicator.tooltip.offsetLeft":"Tooltip Offset Left","indicator.tooltip.offsetBottom":"Tooltip Offset Right","indicator.tooltip.offsetRight":"Tooltip Offset Bottom","indicator.tooltip.text.size":"Tooltip Text Size","indicator.tooltip.text.weight":"Tooltip Text Weight","indicator.tooltip.text.color":"Tooltip Text Color","indicator.tooltip.text.marginLeft":"Tooltip Text Margin Left","indicator.tooltip.text.marginTop":"Tooltip Text Margin Top","indicator.tooltip.text.marginRight":"Tooltip Text Margin Right","indicator.tooltip.text.marginBottom":"Tooltip Text Margin Bottom","indicator.bars.style":"Indicator Bars Style","indicator.bars.borderStyle":"Indicator Bars Border Style","indicator.bars.borderSize":"Indicator Bars Border Size","indicator.bars.borderColor":"Indicator Bars Border Color","indicator.bars.borderDashedValue":"Indicator Bars Border Dashed Value","indicator.ohlc.upColor":"Indicator OHLC Up Color","indicator.ohlc.downColor":"Indicator OHLC Down Color","indicator.ohlc.noChangeColor":"Indicator OHLC No Change Color","indicator.lines.style":"Indicator Lines Style","indicator.lines.size":"Indicator Lines Size","indicator.lines.color":"Indicator Lines Color","indicator.lines.dashedValue":"Indicator Lines Dashed Value",grid_show:g_,grid_horizontal_show:v_,grid_horizontal_size:m_,grid_horizontal_color:y_,grid_vertical_show:b_,grid_vertical_size:x_,grid_vertical_color:w_,grid_horizontal_style:C_,grid_horizontal_dashedValue:__,grid_vertical_style:S_,grid_vertical_dashedValue:k_,"xAxis.show":"Show X Axis","xAxis.axisLine.show":"Show X Axis Line","xAxis.axisLine.color":"X Axis Line Color","xAxis.axisLine.size":"X Axis Line Size","xAxis.tickText.show":"Show X Axis Tick Text","xAxis.tickText.size":"X Axis Tick Text Size","xAxis.tickText.weight":"X Axis Tick Text Weight","xAxis.tickText.color":"X Axis Tick Text Color","xAxis.tickLine.show":"Show X Axis Tick Line","xAxis.tickLine.size":"X Axis Tick Line Size","xAxis.tickLine.length":"X Axis Tick Line Length","xAxis.tickLine.color":"X Axis Tick Line Color","yAxis.size":"Y-Axis Size","yAxis.tickText.family":"Y-Axis Tick Text Family","yAxis.show":"Show Y Axis","yAxis.position":"Y Axis Position","yAxis.type":"Y Axis Type","yAxis.inside":"Y Axis Inside","yAxis.reverse":"Y Axis Reverse","yAxis.axisLine.show":"Show Y Axis Line","yAxis.axisLine.size":"Y Axis Line Size","yAxis.axisLine.color":"Y Axis Line Color","yAxis.tickText.show":"Show Y Axis Tick Text","yAxis.tickText.color":"Y Axis Tick Text Color","yAxis.tickText.size":"Y Axis Tick Text Size","yAxis.tickText.weight":"Y Axis Tick Text Weight","yAxis.tickText.marginStart":"Y Axis Tick Text Margin Start","yAxis.tickText.marginEnd":"Y Axis Tick Text Margin End","yAxis.tickLine.show":"Show Y Axis Tick Line","yAxis.tickLine.color":"Y Axis Tick Line Color","yAxis.tickLine.size":"Y Axis Tick Line Size","yAxis.tickLine.length":"Y Axis Tick Line Length","separator.size":"Sub Indicator Separator Size","separator.fill":"Sub Indicator Separator Fill","separator.activeBackgroundColor":"Sub Indicator Separator Color","crosshair.show":"Show Crosshair","crosshair.horizontal.show":"Show Horizontal Crosshair","crosshair.horizontal.line.show":"Show Horizontal Crosshair Line","crosshair.horizontal.line.style":"Horizontal Crosshair Line Style","crosshair.horizontal.line.size":"Horizontal Crosshair Line Size","crosshair.horizontal.line.color":"Horizontal Crosshair Line Color","crosshair.horizontal.line.dashedValue":"Horizontal Crosshair Line Dashed Value","crosshair.horizontal.text.show":"Show Horizontal Crosshair Text","crosshair.horizontal.text.style":"Horizontal Crosshair Text Style","crosshair.horizontal.text.size":"Horizontal Crosshair Text Size","crosshair.horizontal.text.weight":"Horizontal Crosshair Text Weight","crosshair.horizontal.text.color":"Horizontal Crosshair Text Color","crosshair.horizontal.text.backgroundColor":"Horizontal Crosshair Text Bg Color","crosshair.vertical.show":"Show Vertical Crosshair","crosshair.vertical.line.show":"Show Vertical Crosshair Line","crosshair.vertical.line.style":"Vertical Crosshair Line Style","crosshair.vertical.line.size":"Vertical Crosshair Line Size","crosshair.vertical.line.color":"Vertical Crosshair Line Color","crosshair.vertical.line.dashedValue":"Vertical Crosshair Line Dashed Value","pane.axis.name":"Axis Name","pane.axis.name.normal":"Normal","pane.axis.name.percentage":"Percentage","pane.axis.name.log":"Log","pane.axis.position":"Axis Position","pane.axis.inside":"Axis Inside","pane.axis.reverse":"Axis Reverse","pane.axis.scrollZoomEnabled":"Axis Scroll Zoom Enabled","pane.axis.gap.top":"Axis Gap Top","pane.axis.gap.bottom":"Axis Gap Bottom","pane.height":"Pane Height","pane.minHeight":"Pane Min Height","pane.dragEnabled":"Pane Drag Enabled","pane.state":"Pane State","pane.state.normal":"Normal","pane.state.maximize":"Maximize","pane.state.minimize":"Minimize",pane_options:T_,"crosshair.vertical.text.show":"Show Vertical Crosshair Text","crosshair.vertical.text.style":"Vertical Crosshair Text Style","crosshair.vertical.text.size":"Vertical Crosshair Text Size","crosshair.vertical.text.weight":"Vertical Crosshair Text Weight","crosshair.vertical.text.color":"Vertical Crosshair Text Color","crosshair.vertical.text.backgroundColor":"Vertical Crosshair Text Bg Color","overlay.point.color":"Point Color","overlay.point.borderColor":"Point Border Color","overlay.point.borderSize":"Point Border Size","overlay.point.activeColor":"Point Active Color","overlay.point.activeBorderColor":"Point Active Border Color","overlay.point.activeBorderSize":"Point Active Border Size","overlay.point.activeRadius":"Point Active Radius","overlay.point.radius":"Point Radius","overlay.line.style":"Line Style","overlay.line.smooth":"Line Smooth","overlay.line.size":"Line Size","overlay.line.color":"Line Color","overlay.line.dashedValue":"Line Dashed Value","overlay.rect.style":"Rect Style","sidebar.expand":"Expand sidebar","sidebar.collapse":"Collapse sidebar","overlay.rect.color":"Rect Color","overlay.rect.borderColor":"Rect Border Color","overlay.rect.borderSize":"Rect Border Size","overlay.rect.borderRadius":"Rect Border Radius","overlay.rect.borderStyle":"Rect Border Style","overlay.polygon.style":"Polygon Style","overlay.polygon.color":"Polygon Color","overlay.polygon.borderColor":"Polygon Border Color","overlay.polygon.borderStyle":"Polygon Border Style","overlay.polygon.borderSize":"Polygon Border Size","overlay.circle.style":"Circle Style","overlay.circle.color":"Circle Color","overlay.circle.borderColor":"Circle Border Color","overlay.circle.borderStyle":"Circle Border Style","overlay.circle.borderSize":"Circle Border Size","overlay.arc.style":"Arc Style","overlay.arc.size":"Arc Size","overlay.arc.color":"Arc Color","overlay.text.style":"Text Style","overlay.text.size":"Text Size","overlay.text.family":"Text Family","overlay.text.weight":"Text Weight","overlay.text.color":"Text Color","overlay.text.backgroundColor":"Text Background Color","overlay.text.borderColor":"Text Border Color","overlay.text.borderSize":"Text Border Size","overlay.text.borderStyle":"Text Border Style","overlay.text.borderDashedValue":"Text Border Dashed Value","overlay.text.borderRadius":"Text Border Radius","overlay.text.paddingLeft":"Text Padding Left","overlay.text.paddingRight":"Text Padding Right","overlay.text.paddingTop":"Text Padding Top","overlay.text.paddingBottom":"Text Padding Bottom",fill_stroke:E_,always:M_,stroke:I_,stroke_fill:L_,ruler:P_,rr:A_,enable_crosshair_sync:D_,enable_time_sync:F_,enable_symbol_sync:R_,enable_interval_sync:O_,enable_drawing_sync:N_,multichart:z_,paper_trading:B_,balance:$_,trade:V_,positions:W_,orders:U_,trades:H_,cash:Y_,market:X_,limit:j_,buy:Z_,sell:G_,quantity:Q_,price:K_,estimated_total:q_,no_open_positions:J_,avg_price:eS,current_price:tS,pnl:rS,close_position:nS,no_pending_orders:iS,status:oS,cancel_order:aS,no_trades_executed:sS,your_trade_history_will_appear_here:lS,clear_all_trades:cS,are_you_sure_clear_trades:uS,symbol_side:dS,qty:hS,total:pS,date_time:fS,cash_amount:gS,operation:vS,add_cash:mS,remove_cash:yS,pending_buy_orders:bS,balance_after_removal:xS,max_safe_removal:wS,insufficient_funds_warning:CS,add:_S,remove:SS,reset_trading_account:kS,reset_account_confirmation:TS,reset_account_success:ES,pending_orders_summary:MS,pending_buy_orders_summary:IS,pending_sell_orders_summary:LS,available_cash:PS,max_cash_removal:AS,order_book:DS,order_book_size:FS,order_book_price:RS,order_book_amount:OS,order_book_bids:NS,order_book_asks:zS,order_book_select_symbol:BS,order_book_loading:$S,order_book_amount_mode:VS,order_book_amount_description:WS,order_book_cumulative_mode:US,order_book_cumulative_description:HS,trade_time:YS,trade_price:XS,trade_quantity:jS,trade_amount:ZS,trade_side:GS,no_trades_available:QS,loading_trades:KS,trades_error:qS,time_format_12h:JS,time_format_24h:ek,latest_trades:tk},nk={"zh-CN":Lx,"en-US":rk},I=(e,t)=>{var r;return((r=nk[t])==null?void 0:r[e])??e};function I0(e,t,r){const n=(e.x-t.x)*Math.cos(r)-(e.y-t.y)*Math.sin(r)+t.x,i=(e.x-t.x)*Math.sin(r)+(e.y-t.y)*Math.cos(r)+t.y;return{x:n,y:i}}function Ig(e,t){if(e.length>1){let r;return e[0].x===e[1].x&&e[0].y!==e[1].y?e[0].y<e[1].y?r={x:e[0].x,y:t.height}:r={x:e[0].x,y:0}:e[0].x>e[1].x?r={x:0,y:gn.getLinearYFromCoordinates(e[0],e[1],{x:0,y:e[0].y})}:r={x:t.width,y:gn.getLinearYFromCoordinates(e[0],e[1],{x:t.width,y:e[0].y})},{coordinates:[e[0],r]}}return[]}function g2(e,t){const r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.sqrt(r*r+n*n)}const ik={name:"arrow",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{if(e.length>1){const t=e[1].x>e[0].x?0:1,r=gn.getLinearSlopeIntercept(e[0],e[1]);let n;r!=null?n=Math.atan(r[0])+Math.PI*t:e[1].y>e[0].y?n=Math.PI/2:n=Math.PI/2*3;const i=I0({x:e[1].x-8,y:e[1].y+4},e[1],n),o=I0({x:e[1].x-8,y:e[1].y-4},e[1],n);return[{type:"line",attrs:{coordinates:e}},{type:"line",ignoreEvent:!0,attrs:{coordinates:[i,e[1],o]}}]}return[]}},ok={name:"circle",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{circle:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>{if(e.length>1){const t=g2(e[0],e[1]);return{type:"circle",attrs:{...e[0],r:t},styles:{style:"stroke_fill"}}}return[]}},ak={name:"rect",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>e.length>1?[{type:"polygon",attrs:{coordinates:[e[0],{x:e[1].x,y:e[0].y},e[1],{x:e[0].x,y:e[1].y}]},styles:{style:"stroke_fill"}}]:[]},sk={name:"parallelogram",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>{if(e.length===2)return[{type:"line",ignoreEvent:!0,attrs:{coordinates:e}}];if(e.length===3){const t={x:e[0].x+(e[2].x-e[1].x),y:e[2].y};return[{type:"polygon",attrs:{coordinates:[e[0],e[1],e[2],t]},styles:{style:"stroke_fill"}}]}return[]},performEventPressedMove:({points:e,performPointIndex:t,performPoint:r})=>{t<2&&(e[0].price=r.price,e[1].price=r.price)},performEventMoveForDrawing:({currentStep:e,points:t,performPoint:r})=>{e===2&&(t[0].price=r.price)}},lk={name:"triangle",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>[{type:"polygon",attrs:{coordinates:e},styles:{style:"stroke_fill"}}]},ck={name:"fibonacciCircle",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{if(e.length>1){const t=Math.abs(e[0].x-e[1].x),r=Math.abs(e[0].y-e[1].y),n=Math.sqrt(t*t+r*r),i=[.236,.382,.5,.618,.786,1],o=[],s=[];return i.forEach(u=>{const d=n*u;o.push({...e[0],r:d}),s.push({x:e[0].x,y:e[0].y+d+6,text:`${(u*100).toFixed(1)}%`})}),[{type:"circle",attrs:o,styles:{style:"stroke"}},{type:"text",ignoreEvent:!0,attrs:s}]}return[]}},uk={name:"fibonacciSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({chart:e,coordinates:t,overlay:r})=>{const n=[],i=[];if(t.length>1){const o=t[1].x>t[0].x?t[0].x:t[1].x,s=[1,.786,.618,.5,.382,.236,0],u=t[0].y-t[1].y,d=r.points,h=d[0].value-d[1].value;s.forEach(p=>{const g=t[1].y+u*p,m=(d[1].value+h*p).toFixed(e.getPrecision().price);n.push({coordinates:[{x:t[0].x,y:g},{x:t[1].x,y:g}]}),i.push({x:o,y:g,text:`${m} (${(p*100).toFixed(1)}%)`,baseline:"bottom"})})}return[{type:"line",attrs:n},{type:"text",ignoreEvent:!0,attrs:i}]}},dk={name:"fibonacciSpiral",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e,bounding:t})=>{if(e.length>1){const r=g2(e[0],e[1])/Math.sqrt(24),n=e[1].x>e[0].x?0:1,i=gn.getLinearSlopeIntercept(e[0],e[1]);let o;i!=null?o=Math.atan(i[0])+Math.PI*n:e[1].y>e[0].y?o=Math.PI/2:o=Math.PI/2*3;const s=I0({x:e[0].x-r,y:e[0].y},e[0],o),u=I0({x:e[0].x-r,y:e[0].y-r},e[0],o),d=[{...s,r,startAngle:o,endAngle:o+Math.PI/2},{...u,r:r*2,startAngle:o+Math.PI/2,endAngle:o+Math.PI}];let h=e[0].x-r,p=e[0].y-r;for(let g=2;g<9;g++){const m=d[g-2].r+d[g-1].r;let b=0;switch(g%4){case 0:{b=o,h-=d[g-2].r;break}case 1:{b=o+Math.PI/2,p-=d[g-2].r;break}case 2:{b=o+Math.PI,h+=d[g-2].r;break}case 3:{b=o+Math.PI/2*3,p+=d[g-2].r;break}}const x=b+Math.PI/2,C=I0({x:h,y:p},e[0],o);d.push({...C,r:m,startAngle:b,endAngle:x})}return[{type:"arc",attrs:d},{type:"line",attrs:Ig(e,t)}]}return[]}},hk={name:"fibonacciSpeedResistanceFan",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e,bounding:t})=>{const r=[];let n=[];const i=[];if(e.length>1){const o=e[1].x>e[0].x?-38:4,s=e[1].y>e[0].y?-2:20,u=e[1].x-e[0].x,d=e[1].y-e[0].y;[1,.75,.618,.5,.382,.25,0].forEach(h=>{const p=e[1].x-u*h,g=e[1].y-d*h;r.push({coordinates:[{x:p,y:e[0].y},{x:p,y:e[1].y}]}),r.push({coordinates:[{x:e[0].x,y:g},{x:e[1].x,y:g}]}),n=n.concat(Ig([e[0],{x:p,y:e[1].y}],t)),n=n.concat(Ig([e[0],{x:e[1].x,y:g}],t)),i.unshift({x:e[0].x+o,y:g+10,text:`${h.toFixed(3)}`}),i.unshift({x:p-18,y:e[0].y+s,text:`${h.toFixed(3)}`})})}return[{type:"line",attrs:r},{type:"line",attrs:n},{type:"text",ignoreEvent:!0,attrs:i}]}},pk={name:"fibonacciExtension",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({chart:e,coordinates:t,overlay:r})=>{const n=[],i=[];if(t.length>2){const o=r.points,s=o[1].value-o[0].value,u=t[1].y-t[0].y,d=[0,.236,.382,.5,.618,.786,1],h=t[2].x>t[1].x?t[1].x:t[2].x;d.forEach(p=>{const g=t[2].y+u*p,m=(o[2].value+s*p).toFixed(e.getPrecision().price);n.push({coordinates:[{x:t[1].x,y:g},{x:t[2].x,y:g}]}),i.push({x:h,y:g,text:`${m} (${(p*100).toFixed(1)}%)`,baseline:"bottom"})})}return[{type:"line",attrs:{coordinates:t},styles:{style:"dashed"}},{type:"line",attrs:n},{type:"text",ignoreEvent:!0,attrs:i}]}},fk={name:"gannBox",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>{if(e.length>1){const t=(e[1].y-e[0].y)/4,r=e[1].x-e[0].x,n=[{coordinates:[e[0],{x:e[1].x,y:e[1].y-t}]},{coordinates:[e[0],{x:e[1].x,y:e[1].y-t*2}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[1].x,y:e[0].y+t}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[1].x,y:e[0].y+t*2}]},{coordinates:[{...e[0]},{x:e[0].x+r*.236,y:e[1].y}]},{coordinates:[{...e[0]},{x:e[0].x+r*.5,y:e[1].y}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[0].x+r*.236,y:e[0].y}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[0].x+r*.5,y:e[0].y}]}],i=[{coordinates:[e[0],e[1]]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[1].x,y:e[0].y}]}];return[{type:"line",attrs:[{coordinates:[e[0],{x:e[1].x,y:e[0].y}]},{coordinates:[{x:e[1].x,y:e[0].y},e[1]]},{coordinates:[e[1],{x:e[0].x,y:e[1].y}]},{coordinates:[{x:e[0].x,y:e[1].y},e[0]]}]},{type:"polygon",ignoreEvent:!0,attrs:{coordinates:[e[0],{x:e[1].x,y:e[0].y},e[1],{x:e[0].x,y:e[1].y}]},styles:{style:"fill"}},{type:"line",attrs:n,styles:{style:"dashed"}},{type:"line",attrs:i}]}return[]}},gk={name:"threeWaves",totalStep:5,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},vk={name:"fiveWaves",totalStep:7,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},mk={name:"eightWaves",totalStep:10,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},yk={name:"anyWaves",totalStep:Number.MAX_SAFE_INTEGER,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},bk={name:"abcd",totalStep:5,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{let t=[],r=[];const n=["A","B","C","D"],i=e.map((o,s)=>({...o,baseline:"bottom",text:`(${n[s]})`}));return e.length>2&&(t=[e[0],e[2]],e.length>3&&(r=[e[1],e[3]])),[{type:"line",attrs:{coordinates:e}},{type:"line",attrs:[{coordinates:t},{coordinates:r}],styles:{style:"dashed"}},{type:"text",ignoreEvent:!0,attrs:i}]}},xk={name:"xabcd",totalStep:6,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e,overlay:t})=>{const r=[],n=[],i=["X","A","B","C","D"],o=e.map((s,u)=>({...s,baseline:"bottom",text:`(${i[u]})`}));return e.length>2&&(r.push({coordinates:[e[0],e[2]]}),n.push({coordinates:[e[0],e[1],e[2]]}),e.length>3&&(r.push({coordinates:[e[1],e[3]]}),e.length>4&&(r.push({coordinates:[e[2],e[4]]}),n.push({coordinates:[e[2],e[3],e[4]]})))),[{type:"line",attrs:{coordinates:e}},{type:"line",attrs:r,styles:{style:"dashed"}},{type:"polygon",ignoreEvent:!0,attrs:n},{type:"text",ignoreEvent:!0,attrs:o}]}},wk={name:"ruler",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{backgroundColor:"rgba(22, 119, 255, 0.25)",tipBackgroundColor:"#1677FF",lineColor:"#1677FF"},extendData:e=>{if(e.length<2)return[];const[t,r]=e,n=r.dataIndex-t.dataIndex,i=r.value-t.value,o=i/t.value*100,s=r.timestamp-t.timestamp,u=Math.floor(s/(1440*60*1e3)),d=Math.floor(s%(1440*60*1e3)/(3600*1e3)),h=Math.floor(s%(3600*1e3)/(60*1e3));let p="";return u>0?(p=`${u} day${u>1?"s":""}`,d>0&&(p+=`, ${d} hour${d>1?"s":""}`)):d>0?(p=`${d} hour${d>1?"s":""}`,h>0&&(p+=`, ${h} minute${h>1?"s":""}`)):p=`${h} minute${h>1?"s":""}`,[`${i.toFixed(2)} (${o.toFixed(2)}%)`,`Bars: ${n}, d: ${p}`]},createPointFigures:({coordinates:e,overlay:t,bounding:r})=>{var n,i,o,s;if(e.length>1){const u=e[0].x<e[1].x,d=e[0].y<e[1].y,h={x:Math.round((e[0].x+e[1].x)/2),y:Math.round((e[0].y+e[1].y)/2)},p=(n=t.styles)==null?void 0:n.backgroundColor,g=(i=t.styles)==null?void 0:i.tipBackgroundColor,m=(o=t.styles)==null?void 0:o.lineColor,b=((s=t.extendData)==null?void 0:s.call(t,t.points))??[],x=[{type:"polygon",attrs:{coordinates:[e[0],{x:e[1].x,y:e[0].y},e[1],{x:e[0].x,y:e[1].y}]},styles:{color:p}},{type:"line",attrs:{coordinates:[{x:e[0].x,y:h.y},{x:e[1].x,y:h.y}]},styles:{color:m}},{type:"line",attrs:{coordinates:[{x:h.x,y:e[0].y},{x:h.x,y:e[1].y}]},styles:{color:m}}];u?x.push({type:"line",attrs:{coordinates:[{x:e[1].x-6,y:h.y-4},{x:e[1].x,y:h.y},{x:e[1].x-6,y:h.y+4}]}}):x.push({type:"line",attrs:{coordinates:[{x:e[1].x+6,y:h.y-4},{x:e[1].x,y:h.y},{x:e[1].x+6,y:h.y+4}]}}),d?x.push({type:"line",attrs:{coordinates:[{x:h.x-4,y:e[1].y-6},{x:h.x,y:e[1].y},{x:h.x+4,y:e[1].y-6}]},styles:{color:m}}):x.push({type:"line",attrs:{coordinates:[{x:h.x-4,y:e[1].y+6},{x:h.x,y:e[1].y},{x:h.x+4,y:e[1].y+6}]},styles:{color:m}});const C=b.length;if(C>0){let _,k=0;const M=C*12+(C-1)*4+16;b.forEach(A=>{k=Math.max(gn.calcTextWidth(A),k)}),k+=24,d?e[1].y+8+M>r.height?_=r.height-M:_=e[1].y+8:e[1].y-8-M<0?_=0:_=e[1].y-8-M,x.push({type:"rect",attrs:{x:h.x-k/2,y:_,width:k,height:M},styles:{borderRadius:4,color:g}});let L=_+8;b.forEach(A=>{x.push({type:"text",attrs:{x:h.x,y:L,text:A,align:"center"},styles:{paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,backgroundColor:"none"}}),L+=16})}return x}return[]}};var Ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ep={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ep.exports;(function(e,t){(function(){var r,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",g=1,m=2,b=4,x=1,C=2,_=1,k=2,M=4,L=8,A=16,P=32,$=64,R=128,z=256,B=512,W=30,X="...",ee=800,U=16,q=1,ie=2,le=3,ae=1/0,te=9007199254740991,ce=17976931348623157e292,ue=NaN,j=4294967295,Z=j-1,pe=j>>>1,Y=[["ary",R],["bind",_],["bindKey",k],["curry",L],["curryRight",A],["flip",B],["partial",P],["partialRight",$],["rearg",z]],fe="[object Arguments]",ve="[object Array]",$e="[object AsyncFunction]",Ie="[object Boolean]",Oe="[object Date]",Ce="[object DOMException]",Le="[object Error]",Ve="[object Function]",je="[object GeneratorFunction]",qe="[object Map]",ht="[object Number]",vt="[object Null]",bt="[object Object]",or="[object Promise]",dr="[object Proxy]",qt="[object RegExp]",It="[object Set]",mr="[object String]",ln="[object Symbol]",yn="[object Undefined]",cr="[object WeakMap]",Dt="[object WeakSet]",Ht="[object ArrayBuffer]",Jt="[object DataView]",Gr="[object Float32Array]",ur="[object Float64Array]",Vr="[object Int8Array]",kt="[object Int16Array]",Ue="[object Int32Array]",Ct="[object Uint8Array]",xt="[object Uint8ClampedArray]",_t="[object Uint16Array]",wt="[object Uint32Array]",Vt=/\b__p \+= '';/g,Yt=/\b(__p \+=) '' \+/g,yr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hr=/&(?:amp|lt|gt|quot|#39);/g,sr=/[&<>"']/g,qn=RegExp(hr.source),Ur=RegExp(sr.source),Hr=/<%-([\s\S]+?)%>/g,Jn=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,Pr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,St=/^\w*$/,Ar=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wr=/[\\^$.*+?()[\]{}|]/g,pr=RegExp(wr.source),tn=/^\s+/,Yr=/\s/,rn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bn=/\{\n\/\* \[wrapped with (.+)\] \*/,Ln=/,? & /,Hi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lo=/[()=,{}\[\]\/\s]/,Xa=/\\(\\)?/g,fi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ca=/\w*$/,Bs=/^[-+]0x[0-9a-f]+$/i,ua=/^0b[01]+$/i,ja=/^\[object .+?Constructor\]$/,Za=/^0o[0-7]+$/i,zl=/^(?:0|[1-9]\d*)$/,Bl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ga=/($^)/,jc=/['\n\r\u2028\u2029\\]/g,br="\\ud800-\\udfff",Zc="\\u0300-\\u036f",$s="\\ufe20-\\ufe2f",$l="\\u20d0-\\u20ff",da=Zc+$s+$l,Gc="\\u2700-\\u27bf",Vs="a-z\\xdf-\\xf6\\xf8-\\xff",Qa="\\xac\\xb1\\xd7\\xf7",Re="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qc="\\u2000-\\u206f",ei=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vl="A-Z\\xc0-\\xd6\\xd8-\\xde",Wl="\\ufe0e\\ufe0f",Ul=Qa+Re+Qc+ei,Oo="[']",Ka="["+br+"]",No="["+Ul+"]",co="["+da+"]",Hl="\\d+",Kc="["+Gc+"]",qa="["+Vs+"]",Ws="[^"+br+Ul+Hl+Gc+Vs+Vl+"]",ha="\\ud83c[\\udffb-\\udfff]",pa="(?:"+co+"|"+ha+")",Yl="[^"+br+"]",fa="(?:\\ud83c[\\udde6-\\uddff]){2}",Xt="[\\ud800-\\udbff][\\udc00-\\udfff]",uo="["+Vl+"]",Us="\\u200d",Ja="(?:"+qa+"|"+Ws+")",Xl="(?:"+uo+"|"+Ws+")",Hs="(?:"+Oo+"(?:d|ll|m|re|s|t|ve))?",Ys="(?:"+Oo+"(?:D|LL|M|RE|S|T|VE))?",es=pa+"?",ga="["+Wl+"]?",Yi="(?:"+Us+"(?:"+[Yl,fa,Xt].join("|")+")"+ga+es+")*",Xi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ji="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zo=ga+es+Yi,va="(?:"+[Kc,fa,Xt].join("|")+")"+zo,Zi="(?:"+[Yl+co+"?",co,fa,Xt,Ka].join("|")+")",qc=RegExp(Oo,"g"),jl=RegExp(co,"g"),ho=RegExp(ha+"(?="+ha+")|"+Zi+zo,"g"),Jc=RegExp([uo+"?"+qa+"+"+Hs+"(?="+[No,uo,"$"].join("|")+")",Xl+"+"+Ys+"(?="+[No,uo+Ja,"$"].join("|")+")",uo+"?"+Ja+"+"+Hs,uo+"+"+Ys,ji,Xi,Hl,va].join("|"),"g"),Zl=RegExp("["+Us+br+da+Wl+"]"),ts=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eu=-1,er={};er[Gr]=er[ur]=er[Vr]=er[kt]=er[Ue]=er[Ct]=er[xt]=er[_t]=er[wt]=!0,er[fe]=er[ve]=er[Ht]=er[Ie]=er[Jt]=er[Oe]=er[Le]=er[Ve]=er[qe]=er[ht]=er[bt]=er[qt]=er[It]=er[mr]=er[cr]=!1;var Zt={};Zt[fe]=Zt[ve]=Zt[Ht]=Zt[Jt]=Zt[Ie]=Zt[Oe]=Zt[Gr]=Zt[ur]=Zt[Vr]=Zt[kt]=Zt[Ue]=Zt[qe]=Zt[ht]=Zt[bt]=Zt[qt]=Zt[It]=Zt[mr]=Zt[ln]=Zt[Ct]=Zt[xt]=Zt[_t]=Zt[wt]=!0,Zt[Le]=Zt[Ve]=Zt[cr]=!1;var Xs={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},tu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ef={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kd=parseFloat,ru=parseInt,nu=typeof Ps=="object"&&Ps&&Ps.Object===Object&&Ps,V0=typeof self=="object"&&self&&self.Object===Object&&self,Dr=nu||V0||Function("return this")(),Ql=t&&!t.nodeType&&t,po=Ql&&!0&&e&&!e.nodeType&&e,qd=po&&po.exports===Ql,js=qd&&nu.process,Vn=function(){try{var se=po&&po.require&&po.require("util").types;return se||js&&js.binding&&js.binding("util")}catch{}}(),Jd=Vn&&Vn.isArrayBuffer,ti=Vn&&Vn.isDate,rs=Vn&&Vn.isMap,iu=Vn&&Vn.isRegExp,Zs=Vn&&Vn.isSet,W0=Vn&&Vn.isTypedArray;function Wn(se,_e,me){switch(me.length){case 0:return se.call(_e);case 1:return se.call(_e,me[0]);case 2:return se.call(_e,me[0],me[1]);case 3:return se.call(_e,me[0],me[1],me[2])}return se.apply(_e,me)}function eh(se,_e,me,Ye){for(var yt=-1,tr=se==null?0:se.length;++yt<tr;){var Qr=se[yt];_e(Ye,Qr,me(Qr),se)}return Ye}function Pn(se,_e){for(var me=-1,Ye=se==null?0:se.length;++me<Ye&&_e(se[me],me,se)!==!1;);return se}function ou(se,_e){for(var me=se==null?0:se.length;me--&&_e(se[me],me,se)!==!1;);return se}function th(se,_e){for(var me=-1,Ye=se==null?0:se.length;++me<Ye;)if(!_e(se[me],me,se))return!1;return!0}function ma(se,_e){for(var me=-1,Ye=se==null?0:se.length,yt=0,tr=[];++me<Ye;){var Qr=se[me];_e(Qr,me,se)&&(tr[yt++]=Qr)}return tr}function au(se,_e){var me=se==null?0:se.length;return!!me&&Gs(se,_e,0)>-1}function rh(se,_e,me){for(var Ye=-1,yt=se==null?0:se.length;++Ye<yt;)if(me(_e,se[Ye]))return!0;return!1}function Cr(se,_e){for(var me=-1,Ye=se==null?0:se.length,yt=Array(Ye);++me<Ye;)yt[me]=_e(se[me],me,se);return yt}function ya(se,_e){for(var me=-1,Ye=_e.length,yt=se.length;++me<Ye;)se[yt+me]=_e[me];return se}function nh(se,_e,me,Ye){var yt=-1,tr=se==null?0:se.length;for(Ye&&tr&&(me=se[++yt]);++yt<tr;)me=_e(me,se[yt],yt,se);return me}function rf(se,_e,me,Ye){var yt=se==null?0:se.length;for(Ye&&yt&&(me=se[--yt]);yt--;)me=_e(me,se[yt],yt,se);return me}function ih(se,_e){for(var me=-1,Ye=se==null?0:se.length;++me<Ye;)if(_e(se[me],me,se))return!0;return!1}var nf=ah("length");function U0(se){return se.split("")}function of(se){return se.match(Hi)||[]}function H0(se,_e,me){var Ye;return me(se,function(yt,tr,Qr){if(_e(yt,tr,Qr))return Ye=tr,!1}),Ye}function su(se,_e,me,Ye){for(var yt=se.length,tr=me+(Ye?1:-1);Ye?tr--:++tr<yt;)if(_e(se[tr],tr,se))return tr;return-1}function Gs(se,_e,me){return _e===_e?uu(se,_e,me):su(se,Y0,me)}function oh(se,_e,me,Ye){for(var yt=me-1,tr=se.length;++yt<tr;)if(Ye(se[yt],_e))return yt;return-1}function Y0(se){return se!==se}function X0(se,_e){var me=se==null?0:se.length;return me?sh(se,_e)/me:ue}function ah(se){return function(_e){return _e==null?r:_e[se]}}function lu(se){return function(_e){return se==null?r:se[_e]}}function j0(se,_e,me,Ye,yt){return yt(se,function(tr,Qr,fr){me=Ye?(Ye=!1,tr):_e(me,tr,Qr,fr)}),me}function af(se,_e){var me=se.length;for(se.sort(_e);me--;)se[me]=se[me].value;return se}function sh(se,_e){for(var me,Ye=-1,yt=se.length;++Ye<yt;){var tr=_e(se[Ye]);tr!==r&&(me=me===r?tr:me+tr)}return me}function lh(se,_e){for(var me=-1,Ye=Array(se);++me<se;)Ye[me]=_e(me);return Ye}function sf(se,_e){return Cr(_e,function(me){return[me,se[me]]})}function Z0(se){return se&&se.slice(0,du(se)+1).replace(tn,"")}function gi(se){return function(_e){return se(_e)}}function Kl(se,_e){return Cr(_e,function(me){return se[me]})}function Bo(se,_e){return se.has(_e)}function G0(se,_e){for(var me=-1,Ye=se.length;++me<Ye&&Gs(_e,se[me],0)>-1;);return me}function ch(se,_e){for(var me=se.length;me--&&Gs(_e,se[me],0)>-1;);return me}function Q0(se,_e){for(var me=se.length,Ye=0;me--;)se[me]===_e&&++Ye;return Ye}var K0=lu(Xs),q0=lu(tu);function J0(se){return"\\"+tf[se]}function Qs(se,_e){return se==null?r:se[_e]}function Ks(se){return Zl.test(se)}function lf(se){return ts.test(se)}function cf(se){for(var _e,me=[];!(_e=se.next()).done;)me.push(_e.value);return me}function cu(se){var _e=-1,me=Array(se.size);return se.forEach(function(Ye,yt){me[++_e]=[yt,Ye]}),me}function uh(se,_e){return function(me){return se(_e(me))}}function Ti(se,_e){for(var me=-1,Ye=se.length,yt=0,tr=[];++me<Ye;){var Qr=se[me];(Qr===_e||Qr===p)&&(se[me]=p,tr[yt++]=me)}return tr}function ba(se){var _e=-1,me=Array(se.size);return se.forEach(function(Ye){me[++_e]=Ye}),me}function uf(se){var _e=-1,me=Array(se.size);return se.forEach(function(Ye){me[++_e]=[Ye,Ye]}),me}function uu(se,_e,me){for(var Ye=me-1,yt=se.length;++Ye<yt;)if(se[Ye]===_e)return Ye;return-1}function df(se,_e,me){for(var Ye=me+1;Ye--;)if(se[Ye]===_e)return Ye;return Ye}function ns(se){return Ks(se)?t1(se):nf(se)}function vi(se){return Ks(se)?r1(se):U0(se)}function du(se){for(var _e=se.length;_e--&&Yr.test(se.charAt(_e)););return _e}var e1=lu(ef);function t1(se){for(var _e=ho.lastIndex=0;ho.test(se);)++_e;return _e}function r1(se){return se.match(ho)||[]}function hf(se){return se.match(Jc)||[]}var pf=function se(_e){_e=_e==null?Dr:qs.defaults(Dr.Object(),_e,qs.pick(Dr,Gl));var me=_e.Array,Ye=_e.Date,yt=_e.Error,tr=_e.Function,Qr=_e.Math,fr=_e.Object,ql=_e.RegExp,ff=_e.String,Ei=_e.TypeError,$o=me.prototype,dh=tr.prototype,fo=fr.prototype,Js=_e["__core-js_shared__"],Jl=dh.toString,rr=fo.hasOwnProperty,el=0,hu=function(){var c=/[^.]+$/.exec(Js&&Js.keys&&Js.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),ec=fo.toString,pu=Jl.call(fr),n1=Dr._,i1=ql("^"+Jl.call(rr).replace(wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tc=qd?_e.Buffer:r,Vo=_e.Symbol,rc=_e.Uint8Array,hh=tc?tc.allocUnsafe:r,Gi=uh(fr.getPrototypeOf,fr),fu=fr.create,gu=fo.propertyIsEnumerable,vu=$o.splice,o1=Vo?Vo.isConcatSpreadable:r,Wo=Vo?Vo.iterator:r,is=Vo?Vo.toStringTag:r,nc=function(){try{var c=La(fr,"defineProperty");return c({},"",{}),c}catch{}}(),a1=_e.clearTimeout!==Dr.clearTimeout&&_e.clearTimeout,Tr=Ye&&Ye.now!==Dr.Date.now&&Ye.now,ph=_e.setTimeout!==Dr.setTimeout&&_e.setTimeout,os=Qr.ceil,xa=Qr.floor,mu=fr.getOwnPropertySymbols,fh=tc?tc.isBuffer:r,tl=_e.isFinite,yu=$o.join,rl=uh(fr.keys,fr),Kr=Qr.max,An=Qr.min,gf=Ye.now,s1=_e.parseInt,ic=Qr.random,bu=$o.reverse,oc=La(_e,"DataView"),as=La(_e,"Map"),ac=La(_e,"Promise"),wa=La(_e,"Set"),sc=La(_e,"WeakMap"),nl=La(fr,"create"),xu=sc&&new sc,il={},gh=Pa(oc),Ca=Pa(as),l1=Pa(ac),ol=Pa(wa),go=Pa(sc),_a=Vo?Vo.prototype:r,mi=_a?_a.valueOf:r,wu=_a?_a.toString:r;function N(c){if(Jr(c)&&!Et(c)&&!(c instanceof Tt)){if(c instanceof Dn)return c;if(rr.call(c,"__wrapped__"))return O1(c)}return new Dn(c)}var al=function(){function c(){}return function(f){if(!Zr(f))return{};if(fu)return fu(f);c.prototype=f;var w=new c;return c.prototype=r,w}}();function vo(){}function Dn(c,f){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=r}N.templateSettings={escape:Hr,evaluate:Jn,interpolate:Lt,variable:"",imports:{_:N}},N.prototype=vo.prototype,N.prototype.constructor=N,Dn.prototype=al(vo.prototype),Dn.prototype.constructor=Dn;function Tt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function Cu(){var c=new Tt(this.__wrapped__);return c.__actions__=Hn(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Hn(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Hn(this.__views__),c}function vh(){if(this.__filtered__){var c=new Tt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function sl(){var c=this.__wrapped__.value(),f=this.__dir__,w=Et(c),E=f<0,D=w?c.length:0,V=Hh(0,D,this.__views__),J=V.start,ne=V.end,de=ne-J,ke=E?ne:J-1,Te=this.__iteratees__,Pe=Te.length,He=0,it=An(de,this.__takeCount__);if(!w||!E&&D==de&&it==de)return gl(c,this.__actions__);var ft=[];e:for(;de--&&He<it;){ke+=f;for(var Ot=-1,gt=c[ke];++Ot<Pe;){var Wt=Te[Ot],Qt=Wt.iteratee,oo=Wt.type,Ci=Qt(gt);if(oo==ie)gt=Ci;else if(!Ci){if(oo==q)continue e;break e}}ft[He++]=gt}return ft}Tt.prototype=al(vo.prototype),Tt.prototype.constructor=Tt;function ri(c){var f=-1,w=c==null?0:c.length;for(this.clear();++f<w;){var E=c[f];this.set(E[0],E[1])}}function Er(){this.__data__=nl?nl(null):{},this.size=0}function _r(c){var f=this.has(c)&&delete this.__data__[c];return this.size-=f?1:0,f}function Sa(c){var f=this.__data__;if(nl){var w=f[c];return w===d?r:w}return rr.call(f,c)?f[c]:r}function Fn(c){var f=this.__data__;return nl?f[c]!==r:rr.call(f,c)}function ni(c,f){var w=this.__data__;return this.size+=this.has(c)?0:1,w[c]=nl&&f===r?d:f,this}ri.prototype.clear=Er,ri.prototype.delete=_r,ri.prototype.get=Sa,ri.prototype.has=Fn,ri.prototype.set=ni;function Un(c){var f=-1,w=c==null?0:c.length;for(this.clear();++f<w;){var E=c[f];this.set(E[0],E[1])}}function ll(){this.__data__=[],this.size=0}function ii(c){var f=this.__data__,w=On(f,c);if(w<0)return!1;var E=f.length-1;return w==E?f.pop():vu.call(f,w,1),--this.size,!0}function _u(c){var f=this.__data__,w=On(f,c);return w<0?r:f[w][1]}function c1(c){return On(this.__data__,c)>-1}function u1(c,f){var w=this.__data__,E=On(w,c);return E<0?(++this.size,w.push([c,f])):w[E][1]=f,this}Un.prototype.clear=ll,Un.prototype.delete=ii,Un.prototype.get=_u,Un.prototype.has=c1,Un.prototype.set=u1;function Mi(c){var f=-1,w=c==null?0:c.length;for(this.clear();++f<w;){var E=c[f];this.set(E[0],E[1])}}function d1(){this.size=0,this.__data__={hash:new ri,map:new(as||Un),string:new ri}}function Uo(c){var f=_c(this,c).delete(c);return this.size-=f?1:0,f}function Su(c){return _c(this,c).get(c)}function mh(c){return _c(this,c).has(c)}function h1(c,f){var w=_c(this,c),E=w.size;return w.set(c,f),this.size+=w.size==E?0:1,this}Mi.prototype.clear=d1,Mi.prototype.delete=Uo,Mi.prototype.get=Su,Mi.prototype.has=mh,Mi.prototype.set=h1;function ss(c){var f=-1,w=c==null?0:c.length;for(this.__data__=new Mi;++f<w;)this.add(c[f])}function ka(c){return this.__data__.set(c,d),this}function cl(c){return this.__data__.has(c)}ss.prototype.add=ss.prototype.push=ka,ss.prototype.has=cl;function Rn(c){var f=this.__data__=new Un(c);this.size=f.size}function ku(){this.__data__=new Un,this.size=0}function Tu(c){var f=this.__data__,w=f.delete(c);return this.size=f.size,w}function Ii(c){return this.__data__.get(c)}function Li(c){return this.__data__.has(c)}function ls(c,f){var w=this.__data__;if(w instanceof Un){var E=w.__data__;if(!as||E.length<i-1)return E.push([c,f]),this.size=++w.size,this;w=this.__data__=new Mi(E)}return w.set(c,f),this.size=w.size,this}Rn.prototype.clear=ku,Rn.prototype.delete=Tu,Rn.prototype.get=Ii,Rn.prototype.has=Li,Rn.prototype.set=ls;function mo(c,f){var w=Et(c),E=!w&&Rc(c),D=!w&&!E&&kl(c),V=!w&&!E&&!D&&gd(c),J=w||E||D||V,ne=J?lh(c.length,ff):[],de=ne.length;for(var ke in c)(f||rr.call(c,ke))&&!(J&&(ke=="length"||D&&(ke=="offset"||ke=="parent")||V&&(ke=="buffer"||ke=="byteLength"||ke=="byteOffset")||Rr(ke,de)))&&ne.push(ke);return ne}function yo(c){var f=c.length;return f?c[pl(0,f-1)]:r}function cs(c,f){return qu(Hn(c),Ho(f,0,c.length))}function p1(c){return qu(Hn(c))}function lc(c,f,w){(w!==r&&!ea(c[f],w)||w===r&&!(f in c))&&bo(c,f,w)}function us(c,f,w){var E=c[f];(!(rr.call(c,f)&&ea(E,w))||w===r&&!(f in c))&&bo(c,f,w)}function On(c,f){for(var w=c.length;w--;)if(ea(c[w][0],f))return w;return-1}function yi(c,f,w,E){return wo(c,function(D,V,J){f(E,D,w(D),J)}),E}function Mr(c,f){return c&&Ki(f,Bn(f),c)}function Qi(c,f){return c&&Ki(f,Bi(f),c)}function bo(c,f,w){f=="__proto__"&&nc?nc(c,f,{configurable:!0,enumerable:!0,value:w,writable:!0}):c[f]=w}function Eu(c,f){for(var w=-1,E=f.length,D=me(E),V=c==null;++w<E;)D[w]=V?r:Bf(c,f[w]);return D}function Ho(c,f,w){return c===c&&(w!==r&&(c=c<=w?c:w),f!==r&&(c=c>=f?c:f)),c}function oi(c,f,w,E,D,V){var J,ne=f&g,de=f&m,ke=f&b;if(w&&(J=D?w(c,E,D,V):w(c)),J!==r)return J;if(!Zr(c))return c;var Te=Et(c);if(Te){if(J=kc(c),!ne)return Hn(c,J)}else{var Pe=Cn(c),He=Pe==Ve||Pe==je;if(kl(c))return Ah(c,ne);if(Pe==bt||Pe==fe||He&&!D){if(J=de||He?{}:_n(c),!ne)return de?mf(c,Qi(J,c)):$u(c,Mr(J,c))}else{if(!Zt[Pe])return D?c:{};J=yf(c,Pe,ne)}}V||(V=new Rn);var it=V.get(c);if(it)return it;V.set(c,J),Nv(c)?c.forEach(function(gt){J.add(oi(gt,f,w,gt,c,V))}):Rv(c)&&c.forEach(function(gt,Wt){J.set(Wt,oi(gt,f,w,Wt,c,V))});var ft=ke?de?Cc:wc:de?Bi:Bn,Ot=Te?r:ft(c);return Pn(Ot||c,function(gt,Wt){Ot&&(Wt=gt,gt=c[Wt]),us(J,Wt,oi(gt,f,w,Wt,c,V))}),J}function f1(c){var f=Bn(c);return function(w){return cc(w,c,f)}}function cc(c,f,w){var E=w.length;if(c==null)return!E;for(c=fr(c);E--;){var D=w[E],V=f[D],J=c[D];if(J===r&&!(D in c)||!V(J))return!1}return!0}function yh(c,f,w){if(typeof c!="function")throw new Ei(s);return Cl(function(){c.apply(r,w)},f)}function xo(c,f,w,E){var D=-1,V=au,J=!0,ne=c.length,de=[],ke=f.length;if(!ne)return de;w&&(f=Cr(f,gi(w))),E?(V=rh,J=!1):f.length>=i&&(V=Bo,J=!1,f=new ss(f));e:for(;++D<ne;){var Te=c[D],Pe=w==null?Te:w(Te);if(Te=E||Te!==0?Te:0,J&&Pe===Pe){for(var He=ke;He--;)if(f[He]===Pe)continue e;de.push(Te)}else V(f,Pe,E)||de.push(Te)}return de}var wo=Ri(bi),g1=Ri(Ta,!0);function uc(c,f){var w=!0;return wo(c,function(E,D,V){return w=!!f(E,D,V),w}),w}function ds(c,f,w){for(var E=-1,D=c.length;++E<D;){var V=c[E],J=f(V);if(J!=null&&(ne===r?J===J&&!io(J):w(J,ne)))var ne=J,de=V}return de}function v1(c,f,w,E){var D=c.length;for(w=Rt(w),w<0&&(w=-w>D?0:D+w),E=E===r||E>D?D:Rt(E),E<0&&(E+=D),E=w>E?0:Bv(E);w<E;)c[w++]=f;return c}function bh(c,f){var w=[];return wo(c,function(E,D,V){f(E,D,V)&&w.push(E)}),w}function Wr(c,f,w,E,D){var V=-1,J=c.length;for(w||(w=Gu),D||(D=[]);++V<J;){var ne=c[V];f>0&&w(ne)?f>1?Wr(ne,f-1,w,E,D):ya(D,ne):E||(D[D.length]=ne)}return D}var Mu=Wu(),dc=Wu(!0);function bi(c,f){return c&&Mu(c,f,Bn)}function Ta(c,f){return c&&dc(c,f,Bn)}function ul(c,f){return ma(f,function(w){return Ss(c[w])})}function Yo(c,f){f=So(f,c);for(var w=0,E=f.length;c!=null&&w<E;)c=c[to(f[w++])];return w&&w==E?c:r}function Iu(c,f,w){var E=f(c);return Et(c)?E:ya(E,w(c))}function xn(c){return c==null?c===r?yn:vt:is&&is in fr(c)?Zu(c):Xh(c)}function Ea(c,f){return c>f}function Pi(c,f){return c!=null&&rr.call(c,f)}function hs(c,f){return c!=null&&f in fr(c)}function xh(c,f,w){return c>=An(f,w)&&c<Kr(f,w)}function Lu(c,f,w){for(var E=w?rh:au,D=c[0].length,V=c.length,J=V,ne=me(V),de=1/0,ke=[];J--;){var Te=c[J];J&&f&&(Te=Cr(Te,gi(f))),de=An(Te.length,de),ne[J]=!w&&(f||D>=120&&Te.length>=120)?new ss(J&&Te):r}Te=c[0];var Pe=-1,He=ne[0];e:for(;++Pe<D&&ke.length<de;){var it=Te[Pe],ft=f?f(it):it;if(it=w||it!==0?it:0,!(He?Bo(He,ft):E(ke,ft,w))){for(J=V;--J;){var Ot=ne[J];if(!(Ot?Bo(Ot,ft):E(c[J],ft,w)))continue e}He&&He.push(ft),ke.push(it)}}return ke}function Xo(c,f,w,E){return bi(c,function(D,V,J){f(E,w(D),V,J)}),E}function Ai(c,f,w){f=So(f,c),c=cn(c,f);var E=c==null?c:c[to(jn(f))];return E==null?r:Wn(E,c,w)}function Pu(c){return Jr(c)&&xn(c)==fe}function m1(c){return Jr(c)&&xn(c)==Ht}function jo(c){return Jr(c)&&xn(c)==Oe}function Di(c,f,w,E,D){return c===f?!0:c==null||f==null||!Jr(c)&&!Jr(f)?c!==c&&f!==f:Au(c,f,w,E,Di,D)}function Au(c,f,w,E,D,V){var J=Et(c),ne=Et(f),de=J?ve:Cn(c),ke=ne?ve:Cn(f);de=de==fe?bt:de,ke=ke==fe?bt:ke;var Te=de==bt,Pe=ke==bt,He=de==ke;if(He&&kl(c)){if(!kl(f))return!1;J=!0,Te=!1}if(He&&!Te)return V||(V=new Rn),J||gd(c)?Wh(c,f,w,E,D,V):Uh(c,f,de,w,E,D,V);if(!(w&x)){var it=Te&&rr.call(c,"__wrapped__"),ft=Pe&&rr.call(f,"__wrapped__");if(it||ft){var Ot=it?c.value():c,gt=ft?f.value():f;return V||(V=new Rn),D(Ot,gt,w,E,V)}}return He?(V||(V=new Rn),M1(c,f,w,E,D,V)):!1}function y1(c){return Jr(c)&&Cn(c)==qe}function dl(c,f,w,E){var D=w.length,V=D,J=!E;if(c==null)return!V;for(c=fr(c);D--;){var ne=w[D];if(J&&ne[2]?ne[1]!==c[ne[0]]:!(ne[0]in c))return!1}for(;++D<V;){ne=w[D];var de=ne[0],ke=c[de],Te=ne[1];if(J&&ne[2]){if(ke===r&&!(de in c))return!1}else{var Pe=new Rn;if(E)var He=E(ke,Te,de,c,f,Pe);if(!(He===r?Di(Te,ke,x|C,E,Pe):He))return!1}}return!0}function wh(c){if(!Zr(c)||P1(c))return!1;var f=Ss(c)?i1:ja;return f.test(Pa(c))}function hc(c){return Jr(c)&&xn(c)==qt}function Co(c){return Jr(c)&&Cn(c)==It}function pc(c){return Jr(c)&&Q1(c.length)&&!!er[xn(c)]}function hl(c){return typeof c=="function"?c:c==null?$i:typeof c=="object"?Et(c)?Fr(c[0],c[1]):Du(c):Qv(c)}function Zo(c){if(!qo(c))return rl(c);var f=[];for(var w in fr(c))rr.call(c,w)&&w!="constructor"&&f.push(w);return f}function Ch(c){if(!Zr(c))return F1(c);var f=qo(c),w=[];for(var E in c)E=="constructor"&&(f||!rr.call(c,E))||w.push(E);return w}function Ma(c,f){return c<f}function _h(c,f){var w=-1,E=zi(c)?me(c.length):[];return wo(c,function(D,V,J){E[++w]=f(D,V,J)}),E}function Du(c){var f=Sc(c);return f.length==1&&f[0][2]?Qu(f[0][0],f[0][1]):function(w){return w===c||dl(w,c,f)}}function Fr(c,f){return Qe(c)&&Ec(f)?Qu(to(c),f):function(w){var E=Bf(w,c);return E===r&&E===f?$f(w,c):Di(f,E,x|C)}}function ps(c,f,w,E,D){c!==f&&Mu(f,function(V,J){if(D||(D=new Rn),Zr(V))Sh(c,f,J,w,ps,E,D);else{var ne=E?E(Eo(c,J),V,J+"",c,f,D):r;ne===r&&(ne=V),lc(c,J,ne)}},Bi)}function Sh(c,f,w,E,D,V,J){var ne=Eo(c,w),de=Eo(f,w),ke=J.get(de);if(ke){lc(c,w,ke);return}var Te=V?V(ne,de,w+"",c,f,J):r,Pe=Te===r;if(Pe){var He=Et(de),it=!He&&kl(de),ft=!He&&!it&&gd(de);Te=de,He||it||ft?Et(ne)?Te=ne:an(ne)?Te=Hn(ne):it?(Pe=!1,Te=Ah(de,!0)):ft?(Pe=!1,Te=_1(de,!0)):Te=[]:u0(de)||Rc(de)?(Te=ne,Rc(ne)?Te=$v(ne):(!Zr(ne)||Ss(ne))&&(Te=_n(de))):Pe=!1}Pe&&(J.set(de,Te),D(Te,de,E,V,J),J.delete(de)),lc(c,w,Te)}function Fu(c,f){var w=c.length;if(w)return f+=f<0?w:0,Rr(f,w)?c[f]:r}function fc(c,f,w){f.length?f=Cr(f,function(V){return Et(V)?function(J){return Yo(J,V.length===1?V[0]:V)}:V}):f=[$i];var E=-1;f=Cr(f,gi(ut()));var D=_h(c,function(V,J,ne){var de=Cr(f,function(ke){return ke(V)});return{criteria:de,index:++E,value:V}});return af(D,function(V,J){return vf(V,J,w)})}function kh(c,f){return Ia(c,f,function(w,E){return $f(c,E)})}function Ia(c,f,w){for(var E=-1,D=f.length,V={};++E<D;){var J=f[E],ne=Yo(c,J);w(ne,J)&&gs(V,So(J,c),ne)}return V}function Nr(c){return function(f){return Yo(f,c)}}function Xr(c,f,w,E){var D=E?oh:Gs,V=-1,J=f.length,ne=c;for(c===f&&(f=Hn(f)),w&&(ne=Cr(c,gi(w)));++V<J;)for(var de=0,ke=f[V],Te=w?w(ke):ke;(de=D(ne,Te,de,E))>-1;)ne!==c&&vu.call(ne,de,1),vu.call(c,de,1);return c}function nn(c,f){for(var w=c?f.length:0,E=w-1;w--;){var D=f[w];if(w==E||D!==V){var V=D;Rr(D)?vu.call(c,D,1):Nu(c,D)}}return c}function pl(c,f){return c+xa(ic()*(f-c+1))}function gc(c,f,w,E){for(var D=-1,V=Kr(os((f-c)/(w||1)),0),J=me(V);V--;)J[E?V:++D]=c,c+=w;return J}function fs(c,f){var w="";if(!c||f<1||f>te)return w;do f%2&&(w+=c),f=xa(f/2),f&&(c+=c);while(f);return w}function Ft(c,f){return xi(Ku(c,f,$i),c+"")}function Nn(c){return yo(vd(c))}function Th(c,f){var w=vd(c);return qu(w,Ho(f,0,w.length))}function gs(c,f,w,E){if(!Zr(c))return c;f=So(f,c);for(var D=-1,V=f.length,J=V-1,ne=c;ne!=null&&++D<V;){var de=to(f[D]),ke=w;if(de==="__proto__"||de==="constructor"||de==="prototype")return c;if(D!=J){var Te=ne[de];ke=E?E(Te,de,ne):r,ke===r&&(ke=Zr(Te)?Te:Rr(f[D+1])?[]:{})}us(ne,de,ke),ne=ne[de]}return c}var Ru=xu?function(c,f){return xu.set(c,f),c}:$i,_o=nc?function(c,f){return nc(c,"toString",{configurable:!0,enumerable:!1,value:Wf(f),writable:!0})}:$i;function Fi(c){return qu(vd(c))}function zn(c,f,w){var E=-1,D=c.length;f<0&&(f=-f>D?0:D+f),w=w>D?D:w,w<0&&(w+=D),D=f>w?0:w-f>>>0,f>>>=0;for(var V=me(D);++E<D;)V[E]=c[E+f];return V}function Eh(c,f){var w;return wo(c,function(E,D,V){return w=f(E,D,V),!w}),!!w}function fl(c,f,w){var E=0,D=c==null?E:c.length;if(typeof f=="number"&&f===f&&D<=pe){for(;E<D;){var V=E+D>>>1,J=c[V];J!==null&&!io(J)&&(w?J<=f:J<f)?E=V+1:D=V}return D}return Ou(c,f,$i,w)}function Ou(c,f,w,E){var D=0,V=c==null?0:c.length;if(V===0)return 0;f=w(f);for(var J=f!==f,ne=f===null,de=io(f),ke=f===r;D<V;){var Te=xa((D+V)/2),Pe=w(c[Te]),He=Pe!==r,it=Pe===null,ft=Pe===Pe,Ot=io(Pe);if(J)var gt=E||ft;else ke?gt=ft&&(E||He):ne?gt=ft&&He&&(E||!it):de?gt=ft&&He&&!it&&(E||!Ot):it||Ot?gt=!1:gt=E?Pe<=f:Pe<f;gt?D=Te+1:V=Te}return An(V,Z)}function Mh(c,f){for(var w=-1,E=c.length,D=0,V=[];++w<E;){var J=c[w],ne=f?f(J):J;if(!w||!ea(ne,de)){var de=ne;V[D++]=J===0?0:J}}return V}function Ih(c){return typeof c=="number"?c:io(c)?ue:+c}function ai(c){if(typeof c=="string")return c;if(Et(c))return Cr(c,ai)+"";if(io(c))return wu?wu.call(c):"";var f=c+"";return f=="0"&&1/c==-ae?"-0":f}function Go(c,f,w){var E=-1,D=au,V=c.length,J=!0,ne=[],de=ne;if(w)J=!1,D=rh;else if(V>=i){var ke=f?null:E1(c);if(ke)return ba(ke);J=!1,D=Bo,de=new ss}else de=f?[]:ne;e:for(;++E<V;){var Te=c[E],Pe=f?f(Te):Te;if(Te=w||Te!==0?Te:0,J&&Pe===Pe){for(var He=de.length;He--;)if(de[He]===Pe)continue e;f&&de.push(Pe),ne.push(Te)}else D(de,Pe,w)||(de!==ne&&de.push(Pe),ne.push(Te))}return ne}function Nu(c,f){return f=So(f,c),c=cn(c,f),c==null||delete c[to(jn(f))]}function Lh(c,f,w,E){return gs(c,f,w(Yo(c,f)),E)}function vc(c,f,w,E){for(var D=c.length,V=E?D:-1;(E?V--:++V<D)&&f(c[V],V,c););return w?zn(c,E?0:V,E?V+1:D):zn(c,E?V+1:0,E?D:V)}function gl(c,f){var w=c;return w instanceof Tt&&(w=w.value()),nh(f,function(E,D){return D.func.apply(D.thisArg,ya([E],D.args))},w)}function zu(c,f,w){var E=c.length;if(E<2)return E?Go(c[0]):[];for(var D=-1,V=me(E);++D<E;)for(var J=c[D],ne=-1;++ne<E;)ne!=D&&(V[D]=xo(V[D]||J,c[ne],f,w));return Go(Wr(V,1),f,w)}function mc(c,f,w){for(var E=-1,D=c.length,V=f.length,J={};++E<D;){var ne=E<V?f[E]:r;w(J,c[E],ne)}return J}function vl(c){return an(c)?c:[]}function Bu(c){return typeof c=="function"?c:$i}function So(c,f){return Et(c)?c:Qe(c,f)?[c]:Gh(gr(c))}var b1=Ft;function Qo(c,f,w){var E=c.length;return w=w===r?E:w,!f&&w>=E?c:zn(c,f,w)}var Ph=a1||function(c){return Dr.clearTimeout(c)};function Ah(c,f){if(f)return c.slice();var w=c.length,E=hh?hh(w):new c.constructor(w);return c.copy(E),E}function yc(c){var f=new c.constructor(c.byteLength);return new rc(f).set(new rc(c)),f}function x1(c,f){var w=f?yc(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.byteLength)}function w1(c){var f=new c.constructor(c.source,ca.exec(c));return f.lastIndex=c.lastIndex,f}function C1(c){return mi?fr(mi.call(c)):{}}function _1(c,f){var w=f?yc(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.length)}function Dh(c,f){if(c!==f){var w=c!==r,E=c===null,D=c===c,V=io(c),J=f!==r,ne=f===null,de=f===f,ke=io(f);if(!ne&&!ke&&!V&&c>f||V&&J&&de&&!ne&&!ke||E&&J&&de||!w&&de||!D)return 1;if(!E&&!V&&!ke&&c<f||ke&&w&&D&&!E&&!V||ne&&w&&D||!J&&D||!de)return-1}return 0}function vf(c,f,w){for(var E=-1,D=c.criteria,V=f.criteria,J=D.length,ne=w.length;++E<J;){var de=Dh(D[E],V[E]);if(de){if(E>=ne)return de;var ke=w[E];return de*(ke=="desc"?-1:1)}}return c.index-f.index}function S1(c,f,w,E){for(var D=-1,V=c.length,J=w.length,ne=-1,de=f.length,ke=Kr(V-J,0),Te=me(de+ke),Pe=!E;++ne<de;)Te[ne]=f[ne];for(;++D<J;)(Pe||D<V)&&(Te[w[D]]=c[D]);for(;ke--;)Te[ne++]=c[D++];return Te}function Fh(c,f,w,E){for(var D=-1,V=c.length,J=-1,ne=w.length,de=-1,ke=f.length,Te=Kr(V-ne,0),Pe=me(Te+ke),He=!E;++D<Te;)Pe[D]=c[D];for(var it=D;++de<ke;)Pe[it+de]=f[de];for(;++J<ne;)(He||D<V)&&(Pe[it+w[J]]=c[D++]);return Pe}function Hn(c,f){var w=-1,E=c.length;for(f||(f=me(E));++w<E;)f[w]=c[w];return f}function Ki(c,f,w,E){var D=!w;w||(w={});for(var V=-1,J=f.length;++V<J;){var ne=f[V],de=E?E(w[ne],c[ne],ne,w,c):r;de===r&&(de=c[ne]),D?bo(w,ne,de):us(w,ne,de)}return w}function $u(c,f){return Ki(c,qi(c),f)}function mf(c,f){return Ki(c,I1(c),f)}function Vu(c,f){return function(w,E){var D=Et(w)?eh:yi,V=f?f():{};return D(w,c,ut(E,2),V)}}function ml(c){return Ft(function(f,w){var E=-1,D=w.length,V=D>1?w[D-1]:r,J=D>2?w[2]:r;for(V=c.length>3&&typeof V=="function"?(D--,V):r,J&&Xn(w[0],w[1],J)&&(V=D<3?r:V,D=1),f=fr(f);++E<D;){var ne=w[E];ne&&c(f,ne,E,V)}return f})}function Ri(c,f){return function(w,E){if(w==null)return w;if(!zi(w))return c(w,E);for(var D=w.length,V=f?D:-1,J=fr(w);(f?V--:++V<D)&&E(J[V],V,J)!==!1;);return w}}function Wu(c){return function(f,w,E){for(var D=-1,V=fr(f),J=E(f),ne=J.length;ne--;){var de=J[c?ne:++D];if(w(V[de],de,V)===!1)break}return f}}function Uu(c,f,w){var E=f&_,D=yl(c);function V(){var J=this&&this!==Dr&&this instanceof V?D:c;return J.apply(E?w:this,arguments)}return V}function Rh(c){return function(f){f=gr(f);var w=Ks(f)?vi(f):r,E=w?w[0]:f.charAt(0),D=w?Qo(w,1).join(""):f.slice(1);return E[c]()+D}}function vs(c){return function(f){return nh(Zv(jv(f).replace(qc,"")),c,"")}}function yl(c){return function(){var f=arguments;switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3]);case 5:return new c(f[0],f[1],f[2],f[3],f[4]);case 6:return new c(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new c(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var w=al(c.prototype),E=c.apply(w,f);return Zr(E)?E:w}}function Oh(c,f,w){var E=yl(c);function D(){for(var V=arguments.length,J=me(V),ne=V,de=Ko(D);ne--;)J[ne]=arguments[ne];var ke=V<3&&J[0]!==de&&J[V-1]!==de?[]:Ti(J,de);if(V-=ke.length,V<w)return Yn(c,f,bl,D.placeholder,r,J,ke,r,r,w-V);var Te=this&&this!==Dr&&this instanceof D?E:c;return Wn(Te,this,J)}return D}function ms(c){return function(f,w,E){var D=fr(f);if(!zi(f)){var V=ut(w,3);f=Bn(f),w=function(ne){return V(D[ne],ne,D)}}var J=c(f,w,E);return J>-1?D[V?f[J]:J]:r}}function Hu(c){return To(function(f){var w=f.length,E=w,D=Dn.prototype.thru;for(c&&f.reverse();E--;){var V=f[E];if(typeof V!="function")throw new Ei(s);if(D&&!J&&xl(V)=="wrapper")var J=new Dn([],!0)}for(E=J?E:w;++E<w;){V=f[E];var ne=xl(V),de=ne=="wrapper"?ju(V):r;de&&Tc(de[0])&&de[1]==(R|L|P|z)&&!de[4].length&&de[9]==1?J=J[xl(de[0])].apply(J,de[3]):J=V.length==1&&Tc(V)?J[ne]():J.thru(V)}return function(){var ke=arguments,Te=ke[0];if(J&&ke.length==1&&Et(Te))return J.plant(Te).value();for(var Pe=0,He=w?f[Pe].apply(this,ke):Te;++Pe<w;)He=f[Pe].call(this,He);return He}})}function bl(c,f,w,E,D,V,J,ne,de,ke){var Te=f&R,Pe=f&_,He=f&k,it=f&(L|A),ft=f&B,Ot=He?r:yl(c);function gt(){for(var Wt=arguments.length,Qt=me(Wt),oo=Wt;oo--;)Qt[oo]=arguments[oo];if(it)var Ci=Ko(gt),ao=Q0(Qt,Ci);if(E&&(Qt=S1(Qt,E,D,it)),V&&(Qt=Fh(Qt,V,J,it)),Wt-=ao,it&&Wt<ke){var sn=Ti(Qt,Ci);return Yn(c,f,bl,gt.placeholder,w,Qt,sn,ne,de,ke-Wt)}var ta=Pe?w:this,Ts=He?ta[c]:c;return Wt=Qt.length,ne?Qt=Ji(Qt,ne):ft&&Wt>1&&Qt.reverse(),Te&&de<Wt&&(Qt.length=de),this&&this!==Dr&&this instanceof gt&&(Ts=Ot||yl(Ts)),Ts.apply(ta,Qt)}return gt}function k1(c,f){return function(w,E){return Xo(w,c,f(E),{})}}function bc(c,f){return function(w,E){var D;if(w===r&&E===r)return f;if(w!==r&&(D=w),E!==r){if(D===r)return E;typeof w=="string"||typeof E=="string"?(w=ai(w),E=ai(E)):(w=Ih(w),E=Ih(E)),D=c(w,E)}return D}}function Yu(c){return To(function(f){return f=Cr(f,gi(ut())),Ft(function(w){var E=this;return c(f,function(D){return Wn(D,E,w)})})})}function xc(c,f){f=f===r?" ":ai(f);var w=f.length;if(w<2)return w?fs(f,c):f;var E=fs(f,os(c/ns(f)));return Ks(f)?Qo(vi(E),0,c).join(""):E.slice(0,c)}function T1(c,f,w,E){var D=f&_,V=yl(c);function J(){for(var ne=-1,de=arguments.length,ke=-1,Te=E.length,Pe=me(Te+de),He=this&&this!==Dr&&this instanceof J?V:c;++ke<Te;)Pe[ke]=E[ke];for(;de--;)Pe[ke++]=arguments[++ne];return Wn(He,D?w:this,Pe)}return J}function Nh(c){return function(f,w,E){return E&&typeof E!="number"&&Xn(f,w,E)&&(w=E=r),f=ks(f),w===r?(w=f,f=0):w=ks(w),E=E===r?f<w?1:-1:ks(E),gc(f,w,E,c)}}function Xu(c){return function(f,w){return typeof f=="string"&&typeof w=="string"||(f=Mo(f),w=Mo(w)),c(f,w)}}function Yn(c,f,w,E,D,V,J,ne,de,ke){var Te=f&L,Pe=Te?J:r,He=Te?r:J,it=Te?V:r,ft=Te?r:V;f|=Te?P:$,f&=~(Te?$:P),f&M||(f&=-4);var Ot=[c,f,D,it,Pe,ft,He,ne,de,ke],gt=w.apply(r,Ot);return Tc(c)&&jh(gt,Ot),gt.placeholder=E,Zh(gt,c,f)}function wn(c){var f=Qr[c];return function(w,E){if(w=Mo(w),E=E==null?0:An(Rt(E),292),E&&tl(w)){var D=(gr(w)+"e").split("e"),V=f(D[0]+"e"+(+D[1]+E));return D=(gr(V)+"e").split("e"),+(D[0]+"e"+(+D[1]-E))}return f(w)}}var E1=wa&&1/ba(new wa([,-0]))[1]==ae?function(c){return new wa(c)}:Yf;function zh(c){return function(f){var w=Cn(f);return w==qe?cu(f):w==It?uf(f):sf(f,c(f))}}function ko(c,f,w,E,D,V,J,ne){var de=f&k;if(!de&&typeof c!="function")throw new Ei(s);var ke=E?E.length:0;if(ke||(f&=-97,E=D=r),J=J===r?J:Kr(Rt(J),0),ne=ne===r?ne:Rt(ne),ke-=D?D.length:0,f&$){var Te=E,Pe=D;E=D=r}var He=de?r:ju(c),it=[c,f,w,E,D,Te,Pe,V,J,ne];if(He&&D1(it,He),c=it[0],f=it[1],w=it[2],E=it[3],D=it[4],ne=it[9]=it[9]===r?de?0:c.length:Kr(it[9]-ke,0),!ne&&f&(L|A)&&(f&=-25),!f||f==_)var ft=Uu(c,f,w);else f==L||f==A?ft=Oh(c,f,ne):(f==P||f==(_|P))&&!D.length?ft=T1(c,f,w,E):ft=bl.apply(r,it);var Ot=He?Ru:jh;return Zh(Ot(ft,it),c,f)}function Bh(c,f,w,E){return c===r||ea(c,fo[w])&&!rr.call(E,w)?f:c}function $h(c,f,w,E,D,V){return Zr(c)&&Zr(f)&&(V.set(f,c),ps(c,f,r,$h,V),V.delete(f)),c}function Vh(c){return u0(c)?r:c}function Wh(c,f,w,E,D,V){var J=w&x,ne=c.length,de=f.length;if(ne!=de&&!(J&&de>ne))return!1;var ke=V.get(c),Te=V.get(f);if(ke&&Te)return ke==f&&Te==c;var Pe=-1,He=!0,it=w&C?new ss:r;for(V.set(c,f),V.set(f,c);++Pe<ne;){var ft=c[Pe],Ot=f[Pe];if(E)var gt=J?E(Ot,ft,Pe,f,c,V):E(ft,Ot,Pe,c,f,V);if(gt!==r){if(gt)continue;He=!1;break}if(it){if(!ih(f,function(Wt,Qt){if(!Bo(it,Qt)&&(ft===Wt||D(ft,Wt,w,E,V)))return it.push(Qt)})){He=!1;break}}else if(!(ft===Ot||D(ft,Ot,w,E,V))){He=!1;break}}return V.delete(c),V.delete(f),He}function Uh(c,f,w,E,D,V,J){switch(w){case Jt:if(c.byteLength!=f.byteLength||c.byteOffset!=f.byteOffset)return!1;c=c.buffer,f=f.buffer;case Ht:return!(c.byteLength!=f.byteLength||!V(new rc(c),new rc(f)));case Ie:case Oe:case ht:return ea(+c,+f);case Le:return c.name==f.name&&c.message==f.message;case qt:case mr:return c==f+"";case qe:var ne=cu;case It:var de=E&x;if(ne||(ne=ba),c.size!=f.size&&!de)return!1;var ke=J.get(c);if(ke)return ke==f;E|=C,J.set(c,f);var Te=Wh(ne(c),ne(f),E,D,V,J);return J.delete(c),Te;case ln:if(mi)return mi.call(c)==mi.call(f)}return!1}function M1(c,f,w,E,D,V){var J=w&x,ne=wc(c),de=ne.length,ke=wc(f),Te=ke.length;if(de!=Te&&!J)return!1;for(var Pe=de;Pe--;){var He=ne[Pe];if(!(J?He in f:rr.call(f,He)))return!1}var it=V.get(c),ft=V.get(f);if(it&&ft)return it==f&&ft==c;var Ot=!0;V.set(c,f),V.set(f,c);for(var gt=J;++Pe<de;){He=ne[Pe];var Wt=c[He],Qt=f[He];if(E)var oo=J?E(Qt,Wt,He,f,c,V):E(Wt,Qt,He,c,f,V);if(!(oo===r?Wt===Qt||D(Wt,Qt,w,E,V):oo)){Ot=!1;break}gt||(gt=He=="constructor")}if(Ot&&!gt){var Ci=c.constructor,ao=f.constructor;Ci!=ao&&"constructor"in c&&"constructor"in f&&!(typeof Ci=="function"&&Ci instanceof Ci&&typeof ao=="function"&&ao instanceof ao)&&(Ot=!1)}return V.delete(c),V.delete(f),Ot}function To(c){return xi(Ku(c,r,ed),c+"")}function wc(c){return Iu(c,Bn,qi)}function Cc(c){return Iu(c,Bi,I1)}var ju=xu?function(c){return xu.get(c)}:Yf;function xl(c){for(var f=c.name+"",w=il[f],E=rr.call(il,f)?w.length:0;E--;){var D=w[E],V=D.func;if(V==null||V==c)return D.name}return f}function Ko(c){var f=rr.call(N,"placeholder")?N:c;return f.placeholder}function ut(){var c=N.iteratee||Uf;return c=c===Uf?hl:c,arguments.length?c(arguments[0],arguments[1]):c}function _c(c,f){var w=c.__data__;return wl(f)?w[typeof f=="string"?"string":"hash"]:w.map}function Sc(c){for(var f=Bn(c),w=f.length;w--;){var E=f[w],D=c[E];f[w]=[E,D,Ec(D)]}return f}function La(c,f){var w=Qs(c,f);return wh(w)?w:r}function Zu(c){var f=rr.call(c,is),w=c[is];try{c[is]=r;var E=!0}catch{}var D=ec.call(c);return E&&(f?c[is]=w:delete c[is]),D}var qi=mu?function(c){return c==null?[]:(c=fr(c),ma(mu(c),function(f){return gu.call(c,f)}))}:Xf,I1=mu?function(c){for(var f=[];c;)ya(f,qi(c)),c=Gi(c);return f}:Xf,Cn=xn;(oc&&Cn(new oc(new ArrayBuffer(1)))!=Jt||as&&Cn(new as)!=qe||ac&&Cn(ac.resolve())!=or||wa&&Cn(new wa)!=It||sc&&Cn(new sc)!=cr)&&(Cn=function(c){var f=xn(c),w=f==bt?c.constructor:r,E=w?Pa(w):"";if(E)switch(E){case gh:return Jt;case Ca:return qe;case l1:return or;case ol:return It;case go:return cr}return f});function Hh(c,f,w){for(var E=-1,D=w.length;++E<D;){var V=w[E],J=V.size;switch(V.type){case"drop":c+=J;break;case"dropRight":f-=J;break;case"take":f=An(f,c+J);break;case"takeRight":c=Kr(c,f-J);break}}return{start:c,end:f}}function L1(c){var f=c.match(bn);return f?f[1].split(Ln):[]}function Yh(c,f,w){f=So(f,c);for(var E=-1,D=f.length,V=!1;++E<D;){var J=to(f[E]);if(!(V=c!=null&&w(c,J)))break;c=c[J]}return V||++E!=D?V:(D=c==null?0:c.length,!!D&&Q1(D)&&Rr(J,D)&&(Et(c)||Rc(c)))}function kc(c){var f=c.length,w=new c.constructor(f);return f&&typeof c[0]=="string"&&rr.call(c,"index")&&(w.index=c.index,w.input=c.input),w}function _n(c){return typeof c.constructor=="function"&&!qo(c)?al(Gi(c)):{}}function yf(c,f,w){var E=c.constructor;switch(f){case Ht:return yc(c);case Ie:case Oe:return new E(+c);case Jt:return x1(c,w);case Gr:case ur:case Vr:case kt:case Ue:case Ct:case xt:case _t:case wt:return _1(c,w);case qe:return new E;case ht:case mr:return new E(c);case qt:return w1(c);case It:return new E;case ln:return C1(c)}}function bf(c,f){var w=f.length;if(!w)return c;var E=w-1;return f[E]=(w>1?"& ":"")+f[E],f=f.join(w>2?", ":" "),c.replace(rn,`{
/* [wrapped with `+f+`] */
`)}function Gu(c){return Et(c)||Rc(c)||!!(o1&&c&&c[o1])}function Rr(c,f){var w=typeof c;return f=f??te,!!f&&(w=="number"||w!="symbol"&&zl.test(c))&&c>-1&&c%1==0&&c<f}function Xn(c,f,w){if(!Zr(w))return!1;var E=typeof f;return(E=="number"?zi(w)&&Rr(f,w.length):E=="string"&&f in w)?ea(w[f],c):!1}function Qe(c,f){if(Et(c))return!1;var w=typeof c;return w=="number"||w=="symbol"||w=="boolean"||c==null||io(c)?!0:St.test(c)||!Pr.test(c)||f!=null&&c in fr(f)}function wl(c){var f=typeof c;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?c!=="__proto__":c===null}function Tc(c){var f=xl(c),w=N[f];if(typeof w!="function"||!(f in Tt.prototype))return!1;if(c===w)return!0;var E=ju(w);return!!E&&c===E[0]}function P1(c){return!!hu&&hu in c}var xf=Js?Ss:jf;function qo(c){var f=c&&c.constructor,w=typeof f=="function"&&f.prototype||fo;return c===w}function Ec(c){return c===c&&!Zr(c)}function Qu(c,f){return function(w){return w==null?!1:w[c]===f&&(f!==r||c in fr(w))}}function A1(c){var f=ge(c,function(E){return w.size===h&&w.clear(),E}),w=f.cache;return f}function D1(c,f){var w=c[1],E=f[1],D=w|E,V=D<(_|k|R),J=E==R&&w==L||E==R&&w==z&&c[7].length<=f[8]||E==(R|z)&&f[7].length<=f[8]&&w==L;if(!(V||J))return c;E&_&&(c[2]=f[2],D|=w&_?0:M);var ne=f[3];if(ne){var de=c[3];c[3]=de?S1(de,ne,f[4]):ne,c[4]=de?Ti(c[3],p):f[4]}return ne=f[5],ne&&(de=c[5],c[5]=de?Fh(de,ne,f[6]):ne,c[6]=de?Ti(c[5],p):f[6]),ne=f[7],ne&&(c[7]=ne),E&R&&(c[8]=c[8]==null?f[8]:An(c[8],f[8])),c[9]==null&&(c[9]=f[9]),c[0]=f[0],c[1]=D,c}function F1(c){var f=[];if(c!=null)for(var w in fr(c))f.push(w);return f}function Xh(c){return ec.call(c)}function Ku(c,f,w){return f=Kr(f===r?c.length-1:f,0),function(){for(var E=arguments,D=-1,V=Kr(E.length-f,0),J=me(V);++D<V;)J[D]=E[f+D];D=-1;for(var ne=me(f+1);++D<f;)ne[D]=E[D];return ne[f]=w(J),Wn(c,this,ne)}}function cn(c,f){return f.length<2?c:Yo(c,zn(f,0,-1))}function Ji(c,f){for(var w=c.length,E=An(f.length,w),D=Hn(c);E--;){var V=f[E];c[E]=Rr(V,w)?D[V]:r}return c}function Eo(c,f){if(!(f==="constructor"&&typeof c[f]=="function")&&f!="__proto__")return c[f]}var jh=eo(Ru),Cl=ph||function(c,f){return Dr.setTimeout(c,f)},xi=eo(_o);function Zh(c,f,w){var E=f+"";return xi(c,bf(E,R1(L1(E),w)))}function eo(c){var f=0,w=0;return function(){var E=gf(),D=U-(E-w);if(w=E,D>0){if(++f>=ee)return arguments[0]}else f=0;return c.apply(r,arguments)}}function qu(c,f){var w=-1,E=c.length,D=E-1;for(f=f===r?E:f;++w<f;){var V=pl(w,D),J=c[V];c[V]=c[w],c[w]=J}return c.length=f,c}var Gh=A1(function(c){var f=[];return c.charCodeAt(0)===46&&f.push(""),c.replace(Ar,function(w,E,D,V){f.push(D?V.replace(Xa,"$1"):E||w)}),f});function to(c){if(typeof c=="string"||io(c))return c;var f=c+"";return f=="0"&&1/c==-ae?"-0":f}function Pa(c){if(c!=null){try{return Jl.call(c)}catch{}try{return c+""}catch{}}return""}function R1(c,f){return Pn(Y,function(w){var E="_."+w[0];f&w[1]&&!au(c,E)&&c.push(E)}),c.sort()}function O1(c){if(c instanceof Tt)return c.clone();var f=new Dn(c.__wrapped__,c.__chain__);return f.__actions__=Hn(c.__actions__),f.__index__=c.__index__,f.__values__=c.__values__,f}function Ju(c,f,w){(w?Xn(c,f,w):f===r)?f=1:f=Kr(Rt(f),0);var E=c==null?0:c.length;if(!E||f<1)return[];for(var D=0,V=0,J=me(os(E/f));D<E;)J[V++]=zn(c,D,D+=f);return J}function Qh(c){for(var f=-1,w=c==null?0:c.length,E=0,D=[];++f<w;){var V=c[f];V&&(D[E++]=V)}return D}function Oi(){var c=arguments.length;if(!c)return[];for(var f=me(c-1),w=arguments[0],E=c;E--;)f[E-1]=arguments[E];return ya(Et(w)?Hn(w):[w],Wr(f,1))}var Gt=Ft(function(c,f){return an(c)?xo(c,Wr(f,1,an,!0)):[]}),un=Ft(function(c,f){var w=jn(f);return an(w)&&(w=r),an(c)?xo(c,Wr(f,1,an,!0),ut(w,2)):[]}),qr=Ft(function(c,f){var w=jn(f);return an(w)&&(w=r),an(c)?xo(c,Wr(f,1,an,!0),r,w):[]});function Sn(c,f,w){var E=c==null?0:c.length;return E?(f=w||f===r?1:Rt(f),zn(c,f<0?0:f,E)):[]}function wi(c,f,w){var E=c==null?0:c.length;return E?(f=w||f===r?1:Rt(f),f=E-f,zn(c,0,f<0?0:f)):[]}function _l(c,f){return c&&c.length?vc(c,ut(f,3),!0,!0):[]}function on(c,f){return c&&c.length?vc(c,ut(f,3),!0):[]}function Mc(c,f,w,E){var D=c==null?0:c.length;return D?(w&&typeof w!="number"&&Xn(c,f,w)&&(w=0,E=D),v1(c,f,w,E)):[]}function Aa(c,f,w){var E=c==null?0:c.length;if(!E)return-1;var D=w==null?0:Rt(w);return D<0&&(D=Kr(E+D,0)),su(c,ut(f,3),D)}function Ic(c,f,w){var E=c==null?0:c.length;if(!E)return-1;var D=E-1;return w!==r&&(D=Rt(w),D=w<0?Kr(E+D,0):An(D,E-1)),su(c,ut(f,3),D,!0)}function ed(c){var f=c==null?0:c.length;return f?Wr(c,1):[]}function Lc(c){var f=c==null?0:c.length;return f?Wr(c,ae):[]}function si(c,f){var w=c==null?0:c.length;return w?(f=f===r?1:Rt(f),Wr(c,f)):[]}function Kh(c){for(var f=-1,w=c==null?0:c.length,E={};++f<w;){var D=c[f];E[D[0]]=D[1]}return E}function ys(c){return c&&c.length?c[0]:r}function Jo(c,f,w){var E=c==null?0:c.length;if(!E)return-1;var D=w==null?0:Rt(w);return D<0&&(D=Kr(E+D,0)),Gs(c,f,D)}function td(c){var f=c==null?0:c.length;return f?zn(c,0,-1):[]}var qh=Ft(function(c){var f=Cr(c,vl);return f.length&&f[0]===c[0]?Lu(f):[]}),Da=Ft(function(c){var f=jn(c),w=Cr(c,vl);return f===jn(w)?f=r:w.pop(),w.length&&w[0]===c[0]?Lu(w,ut(f,2)):[]}),rd=Ft(function(c){var f=jn(c),w=Cr(c,vl);return f=typeof f=="function"?f:r,f&&w.pop(),w.length&&w[0]===c[0]?Lu(w,r,f):[]});function Fa(c,f){return c==null?"":yu.call(c,f)}function jn(c){var f=c==null?0:c.length;return f?c[f-1]:r}function Pc(c,f,w){var E=c==null?0:c.length;if(!E)return-1;var D=E;return w!==r&&(D=Rt(w),D=D<0?Kr(E+D,0):An(D,E-1)),f===f?df(c,f,D):su(c,Y0,D,!0)}function Jh(c,f){return c&&c.length?Fu(c,Rt(f)):r}var nd=Ft(Ac);function Ac(c,f){return c&&c.length&&f&&f.length?Xr(c,f):c}function Zn(c,f,w){return c&&c.length&&f&&f.length?Xr(c,f,ut(w,2)):c}function Ra(c,f,w){return c&&c.length&&f&&f.length?Xr(c,f,r,w):c}var ro=To(function(c,f){var w=c==null?0:c.length,E=Eu(c,f);return nn(c,Cr(f,function(D){return Rr(D,w)?+D:D}).sort(Dh)),E});function li(c,f){var w=[];if(!(c&&c.length))return w;var E=-1,D=[],V=c.length;for(f=ut(f,3);++E<V;){var J=c[E];f(J,E,c)&&(w.push(J),D.push(E))}return nn(c,D),w}function id(c){return c==null?c:bu.call(c)}function e0(c,f,w){var E=c==null?0:c.length;return E?(w&&typeof w!="number"&&Xn(c,f,w)?(f=0,w=E):(f=f==null?0:Rt(f),w=w===r?E:Rt(w)),zn(c,f,w)):[]}function t0(c,f){return fl(c,f)}function wf(c,f,w){return Ou(c,f,ut(w,2))}function Oa(c,f){var w=c==null?0:c.length;if(w){var E=fl(c,f);if(E<w&&ea(c[E],f))return E}return-1}function N1(c,f){return fl(c,f,!0)}function r0(c,f,w){return Ou(c,f,ut(w,2),!0)}function bs(c,f){var w=c==null?0:c.length;if(w){var E=fl(c,f,!0)-1;if(ea(c[E],f))return E}return-1}function n0(c){return c&&c.length?Mh(c):[]}function xs(c,f){return c&&c.length?Mh(c,ut(f,2)):[]}function z1(c){var f=c==null?0:c.length;return f?zn(c,1,f):[]}function B1(c,f,w){return c&&c.length?(f=w||f===r?1:Rt(f),zn(c,0,f<0?0:f)):[]}function i0(c,f,w){var E=c==null?0:c.length;return E?(f=w||f===r?1:Rt(f),f=E-f,zn(c,f<0?0:f,E)):[]}function od(c,f){return c&&c.length?vc(c,ut(f,3),!1,!0):[]}function Cf(c,f){return c&&c.length?vc(c,ut(f,3)):[]}var _f=Ft(function(c){return Go(Wr(c,1,an,!0))}),$1=Ft(function(c){var f=jn(c);return an(f)&&(f=r),Go(Wr(c,1,an,!0),ut(f,2))}),V1=Ft(function(c){var f=jn(c);return f=typeof f=="function"?f:r,Go(Wr(c,1,an,!0),r,f)});function ws(c){return c&&c.length?Go(c):[]}function Sf(c,f){return c&&c.length?Go(c,ut(f,2)):[]}function Sl(c,f){return f=typeof f=="function"?f:r,c&&c.length?Go(c,r,f):[]}function ad(c){if(!(c&&c.length))return[];var f=0;return c=ma(c,function(w){if(an(w))return f=Kr(w.length,f),!0}),lh(f,function(w){return Cr(c,ah(w))})}function zr(c,f){if(!(c&&c.length))return[];var w=ad(c);return f==null?w:Cr(w,function(E){return Wn(f,r,E)})}var kf=Ft(function(c,f){return an(c)?xo(c,f):[]}),W1=Ft(function(c){return zu(ma(c,an))}),Tf=Ft(function(c){var f=jn(c);return an(f)&&(f=r),zu(ma(c,an),ut(f,2))}),Ef=Ft(function(c){var f=jn(c);return f=typeof f=="function"?f:r,zu(ma(c,an),r,f)}),U1=Ft(ad);function H1(c,f){return mc(c||[],f||[],us)}function Mf(c,f){return mc(c||[],f||[],gs)}var Ni=Ft(function(c){var f=c.length,w=f>1?c[f-1]:r;return w=typeof w=="function"?(c.pop(),w):r,zr(c,w)});function sd(c){var f=N(c);return f.__chain__=!0,f}function If(c,f){return f(c),c}function no(c,f){return f(c)}var ld=To(function(c){var f=c.length,w=f?c[0]:0,E=this.__wrapped__,D=function(V){return Eu(V,c)};return f>1||this.__actions__.length||!(E instanceof Tt)||!Rr(w)?this.thru(D):(E=E.slice(w,+w+(f?1:0)),E.__actions__.push({func:no,args:[D],thisArg:r}),new Dn(E,this.__chain__).thru(function(V){return f&&!V.length&&V.push(r),V}))});function Cs(){return sd(this)}function cd(){return new Dn(this.value(),this.__chain__)}function o0(){this.__values__===r&&(this.__values__=zv(this.value()));var c=this.__index__>=this.__values__.length,f=c?r:this.__values__[this.__index__++];return{done:c,value:f}}function a0(){return this}function Lf(c){for(var f,w=this;w instanceof vo;){var E=O1(w);E.__index__=0,E.__values__=r,f?D.__wrapped__=E:f=E;var D=E;w=w.__wrapped__}return D.__wrapped__=c,f}function s0(){var c=this.__wrapped__;if(c instanceof Tt){var f=c;return this.__actions__.length&&(f=new Tt(this)),f=f.reverse(),f.__actions__.push({func:no,args:[id],thisArg:r}),new Dn(f,this.__chain__)}return this.thru(id)}function Pf(){return gl(this.__wrapped__,this.__actions__)}var Y1=Vu(function(c,f,w){rr.call(c,w)?++c[w]:bo(c,w,1)});function X1(c,f,w){var E=Et(c)?th:uc;return w&&Xn(c,f,w)&&(f=r),E(c,ut(f,3))}function ud(c,f){var w=Et(c)?ma:bh;return w(c,ut(f,3))}var dd=ms(Aa),j1=ms(Ic);function l0(c,f){return Wr(_s(c,f),1)}function Af(c,f){return Wr(_s(c,f),ae)}function Z1(c,f,w){return w=w===r?1:Rt(w),Wr(_s(c,f),w)}function hd(c,f){var w=Et(c)?Pn:wo;return w(c,ut(f,3))}function Dc(c,f){var w=Et(c)?ou:g1;return w(c,ut(f,3))}var c0=Vu(function(c,f,w){rr.call(c,w)?c[w].push(f):bo(c,w,[f])});function pd(c,f,w,E){c=zi(c)?c:vd(c),w=w&&!E?Rt(w):0;var D=c.length;return w<0&&(w=Kr(D+w,0)),K1(c)?w<=D&&c.indexOf(f,w)>-1:!!D&&Gs(c,f,w)>-1}var G1=Ft(function(c,f,w){var E=-1,D=typeof f=="function",V=zi(c)?me(c.length):[];return wo(c,function(J){V[++E]=D?Wn(f,J,w):Ai(J,f,w)}),V}),Df=Vu(function(c,f,w){bo(c,w,f)});function _s(c,f){var w=Et(c)?Cr:_h;return w(c,ut(f,3))}function Ff(c,f,w,E){return c==null?[]:(Et(f)||(f=f==null?[]:[f]),w=E?r:w,Et(w)||(w=w==null?[]:[w]),fc(c,f,w))}var Fc=Vu(function(c,f,w){c[w?0:1].push(f)},function(){return[[],[]]});function Rf(c,f,w){var E=Et(c)?nh:j0,D=arguments.length<3;return E(c,ut(f,4),w,D,wo)}function fd(c,f,w){var E=Et(c)?rf:j0,D=arguments.length<3;return E(c,ut(f,4),w,D,g1)}function a(c,f){var w=Et(c)?ma:bh;return w(c,Ne(ut(f,3)))}function l(c){var f=Et(c)?yo:Nn;return f(c)}function v(c,f,w){(w?Xn(c,f,w):f===r)?f=1:f=Rt(f);var E=Et(c)?cs:Th;return E(c,f)}function y(c){var f=Et(c)?p1:Fi;return f(c)}function S(c){if(c==null)return 0;if(zi(c))return K1(c)?ns(c):c.length;var f=Cn(c);return f==qe||f==It?c.size:Zo(c).length}function T(c,f,w){var E=Et(c)?ih:Eh;return w&&Xn(c,f,w)&&(f=r),E(c,ut(f,3))}var O=Ft(function(c,f){if(c==null)return[];var w=f.length;return w>1&&Xn(c,f[0],f[1])?f=[]:w>2&&Xn(f[0],f[1],f[2])&&(f=[f[0]]),fc(c,Wr(f,1),[])}),K=Tr||function(){return Dr.Date.now()};function re(c,f){if(typeof f!="function")throw new Ei(s);return c=Rt(c),function(){if(--c<1)return f.apply(this,arguments)}}function ye(c,f,w){return f=w?r:f,f=c&&f==null?c.length:f,ko(c,R,r,r,r,r,f)}function Me(c,f){var w;if(typeof f!="function")throw new Ei(s);return c=Rt(c),function(){return--c>0&&(w=f.apply(this,arguments)),c<=1&&(f=r),w}}var Fe=Ft(function(c,f,w){var E=_;if(w.length){var D=Ti(w,Ko(Fe));E|=P}return ko(c,E,f,w,D)}),Ee=Ft(function(c,f,w){var E=_|k;if(w.length){var D=Ti(w,Ko(Ee));E|=P}return ko(f,E,c,w,D)});function Xe(c,f,w){f=w?r:f;var E=ko(c,L,r,r,r,r,r,f);return E.placeholder=Xe.placeholder,E}function Je(c,f,w){f=w?r:f;var E=ko(c,A,r,r,r,r,r,f);return E.placeholder=Je.placeholder,E}function et(c,f,w){var E,D,V,J,ne,de,ke=0,Te=!1,Pe=!1,He=!0;if(typeof c!="function")throw new Ei(s);f=Mo(f)||0,Zr(w)&&(Te=!!w.leading,Pe="maxWait"in w,V=Pe?Kr(Mo(w.maxWait)||0,f):V,He="trailing"in w?!!w.trailing:He);function it(sn){var ta=E,Ts=D;return E=D=r,ke=sn,J=c.apply(Ts,ta),J}function ft(sn){return ke=sn,ne=Cl(Wt,f),Te?it(sn):J}function Ot(sn){var ta=sn-de,Ts=sn-ke,Kv=f-ta;return Pe?An(Kv,V-Ts):Kv}function gt(sn){var ta=sn-de,Ts=sn-ke;return de===r||ta>=f||ta<0||Pe&&Ts>=V}function Wt(){var sn=K();if(gt(sn))return Qt(sn);ne=Cl(Wt,Ot(sn))}function Qt(sn){return ne=r,He&&E?it(sn):(E=D=r,J)}function oo(){ne!==r&&Ph(ne),ke=0,E=de=D=ne=r}function Ci(){return ne===r?J:Qt(K())}function ao(){var sn=K(),ta=gt(sn);if(E=arguments,D=this,de=sn,ta){if(ne===r)return ft(de);if(Pe)return Ph(ne),ne=Cl(Wt,f),it(de)}return ne===r&&(ne=Cl(Wt,f)),J}return ao.cancel=oo,ao.flush=Ci,ao}var jr=Ft(function(c,f){return yh(c,1,f)}),he=Ft(function(c,f,w){return yh(c,Mo(f)||0,w)});function oe(c){return ko(c,B)}function ge(c,f){if(typeof c!="function"||f!=null&&typeof f!="function")throw new Ei(s);var w=function(){var E=arguments,D=f?f.apply(this,E):E[0],V=w.cache;if(V.has(D))return V.get(D);var J=c.apply(this,E);return w.cache=V.set(D,J)||V,J};return w.cache=new(ge.Cache||Mi),w}ge.Cache=Mi;function Ne(c){if(typeof c!="function")throw new Ei(s);return function(){var f=arguments;switch(f.length){case 0:return!c.call(this);case 1:return!c.call(this,f[0]);case 2:return!c.call(this,f[0],f[1]);case 3:return!c.call(this,f[0],f[1],f[2])}return!c.apply(this,f)}}function rt(c){return Me(2,c)}var lt=b1(function(c,f){f=f.length==1&&Et(f[0])?Cr(f[0],gi(ut())):Cr(Wr(f,1),gi(ut()));var w=f.length;return Ft(function(E){for(var D=-1,V=An(E.length,w);++D<V;)E[D]=f[D].call(this,E[D]);return Wn(c,this,E)})}),st=Ft(function(c,f){var w=Ti(f,Ko(st));return ko(c,P,r,f,w)}),pt=Ft(function(c,f){var w=Ti(f,Ko(pt));return ko(c,$,r,f,w)}),dn=To(function(c,f){return ko(c,z,r,r,r,f)});function nr(c,f){if(typeof c!="function")throw new Ei(s);return f=f===r?f:Rt(f),Ft(c,f)}function Na(c,f){if(typeof c!="function")throw new Ei(s);return f=f==null?0:Kr(Rt(f),0),Ft(function(w){var E=w[f],D=Qo(w,0,f);return E&&ya(D,E),Wn(c,this,D)})}function Of(c,f,w){var E=!0,D=!0;if(typeof c!="function")throw new Ei(s);return Zr(w)&&(E="leading"in w?!!w.leading:E,D="trailing"in w?!!w.trailing:D),et(c,f,{leading:E,maxWait:f,trailing:D})}function J5(c){return ye(c,1)}function e9(c,f){return st(Bu(f),c)}function t9(){if(!arguments.length)return[];var c=arguments[0];return Et(c)?c:[c]}function r9(c){return oi(c,b)}function n9(c,f){return f=typeof f=="function"?f:r,oi(c,b,f)}function i9(c){return oi(c,g|b)}function o9(c,f){return f=typeof f=="function"?f:r,oi(c,g|b,f)}function a9(c,f){return f==null||cc(c,f,Bn(f))}function ea(c,f){return c===f||c!==c&&f!==f}var s9=Xu(Ea),l9=Xu(function(c,f){return c>=f}),Rc=Pu(function(){return arguments}())?Pu:function(c){return Jr(c)&&rr.call(c,"callee")&&!gu.call(c,"callee")},Et=me.isArray,c9=Jd?gi(Jd):m1;function zi(c){return c!=null&&Q1(c.length)&&!Ss(c)}function an(c){return Jr(c)&&zi(c)}function u9(c){return c===!0||c===!1||Jr(c)&&xn(c)==Ie}var kl=fh||jf,d9=ti?gi(ti):jo;function h9(c){return Jr(c)&&c.nodeType===1&&!u0(c)}function p9(c){if(c==null)return!0;if(zi(c)&&(Et(c)||typeof c=="string"||typeof c.splice=="function"||kl(c)||gd(c)||Rc(c)))return!c.length;var f=Cn(c);if(f==qe||f==It)return!c.size;if(qo(c))return!Zo(c).length;for(var w in c)if(rr.call(c,w))return!1;return!0}function f9(c,f){return Di(c,f)}function g9(c,f,w){w=typeof w=="function"?w:r;var E=w?w(c,f):r;return E===r?Di(c,f,r,w):!!E}function Nf(c){if(!Jr(c))return!1;var f=xn(c);return f==Le||f==Ce||typeof c.message=="string"&&typeof c.name=="string"&&!u0(c)}function v9(c){return typeof c=="number"&&tl(c)}function Ss(c){if(!Zr(c))return!1;var f=xn(c);return f==Ve||f==je||f==$e||f==dr}function Fv(c){return typeof c=="number"&&c==Rt(c)}function Q1(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=te}function Zr(c){var f=typeof c;return c!=null&&(f=="object"||f=="function")}function Jr(c){return c!=null&&typeof c=="object"}var Rv=rs?gi(rs):y1;function m9(c,f){return c===f||dl(c,f,Sc(f))}function y9(c,f,w){return w=typeof w=="function"?w:r,dl(c,f,Sc(f),w)}function b9(c){return Ov(c)&&c!=+c}function x9(c){if(xf(c))throw new yt(o);return wh(c)}function w9(c){return c===null}function C9(c){return c==null}function Ov(c){return typeof c=="number"||Jr(c)&&xn(c)==ht}function u0(c){if(!Jr(c)||xn(c)!=bt)return!1;var f=Gi(c);if(f===null)return!0;var w=rr.call(f,"constructor")&&f.constructor;return typeof w=="function"&&w instanceof w&&Jl.call(w)==pu}var zf=iu?gi(iu):hc;function _9(c){return Fv(c)&&c>=-te&&c<=te}var Nv=Zs?gi(Zs):Co;function K1(c){return typeof c=="string"||!Et(c)&&Jr(c)&&xn(c)==mr}function io(c){return typeof c=="symbol"||Jr(c)&&xn(c)==ln}var gd=W0?gi(W0):pc;function S9(c){return c===r}function k9(c){return Jr(c)&&Cn(c)==cr}function T9(c){return Jr(c)&&xn(c)==Dt}var E9=Xu(Ma),M9=Xu(function(c,f){return c<=f});function zv(c){if(!c)return[];if(zi(c))return K1(c)?vi(c):Hn(c);if(Wo&&c[Wo])return cf(c[Wo]());var f=Cn(c),w=f==qe?cu:f==It?ba:vd;return w(c)}function ks(c){if(!c)return c===0?c:0;if(c=Mo(c),c===ae||c===-ae){var f=c<0?-1:1;return f*ce}return c===c?c:0}function Rt(c){var f=ks(c),w=f%1;return f===f?w?f-w:f:0}function Bv(c){return c?Ho(Rt(c),0,j):0}function Mo(c){if(typeof c=="number")return c;if(io(c))return ue;if(Zr(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=Zr(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=Z0(c);var w=ua.test(c);return w||Za.test(c)?ru(c.slice(2),w?2:8):Bs.test(c)?ue:+c}function $v(c){return Ki(c,Bi(c))}function I9(c){return c?Ho(Rt(c),-te,te):c===0?c:0}function gr(c){return c==null?"":ai(c)}var L9=ml(function(c,f){if(qo(f)||zi(f)){Ki(f,Bn(f),c);return}for(var w in f)rr.call(f,w)&&us(c,w,f[w])}),Vv=ml(function(c,f){Ki(f,Bi(f),c)}),q1=ml(function(c,f,w,E){Ki(f,Bi(f),c,E)}),P9=ml(function(c,f,w,E){Ki(f,Bn(f),c,E)}),A9=To(Eu);function D9(c,f){var w=al(c);return f==null?w:Mr(w,f)}var F9=Ft(function(c,f){c=fr(c);var w=-1,E=f.length,D=E>2?f[2]:r;for(D&&Xn(f[0],f[1],D)&&(E=1);++w<E;)for(var V=f[w],J=Bi(V),ne=-1,de=J.length;++ne<de;){var ke=J[ne],Te=c[ke];(Te===r||ea(Te,fo[ke])&&!rr.call(c,ke))&&(c[ke]=V[ke])}return c}),R9=Ft(function(c){return c.push(r,$h),Wn(Wv,r,c)});function O9(c,f){return H0(c,ut(f,3),bi)}function N9(c,f){return H0(c,ut(f,3),Ta)}function z9(c,f){return c==null?c:Mu(c,ut(f,3),Bi)}function B9(c,f){return c==null?c:dc(c,ut(f,3),Bi)}function $9(c,f){return c&&bi(c,ut(f,3))}function V9(c,f){return c&&Ta(c,ut(f,3))}function W9(c){return c==null?[]:ul(c,Bn(c))}function U9(c){return c==null?[]:ul(c,Bi(c))}function Bf(c,f,w){var E=c==null?r:Yo(c,f);return E===r?w:E}function H9(c,f){return c!=null&&Yh(c,f,Pi)}function $f(c,f){return c!=null&&Yh(c,f,hs)}var Y9=k1(function(c,f,w){f!=null&&typeof f.toString!="function"&&(f=ec.call(f)),c[f]=w},Wf($i)),X9=k1(function(c,f,w){f!=null&&typeof f.toString!="function"&&(f=ec.call(f)),rr.call(c,f)?c[f].push(w):c[f]=[w]},ut),j9=Ft(Ai);function Bn(c){return zi(c)?mo(c):Zo(c)}function Bi(c){return zi(c)?mo(c,!0):Ch(c)}function Z9(c,f){var w={};return f=ut(f,3),bi(c,function(E,D,V){bo(w,f(E,D,V),E)}),w}function G9(c,f){var w={};return f=ut(f,3),bi(c,function(E,D,V){bo(w,D,f(E,D,V))}),w}var Q9=ml(function(c,f,w){ps(c,f,w)}),Wv=ml(function(c,f,w,E){ps(c,f,w,E)}),K9=To(function(c,f){var w={};if(c==null)return w;var E=!1;f=Cr(f,function(V){return V=So(V,c),E||(E=V.length>1),V}),Ki(c,Cc(c),w),E&&(w=oi(w,g|m|b,Vh));for(var D=f.length;D--;)Nu(w,f[D]);return w});function q9(c,f){return Uv(c,Ne(ut(f)))}var J9=To(function(c,f){return c==null?{}:kh(c,f)});function Uv(c,f){if(c==null)return{};var w=Cr(Cc(c),function(E){return[E]});return f=ut(f),Ia(c,w,function(E,D){return f(E,D[0])})}function e3(c,f,w){f=So(f,c);var E=-1,D=f.length;for(D||(D=1,c=r);++E<D;){var V=c==null?r:c[to(f[E])];V===r&&(E=D,V=w),c=Ss(V)?V.call(c):V}return c}function t3(c,f,w){return c==null?c:gs(c,f,w)}function r3(c,f,w,E){return E=typeof E=="function"?E:r,c==null?c:gs(c,f,w,E)}var Hv=zh(Bn),Yv=zh(Bi);function n3(c,f,w){var E=Et(c),D=E||kl(c)||gd(c);if(f=ut(f,4),w==null){var V=c&&c.constructor;D?w=E?new V:[]:Zr(c)?w=Ss(V)?al(Gi(c)):{}:w={}}return(D?Pn:bi)(c,function(J,ne,de){return f(w,J,ne,de)}),w}function i3(c,f){return c==null?!0:Nu(c,f)}function o3(c,f,w){return c==null?c:Lh(c,f,Bu(w))}function a3(c,f,w,E){return E=typeof E=="function"?E:r,c==null?c:Lh(c,f,Bu(w),E)}function vd(c){return c==null?[]:Kl(c,Bn(c))}function s3(c){return c==null?[]:Kl(c,Bi(c))}function l3(c,f,w){return w===r&&(w=f,f=r),w!==r&&(w=Mo(w),w=w===w?w:0),f!==r&&(f=Mo(f),f=f===f?f:0),Ho(Mo(c),f,w)}function c3(c,f,w){return f=ks(f),w===r?(w=f,f=0):w=ks(w),c=Mo(c),xh(c,f,w)}function u3(c,f,w){if(w&&typeof w!="boolean"&&Xn(c,f,w)&&(f=w=r),w===r&&(typeof f=="boolean"?(w=f,f=r):typeof c=="boolean"&&(w=c,c=r)),c===r&&f===r?(c=0,f=1):(c=ks(c),f===r?(f=c,c=0):f=ks(f)),c>f){var E=c;c=f,f=E}if(w||c%1||f%1){var D=ic();return An(c+D*(f-c+Kd("1e-"+((D+"").length-1))),f)}return pl(c,f)}var d3=vs(function(c,f,w){return f=f.toLowerCase(),c+(w?Xv(f):f)});function Xv(c){return Vf(gr(c).toLowerCase())}function jv(c){return c=gr(c),c&&c.replace(Bl,K0).replace(jl,"")}function h3(c,f,w){c=gr(c),f=ai(f);var E=c.length;w=w===r?E:Ho(Rt(w),0,E);var D=w;return w-=f.length,w>=0&&c.slice(w,D)==f}function p3(c){return c=gr(c),c&&Ur.test(c)?c.replace(sr,q0):c}function f3(c){return c=gr(c),c&&pr.test(c)?c.replace(wr,"\\$&"):c}var g3=vs(function(c,f,w){return c+(w?"-":"")+f.toLowerCase()}),v3=vs(function(c,f,w){return c+(w?" ":"")+f.toLowerCase()}),m3=Rh("toLowerCase");function y3(c,f,w){c=gr(c),f=Rt(f);var E=f?ns(c):0;if(!f||E>=f)return c;var D=(f-E)/2;return xc(xa(D),w)+c+xc(os(D),w)}function b3(c,f,w){c=gr(c),f=Rt(f);var E=f?ns(c):0;return f&&E<f?c+xc(f-E,w):c}function x3(c,f,w){c=gr(c),f=Rt(f);var E=f?ns(c):0;return f&&E<f?xc(f-E,w)+c:c}function w3(c,f,w){return w||f==null?f=0:f&&(f=+f),s1(gr(c).replace(tn,""),f||0)}function C3(c,f,w){return(w?Xn(c,f,w):f===r)?f=1:f=Rt(f),fs(gr(c),f)}function _3(){var c=arguments,f=gr(c[0]);return c.length<3?f:f.replace(c[1],c[2])}var S3=vs(function(c,f,w){return c+(w?"_":"")+f.toLowerCase()});function k3(c,f,w){return w&&typeof w!="number"&&Xn(c,f,w)&&(f=w=r),w=w===r?j:w>>>0,w?(c=gr(c),c&&(typeof f=="string"||f!=null&&!zf(f))&&(f=ai(f),!f&&Ks(c))?Qo(vi(c),0,w):c.split(f,w)):[]}var T3=vs(function(c,f,w){return c+(w?" ":"")+Vf(f)});function E3(c,f,w){return c=gr(c),w=w==null?0:Ho(Rt(w),0,c.length),f=ai(f),c.slice(w,w+f.length)==f}function M3(c,f,w){var E=N.templateSettings;w&&Xn(c,f,w)&&(f=r),c=gr(c),f=q1({},f,E,Bh);var D=q1({},f.imports,E.imports,Bh),V=Bn(D),J=Kl(D,V),ne,de,ke=0,Te=f.interpolate||Ga,Pe="__p += '",He=ql((f.escape||Ga).source+"|"+Te.source+"|"+(Te===Lt?fi:Ga).source+"|"+(f.evaluate||Ga).source+"|$","g"),it="//# sourceURL="+(rr.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eu+"]")+`
`;c.replace(He,function(gt,Wt,Qt,oo,Ci,ao){return Qt||(Qt=oo),Pe+=c.slice(ke,ao).replace(jc,J0),Wt&&(ne=!0,Pe+=`' +
__e(`+Wt+`) +
'`),Ci&&(de=!0,Pe+=`';
`+Ci+`;
__p += '`),Qt&&(Pe+=`' +
((__t = (`+Qt+`)) == null ? '' : __t) +
'`),ke=ao+gt.length,gt}),Pe+=`';
`;var ft=rr.call(f,"variable")&&f.variable;if(!ft)Pe=`with (obj) {
`+Pe+`
}
`;else if(lo.test(ft))throw new yt(u);Pe=(de?Pe.replace(Vt,""):Pe).replace(Yt,"$1").replace(yr,"$1;"),Pe="function("+(ft||"obj")+`) {
`+(ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ne?", __e = _.escape":"")+(de?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pe+`return __p
}`;var Ot=Gv(function(){return tr(V,it+"return "+Pe).apply(r,J)});if(Ot.source=Pe,Nf(Ot))throw Ot;return Ot}function I3(c){return gr(c).toLowerCase()}function L3(c){return gr(c).toUpperCase()}function P3(c,f,w){if(c=gr(c),c&&(w||f===r))return Z0(c);if(!c||!(f=ai(f)))return c;var E=vi(c),D=vi(f),V=G0(E,D),J=ch(E,D)+1;return Qo(E,V,J).join("")}function A3(c,f,w){if(c=gr(c),c&&(w||f===r))return c.slice(0,du(c)+1);if(!c||!(f=ai(f)))return c;var E=vi(c),D=ch(E,vi(f))+1;return Qo(E,0,D).join("")}function D3(c,f,w){if(c=gr(c),c&&(w||f===r))return c.replace(tn,"");if(!c||!(f=ai(f)))return c;var E=vi(c),D=G0(E,vi(f));return Qo(E,D).join("")}function F3(c,f){var w=W,E=X;if(Zr(f)){var D="separator"in f?f.separator:D;w="length"in f?Rt(f.length):w,E="omission"in f?ai(f.omission):E}c=gr(c);var V=c.length;if(Ks(c)){var J=vi(c);V=J.length}if(w>=V)return c;var ne=w-ns(E);if(ne<1)return E;var de=J?Qo(J,0,ne).join(""):c.slice(0,ne);if(D===r)return de+E;if(J&&(ne+=de.length-ne),zf(D)){if(c.slice(ne).search(D)){var ke,Te=de;for(D.global||(D=ql(D.source,gr(ca.exec(D))+"g")),D.lastIndex=0;ke=D.exec(Te);)var Pe=ke.index;de=de.slice(0,Pe===r?ne:Pe)}}else if(c.indexOf(ai(D),ne)!=ne){var He=de.lastIndexOf(D);He>-1&&(de=de.slice(0,He))}return de+E}function R3(c){return c=gr(c),c&&qn.test(c)?c.replace(hr,e1):c}var O3=vs(function(c,f,w){return c+(w?" ":"")+f.toUpperCase()}),Vf=Rh("toUpperCase");function Zv(c,f,w){return c=gr(c),f=w?r:f,f===r?lf(c)?hf(c):of(c):c.match(f)||[]}var Gv=Ft(function(c,f){try{return Wn(c,r,f)}catch(w){return Nf(w)?w:new yt(w)}}),N3=To(function(c,f){return Pn(f,function(w){w=to(w),bo(c,w,Fe(c[w],c))}),c});function z3(c){var f=c==null?0:c.length,w=ut();return c=f?Cr(c,function(E){if(typeof E[1]!="function")throw new Ei(s);return[w(E[0]),E[1]]}):[],Ft(function(E){for(var D=-1;++D<f;){var V=c[D];if(Wn(V[0],this,E))return Wn(V[1],this,E)}})}function B3(c){return f1(oi(c,g))}function Wf(c){return function(){return c}}function $3(c,f){return c==null||c!==c?f:c}var V3=Hu(),W3=Hu(!0);function $i(c){return c}function Uf(c){return hl(typeof c=="function"?c:oi(c,g))}function U3(c){return Du(oi(c,g))}function H3(c,f){return Fr(c,oi(f,g))}var Y3=Ft(function(c,f){return function(w){return Ai(w,c,f)}}),X3=Ft(function(c,f){return function(w){return Ai(c,w,f)}});function Hf(c,f,w){var E=Bn(f),D=ul(f,E);w==null&&!(Zr(f)&&(D.length||!E.length))&&(w=f,f=c,c=this,D=ul(f,Bn(f)));var V=!(Zr(w)&&"chain"in w)||!!w.chain,J=Ss(c);return Pn(D,function(ne){var de=f[ne];c[ne]=de,J&&(c.prototype[ne]=function(){var ke=this.__chain__;if(V||ke){var Te=c(this.__wrapped__),Pe=Te.__actions__=Hn(this.__actions__);return Pe.push({func:de,args:arguments,thisArg:c}),Te.__chain__=ke,Te}return de.apply(c,ya([this.value()],arguments))})}),c}function j3(){return Dr._===this&&(Dr._=n1),this}function Yf(){}function Z3(c){return c=Rt(c),Ft(function(f){return Fu(f,c)})}var G3=Yu(Cr),Q3=Yu(th),K3=Yu(ih);function Qv(c){return Qe(c)?ah(to(c)):Nr(c)}function q3(c){return function(f){return c==null?r:Yo(c,f)}}var J3=Nh(),e6=Nh(!0);function Xf(){return[]}function jf(){return!1}function t6(){return{}}function r6(){return""}function n6(){return!0}function i6(c,f){if(c=Rt(c),c<1||c>te)return[];var w=j,E=An(c,j);f=ut(f),c-=j;for(var D=lh(E,f);++w<c;)f(w);return D}function o6(c){return Et(c)?Cr(c,to):io(c)?[c]:Hn(Gh(gr(c)))}function a6(c){var f=++el;return gr(c)+f}var s6=bc(function(c,f){return c+f},0),l6=wn("ceil"),c6=bc(function(c,f){return c/f},1),u6=wn("floor");function d6(c){return c&&c.length?ds(c,$i,Ea):r}function h6(c,f){return c&&c.length?ds(c,ut(f,2),Ea):r}function p6(c){return X0(c,$i)}function f6(c,f){return X0(c,ut(f,2))}function g6(c){return c&&c.length?ds(c,$i,Ma):r}function v6(c,f){return c&&c.length?ds(c,ut(f,2),Ma):r}var m6=bc(function(c,f){return c*f},1),y6=wn("round"),b6=bc(function(c,f){return c-f},0);function x6(c){return c&&c.length?sh(c,$i):0}function w6(c,f){return c&&c.length?sh(c,ut(f,2)):0}return N.after=re,N.ary=ye,N.assign=L9,N.assignIn=Vv,N.assignInWith=q1,N.assignWith=P9,N.at=A9,N.before=Me,N.bind=Fe,N.bindAll=N3,N.bindKey=Ee,N.castArray=t9,N.chain=sd,N.chunk=Ju,N.compact=Qh,N.concat=Oi,N.cond=z3,N.conforms=B3,N.constant=Wf,N.countBy=Y1,N.create=D9,N.curry=Xe,N.curryRight=Je,N.debounce=et,N.defaults=F9,N.defaultsDeep=R9,N.defer=jr,N.delay=he,N.difference=Gt,N.differenceBy=un,N.differenceWith=qr,N.drop=Sn,N.dropRight=wi,N.dropRightWhile=_l,N.dropWhile=on,N.fill=Mc,N.filter=ud,N.flatMap=l0,N.flatMapDeep=Af,N.flatMapDepth=Z1,N.flatten=ed,N.flattenDeep=Lc,N.flattenDepth=si,N.flip=oe,N.flow=V3,N.flowRight=W3,N.fromPairs=Kh,N.functions=W9,N.functionsIn=U9,N.groupBy=c0,N.initial=td,N.intersection=qh,N.intersectionBy=Da,N.intersectionWith=rd,N.invert=Y9,N.invertBy=X9,N.invokeMap=G1,N.iteratee=Uf,N.keyBy=Df,N.keys=Bn,N.keysIn=Bi,N.map=_s,N.mapKeys=Z9,N.mapValues=G9,N.matches=U3,N.matchesProperty=H3,N.memoize=ge,N.merge=Q9,N.mergeWith=Wv,N.method=Y3,N.methodOf=X3,N.mixin=Hf,N.negate=Ne,N.nthArg=Z3,N.omit=K9,N.omitBy=q9,N.once=rt,N.orderBy=Ff,N.over=G3,N.overArgs=lt,N.overEvery=Q3,N.overSome=K3,N.partial=st,N.partialRight=pt,N.partition=Fc,N.pick=J9,N.pickBy=Uv,N.property=Qv,N.propertyOf=q3,N.pull=nd,N.pullAll=Ac,N.pullAllBy=Zn,N.pullAllWith=Ra,N.pullAt=ro,N.range=J3,N.rangeRight=e6,N.rearg=dn,N.reject=a,N.remove=li,N.rest=nr,N.reverse=id,N.sampleSize=v,N.set=t3,N.setWith=r3,N.shuffle=y,N.slice=e0,N.sortBy=O,N.sortedUniq=n0,N.sortedUniqBy=xs,N.split=k3,N.spread=Na,N.tail=z1,N.take=B1,N.takeRight=i0,N.takeRightWhile=od,N.takeWhile=Cf,N.tap=If,N.throttle=Of,N.thru=no,N.toArray=zv,N.toPairs=Hv,N.toPairsIn=Yv,N.toPath=o6,N.toPlainObject=$v,N.transform=n3,N.unary=J5,N.union=_f,N.unionBy=$1,N.unionWith=V1,N.uniq=ws,N.uniqBy=Sf,N.uniqWith=Sl,N.unset=i3,N.unzip=ad,N.unzipWith=zr,N.update=o3,N.updateWith=a3,N.values=vd,N.valuesIn=s3,N.without=kf,N.words=Zv,N.wrap=e9,N.xor=W1,N.xorBy=Tf,N.xorWith=Ef,N.zip=U1,N.zipObject=H1,N.zipObjectDeep=Mf,N.zipWith=Ni,N.entries=Hv,N.entriesIn=Yv,N.extend=Vv,N.extendWith=q1,Hf(N,N),N.add=s6,N.attempt=Gv,N.camelCase=d3,N.capitalize=Xv,N.ceil=l6,N.clamp=l3,N.clone=r9,N.cloneDeep=i9,N.cloneDeepWith=o9,N.cloneWith=n9,N.conformsTo=a9,N.deburr=jv,N.defaultTo=$3,N.divide=c6,N.endsWith=h3,N.eq=ea,N.escape=p3,N.escapeRegExp=f3,N.every=X1,N.find=dd,N.findIndex=Aa,N.findKey=O9,N.findLast=j1,N.findLastIndex=Ic,N.findLastKey=N9,N.floor=u6,N.forEach=hd,N.forEachRight=Dc,N.forIn=z9,N.forInRight=B9,N.forOwn=$9,N.forOwnRight=V9,N.get=Bf,N.gt=s9,N.gte=l9,N.has=H9,N.hasIn=$f,N.head=ys,N.identity=$i,N.includes=pd,N.indexOf=Jo,N.inRange=c3,N.invoke=j9,N.isArguments=Rc,N.isArray=Et,N.isArrayBuffer=c9,N.isArrayLike=zi,N.isArrayLikeObject=an,N.isBoolean=u9,N.isBuffer=kl,N.isDate=d9,N.isElement=h9,N.isEmpty=p9,N.isEqual=f9,N.isEqualWith=g9,N.isError=Nf,N.isFinite=v9,N.isFunction=Ss,N.isInteger=Fv,N.isLength=Q1,N.isMap=Rv,N.isMatch=m9,N.isMatchWith=y9,N.isNaN=b9,N.isNative=x9,N.isNil=C9,N.isNull=w9,N.isNumber=Ov,N.isObject=Zr,N.isObjectLike=Jr,N.isPlainObject=u0,N.isRegExp=zf,N.isSafeInteger=_9,N.isSet=Nv,N.isString=K1,N.isSymbol=io,N.isTypedArray=gd,N.isUndefined=S9,N.isWeakMap=k9,N.isWeakSet=T9,N.join=Fa,N.kebabCase=g3,N.last=jn,N.lastIndexOf=Pc,N.lowerCase=v3,N.lowerFirst=m3,N.lt=E9,N.lte=M9,N.max=d6,N.maxBy=h6,N.mean=p6,N.meanBy=f6,N.min=g6,N.minBy=v6,N.stubArray=Xf,N.stubFalse=jf,N.stubObject=t6,N.stubString=r6,N.stubTrue=n6,N.multiply=m6,N.nth=Jh,N.noConflict=j3,N.noop=Yf,N.now=K,N.pad=y3,N.padEnd=b3,N.padStart=x3,N.parseInt=w3,N.random=u3,N.reduce=Rf,N.reduceRight=fd,N.repeat=C3,N.replace=_3,N.result=e3,N.round=y6,N.runInContext=se,N.sample=l,N.size=S,N.snakeCase=S3,N.some=T,N.sortedIndex=t0,N.sortedIndexBy=wf,N.sortedIndexOf=Oa,N.sortedLastIndex=N1,N.sortedLastIndexBy=r0,N.sortedLastIndexOf=bs,N.startCase=T3,N.startsWith=E3,N.subtract=b6,N.sum=x6,N.sumBy=w6,N.template=M3,N.times=i6,N.toFinite=ks,N.toInteger=Rt,N.toLength=Bv,N.toLower=I3,N.toNumber=Mo,N.toSafeInteger=I9,N.toString=gr,N.toUpper=L3,N.trim=P3,N.trimEnd=A3,N.trimStart=D3,N.truncate=F3,N.unescape=R3,N.uniqueId=a6,N.upperCase=O3,N.upperFirst=Vf,N.each=hd,N.eachRight=Dc,N.first=ys,Hf(N,function(){var c={};return bi(N,function(f,w){rr.call(N.prototype,w)||(c[w]=f)}),c}(),{chain:!1}),N.VERSION=n,Pn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){N[c].placeholder=N}),Pn(["drop","take"],function(c,f){Tt.prototype[c]=function(w){w=w===r?1:Kr(Rt(w),0);var E=this.__filtered__&&!f?new Tt(this):this.clone();return E.__filtered__?E.__takeCount__=An(w,E.__takeCount__):E.__views__.push({size:An(w,j),type:c+(E.__dir__<0?"Right":"")}),E},Tt.prototype[c+"Right"]=function(w){return this.reverse()[c](w).reverse()}}),Pn(["filter","map","takeWhile"],function(c,f){var w=f+1,E=w==q||w==le;Tt.prototype[c]=function(D){var V=this.clone();return V.__iteratees__.push({iteratee:ut(D,3),type:w}),V.__filtered__=V.__filtered__||E,V}}),Pn(["head","last"],function(c,f){var w="take"+(f?"Right":"");Tt.prototype[c]=function(){return this[w](1).value()[0]}}),Pn(["initial","tail"],function(c,f){var w="drop"+(f?"":"Right");Tt.prototype[c]=function(){return this.__filtered__?new Tt(this):this[w](1)}}),Tt.prototype.compact=function(){return this.filter($i)},Tt.prototype.find=function(c){return this.filter(c).head()},Tt.prototype.findLast=function(c){return this.reverse().find(c)},Tt.prototype.invokeMap=Ft(function(c,f){return typeof c=="function"?new Tt(this):this.map(function(w){return Ai(w,c,f)})}),Tt.prototype.reject=function(c){return this.filter(Ne(ut(c)))},Tt.prototype.slice=function(c,f){c=Rt(c);var w=this;return w.__filtered__&&(c>0||f<0)?new Tt(w):(c<0?w=w.takeRight(-c):c&&(w=w.drop(c)),f!==r&&(f=Rt(f),w=f<0?w.dropRight(-f):w.take(f-c)),w)},Tt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Tt.prototype.toArray=function(){return this.take(j)},bi(Tt.prototype,function(c,f){var w=/^(?:filter|find|map|reject)|While$/.test(f),E=/^(?:head|last)$/.test(f),D=N[E?"take"+(f=="last"?"Right":""):f],V=E||/^find/.test(f);D&&(N.prototype[f]=function(){var J=this.__wrapped__,ne=E?[1]:arguments,de=J instanceof Tt,ke=ne[0],Te=de||Et(J),Pe=function(Wt){var Qt=D.apply(N,ya([Wt],ne));return E&&He?Qt[0]:Qt};Te&&w&&typeof ke=="function"&&ke.length!=1&&(de=Te=!1);var He=this.__chain__,it=!!this.__actions__.length,ft=V&&!He,Ot=de&&!it;if(!V&&Te){J=Ot?J:new Tt(this);var gt=c.apply(J,ne);return gt.__actions__.push({func:no,args:[Pe],thisArg:r}),new Dn(gt,He)}return ft&&Ot?c.apply(this,ne):(gt=this.thru(Pe),ft?E?gt.value()[0]:gt.value():gt)})}),Pn(["pop","push","shift","sort","splice","unshift"],function(c){var f=$o[c],w=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",E=/^(?:pop|shift)$/.test(c);N.prototype[c]=function(){var D=arguments;if(E&&!this.__chain__){var V=this.value();return f.apply(Et(V)?V:[],D)}return this[w](function(J){return f.apply(Et(J)?J:[],D)})}}),bi(Tt.prototype,function(c,f){var w=N[f];if(w){var E=w.name+"";rr.call(il,E)||(il[E]=[]),il[E].push({name:f,func:w})}}),il[bl(r,k).name]=[{name:"wrapper",func:r}],Tt.prototype.clone=Cu,Tt.prototype.reverse=vh,Tt.prototype.value=sl,N.prototype.at=ld,N.prototype.chain=Cs,N.prototype.commit=cd,N.prototype.next=o0,N.prototype.plant=Lf,N.prototype.reverse=s0,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=Pf,N.prototype.first=N.prototype.head,Wo&&(N.prototype[Wo]=a0),N},qs=pf();po?((po.exports=qs)._=qs,Ql._=qs):Dr._=qs}).call(Ps)})(Ep,Ep.exports);var tt=Ep.exports;function m2(e,t,r){const n=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],i=e.length;let o=0;for(;o<i;){const s=e[o];n[0]=Math.max(s[t]??Number.MIN_SAFE_INTEGER,n[0]),n[1]=Math.min(s[r]??Number.MAX_SAFE_INTEGER,n[1]),++o}return n}const Ck=/\\(\\)?/g,_k=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function en(e,t,r){if(Sr(e)){const n=[];t.replace(_k,(u,...d)=>{let h=u;return Sr(d[1])?h=d[2].replace(Ck,"$1"):Sr(d[0])&&(h=d[0].trim()),n.push(h),""});let i=e,o=0;const s=n.length;for(;Sr(i)&&o<s;)i=i==null?void 0:i[n[o++]];return Sr(i)?i:r??"--"}return r??"--"}function Sr(e){return e!=null}function Em(e,t,r,n){const i=new Path2D;if(t.length>1){i.moveTo(t[0],n);for(let o=0;o<t.length;o++)i.lineTo(t[o],r[o]);i.lineTo(t[t.length-1],n)}return i}function Pl(e,t,r,n,i){if(t.length===0)return;const o=e.canvas;e.save(),e.fillStyle=i,e.clip(Em(e,t,r,o.height)),e.fill(Em(e,t,n,0)),e.restore()}function so(e,t){const r=[],n=2/(t+1);let i=0;for(let o=0;o<t;o++)i+=e[o];i/=t,r[t-1]=i;for(let o=t;o<e.length;o++){const s=(e[o]-r[o-1])*n+r[o-1];r[o]=s}for(let o=0;o<t-1;o++)r[o]=r[t-1];return r}function y2(e,t){const r=[];for(let n=0;n<e.length;n++){if(n<t-1){r[n]=0;continue}let i=0;for(let o=0;o<t;o++)i+=e[n-o];r[n]=i/t}return r}function Al(e){if(e.startsWith("rgb(")){const o=e.match(/\d+/g);if(o&&o.length===3)return{r:parseInt(o[0]),g:parseInt(o[1]),b:parseInt(o[2])}}let t=e.replace(/^#/,"");if(!/^[0-9A-Fa-f]{6}$/.test(t))return{r:233,g:30,b:99};const r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return{r,g:n,b:i}}function Sk(){return{target:{color:"#279d8233"},loss:{color:"#f2385a33"},midLine:{color:"#76808F80",size:1},targetText:{backgroundColor:"#279d82"},lossText:{backgroundColor:"#f2385a"}}}function za(e,t,r){if(r==="top"){if(!tt.isNumber(e.value)||!tt.isNumber(t.value))return;e.value<t.value&&(e.value=t.value)}else if(r==="bottom"){if(!tt.isNumber(e.value)||!tt.isNumber(t.value))return;e.value>t.value&&(e.value=t.value)}else r==="vertical"?(e.timestamp=t.timestamp,e.dataIndex=t.dataIndex):e.value=t.value}function Mm(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}}function kk(e){return({coordinates:t,overlay:r,yAxis:n,xAxis:i})=>{var o,s,u,d,h;if(!Sr(n)||!Sr(i))return[];if(t.length<2)return[];const p=[];return p.push({type:"rect",attrs:Mm(t[0],t[1]),styles:e?(o=r.styles)==null?void 0:o.target:(s=r.styles)==null?void 0:s.loss}),p.push({type:"line",attrs:{coordinates:[{x:t[0].x,y:t[1].y},t[1]]},styles:(u=r.styles)==null?void 0:u.midLine}),Sr(t[2])&&p.push({type:"rect",attrs:Mm(t[1],t[2]),styles:e?(d=r.styles)==null?void 0:d.loss:(h=r.styles)==null?void 0:h.target}),p}}function Tk(e){return({chart:t,coordinates:r,overlay:n,yAxis:i,xAxis:o})=>{var s,u,d,h,p,g;if(!Sr(i)||!Sr(o))return[];if(r.length<3)return[];if(n.currentStep!==-1)return[];const m=n.extendData;if(!m.hovered&&!m.selected)return[];const b=t.getLocale(),x=n.points;if(!tt.isNumber(x[0].value)||!tt.isNumber(x[1].value)||!tt.isNumber(x[2].value)||!tt.isNumber(x[0].timestamp)||!tt.isNumber(x[1].timestamp)||!tt.isNumber(x[2].timestamp))return[];let C=0;i.isInCandle()?C=((s=t.getSymbol())==null?void 0:s.pricePrecision)??2:t.getIndicators({paneId:n.paneId}).forEach(W=>{C=Math.max(C,W.precision)});const _=[],k=(o.convertTimestampToPixel(x[0].timestamp)+o.convertTimestampToPixel(x[1].timestamp))/2,M=t.getDecimalFold().format(t.getThousandsSeparator().format((x[0].value-x[1].value).toFixed(C))),L=100*(x[0].value/x[1].value-1),A=I(e?"target":"loss",b);_.push({type:"text",attrs:{x:k,y:r[0].y,text:`${A}${M} (${L.toFixed(2)}%)`,baseline:"bottom",align:"center"},styles:e?(u=n.styles)==null?void 0:u.targetText:(d=n.styles)==null?void 0:d.lossText});const P=t.getDecimalFold().format(t.getThousandsSeparator().format((x[1].value-x[2].value).toFixed(C))),$=-100*(x[2].value/x[1].value-1),R=I(e?"loss":"target",b);_.push({type:"text",attrs:{x:k,y:r[2].y,text:`${R}${P} (${$.toFixed(2)}%)`,baseline:"top",align:"center"},styles:e?(h=n.styles)==null?void 0:h.lossText:(p=n.styles)==null?void 0:p.targetText});const z=e?L/$:$/L;if(!tt.isNumber(z)||z<=0)return _;const B=I("riskReward",b);return _.push({type:"text",attrs:{x:k,y:r[1].y,text:`${B}${z.toFixed(2)}`,baseline:"middle",align:"center"},styles:(g=n.styles)==null?void 0:g.targetText}),_}}function b2(e){return t=>{const r=kk(e)(t),n=Tk(e)(t);return[...r,...n]}}const x2={styles:Sk(),totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,extendData:{hovered:!1,selected:!1},onMouseEnter:({overlay:e})=>{const t=e.extendData;return t.hovered=!0,!0},onMouseLeave:({overlay:e})=>{const t=e.extendData;return t.hovered=!1,!0},onSelected:({overlay:e})=>{const t=e.extendData;return t.selected=!0,!0},onDeselected:({overlay:e})=>{const t=e.extendData;return t.selected=!1,!0},performEventPressedMove:({points:e,performPoint:t,performPointIndex:r})=>{r===0?(za(t,e[1],"top"),za(e[2],t,"vertical")):r===1?(za(t,e[0],"bottom"),za(t,e[2],"top")):r===2&&(za(t,e[1],"bottom"),za(e[0],t,"vertical"))},performEventMoveForDrawing:({points:e,performPoint:t,currentStep:r})=>{r===2?za(t,e[0],"bottom"):r===3&&(za(t,e[1],"bottom"),e[1].timestamp===t.timestamp?za(t,e[0],"vertical"):za(e[0],t,"vertical"))}},Ek={name:"longPosition",createPointFigures:b2(!0),...x2},Mk={name:"shortPosition",createPointFigures:b2(!1),...x2},Ik=[ik,ok,ak,lk,sk,ck,uk,dk,hk,pk,fk,gk,vk,mk,yk,bk,xk,wk,Ek,Mk],w2={isMainIndicator:!0,isSubIndicator:!1,name:"volumeBars",shortName:"Volume",zLevel:-1,figures:[],styles:{bars:[{upColor:"rgba(0, 252, 0, 0.8)",downColor:"rgba(252, 0, 0, 0.8)",noChangeColor:"rgba(128, 128, 128, 0.8)"}],custom:[{opacity:.3}]},calc:e=>e.map(t=>({volume:t.volume,close:t.close,open:t.open})),draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i})=>{const{realFrom:o,realTo:s}=t.getVisibleRange(),{gapBar:u,halfGapBar:d}=t.getBarSpace(),{result:h}=r;let p=0;for(let b=o;b<s;b++){const x=h[b];x&&(p=Math.max(p,x.volume))}const g=n.height*.4,m=zd("rect");for(let b=o;b<s;b++){const x=h[b];if(x){const C=Math.round(x.volume/p*g),_=Lk(x.open<x.close?r.styles.bars[0].upColor:x.open>x.close?r.styles.bars[0].downColor:r.styles.bars[0].noChangeColor,r.styles.custom[0].opacity);new m({name:"rect",attrs:{x:i.convertToPixel(b)-d,y:n.height-C,width:u,height:C},styles:{color:_}}).draw(e)}}return!0}};function Lk(e,t){return e.replace(/rgba\((\d+), (\d+), (\d+), (.+)\)/,`rgba($1, $2, $3, ${t})`)}const C2={isMainIndicator:!0,isSubIndicator:!1,name:"Volume Profile Fixed Range",shortName:"Vol Profile",zLevel:-1,figures:[],calcParams:[{name:"Value Area Percentage",type:"number",value:.7,min:0,max:1}],styles:{lines:[{color:"#87CEFA",size:1,style:"dashed"},{color:"#ff0000",size:3},{color:"#87CEFA",size:1,style:"dashed"}],bars:[{upColor:"rgb(255,127,80)",downColor:"rgba(0, 128, 0, 0.8)"}]},calc:(e,t)=>e,createTooltipDataSource:({chart:e,indicator:t,crosshair:r})=>{var n,i,o;const s=t.result[r.dataIndex];return console.log(r.realX),s?{legends:[{title:"POC",value:{text:s.pocPrice.toFixed(2),color:"blue"}},{title:"Value Area Low",value:{text:s.valueAreaLowPrice.toFixed(2),color:"green"}},{title:"Value Area High",value:{text:s.valueAreaHighPrice.toFixed(2),color:((o=(i=(n=t==null?void 0:t.styles)==null?void 0:n.lines)==null?void 0:i[0])==null?void 0:o.color)??"white"}}]}:{}},draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s,u,d,h,p,g,m,b,x,C,_,k,M,L,A,P,$,R,z,B,W,X,ee,U,q,ie,le,ae,te,ce,ue,j,Z,pe;const{realFrom:Y,realTo:fe}=t.getVisibleRange(),{gapBar:ve,halfGapBar:$e}=t.getBarSpace(),Ie=Object.values(r.result).slice(Y,fe);let Oe=Math.max(40,Math.min(200,Math.floor(Ie.length/5)*2));n.height/Oe<ve+2&&(Oe=Math.floor(n.height/(ve+1)));const Ce=new Array(Oe).fill(0),Le=Math.min(...Ie.map(Dt=>Dt.low)),Ve=(Math.max(...Ie.map(Dt=>Dt.high))-Le)/Oe,je=zd("line"),qe=zd("rect");Ie.forEach(Dt=>{if(Dt.volume===void 0)return;const Ht=Math.max(0,Math.min(Oe-1,Math.floor((Dt.low-Le)/Ve))),Jt=Math.max(0,Math.min(Oe-1,Math.floor((Dt.high-Le)/Ve))),Gr=Dt.high-Dt.low;for(let ur=Ht;ur<=Jt;ur++){const Vr=Le+ur*Ve,kt=Vr+Ve,Ue=Math.max(Dt.low,Vr),Ct=Math.min(Dt.high,kt)-Ue;if(Ct>0){const xt=Ct/Gr;Ce[ur]+=Dt.volume*xt}}});const ht=Ce.indexOf(Math.max(...Ce)),vt=Le+(ht+.5)*Ve,bt=Ce.reduce((Dt,Ht)=>Dt+Ht,0),or=typeof((s=r.calcParams)==null?void 0:s[0])=="object"&&r.calcParams[0]!==null&&"value"in r.calcParams[0]?Number(r.calcParams[0].value):.7,dr=bt*or;let qt=0,It=0,mr=Ce.length-1;for(let Dt=ht;Dt>=0;Dt--)if(qt+=Ce[Dt],qt>dr/2){It=Dt;break}qt=0;for(let Dt=ht;Dt<Ce.length;Dt++)if(qt+=Ce[Dt],qt>dr/2){mr=Dt;break}const ln=Le+It*Ve,yn=Le+(mr+1)*Ve,cr={volumeProfile:Ce,pocPrice:vt,valueAreaLowPrice:ln,valueAreaHighPrice:yn};if(cr.volumeProfile=Ce,cr.pocPrice=vt,cr.valueAreaHighPrice=yn,cr.valueAreaLowPrice=ln,cr.volumeProfile[0]!==void 0){new je({name:"line",styles:{style:(h=(d=(u=r==null?void 0:r.styles)==null?void 0:u.lines)==null?void 0:d[1])==null?void 0:h.style,color:(m=(g=(p=r==null?void 0:r.styles)==null?void 0:p.lines)==null?void 0:g[1])==null?void 0:m.color,size:(C=(x=(b=r==null?void 0:r.styles)==null?void 0:b.lines)==null?void 0:x[1])==null?void 0:C.size},attrs:{coordinates:[{x:i.convertToPixel(Y),y:o.convertToPixel(cr.pocPrice)},{x:i.convertToPixel(fe),y:o.convertToPixel(cr.pocPrice)}]}}).draw(e),new je({name:"line",styles:{style:(M=(k=(_=r==null?void 0:r.styles)==null?void 0:_.lines)==null?void 0:k[0])==null?void 0:M.style,color:(P=(A=(L=r==null?void 0:r.styles)==null?void 0:L.lines)==null?void 0:A[0])==null?void 0:P.color,size:(z=(R=($=r==null?void 0:r.styles)==null?void 0:$.lines)==null?void 0:R[0])==null?void 0:z.size},attrs:{coordinates:[{x:i.convertToPixel(Y),y:o.convertToPixel(cr.valueAreaLowPrice)},{x:i.convertToPixel(fe),y:o.convertToPixel(cr.valueAreaLowPrice)}]}}).draw(e),new je({name:"line",styles:{style:(X=(W=(B=r==null?void 0:r.styles)==null?void 0:B.lines)==null?void 0:W[2])==null?void 0:X.style,color:(q=(U=(ee=r==null?void 0:r.styles)==null?void 0:ee.lines)==null?void 0:U[2])==null?void 0:q.color,size:(ae=(le=(ie=r==null?void 0:r.styles)==null?void 0:ie.lines)==null?void 0:le[2])==null?void 0:ae.size},attrs:{coordinates:[{x:i.convertToPixel(Y),y:o.convertToPixel(cr.valueAreaHighPrice)},{x:i.convertToPixel(fe),y:o.convertToPixel(cr.valueAreaHighPrice)}]}}).draw(e);let Dt=0;const Ht=n.height*.4;for(let Jt=0;Jt<cr.volumeProfile.length;Jt++)Dt=Math.max(Dt,cr.volumeProfile[Jt]);for(let Jt=0;Jt<Ce.length;Jt++){const Gr=Math.round(Ce[Jt]/Dt*Ht),ur=o.convertToPixel(Le+Jt*Ve),Vr=Jt>=It&&Jt<=mr?((ue=(ce=(te=r==null?void 0:r.styles)==null?void 0:te.bars)==null?void 0:ce[0])==null?void 0:ue.upColor)??"rgb(255,127,80)":((pe=(Z=(j=r==null?void 0:r.styles)==null?void 0:j.bars)==null?void 0:Z[0])==null?void 0:pe.downColor)??"rgba(0, 128, 0, 0.8)";new qe({name:"rect",attrs:{x:n.width-Gr,y:ur-$e,width:Gr,height:Math.min(17,ve)},styles:{color:Vr}}).draw(e)}}return!0}},Pk={isMainIndicator:!1,isSubIndicator:!0,name:"WR",shortName:"WR",calcParams:[{name:"period1",type:"number",value:6},{name:"period2",type:"number",value:10},{name:"period3",type:"number",value:14}],styles:{lines:[{color:"#A020F0",size:1},{color:"#FFD700",size:1},{color:"#FF6E6E",size:1}]},figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`wr${r+1}`,title:`WR${r+1}: `,type:"line"})),calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r;return e.reduce((o,s,u)=>{const d={},h=s.close;return i.forEach((p,g)=>{const m=p.value-1;if(u>=m){const b=m2(e.slice(u-m,u+1),"high","low"),x=b[0],C=b[1],_=x-C,k=n[g].key;d[k]=_===0?0:(h-x)/_*100}}),Object.keys(d).length>0&&(o[s.timestamp]=d),o},{})}},Ak={isMainIndicator:!1,isSubIndicator:!0,name:"TRIX",shortName:"TRIX",calcParams:[{name:"period",type:"number",value:12},{name:"maPeriod",type:"number",value:9}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0,h=0;const p={};return e.reduce((g,m,b)=>{var x;const C=m.close;if(n+=C,b>=r[0].value-1&&(b>r[0].value-1?i=(2*C+(r[0].value-1)*i)/(r[0].value+1):i=n/r[0].value,u+=i,b>=r[0].value*2-2&&(b>r[0].value*2-2?o=(2*i+(r[0].value-1)*o)/(r[0].value+1):o=u/r[0].value,d+=o,b>=r[0].value*3-3))){let _=0,k=0;b>r[0].value*3-3?(_=(2*o+(r[0].value-1)*s)/(r[0].value+1),k=(_-s)/s*100):_=d/r[0].value,s=_,p[m.timestamp]=k,h+=k;const M={trix:k};if(b>=r[0].value*3+r[1].value-4){M.maTrix=h/r[1].value;const L=(x=e[b-(r[1].value-1)])==null?void 0:x.timestamp;h-=p[L]??0}g[m.timestamp]=M}return g},{})}};function Im(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&n&&(n.close>n.open?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.close<n.open&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}}const Dk={isMainIndicator:!1,isSubIndicator:!0,name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},Im()],regenerateFigures:e=>{const t=e.map((r,n)=>({key:`ma${n+1}`,title:`MA${r}: `,type:"line"}));return t.push(Im()),t},calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r,o=[];return e.reduce((s,u,d)=>{const h=u.volume??0,p={volume:h,open:u.open,close:u.close};return i.forEach((g,m)=>{if(o[m]=(o[m]??0)+h,d>=g-1){const b=n[m].key;p[b]=o[m]/g,o[m]-=e[d-(g-1)].volume??0}}),s[u.timestamp]=p,s},{})}},Fk={isMainIndicator:!1,isSubIndicator:!0,name:"VR",shortName:"VR",calcParams:[{name:"params_1",type:"number",value:26},{name:"params_2",type:"number",value:6}],styles:{lines:[{color:"#FF6E6E",size:2},{color:"#FFD700",size:4}]},figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0;return e.reduce((u,d,h)=>{var p;const g={},m=d.close,b=(e[h-1]??d).close,x=d.volume??0;if(m>b?n+=x:m<b?i+=x:o+=x,h>=r[0].value-1){const C=o/2;i+C===0?g.vr=0:g.vr=(n+C)/(i+C)*100,s+=g.vr,h>=r[0].value+r[1].value-2&&(g.maVr=s/r[1].value,s-=((p=u[e[h-(r[1].value-1)].timestamp])==null?void 0:p.vr)??0);const _=e[h-(r[0].value-1)],k=e[h-r[0].value]??_,M=_.close,L=_.volume??0;M>k.close?n-=L:M<k.close?i-=L:o-=L,u[d.timestamp]=g}return u},{})}},Rk={isMainIndicator:!1,isSubIndicator:!0,name:"KDJ",shortName:"KDJ",calcParams:[{name:"period",type:"number",value:9},{name:"dPeriod",type:"number",value:3},{name:"jPeriod",type:"number",value:3}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n={};return e.reduce((i,o,s)=>{var u;const d=o.close;if(s>=r[0].value-1){const h=m2(e.slice(s-(r[0].value-1),s+1),"high","low"),p=h[0],g=h[1],m=p-g,b=(d-g)/(m===0?1:m)*100,x=(u=e[s-1])==null?void 0:u.timestamp,C=x?n[x]:void 0,_=((r[1].value-1)*((C==null?void 0:C.k)??50)+b)/r[1].value,k=((r[2].value-1)*((C==null?void 0:C.d)??50)+_)/r[2].value,M=3*_-2*k,L={k:_,d:k,j:M};n[o.timestamp]=L,i[o.timestamp]=L}return i},{})}},Ok={isMainIndicator:!0,isSubIndicator:!1,name:"SAR",shortName:"SAR",series:"price",calcParams:[{name:"startAf",type:"number",value:2},{name:"step",type:"number",value:2},{name:"maxAf",type:"number",value:20}],precision:2,shouldOhlc:!0,styles:{circles:[{upColor:"#FF7F50",downColor:"#A020F0",noChangeColor:"#A8A8A8"}]},figures:[{key:"sar",title:"SAR: ",type:"circle",styles:({data:e,indicator:t,defaultStyles:r})=>{const{current:n}=e,i=(n==null?void 0:n.sar)??Number.MIN_SAFE_INTEGER,o=(((n==null?void 0:n.high)??0)+((n==null?void 0:n.low)??0))/2;return{color:i<o?en(t.styles,"circles[0].upColor",r.circles[0].upColor):en(t.styles,"circles[0].downColor",r.circles[0].downColor)}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value/100,i=r[1].value/100,o=r[2].value/100;let s=n,u=-100,d=!1,h=0;return e.reduce((p,g,m)=>{const b=h,x=g.high,C=g.low;if(d){(u===-100||u<x)&&(u=x,s=Math.min(s+i,o)),h=b+s*(u-b);const _=Math.min(e[Math.max(1,m)-1].low,C);h>g.low?(h=u,s=n,u=-100,d=!d):h>_&&(h=_)}else{(u===-100||u>C)&&(u=C,s=Math.min(s+i,o)),h=b+s*(u-b);const _=Math.max(e[Math.max(1,m)-1].high,x);h<g.high?(h=u,s=0,u=-100,d=!d):h<_&&(h=_)}return p[g.timestamp]={high:x,low:C,sar:h},p},{})}},Nk={isMainIndicator:!1,isSubIndicator:!0,name:"ROC",shortName:"ROC",calcParams:[{name:"period",type:"number",value:12},{name:"maPeriod",type:"number",value:6}],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0;const i={};return e.reduce((o,s,u)=>{var d;if(u>=r[0].value-1){const h=s.close,p=(e[u-r[0].value]??e[u-(r[0].value-1)]).close;let g=0;p!==0&&(g=(h-p)/p*100),i[s.timestamp]=g,n+=g;const m={roc:g};if(u>=r[0].value-1+r[1].value-1){m.maRoc=n/r[1].value;const b=(d=e[u-(r[1].value-1)])==null?void 0:d.timestamp;n-=i[b]??0}o[s.timestamp]=m}return o},{})}},zk={isMainIndicator:!1,isSubIndicator:!0,name:"RSI",shortName:"RSI",calcParams:[{name:"period1",type:"number",value:6},{name:"period2",type:"number",value:12},{name:"period3",type:"number",value:24}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#ff0000",size:1}]},figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>{const n=r+1;return{key:`rsi${n}`,title:`RSI${n}: `,type:"line"}}),calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r,o=[],s=[];return e.reduce((u,d,h)=>{const p={},g=(e[h-1]??d).close,m=d.close-g;return i.forEach((b,x)=>{if(m>0?o[x]=(o[x]??0)+m:s[x]=(s[x]??0)+Math.abs(m),h>=b.value-1){const C=n[x].key;s[x]!==0?p[C]=100-100/(1+o[x]/s[x]):p[C]=0;const _=e[h-(b.value-1)],k=e[h-b.value]??_,M=_.close-k.close;M>0?o[x]-=M:s[x]-=Math.abs(M)}}),Object.keys(p).length>0&&(u[d.timestamp]=p),u},{})}},Bk={isMainIndicator:!0,isSubIndicator:!1,name:"SMA",shortName:"SMA",series:"price",calcParams:[{name:"period1",type:"number",value:12},{name:"period2",type:"number",value:2}],precision:2,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:(e,t)=>{const r=t.calcParams;let n=0,i=0;return e.reduce((o,s,u)=>{const d=s.close;return n+=d,u>=r[0].value-1&&(u>r[0].value-1?i=(d*r[1].value+i*(r[0].value-r[1].value+1))/(r[0].value+1):i=n/r[0].value,o[s.timestamp]={sma:i}),o},{})}},$k={isMainIndicator:!1,isSubIndicator:!0,name:"PVT",shortName:"PVT",precision:2,styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:e=>{let t=0;return e.reduce((r,n,i)=>{const o=n.close,s=n.volume??0;if(!o||o<=0)return r;if(i===0)return t=0,r[n.timestamp]={pvt:0},r;const u=e[i-1].close;if(!u||u<=0)return r;const d=(o-u)/u*s;return t+=d,r[n.timestamp]={pvt:Number(t.toFixed(2))},r},{})}},Vk={isMainIndicator:!1,isSubIndicator:!0,name:"PSY",shortName:"PSY",calcParams:[{name:"params_1",type:"number",value:12},{name:"params_2",type:"number",value:6}],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0;const o=[],s=[];return e.reduce((u,d,h)=>{const p={},g=(e[h-1]??d).close,m=d.close-g>0?1:0;return o.push(m),n+=m,h>=r[0].value-1&&(p.psy=n/r[0].value*100,i+=p.psy,h>=r[0].value+r[1].value-2&&(p.maPsy=i/r[1].value,i-=s[h-(r[1].value-1)].psy??0),n-=o[h-(r[0].value-1)]),s.push(p),u[d.timestamp]=p,u},{})}},Wk={isMainIndicator:!0,isSubIndicator:!1,name:"MA",shortName:"MA",series:"price",calcParams:[{name:"ma1",type:"number",value:5},{name:"ma2",type:"number",value:10},{name:"ma3",type:"number",value:30},{name:"ma4",type:"number",value:60}],precision:2,shouldOhlc:!0,styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`ma${r+1}`,title:`MA${t.value}: `,type:"line"})),calc:(e,t)=>{const r=t.calcParams,n=[];return e.reduce((i,o,s)=>{const u={},d=o.close;return r.forEach((h,p)=>{if(n[p]=(n[p]??0)+d,s>=h.value-1){const g=t.figures[p].key;u[g]=n[p]/h.value,n[p]-=e[s-(h.value-1)].close}}),Object.keys(u).length>0&&(i[o.timestamp]=u),i},{})}},Uk={isMainIndicator:!1,isSubIndicator:!0,name:"MTM",shortName:"MTM",calcParams:[{name:"params_1",type:"number",value:12},{name:"params_2",type:"number",value:6}],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0;const i={};return e.reduce((o,s,u)=>{var d;if(u>=r[0].value){const h=s.close,p=e[u-r[0].value].close,g=h-p;i[s.timestamp]=g,n+=g;const m={mtm:g};if(u>=r[0].value+r[1].value-1){m.maMtm=n/r[1].value;const b=(d=e[u-(r[1].value-1)])==null?void 0:d.timestamp;n-=i[b]??0}o[s.timestamp]=m}return o},{})}},Hk={isMainIndicator:!1,isSubIndicator:!0,name:"DMI",shortName:"DMI",calcParams:[{name:"period",type:"number",value:14},{name:"adxrPeriod",type:"number",value:6}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=0;const g={};return e.reduce((m,b,x)=>{var C;const _=e[x-1]??b,k=_.close,M=b.high,L=b.low,A=M-L,P=Math.abs(M-k),$=Math.abs(k-L),R=M-_.high,z=_.low-L,B=Math.max(Math.max(A,P),$),W=R>0&&R>z?R:0,X=z>0&&z>R?z:0;if(n+=B,i+=W,o+=X,x>=r[0].value-1){x>r[0].value-1?(s=s-s/r[0].value+B,u=u-u/r[0].value+W,d=d-d/r[0].value+X):(s=n,u=i,d=o);let ee=0,U=0;s!==0&&(ee=u*100/s,U=d*100/s);let q=0;if(U+ee!==0&&(q=Math.abs(U-ee)/(U+ee)*100),h+=q,x>=r[0].value*2-2){x>r[0].value*2-2?p=(p*(r[0].value-1)+q)/r[0].value:p=h/r[0].value,g[b.timestamp]=p;const ie={pdi:ee,mdi:U,adx:p};if(x>=r[0].value*2+r[1].value-3){const le=(C=e[x-(r[1].value-1)])==null?void 0:C.timestamp,ae=g[le]??0;ie.adxr=(ae+p)/2}m[b.timestamp]=ie}else m[b.timestamp]={pdi:ee,mdi:U}}return m},{})}},Yk={isMainIndicator:!1,isSubIndicator:!0,name:"EMV",shortName:"EMV",calcParams:[{name:"params_1",type:"number",value:14},{name:"params_2",type:"number",value:9}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0;const i=[],o={};return e.reduce((s,u,d)=>{if(d>0){const h=e[d-1],p=u.high,g=u.low,m=u.volume??0,b=(p+g)/2-(h.high+h.low)/2;let x;if(m===0||p-g===0)x=0;else{const _=m/1e8/(p-g);x=b/_}o[u.timestamp]=x,n+=x,i.push(x);const C={emv:x};d>=r[0].value&&(C.maEmv=n/r[0].value,n-=i[d-r[0].value]),s[u.timestamp]=C}return s},{})}},Xk={isMainIndicator:!0,isSubIndicator:!1,name:"EMA",shortName:"EMA",series:"price",calcParams:[{name:"period1",type:"number",value:6},{name:"period2",type:"number",value:12},{name:"period3",type:"number",value:20}],styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`ema${r+1}`,title:`EMA${t.value}: `,type:"line"})),calc:(e,t)=>{const r=t.calcParams;let n=0;const i=[];return e.reduce((o,s,u)=>{const d={},h=s.close;return n+=h,r.forEach((p,g)=>{if(u>=p.value-1){u>p.value-1?i[g]=(2*h+(p.value-1)*i[g])/(p.value+1):i[g]=n/p.value;const m=t.figures[g].key;d[m]=i[g]}}),Object.keys(d).length>0&&(o[s.timestamp]=d),o},{})}},jk={isMainIndicator:!1,isSubIndicator:!0,name:"CR",shortName:"CR",calcParams:[{name:"cr",type:"number",value:26},{name:"ma1",type:"number",value:10},{name:"ma2",type:"number",value:20},{name:"ma3",type:"number",value:40},{name:"ma4",type:"number",value:60}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#FFFF00",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=Math.ceil(r[1].value/2.5+1),i=Math.ceil(r[2].value/2.5+1),o=Math.ceil(r[3].value/2.5+1),s=Math.ceil(r[4].value/2.5+1);let u=0;const d=[];let h=0;const p=[];let g=0;const m=[];let b=0;const x=[],C={};return e.reduce((_,k,M)=>{var L,A,P,$;const R=e[M-1]??k,z=(R.high+R.close+R.low+R.open)/4,B=Math.max(0,k.high-z),W=Math.max(0,z-k.low);if(M>=r[0].value-1){let X;W!==0?X=B/W*100:X=0,C[k.timestamp]=X,u+=X,h+=X,g+=X,b+=X;const ee={cr:X};if(M>=r[0].value+r[1].value-2){d.push(u/r[1].value),M>=r[0].value+r[1].value+n-3&&(ee.ma1=d[d.length-1-n]);const U=(L=e[M-(r[1].value-1)])==null?void 0:L.timestamp;u-=C[U]??0}if(M>=r[0].value+r[2].value-2){p.push(h/r[2].value),M>=r[0].value+r[2].value+i-3&&(ee.ma2=p[p.length-1-i]);const U=(A=e[M-(r[2].value-1)])==null?void 0:A.timestamp;h-=C[U]??0}if(M>=r[0].value+r[3].value-2){m.push(g/r[3].value),M>=r[0].value+r[3].value+o-3&&(ee.ma3=m[m.length-1-o]);const U=(P=e[M-(r[3].value-1)])==null?void 0:P.timestamp;g-=C[U]??0}if(M>=r[0].value+r[4].value-2){x.push(b/r[4].value),M>=r[0].value+r[4].value+s-3&&(ee.ma4=x[x.length-1-s]);const U=($=e[M-(r[4].value-1)])==null?void 0:$.timestamp;b-=C[U]??0}_[k.timestamp]=ee}return _},{})}},Zk={isMainIndicator:!1,isSubIndicator:!0,name:"DMA",shortName:"DMA",calcParams:[{name:"params_1",type:"number",value:10},{name:"params_2",type:"number",value:50},{name:"params_3",type:"number",value:10}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=Math.max(r[0].value,r[1].value);let i=0,o=0,s=0;const u={};return e.reduce((d,h,p)=>{var g;const m=h.close;i+=m,o+=m;let b=0,x=0;if(p>=r[0].value-1&&(b=i/r[0].value,i-=e[p-(r[0].value-1)].close),p>=r[1].value-1&&(x=o/r[1].value,o-=e[p-(r[1].value-1)].close),p>=n-1){const C=b-x;u[h.timestamp]=C,s+=C;const _={dma:C};if(p>=n+r[2].value-2){_.ama=s/r[2].value;const k=(g=e[p-(r[2].value-1)])==null?void 0:g.timestamp;s-=u[k]??0}d[h.timestamp]=_}return d},{})}},Gk={isMainIndicator:!0,isSubIndicator:!1,name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[{name:"period1",type:"number",value:3},{name:"period2",type:"number",value:6},{name:"period3",type:"number",value:12},{name:"period4",type:"number",value:24}],shouldOhlc:!0,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams.map(s=>s.value),n=Math.max(...r),i=[],o=[];return e.reduce((s,u,d)=>{const h=u.close;if(r.forEach((p,g)=>{i[g]=(i[g]??0)+h,d>=p-1&&(o[g]=i[g]/p,i[g]-=e[d-(p-1)].close)}),d>=n-1){let p=0;o.forEach(m=>{p+=m});const g={bbi:p/4};s[u.timestamp]=g}return s},{})}},Qk={isMainIndicator:!1,isSubIndicator:!0,name:"CCI",shortName:"CCI",calcParams:[{name:"period",type:"number",value:20}],styles:{lines:[{color:"#007FFF",size:1}]},figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value-1;let i=0;const o=[];return e.reduce((s,u,d)=>{const h={},p=(u.high+u.low+u.close)/3;if(i+=p,o.push(p),d>=n){const g=i/r[0].value,m=o.slice(d-n,d+1);let b=0;m.forEach(_=>{b+=Math.abs(_-g)});const x=b/r[0].value;h.cci=x!==0?(p-g)/x/.015:0;const C=(e[d-n].high+e[d-n].low+e[d-n].close)/3;i-=C,s[u.timestamp]=h}return s},{})}},Kk={isMainIndicator:!1,isSubIndicator:!0,name:"BIAS",shortName:"BIAS",calcParams:[{name:"bias1",type:"number",value:6},{name:"bias2",type:"number",value:12},{name:"bias3",type:"number",value:24}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#ff0000",size:1}]},figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`bias${r+1}`,title:`BIAS${t.value}: `,type:"line"})),calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r,o=[];return e.reduce((s,u,d)=>{const h={},p=u.close;return i.forEach((g,m)=>{if(o[m]=(o[m]??0)+p,d>=g.value-1){const b=o[m]/g.value,x=n[m].key;h[x]=(p-b)/b*100,o[m]-=e[d-(g.value-1)].close}}),Object.keys(h).length>0&&(s[u.timestamp]=h),s},{})}};function qk(e,t){const r=e.length;let n=0;return e.forEach(i=>{const o=i.close-t;n+=o*o}),n=Math.abs(n),Math.sqrt(n/r)}const Jk={isMainIndicator:!0,isSubIndicator:!1,name:"BOLL",shortName:"BOLL",series:"price",calcParams:[{name:"period",type:"number",value:20},{name:"standard_deviation",type:"number",value:2}],precision:2,shouldOhlc:!0,styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value-1;let i=0;return e.reduce((o,s,u)=>{const d=s.close,h={};if(i+=d,u>=n){h.mid=i/r[0].value;const p=qk(e.slice(u-n,u+1),h.mid);h.up=h.mid+r[1].value*p,h.dn=h.mid-r[1].value*p,i-=e[u-n].close,o[s.timestamp]=h}return o},{})}},eT={isMainIndicator:!1,isSubIndicator:!0,name:"BRAR",shortName:"BRAR",calcParams:[{name:"brar",type:"number",value:26}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0].value;let n=0,i=0,o=0,s=0;return e.reduce((u,d,h)=>{const p={},g=d.high,m=d.low,b=d.open,x=(e[h-1]??d).close;if(o+=g-b,s+=b-m,n+=g-x,i+=x-m,h>=r-1){s!==0?p.ar=o/s*100:p.ar=0,i!==0?p.br=n/i*100:p.br=0;const C=e[h-(r-1)],_=C.high,k=C.low,M=C.open,L=(e[h-r]??e[h-(r-1)]).close;n-=_-L,i-=L-k,o-=_-M,s-=M-k}return u[d.timestamp]=p,u},{})}},tT={isMainIndicator:!0,isSubIndicator:!1,name:"Average Price",shortName:"AVP",series:"price",precision:2,styles:{lines:[{color:"#A020F0",size:1}]},figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:e=>e.reduce((t,r)=>{const n={};if((r.volume??0)!==0){const i=(r.high+r.low+r.close)/3;n.avp=i,t[r.timestamp]=n}return t},{})},rT={isMainIndicator:!1,isSubIndicator:!0,name:"AO",shortName:"AO",calcParams:[{name:"shortPeriod",type:"number",value:5},{name:"longPeriod",type:"number",value:34}],styles:{bars:[{upColor:"rgba(0, 252, 0, 0.8)",downColor:"rgba(252, 0, 0, 0.8)"}]},figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const{prev:n,current:i}=e,o=(n==null?void 0:n.ao)??Number.MIN_SAFE_INTEGER,s=(i==null?void 0:i.ao)??Number.MIN_SAFE_INTEGER;let u="";s>o?t.styles&&(u=en(t.styles,"bars[0].upColor",t.styles.bars[0].upColor)):t.styles&&(u=en(t.styles,"bars[0].downColor",t.styles.bars[0].downColor));const d=s>o?"stroke":"fill";return{color:u,style:d,borderColor:u}}}],calc:(e,t)=>{const r=t.calcParams,n=Math.max(r[0].value,r[1].value);let i=0,o=0,s=0,u=0;return e.reduce((d,h,p)=>{const g={},m=(h.low+h.high)/2;if(i+=m,o+=m,p>=r[0].value-1){s=i/r[0].value;const b=e[p-(r[0].value-1)];i-=(b.low+b.high)/2}if(p>=r[1].value-1){u=o/r[1].value;const b=e[p-(r[1].value-1)];o-=(b.low+b.high)/2}return p>=n-1&&(g.ao=s-u,d[h.timestamp]=g),d},{})}},nT={isMainIndicator:!0,isSubIndicator:!1,name:"WEMA",shortName:"WEMA",zLevel:0,series:"price",calcParams:[{name:"period",type:"number",value:14}],precision:2,figures:[{key:"WEMA",title:"WEMA: ",type:"line"}],styles:{lines:[{style:"solid",color:"yellow",size:1}]},shouldOhlc:!0,calc:(e,t)=>{const r=t.calcParams[0].value,n=1/r;let i=0,o=0;return e.reduce((s,u,d)=>{const h=u.close;return d<r?(o+=h,d===r-1&&(i=o/r,s[u.timestamp]={wema:i})):(i=(h-i)*n+i,s[u.timestamp]={wema:i}),s},{})},draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s;const{realFrom:u,realTo:d}=t.getVisibleRange(),{result:h}=r,p=zd("line");for(let g=u;g<d;g++){const m=h[g];m&&new p({name:"line",styles:{style:r.styles.lines[0].style,color:r.styles.lines[0].color,size:r.styles.lines[0].size},attrs:{coordinates:[{x:i.convertToPixel(g),y:o.convertToPixel(m.wema)},{x:i.convertToPixel(g+1),y:o.convertToPixel((s=h[g+1])==null?void 0:s.wema)}]}}).draw(e)}return!0}},iT={name:"Volume Weighted Average Price",shortName:"VWAP",series:"price",calcParams:[{name:"anchorPeriod",type:"select",value:"Monthly",options:[{value:"None",label:"None"},{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarter",label:"Quarter"},{value:"Year",label:"Year"}]},{name:"source",type:"select",value:"HLC3",options:[{value:"Close",label:"Close"},{value:"HLC3",label:"HLC3"},{value:"HLC2",label:"HLC2"},{value:"Weighted",label:"Weighted"},{value:"Median",label:"Median"},{value:"Open",label:"Open"},{value:"High",label:"High"},{value:"OHLC4",label:"OHLC4"},{value:"HLCC4",label:"HLCC4"}]},{name:"offset",type:"number",value:0,min:-100,max:100},{name:"bandsMode",type:"select",value:"Standard Deviation",options:[{value:"Standard Deviation",label:"Standard Deviation"},{value:"Percentage",label:"Percentage"},{value:"Fixed",label:"Fixed"}]},{name:"bandsMultiplier",type:"select",value:"2",options:[{value:"0.5",label:"0.5"},{value:"1",label:"1.0"},{value:"1.5",label:"1.5"},{value:"2",label:"2.0"},{value:"2.5",label:"2.5"},{value:"3",label:"3.0"}]},{name:"showBands",type:"boolean",value:!0},{name:"showShading",type:"boolean",value:!0}],precision:2,isMainIndicator:!0,isSubIndicator:!1,styles:{lines:[{style:"solid",color:"#FF7F50",size:1},{style:"dashed",color:"#4CAF50",size:1},{style:"dashed",color:"#F44336",size:1}]},figures:[{key:"vwap",title:"VWAP: ",type:"line"},{key:"upperBand",title:"Upper: ",type:"line"},{key:"lowerBand",title:"Lower: ",type:"line"}],calc:(e,t)=>{var r,n,i,o,s;const u=[],d=t.calcParams,h=((r=d.find(L=>L.name==="anchorPeriod"))==null?void 0:r.value)??"None",p=((n=d.find(L=>L.name==="source"))==null?void 0:n.value)??"Close",g=((i=d.find(L=>L.name==="offset"))==null?void 0:i.value)??0,m=((o=d.find(L=>L.name==="bandsMode"))==null?void 0:o.value)??"Standard Deviation",b=Number(((s=d.find(L=>L.name==="bandsMultiplier"))==null?void 0:s.value)??"2"),x=[],C=[];let _=0,k=0;const M=14;for(let L=0;L<e.length;L++){const A=e[L];if(A.close===void 0||A.volume===void 0){u[L]={vwap:0};continue}let P;switch(p){case"Open":P=A.open;break;case"High":P=A.high;break;case"Close":P=A.close;break;case"HLC3":P=(A.high+A.low+A.close)/3;break;case"HLC2":P=(A.high+A.low)/2;break;case"OHLC4":P=(A.open+A.high+A.low+A.close)/4;break;case"HLCC4":P=(A.high+A.low+A.close+A.close)/4;break;case"Volume":P=A.volume;break;default:P=A.close}if(h!=="None"){const z=A.timestamp;let B=!1;switch(h){case"Daily":B=Math.floor(z/(1440*60*1e3))!==Math.floor(k/(1440*60*1e3));break;case"Weekly":B=Math.floor(z/(10080*60*1e3))!==Math.floor(k/(10080*60*1e3));break;case"Monthly":const W=new Date(z),X=new Date(k);B=W.getMonth()!==X.getMonth()||W.getFullYear()!==X.getFullYear();break;case"Quarter":const ee=new Date(z),U=new Date(k),q=Math.floor(ee.getMonth()/3),ie=Math.floor(U.getMonth()/3);B=q!==ie||ee.getFullYear()!==U.getFullYear();break;case"Year":const le=new Date(z),ae=new Date(k);B=le.getFullYear()!==ae.getFullYear();break}B&&(_=L,k=z)}const $=P*A.volume;x[L]=$,C[L]=A.volume;const R=h!=="None"?L-_+1:M;if(L>=(h!=="None"?_:M-1)){let z=0,B=0,W=0;for(let ie=0;ie<R;ie++)z+=x[L-ie],B+=C[L-ie];const X=B!==0?Number((z/B).toFixed(2)):0;u[L]={vwap:X};for(let ie=0;ie<R;ie++){const le=e[L-ie];if(le.volume===void 0)continue;let ae;switch(p){case"Open":ae=le.open;break;case"High":ae=le.high;break;case"Close":ae=le.close;break;case"HLC3":ae=(le.high+le.low+le.close)/3;break;case"HLC2":ae=(le.high+le.low)/2;break;case"OHLC4":ae=(le.open+le.high+le.low+le.close)/4;break;case"HLCC4":ae=(le.high+le.low+le.close+le.close)/4;break;default:ae=le.close}const te=ae-X;W+=te*te*le.volume,B+=le.volume}const ee=Math.sqrt(W/B);let U=X,q=X;switch(m){case"Standard Deviation":U=X+ee*b,q=X-ee*b;break;case"Percentage":const ie=b/100;U=X*(1+ie),q=X*(1-ie);break;case"Fixed":U=X+b,q=X-b;break}if(g!==0){const ie=L+g;if(ie>=0&&ie<u.length&&(u[ie]={vwap:X,upperBand:U,lowerBand:q},g>0))for(let le=L+1;le<ie;le++)le<u.length&&(u[le]={vwap:X,upperBand:U,lowerBand:q})}else u[L]={vwap:X,upperBand:U,lowerBand:q}}else u[L]={vwap:0}}return u},shouldOhlc:!0,draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s,u,d,h,p;const{realFrom:g,realTo:m}=t.getVisibleRange(),{result:b}=r,x=zd("line"),C=r.calcParams,_=((s=C.find(M=>M.name==="showBands"))==null?void 0:s.value)??!0,k=((u=C.find(M=>M.name==="showShading"))==null?void 0:u.value)??!1;for(let M=g;M<m;M++){const L=b[M];L&&L.vwap!==0&&new x({name:"line",styles:{style:r.styles.lines[0].style,color:r.styles.lines[0].color,size:r.styles.lines[0].size},attrs:{coordinates:[{x:i.convertToPixel(M),y:o.convertToPixel(L.vwap)},{x:i.convertToPixel(M+1),y:o.convertToPixel((d=b[M+1])==null?void 0:d.vwap)}]}}).draw(e)}if(_){const M=[],L=[],A=[];for(let P=g;P<=m;P++){const $=b[P];$&&$.upperBand!==void 0&&$.lowerBand!==void 0&&(M.push(i.convertToPixel(P)),L.push(o.convertToPixel($.upperBand)),A.push(o.convertToPixel($.lowerBand)))}if(k&&M.length>0){const P=[];for(let z=g;z<=m;z++){const B=b[z];B&&B.vwap!==0&&P.push(o.convertToPixel(B.vwap))}const $=Al(r.styles.lines[1].color??"#4CAF50");Pl(e,M,L,P,`rgba(${$.r}, ${$.g}, ${$.b}, 0.1)`);const R=Al(r.styles.lines[2].color??"#F44336");Pl(e,M,P,A,`rgba(${R.r}, ${R.g}, ${R.b}, 0.1)`)}for(let P=g;P<m;P++){const $=b[P];$&&$.vwap!==0&&$.upperBand!==void 0&&$.lowerBand!==void 0&&(new x({name:"line",styles:{style:r.styles.lines[1].style,color:r.styles.lines[1].color,size:r.styles.lines[1].size},attrs:{coordinates:[{x:i.convertToPixel(P),y:o.convertToPixel($.upperBand)},{x:i.convertToPixel(P+1),y:o.convertToPixel(((h=b[P+1])==null?void 0:h.upperBand)??$.upperBand)}]}}).draw(e),new x({name:"line",styles:{style:r.styles.lines[2].style,color:r.styles.lines[2].color,size:r.styles.lines[2].size},attrs:{coordinates:[{x:i.convertToPixel(P),y:o.convertToPixel($.lowerBand)},{x:i.convertToPixel(P+1),y:o.convertToPixel(((p=b[P+1])==null?void 0:p.lowerBand)??$.lowerBand)}]}}).draw(e))}}return!0}},oT={isMainIndicator:!1,isSubIndicator:!0,name:"ADL",shortName:"ADL",calcParams:[],styles:{lines:[{color:"#FF7F50",size:1}]},figures:[{key:"adl",title:"ADL: ",type:"line"}],calc:(e,t)=>{let r=0;return e.reduce((n,i,o)=>{const{high:s=0,low:u=0,close:d=0,volume:h=0}=i;if(!s||!u||!d||!h)return n[i.timestamp]={adl:r},n;let p=0;s!==u&&(p=(d-u-(s-d))/(s-u),p=Math.max(-1,Math.min(1,p)));const g=p*h;return r+=g,n[i.timestamp]={adl:Math.round(r)},n},{})}},aT={isMainIndicator:!1,isSubIndicator:!0,name:"Force Index",shortName:"FI",calcParams:[{name:"period",type:"number",value:13}],styles:{lines:[{color:"#5D69B1",size:1}]},figures:[{key:"fi",title:"FI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0];let n=0,i=2/(r.value+1);return e.reduce((o,s,u)=>{const{close:d=0,volume:h=0}=s,p=u>0?e[u-1].close:d,g=(d-p)*h;return u===0?n=g:n=(g-n)*i+n,o[s.timestamp]={fi:Math.round(n)},o},{})}},sT={isMainIndicator:!1,isSubIndicator:!0,name:"MFI",shortName:"MFI",calcParams:[{name:"period",type:"number",value:14}],precision:2,styles:{lines:[{style:"solid",color:"#FF7F50",size:1}]},figures:[{key:"mfi",title:"MFI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0].value,n=[];let i;return e.reduce((o,s,u)=>{const{high:d=0,low:h=0,close:p=0,volume:g=0}=s;if(!d||!h||!p||!g)return o;const m=(d+h+p)/3,b=m*g;if(i===void 0)return i=m,o;let x=0,C=0;if(m>i?x=b:m<i&&(C=b),n.push({positive:x,negative:C}),n.length>r&&n.shift(),n.length===r){const _=n.reduce((L,A)=>L+A.positive,0),k=n.reduce((L,A)=>L+A.negative,0);let M=50;k===0&&_>0?M=100:_===0&&k>0?M=0:k>0&&(M=100-100/(1+_/k)),o[s.timestamp]={mfi:Number(M.toFixed(t.precision))}}return i=m,o},{})}},lT={isMainIndicator:!1,isSubIndicator:!0,name:"OBV",shortName:"OBV",calcParams:[{name:"period",type:"number",value:30}],styles:{lines:[{color:"#A020F0",size:1},{color:"#007FFF",size:1}]},figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0;return e.reduce((o,s,u)=>{var d;const h=e[u-1]??s;s.close<h.close?i-=s.volume??0:s.close>h.close&&(i+=s.volume??0);const p={obv:i};return n+=i,u>=r[0].value-1&&(p.maObv=n/r[0].value,n-=((d=o[e[u-(r[0].value-1)].timestamp])==null?void 0:d.obv)??0),o[s.timestamp]=p,o},{})}},cT={isMainIndicator:!0,isSubIndicator:!1,name:"Chandelier Exit",shortName:"CE",series:"price",calcParams:[{name:"period",type:"number",value:22},{name:"multiplier",type:"number",value:3}],precision:2,shouldOhlc:!0,styles:{lines:[{style:"solid",color:"#26A69A",size:1},{style:"solid",color:"#EF5350",size:1}]},figures:[{key:"exitLong",title:"Long Exit: ",type:"line"},{key:"exitShort",title:"Short Exit: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value;let o=-1/0,s=1/0,u=0,d=e[0].close;return e.reduce((h,p,g)=>{const m=p,{high:b,low:x,close:C}=m,_=Math.max(b-x,Math.abs(b-d),Math.abs(x-d));if(u+=_,o=Math.max(o,b),s=Math.min(s,x),g>=n-1){const k=u/n,M=o-k*i,L=s+k*i;h[p.timestamp]={exitLong:M,exitShort:L};const A=g-(n-1),P=e[A],$=Math.max(P.high-P.low,Math.abs(P.high-(A>0?e[A-1].close:P.close)),Math.abs(P.low-(A>0?e[A-1].close:P.close)));u-=$,o=b,s=x;for(let R=0;R<n;R++){const z=e[g-R];o=Math.max(o,z.high),s=Math.min(s,z.low)}}return d=C,h},{})}},uT={isMainIndicator:!0,isSubIndicator:!1,name:"Keltner Channels",shortName:"KC",series:"price",calcParams:[{name:"maPeriod",type:"number",value:20},{name:"atrPeriod",type:"number",value:10},{name:"multiplier",type:"number",value:1},{name:"useSMA",type:"boolean",value:!1}],precision:2,shouldOhlc:!0,styles:{lines:[{style:"solid",color:"#FF0000",size:1},{style:"solid",color:"#4DB6AC",size:1},{style:"solid",color:"#4DB6AC",size:1}]},figures:[{key:"middle",title:"Middle: ",type:"line"},{key:"upper",title:"Upper: ",type:"line"},{key:"lower",title:"Lower: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=r[3].value,u=[];let d=0,h=0;const p=2/(n+1);let g=0,m=e[0].close;return e.reduce((b,x,C)=>{const _=x,{high:k,low:M,close:L}=_,A=Math.max(k-M,Math.abs(k-m),Math.abs(M-m));if(g+=A,d+=L,s?(u.push(L),u.length>n&&(d-=u[u.length-n-1])):C===0?h=L:h=(L-h)*p+h,C>=Math.max(n-1,i-1)){const P=s?d/Math.min(u.length,n):h,$=g/i;if(b[x.timestamp]={middle:P,upper:P+o*$,lower:P-o*$},C>=i){const R=C-i,z=e[R],B=Math.max(z.high-z.low,Math.abs(z.high-(R>0?e[R-1].close:z.close)),Math.abs(z.low-(R>0?e[R-1].close:z.close)));g-=B}}return m=L,b},{})}},dT={isMainIndicator:!0,isSubIndicator:!1,name:"WMA",shortName:"WMA",series:"price",calcParams:[{name:"period",type:"number",value:12}],precision:2,styles:{lines:[{color:"#B464EB"}]},figures:[{key:"wma",title:"WMA: ",type:"line"}],shouldOhlc:!0,calc:(e,t)=>{const r=t.calcParams[0].value,n=r*(r+1)/2;return e.reduce((i,o,s)=>{if(s>=r-1){let u=0;for(let d=0;d<r;d++)u+=e[s-d].close*(r-d);i[o.timestamp]={wma:u/n}}return i},{})}},hT={isMainIndicator:!0,isSubIndicator:!1,name:"Ichimoku Cloud",shortName:"IC",calcParams:[{name:"conversionPeriod",type:"number",value:9},{name:"basePeriod",type:"number",value:26},{name:"spanPeriod",type:"number",value:52},{name:"displacement",type:"number",value:26},{name:"showShading",type:"boolean",value:!0}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#32CD32",size:1},{color:"#FF4500",size:1},{color:"#1E90FF",size:1}]},figures:[{key:"conversion",title:"Conversion: ",type:"line"},{key:"base",title:"Base: ",type:"line"},{key:"spanA",title:"Span A: ",type:"line"},{key:"spanB",title:"Span B: ",type:"line"},{key:"laggingSpan",title:"Chikou: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=r[3].value,u=(p,g,m)=>{let b=-1/0,x=1/0;for(let C=Math.max(0,g-m+1);C<=g;C++)b=Math.max(b,p[C].high),x=Math.min(x,p[C].low);return{high:b,low:x}},d=[],h=[];return e.reduce((p,g,m)=>{const b={};if(m>=n-1){const{high:k,low:M}=u(e,m,n);b.conversion=(k+M)/2,d[m]=b.conversion}if(m>=i-1){const{high:k,low:M}=u(e,m,i);b.base=(k+M)/2,h[m]=b.base}const x=m-s;x>=0&&x>=Math.max(n,i)-1&&d[x]&&h[x]&&(b.spanA=(d[x]+h[x])/2);const C=m-s;if(C>=0&&C>=o-1){const{high:k,low:M}=u(e,C,o);b.spanB=(k+M)/2}const _=m+s;return _<e.length&&(b.laggingSpan=e[_].close),Object.keys(b).length>0&&(p[g.timestamp]=b),p},{})},draw:({ctx:e,indicator:t,xAxis:r,yAxis:n,chart:i})=>{var o,s,u,d,h,p,g;const m=t.result;if(!m)return!1;const{from:b,to:x}=i.getVisibleRange(),C=i.getDataList(),_=[],k=[],M=[];for(let L=b;L<x;L++)if(L<C.length){const A=C[L],P=m[A.timestamp];P!=null&&(_.push(r.convertToPixel(L)),P.spanA!=null&&k.push(n.convertToPixel(P.spanA)),P.spanB!=null&&M.push(n.convertToPixel(P.spanB)))}if((((o=t.calcParams.find(L=>L.name==="showShading"))==null?void 0:o.value)??!0)&&_.length>0&&k.length>0&&M.length>0){const L=Al(((d=(u=(s=t.styles)==null?void 0:s.lines)==null?void 0:u[2])==null?void 0:d.color)??"#32CD32");Pl(e,_,k,M,`rgba(${L.r}, ${L.g}, ${L.b}, 0.1)`);const A=Al(((g=(p=(h=t.styles)==null?void 0:h.lines)==null?void 0:p[3])==null?void 0:g.color)??"#FF4500");Pl(e,_,M,k,`rgba(${A.r}, ${A.g}, ${A.b}, 0.1)`)}return!1}},pT={isMainIndicator:!1,isSubIndicator:!0,name:"ATR",shortName:"ATR",series:"volume",calcParams:[{name:"period",type:"number",value:14}],precision:2,shouldOhlc:!1,styles:{lines:[{style:"solid",color:"#FF7F50",size:1}]},figures:[{key:"atr",title:"ATR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=e[0].close,i=0;const o=2/(r[0].value+1);let s=[];return e.reduce((u,d,h)=>{const{high:p,low:g,close:m}=d,b=Math.max(p-g,Math.abs(p-n),Math.abs(g-n));return s.push(b),h>=r[0].value-1&&(h===r[0].value-1?i=s.reduce((x,C)=>x+C,0)/r[0].value:i=(b-i)*o+i,u[d.timestamp]={atr:i}),n=m,u},{})}},fT={isMainIndicator:!1,isSubIndicator:!0,name:"ADXR",shortName:"ADXR",series:"volume",calcParams:[{name:"period",type:"number",value:14},{name:"adxrPeriod",type:"number",value:6}],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"adxr",title:"ADXR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=0;const g={};return e.reduce((m,b,x)=>{var C;const _=e[x-1]??b,k=_.close,M=b.high,L=b.low,A=M-L,P=Math.abs(M-k),$=Math.abs(k-L),R=M-_.high,z=_.low-L,B=Math.max(Math.max(A,P),$),W=R>0&&R>z?R:0,X=z>0&&z>R?z:0;if(n+=B,i+=W,o+=X,x>=r[0].value-1){x>r[0].value-1?(s=s-s/r[0].value+B,u=u-u/r[0].value+W,d=d-d/r[0].value+X):(s=n,u=i,d=o);let ee=0,U=0;s!==0&&(ee=u*100/s,U=d*100/s);let q=0;if(U+ee!==0&&(q=Math.abs(U-ee)/(U+ee)*100),h+=q,x>=r[0].value*2-2&&(x>r[0].value*2-2?p=(p*(r[0].value-1)+q)/r[0].value:p=h/r[0].value,g[b.timestamp]=p,x>=r[0].value*2+r[1].value-3)){const ie=(C=e[x-(r[1].value-1)])==null?void 0:C.timestamp,le=((g[ie]??0)+p)/2;m[b.timestamp]={adxr:le}}}return m},{})}},gT={isMainIndicator:!1,isSubIndicator:!0,name:"PDI",shortName:"PDI",series:"volume",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#00ff00",size:1}]},figures:[{key:"pdi",title:"PDI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0;return e.reduce((u,d,h)=>{const p=e[h-1]??d,g=p.close,m=d.high,b=d.low,x=m-b,C=Math.abs(m-g),_=Math.abs(g-b),k=m-p.high,M=p.low-b,L=Math.max(Math.max(x,C),_),A=k>0&&k>M?k:0;if(n+=L,i+=A,h>=r[0].value-1&&(h>r[0].value-1?(o=o-o/r[0].value+L,s=s-s/r[0].value+A):(o=n,s=i),o!==0)){const P=s*100/o;u[d.timestamp]={pdi:P}}return u},{})}},vT={isMainIndicator:!1,isSubIndicator:!0,name:"MDI",shortName:"MDI",series:"volume",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"mdi",title:"MDI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0;return e.reduce((u,d,h)=>{const p=e[h-1]??d,g=p.close,m=d.high,b=d.low,x=m-b,C=Math.abs(m-g),_=Math.abs(g-b),k=m-p.high,M=p.low-b,L=Math.max(Math.max(x,C),_),A=M>0&&M>k?M:0;if(n+=L,i+=A,h>=r[0].value-1&&(h>r[0].value-1?(o=o-o/r[0].value+L,s=s-s/r[0].value+A):(o=n,s=i),o!==0)){const P=s*100/o;u[d.timestamp]={mdi:P}}return u},{})}},mT={isMainIndicator:!1,isSubIndicator:!0,name:"ADX",shortName:"ADX",series:"volume",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#007FFF",size:1}]},figures:[{key:"adx",title:"ADX: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0,h=0,p=0;return e.reduce((g,m,b)=>{const x=e[b-1]??m,C=x.close,_=m.high,k=m.low,M=_-k,L=Math.abs(_-C),A=Math.abs(C-k),P=_-x.high,$=x.low-k,R=Math.max(Math.max(M,L),A),z=P>0&&P>$?P:0,B=$>0&&$>P?$:0;if(n+=R,i+=z,o+=B,b>=r[0].value-1){b>r[0].value-1?(s=s-s/r[0].value+R,u=u-u/r[0].value+z,d=d-d/r[0].value+B):(s=n,u=i,d=o);let W=0,X=0;s!==0&&(W=u*100/s,X=d*100/s);let ee=0;X+W!==0&&(ee=Math.abs(X-W)/(X+W)*100),h+=ee,b>=r[0].value*2-2&&(b>r[0].value*2-2?p=(p*(r[0].value-1)+ee)/r[0].value:p=h/r[0].value,g[m.timestamp]={adx:p})}return g},{})}},yT={isMainIndicator:!1,isSubIndicator:!0,name:"TR",shortName:"TR",series:"volume",calcParams:[],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"tr",title:"TR: ",type:"line"}],calc:e=>{let t;return e.reduce((r,n)=>{const i=n.high,o=n.low,s=n.close;let u;return t===void 0?(t=s,u=i-o):(u=Math.max(i-o,Math.abs(i-t),Math.abs(o-t)),t=s),r[n.timestamp]={tr:u},r},{})}},bT={isMainIndicator:!0,isSubIndicator:!1,name:"WS",shortName:"WS",series:"volume",calcParams:[14],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"ws",title:"WS: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0];let n=0,i=1,o=0;return e.reduce((s,u)=>{const d=u.close;let h;return i<r?(i++,n+=d,h=n/i):i===r?(i++,n+=d,o=n/r,h=o):(o=(o*(r-1)+d)/r,h=o),s[u.timestamp]={ws:h},s},{})}},xT={isMainIndicator:!1,isSubIndicator:!0,name:"Chaikin Oscillator",shortName:"CO",series:"volume",calcParams:[{name:"shortPeriod",type:"number",value:3},{name:"longPeriod",type:"number",value:10}],styles:{lines:[{color:"#FF9800",size:1}]},figures:[{key:"co",title:"CO: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value;let o=0;const s=[];e.forEach(h=>{const p=h.high,g=h.low,m=h.close,b=h.volume??0;let x=0;p!==g&&(x=(m-g-(p-m))/(p-g));const C=x*b;o+=C,s.push(o)});const u=so(s,n),d=so(s,i);return e.reduce((h,p,g)=>(g>=i-1&&(h[p.timestamp]={co:u[g]-d[g]}),h),{})}},wT={isMainIndicator:!1,isSubIndicator:!0,name:"Percentage Price Oscillator",shortName:"PPO",series:"volume",calcParams:[{name:"fastPeriod",type:"number",value:12},{name:"slowPeriod",type:"number",value:26},{name:"signalPeriod",type:"number",value:9}],styles:{lines:[{color:"#FF9800",size:1},{color:"#4CAF50",size:1}],bars:[{upColor:"#2196F3",downColor:"#FF5252"}]},figures:[{key:"ppo",title:"PPO: ",type:"line"},{key:"signal",title:"Signal: ",type:"line"},{key:"histogram",title:"Histogram: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.histogram&&n.histogram>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.histogram&&n.histogram<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=e.map(g=>g.close),u=so(s,n),d=so(s,i),h=[];e.forEach((g,m)=>{if(m>=i-1){const b=(u[m]-d[m])/d[m]*100;h.push(b)}});const p=so(h,o);return e.reduce((g,m,b)=>{if(b>=i-1){const x=(u[b]-d[b])/d[b]*100,C={ppo:x};b>=i+o-1&&(C.signal=p[b-(i-1)],C.histogram=x-C.signal),g[m.timestamp]=C}return g},{})}},CT={isMainIndicator:!1,isSubIndicator:!0,name:"Percentage Volume Oscillator",shortName:"PVO",series:"volume",calcParams:[{name:"shortPeriod",type:"number",value:12},{name:"longPeriod",type:"number",value:26},{name:"signalPeriod",type:"number",value:9}],styles:{lines:[{color:"#FF9800",size:1},{color:"#4CAF50",size:1}],bars:[{upColor:"#2196F3",downColor:"#FF5252"}]},figures:[{key:"pvo",title:"PVO: ",type:"line"},{key:"signal",title:"Signal: ",type:"line"},{key:"histogram",title:"Histogram: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.histogram&&n.histogram>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.histogram&&n.histogram<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=[],u=e.map(m=>m.volume),d=so(u,n),h=so(u,i),p=[];e.forEach((m,b)=>{if(b>=i-1){const x=(d[b]-h[b])/h[b]*100;p.push(x),s[b]={pvo:x}}else s[b]={}});const g=so(p,o);return e.forEach((m,b)=>{b>=i+o-1&&(s[b].signal=g[b-(i-1)],s[b].pvo!==void 0&&(s[b].histogram=s[b].pvo-s[b].signal))}),s}},_T={isMainIndicator:!1,isSubIndicator:!0,name:"Qstick",shortName:"QS",series:"price",calcParams:[{name:"period",type:"number",value:20}],styles:{lines:[{color:"#2196F3",size:1}],bars:[{upColor:"#4CAF50",downColor:"#FF5252"}]},figures:[{key:"qstick",title:"Qstick: ",type:"line"},{key:"qstick",title:"Qstick: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.qstick&&n.qstick>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.qstick&&n.qstick<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams[0].value,n=e.map(o=>o.close-o.open),i=y2(n,r);return e.reduce((o,s,u)=>(u>=r-1&&(o[s.timestamp]={qstick:i[u-(r-1)]}),o),{})}},ST={isMainIndicator:!1,isSubIndicator:!0,name:"Absolute Price Oscillator",shortName:"APO",series:"price",calcParams:[{name:"fastPeriod",type:"number",value:14},{name:"slowPeriod",type:"number",value:30}],styles:{lines:[{color:"#2196F3",size:1}],bars:[{upColor:"#4CAF50",downColor:"#FF5252"}]},figures:[{key:"apo",title:"APO: ",type:"line"},{key:"apo",title:"APO: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.apo&&n.apo>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.apo&&n.apo<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=e.map(d=>d.close),s=so(o,n),u=so(o,i);return e.reduce((d,h,p)=>{if(p>=i-1){const g={apo:s[p]-u[p]};d[h.timestamp]=g}return d},{})}},kT={isMainIndicator:!1,isSubIndicator:!0,name:"Aroon",shortName:"AROON",series:"price",calcParams:[{name:"Length",type:"number",value:14}],styles:{lines:[{color:"#4CAF50",size:1},{color:"#FF5252",size:1}]},figures:[{key:"up",title:"Aroon Up: ",type:"line"},{key:"down",title:"Aroon Down: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0].value;return e.reduce((n,i,o)=>{if(o>=r-1){const s=e.slice(o-r+1,o+1),u=Math.max(...s.map(b=>b.high)),d=Math.min(...s.map(b=>b.low));let h=0,p=0;for(let b=r-1;b>=0;b--)if(s[b].high===u){h=b;break}for(let b=r-1;b>=0;b--)if(s[b].low===d){p=b;break}const g=Math.round((r-p)/r*100),m=Math.round((r-h)/r*100);n[i.timestamp]={up:g,down:m}}return n},{})}},TT={isMainIndicator:!1,isSubIndicator:!0,name:"Balance of Power",shortName:"BOP",series:"price",calcParams:[],styles:{lines:[{color:"#2196F3",size:1}]},figures:[{key:"value",title:"BOP: ",type:"line"}],calc:(e,t)=>e.reduce((r,n)=>{if(Sr(n.open)&&Sr(n.high)&&Sr(n.low)&&Sr(n.close)){const i=n.high-n.low;if(i!==0){const o=(n.close-n.open)/i;r[n.timestamp]={value:o}}else r[n.timestamp]={value:0}}return r},{})},ET={isMainIndicator:!0,isSubIndicator:!1,name:"Double Exponential Moving Average",shortName:"DEMA",series:"price",calcParams:[{name:"ema1Period",type:"number",value:10},{name:"ema2Period",type:"number",value:16}],styles:{lines:[{color:"#2196F3",size:1}]},figures:[{key:"value",title:"DEMA: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=e.map(d=>d.close),s=so(o,n),u=so(s,i);return e.reduce((d,h,p)=>{if(p>=n+i-2){const g=2*s[p]-u[p];d[h.timestamp]={value:g}}return d},{})}},MT={isMainIndicator:!0,isSubIndicator:!1,name:"Envelope (SMA)",shortName:"ENV",series:"price",calcParams:[{name:"period",type:"number",value:20},{name:"percentage",type:"number",value:10},{name:"showShading",type:"boolean",value:!0}],styles:{lines:[{color:"#FF5252",size:1},{color:"#2196F3",size:1},{color:"#4CAF50",size:1}]},figures:[{key:"upper",title:"Upper: ",type:"line"},{key:"middle",title:"Middle: ",type:"line"},{key:"lower",title:"Lower: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=e.map(u=>u.close),s=y2(o,n);return e.reduce((u,d,h)=>{if(h>=n-1){const p=s[h],g=s[h],m=s[h],b=p*(1+i/100),x=m*(1-i/100);u[d.timestamp]={upper:b,middle:g,lower:x}}return u},{})},draw:({ctx:e,indicator:t,xAxis:r,yAxis:n,chart:i})=>{var o,s,u,d,h,p;const g=t.result;if(!g)return!1;const{from:m,to:b}=i.getVisibleRange(),x=[],C=[],_=[],k=[];for(let M=m;M<b;M++){const L=g[M];L!=null&&(x.push(r.convertToPixel(M)),L.upper!=null&&C.push(n.convertToPixel(L.upper)),L.middle!=null&&_.push(n.convertToPixel(L.middle)),L.lower!=null&&k.push(n.convertToPixel(L.lower)))}if(t.calcParams[2].value){const M=Al(((u=(s=(o=t.styles)==null?void 0:o.lines)==null?void 0:s[0])==null?void 0:u.color)??"#E91E63");Pl(e,x,C,_,`rgba(${M.r}, ${M.g}, ${M.b}, 0.1)`);const L=Al(((p=(h=(d=t.styles)==null?void 0:d.lines)==null?void 0:h[2])==null?void 0:p.color)??"#673AB7");Pl(e,x,_,k,`rgba(${L.r}, ${L.g}, ${L.b}, 0.1)`)}return!1}},IT={isMainIndicator:!0,isSubIndicator:!1,name:"Envelope (EMA)",shortName:"ENV-EMA",series:"price",calcParams:[{name:"period",type:"number",value:20,min:1,max:100},{name:"percentage",type:"number",value:20,min:0,max:100},{name:"showShading",type:"boolean",value:!0}],styles:{lines:[{color:"#E91E63",size:1},{color:"#9C27B0",size:1},{color:"#673AB7",size:1}]},figures:[{key:"upper",title:"Upper: ",type:"line"},{key:"middle",title:"Middle: ",type:"line"},{key:"lower",title:"Lower: ",type:"line"}],calc:(e,t)=>{var r,n;const i=t.calcParams,o=((r=i.find(h=>h.name==="period"))==null?void 0:r.value)??20,s=((n=i.find(h=>h.name==="percentage"))==null?void 0:n.value)??20,u=e.map(h=>h.close),d=so(u,o);return e.reduce((h,p,g)=>{if(g>=o-1){const m=d[g],b=d[g],x=d[g],C=m*(1+s/100),_=x*(1-s/100);h[p.timestamp]={upper:C,middle:b,lower:_}}return h},{})},draw:({ctx:e,indicator:t,xAxis:r,yAxis:n,chart:i})=>{var o,s,u,d,h,p,g;const m=t.result;if(!m)return!1;const{from:b,to:x}=i.getVisibleRange(),C=[],_=[],k=[],M=[];for(let L=b;L<x;L++){const A=m[L];A!=null&&(C.push(r.convertToPixel(L)),A.upper!=null&&_.push(n.convertToPixel(A.upper)),A.middle!=null&&k.push(n.convertToPixel(A.middle)),A.lower!=null&&M.push(n.convertToPixel(A.lower)))}if(((o=t.calcParams.find(L=>L.name==="showShading"))==null?void 0:o.value)??!0){const L=Al(((d=(u=(s=t.styles)==null?void 0:s.lines)==null?void 0:u[0])==null?void 0:d.color)??"#E91E63");Pl(e,C,_,k,`rgba(${L.r}, ${L.g}, ${L.b}, 0.1)`);const A=Al(((g=(p=(h=t.styles)==null?void 0:h.lines)==null?void 0:p[2])==null?void 0:g.color)??"#673AB7");Pl(e,C,k,M,`rgba(${A.r}, ${A.g}, ${A.b}, 0.1)`)}return!1}},LT={name:"Volume Price Trend",shortName:"VPT",series:"volume",calcParams:[],precision:2,isMainIndicator:!1,isSubIndicator:!0,styles:{lines:[{style:"solid",color:"#FF7F50",size:1}]},figures:[{key:"vpt",title:"VPT: ",type:"line"}],calc:(e,t)=>{let r=0;return e.reduce((n,i,o)=>{if(i.close===void 0||i.volume===void 0)return n[i.timestamp]={vpt:0},n;if(o===0)return n[i.timestamp]={vpt:0},n;const s=e[o-1].close,u=e[o-1].volume;if(s===void 0||s===0||u===void 0)return n[i.timestamp]={vpt:r},n;const d=(i.close-s)/s,h=r+u*d;return r=h,n[i.timestamp]={vpt:h},n},{})},shouldOhlc:!0,draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s;const{realFrom:u,realTo:d}=t.getVisibleRange(),{result:h}=r,p=zd("line");for(let g=u;g<d;g++){const m=h[g];m&&m.vpt!==0&&new p({name:"line",styles:{style:r.styles.lines[0].style,color:r.styles.lines[0].color,size:r.styles.lines[0].size},attrs:{coordinates:[{x:i.convertToPixel(g),y:o.convertToPixel(m.vpt)},{x:i.convertToPixel(g+1),y:o.convertToPixel((s=h[g+1])==null?void 0:s.vpt)}]}}).draw(e)}return!0}},PT={name:"Negative Volume Index",shortName:"NVI",series:"price",calcParams:[{name:"Length",type:"number",value:5,min:1,max:1e4}],precision:2,isMainIndicator:!1,isSubIndicator:!0,styles:{lines:[{style:"solid",color:"#2196F3",size:1}]},figures:[{key:"nvi",title:"NVI: ",type:"line"}],calc:(e,t)=>{var r;const n=((r=t.calcParams.find(o=>o.name==="Length"))==null?void 0:r.value)??1e3;let i=n;return e.reduce((o,s,u)=>{if(s.close===void 0||s.volume===void 0)return o[s.timestamp]={nvi:0},o;if(u===0)return o[s.timestamp]={nvi:n},o;const d=e[u-1].close,h=e[u-1].volume;if(d===void 0||d===0||h===void 0)return o[s.timestamp]={nvi:i},o;const p=(s.close-d)/d;let g=i;return s.volume<=h&&(g=i+p*i),i=g,o[s.timestamp]={nvi:g},o},{})}},AT={isMainIndicator:!1,isSubIndicator:!0,name:"Money Flow Volume",shortName:"MFV",series:"volume",calcParams:[],styles:{lines:[{color:"#2196F3",size:1}]},figures:[{key:"mfv",title:"MFV: ",type:"line"}],calc:(e,t)=>{const r=[];return e.forEach((n,i)=>{if(!Sr(n.high)||!Sr(n.low)||!Sr(n.close)||!Sr(n.volume)){r[i]={};return}const o=n.high-n.low;if(o===0){r[i]={mfv:0};return}const s=(n.close-n.low-(n.high-n.close))/o*n.volume;r[i]={mfv:s}}),r}},DT={isMainIndicator:!1,isSubIndicator:!0,name:"Money Flow Multiplier",shortName:"MFM",series:"price",calcParams:[],styles:{lines:[{color:"#FF9800",size:1}]},figures:[{key:"mfm",title:"MFM: ",type:"line"}],calc:(e,t)=>e.reduce((r,n,i)=>{if(!Sr(n.high)||!Sr(n.low)||!Sr(n.close))return r;const o=n.high-n.low;if(o===0)return r[n.timestamp]={mfm:0},r;const s=(n.close-n.low-(n.high-n.close))/o;return r[n.timestamp]={mfm:s},r},{})},FT={isMainIndicator:!0,isSubIndicator:!1,name:"Moving Linear Regression",shortName:"MLR",series:"price",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#2196F3",size:1.5}]},figures:[{key:"value",title:"MLR: ",type:"line"}],calc:(e,t)=>{const{calcParams:r}=t,n=r[0].value;return e.length<n?{}:e.reduce((i,o,s)=>{if(s<n-1)return i;const u=e.slice(s-(n-1),s+1);if(!u.every(k=>Sr(k.close)))return i;const d=Array.from({length:n},(k,M)=>M+1),h=u.map(k=>k.close),p=d.reduce((k,M)=>k+M,0)/n,g=h.reduce((k,M)=>k+M,0)/n;let m=0,b=0;for(let k=0;k<n;k++){const M=d[k]-p;m+=M*(h[k]-g),b+=M*M}const x=b!==0?m/b:0,C=g-x*p,_=x*n+C;return i[o.timestamp]={value:_},i},{})}},RT={isMainIndicator:!1,isSubIndicator:!0,name:"Moving Least Square",shortName:"MLS",series:"price",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#FF9800",size:1.5},{color:"#4CAF50",size:1},{color:"#F44336",size:1}]},figures:[{key:"line",title:"MLS: ",type:"line"},{key:"slope",title:"Slope: ",type:"line"},{key:"intercept",title:"Intercept: ",type:"line"}],calc:(e,t)=>{const{calcParams:r}=t,n=r[0].value;return e.length<n?{}:e.reduce((i,o,s)=>{if(s<n-1)return i;const u=e.slice(s-(n-1),s+1);if(!u.every(M=>Sr(M.close)))return i;const d=Array.from({length:n},(M,L)=>L+1),h=u.map(M=>M.close);let p=0,g=0,m=0,b=0;for(let M=0;M<n;M++)p+=d[M],g+=h[M],m+=d[M]*h[M],b+=d[M]*d[M];const x=n*b-p*p,C=x!==0?(n*m-p*g)/x:0,_=(g-C*p)/n,k=C*n+_;return i[o.timestamp]={slope:C,intercept:_,line:k},i},{})}},OT={isMainIndicator:!1,isSubIndicator:!0,name:"MACD",shortName:"MACD",calcParams:[{name:"fastPeriod",type:"number",value:12},{name:"slowPeriod",type:"number",value:26},{name:"signalPeriod",type:"number",value:9}],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const{prev:n,current:i}=e,o=(n==null?void 0:n.macd)??Number.MIN_SAFE_INTEGER,s=(i==null?void 0:i.macd)??Number.MIN_SAFE_INTEGER;let u="";return s>0?u=en(t.styles,"bars[0].upColor",r.bars[0].upColor):s<0?u=en(t.styles,"bars[0].downColor",r.bars[0].downColor):u=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor),{style:o<s?"stroke":"fill",color:u,borderColor:u}}}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,d=0;const h=Math.max(r[0].value,r[1].value);return e.reduce((p,g,m)=>{const b=g.close;if(n+=b,m>=r[0].value-1&&(m>r[0].value-1?i=(2*b+(r[0].value-1)*i)/(r[0].value+1):i=n/r[0].value),m>=r[1].value-1&&(m>r[1].value-1?o=(2*b+(r[1].value-1)*o)/(r[1].value+1):o=n/r[1].value),m>=h-1){s=i-o,u+=s;const x={dif:s};m>=h+r[2].value-2&&(m>h+r[2].value-2?d=(s*2+d*(r[2].value-1))/(r[2].value+1):d=u/r[2].value,x.macd=(s-d)*2,x.dea=d),p[g.timestamp]=x}return p},{})}},qg=[Pk,Ak,Dk,Fk,Rk,Ok,Nk,zk,Bk,$k,Vk,Wk,Uk,Hk,Yk,Xk,jk,Zk,Gk,Qk,Kk,Jk,eT,tT,rT,w2,C2,nT,iT,oT,aT,sT,lT,cT,uT,dT,hT,pT,mT,fT,gT,vT,yT,bT,xT,wT,CT,_T,ST,kT,TT,ET,MT,IT,LT,PT,AT,DT,FT,RT,OT],NT=[w2,C2],Mp=[],A0=[],zT=[...qg];zT.forEach(e=>{e.isMainIndicator?VT(e.name):e.isSubIndicator?WT(e.name):console.warn("Unknown indicator type during initialization: ",e.name),Wy(e)});function BT(e){const t=[];return Mp.forEach(r=>{e.forEach(n=>{r===n&&t.push(n)})}),t}function $T(e){const t=[];return A0.forEach(r=>{e.forEach(n=>{r===n&&t.push(n)})}),t}function VT(e){Mp.includes(e)||Mp.push(e)}function WT(e){A0.includes(e)||A0.push(e)}function Lm(){return[...qg]}var vr=(e=>(e.STOCKS="stocks",e.CRYPTO="crypto",e.FOREX="forex",e.FUTURES="futures",e))(vr||{});const Ke={ONE_MIN:"1m",THREE_MIN:"3m",FIVE_MIN:"5m",FIFTEEN_MIN:"15m",THIRTY_MIN:"30m",ONE_HOUR:"1H",TWO_HOUR:"2H",FOUR_HOUR:"4H",SIX_HOUR:"6H",EIGHT_HOUR:"8H",TWELVE_HOUR:"12h",ONE_DAY:"D",THREE_DAY:"3D",FIVE_DAY:"5D",ONE_WEEK:"W",ONE_MONTH:"M",THREE_MONTH:"3M",SIX_MONTH:"6M",ONE_YEAR:"Y",FIVE_YEAR:"5Y",DEFAULT:"default"},kn={MINUTE:"minute",HOUR:"hour",DAY:"day",WEEK:"week",MONTH:"month"};var $0=(e=>(e.RENKO="renko",e))($0||{});const Pm={[Ke.ONE_MIN]:"1m",[Ke.THREE_MIN]:"3m",[Ke.FIVE_MIN]:"5m",[Ke.FIFTEEN_MIN]:"15m",[Ke.THIRTY_MIN]:"30m",[Ke.ONE_HOUR]:"1h",[Ke.TWO_HOUR]:"2h",[Ke.FOUR_HOUR]:"4h",[Ke.SIX_HOUR]:"6h",[Ke.EIGHT_HOUR]:"8h",[Ke.TWELVE_HOUR]:"12h",[Ke.ONE_DAY]:"1d",[Ke.THREE_DAY]:"3d",[Ke.FIVE_DAY]:"5d",[Ke.ONE_WEEK]:"1w",[Ke.ONE_MONTH]:"1M",[Ke.THREE_MONTH]:"3M",[Ke.SIX_MONTH]:"6M",[Ke.ONE_YEAR]:"1y",[Ke.FIVE_YEAR]:"5y",[Ke.DEFAULT]:"15m"};function Wc(e,t){return Pm[t.text]||Pm[Ke.DEFAULT]}class Ad{static createBaseIconConfig(t){return{position:"middle",marginRight:0,marginBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,borderRadius:0,type:"icon_font",size:16,color:t,activeColor:t,backgroundColor:"transparent",activeBackgroundColor:"rgba(22, 119, 255, 0.15)"}}static createArrowDownIcon(t){const r=this.createArrowIcon(!1);return{...this.createBaseIconConfig(t),id:"arrow_down",position:"left",...r}}static createVisibleIcon(t){return{...this.createBaseIconConfig(t),id:"visible",marginLeft:8,marginTop:7,content:{code:"",family:"icomoon"}}}static createInvisibleIcon(t){return{...this.createBaseIconConfig(t),id:"invisible",marginLeft:8,marginTop:7,content:{code:"",family:"icomoon"}}}static createSettingIcon(t){return{...this.createBaseIconConfig(t),id:"setting",marginLeft:6,marginTop:7,content:{code:"",family:"icomoon"}}}static createCloseIcon(t){return{...this.createBaseIconConfig(t),id:"close",marginLeft:6,marginTop:7,content:{code:"",family:"icomoon"}}}static createIndicatorTooltipIcons(t){return[this.createVisibleIcon(t),this.createInvisibleIcon(t),this.createSettingIcon(t),this.createCloseIcon(t),this.createArrowDownIcon(t)]}static createCandleTooltipIcons(t){return[this.createArrowDownIcon(t)]}static getRightArrowCode(){return""}static getDownArrowCode(){return""}static createArrowIcon(t){return{marginTop:t?-3:-10,marginLeft:10,size:25,content:{code:t?this.getRightArrowCode():this.getDownArrowCode(),family:"Arial, sans-serif"}}}}class UT{static createDefaultIcons(t){return Ad.createIndicatorTooltipIcons(t)}static createTooltipConfig(t){const r=t==="dark"?"#929AA5":"#76808F";return{features:this.createDefaultIcons(r)}}}class HT{static createDefaultCandleIcons(t){const r=t==="dark"?"#929AA5":"#76808F";return Ad.createCandleTooltipIcons(r)}static createCandleTooltipConfig(t){return{features:this.createDefaultCandleIcons(t),offsetLeft:8,offsetTop:8,offsetRight:8,offsetBottom:8}}}const YT=(e,t)=>e===t,Ha=Symbol("solid-proxy"),XT=typeof Proxy=="function",Lg=Symbol("solid-track"),Ip={equals:YT};let _2=L2;const Ns=1,Lp=2,S2={owned:null,cleanups:null,context:null,owner:null},tg={};var ar=null;let rg=null,xr=null,di=null,Fs=null,Up=0;function Dd(e,t){const r=xr,n=ar,i=e.length===0,o=t===void 0?n:t,s=i?S2:{owned:null,cleanups:null,context:o?o.context:null,owner:o},u=i?e:()=>e(()=>Ge(()=>D0(s)));ar=s,xr=null;try{return Ya(u,!0)}finally{xr=r,ar=n}}function be(e,t){t=t?Object.assign({},Ip,t):Ip;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(r.value)),I2(r,i));return[M2.bind(r),n]}function jT(e,t,r){const n=Hp(e,t,!0,Ns);Wd(n)}function De(e,t,r){const n=Hp(e,t,!1,Ns);Wd(n)}function nt(e,t,r){_2=rE;const n=Hp(e,t,!1,Ns);(!r||!r.render)&&(n.user=!0),Fs?Fs.push(n):Wd(n)}function ir(e,t,r){r=r?Object.assign({},Ip,r):Ip;const n=Hp(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,Wd(n),M2.bind(n)}function ZT(e){return e&&typeof e=="object"&&"then"in e}function GT(e,t,r){let n,i,o;typeof t=="function"?(n=e,i=t,o={}):(n=!0,i=e,o=t||{});let s=null,u=tg,d=!1,h="initialValue"in o,p=typeof n=="function"&&ir(n);const g=new Set,[m,b]=(o.storage||be)(o.initialValue),[x,C]=be(void 0),[_,k]=be(void 0,{equals:!1}),[M,L]=be(h?"ready":"unresolved");function A(B,W,X,ee){return s===B&&(s=null,ee!==void 0&&(h=!0),(B===u||W===u)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(ee,{value:W})),u=tg,P(W,X)),W}function P(B,W){Ya(()=>{W===void 0&&b(()=>B),L(W!==void 0?"errored":h?"ready":"unresolved"),C(W);for(const X of g.keys())X.decrement();g.clear()},!1)}function $(){const B=JT,W=m(),X=x();if(X!==void 0&&!s)throw X;return xr&&xr.user,W}function R(B=!0){if(B!==!1&&d)return;d=!1;const W=p?p():n;if(W==null||W===!1){A(s,Ge(m));return}let X;const ee=u!==tg?u:Ge(()=>{try{return i(W,{value:m(),refetching:B})}catch(U){X=U}});if(X!==void 0){A(s,void 0,mp(X),W);return}else if(!ZT(ee))return A(s,ee,void 0,W),ee;return s=ee,"v"in ee?(ee.s===1?A(s,ee.v,void 0,W):A(s,void 0,mp(ee.v),W),ee):(d=!0,queueMicrotask(()=>d=!1),Ya(()=>{L(h?"refreshing":"pending"),k()},!1),ee.then(U=>A(ee,U,void 0,W),U=>A(ee,void 0,mp(U),W)))}Object.defineProperties($,{state:{get:()=>M()},error:{get:()=>x()},loading:{get(){const B=M();return B==="pending"||B==="refreshing"}},latest:{get(){if(!h)return $();const B=x();if(B&&!s)throw B;return m()}}});let z=ar;return p?jT(()=>(z=ar,R(!1))):R(!1),[$,{refetch:B=>k2(z,()=>R(B)),mutate:b}]}function $a(e){return Ya(e,!1)}function Ge(e){if(xr===null)return e();const t=xr;xr=null;try{return e()}finally{xr=t}}function Jg(e,t,r){const n=Array.isArray(e);let i;return o=>{let s;if(n){s=Array(e.length);for(let d=0;d<e.length;d++)s[d]=e[d]()}else s=e();const u=Ge(()=>t(s,i,o));return i=s,u}}function ki(e){nt(()=>Ge(e))}function $r(e){return ar===null||(ar.cleanups===null?ar.cleanups=[e]:ar.cleanups.push(e)),e}function Pg(){return xr}function QT(){return ar}function k2(e,t){const r=ar,n=xr;ar=e,xr=null;try{return Ya(t,!0)}catch(i){ev(i)}finally{ar=r,xr=n}}function KT(e){const t=xr,r=ar;return Promise.resolve().then(()=>{xr=t,ar=r;let n;return Ya(e,!1),xr=ar=null,n?n.done:void 0})}function T2(e,t){const r=Symbol("context");return{id:r,Provider:nE(r),defaultValue:e}}function E2(e){let t;return ar&&ar.context&&(t=ar.context[e.id])!==void 0?t:e.defaultValue}function qT(e){const t=ir(e),r=ir(()=>Ag(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let JT;function M2(){if(this.sources&&this.state)if(this.state===Ns)Wd(this);else{const e=di;di=null,Ya(()=>Ap(this),!1),di=e}if(xr){const e=this.observers?this.observers.length:0;xr.sources?(xr.sources.push(this),xr.sourceSlots.push(e)):(xr.sources=[this],xr.sourceSlots=[e]),this.observers?(this.observers.push(xr),this.observerSlots.push(xr.sources.length-1)):(this.observers=[xr],this.observerSlots=[xr.sources.length-1])}return this.value}function I2(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Ya(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],s=rg&&rg.running;s&&rg.disposed.has(o),(s?!o.tState:!o.state)&&(o.pure?di.push(o):Fs.push(o),o.observers&&P2(o)),s||(o.state=Ns)}if(di.length>1e6)throw di=[],new Error},!1)),t}function Wd(e){if(!e.fn)return;D0(e);const t=Up;eE(e,e.value,t)}function eE(e,t,r){let n;const i=ar,o=xr;xr=ar=e;try{n=e.fn(t)}catch(s){return e.pure&&(e.state=Ns,e.owned&&e.owned.forEach(D0),e.owned=null),e.updatedAt=r+1,ev(s)}finally{xr=o,ar=i}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?I2(e,n):e.value=n,e.updatedAt=r)}function Hp(e,t,r,n=Ns,i){const o={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ar,context:ar?ar.context:null,pure:r};return ar===null||ar!==S2&&(ar.owned?ar.owned.push(o):ar.owned=[o]),o}function Pp(e){if(e.state===0)return;if(e.state===Lp)return Ap(e);if(e.suspense&&Ge(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Up);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===Ns)Wd(e);else if(e.state===Lp){const n=di;di=null,Ya(()=>Ap(e,t[0]),!1),di=n}}function Ya(e,t){if(di)return e();let r=!1;t||(di=[]),Fs?r=!0:Fs=[],Up++;try{const n=e();return tE(r),n}catch(n){r||(Fs=null),di=null,ev(n)}}function tE(e){if(di&&(L2(di),di=null),e)return;const t=Fs;Fs=null,t.length&&Ya(()=>_2(t),!1)}function L2(e){for(let t=0;t<e.length;t++)Pp(e[t])}function rE(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:Pp(n)}for(t=0;t<r;t++)Pp(e[t])}function Ap(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const i=n.state;i===Ns?n!==t&&(!n.updatedAt||n.updatedAt<Up)&&Pp(n):i===Lp&&Ap(n,t)}}}function P2(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Lp,r.pure?di.push(r):Fs.push(r),r.observers&&P2(r))}}function D0(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),i=r.observers;if(i&&i.length){const o=i.pop(),s=r.observerSlots.pop();n<i.length&&(o.sourceSlots[s]=n,i[n]=o,r.observerSlots[n]=s)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)D0(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)D0(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function mp(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ev(e,t=ar){throw mp(e)}function Ag(e){if(typeof e=="function"&&!e.length)return Ag(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Ag(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function nE(e,t){return function(r){let n;return De(()=>n=Ge(()=>(ar.context={...ar.context,[e]:r.value},qT(()=>r.children))),void 0),n}}const iE=Symbol("fallback");function Am(e){for(let t=0;t<e.length;t++)e[t]()}function oE(e,t,r={}){let n=[],i=[],o=[],s=0,u=t.length>1?[]:null;return $r(()=>Am(o)),()=>{let d=e()||[],h=d.length,p,g;return d[Lg],Ge(()=>{let b,x,C,_,k,M,L,A,P;if(h===0)s!==0&&(Am(o),o=[],n=[],i=[],s=0,u&&(u=[])),r.fallback&&(n=[iE],i[0]=Dd($=>(o[0]=$,r.fallback())),s=1);else if(s===0){for(i=new Array(h),g=0;g<h;g++)n[g]=d[g],i[g]=Dd(m);s=h}else{for(C=new Array(h),_=new Array(h),u&&(k=new Array(h)),M=0,L=Math.min(s,h);M<L&&n[M]===d[M];M++);for(L=s-1,A=h-1;L>=M&&A>=M&&n[L]===d[A];L--,A--)C[A]=i[L],_[A]=o[L],u&&(k[A]=u[L]);for(b=new Map,x=new Array(A+1),g=A;g>=M;g--)P=d[g],p=b.get(P),x[g]=p===void 0?-1:p,b.set(P,g);for(p=M;p<=L;p++)P=n[p],g=b.get(P),g!==void 0&&g!==-1?(C[g]=i[p],_[g]=o[p],u&&(k[g]=u[p]),g=x[g],b.set(P,g)):o[p]();for(g=M;g<h;g++)g in C?(i[g]=C[g],o[g]=_[g],u&&(u[g]=k[g],u[g](g))):i[g]=Dd(m);i=i.slice(0,s=h),n=d.slice(0)}return i});function m(b){if(o[g]=b,u){const[x,C]=be(g);return u[g]=C,t(d[g],x)}return t(d[g])}}}function G(e,t){return Ge(()=>e(t||{}))}function rp(){return!0}const aE={get(e,t,r){return t===Ha?r:e.get(t)},has(e,t){return t===Ha?!0:e.has(t)},set:rp,deleteProperty:rp,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:rp,deleteProperty:rp}},ownKeys(e){return e.keys()}};function ng(e){return(e=typeof e=="function"?e():e)?e:{}}function sE(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function Yp(...e){let t=!1;for(let s=0;s<e.length;s++){const u=e[s];t=t||!!u&&Ha in u,e[s]=typeof u=="function"?(t=!0,ir(u)):u}if(XT&&t)return new Proxy({get(s){for(let u=e.length-1;u>=0;u--){const d=ng(e[u])[s];if(d!==void 0)return d}},has(s){for(let u=e.length-1;u>=0;u--)if(s in ng(e[u]))return!0;return!1},keys(){const s=[];for(let u=0;u<e.length;u++)s.push(...Object.keys(ng(e[u])));return[...new Set(s)]}},aE);const r={},n=Object.create(null);for(let s=e.length-1;s>=0;s--){const u=e[s];if(!u)continue;const d=Object.getOwnPropertyNames(u);for(let h=d.length-1;h>=0;h--){const p=d[h];if(p==="__proto__"||p==="constructor")continue;const g=Object.getOwnPropertyDescriptor(u,p);if(!n[p])n[p]=g.get?{enumerable:!0,configurable:!0,get:sE.bind(r[p]=[g.get.bind(u)])}:g.value!==void 0?g:void 0;else{const m=r[p];m&&(g.get?m.push(g.get.bind(u)):g.value!==void 0&&m.push(()=>g.value))}}}const i={},o=Object.keys(n);for(let s=o.length-1;s>=0;s--){const u=o[s],d=n[u];d&&d.get?Object.defineProperty(i,u,d):i[u]=d?d.value:void 0}return i}const lE=e=>`Stale read from <${e}>.`;function mn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return ir(oE(()=>e.each,e.children,t||void 0))}function ze(e){const t=e.keyed,r=ir(()=>e.when,void 0,void 0),n=t?r:ir(r,void 0,{equals:(i,o)=>!i==!o});return ir(()=>{const i=n();if(i){const o=e.children;return typeof o=="function"&&o.length>0?Ge(()=>o(t?i:()=>{if(!Ge(n))throw lE("Show");return r()})):o}return e.fallback},void 0,void 0)}const Ae=e=>ir(()=>e());function cE(e,t,r){let n=r.length,i=t.length,o=n,s=0,u=0,d=t[i-1].nextSibling,h=null;for(;s<i||u<o;){if(t[s]===r[u]){s++,u++;continue}for(;t[i-1]===r[o-1];)i--,o--;if(i===s){const p=o<n?u?r[u-1].nextSibling:r[o-u]:d;for(;u<o;)e.insertBefore(r[u++],p)}else if(o===u)for(;s<i;)(!h||!h.has(t[s]))&&t[s].remove(),s++;else if(t[s]===r[o-1]&&r[u]===t[i-1]){const p=t[--i].nextSibling;e.insertBefore(r[u++],t[s++].nextSibling),e.insertBefore(r[--o],p),t[i]=r[o]}else{if(!h){h=new Map;let g=u;for(;g<o;)h.set(r[g],g++)}const p=h.get(t[s]);if(p!=null)if(u<p&&p<o){let g=s,m=1,b;for(;++g<i&&g<o&&!((b=h.get(t[g]))==null||b!==p+m);)m++;if(m>p-u){const x=t[s];for(;u<p;)e.insertBefore(r[u++],x)}else e.replaceChild(r[u++],t[s++])}else s++;else t[s++].remove()}}}const Dm="_$DX_DELEGATE";function uE(e,t,r,n={}){let i;return Dd(o=>{i=o,t===document?e():F(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{i(),t.textContent=""}}function Q(e,t,r,n){let i;const o=()=>{const u=document.createElement("template");return u.innerHTML=e,u.content.firstChild},s=()=>(i||(i=o())).cloneNode(!0);return s.cloneNode=s,s}function jt(e,t=window.document){const r=t[Dm]||(t[Dm]=new Set);for(let n=0,i=e.length;n<i;n++){const o=e[n];r.has(o)||(r.add(o),t.addEventListener(o,dE))}}function We(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function at(e,t){t==null?e.removeAttribute("class"):e.className=t}function Wi(e,t,r,n){Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r}function Tn(e,t,r){if(!t)return r?We(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let i,o;for(o in r)t[o]==null&&n.removeProperty(o),delete r[o];for(o in t)i=t[o],i!==r[o]&&(n.setProperty(o,i),r[o]=i);return r}function hi(e,t,r){return Ge(()=>e(t,r))}function F(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return Dp(e,t,n,r);De(i=>Dp(e,t(),i,r),n)}function dE(e){let t=e.target;const r=`$$${e.type}`,n=e.target,i=e.currentTarget,o=d=>Object.defineProperty(e,"target",{configurable:!0,value:d}),s=()=>{const d=t[r];if(d&&!t.disabled){const h=t[`${r}Data`];if(h!==void 0?d.call(t,h,e):d.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},u=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const d=e.composedPath();o(d[0]);for(let h=0;h<d.length-2&&(t=d[h],!!s());h++){if(t._$host){t=t._$host,u();break}if(t.parentNode===i)break}}else u();o(n)}function Dp(e,t,r,n,i){for(;typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,s=n!==void 0;if(e=s&&r[0]&&r[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===r))return r;if(s){let u=r[0];u&&u.nodeType===3?u.data!==t&&(u.data=t):u=document.createTextNode(t),r=bd(e,r,n,u)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||o==="boolean")r=bd(e,r,n);else{if(o==="function")return De(()=>{let u=t();for(;typeof u=="function";)u=u();r=Dp(e,u,r,n)}),()=>r;if(Array.isArray(t)){const u=[],d=r&&Array.isArray(r);if(Dg(u,t,r,i))return De(()=>r=Dp(e,u,r,n,!0)),()=>r;if(u.length===0){if(r=bd(e,r,n),s)return r}else d?r.length===0?Fm(e,u,n):cE(e,r,u):(r&&bd(e),Fm(e,u));r=u}else if(t.nodeType){if(Array.isArray(r)){if(s)return r=bd(e,r,n,t);bd(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function Dg(e,t,r,n){let i=!1;for(let o=0,s=t.length;o<s;o++){let u=t[o],d=r&&r[e.length],h;if(!(u==null||u===!0||u===!1))if((h=typeof u)=="object"&&u.nodeType)e.push(u);else if(Array.isArray(u))i=Dg(e,u,d)||i;else if(h==="function")if(n){for(;typeof u=="function";)u=u();i=Dg(e,Array.isArray(u)?u:[u],Array.isArray(d)?d:[d])||i}else e.push(u),i=!0;else{const p=String(u);d&&d.nodeType===3&&d.data===p?e.push(d):e.push(document.createTextNode(p))}}return i}function Fm(e,t,r=null){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],r)}function bd(e,t,r,n){if(r===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let o=!1;for(let s=t.length-1;s>=0;s--){const u=t[s];if(i!==u){const d=u.parentNode===e;!o&&!s?d?e.replaceChild(i,u):e.insertBefore(i,r):d&&u.remove()}else o=!0}}else e.insertBefore(i,r);return[i]}const hE="http://www.w3.org/2000/svg";function pE(e,t=!1){return t?document.createElementNS(hE,e):document.createElement(e)}function tv(e){const{useShadow:t}=e,r=document.createTextNode(""),n=()=>e.mount||document.body,i=QT();let o;return nt(()=>{o||(o=k2(i,()=>ir(()=>e.children)));const s=n();if(s instanceof HTMLHeadElement){const[u,d]=be(!1),h=()=>d(!0);Dd(p=>F(s,()=>u()?p():o(),null)),$r(h)}else{const u=pE(e.isSVG?"g":"div",e.isSVG),d=t&&u.attachShadow?u.attachShadow({mode:"open"}):u;Object.defineProperty(u,"_$host",{get(){return r.parentNode},configurable:!0}),F(d,o),s.appendChild(u),e.ref&&e.ref(u),$r(()=>s.removeChild(u))}},void 0,{render:!0}),r}const Fg=Symbol("store-raw"),Fd=Symbol("store-node"),Is=Symbol("store-has"),A2=Symbol("store-self");function D2(e){let t=e[Ha];if(!t&&(Object.defineProperty(e,Ha,{value:t=new Proxy(e,vE)}),!Array.isArray(e))){const r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let i=0,o=r.length;i<o;i++){const s=r[i];n[s].get&&Object.defineProperty(e,s,{enumerable:n[s].enumerable,get:n[s].get.bind(t)})}}return t}function Dl(e){let t;return e!=null&&typeof e=="object"&&(e[Ha]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Bd(e,t=new Set){let r,n,i,o;if(r=e!=null&&e[Fg])return r;if(!Dl(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,u=e.length;s<u;s++)i=e[s],(n=Bd(i,t))!==i&&(e[s]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),u=Object.getOwnPropertyDescriptors(e);for(let d=0,h=s.length;d<h;d++)o=s[d],!u[o].get&&(i=e[o],(n=Bd(i,t))!==i&&(e[o]=n))}return e}function Fp(e,t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function F0(e,t,r){if(e[t])return e[t];const[n,i]=be(r,{equals:!1,internal:!0});return n.$=i,e[t]=n}function fE(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===Ha||t===Fd||(delete r.value,delete r.writable,r.get=()=>e[Ha][t]),r}function F2(e){Pg()&&F0(Fp(e,Fd),A2)()}function gE(e){return F2(e),Reflect.ownKeys(e)}const vE={get(e,t,r){if(t===Fg)return e;if(t===Ha)return r;if(t===Lg)return F2(e),r;const n=Fp(e,Fd),i=n[t];let o=i?i():e[t];if(t===Fd||t===Is||t==="__proto__")return o;if(!i){const s=Object.getOwnPropertyDescriptor(e,t);Pg()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(s&&s.get)&&(o=F0(n,t,o)())}return Dl(o)?D2(o):o},has(e,t){return t===Fg||t===Ha||t===Lg||t===Fd||t===Is||t==="__proto__"?!0:(Pg()&&F0(Fp(e,Is),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:gE,getOwnPropertyDescriptor:fE};function Po(e,t,r,n=!1){if(!n&&e[t]===r)return;const i=e[t],o=e.length;r===void 0?(delete e[t],e[Is]&&e[Is][t]&&i!==void 0&&e[Is][t].$()):(e[t]=r,e[Is]&&e[Is][t]&&i===void 0&&e[Is][t].$());let s=Fp(e,Fd),u;if((u=F0(s,t,i))&&u.$(()=>r),Array.isArray(e)&&e.length!==o){for(let d=e.length;d<o;d++)(u=s[d])&&u.$();(u=F0(s,"length",o))&&u.$(e.length)}(u=s[A2])&&u.$()}function R2(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const i=r[n];Po(e,i,t[i])}}function mE(e,t){if(typeof t=="function"&&(t=t(e)),t=Bd(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const i=t[r];e[r]!==i&&Po(e,r,i)}Po(e,"length",n)}else R2(e,t)}function y0(e,t,r=[]){let n,i=e;if(t.length>1){n=t.shift();const s=typeof n,u=Array.isArray(e);if(Array.isArray(n)){for(let d=0;d<n.length;d++)y0(e,[n[d]].concat(t),r);return}else if(u&&s==="function"){for(let d=0;d<e.length;d++)n(e[d],d)&&y0(e,[d].concat(t),r);return}else if(u&&s==="object"){const{from:d=0,to:h=e.length-1,by:p=1}=n;for(let g=d;g<=h;g+=p)y0(e,[g].concat(t),r);return}else if(t.length>1){y0(e[n],t,[n].concat(r));return}i=e[n],r=[n].concat(r)}let o=t[0];typeof o=="function"&&(o=o(i,r),o===i)||n===void 0&&o==null||(o=Bd(o),n===void 0||Dl(i)&&Dl(o)&&!Array.isArray(o)?R2(i,o):Po(e,n,o))}function Fl(...[e,t]){const r=Bd(e||{}),n=Array.isArray(r),i=D2(r);function o(...s){$a(()=>{n&&s.length===1?mE(r,s[0]):y0(r,s)})}return[i,o]}const Rg=Symbol("store-root");function Td(e,t,r,n,i){const o=t[r];if(e===o)return;const s=Array.isArray(e);if(r!==Rg&&(!Dl(e)||!Dl(o)||s!==Array.isArray(o)||i&&e[i]!==o[i])){Po(t,r,e);return}if(s){if(e.length&&o.length&&(!n||i&&e[0]&&e[0][i]!=null)){let h,p,g,m,b,x,C,_;for(g=0,m=Math.min(o.length,e.length);g<m&&(o[g]===e[g]||i&&o[g]&&e[g]&&o[g][i]===e[g][i]);g++)Td(e[g],o,g,n,i);const k=new Array(e.length),M=new Map;for(m=o.length-1,b=e.length-1;m>=g&&b>=g&&(o[m]===e[b]||i&&o[m]&&e[b]&&o[m][i]===e[b][i]);m--,b--)k[b]=o[m];if(g>b||g>m){for(p=g;p<=b;p++)Po(o,p,e[p]);for(;p<e.length;p++)Po(o,p,k[p]),Td(e[p],o,p,n,i);o.length>e.length&&Po(o,"length",e.length);return}for(C=new Array(b+1),p=b;p>=g;p--)x=e[p],_=i&&x?x[i]:x,h=M.get(_),C[p]=h===void 0?-1:h,M.set(_,p);for(h=g;h<=m;h++)x=o[h],_=i&&x?x[i]:x,p=M.get(_),p!==void 0&&p!==-1&&(k[p]=o[h],p=C[p],M.set(_,p));for(p=g;p<e.length;p++)p in k?(Po(o,p,k[p]),Td(e[p],o,p,n,i)):Po(o,p,e[p])}else for(let h=0,p=e.length;h<p;h++)Td(e[h],o,h,n,i);o.length>e.length&&Po(o,"length",e.length);return}const u=Object.keys(e);for(let h=0,p=u.length;h<p;h++)Td(e[u[h]],o,u[h],n,i);const d=Object.keys(o);for(let h=0,p=d.length;h<p;h++)e[d[h]]===void 0&&Po(o,d[h],void 0)}function O2(e,t={}){const{merge:r,key:n="id"}=t,i=Bd(e);return o=>{if(!Dl(o)||!Dl(i))return i;const s=Td(i,{[Rg]:o},Rg,r,n);return s===void 0?o:s}}function yp(e,t){switch(e){case"Etc/UTC":return I("utc",t);case"Pacific/Honolulu":return I("honolulu",t);case"America/Juneau":return I("juneau",t);case"America/Los_Angeles":return I("los_angeles",t);case"America/Chicago":return I("chicago",t);case"America/Toronto":return I("toronto",t);case"America/Sao_Paulo":return I("sao_paulo",t);case"Europe/London":return I("london",t);case"Europe/Berlin":return I("berlin",t);case"Asia/Bahrain":return I("bahrain",t);case"Asia/Dubai":return I("dubai",t);case"Asia/Ashkhabad":return I("ashkhabad",t);case"Asia/Almaty":return I("almaty",t);case"Asia/Bangkok":return I("bangkok",t);case"Asia/Shanghai":return I("shanghai",t);case"Asia/Tokyo":return I("tokyo",t);case"Australia/Sydney":return I("sydney",t);case"Pacific/Norfolk":return I("norfolk",t)}return e}function yE(e){return[{key:"Etc/UTC",text:I("utc",e)},{key:"Pacific/Honolulu",text:I("honolulu",e)},{key:"America/Juneau",text:I("juneau",e)},{key:"America/Los_Angeles",text:I("los_angeles",e)},{key:"America/Chicago",text:I("chicago",e)},{key:"America/Toronto",text:I("toronto",e)},{key:"America/Sao_Paulo",text:I("sao_paulo",e)},{key:"Europe/London",text:I("london",e)},{key:"Europe/Berlin",text:I("berlin",e)},{key:"Asia/Bahrain",text:I("bahrain",e)},{key:"Asia/Dubai",text:I("dubai",e)},{key:"Asia/Ashkhabad",text:I("ashkhabad",e)},{key:"Asia/Almaty",text:I("almaty",e)},{key:"Asia/Bangkok",text:I("bangkok",e)},{key:"Asia/Shanghai",text:I("shanghai",e)},{key:"Asia/Tokyo",text:I("tokyo",e)},{key:"Australia/Sydney",text:I("sydney",e)},{key:"Pacific/Norfolk",text:I("norfolk",e)}]}function bE(e,t,r,n){if(e&&e.length>0){r([]),n({});const i=e.map(d=>d.name),o=BT(i),s=$T(i);r(o);const u={};e.forEach(d=>{if(t!=null){const h={name:d.name,id:d.id,calcParams:d.calcParams,visible:d.visible,zLevel:d.zLevel,precision:d.precision,shortName:d.shortName,shouldOhlc:d.shouldOhlc,shouldFormatBigNumber:d.shouldFormatBigNumber,series:d.series,minValue:d.minValue,maxValue:d.maxValue,styles:d.styles,figures:d.figures};if(s.includes(d.name)){const p=t.getIndicators({name:d.name});if(p.length===0){const g=t.createIndicator(h,!0);g&&(u[d.name]=g)}else{const g=p[0];t.overrideIndicator({id:g.id,name:d.name,calcParams:d.calcParams,styles:d.styles,visible:d.visible,zLevel:d.zLevel,precision:d.precision,shortName:d.shortName,shouldOhlc:d.shouldOhlc,shouldFormatBigNumber:d.shouldFormatBigNumber,series:d.series,minValue:d.minValue,maxValue:d.maxValue,figures:d.figures}),u[d.name]=g.paneId}}else{const p=t.getIndicators({paneId:"candle_pane",name:d.name});p.length===0?t.createIndicator(h,!0,{id:"candle_pane"}):t.overrideIndicator({id:p[0].id,name:d.name,calcParams:d.calcParams,styles:d.styles,visible:d.visible,zLevel:d.zLevel,precision:d.precision,shortName:d.shortName,shouldOhlc:d.shouldOhlc,shouldFormatBigNumber:d.shouldFormatBigNumber,series:d.series,minValue:d.minValue,maxValue:d.maxValue,figures:d.figures})}}}),n(u)}}function xE(e,t){e.forEach(r=>{t!=null&&t.getIndicators({paneId:"candle_pane",name:r}).length===0&&Wg(t,r,!1,!0,{id:"candle_pane"})})}var wE=Q("<button>");const N2=e=>(()=>{var t=wE();return Wi(t,"click",e.onClick),F(t,()=>e.children),De(r=>{var n=e.style,i=`chartspire-ui-button ${e.type??"confirm"} ${e.class??""}`;return r.e=Tn(t,n,r.e),i!==r.t&&at(t,r.t=i),r},{e:void 0,t:void 0}),t})();jt(["click"]);var CE=Q('<svg viewBox="0 0 1024 1024"class=icon><path d="M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m-353.706667 567.04a42.496 42.496 0 0 1-60.16 0L243.626667 541.866667c-8.106667-8.106667-12.373333-18.773333-12.373334-29.866667s4.693333-22.186667 12.373334-29.866667a42.496 42.496 0 0 1 60.16 0L426.666667 604.586667l293.546666-293.546667a42.496 42.496 0 1 1 60.16 60.16l-323.413333 323.84z">'),_E=Q('<svg viewBox="0 0 1024 1024"class=icon><path d="M245.333333 128h533.333334A117.333333 117.333333 0 0 1 896 245.333333v533.333334A117.333333 117.333333 0 0 1 778.666667 896H245.333333A117.333333 117.333333 0 0 1 128 778.666667V245.333333A117.333333 117.333333 0 0 1 245.333333 128z m0 64c-29.44 0-53.333333 23.893333-53.333333 53.333333v533.333334c0 29.44 23.893333 53.333333 53.333333 53.333333h533.333334c29.44 0 53.333333-23.893333 53.333333-53.333333V245.333333c0-29.44-23.893333-53.333333-53.333333-53.333333H245.333333z">'),SE=Q("<div>"),kE=Q("<span class=label>");const TE=()=>CE(),EE=()=>_E(),ME=e=>{const[t,r]=be(e.checked??!1);return nt(()=>{"checked"in e&&r(e.checked)}),(()=>{var n=SE();return n.$$click=i=>{const o=!t();e.onChange!=null&&e.onChange(o),r(o)},F(n,(()=>{var i=Ae(()=>!!e.label);return()=>i()&&(()=>{var o=kE();return F(o,()=>e.label),o})()})(),null),F(n,(()=>{var i=Ae(()=>!!t());return()=>i()?G(TE,{}):G(EE,{})})(),null),De(i=>{var o=e.style,s=`chartspire-ui-checkbox ${t()&&"checked"||""} ${e.class||""}`;return i.e=Tn(n,o,i.e),s!==i.t&&at(n,i.t=s),i},{e:void 0,t:void 0}),n})()};jt(["click"]);var IE=Q("<div class=chartspire-ui-loading><div class=loading-container><div class=spinner><div class=spinner-ring></div><div class=spinner-ring></div><div class=spinner-ring></div></div><div class=loading-text>Loading...");const z2=()=>IE();var LE=Q('<div class=chartspire-ui-empty><svg class=icon viewBox="0 0 1024 1024"><path d="M855.6 427.2H168.5c-12.7 0-24.4 6.9-30.6 18L4.4 684.7C1.5 689.9 0 695.8 0 701.8v287.1c0 19.4 15.7 35.1 35.1 35.1H989c19.4 0 35.1-15.7 35.1-35.1V701.8c0-6-1.5-11.8-4.4-17.1L886.2 445.2c-6.2-11.1-17.9-18-30.6-18zM673.4 695.6c-16.5 0-30.8 11.5-34.3 27.7-12.7 58.5-64.8 102.3-127.2 102.3s-114.5-43.8-127.2-102.3c-3.5-16.1-17.8-27.7-34.3-27.7H119c-26.4 0-43.3-28-31.1-51.4l81.7-155.8c6.1-11.6 18-18.8 31.1-18.8h622.4c13 0 25 7.2 31.1 18.8l81.7 155.8c12.2 23.4-4.7 51.4-31.1 51.4H673.4zM819.9 209.5c-1-1.8-2.1-3.7-3.2-5.5-9.8-16.6-31.1-22.2-47.8-12.6L648.5 261c-17 9.8-22.7 31.6-12.6 48.4 0.9 1.4 1.7 2.9 2.5 4.4 9.5 17 31.2 22.8 48 13L807 257.3c16.7-9.7 22.4-31 12.9-47.8zM375.4 261.1L255 191.6c-16.7-9.6-38-4-47.8 12.6-1.1 1.8-2.1 3.6-3.2 5.5-9.5 16.8-3.8 38.1 12.9 47.8L337.3 327c16.9 9.7 38.6 4 48-13.1 0.8-1.5 1.7-2.9 2.5-4.4 10.2-16.8 4.5-38.6-12.4-48.4zM512 239.3h2.5c19.5 0.3 35.5-15.5 35.5-35.1v-139c0-19.3-15.6-34.9-34.8-35.1h-6.4C489.6 30.3 474 46 474 65.2v139c0 19.5 15.9 35.4 35.5 35.1h2.5z">');const PE=()=>LE();var AE=Q("<ul>"),DE=Q("<li>");const B2=e=>(()=>{var t=AE();return F(t,G(ze,{get when(){return e.loading},get children(){return G(z2,{})}}),null),F(t,G(ze,{get when(){var r;return!e.loading&&!e.children&&!((r=e.dataSource)!=null&&r.length)},get children(){return G(PE,{})}}),null),F(t,G(ze,{get when(){return e.children},get children(){return e.children}}),null),F(t,G(ze,{get when(){return!e.children},get children(){var r;return(r=e.dataSource)==null?void 0:r.map(n=>{var i;return((i=e.renderItem)==null?void 0:i.call(e,n))??DE()})}}),null),De(r=>{var n=e.style,i=`chartspire-ui-list ${e.class??""}`;return r.e=Tn(t,n,r.e),i!==r.t&&at(t,r.t=i),r},{e:void 0,t:void 0}),t})();var FE=Q('<div><div class=inner><div class=title-container><svg class=close-icon viewBox="0 0 1024 1024"><path d="M934.184927 199.723787 622.457206 511.452531l311.727721 311.703161c14.334473 14.229073 23.069415 33.951253 23.069415 55.743582 0 43.430138-35.178197 78.660524-78.735226 78.660524-21.664416 0-41.361013-8.865925-55.642275-23.069415L511.149121 622.838388 199.420377 934.490384c-14.204513 14.20349-33.901111 23.069415-55.642275 23.069415-43.482327 0-78.737272-35.230386-78.737272-78.660524 0-21.792329 8.864902-41.513486 23.094998-55.743582l311.677579-311.703161L88.135828 199.723787c-14.230096-14.255679-23.094998-33.92567-23.094998-55.642275 0-43.430138 35.254945-78.762855 78.737272-78.762855 21.741163 0 41.437761 8.813736 55.642275 23.069415l311.727721 311.727721L822.876842 88.389096c14.281261-14.255679 33.977859-23.069415 55.642275-23.069415 43.557028 0 78.735226 35.332716 78.735226 78.762855C957.254342 165.798117 948.5194 185.468109 934.184927 199.723787"></path></svg></div><div class=content-container>'),RE=Q("<div class=button-container>");const Rl=e=>{const[t,r]=be(!1);return ki(()=>{setTimeout(()=>{r(!0)},10)}),(()=>{var n=FE(),i=n.firstChild,o=i.firstChild,s=o.firstChild,u=o.nextSibling;return F(o,()=>e.title,s),Wi(s,"click",e.onClose),F(u,()=>e.children),F(i,(()=>{var d=Ae(()=>e.buttons!=null&&e.buttons.length>0);return()=>d()&&(()=>{var h=RE();return F(h,()=>e.buttons.map(p=>G(N2,Yp(p,{get children(){return p.children}})))),De(p=>(p=e.buttonContainerPadding??"15px 20px 15px")!=null?h.style.setProperty("padding",p):h.style.removeProperty("padding")),h})()})(),null),De(d=>{var h=`chartspire-ui-modal ${t()?"modal-show":""}`,p=`${e.width??400}px`,g=`${e.height??"80%"}`,m={...e.contentHeight!==void 0&&{height:typeof e.contentHeight=="string"?e.contentHeight:`${e.contentHeight}px`},padding:e.padding??"0 26px"};return h!==d.e&&at(n,d.e=h),p!==d.t&&((d.t=p)!=null?i.style.setProperty("width",p):i.style.removeProperty("width")),g!==d.a&&((d.a=g)!=null?i.style.setProperty("height",g):i.style.removeProperty("height")),d.o=Tn(u,m,d.o),d},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()};jt(["click"]);var OE=Q("<div tabindex=0><div class=selector-container><span class=value></span><i class=arrow>"),NE=Q("<div class=drop-down-container><ul>"),zE=Q("<li>");const Xp=e=>{const[t,r]=be(!1),[n,i]=be(e.value);return(()=>{var o=OE(),s=o.firstChild,u=s.firstChild;return o.addEventListener("blur",d=>{r(!1)}),o.$$click=d=>{r(h=>!h)},F(u,n),F(o,(()=>{var d=Ae(()=>e.dataSource!=null&&e.dataSource.length>0);return()=>d()&&(()=>{var h=NE(),p=h.firstChild;return F(p,()=>e.dataSource.map(g=>{const m=g[e.valueKey??"text"]??g;return(()=>{var b=zE();return b.$$click=x=>{var C;x.stopPropagation(),n()!==m&&(i(m),(C=e.onSelected)==null||C.call(e,g)),r(!1)},F(b,m),b})()})),h})()})(),null),De(d=>{var h=e.style,p=`chartspire-ui-select ${e.class??""} ${t()?"chartspire-ui-select-show":""}`;return d.e=Tn(o,h,d.e),p!==d.t&&at(o,d.t=p),d},{e:void 0,t:void 0}),o})()};jt(["click"]);var BE=Q("<span class=prefix>"),$E=Q("<span class=suffix>"),VE=Q("<div><input class=value>");const Wa=e=>{const t=Yp({min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER},e);let r;const[n,i]=be("normal");return(()=>{var o=VE(),s=o.firstChild;return o.$$click=()=>{r==null||r.focus()},F(o,G(ze,{get when(){return t.prefix},get children(){var u=BE();return F(u,()=>t.prefix),u}}),s),Wi(s,"input",t.onInput),s.addEventListener("change",u=>{var d,h;const p=u.target.value;if("precision"in t){let g;const m=Math.max(0,Math.floor(t.precision));m<=0?g=new RegExp(/^[1-9]\d*$/):g=new RegExp("^\\d+\\.?\\d{0,"+m+"}$"),(p===""||g.test(p)&&+p>=t.min&&+p<=t.max)&&((d=t.onChange)==null||d.call(t,p===""?p:+p))}else(h=t.onChange)==null||h.call(t,p)}),s.addEventListener("blur",()=>{i("normal")}),s.addEventListener("focus",()=>{i("focus")}),hi(u=>{r=u},s),F(o,G(ze,{get when(){return t.suffix},get children(){var u=$E();return F(u,()=>t.suffix),u}}),null),De(u=>{var d=t.style,h=`chartspire-ui-input ${t.class??""}`,p=n(),g=t.placeholder??"";return u.e=Tn(o,d,u.e),h!==u.t&&at(o,u.t=h),p!==u.a&&We(o,"data-status",u.a=p),g!==u.o&&We(s,"placeholder",u.o=g),u},{e:void 0,t:void 0,a:void 0,o:void 0}),De(()=>s.value=t.value),o})()};jt(["click","input"]);var WE=Q("<div><i class=thumb>");const UE=e=>(()=>{var t=WE();return t.$$click=r=>{e.onChange&&e.onChange()},De(r=>{var n=e.style,i=`chartspire-ui-switch ${e.open?"turn-on":"turn-off"} ${e.class??""}`;return r.e=Tn(t,n,r.e),i!==r.t&&at(t,r.t=i),r},{e:void 0,t:void 0}),t})();jt(["click"]);var HE=Q('<div class=chartspire-ui-modal-light><div><div class=title-container><div class=title-content><svg class=drag-handle viewBox="0 0 24 24"fill=currentColor><circle cx=8 cy=6 r=2></circle><circle cx=8 cy=12 r=2></circle><circle cx=8 cy=18 r=2></circle><circle cx=16 cy=6 r=2></circle><circle cx=16 cy=12 r=2></circle><circle cx=16 cy=18 r=2></circle></svg><span class=title-text></span></div><svg class=close-icon viewBox="0 0 1024 1024"><path d="M934.184927 199.723787 622.457206 511.452531l311.727721 311.703161c14.334473 14.229073 23.069415 33.951253 23.069415 55.743582 0 43.430138-35.178197 78.660524-78.735226 78.660524-21.664416 0-41.361013-8.865925-55.642275-23.069415L511.149121 622.838388 199.420377 934.490384c-14.204513 14.20349-33.901111 23.069415-55.642275 23.069415-43.482327 0-78.737272-35.230386-78.737272-78.660524 0-21.792329 8.864902-41.513486 23.094998-55.743582l311.677579-311.703161L88.135828 199.723787c-14.230096-14.255679-23.094998-33.92567-23.094998-55.642275 0-43.430138 35.254945-78.762855 78.737272-78.762855 21.741163 0 41.437761 8.813736 55.642275 23.069415l311.727721 311.727721L822.876842 88.389096c14.281261-14.255679 33.977859-23.069415 55.642275-23.069415 43.557028 0 78.735226 35.332716 78.735226 78.762855C957.254342 165.798117 948.5194 185.468109 934.184927 199.723787">'),YE=Q("<div class=alert-content><div class=alert-message><p>"),XE=Q("<div class=content-container>"),jE=Q("<div class=button-container>");const ZE=e=>{const[t,r]=be("chartspire-ui-modal-light"),n="Select starting candle by clicking on candle",[i,o]=be({x:0,y:0});let s,u,d=null;return nt(()=>{r(e.isPLaying()?"inner -transparent":"inner")}),ki(()=>{let h=!1,p={x:0,y:0};const g=M=>"touches"in M&&M.touches.length>0?{clientX:M.touches[0].clientX,clientY:M.touches[0].clientY}:{clientX:M.clientX,clientY:M.clientY},m=M=>{if(!s||!u||M.target.closest(".close-icon"))return;h=!0;const L=g(M),A=s.getBoundingClientRect(),P=s.offsetParent,$=P?P.getBoundingClientRect():{left:0,top:0};p={x:L.clientX-(A.left-$.left),y:L.clientY-(A.top-$.top)},document.addEventListener("mousemove",b),document.addEventListener("mouseup",x),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",x),M.preventDefault()},b=M=>{if(!h||!s)return;const L=g(M),A=s.offsetParent,P=A?A.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight},$=L.clientX-P.left-p.x,R=L.clientY-P.top-p.y,z=s.offsetWidth,B=s.offsetHeight,W=P.width-z,X=P.height-B,ee=Math.max(0,Math.min($,W)),U=Math.max(0,Math.min(R,X));o({x:ee,y:U}),"touches"in M&&h&&M.preventDefault()},x=()=>{h=!1,C()},C=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",x)},_=()=>{u&&(u.removeEventListener("mousedown",m),u.removeEventListener("touchstart",m))},k=()=>{h=!1,C(),_()};return d=k,u&&(u.addEventListener("mousedown",m),u.addEventListener("touchstart",m,{passive:!1})),k}),$r(()=>{d&&(console.log("onCleanup replay modal"),d())}),(()=>{var h=HE(),p=h.firstChild,g=p.firstChild,m=g.firstChild,b=m.firstChild,x=b.nextSibling,C=m.nextSibling,_=s;typeof _=="function"?hi(_,h):s=h;var k=u;return typeof k=="function"?hi(k,g):u=g,F(x,()=>e.title),Wi(C,"click",e.onClose),F(p,(()=>{var M=Ae(()=>!!e.showAlert);return()=>M()&&(()=>{var L=YE(),A=L.firstChild,P=A.firstChild;return F(P,()=>e.alertMessage||n),L})()})(),null),F(p,(()=>{var M=Ae(()=>!e.showAlert);return()=>M()&&[(()=>{var L=XE();return F(L,()=>e.children),L})(),Ae(()=>Ae(()=>e.buttons!=null&&e.buttons.length>0)()&&(()=>{var L=jE();return L.style.setProperty("padding","20px 30px 20px"),F(L,()=>e.buttons.map(A=>G(N2,Yp(A,{get children(){return A.children}})))),L})())]})(),null),De(M=>{var L={...(i().x!==0||i().y!==0)&&{left:`${i().x}px`,top:`${i().y}px`,transform:"none"}},A=t();return M.e=Tn(h,L,M.e),A!==M.t&&at(p,M.t=A),M},{e:void 0,t:void 0}),h})()};jt(["click"]);var GE=Q("<div class=chartspire-ui-filter-tags>"),QE=Q('<svg viewBox="0 0 1024 1024"><path d="M945.066667 898.133333l-189.866667-189.866666c55.466667-64 87.466667-149.333333 87.466667-241.066667 0-204.8-168.533333-373.333333-373.333334-373.333333S96 264.533333 96 469.333333 264.533333 842.666667 469.333333 842.666667c91.733333 0 174.933333-34.133333 241.066667-87.466667l189.866667 189.866667c6.4 6.4 14.933333 8.533333 23.466666 8.533333s17.066667-2.133333 23.466667-8.533333c8.533333-12.8 8.533333-34.133333-2.133333-46.933334zM469.333333 778.666667C298.666667 778.666667 160 640 160 469.333333S298.666667 160 469.333333 160 778.666667 298.666667 778.666667 469.333333 640 778.666667 469.333333 778.666667z">'),KE=Q("<span>"),qE=Q("<img alt=symbol>"),JE=Q("<li><div><span>");const $2=e=>{const[t,r]=be(e.enabledSymbolTypes[0]),n=Br.getInstance().getDataFeed(),[i,o]=be(""),[s]=GT(()=>[i(),t()],async([d,h])=>{const p=h==="all"?"all":h;return n?await n.searchSymbols(d,p):(console.error("No datafeed found"),[])}),u=ir(()=>Object.values(vr).filter(d=>{var h;return(h=e.enabledSymbolTypes)==null?void 0:h.includes(d)}));return G(Rl,{get title(){return I("symbol_search",e.locale)},width:460,get onClose(){return e.onClose},get children(){return[G(Wa,{class:"chartspire-ui-symbol-search-modal-input",get placeholder(){return I("symbol_code",e.locale)},get suffix(){return QE()},get value(){return i()},onChange:d=>{o(`${d}`)}}),(()=>{var d=GE();return F(d,()=>u().map(h=>(()=>{var p=KE();return p.$$click=()=>{r(h)},F(p,h),De(()=>at(p,`chartspire-ui-tag ${t()===h?"selected":""}`)),p})())),d})(),G(B2,{class:"chartspire-ui-symbol-search-modal-list",get loading(){return s.loading},get dataSource(){return s()??[]},renderItem:d=>(()=>{var h=JE(),p=h.firstChild,g=p.firstChild;return h.$$click=()=>{e.onSymbolSelected(d),e.onClose()},F(p,G(ze,{get when(){return d.logo},get children(){var m=qE();return De(()=>We(m,"src",d.logo)),m}}),g),F(g,()=>d.shortName??d.symbol,null),F(g,()=>`${d.name!=null?`(${d.name})`:""}`,null),F(h,()=>d.exchange??"",null),De(()=>We(g,"title",d.name??"")),h})()})]}})};jt(["click"]);var eM=Q("<div>"),jp=class{constructor(e){xe(this,"x"),xe(this,"y"),xe(this,"width"),xe(this,"height"),this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},Rd=e=>{let t=new jp(e.getBoundingClientRect());const{transform:r}=getComputedStyle(e);return r&&(t=tM(t,r)),t},tM=(e,t)=>{let r,n;if(t.startsWith("matrix3d(")){const i=t.slice(9,-1).split(/, /);r=+i[12],n=+i[13]}else if(t.startsWith("matrix(")){const i=t.slice(7,-1).split(/, /);r=+i[4],n=+i[5]}else r=0,n=0;return new jp({...e,x:e.x-r,y:e.y-n})},oa=()=>({x:0,y:0}),rv=(e,t)=>e.x===t.x&&e.y===t.y,ig=(e,t)=>new jp({...e,x:e.x+t.x,y:e.y+t.y}),rM=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),nM=(e,t)=>{const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom),s=i-n,u=o-r;if(n<i&&r<o){const d=e.width*e.height,h=t.width*t.height,p=s*u;return p/(d+h-p)}return 0},og=(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,iM=(e,t,r)=>{const n=e.transformed.center,i={distance:1/0,droppable:null};for(const o of t){const s=rM(n,o.layout.center);s<i.distance?(i.distance=s,i.droppable=o):s===i.distance&&o.id===r.activeDroppableId&&(i.droppable=o)}return i.droppable},oM=(e,t,r)=>{const n=e.transformed,i={ratio:0,droppable:null};for(const o of t){const s=nM(n,o.layout);s>i.ratio?(i.ratio=s,i.droppable=o):s>0&&s===i.ratio&&o.id===r.activeDroppableId&&(i.droppable=o)}return i.droppable},V2=T2(),aM=e=>{const t=Yp({collisionDetector:oM},e),[r,n]=Fl({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return r.active.draggableId!==null?r.draggables[r.active.draggableId]:null},droppableId:null,get droppable(){return r.active.droppableId!==null?r.droppables[r.active.droppableId]:null},sensorId:null,get sensor(){return r.active.sensorId!==null?r.sensors[r.active.sensorId]:null},overlay:null}}),i=(U,q,ie)=>{U.substring(0,U.length-1),Ge(()=>r[U][q])&&n(U,q,"transformers",ie.id,ie)},o=(U,q,ie)=>{U.substring(0,U.length-1),Ge(()=>r[U][q])&&Ge(()=>r[U][q].transformers[ie])&&n(U,q,"transformers",ie,void 0)},s=({id:U,node:q,layout:ie,data:le})=>{const ae=r.draggables[U],te={id:U,node:q,layout:ie,data:le,_pendingCleanup:!1};let ce;if(!ae)Object.defineProperties(te,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(r.active.overlay)return oa();const ue=Object.values(r.draggables[U].transformers);return ue.sort((j,Z)=>j.order-Z.order),ue.reduce((j,Z)=>Z.callback(j),oa())}},transformed:{enumerable:!0,configurable:!0,get:()=>ig(r.draggables[U].layout,r.draggables[U].transform)}});else if(r.active.draggableId===U&&!r.active.overlay){const ue={x:ae.layout.x-ie.x,y:ae.layout.y-ie.y},j="addDraggable-existing-offset",Z=ae.transformers[j],pe=Z?Z.callback(ue):ue;ce={id:j,order:100,callback:Y=>({x:Y.x+pe.x,y:Y.y+pe.y})},X(()=>o("draggables",U,j))}$a(()=>{n("draggables",U,te),ce&&i("draggables",U,ce)}),r.active.draggable&&A()},u=U=>{Ge(()=>r.draggables[U])&&(n("draggables",U,"_pendingCleanup",!0),queueMicrotask(()=>d(U)))},d=U=>{var q;if((q=r.draggables[U])!=null&&q._pendingCleanup){const ie=r.active.draggableId===U;$a(()=>{ie&&n("active","draggableId",null),n("draggables",U,void 0)})}},h=({id:U,node:q,layout:ie,data:le})=>{const ae=r.droppables[U],te={id:U,node:q,layout:ie,data:le,_pendingCleanup:!1};ae||Object.defineProperties(te,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const ce=Object.values(r.droppables[U].transformers);return ce.sort((ue,j)=>ue.order-j.order),ce.reduce((ue,j)=>j.callback(ue),oa())}},transformed:{enumerable:!0,configurable:!0,get:()=>ig(r.droppables[U].layout,r.droppables[U].transform)}}),n("droppables",U,te),r.active.draggable&&A()},p=U=>{Ge(()=>r.droppables[U])&&(n("droppables",U,"_pendingCleanup",!0),queueMicrotask(()=>g(U)))},g=U=>{var q;if((q=r.droppables[U])!=null&&q._pendingCleanup){const ie=r.active.droppableId===U;$a(()=>{ie&&n("active","droppableId",null),n("droppables",U,void 0)})}},m=({id:U,activators:q})=>{n("sensors",U,{id:U,activators:q,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:r.sensors[U].coordinates.current.x-r.sensors[U].coordinates.origin.x,y:r.sensors[U].coordinates.current.y-r.sensors[U].coordinates.origin.y}}}})},b=U=>{if(!Ge(()=>r.sensors[U]))return;const q=r.active.sensorId===U;$a(()=>{q&&n("active","sensorId",null),n("sensors",U,void 0)})},x=({node:U,layout:q})=>{const ie=r.active.overlay,le={node:U,layout:q};ie||Object.defineProperties(le,{id:{enumerable:!0,configurable:!0,get:()=>{var ae;return(ae=r.active.draggable)==null?void 0:ae.id}},data:{enumerable:!0,configurable:!0,get:()=>{var ae;return(ae=r.active.draggable)==null?void 0:ae.data}},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(r.active.draggable?r.active.draggable.transformers:{}).filter(([ae])=>ae!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const ae=Object.values(r.active.overlay?r.active.overlay.transformers:[]);return ae.sort((te,ce)=>te.order-ce.order),ae.reduce((te,ce)=>ce.callback(te),oa())}},transformed:{enumerable:!0,configurable:!0,get:()=>r.active.overlay?ig(r.active.overlay.layout,r.active.overlay.transform):new jp({x:0,y:0,width:0,height:0})}}),n("active","overlay",le)},C=()=>n("active","overlay",null),_=(U,q)=>{$a(()=>{n("sensors",U,"coordinates",{origin:{...q},current:{...q}}),n("active","sensorId",U)})},k=U=>{const q=r.active.sensorId;q&&n("sensors",q,"coordinates","current",{...U})},M=()=>n("active","sensorId",null),L=(U,q)=>{const ie={};for(const ae of Object.values(r.sensors))if(ae)for(const[te,ce]of Object.entries(ae.activators))ie[te]??(ie[te]=[]),ie[te].push({sensor:ae,activator:ce});const le={};for(const ae in ie){let te=ae;q&&(te=`on${ae}`),le[te]=ce=>{for(const{activator:ue}of ie[ae]){if(r.active.sensor)break;ue(ce,U)}}}return le},A=()=>{let U=!1;const q=Object.values(r.draggables),ie=Object.values(r.droppables),le=r.active.overlay;return $a(()=>{const ae=new WeakMap;for(const te of q)if(te){const ce=te.layout;ae.has(te.node)||ae.set(te.node,Rd(te.node));const ue=ae.get(te.node);og(ce,ue)||(n("draggables",te.id,"layout",ue),U=!0)}for(const te of ie)if(te){const ce=te.layout;ae.has(te.node)||ae.set(te.node,Rd(te.node));const ue=ae.get(te.node);og(ce,ue)||(n("droppables",te.id,"layout",ue),U=!0)}if(le){const te=le.layout,ce=Rd(le.node);og(te,ce)||(n("active","overlay","layout",ce),U=!0)}}),U},P=()=>{const U=r.active.overlay??r.active.draggable;if(U){const q=t.collisionDetector(U,Object.values(r.droppables),{activeDroppableId:r.active.droppableId}),ie=q?q.id:null;r.active.droppableId!==ie&&n("active","droppableId",ie)}},$=U=>{const q={id:"sensorMove",order:0,callback:ie=>r.active.sensor?{x:ie.x+r.active.sensor.coordinates.delta.x,y:ie.y+r.active.sensor.coordinates.delta.y}:ie};A(),$a(()=>{n("active","draggableId",U),i("draggables",U,q)}),P()},R=()=>{const U=Ge(()=>r.active.draggableId);$a(()=>{U!==null&&o("draggables",U,"sensorMove"),n("active",["draggableId","droppableId"],null)}),A()},z=U=>{nt(()=>{const q=r.active.draggable;q&&Ge(()=>U({draggable:q}))})},B=U=>{nt(()=>{const q=r.active.draggable;if(q){const ie=Ge(()=>r.active.overlay);Object.values(ie?ie.transform:q.transform),Ge(()=>U({draggable:q,overlay:ie}))}})},W=U=>{nt(()=>{const q=r.active.draggable,ie=r.active.droppable;q&&Ge(()=>U({draggable:q,droppable:ie,overlay:r.active.overlay}))})},X=U=>{nt(({previousDraggable:q,previousDroppable:ie,previousOverlay:le})=>{const ae=r.active.draggable,te=ae?r.active.droppable:null,ce=ae?r.active.overlay:null;return!ae&&q&&Ge(()=>U({draggable:q,droppable:ie,overlay:le})),{previousDraggable:ae,previousDroppable:te,previousOverlay:ce}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};B(()=>P()),t.onDragStart&&z(t.onDragStart),t.onDragMove&&B(t.onDragMove),t.onDragOver&&W(t.onDragOver),t.onDragEnd&&X(t.onDragEnd);const ee=[r,{addTransformer:i,removeTransformer:o,addDraggable:s,removeDraggable:u,addDroppable:h,removeDroppable:p,addSensor:m,removeSensor:b,setOverlay:x,clearOverlay:C,recomputeLayouts:A,detectCollisions:P,draggableActivators:L,sensorStart:_,sensorMove:k,sensorEnd:M,dragStart:$,dragEnd:R,onDragStart:z,onDragMove:B,onDragOver:W,onDragEnd:X}];return G(V2.Provider,{value:ee,get children(){return t.children}})},Ud=()=>E2(V2)||null,sM=(e="pointer-sensor")=>{const[t,{addSensor:r,removeSensor:n,sensorStart:i,sensorMove:o,sensorEnd:s,dragStart:u,dragEnd:d}]=Ud(),h=250,p=10;ki(()=>{r({id:e,activators:{pointerdown:C}})}),$r(()=>{n(e)});const g=()=>t.active.sensorId===e,m={x:0,y:0};let b=null,x=null;const C=(P,$)=>{P.button===0&&(document.addEventListener("pointermove",M),document.addEventListener("pointerup",L),x=$,m.x=P.clientX,m.y=P.clientY,b=window.setTimeout(k,h))},_=()=>{b&&(clearTimeout(b),b=null),document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",L),document.removeEventListener("selectionchange",A)},k=()=>{t.active.sensor?g()||_():(i(e,m),u(x),A(),document.addEventListener("selectionchange",A))},M=P=>{const $={x:P.clientX,y:P.clientY};if(!t.active.sensor){const R={x:$.x-m.x,y:$.y-m.y};Math.sqrt(R.x**2+R.y**2)>p&&k()}g()&&(P.preventDefault(),o($))},L=P=>{_(),g()&&(P.preventDefault(),d(),s())},A=()=>{var P;(P=window.getSelection())==null||P.removeAllRanges()}},lM=e=>(sM(),Ae(()=>e.children)),Zp=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),cM=(e,t={})=>{const[r,{addDraggable:n,removeDraggable:i,draggableActivators:o}]=Ud(),[s,u]=be(null);ki(()=>{const p=s();p&&n({id:e,node:p,layout:Rd(p),data:t})}),$r(()=>i(e));const d=()=>r.active.draggableId===e,h=()=>{var p;return((p=r.draggables[e])==null?void 0:p.transform)||oa()};return Object.defineProperties((p,g)=>{const m=g?g():{};nt(()=>{const b=s(),x=o(e);if(b)for(const C in x)b.addEventListener(C,x[C]);$r(()=>{if(b)for(const C in x)b.removeEventListener(C,x[C])})}),u(p),m.skipTransform||nt(()=>{const b=h();if(rv(b,oa()))p.style.removeProperty("transform");else{const x=Zp(h());p.style.setProperty("transform",x.transform??null)}})},{ref:{enumerable:!0,value:u},isActiveDraggable:{enumerable:!0,get:d},dragActivators:{enumerable:!0,get:()=>o(e,!0)},transform:{enumerable:!0,get:h}})},uM=(e,t={})=>{const[r,{addDroppable:n,removeDroppable:i}]=Ud(),[o,s]=be(null);ki(()=>{const h=o();h&&n({id:e,node:h,layout:Rd(h),data:t})}),$r(()=>i(e));const u=()=>r.active.droppableId===e,d=()=>{var h;return((h=r.droppables[e])==null?void 0:h.transform)||oa()};return Object.defineProperties((h,p)=>{const g=p?p():{};s(h),g.skipTransform||nt(()=>{const m=d();if(rv(m,oa()))h.style.removeProperty("transform");else{const b=Zp(d());h.style.setProperty("transform",b.transform??null)}})},{ref:{enumerable:!0,value:s},isActiveDroppable:{enumerable:!0,get:u},transform:{enumerable:!0,get:d}})},dM=e=>{const[t,{onDragStart:r,onDragEnd:n,setOverlay:i,clearOverlay:o}]=Ud();let s;r(({draggable:d})=>{i({node:d.node,layout:d.layout}),queueMicrotask(()=>{if(s){const h=Rd(s),p={x:(d.layout.width-h.width)/2,y:(d.layout.height-h.height)/2};h.x+=p.x,h.y+=p.y,i({node:s,layout:h})}})}),n(()=>queueMicrotask(o));const u=()=>{const d=t.active.overlay,h=t.active.draggable;return!d||!h?{}:{position:"fixed",transition:"transform 0s",top:`${d.layout.top}px`,left:`${d.layout.left}px`,"min-width":`${h.layout.width}px`,"min-height":`${h.layout.height}px`,...Zp(d.transform),...e.style}};return G(tv,{get mount(){return document.body},get children(){return G(ze,{get when(){return t.active.draggable},get children(){var d=eM(),h=s;return typeof h=="function"?hi(h,d):s=d,F(d,(()=>{var p=Ae(()=>typeof e.children=="function");return()=>p()?e.children(t.active.draggable):e.children})()),De(p=>{var g=e.class,m=u();return g!==p.e&&at(d,p.e=g),p.t=Tn(d,m,p.t),p},{e:void 0,t:void 0}),d}})}})},hM=(e,t,r)=>{const n=e.slice();return n.splice(r,0,...n.splice(t,1)),n},W2=T2(),pM=e=>{const[t]=Ud(),[r,n]=Fl({initialIds:[],sortedIds:[]}),i=s=>s>=0&&s<r.initialIds.length;nt(()=>{n("initialIds",[...e.ids]),n("sortedIds",[...e.ids])}),nt(()=>{t.active.draggableId&&t.active.droppableId?Ge(()=>{const s=r.sortedIds.indexOf(t.active.draggableId),u=r.initialIds.indexOf(t.active.droppableId);if(!i(s)||!i(u))n("sortedIds",[...e.ids]);else if(s!==u){const d=hM(r.sortedIds,s,u);n("sortedIds",d)}}):n("sortedIds",[...e.ids])});const o=[r,{}];return G(W2.Provider,{value:o,get children(){return e.children}})},fM=()=>E2(W2)||null,gM=(e,t)=>r=>{e(r),t(r)},vM=(e,t={})=>{const[r,{addTransformer:n,removeTransformer:i}]=Ud(),[o]=fM(),s=cM(e,t),u=uM(e,t),d=gM(s.ref,u.ref),h=()=>o.initialIds.indexOf(e),p=()=>o.sortedIds.indexOf(e),g=C=>{var _;return((_=r.droppables[C])==null?void 0:_.layout)||null},m=()=>{const C=oa(),_=h(),k=p();if(k!==_){const M=g(e),L=g(o.initialIds[k]);M&&L&&(C.x=L.x-M.x,C.y=L.y-M.y)}return C},b={id:"sortableOffset",order:100,callback:C=>{const _=m();return{x:C.x+_.x,y:C.y+_.y}}};ki(()=>n("droppables",e,b)),$r(()=>i("droppables",e,b.id));const x=()=>{var C,_;return(e===r.active.draggableId&&!r.active.overlay?(C=r.draggables[e])==null?void 0:C.transform:(_=r.droppables[e])==null?void 0:_.transform)||oa()};return Object.defineProperties(C=>{s(C,()=>({skipTransform:!0})),u(C,()=>({skipTransform:!0})),nt(()=>{const _=x();if(rv(_,oa()))C.style.removeProperty("transform");else{const k=Zp(x());C.style.setProperty("transform",k.transform??null)}})},{ref:{enumerable:!0,value:d},transform:{enumerable:!0,get:x},isActiveDraggable:{enumerable:!0,get:()=>s.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>s.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>u.isActiveDroppable}})};const mM=async()=>null;class yM{constructor(t){xe(this,"useExternalStorage"),this.useExternalStorage=t}addToStorage(t){if(!this.useExternalStorage)try{localStorage.setItem("watchlist",JSON.stringify(t))}catch(r){console.error("Error saving watchlist to local storage:",r)}}async fetchWatchlist(){try{if(this.useExternalStorage)return await mM()||(console.error("Failed to fetch watchlist data from external."),null);{const t=localStorage.getItem("watchlist");return t?JSON.parse(t):(console.error("Failed to fetch watchlist data from local storage."),null)}}catch(t){return console.error("Error fetching watchlist data:",t),null}}}class bM{constructor(t){xe(this,"config"),xe(this,"subscriptions",new Map),xe(this,"symbolData",{}),xe(this,"previousPrices",{}),xe(this,"currentWatchlist",null),this.config=t}getSymbolKey(t){return`${t.symbol}_${t.exchange}`}createSymbolCallback(t){return(r,n)=>{var i;if(!n)return;const o=this.getSymbolKey(n),s=(i=this.symbolData[o])==null?void 0:i.close;s!==void 0&&(this.previousPrices[o]=s),this.symbolData[o]=r;const u=this.subscriptions.get(o);u&&(u.lastPrice=r.close),t(o,r,s)}}subscribeSymbol(t,r){var n;const i=`${this.config.uuid}_${this.getSymbolKey(t)}`,o=this.createSymbolCallback(r);console.log(`WebSocketStrategy: Subscribing to ${t.symbol} from ${t.exchange} with ID ${i}`),this.config.dataFeed.subscribeSymbol(t,this.config.interval,o,i),this.subscriptions.set(this.getSymbolKey(t),{symbol:t,subscribed:!0,lastPrice:(n=this.symbolData[this.getSymbolKey(t)])==null?void 0:n.close})}unsubscribeSymbol(t){const r=`${this.config.uuid}_${this.getSymbolKey(t)}`;console.log(`WebSocketStrategy: Unsubscribing from ${t.symbol} from ${t.exchange} with ID ${r}`),this.config.dataFeed.unsubscribeSymbol(t,this.config.interval,r);const n=this.subscriptions.get(this.getSymbolKey(t));n&&(n.subscribed=!1)}subscribeToSymbols(t,r){console.log(`WebSocketStrategy: Subscribing to ${t.length} symbols using individual subscriptions`),t.forEach((n,i)=>{setTimeout(()=>{this.subscribeSymbol(n,r)},i*300)})}unsubscribeFromSymbols(t){console.log(`WebSocketStrategy: Unsubscribing from ${t.length} symbols using individual unsubscriptions`),t.forEach((r,n)=>{setTimeout(()=>{this.unsubscribeSymbol(r)},n*300)})}switchSymbols(t,r,n){console.log(`WebSocketStrategy: Switching from ${r.length} old symbols to ${t.length} new symbols`),this.unsubscribeFromSymbols(r),setTimeout(()=>{this.subscribeToSymbols(t,n)},500)}cleanup(){console.log("WebSocketStrategy: Cleaning up all subscriptions and data"),this.subscriptions.forEach((t,r)=>{t.subscribed&&(console.log(`WebSocketStrategy: Cleaning up subscription for ${r}`),this.unsubscribeSymbol(t.symbol))}),this.subscriptions.clear(),this.symbolData={},this.previousPrices={},this.currentWatchlist=null}getSubscriptionStatus(){if(this.subscriptions.size===0)return null;const t=Array.from(this.subscriptions.values()).filter(r=>r.subscribed).length;return{watchlistName:this.currentWatchlist||"WEBSOCKET_STREAMING",totalSymbols:this.subscriptions.size,subscribedSymbols:t,subscriptions:this.subscriptions}}getStrategyType(){return"WebSocket"}getPriceColor(t){var r;const n=(r=this.symbolData[this.getSymbolKey(t)])==null?void 0:r.close,i=this.previousPrices[this.getSymbolKey(t)];return n===void 0||i===void 0?"#FFFFFF":n>i?"#00FF00":n<i?"#FF0000":"#FFFFFF"}getSymbolData(){return this.symbolData}getPreviousPrices(){return this.previousPrices}}class xM{constructor(t,r){xe(this,"dataFeed"),xe(this,"config"),xe(this,"symbolQueue",new Map),xe(this,"pollingTimer",null),xe(this,"isPolling",!1),xe(this,"batchIndex",0),this.dataFeed=t,this.config=r,console.log(`HTTPPollingService: Initialized with interval=${r.interval}ms, batchSize=${r.batchSize}`)}addSymbol(t,r){const n=this.getSymbolKey(t);console.log(`HTTPPollingService: Adding symbol ${n} to polling queue`),this.symbolQueue.set(n,{symbol:t,callback:r,retryCount:0,lastFetchTime:0,isActive:!0}),this.isPolling||this.startPolling()}removeSymbol(t){const r=this.getSymbolKey(t);console.log(`HTTPPollingService: Removing symbol ${r} from polling queue`);const n=this.symbolQueue.get(r);n&&(n.isActive=!1,this.symbolQueue.delete(r)),this.symbolQueue.size===0&&this.stopPolling()}startPolling(){this.isPolling||(console.log("HTTPPollingService: Starting polling process"),this.isPolling=!0,this.scheduleNextPoll())}stopPolling(){console.log("HTTPPollingService: Stopping polling process"),this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null),this.isPolling=!1}scheduleNextPoll(){this.isPolling&&(this.pollingTimer=setTimeout(()=>{this.executePollCycle()},this.config.interval))}async executePollCycle(){if(this.symbolQueue.size===0){this.stopPolling();return}const t=Array.from(this.symbolQueue.values()).filter(s=>s.isActive).map(s=>s.symbol);if(t.length===0){this.stopPolling();return}const r=this.config.batchSize,n=this.batchIndex*r,i=Math.min(n+r,t.length),o=t.slice(n,i);console.log(`HTTPPollingService: Processing batch ${this.batchIndex+1} with ${o.length} symbols (${n+1}-${i} of ${t.length})`),await this.processBatch(o),this.batchIndex=i>=t.length?0:this.batchIndex+1,this.scheduleNextPoll()}async processBatch(t){const r=t.map(n=>this.fetchSymbolPrice(n));(await Promise.allSettled(r)).forEach((n,i)=>{n.status==="rejected"&&console.warn(`HTTPPollingService: Failed to fetch price for ${t[i].symbol}:`,n.reason)})}async fetchSymbolPrice(t){const r=this.getSymbolKey(t),n=this.symbolQueue.get(r);if(!(!n||!n.isActive))try{const i=Date.now(),o=await this.dataFeed.getPrice(t,t.type),s=Date.now()-i;o!==null&&typeof o=="number"&&!isNaN(o)?(n.retryCount=0,n.lastFetchTime=Date.now(),console.log(`HTTPPollingService: Fetched price for ${r}: ${o} (took ${s}ms)`),n.callback(o)):this.handleFetchError(r,new Error("No valid price data received"))}catch(i){this.handleFetchError(r,i)}}handleFetchError(t,r){const n=this.symbolQueue.get(t);n&&(n.retryCount++,this.config.retryEnabled&&n.retryCount<=this.config.maxRetries?console.warn(`HTTPPollingService: Retry ${n.retryCount}/${this.config.maxRetries} for ${t}: ${r.message}`):console.error(`HTTPPollingService: Max retries exceeded for ${t}: ${r.message}`))}cleanup(){console.log("HTTPPollingService: Cleaning up all resources"),this.stopPolling(),this.symbolQueue.clear(),this.batchIndex=0}getPollingStats(){const t=Array.from(this.symbolQueue.values()).filter(r=>r.isActive).length;return{totalSymbols:this.symbolQueue.size,activeSymbols:t,isPolling:this.isPolling,currentBatch:this.batchIndex,interval:this.config.interval}}getSymbolKey(t){return`${t.symbol}_${t.exchange||"default"}`}}class wM{constructor(t,r){xe(this,"config"),xe(this,"httpConfig"),xe(this,"subscriptions",new Map),xe(this,"symbolData",{}),xe(this,"previousPrices",{}),xe(this,"pollingService"),xe(this,"updateCallback",null),this.config=t,this.httpConfig=r,this.pollingService=new xM(t.dataFeed,r),console.log(`HTTPStrategy: Initialized with interval=${r.interval}ms, batchSize=${r.batchSize}`)}getSymbolKey(t){return`${t.symbol}_${t.exchange||"default"}`}subscribeSymbol(t,r){this.updateCallback=r;const n=this.getSymbolKey(t);console.log(`HTTPStrategy: Subscribing to ${t.symbol} from ${t.exchange||"default"}`),this.pollingService.addSymbol(t,i=>{this.handlePriceUpdate(t,i,r)}),this.subscriptions.set(n,{symbol:t,subscribed:!0,lastPrice:void 0})}unsubscribeSymbol(t){const r=this.getSymbolKey(t);console.log(`HTTPStrategy: Unsubscribing from ${t.symbol} from ${t.exchange||"default"}`),this.pollingService.removeSymbol(t),this.subscriptions.delete(r),delete this.symbolData[r],delete this.previousPrices[r]}subscribeToSymbols(t,r){this.updateCallback=r,console.log(`HTTPStrategy: Subscribing to ${t.length} symbols using HTTP polling`),t.forEach((n,i)=>{setTimeout(()=>{this.subscribeSymbol(n,r)},i*100)})}unsubscribeFromSymbols(t){console.log(`HTTPStrategy: Unsubscribing from ${t.length} symbols`),t.forEach(r=>{this.unsubscribeSymbol(r)})}switchSymbols(t,r,n){console.log(`HTTPStrategy: Switching from ${r.length} old symbols to ${t.length} new symbols`),this.unsubscribeFromSymbols(r),setTimeout(()=>{this.subscribeToSymbols(t,n)},200)}cleanup(){console.log("HTTPStrategy: Cleaning up all resources"),this.pollingService.cleanup(),this.subscriptions.clear(),this.symbolData={},this.previousPrices={},this.updateCallback=null}getSubscriptionStatus(){if(this.subscriptions.size===0)return null;const t=Array.from(this.subscriptions.values()).filter(r=>r.subscribed).length;return{watchlistName:`HTTP_POLLING (${this.pollingService.getPollingStats().interval}ms)`,totalSymbols:this.subscriptions.size,subscribedSymbols:t,subscriptions:this.subscriptions}}getStrategyType(){return"HTTP"}handlePriceUpdate(t,r,n){var i;const o=this.getSymbolKey(t),s=(i=this.symbolData[o])==null?void 0:i.close,u={timestamp:Date.now(),open:r,high:r,low:r,close:r,volume:0,turnover:0};s!==void 0&&(this.previousPrices[o]=s),this.symbolData[o]=u;const d=this.subscriptions.get(o);d&&(d.lastPrice=r),n(o,u,s)}getPriceColor(t){var r;const n=(r=this.symbolData[this.getSymbolKey(t)])==null?void 0:r.close,i=this.previousPrices[this.getSymbolKey(t)];return n===void 0||i===void 0?"#FFFFFF":n>i?"#00FF00":n<i?"#FF0000":"#FFFFFF"}getSymbolData(){return this.symbolData}getPreviousPrices(){return this.previousPrices}getPollingStats(){return this.pollingService.getPollingStats()}}class Rm{static create(t,r){if(r.useHttp){const n={interval:Math.max(r.httpInterval||5e3,1e3),batchSize:Math.max(r.httpBatchSize||10,1),retryEnabled:r.httpRetryEnabled??!0,maxRetries:Math.max(r.httpMaxRetries||3,0)};return console.log("WatchlistStrategyFactory: Creating HTTP strategy with config:",n),new wM(t,n)}else return console.log("WatchlistStrategyFactory: Creating WebSocket strategy"),new bM(t)}static getDefaultHttpOptions(){return{httpInterval:5e3,httpBatchSize:10,httpRetryEnabled:!0,httpMaxRetries:3}}static validateOptions(t){const r=this.getDefaultHttpOptions();return{useHttp:t.useHttp||!1,httpInterval:Math.max(t.httpInterval||r.httpInterval,1e3),httpBatchSize:Math.max(t.httpBatchSize||r.httpBatchSize,1),httpRetryEnabled:t.httpRetryEnabled??r.httpRetryEnabled,httpMaxRetries:Math.max(t.httpMaxRetries||r.httpMaxRetries,0)}}static getStrategyDescription(t){return t.useHttp?`HTTP Polling (${t.httpInterval}ms interval, ${t.httpBatchSize} batch size)`:"WebSocket Streaming"}}class CM{constructor(t){xe(this,"config"),xe(this,"strategy"),xe(this,"currentWatchlist",null),this.config=t;const r={interval:t.interval,uuid:t.uuid,dataFeed:t.dataFeed},n={useHttp:t.useHttp||!1,httpInterval:t.httpInterval,httpBatchSize:t.httpBatchSize,httpRetryEnabled:t.httpRetryEnabled,httpMaxRetries:t.httpMaxRetries};this.strategy=Rm.create(r,n),console.log(`WatchlistDataService: Initialized with ${Rm.getStrategyDescription(n)}`)}getSymbolKey(t){return`${t.symbol}_${t.exchange||"default"}`}subscribeToWatchlist(t,r){console.log(`WatchlistDataService: Subscribing to watchlist ${t} with ${r.length} symbols using ${this.strategy.getStrategyType()} strategy`),this.currentWatchlist=t,this.strategy.subscribeToSymbols(r,this.config.onSymbolUpdate)}unsubscribeFromWatchlist(t,r){console.log(`WatchlistDataService: Unsubscribing from watchlist ${t} with ${r.length} symbols using ${this.strategy.getStrategyType()} strategy`),this.strategy.unsubscribeFromSymbols(r),this.currentWatchlist===t&&(this.currentWatchlist=null)}subscribeToSingleSymbols(t){console.log(`WatchlistDataService: Adding symbol ${t.symbol} to current watchlist using ${this.strategy.getStrategyType()} strategy`),this.strategy.subscribeSymbol(t,this.config.onSymbolUpdate)}unsubscribeFromSingleSymbol(t){if(console.log(`WatchlistDataService: Removing symbol ${t.symbol} from current watchlist using ${this.strategy.getStrategyType()} strategy`),this.strategy.unsubscribeSymbol(t),this.config.onSymbolRemove){const r=this.getSymbolKey(t);this.config.onSymbolRemove(r)}}switchWatchlist(t,r,n,i){console.log(`WatchlistDataService: Switching from ${n||"none"} to ${t} using ${this.strategy.getStrategyType()} strategy`),this.strategy.switchSymbols(r,i||[],this.config.onSymbolUpdate),this.currentWatchlist=t}getSubscriptionStatus(){return this.strategy.getSubscriptionStatus()}getPriceColor(t){return typeof this.strategy.getPriceColor=="function"?this.strategy.getPriceColor(t):"#FFFFFF"}getSymbolData(){return typeof this.strategy.getSymbolData=="function"?this.strategy.getSymbolData():{}}getPreviousPrices(){return typeof this.strategy.getPreviousPrices=="function"?this.strategy.getPreviousPrices():{}}getStrategyInfo(){const t={type:this.strategy.getStrategyType(),status:this.strategy.getSubscriptionStatus()};return typeof this.strategy.getPollingStats=="function"&&(t.pollingStats=this.strategy.getPollingStats()),t}cleanup(){console.log(`WatchlistDataService: Cleaning up strategy (${this.strategy.getStrategyType()})`),this.strategy.cleanup(),this.currentWatchlist=null}}function _M(e,t,r,n){const[i,o]=be({}),[s,u]=be({}),d={interval:e,uuid:t,dataFeed:r,onSymbolUpdate:(p,g,m)=>{o(b=>({...b,[p]:g})),m!==void 0&&u(b=>({...b,[p]:m}))},onSymbolRemove:p=>{o(g=>{const m={...g};return delete m[p],m}),u(g=>{const m={...g};return delete m[p],m})},useHttp:n==null?void 0:n.useHttp,httpInterval:n==null?void 0:n.httpInterval,httpBatchSize:n==null?void 0:n.httpBatchSize,httpRetryEnabled:n==null?void 0:n.httpRetryEnabled,httpMaxRetries:n==null?void 0:n.httpMaxRetries},h=new CM(d);return $r(()=>{h.cleanup()}),{symbolData:i,previousPrices:s,subscribeToWatchlist:(p,g)=>{h.subscribeToWatchlist(p,g)},unsubscribeFromWatchlist:(p,g)=>{h.unsubscribeFromWatchlist(p,g)},subscribeToSymbol:p=>{h.subscribeToSingleSymbols(p)},unsubscribeFromSymbol:p=>{h.unsubscribeFromSingleSymbol(p)},switchWatchlist:(p,g,m,b)=>{h.switchWatchlist(p,g,m,b)},getPriceColor:p=>h.getPriceColor(p),getSubscriptionStatus:()=>h.getSubscriptionStatus(),dataService:h}}class Oc{static generateDefaultName(t){return`WatchList ${t}`}static initializeWatchlists(t,r=null){const n={};if(r){const i=Object.keys(r);for(let s=0;s<Math.min(t,i.length);s++){const u=i[s];n[u]=r[u]||[]}const o=Object.keys(n).length;for(let s=o;s<t;s++){const u=this.generateDefaultName(s+1);n[u]=[]}}else for(let i=1;i<=t;i++){const o=this.generateDefaultName(i);n[o]=[]}return n}static renameWatchlist(t,r,n){if(r===n)return t;if(!t[r])return console.warn(`Watchlist '${r}' does not exist`),t;if(t[n])return console.warn(`Watchlist '${n}' already exists`),t;const i={};for(const[o,s]of Object.entries(t))o===r?i[n]=s:i[o]=s;return i}static validateWatchlistName(t,r){return!t||t.trim().length===0?{isValid:!1,error:"Watchlist name cannot be empty"}:t.trim().length>50?{isValid:!1,error:"Watchlist name cannot exceed 50 characters"}:r.includes(t.trim())?{isValid:!1,error:"Watchlist name already exists"}:/^[a-zA-Z0-9\s\-_]+$/.test(t.trim())?{isValid:!0}:{isValid:!1,error:"Watchlist name can only contain letters, numbers, spaces, hyphens, and underscores"}}static getOrderedNames(t){return Object.keys(t).sort((r,n)=>{const i=r.startsWith("WatchList "),o=n.startsWith("WatchList ");if(i&&o){const s=parseInt(r.split(" ")[1]),u=parseInt(n.split(" ")[1]);return s-u}else return i&&!o?1:!i&&o?-1:r.localeCompare(n)})}static migrateFromLegacyFormat(t,r){const n={};for(const[o,s]of Object.entries(t))s&&s.length>0&&(n[o]=s);const i=Object.keys(n).length;for(let o=i+1;o<=r;o++){const s=this.generateDefaultName(o);n[s]||(n[s]=[])}return n}}const Og=class Tl{constructor(){xe(this,"isProcessing",!1),xe(this,"pendingUpdates",new Map),xe(this,"chartSubscribedSymbols",null),xe(this,"setChartSubscribedSymbols",null),xe(this,"visibleChartIds",null),xe(this,"activeChart",null),xe(this,"setSymbolCallback",null)}static getInstance(){return Tl.instance||(Tl.instance=new Tl),Tl.instance}initialize(t,r,n,i,o){this.chartSubscribedSymbols=t,this.setChartSubscribedSymbols=r,this.visibleChartIds=n,this.activeChart=i,this.setSymbolCallback=o,console.log("SymbolSyncManager: Initialized with chart state accessors")}requestSymbolChange(t,r){if(console.log("SymbolSyncManager: Symbol change requested -",t.id,r),this.isProcessing){console.log("SymbolSyncManager: Currently processing, queuing update for",t.id),this.pendingUpdates.set(t.id,{chartId:t,symbol:r});return}this.processSymbolChange(t,r)}processSymbolChange(t,r){console.log("SymbolSyncManager: Processing symbol change -",t.id,r,"TIMESTAMP:",Date.now()),this.isProcessing=!0;try{if(this.isDuplicateCall(t,r)){console.log("SymbolSyncManager: Skipping duplicate symbol change for",t.id);return}Tl.enabled?this.syncAllCharts(t,r):this.updateSingleChart(t,r)}catch(n){console.error("SymbolSyncManager: Error processing symbol change:",n)}finally{this.isProcessing=!1,this.processPendingUpdates()}}isDuplicateCall(t,r){if(!this.chartSubscribedSymbols)return console.log("SymbolSyncManager: isDuplicateCall - no chartSubscribedSymbols accessor"),!1;const n=this.chartSubscribedSymbols()[t.id];return(n==null?void 0:n.symbol)===(r==null?void 0:r.symbol)&&(n==null?void 0:n.exchange)===(r==null?void 0:r.exchange)&&(n==null?void 0:n.type)===(r==null?void 0:r.type)}syncAllCharts(t,r){if(!this.chartSubscribedSymbols||!this.setChartSubscribedSymbols||!this.visibleChartIds||!this.activeChart){console.error("SymbolSyncManager: Not properly initialized");return}console.log("SymbolSyncManager: Starting atomic sync operation");const n=this.captureCurrentStates();console.log("SymbolSyncManager: Captured current states:",n);const i=this.getChartsRequiringUpdate(t,r);console.log("SymbolSyncManager: Charts to update (before state update):",i.map(s=>s.id));const o=n.get(t.id);o&&(console.log("SymbolSyncManager: Setting previous symbol for source chart",t.id,o),Br.getInstance().setPreviousSymbol(t,o)),i.forEach(s=>{const u=n.get(s.id);u&&(console.log("SymbolSyncManager: Setting previous symbol for",s.id,u),Br.getInstance().setPreviousSymbol(s,u))}),this.setChartSubscribedSymbols(s=>({...s,[t.id]:r})),this.updateChartsAtomically(i,r)}updateSingleChart(t,r){var n,i;if(!this.setChartSubscribedSymbols||!this.setSymbolCallback){console.error("SymbolSyncManager: Not properly initialized for single chart update");return}console.log("SymbolSyncManager: Updating single chart:",t.id);const o=(i=(n=this.chartSubscribedSymbols)==null?void 0:n.call(this))==null?void 0:i[t.id];o&&Br.getInstance().setPreviousSymbol(t,o),this.setChartSubscribedSymbols(s=>({...s,[t.id]:r})),this.setSymbolCallback(r,t,Br.getInstance().getDataFeed())}captureCurrentStates(){const t=new Map;if(this.chartSubscribedSymbols){const r=this.chartSubscribedSymbols();Object.entries(r).forEach(([n,i])=>{i&&t.set(n,{...i})})}return t}getChartsRequiringUpdate(t,r){return!this.visibleChartIds||!this.chartSubscribedSymbols?(console.log("SymbolSyncManager: getChartsRequiringUpdate - EARLY RETURN due to missing accessors:",{visibleChartIds:!!this.visibleChartIds,chartSubscribedSymbols:!!this.chartSubscribedSymbols}),[]):(console.log("SymbolSyncManager: getChartsRequiringUpdate - checking visible charts:",this.visibleChartIds().map(n=>n.id)),console.log("SymbolSyncManager: getChartsRequiringUpdate - current state:",this.chartSubscribedSymbols()),this.visibleChartIds().filter(n=>{if(n.id===t.id)return console.log("SymbolSyncManager: Skipping source chart:",n.id),!1;const i=this.chartSubscribedSymbols()[n.id];return console.log(`SymbolSyncManager: Checking chart ${n.id} - current:`,i,"new:",r),(i==null?void 0:i.symbol)===(r==null?void 0:r.symbol)&&(i==null?void 0:i.exchange)===(r==null?void 0:r.exchange)?(console.log(`SymbolSyncManager: Skipping chart ${n.id} - already has same symbol`),!1):(console.log(`SymbolSyncManager: Chart ${n.id} needs update`),!0)}))}updateChartsAtomically(t,r){this.setSymbolCallback&&(console.log("SymbolSyncManager: Applying atomic updates to",t.length,"charts"),t.length>0&&this.setChartSubscribedSymbols(n=>{const i={...n};return t.forEach(o=>{i[o.id]=r}),i}),t.forEach(n=>{console.log("SymbolSyncManager: Updating chart",n.id,"to",r),this.setSymbolCallback(r,n,Br.getInstance().getDataFeed())}))}processPendingUpdates(){if(this.pendingUpdates.size>0){console.log("SymbolSyncManager: Processing",this.pendingUpdates.size,"pending updates");const t=Array.from(this.pendingUpdates.values());this.pendingUpdates.clear();const r=new Map;t.forEach(n=>{r.set(n.chartId.id,n)}),r.forEach(n=>{this.processSymbolChange(n.chartId,n.symbol)})}}isCurrentlyProcessing(){return this.isProcessing}getPendingUpdatesCount(){return this.pendingUpdates.size}clearPendingUpdates(){this.pendingUpdates.clear(),console.log("SymbolSyncManager: Cleared all pending updates")}static setEnabled(t){Tl.enabled=t}static isEnabled(){return Tl.enabled}};xe(Og,"instance"),xe(Og,"enabled",!1);let nv=Og;const iv=()=>nv.getInstance(),SM=e=>{nv.setEnabled(e)},kM=()=>nv.isEnabled();var TM=Q('<div class=left-section><select class=select></select><button class="button edit-btn"title="Rename watchlist"><svg width=14 height=14 viewBox="0 0 24 24"fill=currentColor><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z">'),Om=Q('<button class="button add-btn"title="Add symbol">+'),EM=Q('<div class=left-section><div class=rename-container><input type=text class=rename-input placeholder="Enter watchlist name..."maxlength=50 autofocus><button class="button save-btn"title=Save><svg width=14 height=14 viewBox="0 0 24 24"fill=currentColor><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg></button><button class="button cancel-btn"title=Cancel><svg width=14 height=14 viewBox="0 0 24 24"fill=currentColor><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z">'),MM=Q("<div class=rename-error>"),IM=Q("<div class=list>"),LM=Q("<div class=chartspire-ui-watchlist><div class=header>"),PM=Q("<option>"),AM=Q(`<div class=ticker-item><div class=ticker-info><img class=ticker-logo><span class=ticker-name></span></div><span class=ticker-price>$</span><svg version=1.1 id=Capa_1 xmlns=http://www.w3.org/2000/svg viewBox="0 0 408.483 408.483"><g><g><path d="M87.748,388.784c0.461,11.01,9.521,19.699,20.539,19.699h191.911c11.018,0,20.078-8.689,20.539-19.699l13.705-289.316\r
															H74.043L87.748,388.784z M247.655,171.329c0-4.61,3.738-8.349,8.35-8.349h13.355c4.609,0,8.35,3.738,8.35,8.349v165.293\r
															c0,4.611-3.738,8.349-8.35,8.349h-13.355c-4.61,0-8.35-3.736-8.35-8.349V171.329z M189.216,171.329\r
															c0-4.61,3.738-8.349,8.349-8.349h13.355c4.609,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.737,8.349-8.349,8.349h-13.355\r
															c-4.61,0-8.349-3.736-8.349-8.349V171.329L189.216,171.329z M130.775,171.329c0-4.61,3.738-8.349,8.349-8.349h13.356\r
															c4.61,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.738,8.349-8.349,8.349h-13.356c-4.61,0-8.349-3.736-8.349-8.349V171.329z"></path><path d="M343.567,21.043h-88.535V4.305c0-2.377-1.927-4.305-4.305-4.305h-92.971c-2.377,0-4.304,1.928-4.304,4.305v16.737H64.916\r
															c-7.125,0-12.9,5.776-12.9,12.901V74.47h304.451V33.944C356.467,26.819,350.692,21.043,343.567,21.043z">`),DM=Q("<div class=ticker-item><div class=ticker-info><img class=ticker-logo><span class=ticker-name></span></div><span class=ticker-price>$");const FM={multiplier:1,timespan:"minute",text:"1m"},RM=e=>({symbol:e.symbol,exchange:e.exchange,type:e.type}),OM=e=>{const t=new yM(e.useExternalWatchListStorage),r=`watchlist_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=Br.getInstance().getDataFeed(),i=n?_M(FM,r,n,{useHttp:e.watchListHttp,httpInterval:e.watchListHttpInterval,httpBatchSize:e.watchListHttpBatchSize,httpRetryEnabled:e.watchListHttpRetryEnabled,httpMaxRetries:e.watchListHttpMaxRetries}):null;ki(async()=>{try{const Z=await b(),pe={};for(const[fe,ve]of Object.entries(Z))pe[fe]=te(ve);_(pe);const Y=Oc.getOrderedNames(pe);Y.length>0&&(A(Y[0]),await x(Y[0],pe)),M(!0),console.log("Dynamic watchlists initialized:",Y)}catch(Z){console.error("Error during watchlist initialization:",Z)}});const[o,s]=be(!1),[u,d]=be(!1),[h,p]=be(""),[g,m]=be(""),b=async()=>{try{const Z=await t.fetchWatchlist();return Oc.initializeWatchlists(e.watchListAmount,Z)}catch(Z){return console.error("Error initializing watchlists:",Z),Oc.initializeWatchlists(e.watchListAmount,null)}},x=async(Z,pe)=>{const Y=pe[Z]||[];Y.length>0&&i&&i.subscribeToWatchlist(Z,Y)},[C,_]=be({}),[k,M]=be(!1),[L,A]=be(""),[P,$]=be(null);$r(()=>{i&&i.dataService.cleanup()});const R=Z=>{const pe=L(),Y=C()[pe];if(e.enabledSymbolTypes&&e.enabledSymbolTypes.length>0&&!(te([Z]).length>0)){console.warn(`Symbol ${Z.symbol} type '${Z.type}' is not allowed. Enabled types: ${e.enabledSymbolTypes.join(", ")}`);return}if(le(pe)){console.warn(`Watchlist ${pe} is full (limit: ${e.watchListLimit})`);return}if(ae(Z)){console.warn(`Symbol ${Z.symbol} from ${Z.exchange} already exists in ${pe}`);return}const fe=RM(Z);_(ve=>({...ve,[pe]:[...Y,fe]})),i&&i.subscribeToSymbol(Z),t.addToStorage({...C(),[pe]:[...Y,fe]})},z=(Z,pe=!1)=>{const Y=L(),fe=C()[Y].filter(ve=>!(ve.symbol===Z.symbol&&ve.exchange===Z.exchange));_(ve=>({...ve,[Y]:fe})),i&&i.unsubscribeFromSymbol(Z),t.addToStorage({...C(),[Y]:fe})},B=({draggable:Z})=>{const pe=C()[L()].find(Y=>Y.symbol===Z.id);$(pe||null)},W=({draggable:Z,droppable:pe})=>{if(Z&&pe){const Y=L(),fe=[...C()[Y]],ve=fe.findIndex(Ie=>`${Ie.symbol}_${Ie.exchange}`===Z.id),$e=fe.findIndex(Ie=>`${Ie.symbol}_${Ie.exchange}`===pe.id);if(ve!==-1&&$e!==-1&&ve!==$e){const[Ie]=fe.splice(ve,1);fe.splice($e,0,Ie),_(Oe=>({...Oe,[Y]:fe})),t.addToStorage({...C(),[Y]:fe})}}$(null)},X=Z=>{const pe=L(),Y=C()[pe]||[],fe=C()[Z]||[];i&&i.switchWatchlist(Z,fe,pe,Y),A(Z)},ee=()=>{p(L()),m(""),d(!0)},U=()=>{d(!1),p(""),m("")},q=async()=>{const Z=h().trim(),pe=L(),Y=Oc.getOrderedNames(C()).filter(ve=>ve!==pe),fe=Oc.validateWatchlistName(Z,Y);if(!fe.isValid){m(fe.error||"Invalid name");return}try{const ve=Oc.renameWatchlist(C(),pe,Z);$a(()=>{_(ve),A(Z),d(!1),p(""),m("")}),t.addToStorage(ve),console.log(`Watchlist renamed from "${pe}" to "${Z}"`)}catch(ve){console.error("Error renaming watchlist:",ve),m("Failed to rename watchlist")}},ie=Z=>{Z.key==="Enter"?q():Z.key==="Escape"&&U()},le=Z=>C()[Z].length>=e.watchListLimit;function ae(Z){const pe=L();return C()[pe].some(Y=>Y.symbol===Z.symbol&&Y.exchange===Z.exchange)}const te=Z=>!e.enabledSymbolTypes||e.enabledSymbolTypes.length===0?Z:Z.filter(pe=>{if(!pe.type)return!1;const Y=pe.type.toLowerCase();return e.enabledSymbolTypes.some(fe=>fe.toLowerCase()===Y)}),ce=Z=>{iv().requestSymbolChange(Ba(),Z)},ue=Z=>i?i.getPriceColor(Z):"#FFFFFF",j=Z=>{var pe;if(i){const Y=`${Z.symbol}_${Z.exchange}`;return(pe=i.symbolData()[Y])==null?void 0:pe.close}};return G(ze,{get when(){return k()},get children(){var Z=LM(),pe=Z.firstChild;return F(pe,G(ze,{get when(){return!u()},get children(){return[(()=>{var Y=TM(),fe=Y.firstChild,ve=fe.nextSibling;return fe.addEventListener("change",$e=>{X($e.currentTarget.value)}),F(fe,G(mn,{get each(){return Oc.getOrderedNames(C())},children:$e=>(()=>{var Ie=PM();return Ie.value=$e,F(Ie,$e),Ie})()})),ve.$$click=ee,De(()=>fe.value=L()),Y})(),(()=>{var Y=Om();return Y.$$click=()=>s(fe=>!fe),Y})()]}}),null),F(pe,G(ze,{get when(){return u()},get children(){return[(()=>{var Y=EM(),fe=Y.firstChild,ve=fe.firstChild,$e=ve.nextSibling,Ie=$e.nextSibling;return ve.$$keydown=ie,ve.$$input=Oe=>p(Oe.currentTarget.value),$e.$$click=()=>void q(),Ie.$$click=U,De(()=>ve.value=h()),Y})(),(()=>{var Y=Om();return Y.$$click=()=>s(fe=>!fe),Y})()]}}),null),F(Z,G(ze,{get when(){return Ae(()=>!!u())()&&g()},get children(){var Y=MM();return F(Y,g),Y}}),null),F(Z,G(ze,{get when(){return o()},get children(){return G($2,{get locale(){return e.locale},onSymbolSelected:Y=>{R(Y)},onClose:()=>{s(!1)},get enabledSymbolTypes(){return e.enabledSymbolTypes}})}}),null),F(Z,G(aM,{onDragStart:B,onDragEnd:W,collisionDetector:iM,get children(){return[G(lM,{}),G(pM,{get ids(){return C()[L()].map(Y=>`${Y.symbol}_${Y.exchange}`)},get children(){var Y=IM();return F(Y,()=>C()[L()].map(fe=>{const ve=vM(`${fe.symbol}_${fe.exchange}`);return(()=>{var $e=AM(),Ie=$e.firstChild,Oe=Ie.firstChild,Ce=Oe.nextSibling,Le=Ie.nextSibling;Le.firstChild;var Ve=Le.nextSibling;return $e.$$click=()=>{ce(fe)},hi(ve,$e,()=>ve),F(Ce,()=>fe.symbol),F(Le,()=>j(fe)||"Loading...",null),Ve.$$click=je=>{je.stopPropagation(),z(fe,!1)},De(je=>{var qe=fe.logo?fe.logo:void 0,ht=ue(fe);return qe!==je.e&&We(Oe,"src",je.e=qe),ht!==je.t&&((je.t=ht)!=null?Le.style.setProperty("color",ht):Le.style.removeProperty("color")),je},{e:void 0,t:void 0}),$e})()})),Y}}),G(dM,{get children(){return Ae(()=>!!P())()?(()=>{var Y=DM(),fe=Y.firstChild,ve=fe.firstChild,$e=ve.nextSibling,Ie=fe.nextSibling;return Ie.firstChild,F($e,()=>{var Oe;return(Oe=P())==null?void 0:Oe.symbol}),F(Ie,()=>j(P())||"Loading...",null),De(Oe=>{var Ce,Le,Ve=(Ce=P())!=null&&Ce.logo?(Le=P())==null?void 0:Le.logo:void 0,je=ue(P());return Ve!==Oe.e&&We(ve,"src",Oe.e=Ve),je!==Oe.t&&((Oe.t=je)!=null?Ie.style.setProperty("color",je):Ie.style.removeProperty("color")),Oe},{e:void 0,t:void 0}),Y})():null}})]}}),null),Z}})};jt(["click","input","keydown"]);const{min:NM,max:zM}=Math,Uc=(e,t=0,r=1)=>NM(zM(t,e),r),ov=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=Uc(e[t],0,255)):t===3&&(e[t]=Uc(e[t],0,1));return e},U2={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])U2[`[object ${e}]`]=e.toLowerCase();function $t(e){return U2[Object.prototype.toString.call(e)]||"object"}const At=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):$t(e[0])=="object"&&t?t.split("").filter(r=>e[0][r]!==void 0).map(r=>e[0][r]):e[0].slice(0),Hd=e=>{if(e.length<2)return null;const t=e.length-1;return $t(e[t])=="string"?e[t].toLowerCase():null},{PI:Gp,min:H2,max:Y2}=Math,Do=e=>Math.round(e*100)/100,Ng=e=>Math.round(e*100)/100,Ls=Gp*2,ag=Gp/3,BM=Gp/180,$M=180/Gp;function X2(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const Mt={format:{},autodetect:[]};class Be{constructor(...t){const r=this;if($t(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let n=Hd(t),i=!1;if(!n){i=!0,Mt.sorted||(Mt.autodetect=Mt.autodetect.sort((o,s)=>s.p-o.p),Mt.sorted=!0);for(let o of Mt.autodetect)if(n=o.test(...t),n)break}if(Mt.format[n]){const o=Mt.format[n].apply(null,i?t:t.slice(0,-1));r._rgb=ov(o)}else throw new Error("unknown format: "+t);r._rgb.length===3&&r._rgb.push(1)}toString(){return $t(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const VM="3.1.2",Ut=(...e)=>new Be(...e);Ut.version=VM;const $d={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},WM=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,UM=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,j2=e=>{if(e.match(WM)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16),r=t>>16,n=t>>8&255,i=t&255;return[r,n,i,1]}if(e.match(UM)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16),r=t>>24&255,n=t>>16&255,i=t>>8&255,o=Math.round((t&255)/255*100)/100;return[r,n,i,o]}throw new Error(`unknown hex color: ${e}`)},{round:np}=Math,Z2=(...e)=>{let[t,r,n,i]=At(e,"rgba"),o=Hd(e)||"auto";i===void 0&&(i=1),o==="auto"&&(o=i<1?"rgba":"rgb"),t=np(t),r=np(r),n=np(n);let s="000000"+(t<<16|r<<8|n).toString(16);s=s.substr(s.length-6);let u="0"+np(i*255).toString(16);switch(u=u.substr(u.length-2),o.toLowerCase()){case"rgba":return`#${s}${u}`;case"argb":return`#${u}${s}`;default:return`#${s}`}};Be.prototype.name=function(){const e=Z2(this._rgb,"rgb");for(let t of Object.keys($d))if($d[t]===e)return t.toLowerCase();return e};Mt.format.named=e=>{if(e=e.toLowerCase(),$d[e])return j2($d[e]);throw new Error("unknown color name: "+e)};Mt.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&$t(e)==="string"&&$d[e.toLowerCase()])return"named"}});Be.prototype.alpha=function(e,t=!1){return e!==void 0&&$t(e)==="number"?t?(this._rgb[3]=e,this):new Be([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};Be.prototype.clipped=function(){return this._rgb._clipped||!1};const Ua={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},HM=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Ds(e){const t=HM.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);Ua.labWhitePoint=e,Ua.Xn=t[0],Ua.Zn=t[1]}function R0(){return Ua.labWhitePoint}const av=(...e)=>{e=At(e,"lab");const[t,r,n]=e,[i,o,s]=YM(t,r,n),[u,d,h]=G2(i,o,s);return[u,d,h,e.length>3?e[3]:1]},YM=(e,t,r)=>{const{kE:n,kK:i,kKE:o,Xn:s,Yn:u,Zn:d}=Ua,h=(e+16)/116,p=.002*t+h,g=h-.005*r,m=p*p*p,b=g*g*g,x=m>n?m:(116*p-16)/i,C=e>o?Math.pow((e+16)/116,3):e/i,_=b>n?b:(116*g-16)/i,k=x*s,M=C*u,L=_*d;return[k,M,L]},sg=e=>{const t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},G2=(e,t,r)=>{const{MtxAdaptMa:n,MtxAdaptMaI:i,MtxXYZ2RGB:o,RefWhiteRGB:s,Xn:u,Yn:d,Zn:h}=Ua,p=u*n.m00+d*n.m10+h*n.m20,g=u*n.m01+d*n.m11+h*n.m21,m=u*n.m02+d*n.m12+h*n.m22,b=s.X*n.m00+s.Y*n.m10+s.Z*n.m20,x=s.X*n.m01+s.Y*n.m11+s.Z*n.m21,C=s.X*n.m02+s.Y*n.m12+s.Z*n.m22,_=(e*n.m00+t*n.m10+r*n.m20)*(b/p),k=(e*n.m01+t*n.m11+r*n.m21)*(x/g),M=(e*n.m02+t*n.m12+r*n.m22)*(C/m),L=_*i.m00+k*i.m10+M*i.m20,A=_*i.m01+k*i.m11+M*i.m21,P=_*i.m02+k*i.m12+M*i.m22,$=sg(L*o.m00+A*o.m10+P*o.m20),R=sg(L*o.m01+A*o.m11+P*o.m21),z=sg(L*o.m02+A*o.m12+P*o.m22);return[$*255,R*255,z*255]},sv=(...e)=>{const[t,r,n,...i]=At(e,"rgb"),[o,s,u]=Q2(t,r,n),[d,h,p]=XM(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]};function XM(e,t,r){const{Xn:n,Yn:i,Zn:o,kE:s,kK:u}=Ua,d=e/n,h=t/i,p=r/o,g=d>s?Math.pow(d,1/3):(u*d+16)/116,m=h>s?Math.pow(h,1/3):(u*h+16)/116,b=p>s?Math.pow(p,1/3):(u*p+16)/116;return[116*m-16,500*(g-m),200*(m-b)]}function lg(e){const t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const Q2=(e,t,r)=>{e=lg(e/255),t=lg(t/255),r=lg(r/255);const{MtxRGB2XYZ:n,MtxAdaptMa:i,MtxAdaptMaI:o,Xn:s,Yn:u,Zn:d,As:h,Bs:p,Cs:g}=Ua;let m=e*n.m00+t*n.m10+r*n.m20,b=e*n.m01+t*n.m11+r*n.m21,x=e*n.m02+t*n.m12+r*n.m22;const C=s*i.m00+u*i.m10+d*i.m20,_=s*i.m01+u*i.m11+d*i.m21,k=s*i.m02+u*i.m12+d*i.m22;let M=m*i.m00+b*i.m10+x*i.m20,L=m*i.m01+b*i.m11+x*i.m21,A=m*i.m02+b*i.m12+x*i.m22;return M*=C/h,L*=_/p,A*=k/g,m=M*o.m00+L*o.m10+A*o.m20,b=M*o.m01+L*o.m11+A*o.m21,x=M*o.m02+L*o.m12+A*o.m22,[m,b,x]};Be.prototype.lab=function(){return sv(this._rgb)};const jM=(...e)=>new Be(...e,"lab");Object.assign(Ut,{lab:jM,getLabWhitePoint:R0,setLabWhitePoint:Ds});Mt.format.lab=av;Mt.autodetect.push({p:2,test:(...e)=>{if(e=At(e,"lab"),$t(e)==="array"&&e.length===3)return"lab"}});Be.prototype.darken=function(e=1){const t=this,r=t.lab();return r[0]-=Ua.Kn*e,new Be(r,"lab").alpha(t.alpha(),!0)};Be.prototype.brighten=function(e=1){return this.darken(-e)};Be.prototype.darker=Be.prototype.darken;Be.prototype.brighter=Be.prototype.brighten;Be.prototype.get=function(e){const[t,r]=e.split("."),n=this[t]();if(r){const i=t.indexOf(r)-(t.substr(0,2)==="ok"?2:0);if(i>-1)return n[i];throw new Error(`unknown channel ${r} in mode ${t}`)}else return n};const{pow:ZM}=Math,GM=1e-7,QM=20;Be.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&$t(e)==="number"){if(e===0)return new Be([0,0,0,this._rgb[3]],"rgb");if(e===1)return new Be([255,255,255,this._rgb[3]],"rgb");let r=this.luminance(),n=QM;const i=(s,u)=>{const d=s.interpolate(u,.5,t),h=d.luminance();return Math.abs(e-h)<GM||!n--?d:h>e?i(s,d):i(d,u)},o=(r>e?i(new Be([0,0,0]),this):i(this,new Be([255,255,255]))).rgb();return new Be([...o,this._rgb[3]])}return KM(...this._rgb.slice(0,3))};const KM=(e,t,r)=>(e=cg(e),t=cg(t),r=cg(r),.2126*e+.7152*t+.0722*r),cg=e=>(e/=255,e<=.03928?e/12.92:ZM((e+.055)/1.055,2.4)),ui={},Vd=(e,t,r=.5,...n)=>{let i=n[0]||"lrgb";if(!ui[i]&&!n.length&&(i=Object.keys(ui)[0]),!ui[i])throw new Error(`interpolation mode ${i} is not defined`);return $t(e)!=="object"&&(e=new Be(e)),$t(t)!=="object"&&(t=new Be(t)),ui[i](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))};Be.prototype.mix=Be.prototype.interpolate=function(e,t=.5,...r){return Vd(this,e,t,...r)};Be.prototype.premultiply=function(e=!1){const t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new Be([t[0]*r,t[1]*r,t[2]*r,r],"rgb")};const{sin:qM,cos:JM}=Math,K2=(...e)=>{let[t,r,n]=At(e,"lch");return isNaN(n)&&(n=0),n=n*BM,[t,JM(n)*r,qM(n)*r]},lv=(...e)=>{e=At(e,"lch");const[t,r,n]=e,[i,o,s]=K2(t,r,n),[u,d,h]=av(i,o,s);return[u,d,h,e.length>3?e[3]:1]},eI=(...e)=>{const t=X2(At(e,"hcl"));return lv(...t)},{sqrt:tI,atan2:rI,round:nI}=Math,q2=(...e)=>{const[t,r,n]=At(e,"lab"),i=tI(r*r+n*n);let o=(rI(n,r)*$M+360)%360;return nI(i*1e4)===0&&(o=Number.NaN),[t,i,o]},cv=(...e)=>{const[t,r,n,...i]=At(e,"rgb"),[o,s,u]=sv(t,r,n),[d,h,p]=q2(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]};Be.prototype.lch=function(){return cv(this._rgb)};Be.prototype.hcl=function(){return X2(cv(this._rgb))};const iI=(...e)=>new Be(...e,"lch"),oI=(...e)=>new Be(...e,"hcl");Object.assign(Ut,{lch:iI,hcl:oI});Mt.format.lch=lv;Mt.format.hcl=eI;["lch","hcl"].forEach(e=>Mt.autodetect.push({p:2,test:(...t)=>{if(t=At(t,e),$t(t)==="array"&&t.length===3)return e}}));Be.prototype.saturate=function(e=1){const t=this,r=t.lch();return r[1]+=Ua.Kn*e,r[1]<0&&(r[1]=0),new Be(r,"lch").alpha(t.alpha(),!0)};Be.prototype.desaturate=function(e=1){return this.saturate(-e)};Be.prototype.set=function(e,t,r=!1){const[n,i]=e.split("."),o=this[n]();if(i){const s=n.indexOf(i)-(n.substr(0,2)==="ok"?2:0);if(s>-1){if($t(t)=="string")switch(t.charAt(0)){case"+":o[s]+=+t;break;case"-":o[s]+=+t;break;case"*":o[s]*=+t.substr(1);break;case"/":o[s]/=+t.substr(1);break;default:o[s]=+t}else if($t(t)==="number")o[s]=t;else throw new Error("unsupported value for Color.set");const u=new Be(o,n);return r?(this._rgb=u._rgb,this):u}throw new Error(`unknown channel ${i} in mode ${n}`)}else return o};Be.prototype.tint=function(e=.5,...t){return Vd(this,"white",e,...t)};Be.prototype.shade=function(e=.5,...t){return Vd(this,"black",e,...t)};const aI=(e,t,r)=>{const n=e._rgb,i=t._rgb;return new Be(n[0]+r*(i[0]-n[0]),n[1]+r*(i[1]-n[1]),n[2]+r*(i[2]-n[2]),"rgb")};ui.rgb=aI;const{sqrt:ug,pow:xd}=Math,sI=(e,t,r)=>{const[n,i,o]=e._rgb,[s,u,d]=t._rgb;return new Be(ug(xd(n,2)*(1-r)+xd(s,2)*r),ug(xd(i,2)*(1-r)+xd(u,2)*r),ug(xd(o,2)*(1-r)+xd(d,2)*r),"rgb")};ui.lrgb=sI;const lI=(e,t,r)=>{const n=e.lab(),i=t.lab();return new Be(n[0]+r*(i[0]-n[0]),n[1]+r*(i[1]-n[1]),n[2]+r*(i[2]-n[2]),"lab")};ui.lab=lI;const Yd=(e,t,r,n)=>{let i,o;n==="hsl"?(i=e.hsl(),o=t.hsl()):n==="hsv"?(i=e.hsv(),o=t.hsv()):n==="hcg"?(i=e.hcg(),o=t.hcg()):n==="hsi"?(i=e.hsi(),o=t.hsi()):n==="lch"||n==="hcl"?(n="hcl",i=e.hcl(),o=t.hcl()):n==="oklch"&&(i=e.oklch().reverse(),o=t.oklch().reverse());let s,u,d,h,p,g;(n.substr(0,1)==="h"||n==="oklch")&&([s,d,p]=i,[u,h,g]=o);let m,b,x,C;return!isNaN(s)&&!isNaN(u)?(u>s&&u-s>180?C=u-(s+360):u<s&&s-u>180?C=u+360-s:C=u-s,b=s+r*C):isNaN(s)?isNaN(u)?b=Number.NaN:(b=u,(p==1||p==0)&&n!="hsv"&&(m=h)):(b=s,(g==1||g==0)&&n!="hsv"&&(m=d)),m===void 0&&(m=d+r*(h-d)),x=p+r*(g-p),n==="oklch"?new Be([x,m,b],n):new Be([b,m,x],n)},J2=(e,t,r)=>Yd(e,t,r,"lch");ui.lch=J2;ui.hcl=J2;const cI=e=>{if($t(e)=="number"&&e>=0&&e<=16777215){const t=e>>16,r=e>>8&255,n=e&255;return[t,r,n,1]}throw new Error("unknown num color: "+e)},uI=(...e)=>{const[t,r,n]=At(e,"rgb");return(t<<16)+(r<<8)+n};Be.prototype.num=function(){return uI(this._rgb)};const dI=(...e)=>new Be(...e,"num");Object.assign(Ut,{num:dI});Mt.format.num=cI;Mt.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&$t(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});const hI=(e,t,r)=>{const n=e.num(),i=t.num();return new Be(n+r*(i-n),"num")};ui.num=hI;const{floor:pI}=Math,fI=(...e)=>{e=At(e,"hcg");let[t,r,n]=e,i,o,s;n=n*255;const u=r*255;if(r===0)i=o=s=n;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const d=pI(t),h=t-d,p=n*(1-r),g=p+u*(1-h),m=p+u*h,b=p+u;switch(d){case 0:[i,o,s]=[b,m,p];break;case 1:[i,o,s]=[g,b,p];break;case 2:[i,o,s]=[p,b,m];break;case 3:[i,o,s]=[p,g,b];break;case 4:[i,o,s]=[m,p,b];break;case 5:[i,o,s]=[b,p,g];break}}return[i,o,s,e.length>3?e[3]:1]},gI=(...e)=>{const[t,r,n]=At(e,"rgb"),i=H2(t,r,n),o=Y2(t,r,n),s=o-i,u=s*100/255,d=i/(255-s)*100;let h;return s===0?h=Number.NaN:(t===o&&(h=(r-n)/s),r===o&&(h=2+(n-t)/s),n===o&&(h=4+(t-r)/s),h*=60,h<0&&(h+=360)),[h,u,d]};Be.prototype.hcg=function(){return gI(this._rgb)};const vI=(...e)=>new Be(...e,"hcg");Ut.hcg=vI;Mt.format.hcg=fI;Mt.autodetect.push({p:1,test:(...e)=>{if(e=At(e,"hcg"),$t(e)==="array"&&e.length===3)return"hcg"}});const mI=(e,t,r)=>Yd(e,t,r,"hcg");ui.hcg=mI;const{cos:wd}=Math,yI=(...e)=>{e=At(e,"hsi");let[t,r,n]=e,i,o,s;return isNaN(t)&&(t=0),isNaN(r)&&(r=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(s=(1-r)/3,i=(1+r*wd(Ls*t)/wd(ag-Ls*t))/3,o=1-(s+i)):t<2/3?(t-=1/3,i=(1-r)/3,o=(1+r*wd(Ls*t)/wd(ag-Ls*t))/3,s=1-(i+o)):(t-=2/3,o=(1-r)/3,s=(1+r*wd(Ls*t)/wd(ag-Ls*t))/3,i=1-(o+s)),i=Uc(n*i*3),o=Uc(n*o*3),s=Uc(n*s*3),[i*255,o*255,s*255,e.length>3?e[3]:1]},{min:bI,sqrt:xI,acos:wI}=Math,CI=(...e)=>{let[t,r,n]=At(e,"rgb");t/=255,r/=255,n/=255;let i;const o=bI(t,r,n),s=(t+r+n)/3,u=s>0?1-o/s:0;return u===0?i=NaN:(i=(t-r+(t-n))/2,i/=xI((t-r)*(t-r)+(t-n)*(r-n)),i=wI(i),n>r&&(i=Ls-i),i/=Ls),[i*360,u,s]};Be.prototype.hsi=function(){return CI(this._rgb)};const _I=(...e)=>new Be(...e,"hsi");Ut.hsi=_I;Mt.format.hsi=yI;Mt.autodetect.push({p:2,test:(...e)=>{if(e=At(e,"hsi"),$t(e)==="array"&&e.length===3)return"hsi"}});const SI=(e,t,r)=>Yd(e,t,r,"hsi");ui.hsi=SI;const zg=(...e)=>{e=At(e,"hsl");const[t,r,n]=e;let i,o,s;if(r===0)i=o=s=n*255;else{const u=[0,0,0],d=[0,0,0],h=n<.5?n*(1+r):n+r-n*r,p=2*n-h,g=t/360;u[0]=g+1/3,u[1]=g,u[2]=g-1/3;for(let m=0;m<3;m++)u[m]<0&&(u[m]+=1),u[m]>1&&(u[m]-=1),6*u[m]<1?d[m]=p+(h-p)*6*u[m]:2*u[m]<1?d[m]=h:3*u[m]<2?d[m]=p+(h-p)*(2/3-u[m])*6:d[m]=p;[i,o,s]=[d[0]*255,d[1]*255,d[2]*255]}return e.length>3?[i,o,s,e[3]]:[i,o,s,1]},e5=(...e)=>{e=At(e,"rgba");let[t,r,n]=e;t/=255,r/=255,n/=255;const i=H2(t,r,n),o=Y2(t,r,n),s=(o+i)/2;let u,d;return o===i?(u=0,d=Number.NaN):u=s<.5?(o-i)/(o+i):(o-i)/(2-o-i),t==o?d=(r-n)/(o-i):r==o?d=2+(n-t)/(o-i):n==o&&(d=4+(t-r)/(o-i)),d*=60,d<0&&(d+=360),e.length>3&&e[3]!==void 0?[d,u,s,e[3]]:[d,u,s]};Be.prototype.hsl=function(){return e5(this._rgb)};const kI=(...e)=>new Be(...e,"hsl");Ut.hsl=kI;Mt.format.hsl=zg;Mt.autodetect.push({p:2,test:(...e)=>{if(e=At(e,"hsl"),$t(e)==="array"&&e.length===3)return"hsl"}});const TI=(e,t,r)=>Yd(e,t,r,"hsl");ui.hsl=TI;const{floor:EI}=Math,MI=(...e)=>{e=At(e,"hsv");let[t,r,n]=e,i,o,s;if(n*=255,r===0)i=o=s=n;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const u=EI(t),d=t-u,h=n*(1-r),p=n*(1-r*d),g=n*(1-r*(1-d));switch(u){case 0:[i,o,s]=[n,g,h];break;case 1:[i,o,s]=[p,n,h];break;case 2:[i,o,s]=[h,n,g];break;case 3:[i,o,s]=[h,p,n];break;case 4:[i,o,s]=[g,h,n];break;case 5:[i,o,s]=[n,h,p];break}}return[i,o,s,e.length>3?e[3]:1]},{min:II,max:LI}=Math,PI=(...e)=>{e=At(e,"rgb");let[t,r,n]=e;const i=II(t,r,n),o=LI(t,r,n),s=o-i;let u,d,h;return h=o/255,o===0?(u=Number.NaN,d=0):(d=s/o,t===o&&(u=(r-n)/s),r===o&&(u=2+(n-t)/s),n===o&&(u=4+(t-r)/s),u*=60,u<0&&(u+=360)),[u,d,h]};Be.prototype.hsv=function(){return PI(this._rgb)};const AI=(...e)=>new Be(...e,"hsv");Ut.hsv=AI;Mt.format.hsv=MI;Mt.autodetect.push({p:2,test:(...e)=>{if(e=At(e,"hsv"),$t(e)==="array"&&e.length===3)return"hsv"}});const DI=(e,t,r)=>Yd(e,t,r,"hsv");ui.hsv=DI;function Rp(e,t){let r=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(s=>[s]));let n=t[0].length,i=t[0].map((s,u)=>t.map(d=>d[u])),o=e.map(s=>i.map(u=>Array.isArray(s)?s.reduce((d,h,p)=>d+h*(u[p]||0),0):u.reduce((d,h)=>d+h*s,0)));return r===1&&(o=o[0]),n===1?o.map(s=>s[0]):o}const uv=(...e)=>{e=At(e,"lab");const[t,r,n,...i]=e,[o,s,u]=FI([t,r,n]),[d,h,p]=G2(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]};function FI(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],r=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],n=Rp(r,e);return Rp(t,n.map(i=>i**3))}const dv=(...e)=>{const[t,r,n,...i]=At(e,"rgb"),o=Q2(t,r,n);return[...RI(o),...i.length>0&&i[0]<1?[i[0]]:[]]};function RI(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],r=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],n=Rp(t,e);return Rp(r,n.map(i=>Math.cbrt(i)))}Be.prototype.oklab=function(){return dv(this._rgb)};const OI=(...e)=>new Be(...e,"oklab");Object.assign(Ut,{oklab:OI});Mt.format.oklab=uv;Mt.autodetect.push({p:2,test:(...e)=>{if(e=At(e,"oklab"),$t(e)==="array"&&e.length===3)return"oklab"}});const NI=(e,t,r)=>{const n=e.oklab(),i=t.oklab();return new Be(n[0]+r*(i[0]-n[0]),n[1]+r*(i[1]-n[1]),n[2]+r*(i[2]-n[2]),"oklab")};ui.oklab=NI;const zI=(e,t,r)=>Yd(e,t,r,"oklch");ui.oklch=zI;const{pow:dg,sqrt:hg,PI:pg,cos:Nm,sin:zm,atan2:BI}=Math,$I=(e,t="lrgb",r=null)=>{const n=e.length;r||(r=Array.from(new Array(n)).map(()=>1));const i=n/r.reduce(function(g,m){return g+m});if(r.forEach((g,m)=>{r[m]*=i}),e=e.map(g=>new Be(g)),t==="lrgb")return VI(e,r);const o=e.shift(),s=o.get(t),u=[];let d=0,h=0;for(let g=0;g<s.length;g++)if(s[g]=(s[g]||0)*r[0],u.push(isNaN(s[g])?0:r[0]),t.charAt(g)==="h"&&!isNaN(s[g])){const m=s[g]/180*pg;d+=Nm(m)*r[0],h+=zm(m)*r[0]}let p=o.alpha()*r[0];e.forEach((g,m)=>{const b=g.get(t);p+=g.alpha()*r[m+1];for(let x=0;x<s.length;x++)if(!isNaN(b[x]))if(u[x]+=r[m+1],t.charAt(x)==="h"){const C=b[x]/180*pg;d+=Nm(C)*r[m+1],h+=zm(C)*r[m+1]}else s[x]+=b[x]*r[m+1]});for(let g=0;g<s.length;g++)if(t.charAt(g)==="h"){let m=BI(h/u[g],d/u[g])/pg*180;for(;m<0;)m+=360;for(;m>=360;)m-=360;s[g]=m}else s[g]=s[g]/u[g];return p/=n,new Be(s,t).alpha(p>.99999?1:p,!0)},VI=(e,t)=>{const r=e.length,n=[0,0,0,0];for(let i=0;i<e.length;i++){const o=e[i],s=t[i]/r,u=o._rgb;n[0]+=dg(u[0],2)*s,n[1]+=dg(u[1],2)*s,n[2]+=dg(u[2],2)*s,n[3]+=u[3]*s}return n[0]=hg(n[0]),n[1]=hg(n[1]),n[2]=hg(n[2]),n[3]>.9999999&&(n[3]=1),new Be(ov(n))},{pow:WI}=Math;function Op(e){let t="rgb",r=Ut("#ccc"),n=0,i=[0,1],o=[],s=[0,0],u=!1,d=[],h=!1,p=0,g=1,m=!1,b={},x=!0,C=1;const _=function(R){if(R=R||["#fff","#000"],R&&$t(R)==="string"&&Ut.brewer&&Ut.brewer[R.toLowerCase()]&&(R=Ut.brewer[R.toLowerCase()]),$t(R)==="array"){R.length===1&&(R=[R[0],R[0]]),R=R.slice(0);for(let z=0;z<R.length;z++)R[z]=Ut(R[z]);o.length=0;for(let z=0;z<R.length;z++)o.push(z/(R.length-1))}return P(),d=R},k=function(R){if(u!=null){const z=u.length-1;let B=0;for(;B<z&&R>=u[B];)B++;return B-1}return 0};let M=R=>R,L=R=>R;const A=function(R,z){let B,W;if(z==null&&(z=!1),isNaN(R)||R===null)return r;z?W=R:u&&u.length>2?W=k(R)/(u.length-2):g!==p?W=(R-p)/(g-p):W=1,W=L(W),z||(W=M(W)),C!==1&&(W=WI(W,C)),W=s[0]+W*(1-s[0]-s[1]),W=Uc(W,0,1);const X=Math.floor(W*1e4);if(x&&b[X])B=b[X];else{if($t(d)==="array")for(let ee=0;ee<o.length;ee++){const U=o[ee];if(W<=U){B=d[ee];break}if(W>=U&&ee===o.length-1){B=d[ee];break}if(W>U&&W<o[ee+1]){W=(W-U)/(o[ee+1]-U),B=Ut.interpolate(d[ee],d[ee+1],W,t);break}}else $t(d)==="function"&&(B=d(W));x&&(b[X]=B)}return B};var P=()=>b={};_(e);const $=function(R){const z=Ut(A(R));return h&&z[h]?z[h]():z};return $.classes=function(R){if(R!=null){if($t(R)==="array")u=R,i=[R[0],R[R.length-1]];else{const z=Ut.analyze(i);R===0?u=[z.min,z.max]:u=Ut.limits(z,"e",R)}return $}return u},$.domain=function(R){if(!arguments.length)return i;p=R[0],g=R[R.length-1],o=[];const z=d.length;if(R.length===z&&p!==g)for(let B of Array.from(R))o.push((B-p)/(g-p));else{for(let B=0;B<z;B++)o.push(B/(z-1));if(R.length>2){const B=R.map((X,ee)=>ee/(R.length-1)),W=R.map(X=>(X-p)/(g-p));W.every((X,ee)=>B[ee]===X)||(L=X=>{if(X<=0||X>=1)return X;let ee=0;for(;X>=W[ee+1];)ee++;const U=(X-W[ee])/(W[ee+1]-W[ee]);return B[ee]+U*(B[ee+1]-B[ee])})}}return i=[p,g],$},$.mode=function(R){return arguments.length?(t=R,P(),$):t},$.range=function(R,z){return _(R),$},$.out=function(R){return h=R,$},$.spread=function(R){return arguments.length?(n=R,$):n},$.correctLightness=function(R){return R==null&&(R=!0),m=R,P(),m?M=function(z){const B=A(0,!0).lab()[0],W=A(1,!0).lab()[0],X=B>W;let ee=A(z,!0).lab()[0];const U=B+(W-B)*z;let q=ee-U,ie=0,le=1,ae=20;for(;Math.abs(q)>.01&&ae-- >0;)(function(){return X&&(q*=-1),q<0?(ie=z,z+=(le-z)*.5):(le=z,z+=(ie-z)*.5),ee=A(z,!0).lab()[0],q=ee-U})();return z}:M=z=>z,$},$.padding=function(R){return R!=null?($t(R)==="number"&&(R=[R,R]),s=R,$):s},$.colors=function(R,z){arguments.length<2&&(z="hex");let B=[];if(arguments.length===0)B=d.slice(0);else if(R===1)B=[$(.5)];else if(R>1){const W=i[0],X=i[1]-W;B=UI(0,R).map(ee=>$(W+ee/(R-1)*X))}else{e=[];let W=[];if(u&&u.length>2)for(let X=1,ee=u.length,U=1<=ee;U?X<ee:X>ee;U?X++:X--)W.push((u[X-1]+u[X])*.5);else W=i;B=W.map(X=>$(X))}return Ut[z]&&(B=B.map(W=>W[z]())),B},$.cache=function(R){return R!=null?(x=R,$):x},$.gamma=function(R){return R!=null?(C=R,$):C},$.nodata=function(R){return R!=null?(r=Ut(R),$):r},$}function UI(e,t,r){let n=[],i=e<t,o=t;for(let s=e;i?s<o:s>o;i?s++:s--)n.push(s);return n}const HI=function(e){let t=[1,1];for(let r=1;r<e;r++){let n=[1];for(let i=1;i<=t.length;i++)n[i]=(t[i]||0)+t[i-1];t=n}return t},YI=function(e){let t,r,n,i;if(e=e.map(o=>new Be(o)),e.length===2)[r,n]=e.map(o=>o.lab()),t=function(o){const s=[0,1,2].map(u=>r[u]+o*(n[u]-r[u]));return new Be(s,"lab")};else if(e.length===3)[r,n,i]=e.map(o=>o.lab()),t=function(o){const s=[0,1,2].map(u=>(1-o)*(1-o)*r[u]+2*(1-o)*o*n[u]+o*o*i[u]);return new Be(s,"lab")};else if(e.length===4){let o;[r,n,i,o]=e.map(s=>s.lab()),t=function(s){const u=[0,1,2].map(d=>(1-s)*(1-s)*(1-s)*r[d]+3*(1-s)*(1-s)*s*n[d]+3*(1-s)*s*s*i[d]+s*s*s*o[d]);return new Be(u,"lab")}}else if(e.length>=5){let o,s,u;o=e.map(d=>d.lab()),u=e.length-1,s=HI(u),t=function(d){const h=1-d,p=[0,1,2].map(g=>o.reduce((m,b,x)=>m+s[x]*h**(u-x)*d**x*b[g],0));return new Be(p,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},XI=e=>{const t=YI(e);return t.scale=()=>Op(t),t},{round:t5}=Math;Be.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(t5)};Be.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,r)=>r<3?e===!1?t:t5(t):t)};const jI=(...e)=>new Be(...e,"rgb");Object.assign(Ut,{rgb:jI});Mt.format.rgb=(...e)=>{const t=At(e,"rgba");return t[3]===void 0&&(t[3]=1),t};Mt.autodetect.push({p:3,test:(...e)=>{if(e=At(e,"rgba"),$t(e)==="array"&&(e.length===3||e.length===4&&$t(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});const la=(e,t,r)=>{if(!la[r])throw new Error("unknown blend mode "+r);return la[r](e,t)},Ol=e=>(t,r)=>{const n=Ut(r).rgb(),i=Ut(t).rgb();return Ut.rgb(e(n,i))},Nl=e=>(t,r)=>{const n=[];return n[0]=e(t[0],r[0]),n[1]=e(t[1],r[1]),n[2]=e(t[2],r[2]),n},ZI=e=>e,GI=(e,t)=>e*t/255,QI=(e,t)=>e>t?t:e,KI=(e,t)=>e>t?e:t,qI=(e,t)=>255*(1-(1-e/255)*(1-t/255)),JI=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),eL=(e,t)=>255*(1-(1-t/255)/(e/255)),tL=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);la.normal=Ol(Nl(ZI));la.multiply=Ol(Nl(GI));la.screen=Ol(Nl(qI));la.overlay=Ol(Nl(JI));la.darken=Ol(Nl(QI));la.lighten=Ol(Nl(KI));la.dodge=Ol(Nl(tL));la.burn=Ol(Nl(eL));const{pow:rL,sin:nL,cos:iL}=Math;function oL(e=300,t=-1.5,r=1,n=1,i=[0,1]){let o=0,s;$t(i)==="array"?s=i[1]-i[0]:(s=0,i=[i,i]);const u=function(d){const h=Ls*((e+120)/360+t*d),p=rL(i[0]+s*d,n),g=(o!==0?r[0]+d*o:r)*p*(1-p)/2,m=iL(h),b=nL(h),x=p+g*(-.14861*m+1.78277*b),C=p+g*(-.29227*m-.90649*b),_=p+g*(1.97294*m);return Ut(ov([x*255,C*255,_*255,1]))};return u.start=function(d){return d==null?e:(e=d,u)},u.rotations=function(d){return d==null?t:(t=d,u)},u.gamma=function(d){return d==null?n:(n=d,u)},u.hue=function(d){return d==null?r:(r=d,$t(r)==="array"?(o=r[1]-r[0],o===0&&(r=r[1])):o=0,u)},u.lightness=function(d){return d==null?i:($t(d)==="array"?(i=d,s=d[1]-d[0]):(i=[d,d],s=0),u)},u.scale=()=>Ut.scale(u),u.hue(r),u}const aL="0123456789abcdef",{floor:sL,random:lL}=Math,cL=()=>{let e="#";for(let t=0;t<6;t++)e+=aL.charAt(sL(lL()*16));return new Be(e,"hex")},{log:Bm,pow:uL,floor:dL,abs:hL}=Math;function r5(e,t=null){const r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return $t(e)==="object"&&(e=Object.values(e)),e.forEach(n=>{t&&$t(n)==="object"&&(n=n[t]),n!=null&&!isNaN(n)&&(r.values.push(n),r.sum+=n,n<r.min&&(r.min=n),n>r.max&&(r.max=n),r.count+=1)}),r.domain=[r.min,r.max],r.limits=(n,i)=>n5(r,n,i),r}function n5(e,t="equal",r=7){$t(e)=="array"&&(e=r5(e));const{min:n,max:i}=e,o=e.values.sort((u,d)=>u-d);if(r===1)return[n,i];const s=[];if(t.substr(0,1)==="c"&&(s.push(n),s.push(i)),t.substr(0,1)==="e"){s.push(n);for(let u=1;u<r;u++)s.push(n+u/r*(i-n));s.push(i)}else if(t.substr(0,1)==="l"){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");const u=Math.LOG10E*Bm(n),d=Math.LOG10E*Bm(i);s.push(n);for(let h=1;h<r;h++)s.push(uL(10,u+h/r*(d-u)));s.push(i)}else if(t.substr(0,1)==="q"){s.push(n);for(let u=1;u<r;u++){const d=(o.length-1)*u/r,h=dL(d);if(h===d)s.push(o[h]);else{const p=d-h;s.push(o[h]*(1-p)+o[h+1]*p)}}s.push(i)}else if(t.substr(0,1)==="k"){let u;const d=o.length,h=new Array(d),p=new Array(r);let g=!0,m=0,b=null;b=[],b.push(n);for(let _=1;_<r;_++)b.push(n+_/r*(i-n));for(b.push(i);g;){for(let k=0;k<r;k++)p[k]=0;for(let k=0;k<d;k++){const M=o[k];let L=Number.MAX_VALUE,A;for(let P=0;P<r;P++){const $=hL(b[P]-M);$<L&&(L=$,A=P),p[A]++,h[k]=A}}const _=new Array(r);for(let k=0;k<r;k++)_[k]=null;for(let k=0;k<d;k++)u=h[k],_[u]===null?_[u]=o[k]:_[u]+=o[k];for(let k=0;k<r;k++)_[k]*=1/p[k];g=!1;for(let k=0;k<r;k++)if(_[k]!==b[k]){g=!0;break}b=_,m++,m>200&&(g=!1)}const x={};for(let _=0;_<r;_++)x[_]=[];for(let _=0;_<d;_++)u=h[_],x[u].push(o[_]);let C=[];for(let _=0;_<r;_++)C.push(x[_][0]),C.push(x[_][x[_].length-1]);C=C.sort((_,k)=>_-k),s.push(C[0]);for(let _=1;_<C.length;_+=2){const k=C[_];!isNaN(k)&&s.indexOf(k)===-1&&s.push(k)}}return s}const pL=(e,t)=>{e=new Be(e),t=new Be(t);const r=e.luminance(),n=t.luminance();return r>n?(r+.05)/(n+.05):(n+.05)/(r+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const $m=.027,fL=5e-4,gL=.1,Vm=1.14,ip=.022,Wm=1.414,vL=(e,t)=>{e=new Be(e),t=new Be(t),e.alpha()<1&&(e=Vd(t,e,e.alpha(),"rgb"));const r=Um(...e.rgb()),n=Um(...t.rgb()),i=r>=ip?r:r+Math.pow(ip-r,Wm),o=n>=ip?n:n+Math.pow(ip-n,Wm),s=Math.pow(o,.56)-Math.pow(i,.57),u=Math.pow(o,.65)-Math.pow(i,.62),d=Math.abs(o-i)<fL?0:i<o?s*Vm:u*Vm;return(Math.abs(d)<gL?0:d>0?d-$m:d+$m)*100};function Um(e,t,r){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(r/255,2.4)}const{sqrt:Es,pow:hn,min:mL,max:yL,atan2:Hm,abs:Ym,cos:op,sin:Xm,exp:bL,PI:jm}=Math;function xL(e,t,r=1,n=1,i=1){var o=function(Z){return 360*Z/(2*jm)},s=function(Z){return 2*jm*Z/360};e=new Be(e),t=new Be(t);const[u,d,h]=Array.from(e.lab()),[p,g,m]=Array.from(t.lab()),b=(u+p)/2,x=Es(hn(d,2)+hn(h,2)),C=Es(hn(g,2)+hn(m,2)),_=(x+C)/2,k=.5*(1-Es(hn(_,7)/(hn(_,7)+hn(25,7)))),M=d*(1+k),L=g*(1+k),A=Es(hn(M,2)+hn(h,2)),P=Es(hn(L,2)+hn(m,2)),$=(A+P)/2,R=o(Hm(h,M)),z=o(Hm(m,L)),B=R>=0?R:R+360,W=z>=0?z:z+360,X=Ym(B-W)>180?(B+W+360)/2:(B+W)/2,ee=1-.17*op(s(X-30))+.24*op(s(2*X))+.32*op(s(3*X+6))-.2*op(s(4*X-63));let U=W-B;U=Ym(U)<=180?U:W<=B?U+360:U-360,U=2*Es(A*P)*Xm(s(U)/2);const q=p-u,ie=P-A,le=1+.015*hn(b-50,2)/Es(20+hn(b-50,2)),ae=1+.045*$,te=1+.015*$*ee,ce=30*bL(-hn((X-275)/25,2)),ue=-(2*Es(hn($,7)/(hn($,7)+hn(25,7))))*Xm(2*s(ce)),j=Es(hn(q/(r*le),2)+hn(ie/(n*ae),2)+hn(U/(i*te),2)+ue*(ie/(n*ae))*(U/(i*te)));return yL(0,mL(100,j))}function wL(e,t,r="lab"){e=new Be(e),t=new Be(t);const n=e.get(r),i=t.get(r);let o=0;for(let s in n){const u=(n[s]||0)-(i[s]||0);o+=u*u}return Math.sqrt(o)}const CL=(...e)=>{try{return new Be(...e),!0}catch{return!1}},_L={cool(){return Op([Ut.hsl(180,1,.9),Ut.hsl(250,.7,.4)])},hot(){return Op(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Bg={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},i5=Object.keys(Bg),Zm=new Map(i5.map(e=>[e.toLowerCase(),e])),SL=typeof Proxy=="function"?new Proxy(Bg,{get(e,t){const r=t.toLowerCase();if(Zm.has(r))return e[Zm.get(r)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(i5)}}):Bg,kL=(...e)=>{e=At(e,"cmyk");const[t,r,n,i]=e,o=e.length>4?e[4]:1;return i===1?[0,0,0,o]:[t>=1?0:255*(1-t)*(1-i),r>=1?0:255*(1-r)*(1-i),n>=1?0:255*(1-n)*(1-i),o]},{max:Gm}=Math,TL=(...e)=>{let[t,r,n]=At(e,"rgb");t=t/255,r=r/255,n=n/255;const i=1-Gm(t,Gm(r,n)),o=i<1?1/(1-i):0,s=(1-t-i)*o,u=(1-r-i)*o,d=(1-n-i)*o;return[s,u,d,i]};Be.prototype.cmyk=function(){return TL(this._rgb)};const EL=(...e)=>new Be(...e,"cmyk");Object.assign(Ut,{cmyk:EL});Mt.format.cmyk=kL;Mt.autodetect.push({p:2,test:(...e)=>{if(e=At(e,"cmyk"),$t(e)==="array"&&e.length===4)return"cmyk"}});const ML=(...e)=>{const t=At(e,"hsla");let r=Hd(e)||"lsa";return t[0]=Do(t[0]||0)+"deg",t[1]=Do(t[1]*100)+"%",t[2]=Do(t[2]*100)+"%",r==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),r="hsla"):t.length=3,`${r.substr(0,3)}(${t.join(" ")})`},IL=(...e)=>{const t=At(e,"lab");let r=Hd(e)||"lab";return t[0]=Do(t[0])+"%",t[1]=Do(t[1]),t[2]=Do(t[2]),r==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},LL=(...e)=>{const t=At(e,"lch");let r=Hd(e)||"lab";return t[0]=Do(t[0])+"%",t[1]=Do(t[1]),t[2]=isNaN(t[2])?"none":Do(t[2])+"deg",r==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},PL=(...e)=>{const t=At(e,"lab");return t[0]=Do(t[0]*100)+"%",t[1]=Ng(t[1]),t[2]=Ng(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},o5=(...e)=>{const[t,r,n,...i]=At(e,"rgb"),[o,s,u]=dv(t,r,n),[d,h,p]=q2(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]},AL=(...e)=>{const t=At(e,"lch");return t[0]=Do(t[0]*100)+"%",t[1]=Ng(t[1]),t[2]=isNaN(t[2])?"none":Do(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:fg}=Math,DL=(...e)=>{const t=At(e,"rgba");let r=Hd(e)||"rgb";if(r.substr(0,3)==="hsl")return ML(e5(t),r);if(r.substr(0,3)==="lab"){const n=R0();Ds("d50");const i=IL(sv(t),r);return Ds(n),i}if(r.substr(0,3)==="lch"){const n=R0();Ds("d50");const i=LL(cv(t),r);return Ds(n),i}return r.substr(0,5)==="oklab"?PL(dv(t)):r.substr(0,5)==="oklch"?AL(o5(t)):(t[0]=fg(t[0]),t[1]=fg(t[1]),t[2]=fg(t[2]),(r==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),r="rgba"),`${r.substr(0,3)}(${t.slice(0,r==="rgb"?3:4).join(" ")})`)},a5=(...e)=>{e=At(e,"lch");const[t,r,n,...i]=e,[o,s,u]=K2(t,r,n),[d,h,p]=uv(o,s,u);return[d,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]},Rs=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,aa=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Np=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,Fo=/\s*/.source,Xd=/\s+/.source,hv=/\s*,\s*/.source,Qp=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,jd=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,s5=new RegExp("^rgba?\\("+Fo+[Rs,Rs,Rs].join(Xd)+jd+"\\)$"),l5=new RegExp("^rgb\\("+Fo+[Rs,Rs,Rs].join(hv)+Fo+"\\)$"),c5=new RegExp("^rgba\\("+Fo+[Rs,Rs,Rs,aa].join(hv)+Fo+"\\)$"),u5=new RegExp("^hsla?\\("+Fo+[Qp,Np,Np].join(Xd)+jd+"\\)$"),d5=new RegExp("^hsl?\\("+Fo+[Qp,Np,Np].join(hv)+Fo+"\\)$"),h5=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,p5=new RegExp("^lab\\("+Fo+[aa,aa,aa].join(Xd)+jd+"\\)$"),f5=new RegExp("^lch\\("+Fo+[aa,aa,Qp].join(Xd)+jd+"\\)$"),g5=new RegExp("^oklab\\("+Fo+[aa,aa,aa].join(Xd)+jd+"\\)$"),v5=new RegExp("^oklch\\("+Fo+[aa,aa,Qp].join(Xd)+jd+"\\)$"),{round:m5}=Math,Cd=e=>e.map((t,r)=>r<=2?Uc(m5(t),0,255):t),pn=(e,t=0,r=100,n=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,n?e=t+(e+1)*.5*(r-t):e=t+e*(r-t)),+e),_i=(e,t)=>e==="none"?t:e,pv=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(Mt.format.named)try{return Mt.format.named(e)}catch{}if((t=e.match(s5))||(t=e.match(l5))){let r=t.slice(1,4);for(let i=0;i<3;i++)r[i]=+pn(_i(r[i],0),0,255);r=Cd(r);const n=t[4]!==void 0?+pn(t[4],0,1):1;return r[3]=n,r}if(t=e.match(c5)){const r=t.slice(1,5);for(let n=0;n<4;n++)r[n]=+pn(r[n],0,255);return r}if((t=e.match(u5))||(t=e.match(d5))){const r=t.slice(1,4);r[0]=+_i(r[0].replace("deg",""),0),r[1]=+pn(_i(r[1],0),0,100)*.01,r[2]=+pn(_i(r[2],0),0,100)*.01;const n=Cd(zg(r)),i=t[4]!==void 0?+pn(t[4],0,1):1;return n[3]=i,n}if(t=e.match(h5)){const r=t.slice(1,4);r[1]*=.01,r[2]*=.01;const n=zg(r);for(let i=0;i<3;i++)n[i]=m5(n[i]);return n[3]=+t[4],n}if(t=e.match(p5)){const r=t.slice(1,4);r[0]=pn(_i(r[0],0),0,100),r[1]=pn(_i(r[1],0),-125,125,!0),r[2]=pn(_i(r[2],0),-125,125,!0);const n=R0();Ds("d50");const i=Cd(av(r));Ds(n);const o=t[4]!==void 0?+pn(t[4],0,1):1;return i[3]=o,i}if(t=e.match(f5)){const r=t.slice(1,4);r[0]=pn(r[0],0,100),r[1]=pn(_i(r[1],0),0,150,!1),r[2]=+_i(r[2].replace("deg",""),0);const n=R0();Ds("d50");const i=Cd(lv(r));Ds(n);const o=t[4]!==void 0?+pn(t[4],0,1):1;return i[3]=o,i}if(t=e.match(g5)){const r=t.slice(1,4);r[0]=pn(_i(r[0],0),0,1),r[1]=pn(_i(r[1],0),-.4,.4,!0),r[2]=pn(_i(r[2],0),-.4,.4,!0);const n=Cd(uv(r)),i=t[4]!==void 0?+pn(t[4],0,1):1;return n[3]=i,n}if(t=e.match(v5)){const r=t.slice(1,4);r[0]=pn(_i(r[0],0),0,1),r[1]=pn(_i(r[1],0),0,.4,!1),r[2]=+_i(r[2].replace("deg",""),0);const n=Cd(a5(r)),i=t[4]!==void 0?+pn(t[4],0,1):1;return n[3]=i,n}};pv.test=e=>s5.test(e)||u5.test(e)||p5.test(e)||f5.test(e)||g5.test(e)||v5.test(e)||l5.test(e)||c5.test(e)||d5.test(e)||h5.test(e)||e==="transparent";Be.prototype.css=function(e){return DL(this._rgb,e)};const FL=(...e)=>new Be(...e,"css");Ut.css=FL;Mt.format.css=pv;Mt.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&$t(e)==="string"&&pv.test(e))return"css"}});Mt.format.gl=(...e)=>{const t=At(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const RL=(...e)=>new Be(...e,"gl");Ut.gl=RL;Be.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};Be.prototype.hex=function(e){return Z2(this._rgb,e)};const OL=(...e)=>new Be(...e,"hex");Ut.hex=OL;Mt.format.hex=j2;Mt.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&$t(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:ap}=Math,y5=e=>{const t=e/100;let r,n,i;return t<66?(r=255,n=t<6?0:-155.25485562709179-.44596950469579133*(n=t-2)+104.49216199393888*ap(n),i=t<20?0:-254.76935184120902+.8274096064007395*(i=t-10)+115.67994401066147*ap(i)):(r=351.97690566805693+.114206453784165*(r=t-55)-40.25366309332127*ap(r),n=325.4494125711974+.07943456536662342*(n=t-50)-28.0852963507957*ap(n),i=255),[r,n,i,1]},{round:NL}=Math,zL=(...e)=>{const t=At(e,"rgb"),r=t[0],n=t[2];let i=1e3,o=4e4;const s=.4;let u;for(;o-i>s;){u=(o+i)*.5;const d=y5(u);d[2]/d[0]>=n/r?o=u:i=u}return NL(u)};Be.prototype.temp=Be.prototype.kelvin=Be.prototype.temperature=function(){return zL(this._rgb)};const gg=(...e)=>new Be(...e,"temp");Object.assign(Ut,{temp:gg,kelvin:gg,temperature:gg});Mt.format.temp=Mt.format.kelvin=Mt.format.temperature=y5;Be.prototype.oklch=function(){return o5(this._rgb)};const BL=(...e)=>new Be(...e,"oklch");Object.assign(Ut,{oklch:BL});Mt.format.oklch=a5;Mt.autodetect.push({p:2,test:(...e)=>{if(e=At(e,"oklch"),$t(e)==="array"&&e.length===3)return"oklch"}});Object.assign(Ut,{analyze:r5,average:$I,bezier:XI,blend:la,brewer:SL,Color:Be,colors:$d,contrast:pL,contrastAPCA:vL,cubehelix:oL,deltaE:xL,distance:wL,input:Mt,interpolate:Vd,limits:n5,mix:Vd,random:cL,scale:Op,scales:_L,valid:CL});const $L=[["rgb(255, 255, 255)","rgb(178, 181, 190)","rgb(149, 152, 161)","rgb(120, 123, 134)","rgb(93, 96, 107)","rgb(42, 46, 57)","rgb(0, 0, 0)"],["rgb(242, 54, 69)","rgb(252, 203, 205)","rgb(250, 161, 164)","rgb(247, 124, 128)","rgb(247, 82, 95)","rgb(178, 40, 51)","rgb(128, 25, 34)"],["rgb(255, 152, 0)","rgb(255, 224, 178)","rgb(255, 204, 128)","rgb(255, 183, 77)","rgb(255, 167, 38)","rgb(245, 124, 0)","rgb(230, 81, 0)"],["rgb(255, 235, 59)","rgb(255, 249, 196)","rgb(255, 245, 157)","rgb(255, 241, 118)","rgb(255, 238, 88)","rgb(251, 192, 45)","rgb(245, 127, 23)"],["rgb(76, 175, 80)","rgb(200, 230, 201)","rgb(165, 214, 167)","rgb(129, 199, 132)","rgb(102, 187, 106)","rgb(56, 142, 60)","rgb(27, 94, 32)"],["rgb(8, 153, 129)","rgb(172, 229, 220)","rgb(112, 204, 189)","rgb(66, 189, 168)","rgb(34, 171, 148)","rgb(5, 102, 86)","rgb(0, 51, 42)"],["rgb(0, 188, 212)","rgb(178, 235, 242)","rgb(128, 222, 234)","rgb(77, 208, 225)","rgb(38, 198, 218)","rgb(0, 151, 167)","rgb(0, 96, 100)"],["rgb(41, 98, 255)","rgb(187, 217, 251)","rgb(144, 191, 249)","rgb(91, 156, 246)","rgb(49, 121, 245)","rgb(24, 72, 204)","rgb(12, 50, 153)"],["rgb(103, 58, 183)","rgb(209, 196, 233)","rgb(179, 157, 219)","rgb(149, 117, 205)","rgb(126, 87, 194)","rgb(81, 45, 168)","rgb(49, 27, 146)"],["rgb(156, 39, 176)","rgb(225, 190, 231)","rgb(206, 147, 216)","rgb(186, 104, 200)","rgb(171, 71, 188)","rgb(123, 31, 162)","rgb(74, 20, 140)"],["rgb(233, 30, 99)","rgb(248, 187, 208)","rgb(244, 143, 177)","rgb(240, 98, 146)","rgb(236, 64, 122)","rgb(194, 24, 91)","rgb(136, 14, 79)"],["#00698b","#fb7b50"]];var VL=Q("<div class=split_line>"),WL=Q("<div class=range_div><input class=range type=range min=1 max=100><p>%"),UL=Q("<div tabindex=0><div class=selector-container><i class=arrow></i></div><div class=drop-down-container><div class=palette-content><div class=split_line></div><div class=submit><span class=cancel>Cancel</span><span>Ok"),HL=Q("<div class=each_line>"),YL=Q("<div>");const fv=e=>{const t=C=>{if(!C)return 100;try{const _=String(C);return _.includes("rgba")?Math.round(Ut(_).alpha()*100):100}catch{return 100}},[r,n]=Fl({ui:{open:!1,rangeFocused:!1,isDragging:!1},color:{opacity:t(e.value),selectedColor:e.value,finalColor:e.value}}),i=ir(()=>r.ui.rangeFocused||r.ui.isDragging),o=C=>{const _=C.currentTarget,k=C.relatedTarget;return!i()&&_&&!_.contains(k)},s=()=>{n("ui","open",!1)},u=()=>{var C;n("color",{selectedColor:e.value,finalColor:e.value,opacity:t(e.value)}),(C=e.onChange)==null||C.call(e,e.value),s()},d=(C,_)=>{try{const k=_/100;return Ut(C).alpha(k).css()}catch(k){return console.warn("Error applying opacity to color:",k),C}},h=()=>{var C;const _=d(r.color.selectedColor,r.color.opacity);n("color","finalColor",_),(e.reactiveChange??!0)&&((C=e.onChange)==null||C.call(e,_))},p=C=>{const _=parseInt(C.target.value);n("color","opacity",_),h()},g=()=>{n("ui",{rangeFocused:!0,isDragging:!0})},m=()=>{n("ui","isDragging",!1),setTimeout(()=>{n("ui","rangeFocused",!1)},100)},b=C=>{n("color","selectedColor",C),h()},x=()=>{r.ui.isDragging&&(n("ui","isDragging",!1),setTimeout(()=>{n("ui","rangeFocused",!1)},100))};return ki(()=>{document.addEventListener("mouseup",x)}),$r(()=>{document.removeEventListener("mouseup",x)}),(()=>{var C=UL(),_=C.firstChild,k=_.nextSibling,M=k.firstChild,L=M.firstChild,A=L.nextSibling,P=A.firstChild,$=P.nextSibling;return C.addEventListener("blur",R=>{o(R)&&s()}),_.$$click=R=>{R.stopPropagation(),n("ui","open",!r.ui.open)},k.$$click=R=>{R.target===R.currentTarget&&s()},M.$$click=R=>{R.stopPropagation()},F(M,()=>$L.map(R=>(()=>{var z=HL();return F(z,()=>R.map(B=>(()=>{var W=YL();return W.$$click=X=>{X.stopPropagation(),b(B)},De(X=>{var ee=`each_color ${B==r.color.selectedColor?"selected":""}`,U=`background-color: ${B}`;return ee!==X.e&&at(W,X.e=ee),X.t=Tn(W,U,X.t),X},{e:void 0,t:void 0}),W})())),z})()),L),F(M,G(ze,{get when(){return e.opacityEnabled},get children(){return[VL(),(()=>{var R=WL(),z=R.firstChild,B=z.nextSibling,W=B.firstChild;return z.addEventListener("mouseleave",m),z.$$mouseup=m,z.$$mousedown=g,z.addEventListener("blur",m),z.addEventListener("focus",g),z.$$input=p,F(B,()=>r.color.opacity,W),De(X=>Tn(z,`background: linear-gradient(to right, transparent 0%, ${r.color.selectedColor} 100%); border: 1px solid ${r.color.selectedColor}`,X)),De(()=>z.value=r.color.opacity),R})()]}}),L),P.$$click=u,$.$$click=()=>{var R;e.reactiveChange===!1&&((R=e.onChange)==null||R.call(e,r.color.finalColor)),s()},De(R=>{var z=`width: 120px; background-color: ${r.color.finalColor}; border-radius: 10px`,B=`chartspire-ui-color ${e.class??""} ${r.ui.open?"chartspire-ui-color-palette-show":""}`;return R.e=Tn(C,z,R.e),B!==R.t&&at(C,R.t=B),R},{e:void 0,t:void 0}),C})()};jt(["click","input","mousedown","mouseup"]);class b5{constructor(t){xe(this,"trackedSymbols",new Map),xe(this,"priceCallbacks",new Set),xe(this,"currentPrices",new Map),xe(this,"updateIntervals",new Map),xe(this,"config"),this.config={updateInterval:3e4,enableLogging:!0,...t},this.log(`[PriceTrackingService] Initialized with ${this.config.updateInterval}ms update interval`)}log(t,...r){this.config.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.config.enableLogging&&console.warn(t,...r)}getDataFeed(){try{return Br.getInstance().getDataFeed()}catch(t){return this.logWarn("[PriceTrackingService] Error getting data feed:",t),null}}trackSymbol(t){if(!this.getDataFeed()){this.logWarn("[PriceTrackingService] No DataFeed available, cannot track symbol:",t.symbol);return}const r=t.symbol;this.trackedSymbols.has(r)||(this.trackedSymbols.set(r,t),this.startPriceFetching(t),this.log(`[PriceTrackingService] Started tracking price for ${r} on ${t.exchange||"default"} exchange (${this.config.updateInterval}ms interval)`))}async startPriceFetching(t){const r=t.symbol;await this.fetchPrice(t);const n=setInterval(async()=>{await this.fetchPrice(t)},this.config.updateInterval);this.updateIntervals.set(r,n)}async fetchPrice(t){var r;const n=this.getDataFeed();if(!n){this.logWarn(`[PriceTrackingService] No DataFeed available for ${t.symbol} (${t.type})`);return}const i=t.symbol;try{this.logWarn(`[PriceTrackingService] Fetching price for ${i} on ${t.exchange||"default"} exchange...`);const o=await((r=n.getPrice)==null?void 0:r.call(n,t,t.type));if(o!=null){this.currentPrices.set(i,o);const s={symbol:i,price:o,timestamp:Date.now()};this.log(`[PriceTrackingService] Price update for ${i} on ${t.exchange||"default"}: $${o.toFixed(2)}`),this.priceCallbacks.forEach(u=>{try{u(s)}catch(d){console.error(`[PriceTrackingService] Error in price update callback for ${i}:`,d)}})}else this.logWarn(`[PriceTrackingService] No price data received for ${i} on ${t.exchange||"default"}`)}catch(o){console.error(`[PriceTrackingService] Error fetching price for ${i} on ${t.exchange||"default"}:`,o)}}untrackSymbol(t){if(!this.trackedSymbols.get(t))return;const r=this.updateIntervals.get(t);r&&(clearInterval(r),this.updateIntervals.delete(t)),this.trackedSymbols.delete(t),this.currentPrices.delete(t),this.log(`[PriceTrackingService] Stopped tracking price for ${t}`)}getCurrentPrice(t){return this.currentPrices.get(t)??null}getTrackedSymbols(){return Array.from(this.trackedSymbols.keys())}addPriceCallback(t){this.priceCallbacks.add(t)}removePriceCallback(t){this.priceCallbacks.delete(t)}updateTrackedSymbols(t,r){const n=new Set(this.trackedSymbols.keys()),i=new Set(t);for(const o of n)i.has(o)||this.untrackSymbol(o);for(const o of t)if(!n.has(o)){const s=r(o);s&&this.trackSymbol(s)}}cleanup(){for(const[t,r]of this.updateIntervals)clearInterval(r),this.log(`[PriceTrackingService] Cleared interval for ${t}`);this.updateIntervals.clear(),this.trackedSymbols.clear(),this.currentPrices.clear(),this.priceCallbacks.clear(),this.log("[PriceTrackingService] Cleanup completed")}isLoggingEnabled(){return this.config.enableLogging}updateConfig(t){const r=this.config.updateInterval;if(this.config={...this.config,...t},t.updateInterval&&t.updateInterval!==r){this.log(`[PriceTrackingService] Update interval changed from ${r}ms to ${this.config.updateInterval}ms`);const n=Array.from(this.trackedSymbols.values());this.cleanup(),n.forEach(i=>{this.trackSymbol(i)})}}getCurrentConfig(){return{...this.config}}}var fn=(e=>(e.MARKET="MARKET",e.LIMIT="LIMIT",e))(fn||{}),Gn=(e=>(e.PENDING="PENDING",e.FILLED="FILLED",e.CANCELLED="CANCELLED",e))(Gn||{});class gv{constructor(){xe(this,"storageKey","chartspire-paper-trading")}save(t){try{localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(r){console.error("Error saving paper trading data to local storage:",r)}}load(){try{const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):null}catch(t){return console.error("Error loading paper trading data from local storage:",t),null}}}class XL{constructor(t,r,n=!0){xe(this,"storageProvider"),xe(this,"tickerInfoCache"),xe(this,"isInitialized",!1),xe(this,"enableLogging"),this.storageProvider=t??new gv,this.tickerInfoCache=r??new Map,this.enableLogging=n}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}isExternalStorageProvider(t){return"loadAsync"in t}loadData(){const t=this.storageProvider.load();return t?(this.migrateDataIfNeeded(t),this.isInitialized=!0,t):(this.isInitialized=!0,{orders:[],positions:[],trades:[],balance:1e4})}async initializeAsync(){if(this.isExternalStorageProvider(this.storageProvider)){const t=await this.storageProvider.loadAsync();return t?(this.migrateDataIfNeeded(t),this.log("[DataStorageManager] Loaded data from external storage"),this.isInitialized=!0,t):(this.log("[DataStorageManager] No external data found, using default data"),this.isInitialized=!0,this.getDefaultData())}else return this.isInitialized=!0,this.loadData()}getDefaultData(){return{orders:[],positions:[],trades:[],balance:1e4}}saveData(t){if(!this.isInitialized){this.logWarn("[DataStorageManager] Attempted to save data before initialization completed, skipping...");return}this.log("[DataStorageManager] Saving data:",{ordersCount:t.orders.length,positionsCount:t.positions.length,tradesCount:t.trades.length,balance:t.balance}),this.storageProvider.save(t)}migrateDataIfNeeded(t){t.orders.forEach(i=>{if(!i.symbolType){const o=this.tickerInfoCache.get(i.symbol);o!=null&&o.type?(i.symbolType=o.type.toString(),this.log(`[DataStorageManager] Migration: Set ticker type for order ${i.symbol} from cache: ${i.symbolType}`)):(i.symbolType="Unknown",this.logWarn(`[DataStorageManager] Migration: Could not determine ticker type for order ${i.symbol}, set to 'Unknown'. Price tracking may not work correctly.`))}}),t.positions.forEach(i=>{if(!i.symbolType){const o=this.tickerInfoCache.get(i.symbol);o!=null&&o.type?(i.symbolType=o.type.toString(),this.log(`[DataStorageManager] Migration: Set ticker type for position ${i.symbol} from cache: ${i.symbolType}`)):(i.symbolType="Unknown",this.logWarn(`[DataStorageManager] Migration: Could not determine ticker type for position ${i.symbol}, set to 'Unknown'. Price tracking may not work correctly.`))}});const r=t.orders.length;t.orders=t.orders.filter(i=>i.status===Gn.PENDING);const n=r-t.orders.length;n>0&&this.log(`[DataStorageManager] Migration: Removed ${n} filled/cancelled orders from storage to keep it clean`)}isStorageInitialized(){return this.isInitialized}isUsingExternalStorage(){return this.isExternalStorageProvider(this.storageProvider)}setTickerInfoCache(t){this.tickerInfoCache=t}setLoggingEnabled(t){this.enableLogging=t}}class jL{constructor(t=!0){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}validateOrder(t,r,n){const{symbol:i,side:o,quantity:s,type:u,price:d,currentPrice:h,symbolType:p}=t;if(s<=0)throw new Error("Quantity must be greater than 0");if(u===fn.LIMIT&&d<=0)throw new Error("Limit price must be greater than 0");if(!p||p.trim()==="")throw new Error("Ticker type is required when placing orders");const g=(u===fn.MARKET?h:d)*s;if(o==="buy"&&g>r)throw new Error("Insufficient balance");if(o==="sell"){const m=n.find(x=>x.symbol===i&&x.side==="buy"),b=m?m.quantity:0;if(b<s)throw new Error(`Insufficient shares to sell. You own ${b} ${i} but trying to sell ${s}`)}}createOrder(t){const{symbol:r,side:n,quantity:i,type:o,price:s,currentPrice:u,symbolType:d,exchange:h}=t,p=o===fn.MARKET?u:s;return{id:this.generateId(),symbol:r,side:n,quantity:i,type:o,price:p,status:Gn.PENDING,timestamp:Date.now(),symbolType:d.trim(),exchange:h.trim()}}shouldExecuteLimitOrder(t,r){return t.type!==fn.LIMIT?!0:(this.log("[OrderManager] Checking limit order execution:",{orderId:t.id,symbol:t.symbol,side:t.side,limitPrice:t.price,marketPrice:r,shouldExecute:t.side==="buy"?r<=t.price:r>=t.price}),t.side==="buy"&&r>t.price?(this.log(`[OrderManager] Buy limit order NOT executed: market price ${r} > limit price ${t.price}`),!1):t.side==="sell"&&r<t.price?(this.log(`[OrderManager] Sell limit order NOT executed: market price ${r} < limit price ${t.price}`),!1):(this.log(`[OrderManager] Limit order EXECUTING: ${t.side} ${t.symbol} at market price ${r} (limit was ${t.price})`),!0))}fillOrder(t){t.status=Gn.FILLED,t.filledAt=Date.now(),this.log(`[OrderManager] Order ${t.id} filled and will be removed from storage to keep storage clean`)}cancelOrder(t){if(t.status!==Gn.PENDING)throw new Error("Order cannot be cancelled");t.status=Gn.CANCELLED,this.log(`[OrderManager] Order ${t.id} cancelled and will be removed from storage to keep storage clean`)}checkLimitOrdersForExecution(t,r,n){const i=t.filter(o=>o.symbol===r&&o.status===Gn.PENDING&&o.type===fn.LIMIT);return i.length>0&&this.log(`[OrderManager] Checking ${i.length} pending limit orders for ${r} at price $${n.toFixed(2)}`),i.filter(o=>this.shouldExecuteLimitOrder(o,n))}getPendingOrders(t){return t.filter(r=>r.status===Gn.PENDING)}getPendingLimitOrdersForSymbol(t,r){return t.filter(n=>n.symbol===r&&n.status===Gn.PENDING&&n.type===fn.LIMIT)}hasPendingLimitOrders(t){return t.some(r=>r.status===Gn.PENDING&&r.type===fn.LIMIT)}calculatePendingBuyOrdersValue(t){return t.filter(r=>r.status===Gn.PENDING&&r.side==="buy").reduce((r,n)=>r+n.price*n.quantity,0)}getPendingOrdersInfo(t){const r=t.filter(o=>o.status===Gn.PENDING&&o.side==="buy"),n=t.filter(o=>o.status===Gn.PENDING&&o.side==="sell"),i=this.calculatePendingBuyOrdersValue(t);return{pendingBuyOrders:r,pendingSellOrders:n,totalBuyOrdersValue:i}}setLoggingEnabled(t){this.enableLogging=t}}class ZL{constructor(t=!0){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}updatePosition(t,r,n){let i=0;if(r.side==="buy"){const o=t.find(s=>s.symbol===r.symbol&&s.side==="buy");if(o){const s=o.quantity+r.quantity,u=o.averagePrice*o.quantity+n*r.quantity;o.quantity=s,o.averagePrice=u/s,o.symbolType=r.symbolType,o.exchange=r.exchange}else{const s={id:this.generateId(),symbol:r.symbol,side:"buy",quantity:r.quantity,averagePrice:n,unrealizedPnL:0,realizedPnL:0,timestamp:Date.now(),symbolType:r.symbolType,exchange:r.exchange};t.push(s)}}else{const o=t.find(s=>s.symbol===r.symbol&&s.side==="buy");if(o)if(r.quantity>=o.quantity){const s=r.quantity-o.quantity,u=(n-o.averagePrice)*o.quantity;i+=u;const d=t.findIndex(h=>h.id===o.id);if(t.splice(d,1),s>0){const h={id:this.generateId(),symbol:r.symbol,side:"sell",quantity:s,averagePrice:n,unrealizedPnL:0,realizedPnL:0,timestamp:Date.now(),symbolType:r.symbolType,exchange:r.exchange};t.push(h)}}else{const s=r.quantity,u=o.quantity-s,d=(n-o.averagePrice)*s;i+=d,o.quantity=u}else{const s=t.find(u=>u.symbol===r.symbol&&u.side==="sell");if(s){const u=s.quantity+r.quantity,d=s.averagePrice*s.quantity+n*r.quantity;s.quantity=u,s.averagePrice=d/u,s.symbolType=r.symbolType,s.exchange=r.exchange}else{const u={id:this.generateId(),symbol:r.symbol,side:"sell",quantity:r.quantity,averagePrice:n,unrealizedPnL:0,realizedPnL:0,timestamp:Date.now(),symbolType:r.symbolType,exchange:r.exchange};t.push(u)}}}return{updatedBalance:i}}updatePositionPnL(t,r,n){t.filter(i=>i.symbol===r).forEach(i=>{i.side==="buy"?i.unrealizedPnL=(n-i.averagePrice)*i.quantity:i.unrealizedPnL=(i.averagePrice-n)*i.quantity})}closePosition(t,r,n){const i=t.findIndex(h=>h.id===r);if(i===-1)throw new Error("Position not found");const o=t[i];if(!n||n<=0)throw new Error(`Invalid current price: ${n}. Cannot close position.`);this.log("[PositionManager] Closing position"),this.log("[PositionManager] Position details:",{symbol:o.symbol,side:o.side,quantity:o.quantity,averagePrice:o.averagePrice,currentPrice:n});let s=0;o.side==="buy"?s=(n-o.averagePrice)*o.quantity:s=(o.averagePrice-n)*o.quantity,this.log(`[PositionManager] Calculated realized P&L: $${s.toFixed(2)}`);const u=n*o.quantity;this.log(`[PositionManager] Total proceeds from sale: $${u.toFixed(2)}`),this.log(`[PositionManager] Original investment: $${(o.averagePrice*o.quantity).toFixed(2)}`),this.log(`[PositionManager] Net P&L from this position: $${s.toFixed(2)}`);const d={id:this.generateId(),orderId:`close-${o.id}`,symbol:o.symbol,side:o.side==="buy"?"sell":"buy",quantity:o.quantity,price:n,timestamp:Date.now()};return this.log(`[PositionManager] Closed position ${o.symbol} ${o.side} ${o.quantity} at $${n.toFixed(2)}, realized P&L: $${s.toFixed(2)}`),t.splice(i,1),{balanceChange:u,trade:d}}getPositionsForSymbol(t,r){return t.filter(n=>n.symbol===r)}getSymbolsWithPositions(t){const r=new Set;return t.forEach(n=>r.add(n.symbol)),Array.from(r)}hasOpenPositions(t){return t.length>0}getTotalUnrealizedPnL(t){return t.reduce((r,n)=>r+n.unrealizedPnL,0)}getTotalRealizedPnL(t){return t.reduce((r,n)=>r+n.realizedPnL,0)}setLoggingEnabled(t){this.enableLogging=t}}class GL{constructor(t=!0){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}calculatePendingBuyOrdersValue(t){return t.filter(r=>r.status==="PENDING"&&r.side==="buy").reduce((r,n)=>r+n.price*n.quantity,0)}addCash(t,r){if(r<=0)throw new Error("Amount must be greater than 0");const n=t+r;return this.log(`[BalanceManager] Added $${r.toFixed(2)} to account. New balance: $${n.toFixed(2)}`),n}removeCash(t,r,n){if(r<=0)throw new Error("Amount must be greater than 0");if(r>t)throw new Error(`Insufficient balance. Current balance: $${t.toFixed(2)}, trying to remove: $${r.toFixed(2)}`);const i=this.calculatePendingBuyOrdersValue(n),o=t-r;if(o<i)throw new Error(`Cannot remove $${r.toFixed(2)}. Pending buy orders require $${i.toFixed(2)} but new balance would be $${o.toFixed(2)}. Cancel some orders or remove less cash.`);return this.log(`[BalanceManager] Removed $${r.toFixed(2)} from account. New balance: $${o.toFixed(2)}`),o}setBalance(t,r){if(t<0)throw new Error("Balance cannot be negative");const n=this.calculatePendingBuyOrdersValue(r);if(t<n)throw new Error(`Cannot set balance to $${t.toFixed(2)}. Pending buy orders require $${n.toFixed(2)}. Cancel some orders first.`);return this.log(`[BalanceManager] Set balance to $${t.toFixed(2)}`),t}getPendingOrdersInfo(t,r){const n=r.filter(d=>d.status==="PENDING"&&d.side==="buy"),i=r.filter(d=>d.status==="PENDING"&&d.side==="sell"),o=this.calculatePendingBuyOrdersValue(r),s=t-o,u=Math.max(0,s);return{pendingBuyOrders:n,pendingSellOrders:i,totalBuyOrdersValue:o,availableCashAfterOrders:s,maxCashRemoval:u}}updateBalanceForOrderExecution(t,r,n){return r==="buy"?t-n:t+n}validateBalanceForOrder(t,r,n){return r==="buy"?t>=n:!0}setLoggingEnabled(t){this.enableLogging=t}}class QL{constructor(t=1e3,r=!0){xe(this,"maxTrades"),xe(this,"enableLogging"),this.maxTrades=Math.max(1,t),this.enableLogging=r}log(t,...r){this.enableLogging&&console.log(t,...r)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}createTrade(t,r,n,i,o){return{id:this.generateId(),orderId:t,symbol:r,side:n,quantity:i,price:o,timestamp:Date.now()}}addTrade(t,r){t.push(r),this.limitTrades(t)}limitTrades(t){if(t.length>this.maxTrades){t.sort((n,i)=>n.timestamp-i.timestamp);const r=t.length-this.maxTrades;t.splice(0,r),this.log(`[TradeManager] Limited trades to ${this.maxTrades}, removed ${r} oldest trades`)}}clearAllTrades(t){const r=t.length;return t.length=0,this.log(`[TradeManager] Cleared ${r} trades from history`),r}getTradesForSymbol(t,r){return t.filter(n=>n.symbol===r)}getTradesInDateRange(t,r,n){return t.filter(i=>i.timestamp>=r&&i.timestamp<=n)}getTradesForOrder(t,r){return t.filter(n=>n.orderId===r)}getTotalVolumeForSymbol(t,r){return t.filter(n=>n.symbol===r).reduce((n,i)=>n+i.quantity,0)}getTotalValueForSymbol(t,r){return t.filter(n=>n.symbol===r).reduce((n,i)=>n+i.quantity*i.price,0)}getTradeStatistics(t){const r=t.length,n=t.reduce((d,h)=>d+h.quantity,0),i=t.reduce((d,h)=>d+h.quantity*h.price,0),o=new Set(t.map(d=>d.symbol)).size,s=r>0?n/r:0,u=r>0?i/r:0;return{totalTrades:r,totalVolume:n,totalValue:i,uniqueSymbols:o,averageTradeSize:s,averageTradeValue:u}}getRecentTrades(t,r=10){return t.sort((n,i)=>i.timestamp-n.timestamp).slice(0,r)}setMaxTrades(t){this.maxTrades=Math.max(1,t)}getMaxTrades(){return this.maxTrades}setLoggingEnabled(t){this.enableLogging=t}}class KL{constructor(t,r,n,i,o=!0){xe(this,"data"),xe(this,"dataStorageManager"),xe(this,"orderManager"),xe(this,"positionManager"),xe(this,"balanceManager"),xe(this,"tradeManager"),xe(this,"priceTrackingService"),xe(this,"symbolInfoCache",new Map),xe(this,"isUIVisible",!1),xe(this,"enableLogging"),this.enableLogging=o,this.dataStorageManager=new XL(t??new gv,this.symbolInfoCache,o),this.orderManager=new jL(o),this.positionManager=new ZL(o),this.balanceManager=new GL(o),this.tradeManager=new QL(i,o),this.priceTrackingService=r??new b5(n),this.dataStorageManager.isUsingExternalStorage()?(this.data=this.dataStorageManager.getDefaultData(),this.log("[PaperTradingService] Initialized with default data for external storage (async load will follow)")):(this.data=this.dataStorageManager.loadData(),this.log("[PaperTradingService] Initialized with local storage data")),this.setupPriceTracking()}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}async initializeAsync(){this.dataStorageManager.isUsingExternalStorage()&&(this.data=await this.dataStorageManager.initializeAsync(),this.log("[PaperTradingService] Async initialization completed"),this.updateTrackedSymbols())}saveData(){this.dataStorageManager.saveData(this.data)}setupPriceTracking(){this.priceTrackingService.addPriceCallback(t=>{this.log(`[PaperTradingService] Price update received: ${t.symbol} = $${t.price.toFixed(2)}`),this.checkLimitOrdersForSymbol(t.symbol,t.price),this.updatePositionPnLForSymbol(t.symbol,t.price)}),this.updateTrackedSymbols()}updateTrackedSymbols(){if(!this.isUIVisible)return;const t=new Set;for(const r of this.data.orders)r.status===Gn.PENDING&&r.type===fn.LIMIT&&t.add(r.symbol);for(const r of this.data.positions)t.add(r.symbol);this.priceTrackingService.updateTrackedSymbols(Array.from(t),r=>this.symbolInfoCache.get(r)??null)}createSymbolInfo(t,r){return this.symbolInfoCache.get(t)||(r?{symbol:t,type:r,name:t}:null)}checkLimitOrdersForSymbol(t,r){this.orderManager.checkLimitOrdersForExecution(this.data.orders,t,r).forEach(n=>{this.executeOrder(n.id,r)}),this.updateTrackedSymbols()}updatePositionPnLForSymbol(t,r){this.positionManager.updatePositionPnL(this.data.positions,t,r)}cacheSymbolInfo(t){this.symbolInfoCache.set(t.symbol,t)}updatePriceTrackingConfig(t){this.priceTrackingService.updateConfig(t)}setPriceTrackingInterval(t){if(t<1e3)throw new Error("Price tracking interval must be at least 1000ms (1 second)");this.priceTrackingService.updateConfig({updateInterval:t})}getCurrentConfig(){return this.priceTrackingService.getCurrentConfig()}setPriceTrackingLogging(t){this.priceTrackingService.updateConfig({enableLogging:t}),this.enableLogging=t,this.dataStorageManager.setLoggingEnabled(t),this.orderManager.setLoggingEnabled(t),this.positionManager.setLoggingEnabled(t),this.balanceManager.setLoggingEnabled(t),this.tradeManager.setLoggingEnabled(t)}getOrders(){return[...this.data.orders]}getPositions(){return[...this.data.positions]}getTrades(){return[...this.data.trades]}getBalance(){return this.data.balance}placeOrder(t){this.orderManager.validateOrder(t,this.data.balance,this.data.positions);const r=this.orderManager.createOrder(t);return this.data.orders.push(r),r.type===fn.MARKET?this.executeOrder(r.id,t.currentPrice):this.updateTrackedSymbols(),this.saveData(),r}executeOrder(t,r){const n=this.data.orders.find(d=>d.id===t);if(!n||n.status!==Gn.PENDING||!this.orderManager.shouldExecuteLimitOrder(n,r))return;const i=r*n.quantity;this.data.balance=this.balanceManager.updateBalanceForOrderExecution(this.data.balance,n.side,i);const o=this.positionManager.updatePosition(this.data.positions,n,r);this.data.balance+=o.updatedBalance;const s=this.tradeManager.createTrade(n.id,n.symbol,n.side,n.quantity,r);this.tradeManager.addTrade(this.data.trades,s),this.orderManager.fillOrder(n);const u=this.data.orders.findIndex(d=>d.id===t);u!==-1&&(this.data.orders.splice(u,1),this.log(`[PaperTradingService] Removed filled order ${t} from storage`)),this.updateTrackedSymbols(),this.saveData()}cancelOrder(t){const r=this.data.orders.find(i=>i.id===t);if(!r)throw new Error("Order not found");this.orderManager.cancelOrder(r);const n=this.data.orders.findIndex(i=>i.id===t);n!==-1&&(this.data.orders.splice(n,1),this.log(`[PaperTradingService] Removed cancelled order ${t} from storage`)),this.updateTrackedSymbols(),this.saveData()}updatePositionPnL(t,r){this.positionManager.updatePositionPnL(this.data.positions,t,r)}closePosition(t,r){const n=this.data.balance;this.log(`[PaperTradingService] Closing position - Initial balance: $${n.toFixed(2)}`);const i=this.positionManager.closePosition(this.data.positions,t,r);this.data.balance+=i.balanceChange,this.log(`[PaperTradingService] Updated balance: $${this.data.balance.toFixed(2)} (added proceeds: +$${i.balanceChange.toFixed(2)})`),this.tradeManager.addTrade(this.data.trades,i.trade),this.updateTrackedSymbols(),this.saveData(),this.log(`[PaperTradingService] Position close completed. Final balance: $${this.data.balance.toFixed(2)}`)}addCash(t){this.data.balance=this.balanceManager.addCash(this.data.balance,t),this.saveData()}removeCash(t){this.data.balance=this.balanceManager.removeCash(this.data.balance,t,this.data.orders),this.saveData()}setBalance(t){this.data.balance=this.balanceManager.setBalance(t,this.data.orders),this.saveData()}getPendingOrdersInfo(){return this.balanceManager.getPendingOrdersInfo(this.data.balance,this.data.orders)}clearAllTrades(){this.tradeManager.clearAllTrades(this.data.trades),this.saveData()}checkLimitOrders(t,r){this.checkLimitOrdersForSymbol(t,r)}reset(){this.data=this.dataStorageManager.getDefaultData(),this.updateTrackedSymbols(),this.saveData()}startPriceTrackingForPendingOrders(){this.isUIVisible=!0,this.log("[PaperTradingService] UI opened, starting price tracking for pending orders and positions...");const t=new Set;for(const i of this.data.orders)i.status===Gn.PENDING&&i.type===fn.LIMIT&&t.add(i.symbol);for(const i of this.data.positions)t.add(i.symbol);const r=this.data.orders.filter(i=>i.status===Gn.PENDING&&i.type===fn.LIMIT).map(i=>i.symbol),n=this.data.positions.map(i=>i.symbol);this.log(`[PaperTradingService] Found ${r.length} symbols with pending limit orders:`,r),this.log(`[PaperTradingService] Found ${n.length} symbols with open positions:`,n),this.log(`[PaperTradingService] Total ${t.size} unique symbols to track:`,Array.from(t));for(const i of t){let o=this.symbolInfoCache.get(i);if(!o){const s=this.data.orders.find(h=>h.symbol===i),u=this.data.positions.find(h=>h.symbol===i),d=(s==null?void 0:s.symbolType)||(u==null?void 0:u.symbolType);if(d){const h=this.createSymbolInfo(i,d);h&&(o=h,this.symbolInfoCache.set(i,o))}}o?(this.log(`[PaperTradingService] Starting tracking for ${i} (type: ${o.type})`),this.priceTrackingService.trackSymbol(o)):this.logWarn(`[PaperTradingService] No symbol info available for ${i} - cannot track price`)}t.size===0&&this.log("[PaperTradingService] No pending orders or positions found, no price tracking needed")}stopPriceTrackingForUI(){this.isUIVisible=!1,this.log("[PaperTradingService] UI closed, stopping all price tracking..."),this.priceTrackingService.cleanup()}hasPendingLimitOrders(){return this.orderManager.hasPendingLimitOrders(this.data.orders)}hasItemsNeedingPriceTracking(){const t=this.orderManager.hasPendingLimitOrders(this.data.orders),r=this.positionManager.hasOpenPositions(this.data.positions);return t||r}isUICurrentlyVisible(){return this.isUIVisible}cleanup(){this.isUIVisible=!1,this.priceTrackingService.cleanup()}}const qL=async()=>null;class JL{constructor(t=!0){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}save(t){this.log("[ExternalStorageProvider] Saving paper trading data via callback"),this.log("[ExternalStorageProvider] Data to save:",t),this.log("[ExternalStorageProvider] Data type:",typeof t),this.log("[ExternalStorageProvider] Data keys:",Object.keys(t||{})),this.logWarn("[ExternalStorageProvider] No save callback registered, data not saved")}load(){return this.log("[ExternalStorageProvider] Load called - use loadAsync() for external storage"),null}async loadAsync(){try{this.log("[ExternalStorageProvider] Loading paper trading data via callback");const t=await qL();return t?(this.log("[ExternalStorageProvider] Paper trading data loaded successfully"),t):(this.log("[ExternalStorageProvider] No paper trading data found"),null)}catch(t){return console.error("[ExternalStorageProvider] Error loading paper trading data:",t),null}}}var eP=Q("<div class=form-group><label></label><input type=number min=0 step=0.01>"),tP=Q("<div class=trade-form><div class=order-type-selector><button></button><button></button></div><div class=side-selector><button></button><button></button></div><div class=form-group><label></label><input type=number min=1 step=1></div><div class=order-summary><div class=summary-row><span>:</span><span></span></div></div><button> "),Qm=Q("<div class=empty-state>"),rP=Q("<div class=positions-list>"),nP=Q("<div class=orders-list>"),iP=Q("<div class=empty-state><div class=empty-icon></div><div class=empty-title></div><div class=empty-subtitle>"),oP=Q("<div class=trades-header><button class=clear-trades-btn> "),aP=Q("<div class=trades-table-header><div class=header-symbol></div><div class=header-details><span class=header-qty></span><span class=header-price></span><span class=header-total></span></div><div class=header-time>"),sP=Q("<div class=trades-list>"),lP=Q("<div class=cash-warning>"),cP=Q('<div class=cash-management><div class=cash-form><div class=form-group><label></label><input type=number min=0 step=100></div><div class=form-group><label></label><select><option value=add></option><option value=remove></option></select></div><button> </button><button class="cash-operation-btn remove"style=margin-top:15px;background:#dc3545;border-color:#dc3545;></button></div><div class=pending-orders-summary><h4>'),uP=Q("<div class=paper-trading-container><div class=paper-trading-header><h3></h3><div class=balance>: </div></div><div class=current-ticker><div class=ticker-info><span class=symbol></span><span class=price></span></div></div><div class=tab-navigation><button></button><button> (<!>)</button><button> (<!>)</button><button> (<!>)</button><button></button></div><div class=tab-content>"),dP=Q("<div class=position-item><div class=position-header><span class=symbol></span><span></span></div><div class=position-details><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div></div><button class=close-position-btn>"),hP=Q("<div class=order-item><div class=order-header><span class=symbol></span><span></span><span class=type></span></div><div class=order-details><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div></div><button class=cancel-order-btn>"),pP=Q('<div class="trade-item compact"><div class=trade-row><div class=trade-symbol><span class=symbol></span><span> </span></div><div class=trade-details><span class=quantity></span><span class=price></span><span class=total></span></div><div class=trade-time><br>'),fP=Q("<div><div>: </div><div>: </div><div>: "),gP=Q("<div class=error-text>"),vP=Q("<div class=summary-details><div class=summary-row><span>:</span><span> (<!>)</span></div><div class=summary-row><span>:</span><span></span></div><div class=summary-row><span>:</span><span></span></div><div class=summary-row><span>:</span><span>");const mP=e=>{const[t,r]=be([]),[n,i]=be([]),[o,s]=be([]),[u,d]=be(1e4),[h,p]=be(fn.MARKET),[g,m]=be("buy"),[b,x]=be(1),[C,_]=be(e.currentPrice),[k,M]=be("trade"),[L,A]=be(""),[P,$]=be(0),[R,z]=be(1e3),[B,W]=be("add"),X=new b5(e.priceTrackingConfig),ee=e.paperTradingUseExternalStorage?new JL(X.isLoggingEnabled()):new gv,U=new KL(ee,X,e.priceTrackingConfig,e.paperTradingMaxTrades),q=(Ce,...Le)=>{X.isLoggingEnabled()&&console.log(Ce,...Le)},ie=(Ce,...Le)=>{X.isLoggingEnabled()&&console.warn(Ce,...Le)},le=()=>(P(),Oe(e.symbol.symbol)),ae=Ce=>{P();const Le=X.getCurrentPrice(Ce.symbol);return Le&&Le>0?Ce.side==="buy"?(Le-Ce.averagePrice)*Ce.quantity:(Ce.averagePrice-Le)*Ce.quantity:Ce.unrealizedPnL};X.addPriceCallback(Ce=>{$(Le=>Le+1),te()}),ki(async()=>{q("[PaperTrading] Component mounted, setting up paper trading..."),e.paperTradingUseExternalStorage&&(q("[PaperTrading] Using external storage, initializing async..."),await U.initializeAsync()),q("[PaperTrading] Using unified data feed from ChartDataProvider"),e.symbol.symbol&&(U.cacheSymbolInfo(e.symbol),q("[PaperTrading] Cached ticker info for:",e.symbol.symbol)),te(),A(e.symbol.symbol),U.startPriceTrackingForPendingOrders()}),$r(()=>{q("[PaperTrading] Component unmounting, stopping price tracking..."),U.stopPriceTrackingForUI()}),nt(()=>{if(e.symbol.symbol&&e.symbol.symbol!==L()){const Ce=le();_(Ce||e.currentPrice),A(e.symbol.symbol),U.cacheSymbolInfo(e.symbol)}}),nt(()=>{e.symbol.symbol&&e.currentPrice>0&&(U.updatePositionPnL(e.symbol.symbol,e.currentPrice),te())});const te=()=>{r(U.getOrders()),i(U.getPositions()),s(U.getTrades()),d(U.getBalance())},ce=()=>{var Ce;if(!e.symbol.symbol||b()<=0)return;const Le=le(),Ve=h()===fn.MARKET?Le:C();q("[PaperTrading] Placing order:",{symbol:e.symbol.symbol,side:g(),quantity:b(),type:h(),price:Ve,currentPrice:Le});try{const je=U.placeOrder({symbol:e.symbol.symbol,side:g(),quantity:b(),type:h(),price:Ve,currentPrice:Le,symbolType:(Ce=e.symbol.type)==null?void 0:Ce.toString(),exchange:e.symbol.exchange||"default"});q("[PaperTrading] Order placed successfully:",je),te(),x(1),_(le())}catch(je){console.error("Error placing order:",je),alert(je instanceof Error?je.message:"Error placing order")}},ue=Ce=>{try{const Le=n().find(bt=>bt.id===Ce);if(!Le)throw new Error("Position not found");const Ve=u();q(`[PaperTrading] BEFORE closing position - Balance: $${Ve.toFixed(2)}`),q("[PaperTrading] Position to close:",Le);const je=Oe(Le.symbol);if(q(`[PaperTrading] Current price for ${Le.symbol}: $${je}`),!je||je<=0)throw new Error(`Cannot close position: No current price available for ${Le.symbol}. Please try again when price data is available.`);let qe=0;Le.side==="buy"?qe=(je-Le.averagePrice)*Le.quantity:qe=(Le.averagePrice-je)*Le.quantity,q(`[PaperTrading] Expected P&L: $${qe.toFixed(2)}`),q(`[PaperTrading] Expected new balance: $${(Ve+qe).toFixed(2)}`),U.closePosition(Ce,je),te();const ht=u(),vt=ht-Ve;q(`[PaperTrading] AFTER closing position - Balance: $${ht.toFixed(2)}`),q(`[PaperTrading] Actual balance change: $${vt.toFixed(2)}`),q(`[PaperTrading] Expected vs Actual: Expected $${qe.toFixed(2)}, Got $${vt.toFixed(2)}`)}catch(Le){console.error("Error closing position:",Le),alert(Le instanceof Error?Le.message:"Error closing position")}},j=Ce=>{try{U.cancelOrder(Ce),te()}catch(Le){console.error("Error canceling order:",Le)}},Z=()=>{try{U.addCash(R()),te(),z(1e3)}catch(Ce){console.error("Error adding cash:",Ce),alert(Ce instanceof Error?Ce.message:"Error adding cash")}},pe=()=>{try{U.removeCash(R()),te(),z(1e3)}catch(Ce){console.error("Error removing cash:",Ce),alert(Ce instanceof Error?Ce.message:"Error removing cash")}},Y=()=>{try{U.reset(),te(),q("[PaperTrading] Account reset successfully")}catch(Ce){console.error("Error resetting account:",Ce),alert(Ce instanceof Error?Ce.message:"Error resetting account")}},fe=()=>U.getPendingOrdersInfo(),ve=Ce=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Ce),$e=(Ce,Le=2)=>Ce.toFixed(Le),Ie=Ce=>Ce>0?"#00C851":Ce<0?"#FF4444":"#666",Oe=Ce=>{P();const Le=X.getCurrentPrice(Ce);return Le&&Le>0?(q(`[PaperTrading] Using API price for ${Ce}: $${Le.toFixed(2)}`),Le):Ce===e.symbol.symbol?(q(`[PaperTrading] Using chart price for ${Ce}: $${e.currentPrice.toFixed(2)} (API price not available)`),e.currentPrice):(ie(`[PaperTrading] No price available for ${Ce}`),0)};return(()=>{var Ce=uP(),Le=Ce.firstChild,Ve=Le.firstChild,je=Ve.nextSibling,qe=je.firstChild,ht=Le.nextSibling,vt=ht.firstChild,bt=vt.firstChild,or=bt.nextSibling,dr=ht.nextSibling,qt=dr.firstChild,It=qt.nextSibling,mr=It.firstChild,ln=mr.nextSibling;ln.nextSibling;var yn=It.nextSibling,cr=yn.firstChild,Dt=cr.nextSibling;Dt.nextSibling;var Ht=yn.nextSibling,Jt=Ht.firstChild,Gr=Jt.nextSibling;Gr.nextSibling;var ur=Ht.nextSibling,Vr=dr.nextSibling;return F(Ve,()=>I("paper_trading",e.locale)),F(je,()=>I("balance",e.locale),qe),F(je,()=>ve(u()),null),F(bt,()=>e.symbol.symbol),F(or,()=>ve(le())),qt.$$click=()=>M("trade"),F(qt,()=>I("trade",e.locale)),It.$$click=()=>M("positions"),F(It,()=>I("positions",e.locale),mr),F(It,()=>n().length,ln),yn.$$click=()=>M("orders"),F(yn,()=>I("orders",e.locale),cr),F(yn,()=>t().length,Dt),Ht.$$click=()=>M("trades"),F(Ht,()=>I("trades",e.locale),Jt),F(Ht,()=>o().length,Gr),ur.$$click=()=>M("cash"),F(ur,()=>I("cash",e.locale)),F(Vr,G(ze,{get when(){return k()==="trade"},get children(){var kt=tP(),Ue=kt.firstChild,Ct=Ue.firstChild,xt=Ct.nextSibling,_t=Ue.nextSibling,wt=_t.firstChild,Vt=wt.nextSibling,Yt=_t.nextSibling,yr=Yt.firstChild,hr=yr.nextSibling,sr=Yt.nextSibling,qn=sr.firstChild,Ur=qn.firstChild,Hr=Ur.firstChild,Jn=Ur.nextSibling,Lt=sr.nextSibling,Pr=Lt.firstChild;return Ct.$$click=()=>p(fn.MARKET),F(Ct,()=>I("market",e.locale)),xt.$$click=()=>{p(fn.LIMIT),_(le())},F(xt,()=>I("limit",e.locale)),wt.$$click=()=>m("buy"),F(wt,()=>I("buy",e.locale)),Vt.$$click=()=>m("sell"),F(Vt,()=>I("sell",e.locale)),F(yr,()=>I("quantity",e.locale)),hr.$$input=St=>x(Number(St.target.value)),F(kt,G(ze,{get when(){return h()===fn.LIMIT},get children(){var St=eP(),Ar=St.firstChild,wr=Ar.nextSibling;return F(Ar,()=>I("price",e.locale)),wr.$$input=pr=>_(Number(pr.target.value)),De(()=>wr.value=C()),St}}),sr),F(Ur,()=>I("estimated_total",e.locale),Hr),F(Jn,()=>ve((h()===fn.MARKET?le():C())*b())),Lt.$$click=ce,F(Lt,(()=>{var St=Ae(()=>g()==="buy");return()=>St()?I("buy",e.locale):I("sell",e.locale)})(),Pr),F(Lt,()=>e.symbol.symbol,null),De(St=>{var Ar=`order-type-btn ${h()===fn.MARKET?"active":""}`,wr=`order-type-btn ${h()===fn.LIMIT?"active":""}`,pr=`side-btn buy ${g()==="buy"?"active":""}`,tn=`side-btn sell ${g()==="sell"?"active":""}`,Yr=`place-order-btn ${g()}`,rn=!e.symbol.symbol||b()<=0;return Ar!==St.e&&at(Ct,St.e=Ar),wr!==St.t&&at(xt,St.t=wr),pr!==St.a&&at(wt,St.a=pr),tn!==St.o&&at(Vt,St.o=tn),Yr!==St.i&&at(Lt,St.i=Yr),rn!==St.n&&(Lt.disabled=St.n=rn),St},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),De(()=>hr.value=b()),kt}}),null),F(Vr,G(ze,{get when(){return k()==="positions"},get children(){var kt=rP();return F(kt,G(ze,{get when(){return n().length===0},get children(){var Ue=Qm();return F(Ue,()=>I("no_open_positions",e.locale)),Ue}}),null),F(kt,G(mn,{get each(){return n()},children:Ue=>{const Ct=()=>(P(),Oe(Ue.symbol));return(()=>{var xt=dP(),_t=xt.firstChild,wt=_t.firstChild,Vt=wt.nextSibling,Yt=_t.nextSibling,yr=Yt.firstChild,hr=yr.firstChild,sr=hr.firstChild,qn=hr.nextSibling,Ur=yr.nextSibling,Hr=Ur.firstChild,Jn=Hr.firstChild,Lt=Hr.nextSibling,Pr=Ur.nextSibling,St=Pr.firstChild,Ar=St.firstChild,wr=St.nextSibling,pr=Pr.nextSibling,tn=pr.firstChild,Yr=tn.firstChild,rn=tn.nextSibling,bn=Yt.nextSibling;return F(wt,()=>Ue.symbol),F(Vt,()=>Ue.side.toUpperCase()),F(hr,()=>I("quantity",e.locale),sr),F(qn,()=>Ue.quantity),F(Hr,()=>I("avg_price",e.locale),Jn),F(Lt,()=>ve(Ue.averagePrice)),F(St,()=>I("current_price",e.locale),Ar),F(wr,()=>ve(Ct())),F(tn,()=>I("pnl",e.locale),Yr),F(rn,()=>ve(ae(Ue))),bn.$$click=()=>ue(Ue.id),F(bn,()=>I("close_position",e.locale)),De(Ln=>{var Hi=`side ${Ue.side}`,lo=Ie(ae(Ue));return Hi!==Ln.e&&at(Vt,Ln.e=Hi),lo!==Ln.t&&((Ln.t=lo)!=null?rn.style.setProperty("color",lo):rn.style.removeProperty("color")),Ln},{e:void 0,t:void 0}),xt})()}}),null),kt}}),null),F(Vr,G(ze,{get when(){return k()==="orders"},get children(){var kt=nP();return F(kt,G(ze,{get when(){return t().length===0},get children(){var Ue=Qm();return F(Ue,()=>I("no_pending_orders",e.locale)),Ue}}),null),F(kt,G(mn,{get each(){return t()},children:Ue=>(()=>{var Ct=hP(),xt=Ct.firstChild,_t=xt.firstChild,wt=_t.nextSibling,Vt=wt.nextSibling,Yt=xt.nextSibling,yr=Yt.firstChild,hr=yr.firstChild,sr=hr.firstChild,qn=hr.nextSibling,Ur=yr.nextSibling,Hr=Ur.firstChild,Jn=Hr.firstChild,Lt=Hr.nextSibling,Pr=Ur.nextSibling,St=Pr.firstChild,Ar=St.firstChild,wr=St.nextSibling,pr=Yt.nextSibling;return F(_t,()=>Ue.symbol),F(wt,()=>Ue.side.toUpperCase()),F(Vt,()=>Ue.type),F(hr,()=>I("quantity",e.locale),sr),F(qn,()=>Ue.quantity),F(Hr,()=>I("price",e.locale),Jn),F(Lt,()=>ve(Ue.price)),F(St,()=>I("status",e.locale),Ar),F(wr,()=>Ue.status),pr.$$click=()=>j(Ue.id),F(pr,()=>I("cancel_order",e.locale)),De(()=>at(wt,`side ${Ue.side}`)),Ct})()}),null),kt}}),null),F(Vr,G(ze,{get when(){return k()==="trades"},get children(){var kt=sP();return F(kt,G(ze,{get when(){return o().length===0},get children(){var Ue=iP(),Ct=Ue.firstChild,xt=Ct.nextSibling,_t=xt.nextSibling;return F(xt,()=>I("no_trades_executed",e.locale)),F(_t,()=>I("your_trade_history_will_appear_here",e.locale)),Ue}}),null),F(kt,G(ze,{get when(){return o().length>0},get children(){return[(()=>{var Ue=oP(),Ct=Ue.firstChild;return Ct.firstChild,Ct.$$click=()=>{const xt=I("are_you_sure_clear_trades",e.locale).replace("{count}",o().length.toString());confirm(xt)&&(U.clearAllTrades(),te())},F(Ct,()=>I("clear_all_trades",e.locale),null),Ue})(),(()=>{var Ue=aP(),Ct=Ue.firstChild,xt=Ct.nextSibling,_t=xt.firstChild,wt=_t.nextSibling,Vt=wt.nextSibling,Yt=xt.nextSibling;return F(Ct,()=>I("symbol_side",e.locale)),F(_t,()=>I("qty",e.locale)),F(wt,()=>I("price",e.locale)),F(Vt,()=>I("total",e.locale)),F(Yt,()=>I("date_time",e.locale)),Ue})()]}}),null),F(kt,G(mn,{get each(){return o().sort((Ue,Ct)=>Ct.timestamp-Ue.timestamp)},children:Ue=>(()=>{var Ct=pP(),xt=Ct.firstChild,_t=xt.firstChild,wt=_t.firstChild,Vt=wt.nextSibling,Yt=Vt.firstChild,yr=_t.nextSibling,hr=yr.firstChild,sr=hr.nextSibling,qn=sr.nextSibling,Ur=yr.nextSibling,Hr=Ur.firstChild;return F(wt,()=>Ue.symbol),F(Vt,()=>Ue.side==="buy"?"":"",Yt),F(Vt,()=>Ue.side.toUpperCase(),null),F(hr,()=>$e(Ue.quantity,Ue.quantity<1?4:0)),F(sr,()=>ve(Ue.price)),F(qn,()=>ve(Ue.price*Ue.quantity)),F(Ur,()=>new Date(Ue.timestamp).toLocaleDateString([],{month:"short",day:"numeric"}),Hr),F(Ur,()=>new Date(Ue.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),null),De(()=>at(Vt,`side-badge ${Ue.side}`)),Ct})()}),null),kt}}),null),F(Vr,G(ze,{get when(){return k()==="cash"},get children(){var kt=cP(),Ue=kt.firstChild,Ct=Ue.firstChild,xt=Ct.firstChild,_t=xt.nextSibling,wt=Ct.nextSibling,Vt=wt.firstChild,Yt=Vt.nextSibling,yr=Yt.firstChild,hr=yr.nextSibling,sr=wt.nextSibling,qn=sr.firstChild,Ur=sr.nextSibling,Hr=Ue.nextSibling,Jn=Hr.firstChild;return F(xt,()=>I("cash_amount",e.locale)),_t.$$input=Lt=>z(Number(Lt.target.value)),F(Vt,()=>I("operation",e.locale)),Yt.addEventListener("change",Lt=>W(Lt.target.value)),F(yr,()=>I("add_cash",e.locale)),F(hr,()=>I("remove_cash",e.locale)),F(Ue,G(ze,{get when(){return B()==="remove"},get children(){var Lt=lP();return F(Lt,()=>{const Pr=fe();if(Pr.totalBuyOrdersValue>0){const St=u()-R(),Ar=St<Pr.totalBuyOrdersValue;return(()=>{var wr=fP(),pr=wr.firstChild,tn=pr.firstChild,Yr=pr.nextSibling,rn=Yr.firstChild,bn=Yr.nextSibling,Ln=bn.firstChild;return at(wr,`warning ${Ar?"error":"info"}`),F(pr,()=>I("pending_buy_orders",e.locale),tn),F(pr,()=>ve(Pr.totalBuyOrdersValue),null),F(Yr,()=>I("balance_after_removal",e.locale),rn),F(Yr,()=>ve(St),null),F(bn,()=>I("max_safe_removal",e.locale),Ln),F(bn,()=>ve(Pr.maxCashRemoval),null),F(wr,Ar&&(()=>{var Hi=gP();return F(Hi,()=>I("insufficient_funds_warning",e.locale)),Hi})(),null),wr})()}return null}),Lt}}),sr),Wi(sr,"click",B()==="add"?Z:pe),F(sr,(()=>{var Lt=Ae(()=>B()==="add");return()=>Lt()?I("add",e.locale):I("remove",e.locale)})(),qn),F(sr,()=>ve(R()),null),Ur.$$click=()=>{const Lt=I("reset_account_confirmation",e.locale).replace("{orders}",t().length.toString()).replace("{positions}",n().length.toString()).replace("{trades}",o().length.toString());confirm(Lt)&&(Y(),alert(I("reset_account_success",e.locale)))},F(Ur,()=>I("reset_trading_account",e.locale)),F(Jn,()=>I("pending_orders_summary",e.locale)),F(Hr,()=>{const Lt=fe();return(()=>{var Pr=vP(),St=Pr.firstChild,Ar=St.firstChild,wr=Ar.firstChild,pr=Ar.nextSibling,tn=pr.firstChild,Yr=tn.nextSibling;Yr.nextSibling;var rn=St.nextSibling,bn=rn.firstChild,Ln=bn.firstChild,Hi=bn.nextSibling,lo=rn.nextSibling,Xa=lo.firstChild,fi=Xa.firstChild,ca=Xa.nextSibling,Bs=lo.nextSibling,ua=Bs.firstChild,ja=ua.firstChild,Za=ua.nextSibling;return F(Ar,()=>I("pending_buy_orders_summary",e.locale),wr),F(pr,()=>Lt.pendingBuyOrders.length,tn),F(pr,()=>ve(Lt.totalBuyOrdersValue),Yr),F(bn,()=>I("pending_sell_orders_summary",e.locale),Ln),F(Hi,()=>Lt.pendingSellOrders.length),F(Xa,()=>I("available_cash",e.locale),fi),F(ca,()=>ve(Lt.availableCashAfterOrders)),F(ua,()=>I("max_cash_removal",e.locale),ja),F(Za,()=>ve(Lt.maxCashRemoval)),Pr})()},null),De(Lt=>{var Pr=`cash-operation-btn ${B()}`,St=R()<=0;return Pr!==Lt.e&&at(sr,Lt.e=Pr),St!==Lt.t&&(sr.disabled=Lt.t=St),Lt},{e:void 0,t:void 0}),De(()=>_t.value=R()),De(()=>Yt.value=B()),kt}}),null),De(kt=>{var Ue=`tab ${k()==="trade"?"active":""}`,Ct=`tab ${k()==="positions"?"active":""}`,xt=`tab ${k()==="orders"?"active":""}`,_t=`tab ${k()==="trades"?"active":""}`,wt=`tab ${k()==="cash"?"active":""}`;return Ue!==kt.e&&at(qt,kt.e=Ue),Ct!==kt.t&&at(It,kt.t=Ct),xt!==kt.a&&at(yn,kt.a=xt),_t!==kt.o&&at(Ht,kt.o=_t),wt!==kt.i&&at(ur,kt.i=wt),kt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),Ce})()};jt(["click","input"]);class yP{constructor(t,r,n){xe(this,"currentSubscription",null),xe(this,"uuid"),xe(this,"setOrderBookData"),xe(this,"setIsLoading"),xe(this,"setError"),this.uuid=Math.random().toString(36).slice(2,11),this.setOrderBookData=t,this.setIsLoading=r,this.setError=n}subscribeToSymbol(t){const r={symbol:t.symbol,exchange:t.exchange,name:t.name,shortName:t.shortName,market:t.market,type:t.type};(!this.currentSubscription||this.currentSubscription.symbol!==r.symbol||this.currentSubscription.exchange!==r.exchange)&&(this.currentSubscription&&this.unsubscribeFromSymbol(this.currentSubscription),this.performSubscription(t),this.currentSubscription=r)}unsubscribeFromCurrent(){this.currentSubscription&&(this.unsubscribeFromSymbol(this.currentSubscription),this.currentSubscription=null)}performSubscription(t){this.setIsLoading(!0),this.setError(null);const r=Br.getInstance().getDataFeed();if(r){const n=i=>{this.setOrderBookData(i),this.setIsLoading(!1)};r.subscribeOrderBookData(t,n,this.uuid)}else this.setError("Data feed not available for this symbol type"),this.setIsLoading(!1)}unsubscribeFromSymbol(t){const r=Br.getInstance().getDataFeed();r&&r.unsubscribeOrderBookData(t,this.uuid)}getCurrentSubscription(){return this.currentSubscription}}const bP=()=>{const[e,t]=be(null),[r,n]=be(!1),[i,o]=be(null),s=new yP(t,n,o);return $r(()=>{s.unsubscribeFromCurrent()}),{orderBookData:e,isLoading:r,error:i,state:()=>({isLoading:r(),error:i()}),subscribeToSymbol:u=>s.subscribeToSymbol(u),unsubscribeFromCurrent:()=>s.unsubscribeFromCurrent(),getCurrentSubscription:()=>s.getCurrentSubscription()}},sp=e=>{const t=parseFloat(e);return t>=1e3?t.toFixed(2).replace(/\.?0+$/,""):t>=100?t.toFixed(3).replace(/\.?0+$/,""):t>=1?t.toFixed(4).replace(/\.?0+$/,""):t>=.1?t.toFixed(5).replace(/\.?0+$/,""):t>=.01?t.toFixed(6).replace(/\.?0+$/,""):t.toFixed(8).replace(/\.?0+$/,"")},vg=e=>{const t=parseFloat(e);return t>=1e3?t.toFixed(2).replace(/\.?0+$/,""):t>=100?t.toFixed(3).replace(/\.?0+$/,""):t>=1?t.toFixed(4).replace(/\.?0+$/,""):t.toFixed(6).replace(/\.?0+$/,"")},mg=(e,t)=>{const r=parseFloat(e)*parseFloat(t);return r>=1e3?r.toFixed(2).replace(/\.?0+$/,""):r>=100?r.toFixed(3).replace(/\.?0+$/,""):r>=1?r.toFixed(4).replace(/\.?0+$/,""):r.toFixed(6).replace(/\.?0+$/,"")},xP=(e,t)=>{const r=[...e.map(([n,i])=>parseFloat(i)),...t.map(([n,i])=>parseFloat(i))];return Math.max(...r,0)},Km=(e,t)=>{if(t===0)return"0%";const r=parseFloat(e)/t*100;return`${Math.min(r,100)}%`},O0=(e,t)=>{const r=[...e].sort((i,o)=>{const s=parseFloat(i[0]),u=parseFloat(o[0]);return t==="bids"?u-s:s-u});let n=0;return r.map(([i,o])=>(n+=parseFloat(o),[i,o,n]))},wP=(e,t)=>{const r=e.length>0?Math.max(...e.map(([i,o,s])=>s)):0,n=t.length>0?Math.max(...t.map(([i,o,s])=>s)):0;return Math.max(r,n,0)},CP=(e,t)=>parseFloat(t)-parseFloat(e),_P=(e,t)=>t<=0?e:Math.floor(e/t)*t,qm=(e,t,r)=>{if(t===.01)return e;const n=new Map;return t===100&&(console.log(`=== Aggregating ${r} with tick size ${t} ===`),console.log("First 5 original orders:",e.slice(0,5))),e.forEach(([i,o])=>{const s=parseFloat(i),u=parseFloat(o),d=_P(s,t).toString();if(n.has(d)){const h=n.get(d);n.set(d,{quantity:h.quantity+u,orderCount:h.orderCount+1})}else n.set(d,{quantity:u,orderCount:1})}),Array.from(n.entries()).map(([i,o])=>[i,o.quantity.toString()]).sort((i,o)=>{const s=parseFloat(i[0]),u=parseFloat(o[0]);return r==="bids"?u-s:s-u})},Jm=e=>e>=1?e.toString():e.toFixed(2);var SP=Q("<div class=orderbook-ticker>"),kP=Q("<div class=orderbook-header><h3>");const TP=e=>(()=>{var t=kP(),r=t.firstChild;return F(r,()=>I("order_book",e.locale)),F(t,G(ze,{get when(){return e.currentSymbol},get children(){var n=SP();return F(n,()=>{var i;return(i=e.currentSymbol())==null?void 0:i.symbol}),n}}),null),t})();var EP=Q("<div><div class=orderbook-quantity-bar></div><span class=orderbook-quantity></span><span></span><span class=orderbook-amount>");const $g=e=>{const t=()=>e.depthVisualization==="cumulative"&&e.cumulativeQuantity!==void 0?Km(e.cumulativeQuantity.toString(),e.maxQuantity):Km(e.quantity,e.maxQuantity);return(()=>{var r=EP(),n=r.firstChild,i=n.nextSibling,o=i.nextSibling,s=o.nextSibling;return F(i,()=>e.formatQuantity(e.quantity)),F(o,()=>e.formatPrice(e.price)),F(s,()=>e.calculateAmount(e.price,e.quantity)),De(u=>{var d=`orderbook-order orderbook-${e.type} ${e.isSplitViewBid?"split-view-bid":""}`,h=t(),p=`orderbook-price ${e.type}-price`;return d!==u.e&&at(r,u.e=d),h!==u.t&&((u.t=h)!=null?n.style.setProperty("width",h):n.style.removeProperty("width")),p!==u.a&&at(o,u.a=p),u},{e:void 0,t:void 0,a:void 0}),r})()};var MP=Q("<div><div class=orderbook-orders>");const ey=e=>{const t=ir(()=>{const r=e.orderBookMaxRows,n=e.orders.slice(0,r);return e.depthVisualization==="cumulative"?O0(n,e.type):n.sort((i,o)=>parseFloat(o[0])-parseFloat(i[0])).map(([i,o])=>[i,o,0])});return(()=>{var r=MP(),n=r.firstChild;return F(n,G(mn,{get each(){return t()},children:([i,o,s])=>G($g,{price:i,quantity:o,get type(){return e.type==="bids"?"bid":"ask"},get maxQuantity(){return e.maxQuantity},cumulativeQuantity:s,get depthVisualization(){return e.depthVisualization},get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get calculateAmount(){return e.calculateAmount}})})),De(()=>at(r,`orderbook-${e.type}`)),r})()};var IP=Q("<div class=spread-info><span class=spread-value>"),LP=Q("<div class=orderbook-spread>");const PP=e=>(()=>{var t=LP();return F(t,G(ze,{get when(){return e.bestBid&&e.bestAsk},get children(){var r=IP(),n=r.firstChild;return F(n,()=>e.formatPrice(CP(e.bestBid,e.bestAsk).toString())),r}})),t})();var AP=Q("<div class=spread-selector-dropdown>"),DP=Q("<div class=spread-selector><div class=spread-selector-button><span class=spread-selector-value></span><span class=spread-selector-arrow>"),FP=Q("<div>");const RP=e=>{const[t,r]=be(!1),[n,i]=be({top:0,left:0});let o;const s=[.01,.1,1,10,100],u=p=>{e.onTickSizeChange(p),r(!1)},d=()=>{if(o){const p=o.getBoundingClientRect();i({top:p.bottom+2,left:p.left})}},h=()=>{t()||d(),r(!t())};return nt(()=>{if(t()){const p=()=>d(),g=m=>{o&&!o.contains(m.target)&&r(!1)};window.addEventListener("scroll",p,!0),window.addEventListener("resize",p),document.addEventListener("click",g),$r(()=>{window.removeEventListener("scroll",p,!0),window.removeEventListener("resize",p),document.removeEventListener("click",g)})}}),(()=>{var p=DP(),g=p.firstChild,m=g.firstChild,b=m.nextSibling;g.$$click=h;var x=o;return typeof x=="function"?hi(x,g):o=g,F(m,()=>Jm(e.selectedTickSize())),F(b,()=>t()?"":""),F(p,G(ze,{get when(){return t()},get children(){var C=AP();return F(C,G(mn,{each:s,children:_=>(()=>{var k=FP();return k.$$click=()=>u(_),F(k,()=>Jm(_)),De(()=>at(k,`spread-selector-option ${_===e.selectedTickSize()?"selected":""}`)),k})()})),De(_=>{var k=`${n().top}px`,M=`${n().left}px`;return k!==_.e&&((_.e=k)!=null?C.style.setProperty("top",k):C.style.removeProperty("top")),M!==_.t&&((_.t=M)!=null?C.style.setProperty("left",M):C.style.removeProperty("left")),_},{e:void 0,t:void 0}),C}}),null),p})()};jt(["click"]);var OP=Q('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=2 y=2 width=12 height=2 fill=#FF4444></rect><rect x=2 y=5 width=12 height=2 fill=#FF4444></rect><rect x=2 y=8 width=12 height=2 fill=#00C851></rect><rect x=2 y=11 width=12 height=2 fill=#00C851>'),NP=Q('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=2 y=2 width=12 height=2 fill=#FF4444></rect><rect x=2 y=5 width=12 height=2 fill=#FF4444></rect><rect x=2 y=8 width=12 height=2 fill=#FF4444></rect><rect x=2 y=11 width=12 height=2 fill=#FF4444>'),zP=Q('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=2 y=2 width=12 height=2 fill=#00C851></rect><rect x=2 y=5 width=12 height=2 fill=#00C851></rect><rect x=2 y=8 width=12 height=2 fill=#00C851></rect><rect x=2 y=11 width=12 height=2 fill=#00C851>'),BP=Q('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=1 y=2 width=7.5 height=2 fill=#00C851></rect><rect x=1 y=5 width=7.5 height=2 fill=#00C851></rect><rect x=1 y=8 width=7.5 height=2 fill=#00C851></rect><rect x=1 y=11 width=7.5 height=2 fill=#00C851></rect><rect x=9.5 y=2 width=7.5 height=2 fill=#FF4444></rect><rect x=9.5 y=5 width=7.5 height=2 fill=#FF4444></rect><rect x=9.5 y=8 width=7.5 height=2 fill=#FF4444></rect><rect x=9.5 y=11 width=7.5 height=2 fill=#FF4444>'),$P=Q('<div class=view-selector><div title="Combined View"></div><div title="Asks Only"></div><div title="Bids Only"></div><div title="Split View">');const VP=e=>{const t=n=>{e.onViewChange(n)},r=n=>{switch(n){case"combined":return OP();case"asks-only":return NP();case"bids-only":return zP();case"split-view":return BP()}};return(()=>{var n=$P(),i=n.firstChild,o=i.nextSibling,s=o.nextSibling,u=s.nextSibling;return i.$$click=()=>t("combined"),F(i,()=>r("combined")),o.$$click=()=>t("asks-only"),F(o,()=>r("asks-only")),s.$$click=()=>t("bids-only"),F(s,()=>r("bids-only")),u.$$click=()=>t("split-view"),F(u,()=>r("split-view")),De(d=>{var h=`view-selector-option ${e.selectedView()==="combined"?"active":""}`,p=`view-selector-option ${e.selectedView()==="asks-only"?"active":""}`,g=`view-selector-option ${e.selectedView()==="bids-only"?"active":""}`,m=`view-selector-option ${e.selectedView()==="split-view"?"active":""}`;return h!==d.e&&at(i,d.e=h),p!==d.t&&at(o,d.t=p),g!==d.a&&at(s,d.a=g),m!==d.o&&at(u,d.o=m),d},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()};jt(["click"]);var WP=Q("<div class=depth-viz-dropdown>"),UP=Q('<div class=depth-visualization-selector><button class=depth-viz-dropdown-trigger type=button><span class=depth-viz-selected></span><svg width=12 height=12 viewBox="0 0 12 12"fill=none><path d="M3 4.5L6 7.5L9 4.5"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>'),HP=Q("<div><div class=depth-viz-option-label></div><div class=depth-viz-option-description>");const YP=e=>{const[t,r]=be(!1),[n,i]=be({top:0,left:0});let o;const s=g=>{e.onDepthVisualizationChange(g),r(!1)},u=()=>{if(o){const g=o.getBoundingClientRect();i({top:g.bottom+4,left:g.left})}},d=()=>{t()||u(),r(!t())};nt(()=>{if(t()){const g=()=>u(),m=b=>{o&&!o.contains(b.target)&&r(!1)};window.addEventListener("scroll",g,!0),window.addEventListener("resize",g),document.addEventListener("click",m),$r(()=>{window.removeEventListener("scroll",g,!0),window.removeEventListener("resize",g),document.removeEventListener("click",m)})}});const h=g=>{switch(g){case"amount":return I("order_book_amount_mode",e.locale);case"cumulative":return I("order_book_cumulative_mode",e.locale)}},p=[{value:"amount",label:I("order_book_amount_mode",e.locale),description:I("order_book_amount_description",e.locale)},{value:"cumulative",label:I("order_book_cumulative_mode",e.locale),description:I("order_book_cumulative_description",e.locale)}];return(()=>{var g=UP(),m=g.firstChild,b=m.firstChild,x=b.nextSibling;m.$$click=d;var C=o;return typeof C=="function"?hi(C,m):o=m,F(b,()=>h(e.selectedDepthVisualization())),F(g,G(ze,{get when(){return t()},get children(){var _=WP();return F(_,()=>p.map(k=>(()=>{var M=HP(),L=M.firstChild,A=L.nextSibling;return M.$$click=()=>s(k.value),F(L,()=>k.label),F(A,()=>k.description),De(()=>at(M,`depth-viz-option ${e.selectedDepthVisualization()===k.value?"selected":""}`)),M})())),De(k=>{var M=`${n().top}px`,L=`${n().left}px`;return M!==k.e&&((k.e=M)!=null?_.style.setProperty("top",M):_.style.removeProperty("top")),L!==k.t&&((k.t=L)!=null?_.style.setProperty("left",L):_.style.removeProperty("left")),k},{e:void 0,t:void 0}),_}}),null),De(()=>We(x,"class",`depth-viz-arrow ${t()?"open":""}`)),g})()};jt(["click"]);var XP=Q('<div class=split-view-layout><div class="split-view-side split-view-bids"><div class=split-view-header><span class=split-view-title></span><div class=split-view-column-headers><span class=split-view-size-header></span><span class=split-view-price-header></span><span class=split-view-amount-header></span></div></div><div class=split-view-orders></div></div><div class=split-view-divider></div><div class="split-view-side split-view-asks"><div class=split-view-header><span class=split-view-title></span><div class=split-view-column-headers><span class=split-view-size-header></span><span class=split-view-price-header></span><span class=split-view-amount-header></span></div></div><div class=split-view-orders>');const jP=e=>{const t=ir(()=>{const n=e.bidsOrders.slice(0,e.orderBookMaxRows);return e.depthVisualization==="cumulative"?O0(n,"bids"):n.sort((i,o)=>parseFloat(o[0])-parseFloat(i[0])).map(([i,o])=>[i,o,0])}),r=ir(()=>{const n=e.asksOrders.slice(0,e.orderBookMaxRows);return e.depthVisualization==="cumulative"?O0(n,"asks"):n.sort((i,o)=>parseFloat(i[0])-parseFloat(o[0])).map(([i,o])=>[i,o,0])});return(()=>{var n=XP(),i=n.firstChild,o=i.firstChild,s=o.firstChild,u=s.nextSibling,d=u.firstChild,h=d.nextSibling,p=h.nextSibling,g=o.nextSibling,m=i.nextSibling,b=m.nextSibling,x=b.firstChild,C=x.firstChild,_=C.nextSibling,k=_.firstChild,M=k.nextSibling,L=M.nextSibling,A=x.nextSibling;return F(s,()=>I("order_book_bids",e.locale)),F(d,()=>I("order_book_size",e.locale)),F(h,()=>I("order_book_price",e.locale)),F(p,()=>I("order_book_amount",e.locale)),F(g,G(mn,{get each(){return t()},children:([P,$,R])=>G($g,{price:P,quantity:$,type:"bid",get maxQuantity(){return e.maxQuantity},cumulativeQuantity:R,get depthVisualization(){return e.depthVisualization},get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get calculateAmount(){return e.calculateAmount},isSplitViewBid:!0})})),F(C,()=>I("order_book_asks",e.locale)),F(k,()=>I("order_book_size",e.locale)),F(M,()=>I("order_book_price",e.locale)),F(L,()=>I("order_book_amount",e.locale)),F(A,G(mn,{get each(){return r()},children:([P,$,R])=>G($g,{price:P,quantity:$,type:"ask",get maxQuantity(){return e.maxQuantity},cumulativeQuantity:R,get depthVisualization(){return e.depthVisualization},get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get calculateAmount(){return e.calculateAmount}})})),n})()};var ZP=Q("<div class=orderbook-empty><p>"),GP=Q("<div class=orderbook-loading><p>"),QP=Q("<div class=orderbook-error><p>"),KP=Q("<div class=orderbook-section-header><span class=orderbook-size-header></span><span class=orderbook-price-header></span><span class=orderbook-amount-header>");const qP=e=>(()=>{var t=ZP(),r=t.firstChild;return F(r,()=>I("order_book_select_symbol",e.locale)),t})(),JP=e=>(()=>{var t=GP(),r=t.firstChild;return F(r,()=>I("order_book_loading",e.locale)),t})(),eA=e=>(()=>{var t=QP(),r=t.firstChild;return F(r,()=>e.error),t})(),tA=e=>(()=>{var t=KP(),r=t.firstChild,n=r.nextSibling,i=n.nextSibling;return F(r,()=>I("order_book_size",e.locale)),F(n,()=>I("order_book_price",e.locale)),F(i,()=>I("order_book_amount",e.locale)),t})();var rA=Q("<div class=orderbook-controls><div class=orderbook-controls-left></div><div class=orderbook-controls-right>"),nA=Q("<div class=orderbook-orderbook>"),iA=Q("<div class=chartspire-ui-orderbook>");const oA=e=>{const{orderBookData:t,isLoading:r,error:n,subscribeToSymbol:i}=bP(),[o,s]=be(.01),[u,d]=be("combined"),[h,p]=be(e.orderBookDepthVisualization||"amount"),g=()=>{const C=h();return C!="amount"&&C!="cumulative"?(console.error("Invalid order book depth visualization mode: ",C," defaulting to amount"),"amount"):C};nt(()=>{const C=e.currentSymbol();C&&i(C)});const m=ir(()=>{const C=t();if(!C)return null;const _=o();return{bids:qm(C.bids,_,"bids"),asks:qm(C.asks,_,"asks")}}),b=ir(()=>{const C=m();if(!C)return 0;if(g()==="cumulative"){const _=O0(C.bids,"bids"),k=O0(C.asks,"asks");return wP(_,k)}else return xP(C.bids,C.asks)}),x=ir(()=>{var C,_;const k=m();return!k||!k.bids.length||!k.asks.length?{bestBid:void 0,bestAsk:void 0}:{bestBid:(C=k.bids[0])==null?void 0:C[0],bestAsk:(_=k.asks[0])==null?void 0:_[0]}});return(()=>{var C=iA();return F(C,G(TP,{get currentSymbol(){return e.currentSymbol},get locale(){return e.locale}}),null),F(C,G(ze,{get when(){return e.currentSymbol()},get children(){return[(()=>{var _=rA(),k=_.firstChild,M=k.nextSibling;return F(k,G(VP,{selectedView:u,onViewChange:d})),F(M,G(RP,{selectedTickSize:o,onTickSizeChange:s}),null),F(M,G(YP,{selectedDepthVisualization:h,onDepthVisualizationChange:p,get locale(){return e.locale}}),null),_})(),G(tA,{get locale(){return e.locale}})]}}),null),F(C,G(ze,{get when(){return!e.currentSymbol},get children(){return G(qP,{get locale(){return e.locale}})}}),null),F(C,G(ze,{get when(){return r()},get children(){return G(JP,{get locale(){return e.locale}})}}),null),F(C,G(ze,{get when(){return n()},get children(){return G(eA,{get error(){return n()}})}}),null),F(C,G(ze,{get when(){return!r()&&!n()&&m()&&e.currentSymbol},get children(){var _=nA();return F(_,G(ze,{get when(){return u()==="combined"||u()==="asks-only"||u()==="bids-only"},get children(){return[G(ze,{get when(){return u()==="combined"||u()==="asks-only"},get children(){return G(ey,{get orders(){var k;return((k=m())==null?void 0:k.asks)||[]},type:"asks",get maxQuantity(){return b()},get orderBookMaxRows(){return e.orderBookMaxRows},get depthVisualization(){return g()},formatPrice:sp,formatQuantity:vg,calculateAmount:mg})}}),G(ze,{get when(){return u()==="combined"},get children(){return G(PP,{get bestBid(){return x().bestBid},get bestAsk(){return x().bestAsk},formatPrice:sp})}}),G(ze,{get when(){return u()==="combined"||u()==="bids-only"},get children(){return G(ey,{get orders(){var k;return((k=m())==null?void 0:k.bids)||[]},type:"bids",get maxQuantity(){return b()},get orderBookMaxRows(){return e.orderBookMaxRows},get depthVisualization(){return g()},formatPrice:sp,formatQuantity:vg,calculateAmount:mg})}})]}}),null),F(_,G(ze,{get when(){return u()==="split-view"},get children(){return G(jP,{get bidsOrders(){var k;return((k=m())==null?void 0:k.bids)||[]},get asksOrders(){var k;return((k=m())==null?void 0:k.asks)||[]},get maxQuantity(){return b()},get orderBookMaxRows(){return e.orderBookMaxRows},get depthVisualization(){return g()},formatPrice:sp,formatQuantity:vg,calculateAmount:mg,get locale(){return e.locale}})}}),null),_}}),null),C})()};class aA{constructor(t,r,n,i){xe(this,"currentSubscription",null),xe(this,"uuid"),xe(this,"setTradeData"),xe(this,"setIsLoading"),xe(this,"setError"),xe(this,"getTradeData"),xe(this,"maxTrades",100),this.uuid=Math.random().toString(36).slice(2,11),this.setTradeData=t,this.setIsLoading=r,this.setError=n,this.getTradeData=i}subscribeToSymbol(t){const r={symbol:t.symbol,exchange:t.exchange,name:t.name,shortName:t.shortName,market:t.market,type:t.type};(!this.currentSubscription||this.currentSubscription.symbol!==r.symbol||this.currentSubscription.exchange!==r.exchange)&&(this.currentSubscription&&this.unsubscribeFromSymbol(this.currentSubscription),this.setTradeData(null),this.performSubscription(t),this.currentSubscription=r)}unsubscribeFromCurrent(){this.currentSubscription&&(this.unsubscribeFromSymbol(this.currentSubscription),this.currentSubscription=null)}performSubscription(t){var r;this.setIsLoading(!0),this.setError(null);const n=Br.getInstance().getDataFeed();if(n){const i=o=>{const s=this.getTradeData();if(s&&s.symbol===o.symbol){const u={trades:[...s.trades,...o.trades].sort((d,h)=>h.timestamp-d.timestamp).slice(0,this.maxTrades),symbol:o.symbol,exchange:o.exchange,lastUpdated:o.lastUpdated};this.setTradeData(u)}else this.setTradeData(o);this.setIsLoading(!1)};(r=n.subscribeTradeData)==null||r.call(n,t,i,this.uuid)}else this.setError("Data feed not available for this symbol type"),this.setIsLoading(!1)}unsubscribeFromSymbol(t){var r;const n=Br.getInstance().getDataFeed();n&&((r=n.unsubscribeTradeData)==null||r.call(n,t,this.uuid))}getCurrentSubscription(){return this.currentSubscription}}const sA=()=>{const[e,t]=be(null),[r,n]=be(!1),[i,o]=be(null),s=new aA(t,n,o,e);return $r(()=>{s.unsubscribeFromCurrent()}),{tradeData:e,isLoading:r,error:i,state:()=>({isLoading:r(),error:i()}),subscribeToSymbol:u=>s.subscribeToSymbol(u),unsubscribeFromCurrent:()=>s.unsubscribeFromCurrent(),getCurrentSubscription:()=>s.getCurrentSubscription()}},lA=(e,t="24h")=>{const r=new Date(e);return t==="12h"?r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},cA=(e,t=2)=>{const r=parseFloat(e);return isNaN(r)?e:r.toFixed(t)},uA=(e,t=4)=>{const r=parseFloat(e);return isNaN(r)?e:r<.001?r.toFixed(8):r<1?r.toFixed(6):r.toFixed(t)},dA=e=>e==="buy"?"trade-buy":"trade-sell";var hA=Q("<div class=trades-ticker>"),pA=Q("<div class=trades-header><h3>");const fA=e=>(()=>{var t=pA(),r=t.firstChild;return F(r,()=>I("trades",e.locale)),F(t,G(ze,{get when(){return e.currentSymbol},get children(){var n=hA();return F(n,()=>{var i;return(i=e.currentSymbol())==null?void 0:i.symbol}),n}}),null),t})();var gA=Q("<div><div class=trade-amount-bar></div><div class=trade-time></div><div class=trade-price></div><div class=trade-quantity>");const vA=e=>{const t=()=>e.trade,r=()=>parseFloat(t().price)*parseFloat(t().quantity),n=()=>{const i=r();return`${Math.min(i/1e4*100,100)}%`};return(()=>{var i=gA(),o=i.firstChild,s=o.nextSibling,u=s.nextSibling,d=u.nextSibling;return F(s,()=>e.formatTime(t().timestamp)),F(u,()=>e.formatPrice(t().price)),F(d,()=>e.formatQuantity(t().quantity)),De(h=>{var p=`trade-row ${dA(t().side)}`,g=n();return p!==h.e&&at(i,h.e=p),g!==h.t&&((h.t=g)!=null?o.style.setProperty("width",g):o.style.removeProperty("width")),h},{e:void 0,t:void 0}),i})()};var mA=Q("<div class=trades-list><div class=trades-list-header><div class=header-time></div><div class=header-price></div><div class=header-quantity></div></div><div class=trades-list-body>");const yA=e=>{const t=()=>[...e.trades||[]].sort((r,n)=>n.timestamp-r.timestamp).slice(0,e.maxRows);return(()=>{var r=mA(),n=r.firstChild,i=n.firstChild,o=i.nextSibling,s=o.nextSibling,u=n.nextSibling;return F(i,()=>I("trade_time",e.locale)),F(o,()=>I("trade_price",e.locale)),F(s,()=>I("trade_quantity",e.locale)),F(u,G(mn,{get each(){return t()},children:d=>G(vA,{trade:d,get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get formatTime(){return e.formatTime},get timeFormat(){return e.timeFormat}})})),r})()};var bA=Q("<div class=time-format-selector><div class=format-toggle><button>24h</button><button>12h");const xA=e=>{const t=r=>{e.onTimeFormatChange(r)};return(()=>{var r=bA(),n=r.firstChild,i=n.firstChild,o=i.nextSibling;return i.$$click=()=>t("24h"),o.$$click=()=>t("12h"),De(s=>{var u=`format-option ${e.selectedTimeFormat()==="24h"?"active":""}`,d=I("time_format_24h",e.locale),h=`format-option ${e.selectedTimeFormat()==="12h"?"active":""}`,p=I("time_format_12h",e.locale);return u!==s.e&&at(i,s.e=u),d!==s.t&&We(i,"title",s.t=d),h!==s.a&&at(o,s.a=h),p!==s.o&&We(o,"title",s.o=p),s},{e:void 0,t:void 0,a:void 0,o:void 0}),r})()};jt(["click"]);var wA=Q('<div class="trades-state-view empty-state"><div class=state-content><div class=state-icon></div><div class=state-message>'),CA=Q('<div class="trades-state-view loading-state"><div class=state-content><div class=loading-spinner></div><div class=state-message>'),_A=Q('<div class="trades-state-view error-state"><div class=state-content><div class=state-icon></div><div class=state-message></div><div class=state-detail>');const SA=e=>(()=>{var t=wA(),r=t.firstChild,n=r.firstChild,i=n.nextSibling;return F(i,()=>I("no_trades_available",e.locale||"en-US")),t})(),kA=e=>(()=>{var t=CA(),r=t.firstChild,n=r.firstChild,i=n.nextSibling;return F(i,()=>I("loading_trades",e.locale||"en-US")),t})(),TA=e=>(()=>{var t=_A(),r=t.firstChild,n=r.firstChild,i=n.nextSibling,o=i.nextSibling;return F(i,()=>I("trades_error",e.locale||"en-US")),F(o,()=>e.error),t})();var EA=Q("<div class=trades-controls><div class=trades-controls-right>"),MA=Q("<div class=chartspire-ui-trades>");const IA=e=>{const{tradeData:t,isLoading:r,error:n,subscribeToSymbol:i}=sA(),[o,s]=be(e.timeFormat||"24h");nt(()=>{const p=e.currentSymbol();p&&i(p)});const u=ir(()=>{const p=e.currentSymbol(),g=(p==null?void 0:p.pricePrecision)??2;return m=>cA(m,g)}),d=ir(()=>{const p=e.currentSymbol(),g=(p==null?void 0:p.volumePrecision)??4;return m=>uA(m,g)}),h=ir(()=>{const p=o();return g=>lA(g,p)});return(()=>{var p=MA();return F(p,G(fA,{get currentSymbol(){return e.currentSymbol},get locale(){return e.locale}}),null),F(p,G(ze,{get when(){return e.currentSymbol()},get children(){var g=EA(),m=g.firstChild;return F(m,G(xA,{selectedTimeFormat:o,onTimeFormatChange:s,get locale(){return e.locale}})),g}}),null),F(p,G(ze,{get when(){return!e.currentSymbol()},get children(){return G(SA,{get locale(){return e.locale}})}}),null),F(p,G(ze,{get when(){return r()},get children(){return G(kA,{get locale(){return e.locale}})}}),null),F(p,G(ze,{get when(){return n()},get children(){return G(TA,{get error(){return n()},get locale(){return e.locale}})}}),null),F(p,G(ze,{get when(){return Ae(()=>!!(!r()&&!n()&&e.currentSymbol()))()&&t()},get children(){return G(yA,{get trades(){var g;return((g=t())==null?void 0:g.trades)||[]},get maxRows(){return e.tradesMaxRows},get timeFormat(){return o()},get locale(){return e.locale},get formatPrice(){return u()},get formatQuantity(){return d()},get formatTime(){return h()}})}}),null),p})()};var LA=Q('<button type=button><svg viewBox="0 0 24 24"width=20 height=20><path d="M15 18L9 12L15 6"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round fill=none>');const vv=e=>{const t=e.startingDirection||"left",r=()=>t==="left"?e.isExpanded?"rotate(0deg)":"rotate(180deg)":e.isExpanded?"rotate(180deg)":"rotate(0deg)";return(()=>{var n=LA(),i=n.firstChild;return Wi(n,"click",e.onClick),i.style.setProperty("transition","transform 0.2s ease-in-out"),i.style.setProperty("min-width","20px"),i.style.setProperty("min-height","20px"),De(o=>{var s=e.className||"",u={background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex","align-items":"center","justify-content":"center",...typeof e.style=="object"?e.style:{}},d=e.ariaLabel||(e.isExpanded?"Collapse":"Expand"),h=`toggle-icon ${e.isExpanded?"":"collapsed"}`,p=r();return s!==o.e&&at(n,o.e=s),o.t=Tn(n,u,o.t),d!==o.a&&We(n,"aria-label",o.a=d),h!==o.o&&We(i,"class",o.o=h),p!==o.i&&((o.i=p)!=null?i.style.setProperty("transform",p):i.style.removeProperty("transform")),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),n})()};jt(["click"]);var PA=Q("<div>"),AA=Q("<div class=dropdown-item-icon>"),DA=Q("<span>"),FA=Q("<div><span>");const x5=e=>{const[t,r]=be({top:0,left:0,right:"auto"}),n=()=>{const h=document.querySelectorAll('[class*="chartspire"]');for(let p of h){const g=getComputedStyle(p).getPropertyValue("--chartspire-ui-font-family");if(g&&g.trim())return g.trim()}return'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},i=(h,p,g)=>{const m=e.placement||"bottom",b=e.offset||8,x=e.maxHeight||300,C=e.minWidth||180;let _=m==="bottom"?h.bottom+b:h.top-b-x;m==="bottom"&&_+x>g?_=h.top-b-x:m==="top"&&_<0&&(_=h.bottom+b);let k=h.left;return k+C>p&&(k=h.right-C),k<16&&(k=16),{top:_,left:k}},o=(h,p,g)=>{const m=e.placement||"bottom",b=e.offset||8,x=e.maxHeight||300,C=Math.max(e.minWidth||180,200);let _;m==="top"?_=Math.max(8,h.top-x-b):(_=h.bottom+b,_+x>g&&(_=Math.max(8,h.top-x-b)));const k=Math.max(16,Math.min((p-C)/2,p-C-16));return{top:_,left:k}},s=()=>{if(!e.triggerRef){r({top:100,left:16,right:"auto"});return}const h=e.triggerRef.getBoundingClientRect(),p=window.innerWidth,g=window.innerHeight,m=p<=768,{top:b,left:x}=m?o(h,p,g):i(h,p,g),C=Math.max(8,Math.min(b,g-100)),_=Math.max(e.minWidth||180,m?200:180),k=Math.max(16,Math.min(x,p-_-16));r({top:C,left:k,right:"auto"})},u=h=>{if(e.triggerRef&&!e.triggerRef.contains(h.target)){const p=document.querySelector(".chartspire-dropdown-portal");(!p||!p.contains(h.target))&&e.onClose()}},d=h=>{e.onSelect(h),e.onClose()};return ki(()=>{document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),window.addEventListener("resize",s),window.addEventListener("orientationchange",s),s()}),$r(()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u),window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}),G(ze,{get when(){return e.isOpen},get children(){return G(tv,{get children(){var h=PA();return h.style.setProperty("position","fixed"),h.style.setProperty("background","var(--chartspire-ui-background-color)"),h.style.setProperty("border","1px solid var(--chartspire-ui-border-color)"),h.style.setProperty("border-radius","8px"),h.style.setProperty("box-shadow","0 8px 32px rgba(0, 0, 0, 0.2), 0 4px 16px rgba(0, 0, 0, 0.1)"),h.style.setProperty("backdrop-filter","blur(12px)"),h.style.setProperty("z-index","10000"),h.style.setProperty("overflow-y","auto"),h.style.setProperty("animation","dropdown-fade-in 0.15s ease-out"),F(h,G(mn,{get each(){return e.options},children:p=>(()=>{var g=FA(),m=g.firstChild;return g.$$mouseout=b=>{if(p.key!==e.selectedKey){b.currentTarget.style.background="transparent",b.currentTarget.style.color="var(--chartspire-ui-text-color)",b.currentTarget.style.transform="translateY(0)";const x=b.currentTarget.querySelector(".dropdown-item-icon");x&&(x.style.fill="var(--chartspire-ui-text-color)",x.style.stroke="var(--chartspire-ui-text-color)")}},g.$$mouseover=b=>{if(p.key!==e.selectedKey){b.currentTarget.style.background="linear-gradient(135deg, var(--chartspire-ui-hover-background-color) 0%, rgba(255, 255, 255, 0.05) 100%)",b.currentTarget.style.color="var(--chartspire-ui-primary-color)",b.currentTarget.style.transform="translateY(-1px)";const x=b.currentTarget.querySelector(".dropdown-item-icon");x&&(x.style.fill="var(--chartspire-ui-primary-color)",x.style.stroke="var(--chartspire-ui-primary-color)")}},g.$$click=()=>d(p),g.style.setProperty("padding","8px 12px"),g.style.setProperty("cursor","pointer"),g.style.setProperty("font-size","12px"),g.style.setProperty("color","var(--chartspire-ui-text-color)"),g.style.setProperty("transition","all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"),g.style.setProperty("border-bottom","1px solid rgba(255, 255, 255, 0.05)"),g.style.setProperty("position","relative"),g.style.setProperty("display","flex"),g.style.setProperty("align-items","center"),F(g,G(ze,{get when(){return p.icon},get children(){var b=AA();return b.style.setProperty("width","20px"),b.style.setProperty("height","20px"),b.style.setProperty("display","flex"),b.style.setProperty("align-items","center"),b.style.setProperty("justify-content","center"),b.style.setProperty("flex-shrink","0"),b.style.setProperty("transition","all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"),De(x=>{var C=p.icon,_=p.key===e.selectedKey?"var(--chartspire-ui-primary-color)":"var(--chartspire-ui-text-color)",k=p.key===e.selectedKey?"var(--chartspire-ui-primary-color)":"var(--chartspire-ui-text-color)";return C!==x.e&&(b.innerHTML=x.e=C),_!==x.t&&((x.t=_)!=null?b.style.setProperty("fill",_):b.style.removeProperty("fill")),k!==x.a&&((x.a=k)!=null?b.style.setProperty("stroke",k):b.style.removeProperty("stroke")),x},{e:void 0,t:void 0,a:void 0}),b}}),m),m.style.setProperty("flex","1"),F(m,()=>p.text),F(g,G(ze,{get when(){return p.key===e.selectedKey},get children(){var b=DA();return b.style.setProperty("font-size","10px"),b.style.setProperty("color","var(--chartspire-ui-primary-color)"),b.style.setProperty("margin-left","auto"),b}}),null),De(b=>{var x=`dropdown-item ${p.key===e.selectedKey?"selected":""}`,C=p.key===e.selectedKey?"600":"500",_=p.key===e.selectedKey?"linear-gradient(135deg, var(--chartspire-ui-selected-color) 0%, var(--chartspire-ui-hover-background-color) 100%)":"transparent",k=p.icon?"10px":"0";return x!==b.e&&at(g,b.e=x),C!==b.t&&((b.t=C)!=null?g.style.setProperty("font-weight",C):g.style.removeProperty("font-weight")),_!==b.a&&((b.a=_)!=null?g.style.setProperty("background",_):g.style.removeProperty("background")),k!==b.o&&((b.o=k)!=null?g.style.setProperty("gap",k):g.style.removeProperty("gap")),b},{e:void 0,t:void 0,a:void 0,o:void 0}),g})()})),De(p=>{var g=`chartspire-dropdown-portal ${e.className||""}`,m=`${t().top}px`,b=`${t().left}px`,x=t().right,C=`${window.innerWidth<=768?Math.max(e.minWidth||180,200):e.minWidth||180}px`,_=`${e.maxHeight||300}px`,k=n();return g!==p.e&&at(h,p.e=g),m!==p.t&&((p.t=m)!=null?h.style.setProperty("top",m):h.style.removeProperty("top")),b!==p.a&&((p.a=b)!=null?h.style.setProperty("left",b):h.style.removeProperty("left")),x!==p.o&&((p.o=x)!=null?h.style.setProperty("right",x):h.style.removeProperty("right")),C!==p.i&&((p.i=C)!=null?h.style.setProperty("min-width",C):h.style.removeProperty("min-width")),_!==p.n&&((p.n=_)!=null?h.style.setProperty("max-height",_):h.style.removeProperty("max-height")),k!==p.s&&((p.s=k)!=null?h.style.setProperty("font-family",k):h.style.removeProperty("font-family")),p},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),h}})}})};jt(["click","mouseover","mouseout"]);var ci=(e=>(e.ONE_X="1x",e.TWO_X="0.5x",e.THREE_X="0.3x",e.FIVE_X="0.2x",e.TEN_X="0.1x",e))(ci||{});function RA(e,t){switch(e){case ci.ONE_X:return I("1 upd per 1 sec",t);case ci.TWO_X:return I("1 upd per 2 sec",t);case ci.THREE_X:return I("1 upd per 3 sec",t);case ci.FIVE_X:return I("1 upd per 5 sec",t);case ci.TEN_X:return I("1 upd per 10 sec",t)}return e}function OA(e){return[{key:ci.ONE_X,text:I("1 upd per 1 sec",e)},{key:ci.TWO_X,text:I("1 upd per 2 sec",e)},{key:ci.THREE_X,text:I("1 upd per 3 sec",e)},{key:ci.FIVE_X,text:I("1 upd per 5 sec",e)},{key:ci.TEN_X,text:I("1 upd per 10 sec",e)}]}function NA(e){const t={[ci.ONE_X]:1e3,[ci.TWO_X]:2e3,[ci.THREE_X]:3e3,[ci.FIVE_X]:5e3,[ci.TEN_X]:1e4};return e in t?t[e]:(console.error(`Invalid replay speed key: ${e}`),0)}var zA=Q("<div class=chartspire-ui-alert-container><div class=alert><div class=messagebox><p>");function BA(e){const t="Select starting candle by clicking on candle";return(()=>{var r=zA(),n=r.firstChild,i=n.firstChild,o=i.firstChild;return F(o,()=>e.message!==""?e.message:t),r})()}const $A=e=>{const[t,r]=be(e.replaySpeed),n=ir(()=>OA(e.locale)),i=`Replay ${e.chartId}`,o=()=>{e.replayCandle!=null&&(e.onPause!=null&&e.onPause(!1),e.onPlay!=null&&(e.onPlay(!0),e.setReplaySpeed(t())))},s=()=>{e.onPause!=null&&e.onPause(!0),e.onPlay!=null&&e.onPlay(!1)},u=()=>{e.onClose!=null&&e.onClose(),console.warn("handle close: replay closed")},d=()=>{e.skipReplay!=null&&e.skipReplay(!0)};return nt(()=>{e.setReplaySpeed(t())}),G(ze,{get when(){return e.isActive},get children(){return G(ze,{get when(){return e.replayModalVisible},get children(){return[G(ze,{get when(){return e.isAlertVisible},get children(){return G(BA,{get message(){return e.alertMessage}})}}),G(ZE,{title:i,width:380,onClose:u,get isPLaying(){return e.isPlaying},get buttons(){return[e.isPlaying()?{children:"Pause",onClick:()=>{s()}}:{children:"Play",onClick:()=>{o()}},{children:">>",onClick:()=>{d()}}]},get children(){return G(Xp,{style:{width:"100%"},get value(){return t().key},onSelected:h=>{r(h)},get dataSource(){return n()}})}})]}})}})};var VA=Q('<svg viewBox="0 0 1024 1024"class=icon stroke-width=10><path d="M512 0L627.2 384H1024L748.8 640L864 1024L512 768L160 1024L275.2 640L0 384H396.8L512 0z">'),WA=Q("<div class=indicator-item><li class=row>"),ty=Q("<li class=title>");const UA=e=>(()=>{var t=VA();return Wi(t,"click",e.onClick),De(r=>{var n=e.selected?"yellow":"none",i=e.selected?"yellow":"#76808F";return n!==r.e&&We(t,"fill",r.e=n),i!==r.t&&We(t,"stroke",r.t=i),r},{e:void 0,t:void 0}),t})(),HA=e=>(()=>{var t=WA(),r=t.firstChild;return F(t,G(UA,{get selected(){return e.isSelected},get onClick(){return e.onStarClick}}),r),Wi(r,"click",e.onClick),F(r,G(ME,{get checked(){return e.isChecked},get label(){return I(e.name.toLowerCase(),e.locale)}})),t})(),YA=e=>{const[t,r]=be(""),n=()=>{const g=t().toLowerCase();return[...Lm().map(m=>m.name)].filter(m=>I(m.toLowerCase(),e.locale).toLowerCase().includes(g)).sort((m,b)=>{const x=I(m.toLowerCase(),e.locale).toLowerCase(),C=I(b.toLowerCase(),e.locale).toLowerCase();return x.localeCompare(C)})},i=localStorage.getItem("chartspire-favIndicators"),o=i?JSON.parse(i):[],[s,u]=be(o),d=()=>s().filter(g=>e.mainIndicators().includes(g)||g in e.subIndicators()||[...Lm().map(m=>m.name)].includes(g)).sort((g,m)=>{const b=I(g.toLowerCase(),e.locale).toLowerCase(),x=I(m.toLowerCase(),e.locale).toLowerCase();return b.localeCompare(x)}),h=g=>{u(m=>{const b=m.includes(g),x=b?m.filter(C=>C!==g):[...m,g];return e.mainIndicators().includes(g)?e.onMainIndicatorChange({name:g,paneId:"candle_pane",added:!b}):g in e.subIndicators()&&(e.subIndicators()[g]||e.onSubIndicatorChange({name:g,paneId:e.subIndicators()[g]??"",added:!b})),localStorage.setItem("chartspire-favIndicators",JSON.stringify(x)),x})},p=g=>{const m=e.mainIndicators().includes(g),b=g in e.subIndicators(),x=m||b,C=d().includes(g);return G(HA,{name:g,isSelected:C,isChecked:x,onClick:()=>{m?e.onMainIndicatorChange({name:g,paneId:"candle_pane",added:!x}):b?e.onSubIndicatorChange({name:g,paneId:e.subIndicators()[g]??"",added:!x}):Mp.includes(g)?e.onMainIndicatorChange({name:g,paneId:"candle_pane",added:!x}):A0.includes(g)&&e.onSubIndicatorChange({name:g,paneId:e.subIndicators()[g]??"",added:!x})},onStarClick:()=>h(g),get locale(){return e.locale}})};return G(Rl,{get title(){return I("indicator",e.locale)},width:600,contentHeight:"90%",get onClose(){return e.onClose},get children(){return[G(Wa,{style:{width:"100%"},get value(){return t()},onInput:g=>r(g.target.value)}),G(B2,{class:"chartspire-ui-indicator-modal-list",get children(){return[Ae(()=>Ae(()=>d().length>0)()&&(()=>{var g=ty();return F(g,()=>I("favourites",e.locale)),g})()),Ae(()=>d().map(p)),(()=>{var g=ty();return F(g,()=>I("Indicators",e.locale)),g})(),Ae(()=>n().map(p))]}})]}})};jt(["click"]);const XA=e=>(e.widget==null&&console.error("widget is null"),G(ze,{get when(){return e.indicatorModalVisible},get children(){return G(YA,{get locale(){return e.locale},get mainIndicators(){return e.mainIndicators},get subIndicators(){return e.subIndicators},onClose:()=>{e.setIndicatorModalVisible(!1)},onMainIndicatorChange:t=>{var r;const n=[...e.mainIndicators()];t.added?(e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()&&Wg(e.widget,t.name,!0,!0,{id:"candle_pane"}),n.push(t.name)):((r=e.widget)==null||r.removeIndicator({paneId:"candle_pane",name:t.name}),n.splice(n.indexOf(t.name),1),e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()&&mt.getInstance(e.widget).saveIndicators()),e.setMainIndicators(n)},onSubIndicatorChange:t=>{var r;const n={...e.subIndicators()};if(t.added){const i=Wg(e.widget,t.name,!0);i&&(n[t.name]=i)}else e.subIndicators()[t.name]&&((r=e.widget)==null||r.removeIndicator({name:t.name})),delete n[t.name],e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()&&mt.getInstance(e.widget).saveIndicators();e.setSubIndicators(n)}})}}));var H=(e=>(e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.TWO_VERTICAL=21]="TWO_VERTICAL",e[e.THREE=3]="THREE",e[e.THREE_VERTICAL=31]="THREE_VERTICAL",e[e.THREE_MIXED=32]="THREE_MIXED",e[e.THREE_MIXED_REVERSE=33]="THREE_MIXED_REVERSE",e[e.THREE_MIXED_BOTTOM=34]="THREE_MIXED_BOTTOM",e[e.THREE_MIXED_TOP=35]="THREE_MIXED_TOP",e[e.FOUR=4]="FOUR",e[e.FOUR_VERTICAL=41]="FOUR_VERTICAL",e[e.FOUR_HORIZONTAL=42]="FOUR_HORIZONTAL",e[e.FOUR_MIXED=43]="FOUR_MIXED",e[e.FOUR_MIXED_REVERSE=44]="FOUR_MIXED_REVERSE",e[e.FOUR_MIXED_TOP=45]="FOUR_MIXED_TOP",e[e.FOUR_MIXED_BOTTOM=46]="FOUR_MIXED_BOTTOM",e[e.FIVE_VERTICAL=51]="FIVE_VERTICAL",e[e.FIVE_HORIZONTAL=52]="FIVE_HORIZONTAL",e[e.FIVE_MIXED=53]="FIVE_MIXED",e[e.FIVE_MIXED_REVERSE=54]="FIVE_MIXED_REVERSE",e[e.FIVE_MIXED_TOP=55]="FIVE_MIXED_TOP",e[e.SIX=6]="SIX",e[e.SIX_HORIZONTAL=62]="SIX_HORIZONTAL",e[e.SIX_VERTICAL=61]="SIX_VERTICAL",e[e.SIX_MIXED=63]="SIX_MIXED",e[e.SEVEN_VERTICAL=71]="SEVEN_VERTICAL",e[e.SEVEN_HORIZONTAL=72]="SEVEN_HORIZONTAL",e[e.EIGHT=8]="EIGHT",e[e.EIGHT_VERTICAL=81]="EIGHT_VERTICAL",e[e.EIGHT_HORIZONTAL=82]="EIGHT_HORIZONTAL",e[e.NINE=9]="NINE",e[e.NINE_VERTICAL=91]="NINE_VERTICAL",e[e.NINE_HORIZONTAL=92]="NINE_HORIZONTAL",e[e.TEN=10]="TEN",e[e.TEN_VERTICAL=101]="TEN_VERTICAL",e[e.TEN_HORIZONTAL=102]="TEN_HORIZONTAL",e[e.TWELVE=12]="TWELVE",e[e.TWELVE_VERTICAL=121]="TWELVE_VERTICAL",e[e.TWELVE_HORIZONTAL=122]="TWELVE_HORIZONTAL",e[e.TWELVE_GRID=123]="TWELVE_GRID",e[e.FOURTEEN=14]="FOURTEEN",e[e.SIXTEEN=16]="SIXTEEN",e[e.SIXTEEN_GRID=161]="SIXTEEN_GRID",e))(H||{});const Ao=new Set;let Qn=null;const mv=()=>{Ao.clear(),Ao.add(1)},w5=()=>{document.visibilityState==="visible"&&mv()};document.addEventListener("visibilitychange",w5);const jA=()=>{console.log("Cleaning up multiChart listeners"),document.removeEventListener("visibilitychange",w5),Qn&&(clearTimeout(Qn),Qn=null),Ao.clear()},ZA=(e,t,r,n)=>{Qn&&(clearTimeout(Qn),Qn=null),Qn=setTimeout(()=>{Qn=null},(Math.abs(t-e)+1)*r+1e3);const i=o=>{if(e<t){if(o<=t){if(Ao.has(o)||(Ao.add(o),$p(o===t&&n&&n!==t?n:o)),o<t)setTimeout(()=>{i(o+1)},r);else if(Qn&&(clearTimeout(Qn),Qn=null),o===t){Ao.clear();for(let s=1;s<=t;s++)Ao.add(s)}}}else if(o>=t){if($p(o===t&&n&&n!==t?n:o),o>t)setTimeout(()=>{i(o-1)},r);else if(Qn&&(clearTimeout(Qn),Qn=null),o===t){Ao.clear();for(let s=1;s<=t;s++)Ao.add(s)}}};i(e<t?e:e-1)},ry=e=>{switch(e){case 1:return 1;case 2:return 2;case 21:return 2;case 3:return 3;case 31:return 3;case 32:return 3;case 33:return 3;case 34:return 3;case 35:return 3;case 4:return 4;case 41:return 4;case 42:return 4;case 43:return 4;case 44:return 4;case 45:return 4;case 46:return 4;case 51:return 5;case 52:return 5;case 53:return 5;case 54:return 5;case 55:return 5;case 6:return 6;case 62:return 6;case 61:return 6;case 63:return 6;case 71:return 7;case 72:return 7;case 8:return 8;case 81:return 8;case 82:return 8;case 9:return 9;case 91:return 9;case 92:return 9;case 10:return 10;case 101:return 10;case 102:return 10;case 12:return 12;case 121:return 12;case 122:return 12;case 123:return 12;case 14:return 14;case 16:return 16;case 161:return 16;default:return e}},GA=(e,t)=>{console.warn("Initial delay",t);const r=Md();if(Ao.has(2)&&r===1&&mv(),e===r)return;Qn&&(clearTimeout(Qn),Qn=null);const n=ry(r),i=ry(e);n===i?setTimeout(()=>{$p(e),Ao.clear();for(let o=1;o<=i;o++)Ao.add(o)},t):ZA(n,i,t,e)},b0=class $c{constructor(){xe(this,"activeCharts",new Map)}static getInstance(){return $c.instance}static setEnabled(t){$c.enabled=t}static isEnabled(){return $c.enabled}static setTimeSyncEnabled(t){$c.timeSyncEnabled=t}static isTimeSyncEnabled(){return $c.timeSyncEnabled}registerChart(t,r,n,i){this.activeCharts.set(t,{chart:r,symbol:n,type:i})}unregisterChart(t){this.activeCharts.has(t)&&this.activeCharts.delete(t)}updateChartSymbol(t,r,n){const i=this.activeCharts.get(t);i&&(i.symbol=r,i.type=n)}updateChartStyles(t,r){const n=this.activeCharts.get(t);n&&n.chart.setStyles(r)}hasSameSymbol(t,r){const n=this.activeCharts.get(t),i=this.activeCharts.get(r);if(!n||!i||!n.symbol||!i.symbol)return!1;const o=n.symbol===i.symbol;return n.type===void 0&&i.type===void 0?o:o&&n.type===i.type}configureCrosshair(t,r){var n;try{const i=t.getStyles(),o=JSON.parse(JSON.stringify(i));(n=o==null?void 0:o.crosshair)!=null&&n.vertical&&(r?(o.crosshair.horizontal.show=!0,o.crosshair.horizontal.line.show=!0):(o.crosshair.horizontal.show=!1,o.crosshair.horizontal.line.show=!1),t.setStyles(o))}catch(i){console.error("Error configuring crosshair:",i)}}resetCrosshairVisibility(t){try{const r=this.activeCharts.get(t);if(!r)return;const n={crosshair:{show:!0,horizontal:{show:!0,line:{show:!0}},vertical:{show:!0,line:{show:!0}}}};r.chart.setStyles(n);const i=r.chart.getStyles();if(i){const o=JSON.parse(JSON.stringify(i));o.crosshair&&(o.crosshair.show=!0,o.crosshair.vertical&&(o.crosshair.vertical.show=!0,o.crosshair.vertical.line.show=!0),o.crosshair.horizontal&&(o.crosshair.horizontal.show=!0,o.crosshair.horizontal.line.show=!0),r.chart.setStyles(o))}}catch(r){console.error("Error resetting crosshair visibility:",r)}}getSafeVisibleIndices(t,r){const n=typeof t.realFrom=="number"?t.realFrom:t.from,i=typeof t.realTo=="number"?t.realTo:t.to,o=Math.max(0,Math.min(n,r-1)),s=Math.max(0,Math.min(i,r-1));return{safeFromIndex:o,safeToIndex:s}}findVisibleTimestamp(t,r,n){try{const i=t.getDataList();if(!i||i.length===0)return null;const o=t.getVisibleRange();if(!o)return null;const{safeFromIndex:s,safeToIndex:u}=this.getSafeVisibleIndices(o,i.length);if(s>u)return null;const d=i[s].timestamp,h=i[u].timestamp;if(r<=d)return d;if(r>=h)return h;for(let x=s;x<=u;x++)if(i[x].timestamp===r)return i[x].timestamp;const p=h-d;if(p<=0)return d;const g=(r-d)/p,m=Math.floor(s+g*(u-s)),b=Math.max(s,Math.min(u,m));return i[b].timestamp}catch(i){return console.error("Error finding visible timestamp:",i),null}}checkTimestampStatus(t,r){try{const n=t.getDataList();if(!n||n.length===0)return{exists:!1,dataIndex:-1,isVisible:!1};const i=n.findIndex(h=>h.timestamp===r);if(i===-1)return{exists:!1,dataIndex:-1,isVisible:!1};const o=t.getVisibleRange();if(!o)return{exists:!0,dataIndex:i,isVisible:!1};const{safeFromIndex:s,safeToIndex:u}=this.getSafeVisibleIndices(o,n.length),d=i>=s&&i<=u;return{exists:!0,dataIndex:i,isVisible:d}}catch(n){return console.error("Error checking timestamp status:",n),{exists:!1,dataIndex:-1,isVisible:!1}}}clearCrosshair(t,r){try{t.executeAction("onCrosshairChange",{paneId:r,x:void 0,y:void 0})}catch(n){console.error("Error clearing crosshair:",n)}}extractPriceValue(t,r){var n,i;if(!(!r||!t.paneId)){if(t.y!==void 0)try{const o=r.convertFromPixel([{y:t.y}],{paneId:t.paneId});if(o&&Array.isArray(o)&&((n=o[0])==null?void 0:n.value)!==void 0)return o[0].value}catch(o){console.error("Error converting Y to price, trying fallback",o)}return(i=t.kLineData)==null?void 0:i.close}}showCrosshair(t,r,n,i,o,s){try{const u=t.getDom(n);if(!u)return!1;const d=u.getBoundingClientRect(),h=i!==void 0?t.convertToPixel({timestamp:r,value:i},{paneId:n}):t.convertToPixel({timestamp:r},{paneId:n});if(!h)return!1;const p=Array.isArray(h)?h[0]:h;if(typeof(p==null?void 0:p.x)!="number")return!1;let g;return typeof(p==null?void 0:p.y)=="number"?g=p.y:s!==void 0&&s>=0&&s<=1?g=Math.floor(d.height*s):o!==void 0?g=o:g=Math.floor(d.height/2),g=Math.max(0,Math.min(d.height,g)),t.executeAction("onCrosshairChange",{paneId:n,x:p.x,y:g}),!0}catch(u){return console.error("Error showing crosshair:",u),!1}}calculateYPercentage(t,r,n){if(n===void 0||!t)return;const i=t.getDom(r);if(!i)return;const o=i.getBoundingClientRect();return o.height>0?n/o.height:void 0}syncCrosshair(t,r){if(!$c.enabled||!r||!r.paneId||r.timestamp===void 0||this.activeCharts.size<=1)return;const n=r.timestamp,i=r.paneId,o=this.activeCharts.get(t);if(!o)return;const s=o.chart,u=this.extractPriceValue(r,s),d=this.calculateYPercentage(s,i,r.y);this.activeCharts.forEach((h,p)=>{if(p===t)return;const g=h.chart;try{const m=this.hasSameSymbol(t,p);this.configureCrosshair(g,m);const b=this.checkTimestampStatus(g,n);let x=!1;if(b.exists&&b.isVisible&&(x=this.showCrosshair(g,n,i,u,r.y,d)),!x){const C=this.findVisibleTimestamp(g,n,i);C&&(x=this.showCrosshair(g,C,i,u,r.y,d))}x||this.clearCrosshair(g,i)}catch(m){console.error(`Error syncing chart ${p}:`,m)}})}};xe(b0,"instance",new b0),xe(b0,"enabled",!1),xe(b0,"timeSyncEnabled",!1);let yv=b0;const C5=()=>yv.getInstance(),QA=e=>{yv.setEnabled(e)},KA=()=>yv.isEnabled(),bp=class x0{constructor(){xe(this,"activeCharts",new Map)}static getInstance(){return x0.instance}static setEnabled(t){x0.enabled=t}static isEnabled(){return x0.enabled}registerChart(t,r,n,i){this.activeCharts.set(t,{chart:r,symbol:n,type:i})}unregisterChart(t){this.activeCharts.has(t)&&this.activeCharts.delete(t)}updateChartSymbol(t,r,n){const i=this.activeCharts.get(t);i&&(i.symbol=r,i.type=n)}findClosestTimestamp(t,r){try{const n=t.getDataList();if(!n||n.length===0)return null;let i=0,o=n.length-1,s=n[0].timestamp,u=Math.abs(n[0].timestamp-r);for(;i<=o;){const h=Math.floor((i+o)/2),p=n[h].timestamp,g=Math.abs(p-r);if(g<u&&(u=g,s=p),p===r)return p;p<r?i=h+1:o=h-1}const d=Math.round(u/(1e3*60));return s}catch(n){return console.error("Error finding closest timestamp:",n),null}}isTimestampVisible(t,r){try{const n=t.getVisibleRange();if(!n)return!1;const i=t.getDataList();if(!i||i.length===0)return!1;const o=Math.max(0,Math.min(n.from||0,i.length-1)),s=Math.max(0,Math.min(n.to||i.length-1,i.length-1));if(o>s)return!1;const u=i[o].timestamp,d=i[s].timestamp,h=r>=u&&r<=d;if(!h){const p=this.findClosestTimestamp(t,r);if(p)return p>=u&&p<=d}return h}catch(n){return console.error("Error checking timestamp visibility:",n),!1}}scrollToTimestamp(t,r){try{const n=t.getVisibleRange();if(!n)return t.scrollToTimestamp(r),!0;const i=t.getDataList();if(!i||i.length===0)return!1;const o=Math.max(0,Math.min(n.from||0,i.length-1)),s=Math.max(0,Math.min(n.to||i.length-1,i.length-1))-o+1;let u=i.findIndex(p=>p.timestamp===r);if(u===-1){let p=0,g=Math.abs(i[0].timestamp-r);for(let m=1;m<i.length;m++){const b=Math.abs(i[m].timestamp-r);b<g&&(g=b,p=m)}u=p}const d=Math.min(u+s-1,i.length-1),h=i[d].timestamp;return t.scrollToTimestamp(h),!0}catch(n){return console.error("Error scrolling to timestamp:",n),!1}}syncTime(t,r){!x0.enabled||this.activeCharts.size<=1||!this.activeCharts.get(t)||this.activeCharts.forEach((n,i)=>{if(i===t)return;const o=n.chart;try{const s=this.findClosestTimestamp(o,r);if(!s)return;if(s!==r){const d=Math.abs(s-r)}if(this.isTimestampVisible(o,s))return;const u=this.scrollToTimestamp(o,s)}catch(s){console.error(`Error syncing chart ${i}:`,s)}})}};xe(bp,"instance",new bp),xe(bp,"enabled",!1);let bv=bp;const _5=()=>bv.getInstance(),qA=e=>{bv.setEnabled(e)},JA=()=>bv.isEnabled(),S5=class Vg{static setEnabled(t){Vg.enabled=t}static isEnabled(){return Vg.enabled}};xe(S5,"enabled",!1);let k5=S5;const eD=e=>{k5.setEnabled(e)},T5=()=>k5.isEnabled(),xp=class w0{constructor(){xe(this,"activeCharts",new Map),xe(this,"syncingOverlays",new Set)}static getInstance(){return w0.instance}static setEnabled(t){w0.enabled=t}static isEnabled(){return w0.enabled}registerChart(t,r,n,i,o){this.activeCharts.set(t,{chart:r,symbol:n,type:i,interval:o})}unregisterChart(t){this.activeCharts.has(t)&&this.activeCharts.delete(t)}updateChartSymbol(t,r,n,i){const o=this.activeCharts.get(t);o&&(o.symbol=r,o.type=n,i!==void 0&&(o.interval=i))}updateChartInterval(t,r){const n=this.activeCharts.get(t);n&&(n.interval=r.text||`${r.multiplier}${r.timespan}`)}hasSameSymbol(t,r){const n=this.activeCharts.get(t),i=this.activeCharts.get(r);if(!n||!i||!n.symbol||!i.symbol)return!1;const o=n.symbol===i.symbol;return n.type===void 0&&i.type===void 0?o:o&&n.type===i.type}generateOverlayId(t){if(t.groupId)return{id:`${t.name}_${t.groupId}`};const r=(t.points||[]).map(n=>`${n.timestamp}_${n.value}`).join("|");return{id:`${t.name}_${r}_${t.extendData?JSON.stringify(t.extendData):""}`}}onOverlayCreated(t,r){this.syncDrawing(t,r,"create")}onOverlayUpdated(t,r){this.syncDrawing(t,r,"update")}onOverlayRemoved(t,r){this.syncDrawing(t,r,"remove")}syncDrawing(t,r,n){if(!w0.enabled||this.activeCharts.size<=1)return;const i=this.generateOverlayId(r);if(!this.syncingOverlays.has(i)){this.syncingOverlays.add(i);try{if(!this.activeCharts.get(t)){console.error("syncDrawing called - sourceChartData not found");return}this.activeCharts.forEach((o,s)=>{if(s.id!==t.id)try{if(!this.hasSameSymbol(t,s))return;const u=o.chart;switch(n){case"create":this.createOverlayOnChart(u,r,s);break;case"update":this.updateOverlayOnChart(u,r,s);break;case"remove":this.removeOverlayFromChart(u,r,s);break}}catch(u){console.error(`Error syncing drawing to chart ${s}:`,u)}})}finally{setTimeout(()=>{this.syncingOverlays.delete(i)},100)}}}createOverlayOnChart(t,r,n){try{const i={...r,points:r.points?[...r.points]:[],extendData:r.extendData?JSON.parse(JSON.stringify(r.extendData)):void 0};delete i.id,t.createOverlay(i)}catch(i){console.error(`Error creating overlay on chart ${n}:`,i)}}updateOverlayOnChart(t,r,n){try{const i=t.getOverlays(),o=[];i&&Array.isArray(i)&&i.forEach(s=>{const u=s.name===r.name,d=r.groupId&&s.groupId===r.groupId;(r.groupId&&d&&u||!r.groupId&&u&&this.overlaysAreSimilarForUpdate(s,r))&&o.push(s)}),o.forEach(s=>{s.id&&t.removeOverlay({id:s.id})}),this.createOverlayOnChart(t,r,n)}catch(i){console.error(`Error updating overlay on chart ${n}:`,i)}}removeOverlayFromChart(t,r,n){try{const i=t.getOverlays(),o=[];i&&Array.isArray(i)&&i.forEach(s=>{s.name===r.name&&this.overlaysAreSimilar(s,r)&&o.push(s)}),o.forEach(s=>{s.id&&t.removeOverlay({id:s.id})})}catch(i){console.error(`Error removing overlay from chart ${n}:`,i)}}overlaysAreSimilar(t,r){if(t.name!==r.name)return!1;if(t.points&&r.points){if(t.points.length!==r.points.length)return!1;for(let n=0;n<t.points.length;n++){const i=t.points[n],o=r.points[n];if(i.timestamp!==o.timestamp)return!1;if(i.value!==void 0&&o.value!==void 0){const s=Math.abs(i.value-o.value),u=Math.max(i.value,o.value)*.001;if(s>u)return!1}}}return!0}overlaysAreSimilarForUpdate(t,r){return!(t.name!==r.name||t.points&&r.points&&t.points.length!==r.points.length)}getRegisteredChartIds(){return Array.from(this.activeCharts.keys())}getChartSymbol(t){const r=this.activeCharts.get(t);if(r)return{symbol:r.symbol,type:r.type,interval:r.interval}}};xe(xp,"instance",new xp),xe(xp,"enabled",!1);let xv=xp;const N0=()=>xv.getInstance(),tD=e=>{xv.setEnabled(e)},C0=()=>xv.isEnabled();var rD=Q('<div class=chartspire-ui-svg-container><div class=chart-layouts><div class=item><span>1</span><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><rect width=41 height=40 fill=none stroke=currentColor rx=4 transform="translate(.5 .5)"></rect></svg></div><div class="item two-chart-row"><span>2</span><div class=two-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path></g></svg></div></div><div class="item three-chart-row"><span>3</span><div class=three-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M13 0v40"></path><path d="M28 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 13h41"></path><path d="M0 28h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M20.5 20h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M0 20h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M20.5 0v20"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M20.5 20v20"></path></g></svg></div></div><div class="item four-chart-row"><span>4</span><div class=four-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M20 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 10h41"></path><path d="M0 20h41"></path><path d="M0 30h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M10 0v40"></path><path d="M20 0v40"></path><path d="M30 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M20.5 13h20.5"></path><path d="M20.5 27h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M0 13h20.5"></path><path d="M0 27h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M13.5 20v20"></path><path d="M27 20v20"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M13.5 0v20"></path><path d="M27 0v20"></path></g></svg></div></div><div class="item five-chart-row"><span>5</span><div class=five-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 8h41"></path><path d="M0 16h41"></path><path d="M0 24h41"></path><path d="M0 32h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M8 0v40"></path><path d="M16 0v40"></path><path d="M24 0v40"></path><path d="M32 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M20.5 10h20.5"></path><path d="M20.5 20h20.5"></path><path d="M20.5 30h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M0 10h20.5"></path><path d="M0 20h20.5"></path><path d="M0 30h20.5"></path></g></svg></div></div><div class="item six-chart-row"><span>6</span><div class=six-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M13 0v41M27 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M7 0v40"></path><path d="M14 0v40"></path><path d="M21 0v40"></path><path d="M28 0v40"></path><path d="M35 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 7h41"></path><path d="M0 14h41"></path><path d="M0 21h41"></path><path d="M0 28h41"></path><path d="M0 35h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 13h41"></path><path d="M0 27h41"></path><path d="M20 0v40"></path></g></svg></div></div><div class="item seven-chart-row"><span>7</span><div class=seven-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 5.7h41"></path><path d="M0 11.4h41"></path><path d="M0 17.1h41"></path><path d="M0 22.8h41"></path><path d="M0 28.5h41"></path><path d="M0 34.2h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M6 0v40"></path><path d="M12 0v40"></path><path d="M18 0v40"></path><path d="M24 0v40"></path><path d="M30 0v40"></path><path d="M36 0v40"></path></g></svg></div></div><div class="item eight-chart-row"><span>8</span><div class=eight-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M10 0v41M20 0v41M30 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 5h41"></path><path d="M0 10h41"></path><path d="M0 15h41"></path><path d="M0 20h41"></path><path d="M0 25h41"></path><path d="M0 30h41"></path><path d="M0 35h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M5 0v40"></path><path d="M10 0v40"></path><path d="M15 0v40"></path><path d="M20 0v40"></path><path d="M25 0v40"></path><path d="M30 0v40"></path><path d="M35 0v40"></path></g></svg></div></div><div class="item nine-chart-row"><span>9</span><div class=nine-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 13h41"></path><path d="M0 27h41"></path><path d="M13 0v40"></path><path d="M27 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 4.4h41"></path><path d="M0 8.8h41"></path><path d="M0 13.2h41"></path><path d="M0 17.6h41"></path><path d="M0 22h41"></path><path d="M0 26.4h41"></path><path d="M0 30.8h41"></path><path d="M0 35.2h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M4.5 0v40"></path><path d="M9 0v40"></path><path d="M13.5 0v40"></path><path d="M18 0v40"></path><path d="M22.5 0v40"></path><path d="M27 0v40"></path><path d="M31.5 0v40"></path><path d="M36 0v40"></path></g></svg></div></div><div class="item ten-chart-row"><span>10</span><div class=ten-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M8 0v41M16 0v41M24 0v41M32 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 4h41"></path><path d="M0 8h41"></path><path d="M0 12h41"></path><path d="M0 16h41"></path><path d="M0 20h41"></path><path d="M0 24h41"></path><path d="M0 28h41"></path><path d="M0 32h41"></path><path d="M0 36h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M4 0v40"></path><path d="M8 0v40"></path><path d="M12 0v40"></path><path d="M16 0v40"></path><path d="M20 0v40"></path><path d="M24 0v40"></path><path d="M28 0v40"></path><path d="M32 0v40"></path><path d="M36 0v40"></path></g></svg></div></div><div class="item twelve-chart-row"><span>12</span><div class=twelve-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 10h41"></path><path d="M0 20h41"></path><path d="M0 30h41"></path><path d="M13 0v40"></path><path d="M27 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 3.3h41"></path><path d="M0 6.6h41"></path><path d="M0 10h41"></path><path d="M0 13.3h41"></path><path d="M0 16.6h41"></path><path d="M0 20h41"></path><path d="M0 23.3h41"></path><path d="M0 26.6h41"></path><path d="M0 30h41"></path><path d="M0 33.3h41"></path><path d="M0 36.6h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M3.4 0v40"></path><path d="M6.8 0v40"></path><path d="M10.2 0v40"></path><path d="M13.6 0v40"></path><path d="M17 0v40"></path><path d="M20.4 0v40"></path><path d="M23.8 0v40"></path><path d="M27.2 0v40"></path><path d="M30.6 0v40"></path><path d="M34 0v40"></path><path d="M37.4 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M6.8 0v40"></path><path d="M13.6 0v40"></path><path d="M20.4 0v40"></path><path d="M27.2 0v40"></path><path d="M34 0v40"></path></g></svg></div></div><div class=item><span>14</span><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M6 0v41M12 0v41M18 0v41M24 0v41M30 0v41M36 0v41"></path></g></svg></div><div class="item sixteen-chart-row"><span>16</span><div class=sixteen-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M5 0v41M10 0v41M15 0v41M20 0v41M25 0v41M30 0v41M35 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 10h41M0 20h41M0 30h41M10 0v40M20 0v40M30 0v40"></path></g></svg></div></div></div><div class=sync-controls><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark>');const nD=e=>{const[t,r]=be(KA()),[n,i]=be(JA()),[o,s]=be(kM()),[u,d]=be(T5()),[h,p]=be(C0()),g=M=>{e.onConfirm!=null&&e.onConfirm(M,Y5),e.onClose!=null&&e.onClose()},m=M=>(M===H.TWO_VERTICAL?2:M===H.THREE_VERTICAL||M===H.THREE_MIXED||M===H.THREE_MIXED_REVERSE||M===H.THREE_MIXED_BOTTOM||M===H.THREE_MIXED_TOP?3:M===H.FOUR_VERTICAL||M===H.FOUR_HORIZONTAL||M===H.FOUR_MIXED||M===H.FOUR_MIXED_REVERSE||M===H.FOUR_MIXED_TOP||M===H.FOUR_MIXED_BOTTOM?4:M===H.FIVE_VERTICAL||M===H.FIVE_HORIZONTAL||M===H.FIVE_MIXED||M===H.FIVE_MIXED_REVERSE||M===H.FIVE_MIXED_TOP?5:M===H.SIX_HORIZONTAL||M===H.SIX_VERTICAL||M===H.SIX_MIXED?6:M===H.SEVEN_HORIZONTAL||M===H.SEVEN_VERTICAL?7:M===H.EIGHT||M===H.EIGHT_VERTICAL||M===H.EIGHT_HORIZONTAL?8:M===H.NINE||M===H.NINE_VERTICAL||M===H.NINE_HORIZONTAL?9:M===H.TEN||M===H.TEN_VERTICAL||M===H.TEN_HORIZONTAL?10:M===H.TWELVE||M===H.TWELVE_VERTICAL||M===H.TWELVE_HORIZONTAL||M===H.TWELVE_GRID?12:M===H.SIXTEEN||M===H.SIXTEEN_GRID?16:M)<=e.maxMultiChart,b=M=>{const L=M.target.checked;r(L),QA(L)},x=M=>{const L=M.target.checked;i(L),qA(L)},C=M=>{const L=M.target.checked;s(L),SM(L)},_=M=>{const L=M.target.checked;d(L),eD(L)},k=M=>{const L=M.target.checked;p(L),tD(L)};return G(Rl,{get title(){return I("multichart",e.locale)},width:500,padding:"20px 35px",get onClose(){return e.onClose},get children(){var M=rD(),L=M.firstChild,A=L.firstChild,P=A.firstChild,$=P.nextSibling,R=A.nextSibling,z=R.firstChild,B=z.nextSibling,W=B.firstChild,X=W.nextSibling,ee=R.nextSibling,U=ee.firstChild,q=U.nextSibling,ie=q.firstChild,le=ie.nextSibling,ae=le.nextSibling,te=ae.nextSibling,ce=te.nextSibling,ue=ce.nextSibling,j=ee.nextSibling,Z=j.firstChild,pe=Z.nextSibling,Y=pe.firstChild,fe=Y.nextSibling,ve=fe.nextSibling,$e=ve.nextSibling,Ie=$e.nextSibling,Oe=Ie.nextSibling,Ce=Oe.nextSibling,Le=j.nextSibling,Ve=Le.firstChild,je=Ve.nextSibling,qe=je.firstChild,ht=qe.nextSibling,vt=ht.nextSibling,bt=vt.nextSibling,or=Le.nextSibling,dr=or.firstChild,qt=dr.nextSibling,It=qt.firstChild,mr=It.nextSibling,ln=mr.nextSibling,yn=ln.nextSibling,cr=or.nextSibling,Dt=cr.firstChild,Ht=Dt.nextSibling,Jt=Ht.firstChild,Gr=Jt.nextSibling,ur=cr.nextSibling,Vr=ur.firstChild,kt=Vr.nextSibling,Ue=kt.firstChild,Ct=Ue.nextSibling,xt=Ct.nextSibling,_t=ur.nextSibling,wt=_t.firstChild,Vt=wt.nextSibling,Yt=Vt.firstChild,yr=Yt.nextSibling,hr=yr.nextSibling,sr=_t.nextSibling,qn=sr.firstChild,Ur=qn.nextSibling,Hr=Ur.firstChild,Jn=Hr.nextSibling,Lt=Jn.nextSibling,Pr=sr.nextSibling,St=Pr.firstChild,Ar=St.nextSibling,wr=Ar.firstChild,pr=wr.nextSibling,tn=pr.nextSibling,Yr=tn.nextSibling,rn=Pr.nextSibling,bn=rn.firstChild,Ln=bn.nextSibling,Hi=rn.nextSibling,lo=Hi.firstChild,Xa=lo.nextSibling,fi=Xa.firstChild,ca=fi.nextSibling,Bs=L.nextSibling,ua=Bs.firstChild,ja=ua.firstChild,Za=ja.nextSibling,zl=ua.nextSibling,Bl=zl.firstChild,Ga=Bl.nextSibling,jc=zl.nextSibling,br=jc.firstChild,Zc=br.nextSibling,$s=jc.nextSibling,$l=$s.firstChild,da=$l.nextSibling,Gc=$s.nextSibling,Vs=Gc.firstChild,Qa=Vs.nextSibling;return $.$$click=()=>{g(H.ONE)},W.$$click=()=>{g(H.TWO)},X.$$click=()=>{g(H.TWO_VERTICAL)},ie.$$click=()=>{g(H.THREE)},le.$$click=()=>{g(H.THREE_VERTICAL)},ae.$$click=()=>{g(H.THREE_MIXED)},te.$$click=()=>{g(H.THREE_MIXED_REVERSE)},ce.$$click=()=>{g(H.THREE_MIXED_BOTTOM)},ue.$$click=()=>{g(H.THREE_MIXED_TOP)},Y.$$click=()=>{g(H.FOUR)},fe.$$click=()=>{g(H.FOUR_VERTICAL)},ve.$$click=()=>{g(H.FOUR_HORIZONTAL)},$e.$$click=()=>{g(H.FOUR_MIXED)},Ie.$$click=()=>{g(H.FOUR_MIXED_REVERSE)},Oe.$$click=()=>{g(H.FOUR_MIXED_TOP)},Ce.$$click=()=>{g(H.FOUR_MIXED_BOTTOM)},qe.$$click=()=>{g(H.FIVE_VERTICAL)},ht.$$click=()=>{g(H.FIVE_HORIZONTAL)},vt.$$click=()=>{g(H.FIVE_MIXED)},bt.$$click=()=>{g(H.FIVE_MIXED_REVERSE)},It.$$click=()=>{g(H.SIX)},mr.$$click=()=>{g(H.SIX_HORIZONTAL)},ln.$$click=()=>{g(H.SIX_VERTICAL)},yn.$$click=()=>{g(H.SIX_MIXED)},Jt.$$click=()=>{g(H.SEVEN_VERTICAL)},Gr.$$click=()=>{g(H.SEVEN_HORIZONTAL)},Ue.$$click=()=>{g(H.EIGHT)},Ct.$$click=()=>{g(H.EIGHT_VERTICAL)},xt.$$click=()=>{g(H.EIGHT_HORIZONTAL)},Yt.$$click=()=>{g(H.NINE)},yr.$$click=()=>{g(H.NINE_VERTICAL)},hr.$$click=()=>{g(H.NINE_HORIZONTAL)},Hr.$$click=()=>{g(H.TEN)},Jn.$$click=()=>{g(H.TEN_VERTICAL)},Lt.$$click=()=>{g(H.TEN_HORIZONTAL)},wr.$$click=()=>{g(H.TWELVE)},pr.$$click=()=>{g(H.TWELVE_VERTICAL)},tn.$$click=()=>{g(H.TWELVE_HORIZONTAL)},Yr.$$click=()=>{g(H.TWELVE_GRID)},Ln.$$click=()=>{g(H.FOURTEEN)},fi.$$click=()=>{g(H.SIXTEEN)},ca.$$click=()=>{g(H.SIXTEEN_GRID)},F(ja,()=>I("enable_crosshair_sync",e.locale)),Za.addEventListener("change",b),F(Bl,()=>I("enable_time_sync",e.locale)),Ga.addEventListener("change",x),F(br,()=>I("enable_symbol_sync",e.locale)),Zc.addEventListener("change",C),F($l,()=>I("enable_interval_sync",e.locale)),da.addEventListener("change",_),F(Vs,()=>I("enable_drawing_sync",e.locale)),Qa.addEventListener("change",k),De(Re=>{var Qc=m(H.ONE)?"active":"inactive",ei=m(H.TWO)?"active":"inactive",Vl=m(H.TWO_VERTICAL)?"active":"inactive",Wl=m(H.THREE)?"active":"inactive",Ul=m(H.THREE_VERTICAL)?"active":"inactive",Oo=m(H.THREE_MIXED)?"active":"inactive",Ka=m(H.THREE_MIXED_REVERSE)?"active":"inactive",No=m(H.THREE_MIXED_BOTTOM)?"active":"inactive",co=m(H.THREE_MIXED_TOP)?"active":"inactive",Hl=m(H.FOUR)?"active":"inactive",Kc=m(H.FOUR_VERTICAL)?"active":"inactive",qa=m(H.FOUR_HORIZONTAL)?"active":"inactive",Ws=m(H.FOUR_MIXED)?"active":"inactive",ha=m(H.FOUR_MIXED_REVERSE)?"active":"inactive",pa=m(H.FOUR_MIXED_TOP)?"active":"inactive",Yl=m(H.FOUR_MIXED_BOTTOM)?"active":"inactive",fa=m(H.FIVE_VERTICAL)?"active":"inactive",Xt=m(H.FIVE_HORIZONTAL)?"active":"inactive",uo=m(H.FIVE_MIXED)?"active":"inactive",Us=m(H.FIVE_MIXED_REVERSE)?"active":"inactive",Ja=m(H.SIX)?"active":"inactive",Xl=m(H.SIX_HORIZONTAL)?"active":"inactive",Hs=m(H.SIX_VERTICAL)?"active":"inactive",Ys=m(H.SIX_MIXED)?"active":"inactive",es=m(H.SEVEN_VERTICAL)?"active":"inactive",ga=m(H.SEVEN_HORIZONTAL)?"active":"inactive",Yi=m(H.EIGHT)?"active":"inactive",Xi=m(H.EIGHT_VERTICAL)?"active":"inactive",ji=m(H.EIGHT_HORIZONTAL)?"active":"inactive",zo=m(H.NINE)?"active":"inactive",va=m(H.NINE_VERTICAL)?"active":"inactive",Zi=m(H.NINE_HORIZONTAL)?"active":"inactive",qc=m(H.TEN)?"active":"inactive",jl=m(H.TEN_VERTICAL)?"active":"inactive",ho=m(H.TEN_HORIZONTAL)?"active":"inactive",Jc=m(H.TWELVE)?"active":"inactive",Zl=m(H.TWELVE_VERTICAL)?"active":"inactive",ts=m(H.TWELVE_HORIZONTAL)?"active":"inactive",Gl=m(H.TWELVE_GRID)?"active":"inactive",eu=m(H.FOURTEEN)?"active":"inactive",er=m(H.SIXTEEN)?"active":"inactive",Zt=m(H.SIXTEEN_GRID)?"active":"inactive";return Qc!==Re.e&&We($,"class",Re.e=Qc),ei!==Re.t&&We(W,"class",Re.t=ei),Vl!==Re.a&&We(X,"class",Re.a=Vl),Wl!==Re.o&&We(ie,"class",Re.o=Wl),Ul!==Re.i&&We(le,"class",Re.i=Ul),Oo!==Re.n&&We(ae,"class",Re.n=Oo),Ka!==Re.s&&We(te,"class",Re.s=Ka),No!==Re.h&&We(ce,"class",Re.h=No),co!==Re.r&&We(ue,"class",Re.r=co),Hl!==Re.d&&We(Y,"class",Re.d=Hl),Kc!==Re.l&&We(fe,"class",Re.l=Kc),qa!==Re.u&&We(ve,"class",Re.u=qa),Ws!==Re.c&&We($e,"class",Re.c=Ws),ha!==Re.w&&We(Ie,"class",Re.w=ha),pa!==Re.m&&We(Oe,"class",Re.m=pa),Yl!==Re.f&&We(Ce,"class",Re.f=Yl),fa!==Re.y&&We(qe,"class",Re.y=fa),Xt!==Re.g&&We(ht,"class",Re.g=Xt),uo!==Re.p&&We(vt,"class",Re.p=uo),Us!==Re.b&&We(bt,"class",Re.b=Us),Ja!==Re.T&&We(It,"class",Re.T=Ja),Xl!==Re.A&&We(mr,"class",Re.A=Xl),Hs!==Re.O&&We(ln,"class",Re.O=Hs),Ys!==Re.I&&We(yn,"class",Re.I=Ys),es!==Re.S&&We(Jt,"class",Re.S=es),ga!==Re.W&&We(Gr,"class",Re.W=ga),Yi!==Re.C&&We(Ue,"class",Re.C=Yi),Xi!==Re.B&&We(Ct,"class",Re.B=Xi),ji!==Re.v&&We(xt,"class",Re.v=ji),zo!==Re.k&&We(Yt,"class",Re.k=zo),va!==Re.x&&We(yr,"class",Re.x=va),Zi!==Re.j&&We(hr,"class",Re.j=Zi),qc!==Re.q&&We(Hr,"class",Re.q=qc),jl!==Re.z&&We(Jn,"class",Re.z=jl),ho!==Re.P&&We(Lt,"class",Re.P=ho),Jc!==Re.H&&We(wr,"class",Re.H=Jc),Zl!==Re.F&&We(pr,"class",Re.F=Zl),ts!==Re.M&&We(tn,"class",Re.M=ts),Gl!==Re.D&&We(Yr,"class",Re.D=Gl),eu!==Re.R&&We(Ln,"class",Re.R=eu),er!==Re.E&&We(fi,"class",Re.E=er),Zt!==Re.L&&We(ca,"class",Re.L=Zt),Re},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0,x:void 0,j:void 0,q:void 0,z:void 0,P:void 0,H:void 0,F:void 0,M:void 0,D:void 0,R:void 0,E:void 0,L:void 0}),De(()=>Za.checked=t()),De(()=>Ga.checked=n()),De(()=>Zc.checked=o()),De(()=>da.checked=u()),De(()=>Qa.checked=h()),M}})};jt(["click"]);const iD=e=>G(nD,{get multiChart(){return e.multiChart},get maxMultiChart(){return e.maxMultiCharts},get onConfirm(){return e.onMultiChartClick},onClose:()=>{e.setMultiChartModalVisible(!1)},get locale(){return e.locale}});var oD=typeof Ps=="object"&&Ps&&Ps.Object===Object&&Ps,aD=oD,sD=aD,lD=typeof self=="object"&&self&&self.Object===Object&&self,cD=sD||lD||Function("return this")(),wv=cD,uD=wv,dD=uD.Symbol,Cv=dD,ny=Cv,E5=Object.prototype,hD=E5.hasOwnProperty,pD=E5.toString,g0=ny?ny.toStringTag:void 0;function fD(e){var t=hD.call(e,g0),r=e[g0];try{e[g0]=void 0;var n=!0}catch{}var i=pD.call(e);return n&&(t?e[g0]=r:delete e[g0]),i}var gD=fD,vD=Object.prototype,mD=vD.toString;function yD(e){return mD.call(e)}var bD=yD,iy=Cv,xD=gD,wD=bD,CD="[object Null]",_D="[object Undefined]",oy=iy?iy.toStringTag:void 0;function SD(e){return e==null?e===void 0?_D:CD:oy&&oy in Object(e)?xD(e):wD(e)}var M5=SD;function kD(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _v=kD,TD=M5,ED=_v,MD="[object AsyncFunction]",ID="[object Function]",LD="[object GeneratorFunction]",PD="[object Proxy]";function AD(e){if(!ED(e))return!1;var t=TD(e);return t==ID||t==LD||t==MD||t==PD}var DD=AD,FD=wv,RD=FD["__core-js_shared__"],OD=RD,yg=OD,ay=function(){var e=/[^.]+$/.exec(yg&&yg.keys&&yg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ND(e){return!!ay&&ay in e}var zD=ND,BD=Function.prototype,$D=BD.toString;function VD(e){if(e!=null){try{return $D.call(e)}catch{}try{return e+""}catch{}}return""}var WD=VD,UD=DD,HD=zD,YD=_v,XD=WD,jD=/[\\^$.*+?()[\]{}|]/g,ZD=/^\[object .+?Constructor\]$/,GD=Function.prototype,QD=Object.prototype,KD=GD.toString,qD=QD.hasOwnProperty,JD=RegExp("^"+KD.call(qD).replace(jD,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eF(e){if(!YD(e)||HD(e))return!1;var t=UD(e)?JD:ZD;return t.test(XD(e))}var tF=eF;function rF(e,t){return e==null?void 0:e[t]}var nF=rF,iF=tF,oF=nF;function aF(e,t){var r=oF(e,t);return iF(r)?r:void 0}var Sv=aF,sF=Sv,lF=function(){try{var e=sF(Object,"defineProperty");return e({},"",{}),e}catch{}}(),cF=lF,sy=cF;function uF(e,t,r){t=="__proto__"&&sy?sy(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var dF=uF;function hF(e,t){return e===t||e!==e&&t!==t}var I5=hF,pF=dF,fF=I5,gF=Object.prototype,vF=gF.hasOwnProperty;function mF(e,t,r){var n=e[t];(!(vF.call(e,t)&&fF(n,r))||r===void 0&&!(t in e))&&pF(e,t,r)}var yF=mF,bF=Array.isArray,kv=bF;function xF(e){return e!=null&&typeof e=="object"}var wF=xF,CF=M5,_F=wF,SF="[object Symbol]";function kF(e){return typeof e=="symbol"||_F(e)&&CF(e)==SF}var Tv=kF,TF=kv,EF=Tv,MF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,IF=/^\w*$/;function LF(e,t){if(TF(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||EF(e)?!0:IF.test(e)||!MF.test(e)||t!=null&&e in Object(t)}var PF=LF,AF=Sv,DF=AF(Object,"create"),Kp=DF,ly=Kp;function FF(){this.__data__=ly?ly(null):{},this.size=0}var RF=FF;function OF(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var NF=OF,zF=Kp,BF="__lodash_hash_undefined__",$F=Object.prototype,VF=$F.hasOwnProperty;function WF(e){var t=this.__data__;if(zF){var r=t[e];return r===BF?void 0:r}return VF.call(t,e)?t[e]:void 0}var UF=WF,HF=Kp,YF=Object.prototype,XF=YF.hasOwnProperty;function jF(e){var t=this.__data__;return HF?t[e]!==void 0:XF.call(t,e)}var ZF=jF,GF=Kp,QF="__lodash_hash_undefined__";function KF(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=GF&&t===void 0?QF:t,this}var qF=KF,JF=RF,eR=NF,tR=UF,rR=ZF,nR=qF;function Zd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Zd.prototype.clear=JF;Zd.prototype.delete=eR;Zd.prototype.get=tR;Zd.prototype.has=rR;Zd.prototype.set=nR;var iR=Zd;function oR(){this.__data__=[],this.size=0}var aR=oR,sR=I5;function lR(e,t){for(var r=e.length;r--;)if(sR(e[r][0],t))return r;return-1}var qp=lR,cR=qp,uR=Array.prototype,dR=uR.splice;function hR(e){var t=this.__data__,r=cR(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():dR.call(t,r,1),--this.size,!0}var pR=hR,fR=qp;function gR(e){var t=this.__data__,r=fR(t,e);return r<0?void 0:t[r][1]}var vR=gR,mR=qp;function yR(e){return mR(this.__data__,e)>-1}var bR=yR,xR=qp;function wR(e,t){var r=this.__data__,n=xR(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var CR=wR,_R=aR,SR=pR,kR=vR,TR=bR,ER=CR;function Gd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Gd.prototype.clear=_R;Gd.prototype.delete=SR;Gd.prototype.get=kR;Gd.prototype.has=TR;Gd.prototype.set=ER;var MR=Gd,IR=Sv,LR=wv,PR=IR(LR,"Map"),AR=PR,cy=iR,DR=MR,FR=AR;function RR(){this.size=0,this.__data__={hash:new cy,map:new(FR||DR),string:new cy}}var OR=RR;function NR(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var zR=NR,BR=zR;function $R(e,t){var r=e.__data__;return BR(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Jp=$R,VR=Jp;function WR(e){var t=VR(this,e).delete(e);return this.size-=t?1:0,t}var UR=WR,HR=Jp;function YR(e){return HR(this,e).get(e)}var XR=YR,jR=Jp;function ZR(e){return jR(this,e).has(e)}var GR=ZR,QR=Jp;function KR(e,t){var r=QR(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var qR=KR,JR=OR,eO=UR,tO=XR,rO=GR,nO=qR;function Qd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qd.prototype.clear=JR;Qd.prototype.delete=eO;Qd.prototype.get=tO;Qd.prototype.has=rO;Qd.prototype.set=nO;var iO=Qd,L5=iO,oO="Expected a function";function Ev(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(oO);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ev.Cache||L5),r}Ev.Cache=L5;var aO=Ev,sO=aO,lO=500;function cO(e){var t=sO(e,function(n){return r.size===lO&&r.clear(),n}),r=t.cache;return t}var uO=cO,dO=uO,hO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pO=/\\(\\)?/g,fO=dO(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(hO,function(r,n,i,o){t.push(i?o.replace(pO,"$1"):n||r)}),t}),gO=fO;function vO(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var mO=vO,uy=Cv,yO=mO,bO=kv,xO=Tv,dy=uy?uy.prototype:void 0,hy=dy?dy.toString:void 0;function P5(e){if(typeof e=="string")return e;if(bO(e))return yO(e,P5)+"";if(xO(e))return hy?hy.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var wO=P5,CO=wO;function _O(e){return e==null?"":CO(e)}var SO=_O,kO=kv,TO=PF,EO=gO,MO=SO;function IO(e,t){return kO(e)?e:TO(e,t)?[e]:EO(MO(e))}var A5=IO,LO=9007199254740991,PO=/^(?:0|[1-9]\d*)$/;function AO(e,t){var r=typeof e;return t=t??LO,!!t&&(r=="number"||r!="symbol"&&PO.test(e))&&e>-1&&e%1==0&&e<t}var DO=AO,FO=Tv;function RO(e){if(typeof e=="string"||FO(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var D5=RO,OO=yF,NO=A5,zO=DO,py=_v,BO=D5;function $O(e,t,r,n){if(!py(e))return e;t=NO(t,e);for(var i=-1,o=t.length,s=o-1,u=e;u!=null&&++i<o;){var d=BO(t[i]),h=r;if(d==="__proto__"||d==="constructor"||d==="prototype")return e;if(i!=s){var p=u[d];h=n?n(p,d,u):void 0,h===void 0&&(h=py(p)?p:zO(t[i+1])?[]:{})}OO(u,d,h),u=u[d]}return e}var VO=$O,WO=VO;function UO(e,t,r){return e==null?e:WO(e,t,r)}var HO=UO;const _0=v2(HO);var YO=A5,XO=D5;function jO(e,t){t=YO(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[XO(t[r++])];return r&&r==n?e:void 0}var ZO=jO,GO=ZO;function QO(e,t,r){var n=e==null?void 0:GO(e,t);return n===void 0?r:n}var KO=QO;const qO=v2(KO),zs=e=>{const t=[{key:"solid",text:I("solid",e)},{key:"dashed",text:I("dashed",e)}],r=[{key:"true",text:!0},{key:"false",text:!1}],n=[{key:1,text:1},{key:2,text:2},{key:3,text:3},{key:4,text:4},{key:5,text:5},{key:6,text:6},{key:7,text:7},{key:8,text:8},{key:9,text:9},{key:10,text:10}],i=[{key:"fill",text:I("fill",e)},{key:"stroke",text:I("stroke",e)},{key:"stroke_fill",text:I("stroke_fill",e)}],o=[{key:"none",text:I("none",e)},{key:"always",text:I("always",e)},{key:"follow_cross",text:I("follow_cross",e)}],s=[{key:10,text:10},{key:11,text:11},{key:12,text:12},{key:14,text:14},{key:16,text:16},{key:18,text:18},{key:20,text:20},{key:22,text:22},{key:24,text:24}],u=[{key:"normal",text:I("Normal",e)}],d=[{key:"Helvetica Neue",text:I("Helvetica Neue",e)}],h=[{key:"current_open",text:I("current_open",e)},{key:"previous_close",text:I("previous_close",e)}];return{solid_dashed:t,size:n,fill_stroke:i,font_family:d,font_size:s,font_weight:u,none_always_followCross:o,true_false:r,compare_rule:h,text_offset:[{key:1,text:1},{key:2,text:2},{key:3,text:3},{key:4,text:4},{key:5,text:5},{key:6,text:6},{key:7,text:7},{key:8,text:8},{key:9,text:9},{key:10,text:10}],dashed_values:[{key:[2,2],text:"[2, 2]"},{key:[4,4],text:"[4, 4]"},{key:[6,6],text:"[6, 6]"},{key:[8,8],text:"[8, 8]"},{key:[2,4],text:"[2, 4]"},{key:[4,2],text:"[4, 2]"}]}},F5=e=>{const{font_family:t,font_size:r,font_weight:n,size:i,solid_dashed:o,fill_stroke:s,none_always_followCross:u,compare_rule:d,text_offset:h,dashed_values:p}=zs(e);return[{key:"candle.type",text:I("candle_type",e),component:"select",dataSource:[{key:"heikin_ashi",text:I("heikin_ashi",e)},{key:"candle_solid",text:I("candle_solid",e)},{key:"candle_stroke",text:I("candle_stroke",e)},{key:"candle_up_stroke",text:I("candle_up_stroke",e)},{key:"candle_down_stroke",text:I("candle_down_stroke",e)},{key:"ohlc",text:I("ohlc",e)},{key:"area",text:I("area",e)},{key:"renko",text:I("renko",e)}]},{key:"candle.bar.compareRule",text:I("candle.bar.compareRule",e),component:"select",dataSource:d},{key:"candle.bar.upColor",text:I("candle.bar.upColor",e),component:"color"},{key:"candle.bar.downColor",text:I("candle.bar.downColor",e),component:"color"},{key:"candle.bar.noChangeColor",text:I("candle.bar.noChangeColor",e),component:"color"},{key:"candle.bar.upBorderColor",text:I("candle.bar.upBorderColor",e),component:"color"},{key:"candle.bar.downBorderColor",text:I("candle.bar.downBorderColor",e),component:"color"},{key:"candle.bar.noChangeBorderColor",text:I("candle.bar.noChangeBorderColor",e),component:"color"},{key:"candle.bar.upWickColor",text:I("candle.bar.upWickColor",e),component:"color"},{key:"candle.bar.downWickColor",text:I("candle.bar.downWickColor",e),component:"color"},{key:"candle.bar.noChangeWickColor",text:I("candle.bar.noChangeWickColor",e),component:"color"},{key:"candle.area.lineSize",text:I("candle.area.lineSize",e),component:"select",dataSource:i},{key:"candle.area.lineColor",text:I("candle.area.lineColor",e),component:"color"},{key:"candle.area.value",text:I("candle.area.value",e),component:"select",dataSource:[{key:"close",text:I("close",e)},{key:"open",text:I("open",e)},{key:"high",text:I("high",e)},{key:"low",text:I("low",e)}]},{key:"candle.area.smooth",text:I("candle.area.smooth",e),component:"switch"},{key:"candle.area.point.show",text:I("candle.area.point.show",e),component:"switch"},{key:"candle.area.point.color",text:I("candle.area.point.color",e),component:"color"},{key:"candle.area.point.radius",text:I("candle.area.point.radius",e),component:"select",dataSource:i},{key:"candle.area.point.rippleColor",text:I("candle.area.point.rippleColor",e),component:"color"},{key:"candle.area.point.rippleRadius",text:I("candle.area.point.rippleRadius",e),component:"select",dataSource:i},{key:"candle.area.point.animation",text:I("candle.area.point.animation",e),component:"switch"},{key:"candle.renko.brick.size",text:I("candle.renko.brick.size",e),component:"select",dataSource:[{key:1,text:1},{key:2,text:2},{key:3,text:3},{key:4,text:4},{key:5,text:5},{key:10,text:10},{key:15,text:15},{key:20,text:20},{key:25,text:25},{key:50,text:50}]},{key:"candle.priceMark.show",text:I("candle.priceMark.show",e),component:"switch"},{key:"candle.priceMark.high.show",text:I("high_price_show",e),component:"switch"},{key:"candle.priceMark.high.color",text:I("candle.priceMark.high.color",e),component:"color"},{key:"candle.priceMark.high.textOffset",text:I("candle.priceMark.high.textOffset",e),component:"select",dataSource:h},{key:"candle.priceMark.high.textSize",text:I("candle.priceMark.high.textSize",e),component:"select",dataSource:r},{key:"candle.priceMark.high.textFamily",text:I("candle.priceMark.high.textFamily",e),component:"select",dataSource:t},{key:"candle.priceMark.high.textWeight",text:I("candle.priceMark.high.textWeight",e),component:"select",dataSource:n},{key:"candle.priceMark.low.show",text:I("low_price_show",e),component:"switch"},{key:"candle.priceMark.low.color",text:I("candle.priceMark.low.color",e),component:"color"},{key:"candle.priceMark.low.textOffset",text:I("candle.priceMark.low.textOffset",e),component:"select",dataSource:h},{key:"candle.priceMark.low.textSize",text:I("candle.priceMark.low.textSize",e),component:"select",dataSource:r},{key:"candle.priceMark.low.textFamily",text:I("candle.priceMark.low.textFamily",e),component:"select",dataSource:t},{key:"candle.priceMark.low.textWeight",text:I("candle.priceMark.low.textWeight",e),component:"select",dataSource:n},{key:"candle.priceMark.last.show",text:I("candle.priceMark.last.show",e),component:"switch"},{key:"candle.priceMark.last.compareRule",text:I("candle.priceMark.last.compareRule",e),component:"select",dataSource:d},{key:"candle.priceMark.last.upColor",text:I("candle.priceMark.last.upColor",e),component:"color"},{key:"candle.priceMark.last.downColor",text:I("candle.priceMark.last.downColor",e),component:"color"},{key:"candle.priceMark.last.noChangeColor",text:I("candle.priceMark.last.noChangeColor",e),component:"color"},{key:"candle.priceMark.last.line.show",text:I("candle.priceMark.last.line.show",e),component:"switch"},{key:"candle.priceMark.last.line.style",text:I("candle.priceMark.last.line.style",e),component:"select",dataSource:o},{key:"candle.priceMark.last.line.size",text:I("candle.priceMark.last.line.size",e),component:"select",dataSource:i},{key:"candle.priceMark.last.line.dashedValue",text:I("candle.priceMark.last.line.dashedValue",e),component:"select",dataSource:p},{key:"candle.priceMark.last.text.show",text:I("candle.priceMark.last.text.show",e),component:"switch"},{key:"candle.priceMark.last.text.style",text:I("candle.priceMark.last.text.style",e),component:"select",dataSource:s},{key:"candle.priceMark.last.text.size",text:I("candle.priceMark.last.text.size",e),component:"select",dataSource:r},{key:"candle.priceMark.last.text.color",text:I("candle.priceMark.last.text.color",e),component:"color"},{key:"candle.tooltip.showRule",text:I("candle.tooltip.showRule",e),component:"select",dataSource:u},{key:"candle.tooltip.showType",text:I("candle.tooltip.showType",e),component:"select",dataSource:[{key:"rect",text:I("Rect",e)},{key:"standard",text:I("Standard",e)}]},{key:"candle.tooltip.rect.position",text:I("candle.tooltip.rect.position",e),component:"select",dataSource:[{key:"fixed",text:I("Fixed",e)},{key:"pointer",text:I("Pointer",e)}]},{key:"candle.tooltip.rect.color",text:I("candle.tooltip.rect.color",e),component:"color"},{key:"candle.tooltip.rect.borderColor",text:I("candle.tooltip.rect.borderColor",e),component:"color"},{key:"candle.tooltip.text.size",text:I("candle.tooltip.text.size",e),component:"select",dataSource:r},{key:"candle.tooltip.text.weight",text:I("candle.tooltip.text.weight",e),component:"select",dataSource:n},{key:"candle.tooltip.text.color",text:I("candle.tooltip.text.color",e),component:"color"}]},JO=e=>{const{fill_stroke:t,font_size:r,font_weight:n,none_always_followCross:i,solid_dashed:o,size:s,dashed_values:u}=zs(e);return[{key:"indicator.lastValueMark.show",text:I("indicator.lastValueMark.show",e),component:"switch"},{key:"indicator.lastValueMark.text.show",text:I("indicator.lastValueMark.text.show",e),component:"switch"},{key:"indicator.lastValueMark.text.style",text:I("indicator.lastValueMark.text.style",e),component:"select",dataSource:t},{key:"indicator.lastValueMark.text.size",text:I("indicator.lastValueMark.text.size",e),component:"select",dataSource:r},{key:"indicator.lastValueMark.text.weight",text:I("indicator.lastValueMark.text.weight",e),component:"select",dataSource:n},{key:"indicator.lastValueMark.text.color",text:I("indicator.lastValueMark.text.color",e),component:"color"},{key:"indicator.lastValueMark.text.borderStyle",text:I("indicator.lastValueMark.text.borderStyle",e),component:"select",dataSource:o},{key:"indicator.lastValueMark.text.borderColor",text:I("indicator.lastValueMark.text.borderColor",e),component:"color"},{key:"indicator.lastValueMark.text.borderSize",text:I("indicator.lastValueMark.text.borderSize",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.borderDashedValue",text:I("indicator.lastValueMark.text.borderDashedValue",e),component:"select",dataSource:u},{key:"indicator.lastValueMark.text.paddingLeft",text:I("indicator.lastValueMark.text.paddingLeft",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.paddingTop",text:I("indicator.lastValueMark.text.paddingTop",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.paddingRight",text:I("indicator.lastValueMark.text.paddingRight",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.paddingBottom",text:I("indicator.lastValueMark.text.paddingBottom",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.borderRadius",text:I("indicator.lastValueMark.text.borderRadius",e),component:"select",dataSource:s},{key:"indicator.bars[0].style",text:I("indicator.bars.style",e),component:"select",dataSource:t},{key:"indicator.bars[0].borderStyle",text:I("indicator.bars.borderStyle",e),component:"select",dataSource:o},{key:"indicator.bars[0].borderSize",text:I("indicator.bars.borderSize",e),component:"select",dataSource:s},{key:"indicator.bars[0].borderColor",text:I("indicator.bars.borderColor",e),component:"color"},{key:"indicator.bars[0].borderDashedValue",text:I("indicator.bars.borderDashedValue",e),component:"select",dataSource:u},{key:"indicator.ohlc.upColor",text:I("indicator.ohlc.upColor",e),component:"color"},{key:"indicator.ohlc.downColor",text:I("indicator.ohlc.downColor",e),component:"color"},{key:"indicator.ohlc.noChangeColor",text:I("indicator.ohlc.noChangeColor",e),component:"color"},{key:"indicator.lines[0].style",text:I("indicator.lines.style",e),component:"select",dataSource:o},{key:"indicator.lines[0].size",text:I("indicator.lines.size",e),component:"select",dataSource:s},{key:"indicator.lines[0].color",text:I("indicator.lines.color",e),component:"color"},{key:"indicator.lines[0].dashedValue",text:I("indicator.lines.dashedValue",e),component:"select",dataSource:u},{key:"indicator.tooltip.showRule",text:I("indicator.tooltip.showRule",e),component:"select",dataSource:i},{key:"indicator.tooltip.showType",text:I("indicator.tooltip.showType",e),component:"select",dataSource:[{key:"standard",text:I("Standard",e)},{key:"rect",text:I("Rect",e)}]},{key:"indicator.tooltip.title.show",text:I("indicator.tooltip.title.show",e),component:"switch"},{key:"indicator.tooltip.title.showName",text:I("indicator.tooltip.title.showName",e),component:"switch"},{key:"indicator.tooltip.title.showParams",text:I("indicator.tooltip.title.showParams",e),component:"switch"},{key:"indicator.tooltip.title.size",text:I("indicator.tooltip.title.size",e),component:"select",dataSource:r},{key:"indicator.tooltip.title.weight",text:I("indicator.tooltip.title.weight",e),component:"select",dataSource:n},{key:"indicator.tooltip.title.color",text:I("indicator.tooltip.title.color",e),component:"color"},{key:"indicator.tooltip.title.marginLeft",text:I("indicator.tooltip.title.marginLeft",e),component:"select",dataSource:s},{key:"indicator.tooltip.title.marginTop",text:I("indicator.tooltip.title.marginTop",e),component:"select",dataSource:s},{key:"indicator.tooltip.title.marginRight",text:I("indicator.tooltip.title.marginRight",e),component:"select",dataSource:s},{key:"indicator.tooltip.title.marginBottom",text:I("indicator.tooltip.title.marginBottom",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetTop",text:I("indicator.tooltip.offsetTop",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetLeft",text:I("indicator.tooltip.offsetLeft",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetRight",text:I("indicator.tooltip.offsetRight",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetBottom",text:I("indicator.tooltip.offsetBottom",e),component:"select",dataSource:s}]},eN=e=>{const{font_size:t,size:r,font_weight:n,font_family:i}=zs(e);return[{key:"xAxis.show",text:I("xAxis.show",e),component:"switch"},{key:"xAxis.size",text:I("xAxis.size",e),component:"select",dataSource:[{key:"auto",text:I("auto",e)},...r]},{key:"xAxis.axisLine.show",text:I("xAxis.axisLine.show",e),component:"switch"},{key:"xAxis.axisLine.color",text:I("xAxis.axisLine.color",e),component:"color"},{key:"xAxis.axisLine.size",text:I("xAxis.axisLine.size",e),component:"select",dataSource:r},{key:"xAxis.tickText.show",text:I("xAxis.tickText.show",e),component:"switch"},{key:"xAxis.tickText.size",text:I("xAxis.tickText.size",e),component:"select",dataSource:t},{key:"xAxis.tickText.weight",text:I("xAxis.tickText.weight",e),component:"select",dataSource:n},{key:"xAxis.tickText.family",text:I("xAxis.tickText.family",e),component:"select",dataSource:i},{key:"xAxis.tickText.color",text:I("xAxis.tickText.color",e),component:"color"},{key:"xAxis.tickText.marginStart",text:I("xAxis.tickText.marginStart",e),component:"select",dataSource:r},{key:"xAxis.tickText.marginEnd",text:I("xAxis.tickText.marginEnd",e),component:"select",dataSource:r},{key:"xAxis.tickLine.show",text:I("xAxis.tickLine.show",e),component:"switch"},{key:"xAxis.tickLine.size",text:I("xAxis.tickLine.size",e),component:"select",dataSource:r},{key:"xAxis.tickLine.length",text:I("xAxis.tickLine.length",e),component:"select",dataSource:r},{key:"xAxis.tickLine.color",text:I("xAxis.tickLine.color",e),component:"color"}]},tN=e=>{const{size:t,font_weight:r,font_size:n,font_family:i}=zs(e);return[{key:"yAxis.show",text:I("yAxis.show",e),component:"switch"},{key:"yAxis.size",text:I("yAxis.size",e),component:"select",dataSource:[{key:"auto",text:I("auto",e)},...t]},{key:"yAxis.axisLine.show",text:I("yAxis.axisLine.show",e),component:"switch"},{key:"yAxis.axisLine.size",text:I("yAxis.axisLine.size",e),component:"select",dataSource:t},{key:"yAxis.axisLine.color",text:I("yAxis.axisLine.color",e),component:"color"},{key:"yAxis.tickText.show",text:I("yAxis.tickText.show",e),component:"switch"},{key:"yAxis.tickText.color",text:I("yAxis.tickText.color",e),component:"color"},{key:"yAxis.tickText.size",text:I("yAxis.tickText.size",e),component:"select",dataSource:n},{key:"yAxis.tickText.weight",text:I("yAxis.tickText.weight",e),component:"select",dataSource:r},{key:"yAxis.tickText.family",text:I("yAxis.tickText.family",e),component:"select",dataSource:i},{key:"yAxis.tickText.marginStart",text:I("yAxis.tickText.marginStart",e),component:"select",dataSource:t},{key:"yAxis.tickText.marginEnd",text:I("yAxis.tickText.marginEnd",e),component:"select",dataSource:t},{key:"yAxis.tickLine.show",text:I("yAxis.tickLine.show",e),component:"switch"},{key:"yAxis.tickLine.color",text:I("yAxis.tickLine.color",e),component:"color"},{key:"yAxis.tickLine.size",text:I("yAxis.tickLine.size",e),component:"select",dataSource:t},{key:"yAxis.tickLine.length",text:I("yAxis.tickLine.length",e),component:"select",dataSource:t}]},rN=e=>{const{size:t,solid_dashed:r,dashed_values:n}=zs(e);return[{key:"grid.show",text:I("grid_show",e),component:"switch"},{key:"grid.horizontal.show",text:I("grid_horizontal_show",e),component:"switch"},{key:"grid.horizontal.size",text:I("grid_horizontal_size",e),component:"select",dataSource:t},{key:"grid.horizontal.color",text:I("grid_horizontal_color",e),component:"color"},{key:"grid.horizontal.style",text:I("grid_horizontal_style",e),component:"select",dataSource:r},{key:"grid.horizontal.dashedValue",text:I("grid_horizontal_dashedValue",e),component:"select",dataSource:n},{key:"grid.vertical.show",text:I("grid_vertical_show",e),component:"switch"},{key:"grid.vertical.size",text:I("grid_vertical_size",e),component:"select",dataSource:t},{key:"grid.vertical.color",text:I("grid_vertical_color",e),component:"color"},{key:"grid.vertical.style",text:I("grid_vertical_style",e),component:"select",dataSource:r},{key:"grid.vertical.dashedValue",text:I("grid_vertical_dashedValue",e),component:"select",dataSource:n}]},nN=e=>{const{solid_dashed:t,fill_stroke:r,size:n,font_size:i,font_weight:o,dashed_values:s}=zs(e);return[{key:"crosshair.show",text:I("crosshair.show",e),component:"switch"},{key:"crosshair.horizontal.show",text:I("crosshair.horizontal.show",e),component:"switch"},{key:"crosshair.horizontal.line.show",text:I("crosshair.horizontal.line.show",e),component:"switch"},{key:"crosshair.horizontal.line.style",text:I("crosshair.horizontal.line.style",e),component:"select",dataSource:t},{key:"crosshair.horizontal.line.size",text:I("crosshair.horizontal.line.size",e),component:"select",dataSource:n},{key:"crosshair.horizontal.line.color",text:I("crosshair.horizontal.line.color",e),component:"color"},{key:"crosshair.horizontal.line.dashedValue",text:I("crosshair.horizontal.line.dashedValue",e),component:"select",dataSource:s},{key:"crosshair.horizontal.text.show",text:I("crosshair.horizontal.text.show",e),component:"switch"},{key:"crosshair.horizontal.text.style",text:I("crosshair.horizontal.text.style",e),component:"select",dataSource:r},{key:"crosshair.horizontal.text.size",text:I("crosshair.horizontal.text.size",e),component:"select",dataSource:i},{key:"crosshair.horizontal.text.weight",text:I("crosshair.horizontal.text.weight",e),component:"select",dataSource:o},{key:"crosshair.horizontal.text.color",text:I("crosshair.horizontal.text.color",e),component:"color"},{key:"crosshair.horizontal.text.backgroundColor",text:I("crosshair.horizontal.text.backgroundColor",e),component:"color"},{key:"crosshair.vertical.show",text:I("crosshair.vertical.show",e),component:"switch"},{key:"crosshair.vertical.line.show",text:I("crosshair.vertical.line.show",e),component:"switch"},{key:"crosshair.vertical.line.style",text:I("crosshair.vertical.line.style",e),component:"select",dataSource:t},{key:"crosshair.vertical.line.size",text:I("crosshair.vertical.line.size",e),component:"select",dataSource:n},{key:"crosshair.vertical.line.color",text:I("crosshair.vertical.line.color",e),component:"color"},{key:"crosshair.vertical.line.dashedValue",text:I("crosshair.vertical.line.dashedValue",e),component:"select",dataSource:s},{key:"crosshair.vertical.text.show",text:I("crosshair.vertical.text.show",e),component:"switch"},{key:"crosshair.vertical.text.style",text:I("crosshair.vertical.text.style",e),component:"select",dataSource:r},{key:"crosshair.vertical.text.size",text:I("crosshair.vertical.text.size",e),component:"select",dataSource:i},{key:"crosshair.vertical.text.weight",text:I("crosshair.vertical.text.weight",e),component:"select",dataSource:o},{key:"crosshair.vertical.text.color",text:I("crosshair.vertical.text.color",e),component:"color"},{key:"crosshair.vertical.text.backgroundColor",text:I("crosshair.vertical.text.backgroundColor",e),component:"color"}]},R5=e=>{const{solid_dashed:t,fill_stroke:r,size:n,font_size:i,font_weight:o,font_family:s,dashed_values:u}=zs(e);return[{key:"overlay.point.color",text:I("overlay.point.color",e),component:"color"},{key:"overlay.point.borderColor",text:I("overlay.point.borderColor",e),component:"color"},{key:"overlay.point.borderSize",text:I("overlay.point.borderSize",e),component:"select",dataSource:n},{key:"overlay.point.activeColor",text:I("overlay.point.activeColor",e),component:"color"},{key:"overlay.point.activeBorderColor",text:I("overlay.point.activeBorderColor",e),component:"color"},{key:"overlay.point.activeBorderSize",text:I("overlay.point.activeBorderSize",e),component:"select",dataSource:n},{key:"overlay.point.activeRadius",text:I("overlay.point.activeRadius",e),component:"select",dataSource:n},{key:"overlay.point.radius",text:I("overlay.point.radius",e),component:"select",dataSource:n},{key:"overlay.line.style",text:I("overlay.line.style",e),component:"select",dataSource:t},{key:"overlay.line.smooth",text:I("overlay.line.smooth",e),component:"switch"},{key:"overlay.line.size",text:I("overlay.line.size",e),component:"select",dataSource:n},{key:"overlay.line.color",text:I("overlay.line.color",e),component:"color"},{key:"overlay.line.dashedValue",text:I("overlay.line.dashedValue",e),component:"select",dataSource:u},{key:"overlay.rect.style",text:I("overlay.rect.style",e),component:"select",dataSource:r},{key:"overlay.rect.color",text:I("overlay.rect.color",e),component:"color"},{key:"overlay.rect.borderColor",text:I("overlay.rect.borderColor",e),component:"color"},{key:"overlay.rect.borderSize",text:I("overlay.rect.borderSize",e),component:"select",dataSource:n},{key:"overlay.rect.borderRadius",text:I("overlay.rect.borderRadius",e),component:"select",dataSource:n},{key:"overlay.rect.borderStyle",text:I("overlay.rect.borderStyle",e),component:"select",dataSource:t},{key:"overlay.polygon.style",text:I("Polygon Style",e),component:"select",dataSource:r},{key:"overlay.polygon.color",text:I("overlay.polygon.color",e),component:"color"},{key:"overlay.polygon.borderColor",text:I("overlay.polygon.borderColor",e),component:"color"},{key:"overlay.polygon.borderStyle",text:I("overlay.polygon.borderStyle",e),component:"select",dataSource:t},{key:"overlay.polygon.borderSize",text:I("overlay.polygon.borderSize",e),component:"select",dataSource:n},{key:"overlay.circle.style",text:I("overlay.circle.style",e),component:"select",dataSource:r},{key:"overlay.circle.color",text:I("overlay.circle.color",e),component:"color"},{key:"overlay.circle.borderStyle",text:I("overlay.circle.borderStyle",e),component:"select",dataSource:t},{key:"overlay.circle.borderSize",text:I("overlay.circle.borderSize",e),component:"select",dataSource:n},{key:"overlay.circle.borderColor",text:I("overlay.circle.borderColor",e),component:"color"},{key:"overlay.arc.style",text:I("overlay.arc.style",e),component:"select",dataSource:t},{key:"overlay.arc.size",text:I("overlay.arc.size",e),component:"select",dataSource:n},{key:"overlay.arc.color",text:I("overlay.arc.color",e),component:"color"},{key:"overlay.text.size",text:I("overlay.text.size",e),component:"select",dataSource:i},{key:"overlay.text.weight",text:I("overlay.text.weight",e),component:"select",dataSource:o},{key:"overlay.text.color",text:I("overlay.text.color",e),component:"color"},{key:"overlay.text.style",text:I("overlay.text.style",e),component:"select",dataSource:r},{key:"overlay.text.size",text:I("overlay.text.size",e),component:"select",dataSource:i},{key:"overlay.text.family",text:I("overlay.text.family",e),component:"select",dataSource:s},{key:"overlay.text.weight",text:I("overlay.text.weight",e),component:"select",dataSource:o},{key:"overlay.text.color",text:I("overlay.text.color",e),component:"color"},{key:"overlay.text.backgroundColor",text:I("overlay.text.backgroundColor",e),component:"color"},{key:"overlay.text.borderColor",text:I("overlay.text.borderColor",e),component:"color"},{key:"overlay.text.borderSize",text:I("overlay.text.borderSize",e),component:"select",dataSource:n},{key:"overlay.text.borderStyle",text:I("overlay.text.borderStyle",e),component:"select",dataSource:t},{key:"overlay.text.borderDashedValue",text:I("overlay.text.borderDashedValue",e),component:"select",dataSource:u},{key:"overlay.text.borderRadius",text:I("overlay.text.borderRadius",e),component:"select",dataSource:n},{key:"overlay.text.paddingLeft",text:I("overlay.text.paddingLeft",e),component:"select",dataSource:n},{key:"overlay.text.paddingRight",text:I("overlay.text.paddingRight",e),component:"select",dataSource:n},{key:"overlay.text.paddingTop",text:I("overlay.text.paddingTop",e),component:"select",dataSource:n},{key:"overlay.text.paddingBottom",text:I("overlay.text.paddingBottom",e),component:"select",dataSource:n}]},iN=e=>{const t=R5(e),r={arc:[],circle:[],line:[],point:[],polygon:[],rect:[],text:[]};return t.forEach(n=>{const i=n.key.split(".")[1];r[i]||(r[i]=[]),r[i].push(n)}),r};function fy(e){const{size:t}=zs(e);return[...F5(e),...JO(e),...eN(e),...tN(e),...rN(e),...nN(e),...R5(e),{key:"separator.size",text:I("separator.size",e),component:"select",dataSource:t},{key:"separator.color",text:I("separator.color",e),component:"color"},{key:"separator.fill",text:I("separator.fill",e),component:"switch"},{key:"separator.activeBackgroundColor",text:I("separator.activeBackgroundColor",e),component:"color"}]}const gy=e=>(zs(e),[{key:"axis.name",text:I("pane.axis.name",e),component:"select",dataSource:[{key:"normal",text:I("normal",e)},{key:"percentage",text:I("percentage",e)},{key:"logarithmic",text:I("logarithmic",e)}]},{key:"axis.position",text:I("pane.axis.position",e),component:"select",dataSource:[{key:"right",text:I("right",e)},{key:"left",text:I("left",e)}]},{key:"axis.inside",text:I("pane.axis.inside",e),component:"switch"},{key:"axis.reverse",text:I("pane.axis.reverse",e),component:"switch"},{key:"axis.scrollZoomEnabled",text:I("pane.axis.scrollZoomEnabled",e),component:"switch"},{key:"axis.gap.top",text:I("pane.axis.gap.top",e),component:"number",min:0,max:1,step:.1},{key:"axis.gap.bottom",text:I("pane.axis.gap.bottom",e),component:"number",min:0,max:1,step:.1},{key:"height",text:I("pane.height",e),component:"number",min:50,max:1e3,step:10},{key:"minHeight",text:I("pane.minHeight",e),component:"number",min:30,max:500,step:10},{key:"dragEnabled",text:I("pane.dragEnabled",e),component:"switch"},{key:"state",text:I("pane.state",e),component:"select",dataSource:[{key:"normal",text:I("pane.state.normal",e)},{key:"maximize",text:I("pane.state.maximize",e)},{key:"minimize",text:I("pane.state.minimize",e)}]}]);var oN=Q("<div class=chartspire-ui-setting-modal-content><div><div class=sidebar-header></div></div><div>"),aN=Q("<button>"),vy=Q("<div class=component><span>");const sN=e=>{const[t,r]=be(e.currentStyles),[n,i]=be(fy(e.locale)),[o,s]=be(gy(e.locale)),u=()=>{const A=e.widget.getPaneOptions("candle_pane");return A===null?{}:Array.isArray(A)?A.length>0?A[0]:{}:A||{}},[d,h]=be(u()),[p,g]=be("candle"),[m,b]=be(!1),x=()=>{window.innerWidth<=768&&b(!0)};nt(()=>(x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x))),nt(()=>{i(fy(e.locale)),s(gy(e.locale)),h(u())});const C=(A,P)=>{const $={};_0($,A.key,P);const R=gn.clone(t());_0(R,A.key,P),r(R),e.onChange($)},_=(A,P)=>{const $={id:"candle_pane"};_0($,A.key,P);const R=gn.clone(d());_0(R,A.key,P),h(R),e.widget.setPaneOptions($),e.onPaneOptionsChange()},k=()=>{e.onRestoreDefault(n()),e.onClose()},M=[{text:"Candle",key:"candle"},{text:"Indicator",key:"indicator"},{text:"Grid",key:"grid"},{text:"X-axis",key:"xAxis"},{text:"Y-axis",key:"yAxis"},{text:"Separator",key:"separator"},{text:"Crosshair",key:"crosshair"},{text:"Overlay",key:"overlay"},{text:"Pane Options",key:"paneOptions"}],L=(A,P,$=!1)=>{const R=$?_:C,z=typeof P=="function"?P():P;switch(A.component){case"select":return G(Xp,{style:{width:"120px"},get value(){return I(z,e.locale)},get dataSource(){return A.dataSource},onSelected:B=>{const W=B.key;R(A,W)}});case"switch":{const B=z==="--"?!1:!!z;return G(UE,{open:B,onChange:()=>{R(A,!B)}})}case"color":return G(fv,{style:{width:"120px"},value:z,onChange:B=>{R(A,B)}});case"number":return G(Wa,{style:{width:"120px"},get precision(){return Ae(()=>!!A.step)()?Math.max(0,-Math.floor(Math.log10(A.step))):0},get min(){return A.min},get max(){return A.max},value:z||0,onChange:B=>{R(A,B)}})}};return G(Rl,{get title(){return I("setting",e.locale)},width:700,contentHeight:void 0,padding:"0 10px",get buttons(){return[{children:I("restore_default",e.locale),onClick:()=>{k()}}]},get onClose(){return e.onClose},get children(){var A=oN(),P=A.firstChild,$=P.firstChild,R=P.nextSibling;return F($,G(vv,{get isExpanded(){return!m()},onClick:()=>b(!m()),get ariaLabel(){return Ae(()=>!!m())()?I("sidebar.expand",e.locale):I("sidebar.collapse",e.locale)},className:"sidebar-toggle",startingDirection:"left"})),F(P,()=>M.map(z=>(()=>{var B=aN();return B.$$click=()=>g(z.key),F(B,(()=>{var W=Ae(()=>!!m());return()=>W()?z.text.charAt(0):z.text})()),De(W=>{var X=`${p()===z.key?"selected":""}`,ee=m()?z.text:"";return X!==W.e&&at(B,W.e=X),ee!==W.t&&We(B,"title",W.t=ee),W},{e:void 0,t:void 0}),B})()),null),F(R,(()=>{var z=Ae(()=>p()!=="paneOptions");return()=>z()&&G(mn,{get each(){return n().filter(B=>B.key.includes(p()))},children:B=>(()=>{var W=vy(),X=W.firstChild;return F(X,()=>B.text),F(W,()=>L(B,()=>gn.formatValue(t(),B.key),!1),null),W})()})})(),null),F(R,(()=>{var z=Ae(()=>p()==="paneOptions");return()=>z()&&G(mn,{get each(){return o()},children:B=>(()=>{var W=vy(),X=W.firstChild;return F(X,()=>B.text),F(W,()=>L(B,()=>qO(d(),B.key),!0),null),W})()})})(),null),De(z=>{var B=`sidebar ${m()?"collapsed":""}`,W=`content ${m()?"expanded":""}`;return B!==z.e&&at(P,z.e=B),W!==z.t&&at(R,z.t=W),z},{e:void 0,t:void 0}),A}})};jt(["click"]);class O5{constructor(t){xe(this,"customOverrides",null),xe(this,"isLightTheme"),this.customOverrides=t||null,this.isLightTheme=r=>r==="Light Theme 1"||r==="Light Theme 2"}hasCustomStyles(){return this.customOverrides!==null&&this.hasAnyCustomOverrides()}getStyledWithOverrides(t,r){if(!this.hasCustomStyles())return t;let n=tt.cloneDeep(t);const i=this.customOverrides;return i.global&&(n=tt.merge(n,i.global)),this.isLightTheme(r)&&i.light?n=tt.merge(n,i.light):!this.isLightTheme(r)&&i.dark&&(n=tt.merge(n,i.dark)),i.themes&&i.themes[r]&&(n=tt.merge(n,i.themes[r])),n}updateCustomOverrides(t){this.customOverrides=t}getCustomOverrides(){return this.customOverrides?tt.cloneDeep(this.customOverrides):null}clearCustomOverrides(){this.customOverrides=null}hasAnyCustomOverrides(){if(!this.customOverrides)return!1;const{global:t,light:r,dark:n,themes:i}=this.customOverrides;return!!(t&&Object.keys(t).length>0||r&&Object.keys(r).length>0||n&&Object.keys(n).length>0||i&&Object.keys(i).length>0)}}let wp=null;function lN(e){wp=new O5(e)}function S0(){return wp||(wp=new O5),wp}let ot=Ry();const cN=()=>({...ot,candle:{...ot.candle,tooltip:{...ot.candle.tooltip,title:{...ot.candle.tooltip.title,family:Ir,weight:Lr},legend:{...ot.candle.tooltip.legend,family:Ir,weight:Lr,template:[{title:"T: ",value:"{time}"},{title:"O: ",value:"{open}"},{title:"H: ",value:"{high}"},{title:"L: ",value:"{low}"},{title:"C: ",value:"{close}"},{title:"V: ",value:"{volume}"}]}},priceMark:{...ot.candle.priceMark,high:{...ot.candle.priceMark.high,textFamily:Ir,textWeight:Lr},low:{...ot.candle.priceMark.low,textFamily:Ir,textWeight:Lr},last:{...ot.candle.priceMark.last,text:{...ot.candle.priceMark.last.text,family:Ir,weight:Lr}}}},indicator:{...ot.indicator,tooltip:{...ot.indicator.tooltip,title:{...ot.indicator.tooltip.title,family:Ir,weight:Lr},legend:{...ot.indicator.tooltip.legend,family:Ir,weight:Lr}}},xAxis:{...ot.xAxis,tickText:{...ot.xAxis.tickText,family:Ir,weight:Lr}},yAxis:{...ot.yAxis,tickText:{...ot.yAxis.tickText,family:Ir,weight:Lr}},crosshair:{...ot.crosshair,horizontal:{...ot.crosshair.horizontal,text:{...ot.crosshair.horizontal.text,family:Ir,weight:Lr}},vertical:{...ot.crosshair.vertical,text:{...ot.crosshair.vertical.text,family:Ir,weight:Lr}}},overlay:{...ot.overlay,text:{...ot.overlay.text,family:Ir,weight:Lr}},grid:{...ot.grid,horizontal:{...ot.grid.horizontal,color:"rgb(178, 181, 190)"},vertical:{...ot.grid.vertical,color:"rgb(178, 181, 190)"}}}),uN=()=>({...ot,candle:{...ot.candle,tooltip:{...ot.candle.tooltip,title:{...ot.candle.tooltip.title,family:Ir,weight:Lr},legend:{...ot.candle.tooltip.legend,family:Ir,weight:Lr,template:[{title:"T: ",value:"{time}"},{title:"O: ",value:"{open}"},{title:"H: ",value:"{high}"},{title:"L: ",value:"{low}"},{title:"C: ",value:"{close}"},{title:"V: ",value:"{volume}"}]}},priceMark:{...ot.candle.priceMark,high:{...ot.candle.priceMark.high,textFamily:Ir,textWeight:Lr},low:{...ot.candle.priceMark.low,textFamily:Ir,textWeight:Lr},last:{...ot.candle.priceMark.last,text:{...ot.candle.priceMark.last.text,family:Ir,weight:Lr}}}},indicator:{...ot.indicator,tooltip:{...ot.indicator.tooltip,title:{...ot.indicator.tooltip.title,family:Ir,weight:Lr},legend:{...ot.indicator.tooltip.legend,family:Ir,weight:Lr}}},crosshair:{...ot.crosshair,horizontal:{...ot.crosshair.horizontal,text:{...ot.crosshair.horizontal.text,family:Ir,weight:Lr}},vertical:{...ot.crosshair.vertical,text:{...ot.crosshair.vertical.text,family:Ir,weight:Lr}}},overlay:{...ot.overlay,text:{...ot.overlay.text,family:Ir,weight:Lr}},grid:{...ot.grid,horizontal:{...ot.grid.horizontal,color:"rgb(42, 46, 57)"},vertical:{...ot.grid.vertical,color:"rgb(42, 46, 57)"}},xAxis:{...ot.xAxis,axisLine:{...ot.xAxis.axisLine,color:"rgb(42, 46, 57)"},tickText:{...ot.xAxis.tickText,family:Ir,weight:Lr}},yAxis:{...ot.yAxis,axisLine:{...ot.yAxis.axisLine,color:"rgb(42, 46, 57)"},tickText:{...ot.yAxis.tickText,family:Ir,weight:Lr}}}),dN=e=>e==="Light Theme 1"||e==="Light Theme 2"?cN():uN(),Ui=e=>{const t=dN(e);return S0().getStyledWithOverrides(t,e)},hN=e=>{ot=tt.merge({},ot,e)},pN=e=>G(ze,{get when(){return e.settingModalVisible()},get children(){return G(sN,{get locale(){return e.locale},get currentStyles(){return e.widget.getStyles()},get widget(){return e.widget},onClose:()=>{e.setSettingModalVisible(!1)},onChange:t=>{var r;(r=e.widget)==null||r.setStyles(t),e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()&&mt.getInstance(e.widget).saveStyles()},onPaneOptionsChange:()=>{e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()&&mt.getInstance(e.widget).savePaneOptions()},onRestoreDefault:t=>{const r={};t.forEach(n=>{const i=n.key;_0(r,i,gn.formatValue(e.widgetDefaultStyles(),i))}),e.widget.setStyles(Ui(Or())),e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()&&mt.getInstance(e.widget).saveStyles()}})}});var fN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M12.41465,11L18.5,11C18.7761,11,19,11.22386,19,11.5C19,11.77614,18.7761,12,18.5,12L12.41465,12C12.20873,12.5826,11.65311,13,11,13C10.34689,13,9.79127,12.5826,9.58535,12L3.5,12C3.223857,12,3,11.77614,3,11.5C3,11.22386,3.223857,11,3.5,11L9.58535,11C9.79127,10.417404,10.34689,10,11,10C11.65311,10,12.20873,10.417404,12.41465,11Z stroke-opacity=0 stroke=none>');const gN=()=>fN();var vN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M6.91465,11L11.08535,11C11.29127,10.417404,11.84689,10,12.5,10C13.15311,10,13.70873,10.417404,13.91465,11L18.5,11C18.7761,11,19,11.22386,19,11.5C19,11.77614,18.7761,12,18.5,12L13.91465,12C13.70873,12.5826,13.15311,13,12.5,13C11.84689,13,11.29127,12.5826,11.08535,12L6.91465,12C6.70873,12.5826,6.15311,13,5.5,13C4.671573,13,4,12.32843,4,11.5C4,10.671573,4.671573,10,5.5,10C6.15311,10,6.70873,10.417404,6.91465,11Z stroke-opacity=0 stroke=none>');const mN=()=>vN();var yN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M6.91465,12.5C6.70873,13.0826,6.15311,13.5,5.5,13.5C4.671573,13.5,4,12.82843,4,12C4,11.171573,4.671573,10.5,5.5,10.5C6.15311,10.5,6.70873,10.917404,6.91465,11.5L16.0853,11.5C16.2913,10.917404,16.846899999999998,10.5,17.5,10.5C18.328400000000002,10.5,19,11.171573,19,12C19,12.82843,18.328400000000002,13.5,17.5,13.5C16.846899999999998,13.5,16.2913,13.0826,16.0853,12.5L6.91465,12.5Z stroke-opacity=0 stroke=none>');const bN=()=>yN();var xN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11,12.41465L11,18.5C11,18.7761,11.22386,19,11.5,19C11.77614,19,12,18.7761,12,18.5L12,12.41465C12.5826,12.20873,13,11.65311,13,11C13,10.34689,12.5826,9.79127,12,9.58535L12,3.5C12,3.223857,11.77614,3,11.5,3C11.22386,3,11,3.223857,11,3.5L11,9.58535C10.417404,9.79127,10,10.34689,10,11C10,11.65311,10.417404,12.20873,11,12.41465Z stroke-opacity=0 stroke=none>');const wN=()=>xN();var CN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11.66558837890625,19C10.83716137890625,19,10.16558837890625,18.328400000000002,10.16558837890625,17.5C10.16558837890625,16.846899999999998,10.58298437890625,16.2913,11.16557337890625,16.0854L11.16557337890625,11.91464C10.58298437890625,11.70872,10.16558837890625,11.1531,10.16558837890625,10.5C10.16558837890625,9.8469,10.58298437890625,9.29128,11.16557337890625,9.08536L11.16557337890625,4.5C11.16557337890625,4.223857,11.38942837890625,4,11.66556837890625,4C11.94171837890625,4,12.16556837890625,4.223857,12.16556837890625,4.5L12.16556837890625,9.08535C12.74817837890625,9.291260000000001,13.16558837890625,9.846879999999999,13.16558837890625,10.5C13.16558837890625,11.153120000000001,12.74817837890625,11.708739999999999,12.16556837890625,11.91465L12.16556837890625,16.0854C12.74817837890625,16.2913,13.16558837890625,16.846899999999998,13.16558837890625,17.5C13.16558837890625,18.328400000000002,12.49401837890625,19,11.66558837890625,19Z stroke-opacity=0 stroke=none>');const _N=()=>CN();var SN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11.165603637695312,6.91465C11.748203637695312,6.70873,12.165603637695312,6.15311,12.165603637695312,5.5C12.165603637695312,4.671573,11.494033637695313,4,10.665603637695312,4C9.837176637695313,4,9.165603637695312,4.671573,9.165603637695312,5.5C9.165603637695312,6.15311,9.583007637695312,6.70873,10.165603637695312,6.91465L10.165603637695312,16.0854C9.583007637695312,16.2913,9.165603637695312,16.846899999999998,9.165603637695312,17.5C9.165603637695312,18.328400000000002,9.837176637695313,19,10.665603637695312,19C11.494033637695313,19,12.165603637695312,18.328400000000002,12.165603637695312,17.5C12.165603637695312,16.846899999999998,11.748203637695312,16.2913,11.165603637695312,16.0854L11.165603637695312,6.91465Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const kN=()=>SN();var TN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M5.146447,15.753C4.9511845,15.9483,4.9511845,16.2649,5.146447,16.4602C5.341709,16.6554,5.658291,16.6554,5.853554,16.4602L8.156600000000001,14.15711C8.352409999999999,14.25082,8.57173,14.3033,8.8033,14.3033C9.631730000000001,14.3033,10.3033,13.63172,10.3033,12.80329C10.3033,12.57172,10.250820000000001,12.352409999999999,10.157119999999999,12.15659L12.156600000000001,10.15711C12.352409999999999,10.250820000000001,12.571729999999999,10.30329,12.8033,10.30329C13.63173,10.30329,14.3033,9.63172,14.3033,8.80329C14.3033,8.57172,14.25082,8.352409999999999,14.15712,8.15659L16.4602,5.853553C16.6554,5.658291,16.6554,5.341709,16.4602,5.146447C16.2649,4.9511843,15.9483,4.9511843,15.753,5.146447L13.45001,7.449479999999999C13.25419,7.35577,13.03487,7.3032900000000005,12.8033,7.3032900000000005C11.97487,7.3032900000000005,11.3033,7.97487,11.3033,8.80329C11.3033,9.03487,11.35578,9.254190000000001,11.44949,9.450009999999999L9.450009999999999,11.449480000000001C9.254190000000001,11.35577,9.03487,11.30329,8.8033,11.30329C7.97487,11.30329,7.3033,11.97487,7.3033,12.80329C7.3033,13.03487,7.35578,13.25419,7.44949,13.45001L5.146447,15.753Z stroke-opacity=0 stroke=none>');const EN=()=>TN();var MN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M7.573332939453125,14.54567903564453C7.667042939453125,14.741499035644532,7.719512939453125,14.960809035644532,7.719512939453125,15.19239903564453C7.719512939453125,16.02079903564453,7.047942939453125,16.69239903564453,6.219512939453125,16.69239903564453C5.391085939453125,16.69239903564453,4.719512939453125,16.02079903564453,4.719512939453125,15.19239903564453C4.719512939453125,14.36394903564453,5.391085939453125,13.692379035644532,6.219512939453125,13.692379035644532C6.451092939453125,13.692379035644532,6.670412939453125,13.74485903564453,6.866232939453125,13.83856903564453L9.865702939453126,10.83909903564453C9.771992939453124,10.643279035644532,9.719512939453125,10.42395903564453,9.719512939453125,10.192379035644532C9.719512939453125,9.36394903564453,10.391082939453124,8.692379035644532,11.219512939453125,8.692379035644532C11.451092939453126,8.692379035644532,11.670412939453126,8.74485903564453,11.866232939453125,8.838569035644532L15.462112939453124,5.242645035644531C15.657412939453126,5.047383335644532,15.974012939453125,5.047383335644532,16.169212939453125,5.242645035644531C16.364512939453125,5.437907035644531,16.364512939453125,5.754489035644531,16.169212939453125,5.949752035644531L12.573332939453124,9.545679035644532C12.667042939453125,9.74149903564453,12.719512939453125,9.96080903564453,12.719512939453125,10.192379035644532C12.719512939453125,11.020809035644533,12.047942939453126,11.692379035644532,11.219512939453125,11.692379035644532C10.987942939453125,11.692379035644532,10.768632939453125,11.639909035644532,10.572812939453126,11.54619903564453L7.573332939453125,14.54567903564453Z stroke-opacity=0 stroke=none>');const IN=()=>MN();var LN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M15.719512939453125,8.461776733398438C16.547912939453127,8.461776733398438,17.219512939453125,7.7902067333984375,17.219512939453125,6.9617767333984375C17.219512939453125,6.133349733398438,16.547912939453127,5.4617767333984375,15.719512939453125,5.4617767333984375C14.891082939453124,5.4617767333984375,14.219512939453125,6.133349733398438,14.219512939453125,6.9617767333984375C14.219512939453125,7.193346733398437,14.271992939453124,7.412666733398438,14.365692939453124,7.608486733398438L7.366222939453126,14.607956733398437C7.170402939453125,14.514256733398437,6.951082939453125,14.461776733398438,6.719512939453125,14.461776733398438C5.891085939453125,14.461776733398438,5.219512939453125,15.133346733398437,5.219512939453125,15.961776733398438C5.219512939453125,16.79017673339844,5.891085939453125,17.461776733398438,6.719512939453125,17.461776733398438C7.547942939453125,17.461776733398438,8.219512939453125,16.79017673339844,8.219512939453125,15.961776733398438C8.219512939453125,15.730176733398437,8.167032939453126,15.510876733398437,8.073322939453124,15.315066733398437L15.072802939453124,8.315586733398437C15.268612939453124,8.409296733398438,15.487912939453125,8.461776733398438,15.719512939453125,8.461776733398438Z stroke-opacity=0 stroke=none>');const PN=()=>LN();var AN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M17.0643,7.033864912109375L18,3.585784912109375L14.5078,4.509695912109375L15.3537,5.344934912109375L6.02026,14.560584912109375C5.87635,14.517484912109374,5.72366,14.494284912109375,5.5655,14.494284912109375C4.7009,14.494284912109375,4,15.186384912109375,4,16.040084912109375C4,16.893784912109375,4.7009,17.585784912109375,5.5655,17.585784912109375C6.43011,17.585784912109375,7.13101,16.893784912109375,7.13101,16.040084912109375C7.13101,15.722284912109375,7.03392,15.426984912109376,6.86744,15.181384912109374L16.0917,6.073604912109375L17.0643,7.033864912109375Z stroke-opacity=0 stroke=none>');const DN=()=>AN();var FN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M6.91465,13.00505L18.5,13.00505C18.7761,13.00505,19,13.228909999999999,19,13.50505C19,13.781189999999999,18.7761,14.00505,18.5,14.00505L6.91465,14.00505C6.70873,14.58765,6.15311,15.00505,5.5,15.00505C4.671573,15.00505,4,14.33348,4,13.50505C4,12.67662,4.671573,12.00505,5.5,12.00505C6.15311,12.00505,6.70873,12.422450000000001,6.91465,13.00505ZM7.81404,11.625L10.48591,11.625L10.48591,10.90625L9.65193,10.90625L9.65193,7.125L8.997630000000001,7.125C8.71443,7.306641,8.415600000000001,7.419922,7.96443,7.498047L7.96443,8.05078L8.77497,8.05078L8.77497,10.90625L7.81404,10.90625L7.81404,11.625ZM11.081620000000001,11.625L14.0562,11.625L14.0562,10.88281L13.09724,10.88281C12.8863,10.88281,12.59333,10.90625,12.36482,10.93555C13.17537,10.11328,13.84724,9.2207,13.84724,8.39062C13.84724,7.541016,13.28865,7,12.4488,7C11.84333,7,11.446850000000001,7.234375,11.03279,7.679688L11.52497,8.16797C11.747630000000001,7.914062,12.0113,7.697266,12.33552,7.697266C12.7613,7.697266,13.00154,7.982422,13.00154,8.43359C13.00154,9.14648,12.29255,10.00781,11.081620000000001,11.11523L11.081620000000001,11.625ZM15.9605,11.75C16.8121,11.75,17.526899999999998,11.2832,17.526899999999998,10.4375C17.526899999999998,9.82031,17.142200000000003,9.43945,16.6441,9.30078L16.6441,9.27148C17.1129,9.08594,17.3824,8.7207,17.3824,8.21289C17.3824,7.421875,16.8004,7,15.9429,7C15.4215,7,14.9957,7.210938,14.6109,7.541016L15.066,8.11133C15.3258,7.849609,15.5836,7.697266,15.9019,7.697266C16.2789,7.697266,16.4957,7.914062,16.4957,8.28125C16.4957,8.70898,16.2301,9,15.4215,9L15.4215,9.63672C16.3804,9.63672,16.6383,9.91992,16.6383,10.38086C16.6383,10.79688,16.3336,11.03125,15.8824,11.03125C15.4742,11.03125,15.1578,10.82227,14.8922,10.55078L14.4781,11.13281C14.7906,11.486329999999999,15.2652,11.75,15.9605,11.75Z stroke-opacity=0 stroke=none>');const RN=()=>FN();var ON=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M3.146447,14.178126025390625C2.9511847,13.982826025390626,2.9511847,13.666226025390625,3.146447,13.470926025390625L7.39146,9.225966025390626C7.35417,9.095106025390624,7.33421,8.956946025390625,7.33421,8.814116025390625C7.33421,7.985696025390625,8.00578,7.314116025390625,8.834209999999999,7.314116025390625C8.97703,7.314116025390625,9.11519,7.334086025390625,9.24605,7.371366025390625L13.753,2.864373025390625C13.9483,2.669110325390625,14.2649,2.669110325390625,14.4602,2.864373025390625C14.6554,3.059635025390625,14.6554,3.376217025390625,14.4602,3.571479025390625L10.06916,7.962476025390625C10.23631,8.204386025390626,10.334209999999999,8.497826025390625,10.334209999999999,8.814116025390625C10.334209999999999,9.642546025390626,9.66264,10.314116025390625,8.834209999999999,10.314116025390625C8.51791,10.314116025390625,8.22448,10.216226025390625,7.98256,10.049076025390626L3.853554,14.178126025390625C3.658291,14.373326025390625,3.341709,14.373326025390625,3.146447,14.178126025390625ZM7.67736,19.188526025390626C7.4821,18.993226025390626,7.4821,18.676626025390625,7.67736,18.481426025390626L9.9804,16.178326025390625C9.88669,15.982526025390625,9.834209999999999,15.763226025390624,9.834209999999999,15.531626025390626C9.834209999999999,14.703226025390626,10.50578,14.031626025390626,11.33421,14.031626025390626C11.56579,14.031626025390626,11.78511,14.084126025390624,11.98093,14.177826025390624L13.9804,12.178356025390626C13.8867,11.982536025390624,13.8342,11.763216025390625,13.8342,11.531636025390625C13.8342,10.703206025390624,14.5058,10.031636025390625,15.3342,10.031636025390625C15.5658,10.031636025390625,15.7851,10.084116025390625,15.9809,10.177826025390626L18.284,7.874796025390625C18.4792,7.679536025390625,18.7958,7.679536025390625,18.9911,7.874796025390625C19.1863,8.070056025390624,19.1863,8.386636025390626,18.9911,8.581906025390625L16.688000000000002,10.884936025390624C16.7817,11.080756025390626,16.8342,11.300066025390626,16.8342,11.531636025390625C16.8342,12.360066025390624,16.162599999999998,13.031626025390626,15.3342,13.031626025390626C15.1026,13.031626025390626,14.8833,12.979126025390626,14.6875,12.885426025390625L12.68803,14.884926025390625C12.78174,15.080726025390625,12.83421,15.300026025390626,12.83421,15.531626025390626C12.83421,16.360026025390624,12.16264,17.031626025390626,11.33421,17.031626025390626C11.10264,17.031626025390626,10.88333,16.979126025390627,10.68751,16.885426025390625L8.38446,19.188526025390626C8.1892,19.383726025390626,7.87262,19.383726025390626,7.67736,19.188526025390626Z stroke-opacity=0 stroke=none>');const NN=()=>ON();var zN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M3.3367688759765626,12.63173C3.5320318759765623,12.82699,3.8486138759765627,12.82699,4.043876875976562,12.63173L11.822052875976562,4.853553C12.017312875976563,4.658291,12.017312875976563,4.341708,11.822052875976562,4.146446C11.626792875976562,3.9511843,11.310202875976563,3.9511843,11.114942875976563,4.146446L3.3367688759765626,11.92462C3.1415071759765625,12.11988,3.1415071759765625,12.43647,3.3367688759765626,12.63173ZM5.001492875976562,17.0351C4.806232875976562,16.8399,4.806232875976562,16.5233,5.001492875976562,16.328L7.304532875976562,14.025C7.210822875976563,13.82916,7.158352875976563,13.60984,7.158352875976563,13.37827C7.158352875976563,12.54984,7.829922875976562,11.87827,8.658352875976561,11.87827C8.889922875976563,11.87827,9.109232875976563,11.93075,9.305052875976562,12.02446L11.304532875976562,10.02498C11.210822875976563,9.82916,11.158352875976561,9.60984,11.158352875976561,9.37827C11.158352875976561,8.54984,11.829922875976562,7.8782700000000006,12.658352875976563,7.8782700000000006C12.889922875976563,7.8782700000000006,13.109232875976563,7.93075,13.305022875976562,8.024460000000001L15.608122875976562,5.72142C15.803322875976562,5.5261499999999995,16.119922875976563,5.5261499999999995,16.315222875976563,5.72142C16.510422875976563,5.9166799999999995,16.510422875976563,6.23326,16.315222875976563,6.42852L14.012122875976562,8.73156C14.105822875976562,8.92738,14.158322875976562,9.1467,14.158322875976562,9.37827C14.158322875976562,10.2067,13.486822875976562,10.87827,12.658352875976563,10.87827C12.426772875976562,10.87827,12.207452875976562,10.82579,12.011642875976563,10.73209L10.012162875976562,12.73156C10.105872875976562,12.92738,10.158352875976561,13.1467,10.158352875976561,13.37827C10.158352875976561,14.2067,9.486772875976563,14.8783,8.658352875976561,14.8783C8.426772875976562,14.8783,8.207452875976562,14.8258,8.011642875976563,14.7321L5.708602875976562,17.0351C5.513342875976562,17.2304,5.196752875976562,17.2304,5.001492875976562,17.0351ZM10.415712875976563,18.328C10.220452875976562,18.5233,9.903862875976563,18.5233,9.708602875976563,18.328C9.513342875976562,18.1328,9.513342875976562,17.816200000000002,9.708602875976563,17.6209L12.304532875976562,15.025C12.210822875976563,14.8292,12.158352875976563,14.6098,12.158352875976563,14.3783C12.158352875976563,13.54984,12.829922875976562,12.87827,13.658322875976562,12.87827C13.889922875976563,12.87827,14.109222875976563,12.93075,14.305022875976562,13.02446L17.486822875976564,9.84274C17.682022875976564,9.64747,17.99862287597656,9.64747,18.19392287597656,9.84274C18.38912287597656,10.038,18.38912287597656,10.35458,18.19392287597656,10.54984L15.012122875976562,13.73156C15.105822875976562,13.92738,15.158322875976562,14.1467,15.158322875976562,14.3783C15.158322875976562,15.2067,14.486822875976562,15.8783,13.658322875976562,15.8783C13.426822875976562,15.8783,13.207422875976562,15.8258,13.011642875976563,15.7321L10.415712875976563,18.328Z stroke-opacity=0 stroke=none>');const BN=()=>zN();var $N=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M13.1889,6C12.98303,6.582599999999999,12.42741,7,11.7743,7C11.12119,7,10.565570000000001,6.582599999999999,10.35965,6L3.5,6C3.223857,6,3,5.77614,3,5.5C3,5.22386,3.223857,5,3.5,5L10.35965,5C10.565570000000001,4.417404,11.12119,4,11.7743,4C12.42741,4,12.98303,4.417404,13.1889,5L18.5,5C18.7761,5,19,5.22386,19,5.5C19,5.77614,18.7761,6,18.5,6L13.1889,6ZM3,8.5C3,8.22386,3.223857,8,3.5,8L18.5,8C18.7761,8,19,8.22386,19,8.5C19,8.77614,18.7761,9,18.5,9L3.5,9C3.223857,9,3,8.77614,3,8.5ZM3.278549,11.5C3.278549,11.22386,3.502407,11,3.778549,11L18.7785,11C19.0547,11,19.2785,11.22386,19.2785,11.5C19.2785,11.77614,19.0547,12,18.7785,12L3.778549,12C3.502407,12,3.278549,11.77614,3.278549,11.5ZM3.139267,14.5C3.139267,14.2239,3.363124,14,3.6392670000000003,14L18.6393,14C18.915399999999998,14,19.1393,14.2239,19.1393,14.5C19.1393,14.7761,18.915399999999998,15,18.6393,15L3.6392670000000003,15C3.363124,15,3.139267,14.7761,3.139267,14.5ZM13.1889,18C12.98303,18.5826,12.42741,19,11.7743,19C11.12119,19,10.565570000000001,18.5826,10.35965,18L3.778549,18C3.502407,18,3.278549,17.7761,3.278549,17.5C3.278549,17.2239,3.502407,17,3.778549,17L10.35965,17C10.565570000000001,16.4174,11.12119,16,11.7743,16C12.42741,16,12.98303,16.4174,13.1889,17L18.7785,17C19.0547,17,19.2785,17.2239,19.2785,17.5C19.2785,17.7761,19.0547,18,18.7785,18L13.1889,18Z stroke-opacity=0 stroke=none>');const VN=()=>$N();var WN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M4.91465,6C4.70873,6.582599999999999,4.15311,7,3.5,7C2.671573,7,2,6.32843,2,5.5C2,4.671573,2.671573,4,3.5,4C4.15311,4,4.70873,4.417404,4.91465,5L18.2257,5C18.5018,5,18.7257,5.22386,18.7257,5.5C18.7257,5.77614,18.5018,6,18.2257,6L4.91465,6ZM2.7257,8.5C2.7257,8.22386,2.949558,8,3.2257,8L18.2257,8C18.5018,8,18.7257,8.22386,18.7257,8.5C18.7257,8.77614,18.5018,9,18.2257,9L3.2257,9C2.949558,9,2.7257,8.77614,2.7257,8.5ZM3.00425,11.5C3.00425,11.22386,3.22811,11,3.50425,11L18.5042,11C18.7804,11,19.0042,11.22386,19.0042,11.5C19.0042,11.77614,18.7804,12,18.5042,12L3.50425,12C3.22811,12,3.00425,11.77614,3.00425,11.5ZM2.864967,14.5C2.864967,14.2239,3.08882,14,3.36497,14L18.365,14C18.6411,14,18.865,14.2239,18.865,14.5C18.865,14.7761,18.6411,15,18.365,15L3.36497,15C3.08882,15,2.864967,14.7761,2.864967,14.5ZM20,17.5C20,18.328400000000002,19.3284,19,18.5,19C17.846899999999998,19,17.2913,18.5826,17.0854,18L3.50425,18C3.22811,18,3.00425,17.7761,3.00425,17.5C3.00425,17.2239,3.22811,17,3.50425,17L17.0854,17C17.2913,16.4174,17.846899999999998,16,18.5,16C19.3284,16,20,16.671599999999998,20,17.5Z stroke-opacity=0 stroke=none>');const UN=()=>WN();var HN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><ellipse cx=10.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=17.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=10.5 cy=11.5 rx=7 ry=7 fill-opacity=0 stroke-opacity=1 fill=none stroke-width=1></ellipse><ellipse cx=10.5 cy=11.5 rx=5 ry=5 fill-opacity=0 stroke-opacity=1 fill=none stroke-width=1></ellipse><ellipse cx=10.5 cy=11.5 rx=3 ry=3 fill-opacity=0 stroke-opacity=1 fill=none stroke-width=1>');const YN=()=>HN();var XN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M3,7.32468C5.90649,3.3893050000000002,11.49833,2.81306,14.6674,6.31944C14.9056,6.1554199999999994,15.192,6.05979,15.5,6.05979C15.845,6.05979,16.1628,6.17974,16.4162,6.381349999999999L18.4509,4.23827L19,4.816615L16.8945,7.03429C16.962600000000002,7.21075,17,7.40319,17,7.60463C17,8.45782,16.328400000000002,9.14947,15.5,9.14947C14.6716,9.14947,14,8.45782,14,7.60463C14,7.36402,14.0534,7.13625,14.1487,6.93322C11.32695,3.748365,6.25159,4.253956,3.612785,7.82695L3,7.32468ZM14.09,15.4717C15.7427,13.78985,16.244500000000002,11.524740000000001,15.5633,9.30134L15.5618,9.30134L16.3012,9.0502C17.072400000000002,11.56646,16.497700000000002,14.158,14.6282,16.0599C12.28737,18.442,8.62386,18.6988,6.41348,16.4501C4.5526,14.5572,4.52076,11.19671,6.36766,9.3177C7.89069,7.76754,10.07544,7.706189999999999,11.56741,9.22363C11.95453,9.61742,12.24817,10.08363,12.43369,10.57677L14.1451,8.77421L14.6942,9.35256L12.64982,11.50582C12.65827,11.59712,12.66295,11.68839,12.66378,11.77936C12.87398,12.04523,13,12.38451,13,12.7541C13,13.60729,12.32843,14.2989,11.5,14.2989C10.67157,14.2989,10,13.60729,10,12.7541C10,11.90091,10.67157,11.20926,11.5,11.20926C11.60387,11.20926,11.70528,11.220130000000001,11.8032,11.240829999999999L11.81763,11.22564C11.69858,10.71874,11.42858,10.21929,11.0284,9.81179C9.844000000000001,8.60765,8.136890000000001,8.65592,6.90822,9.90586C5.37975,11.460930000000001,5.40693,14.288,6.95404,15.8619C8.84598,17.7867,12.03496,17.5626,14.09,15.4717Z stroke-opacity=0 stroke=none>');const jN=()=>XN();var ZN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M4,17.0854L4,3.5C4,3.223858,4.22386,3,4.5,3C4.77614,3,5,3.223858,5,3.5L5,10L7.57584,10L9.8127,4.46359C9.91614,4.20756,10.20756,4.08386,10.46359,4.1873000000000005C10.71963,4.29075,10.84333,4.58216,10.73988,4.8382000000000005L8.65438,10L11.08535,10C11.29127,9.4174,11.84689,9,12.5,9C12.65154,9,12.79784,9.02247,12.93573,9.06427L16.6464,5.35355C16.8417,5.15829,17.1583,5.15829,17.3536,5.35355C17.5488,5.54882,17.5488,5.8654,17.3536,6.06066L13.7475,9.66675C13.907,9.90508,14,10.19168,14,10.5C14,11.15311,13.5826,11.70873,13,11.91465L13,14.3638L18.3714,12.1936C18.6274,12.09015,18.918799999999997,12.21385,19.0222,12.46989C19.1257,12.72592,19.002,13.0173,18.746000000000002,13.1208L13,15.4423L13,18L19.5,18C19.7761,18,20,18.2239,20,18.5C20,18.7761,19.7761,19,19.5,19L5.91465,19C5.70873,19.5826,5.15311,20,4.5,20C3.671573,20,3,19.3284,3,18.5C3,17.846899999999998,3.417404,17.2913,4,17.0854ZM6.3729499999999994,17.0413L12,14.7678L12,11.91465C11.88136,11.87271,11.76956,11.81627,11.66675,11.74746L6.3729499999999994,17.0413ZM12,15.8463L6.6694700000000005,18L12,18L12,15.8463ZM6.38629,15.6137L8.250350000000001,11L11,11L6.38629,15.6137ZM5,11L7.17182,11L5,16.3754L5,11Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const GN=()=>ZN();var QN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M17,4.5C17,5.32843,16.328400000000002,6,15.5,6C15.0931,6,14.7241,5.83802,14.4539,5.57503L5.98992,8.32515C5.99658,8.38251,6,8.440850000000001,6,8.5C6,9.15311,5.582599999999999,9.70873,5,9.91465L5,11.08535C5.42621,11.236,5.763999999999999,11.57379,5.91465,12L19.5,12C19.7761,12,20,12.22386,20,12.5C20,12.77614,19.7761,13,19.5,13L5.91465,13C5.70873,13.5826,5.15311,14,4.5,14C3.671573,14,3,13.3284,3,12.5C3,11.84689,3.417404,11.29127,4,11.08535L4,9.91465C3.417404,9.70873,3,9.15311,3,8.5C3,7.67157,3.671573,7,4.5,7C4.90411,7,5.2709,7.15981,5.5406200000000005,7.41967L14.0093,4.66802C14.0032,4.6128599999999995,14,4.5568,14,4.5C14,3.671573,14.6716,3,15.5,3C16.328400000000002,3,17,3.671573,17,4.5ZM4,15.5C4,15.2239,4.22386,15,4.5,15L19.5,15C19.7761,15,20,15.2239,20,15.5C20,15.7761,19.7761,16,19.5,16L4.5,16C4.22386,16,4,15.7761,4,15.5ZM4,18.5C4,18.2239,4.22386,18,4.5,18L19.5,18C19.7761,18,20,18.2239,20,18.5C20,18.7761,19.7761,19,19.5,19L4.5,19C4.22386,19,4,18.7761,4,18.5Z stroke-opacity=0 stroke=none>');const KN=()=>QN();var qN=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M20,3.5C20,4.15311,19.5826,4.70873,19,4.91465L19,18.5C19,18.7761,18.7761,19,18.5,19L4.91465,19C4.70873,19.5826,4.15311,20,3.5,20C2.671573,20,2,19.3284,2,18.5C2,17.846899999999998,2.417404,17.2913,3,17.0854L3,3.5C3,3.22386,3.22386,3,3.5,3L17.0854,3C17.2913,2.417404,17.846899999999998,2,18.5,2C19.3284,2,20,2.671573,20,3.5ZM17.0854,4C17.236,4.42621,17.5738,4.763999999999999,18,4.91465L18,8L14,8L14,4L17.0854,4ZM13,4L13,8L9,8L9,4L13,4ZM13,9L9,9L9,13L13,13L13,9ZM13,14L9,14L9,18L13,18L13,14ZM14,18L14,14L18,14L18,18L14,18ZM18,13L14,13L14,9L18,9L18,13ZM4.91465,18C4.763999999999999,17.5738,4.42621,17.236,4,17.0854L4,14L8,14L8,18L4.91465,18ZM4,8L4,4L8,4L8,8L4,8ZM8,9L8,13L4,13L4,9L8,9Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const JN=()=>qN();var ez=Q('<svg class=icon-overlay viewBox="0 0 22 22"><ellipse cx=10.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=17.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=10.5 cy=11.5 rx=7 ry=7 fill-opacity=0 fill=none stroke-opacity=1 stroke-width=1>');const tz=()=>ez();var rz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11.57625,6.9981C11.55099,6.999359999999999,11.52557,7,11.5,7C11.34,7,11.18584,6.97495,11.04125,6.9285499999999995L5.55401,16.4327C5.713760000000001,16.5905,5.83826,16.7839,5.91465,17L16.0854,17C16.2187,16.622700000000002,16.4987,16.314700000000002,16.8569,16.1445L11.57625,6.9981ZM12.50759,6.611219999999999C12.81005,6.336790000000001,13,5.94058,13,5.5C13,4.671573,12.32843,4,11.5,4C10.67157,4,10,4.671573,10,5.5C10,5.80059,10.08841,6.08052,10.24066,6.31522L4.64514,16.0069C4.59738,16.002299999999998,4.54896,16,4.5,16C3.671573,16,3,16.671599999999998,3,17.5C3,18.328400000000002,3.671573,19,4.5,19C5.15311,19,5.70873,18.5826,5.91465,18L16.0854,18C16.2913,18.5826,16.846899999999998,19,17.5,19C18.328400000000002,19,19,18.328400000000002,19,17.5C19,16.8365,18.5691,16.2735,17.971899999999998,16.075699999999998L12.50759,6.611219999999999Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const nz=()=>rz();var iz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M19,4.5C19,5.15311,18.5826,5.70873,18,5.91465L18,18.5C18,18.7761,17.7761,19,17.5,19L5.91465,19C5.70873,19.5826,5.15311,20,4.5,20C3.671573,20,3,19.3284,3,18.5C3,17.846899999999998,3.417404,17.2913,4,17.0854L4,4.5C4,4.22386,4.22386,4,4.5,4L16.0854,4C16.2913,3.417404,16.846899999999998,3,17.5,3C18.328400000000002,3,19,3.671573,19,4.5ZM5,5L16.0854,5C16.236,5.42621,16.5738,5.763999999999999,17,5.91465L17,18L5.91465,18C5.763999999999999,17.5738,5.42621,17.236,5,17.0854L5,5Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const oz=()=>iz();var az=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M19.6401,7.99355C20.4028,7.92291,21,7.2811900000000005,21,6.5C21,5.671573,20.3284,5,19.5,5C18.8469,5,18.2913,5.417404,18.0854,6L7.62067,6C7.34453,6,7.12067,6.22386,7.12067,6.5C7.12067,6.5479,7.12741,6.59423,7.13999,6.63809L3.2294099999999997,15.0243C2.530138,15.1517,2,15.764,2,16.5C2,17.328400000000002,2.671573,18,3.5,18C4.15311,18,4.70873,17.5826,4.91465,17L14.5963,17C14.6456,17.076,14.7162,17.1396,14.8044,17.1807C15.0546,17.2974,15.3521,17.1891,15.4688,16.9388L19.6401,7.99355ZM14.7896,16.0293L18.6551,7.739599999999999C18.3942,7.56144,18.1925,7.30307,18.0854,7L8.0746,7L4.25044,15.2009C4.55701,15.3784,4.79493,15.6613,4.91465,16L14.6207,16C14.68,16,14.7368,16.0103,14.7896,16.0293Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const sz=()=>az();var lz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M8.134443814697265,7.494615087890625L8.764323814697265,7.494615087890625L8.764323814697265,3.414215087890625L8.310223814697267,3.414215087890625L7.294603814697266,4.005035087890625L7.289713814697266,4.634915087890625L8.134443814697265,4.149892087890625L8.134443814697265,7.494615087890625ZM18.832003814697266,6.933095087890624Q19.004603814697266,6.635245087890625,19.004603814697266,6.2543850878906255Q19.004603814697266,5.884915087890625,18.845103814697264,5.593575087890625Q18.685503814697267,5.3006050878906255,18.399103814697266,5.136225087890625Q18.114303814697266,4.9702050878906245,17.754603814697266,4.9653250878906245L18.820603814697265,3.840647087890625L18.820603814697265,3.414215087890625L16.519203814697264,3.414215087890625L16.519203814697264,3.939931087890625L18.050803814697264,3.939931087890625L16.719403814697266,5.334785087890625L17.074203814697263,5.7205350878906245Q17.254903814697265,5.484525087890625,17.619503814697268,5.484525087890625Q17.980803814697268,5.484525087890625,18.187503814697266,5.689605087890625Q18.394203814697267,5.894685087890625,18.394203814697267,6.2543850878906255Q18.394203814697267,6.604315087890625,18.187503814697266,6.822415087890625Q17.980803814697268,7.0405150878906255,17.640603814697265,7.0405150878906255Q17.334603814697267,7.0405150878906255,17.124703814697266,6.890775087890625Q16.914703814697265,6.739415087890626,16.820303814697265,6.469225087890624L16.354803814697263,6.744295087890626Q16.480103814697266,7.125155087890625,16.821903814697265,7.341625087890625Q17.165403814697264,7.559725087890625,17.640603814697265,7.559725087890625Q18.039403814697266,7.559725087890625,18.348603814697267,7.393705087890625Q18.659503814697267,7.229315087890625,18.832003814697266,6.933095087890624ZM10.000003814697266,10.634915087890626C10.000003814697266,11.024655087890626,9.851363814697265,11.379685087890625,9.607683814697266,11.646395087890625L12.168903814697266,15.171615087890626C12.275403814697265,15.147615087890625,12.386203814697266,15.134915087890626,12.500003814697266,15.134915087890626C12.596503814697266,15.134915087890626,12.690803814697265,15.144015087890624,12.782303814697265,15.161415087890624L16.108803814697268,11.196955087890625C16.038703814697264,11.023375087890624,16.000003814697266,10.833655087890625,16.000003814697266,10.634915087890626C16.000003814697266,9.806495087890625,16.671603814697264,9.134915087890626,17.500003814697266,9.134915087890626C18.328403814697264,9.134915087890626,19.000003814697266,9.806495087890625,19.000003814697266,10.634915087890626C19.000003814697266,11.463345087890625,18.328403814697264,12.134915087890626,17.500003814697266,12.134915087890626C17.239503814697265,12.134915087890626,16.994503814697268,12.068495087890625,16.781003814697264,11.951675087890624L13.654703814697266,15.677415087890624C13.870303814697266,15.937215087890625,14.000003814697266,16.270915087890625,14.000003814697266,16.634915087890626C14.000003814697266,17.463315087890624,13.328403814697266,18.134915087890626,12.500003814697266,18.134915087890626C11.671573814697265,18.134915087890626,11.000003814697266,17.463315087890624,11.000003814697266,16.634915087890626C11.000003814697266,16.284415087890626,11.120193814697265,15.962015087890626,11.321603814697266,15.706715087890625L8.715393814697265,12.119565087890624C8.645053814697267,12.129685087890625,8.573143814697266,12.134915087890626,8.500003814697266,12.134915087890626C8.162103814697264,12.134915087890626,7.8503038146972655,12.023195087890626,7.599523814697266,11.834665087890626L4.505583814697266,15.521915087890624C4.809213814697266,15.796415087890624,5.000003814697266,16.193415087890624,5.000003814697266,16.634915087890626C5.000003814697266,17.463315087890624,4.328433814697266,18.134915087890626,3.5000038146972656,18.134915087890626C2.6715768146972656,18.134915087890626,2.0000038146972656,17.463315087890624,2.0000038146972656,16.634915087890626C2.0000038146972656,15.806515087890626,2.6715768146972656,15.134915087890626,3.5000038146972656,15.134915087890626C3.508253814697266,15.134915087890626,3.5164838146972657,15.135015087890626,3.524703814697266,15.135115087890625L7.033823814697266,10.953115087890625C7.011673814697265,10.850565087890626,7.000003814697266,10.744105087890624,7.000003814697266,10.634915087890626C7.000003814697266,9.806495087890625,7.671573814697266,9.134915087890626,8.500003814697266,9.134915087890626C9.328433814697267,9.134915087890626,10.000003814697266,9.806495087890625,10.000003814697266,10.634915087890626Z stroke-opacity=0 stroke=none>');const cz=()=>lz();var uz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M8.13444,7.494615087890625L8.76432,7.494615087890625L8.76432,3.414215087890625L8.310220000000001,3.414215087890625L7.2946,4.005035087890625L7.28971,4.634915087890625L8.13444,4.149892087890625L8.13444,7.494615087890625ZM18.832,6.929835087890625Q19.0046,6.635245087890625,19.0046,6.2543850878906255Q19.0046,5.889805087890625,18.8451,5.5952050878906245Q18.6855,5.3006050878906255,18.3975,5.132965087890625Q18.1094,4.9653250878906245,17.7399,4.9653250878906245Q17.435499999999998,4.9653250878906245,17.1556,5.149245087890625L17.2793,3.939931087890625L18.8304,3.939931087890625L18.8304,3.414215087890625L16.7406,3.414215087890625L16.5094,5.665195087890625L17.0156,5.795405087890625Q17.095399999999998,5.655425087890626,17.2516,5.570795087890625Q17.4095,5.484525087890625,17.6357,5.484525087890625Q17.9694,5.484525087890625,18.1842,5.697745087890625Q18.4007,5.909335087890625,18.4007,6.2543850878906255Q18.4007,6.604315087890625,18.1842,6.822415087890625Q17.9694,7.0405150878906255,17.6292,7.0405150878906255Q17.3298,7.0405150878906255,17.119799999999998,6.890775087890625Q16.9098,6.739415087890626,16.825200000000002,6.474115087890625L16.3597,6.749175087890626Q16.470399999999998,7.110505087890624,16.807299999999998,7.335115087890625Q17.144199999999998,7.559725087890625,17.6292,7.559725087890625Q18.0296,7.559725087890625,18.3438,7.392075087890625Q18.6595,7.224435087890625,18.832,6.929835087890625ZM10,10.634915087890626C10,11.024655087890626,9.85136,11.379685087890625,9.60768,11.646395087890625L12.1689,15.171615087890626C12.2754,15.147615087890625,12.3862,15.134915087890626,12.5,15.134915087890626C12.5965,15.134915087890626,12.6908,15.144015087890624,12.7823,15.161415087890624L16.108800000000002,11.196955087890625C16.0387,11.023375087890624,16,10.833655087890625,16,10.634915087890626C16,9.806495087890625,16.671599999999998,9.134915087890626,17.5,9.134915087890626C18.3284,9.134915087890626,19,9.806495087890625,19,10.634915087890626C19,11.463345087890625,18.3284,12.134915087890626,17.5,12.134915087890626C17.2395,12.134915087890626,16.994500000000002,12.068505087890625,16.781,11.951675087890624L13.6547,15.677415087890624C13.8703,15.937215087890625,14,16.270915087890625,14,16.634915087890626C14,17.463315087890624,13.3284,18.134915087890626,12.5,18.134915087890626C11.67157,18.134915087890626,11,17.463315087890624,11,16.634915087890626C11,16.284415087890626,11.12019,15.962015087890626,11.3216,15.706715087890625L8.71539,12.119565087890624C8.645050000000001,12.129685087890625,8.57314,12.134915087890626,8.5,12.134915087890626C8.162099999999999,12.134915087890626,7.8503,12.023195087890626,7.59952,11.834665087890626L4.50558,15.521915087890624C4.80921,15.796415087890624,5,16.193415087890624,5,16.634915087890626C5,17.463315087890624,4.32843,18.134915087890626,3.5,18.134915087890626C2.671573,18.134915087890626,2,17.463315087890624,2,16.634915087890626C2,15.806515087890626,2.671573,15.134915087890626,3.5,15.134915087890626C3.5082500000000003,15.134915087890626,3.51648,15.135015087890626,3.5247,15.135115087890625L7.03382,10.953115087890625C7.01167,10.850565087890626,7,10.744105087890624,7,10.634915087890626C7,9.806495087890625,7.67157,9.134915087890626,8.5,9.134915087890626C9.32843,9.134915087890626,10,9.806495087890625,10,10.634915087890626Z stroke-opacity=0 stroke=none>');const dz=()=>uz();var hz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M18.8532,7.020985087890625Q19.0257,6.734525087890625,19.0257,6.369945087890625Q19.0257,6.020005087890625,18.8499,5.754705087890625Q18.6758,5.489415087890626,18.3649,5.339675087890625Q18.5944,5.209465087890625,18.7214,4.994615087890625Q18.8499,4.779775087890625,18.8499,4.5193550878906255Q18.8499,4.2003480878906245,18.7002,3.951324087890625Q18.5505,3.700673087890625,18.277,3.557444087890625Q18.0052,3.414215087890625,17.6455,3.414215087890625Q17.285800000000002,3.414215087890625,17.0107,3.557444087890625Q16.7357,3.700673087890625,16.5843,3.951324087890625Q16.4346,4.2003480878906245,16.4346,4.5193550878906255Q16.4346,4.779775087890625,16.561500000000002,4.994615087890625Q16.6901,5.209465087890625,16.919600000000003,5.339675087890625Q16.6055,5.489415087890626,16.4297,5.757965087890625Q16.255499999999998,6.024895087890625,16.255499999999998,6.369945087890625Q16.255499999999998,6.734525087890625,16.4297,7.020985087890625Q16.6055,7.305815087890625,16.919600000000003,7.465325087890625Q17.2354,7.624825087890625,17.6455,7.624825087890625Q18.0557,7.624825087890625,18.3682,7.465325087890625Q18.6807,7.305815087890625,18.8532,7.020985087890625ZM8.76432,7.559725087890625L8.13444,7.559725087890625L8.13444,4.214996087890625L7.28971,4.700025087890625L7.2946,4.070139087890625L8.310220000000001,3.479319087890625L8.76432,3.479319087890625L8.76432,7.559725087890625ZM17.1816,4.955555087890625Q17.0042,4.784655087890625,17.0042,4.5095950878906255Q17.0042,4.229645087890625,17.18,4.057119087890625Q17.355800000000002,3.884592087890625,17.6455,3.884592087890625Q17.935200000000002,3.884592087890625,18.1077,4.057119087890625Q18.2803,4.229645087890625,18.2803,4.5095950878906255Q18.2803,4.784655087890625,18.1045,4.955555087890625Q17.930300000000003,5.124825087890625,17.6455,5.124825087890625Q17.3607,5.124825087890625,17.1816,4.955555087890625ZM18.2217,5.7953950878906255Q18.4398,6.005365087890625,18.4398,6.3552950878906245Q18.4398,6.705235087890625,18.2217,6.915195087890625Q18.0052,7.125155087890625,17.6455,7.125155087890625Q17.285800000000002,7.125155087890625,17.067700000000002,6.915195087890625Q16.849600000000002,6.705235087890625,16.849600000000002,6.3552950878906245Q16.849600000000002,6.005365087890625,17.064500000000002,5.7953950878906255Q17.2793,5.585435087890625,17.6455,5.585435087890625Q18.0052,5.585435087890625,18.2217,5.7953950878906255ZM9.60768,11.711495087890626C9.85136,11.444785087890626,10,11.089765087890626,10,10.700025087890625C10,9.871595087890626,9.32843,9.200025087890625,8.5,9.200025087890625C7.67157,9.200025087890625,7,9.871595087890626,7,10.700025087890625C7,10.809205087890625,7.01167,10.915665087890625,7.03382,11.018215087890624L3.5247,15.200215087890625C3.51648,15.200115087890625,3.5082500000000003,15.200015087890625,3.5,15.200015087890625C2.671573,15.200015087890625,2,15.871615087890625,2,16.700015087890627C2,17.528415087890625,2.671573,18.200015087890627,3.5,18.200015087890627C4.32843,18.200015087890627,5,17.528415087890625,5,16.700015087890627C5,16.258515087890625,4.80921,15.861515087890625,4.50558,15.587015087890626L7.59952,11.899765087890625C7.8503,12.088295087890625,8.162099999999999,12.200025087890625,8.5,12.200025087890625C8.57314,12.200025087890625,8.645050000000001,12.194785087890626,8.71539,12.184675087890625L11.3216,15.771815087890625C11.12019,16.027215087890625,11,16.349515087890623,11,16.700015087890627C11,17.528415087890625,11.67157,18.200015087890627,12.5,18.200015087890627C13.3284,18.200015087890627,14,17.528415087890625,14,16.700015087890627C14,16.336015087890623,13.8703,16.002315087890626,13.6547,15.742515087890625L16.781,12.016775087890625C16.994500000000002,12.133605087890626,17.2395,12.200025087890625,17.5,12.200025087890625C18.3284,12.200025087890625,19,11.528445087890624,19,10.700025087890625C19,9.871595087890626,18.3284,9.200025087890625,17.5,9.200025087890625C16.671599999999998,9.200025087890625,16,9.871595087890626,16,10.700025087890625C16,10.898765087890624,16.0387,11.088475087890625,16.108800000000002,11.262055087890625L12.7823,15.226515087890625C12.6908,15.209115087890625,12.5965,15.200015087890625,12.5,15.200015087890625C12.3862,15.200015087890625,12.2754,15.212715087890626,12.1689,15.236715087890625L9.60768,11.711495087890626Z stroke-opacity=0 stroke=none>');const pz=()=>hz();var fz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M9.474616630859375,7.494615087890625L8.844736630859375,7.494615087890625L8.844736630859375,4.149892087890625L8.000006630859374,4.634915087890625L8.004896630859374,4.005035087890625L9.020516630859376,3.414215087890625L9.474616630859375,3.414215087890625L9.474616630859375,7.494615087890625ZM18.529296630859378,4.8318550878906255Q18.307996630859375,5.028795087890625,18.122396630859377,5.385245087890625Q17.868496630859376,5.019035087890625,17.629196630859376,4.8269750878906255Q17.389996630859375,4.634915087890625,17.168596630859376,4.634915087890625Q16.794296630859375,4.634915087890625,16.522496630859376,4.976715087890625Q16.252296630859377,5.3168850878906255,16.252296630859377,5.7856350878906255Q16.252296630859377,6.218575087890625,16.502896630859375,6.521315087890625Q16.755196630859373,6.822415087890625,17.114896630859377,6.822415087890625Q17.368796630859375,6.822415087890625,17.588596630859374,6.625475087890624Q17.809896630859377,6.428535087890625,17.998696630859374,6.0688350878906245Q18.249396630859373,6.439935087890625,18.488596630859377,6.631985087890625Q18.727896630859377,6.822415087890625,18.952496630859375,6.822415087890625Q19.326796630859373,6.822415087890625,19.596996630859376,6.482245087890625Q19.868796630859375,6.140455087890626,19.868796630859375,5.671705087890626Q19.868796630859375,5.238755087890625,19.618196630859376,4.937655087890625Q19.367496630859375,4.634915087890625,19.006196630859375,4.634915087890625Q18.750696630859377,4.634915087890625,18.529296630859378,4.8318550878906255ZM18.337296630859377,5.674955087890625L18.278696630859375,5.596835087890625Q18.449596630859375,5.272935087890625,18.622096630859374,5.1101750878906245Q18.794596630859374,4.947415087890625,18.967096630859373,4.947415087890625Q19.194996630859375,4.947415087890625,19.346396630859374,5.1345950878906255Q19.497696630859377,5.320135087890625,19.497696630859377,5.598455087890625Q19.497696630859377,5.8914250878906245,19.360996630859376,6.096505087890625Q19.224296630859374,6.301585087890626,19.027396630859375,6.301585087890626Q18.915096630859374,6.301585087890626,18.742496630859375,6.146965087890624Q18.569996630859375,5.992335087890625,18.337296630859377,5.674955087890625ZM17.785496630859377,5.779125087890625L17.842496630859372,5.857245087890625Q17.668296630859373,6.186025087890625,17.495796630859374,6.348785087890625Q17.324896630859374,6.509915087890625,17.153996630859375,6.509915087890625Q16.926096630859377,6.509915087890625,16.774796630859377,6.324375087890624Q16.623396630859375,6.137195087890625,16.623396630859375,5.858875087890625Q16.623396630859375,5.565905087890625,16.761696630859376,5.360825087890625Q16.900096630859373,5.1557550878906255,17.095396630859376,5.1557550878906255Q17.228896630859374,5.1557550878906255,17.365596630859375,5.2778250878906245Q17.502296630859377,5.399895087890625,17.785496630859377,5.779125087890625ZM10.710296630859375,10.634915087890626C10.710296630859375,11.024655087890626,10.561656630859375,11.379685087890625,10.317976630859375,11.646395087890625L12.879196630859376,15.171615087890626C12.985696630859374,15.147615087890625,13.096496630859376,15.134915087890626,13.210296630859375,15.134915087890626C13.306796630859376,15.134915087890626,13.401096630859374,15.144015087890624,13.492596630859374,15.161415087890624L16.819096630859377,11.196955087890625C16.748996630859374,11.023375087890624,16.710296630859375,10.833655087890625,16.710296630859375,10.634915087890626C16.710296630859375,9.806495087890625,17.381896630859373,9.134915087890626,18.210296630859375,9.134915087890626C19.038696630859373,9.134915087890626,19.710296630859375,9.806495087890625,19.710296630859375,10.634915087890626C19.710296630859375,11.463345087890625,19.038696630859373,12.134915087890626,18.210296630859375,12.134915087890626C17.949796630859375,12.134915087890626,17.704796630859377,12.068505087890625,17.491296630859374,11.951675087890624L14.364996630859375,15.677415087890624C14.580596630859375,15.937215087890625,14.710296630859375,16.270915087890625,14.710296630859375,16.634915087890626C14.710296630859375,17.463315087890624,14.038696630859375,18.134915087890626,13.210296630859375,18.134915087890626C12.381866630859374,18.134915087890626,11.710296630859375,17.463315087890624,11.710296630859375,16.634915087890626C11.710296630859375,16.284415087890626,11.830486630859374,15.962015087890626,12.031896630859375,15.706715087890625L9.425686630859374,12.119565087890624C9.355346630859376,12.129685087890625,9.283436630859375,12.134915087890626,9.210296630859375,12.134915087890626C8.872396630859374,12.134915087890626,8.560596630859376,12.023195087890626,8.309816630859375,11.834665087890626L5.215876630859375,15.521915087890624C5.519506630859375,15.796415087890624,5.710296630859375,16.193415087890624,5.710296630859375,16.634915087890626C5.710296630859375,17.463315087890624,5.038726630859375,18.134915087890626,4.210296630859375,18.134915087890626C3.381869630859375,18.134915087890626,2.710296630859375,17.463315087890624,2.710296630859375,16.634915087890626C2.710296630859375,15.806515087890626,3.381869630859375,15.134915087890626,4.210296630859375,15.134915087890626C4.218546630859375,15.134915087890626,4.226776630859375,15.135015087890626,4.234996630859375,15.135115087890625L7.744116630859375,10.953115087890625C7.721966630859375,10.850565087890626,7.710296630859375,10.744105087890624,7.710296630859375,10.634915087890626C7.710296630859375,9.806495087890625,8.381866630859374,9.134915087890626,9.210296630859375,9.134915087890626C10.038726630859376,9.134915087890626,10.710296630859375,9.806495087890625,10.710296630859375,10.634915087890626Z stroke-opacity=0 stroke=none>');const gz=()=>fz();var vz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M21,5.5C21,6.32843,20.3284,7,19.5,7C19.4136,7,19.3289,6.99269,19.2465,6.97866L15.6257,15.5086C15.8587,15.7729,16,16.119999999999997,16,16.5C16,17.328400000000002,15.3284,18,14.5,18C13.8469,18,13.2913,17.5826,13.0854,17L3.91465,17C3.70873,17.5826,3.15311,18,2.5,18C1.671573,18,1,17.328400000000002,1,16.5C1,15.6716,1.671573,15,2.5,15C2.5840199999999998,15,2.66643,15.0069,2.74668,15.0202L6.36934,6.48574C6.13933,6.22213,6,5.87733,6,5.5C6,4.671573,6.67157,4,7.5,4C8.15311,4,8.70873,4.417404,8.91465,5L18.0854,5C18.2913,4.417404,18.8469,4,19.5,4C20.3284,4,21,4.671573,21,5.5ZM18.0854,6L8.91465,6C8.892579999999999,6.06243,8.8665,6.12296,8.83672,6.18128L13.9814,15.0921C14.143,15.0325,14.3177,15,14.5,15C14.584,15,14.6664,15.0069,14.7467,15.0202L18.3693,6.48574C18.2462,6.3446,18.149,6.1802,18.0854,6ZM13.2036,15.745L8.0861,6.8811800000000005C7.90605,6.95768,7.70797,7,7.5,7C7.41359,7,7.32888,6.99269,7.24647,6.97866L3.62571,15.5086C3.7512,15.651,3.8501,15.8174,3.91465,16L13.0854,16C13.1169,15.9108,13.1566,15.8255,13.2036,15.745Z stroke-opacity=0 stroke=none>');const mz=()=>vz();var yz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M5.92159,5.93994C6.04014,5.90529,6.152620000000001,5.85639,6.25704,5.79523L9.12729,9.89437C9.045449999999999,10.07959,9,10.28449,9,10.5C9,10.79522,9.08529,11.07053,9.232569999999999,11.30262L4.97573,16.7511L5.92159,5.93994ZM4.92259,5.8848400000000005C4.38078,5.658659999999999,4,5.1238,4,4.5C4,3.671573,4.67157,3,5.5,3C6.2157,3,6.81433,3.50124,6.96399,4.17183L15.1309,4.88634C15.3654,4.36387,15.8902,4,16.5,4C17.328400000000002,4,18,4.67157,18,5.5C18,6.08983,17.659599999999998,6.60015,17.1645,6.84518L18.4264,14.0018C18.4508,14.0006,18.4753,14,18.5,14C19.3284,14,20,14.6716,20,15.5C20,16.328400000000002,19.3284,17,18.5,17C17.932499999999997,17,17.4386,16.6849,17.183799999999998,16.22L5.99686,18.5979C5.946429999999999,19.3807,5.29554,20,4.5,20C3.671573,20,3,19.3284,3,18.5C3,17.869300000000003,3.389292,17.3295,3.94071,17.1077L4.92259,5.8848400000000005ZM5.72452,17.6334C5.69799,17.596,5.6698,17.5599,5.64004,17.525100000000002L10.01843,11.92103C10.16958,11.97223,10.33155,12,10.5,12C10.80059,12,11.08052,11.91158,11.31522,11.75934L17.0606,15.0765C17.0457,15.1271,17.0335,15.1789,17.023899999999998,15.2317L5.72452,17.6334ZM11.92855,10.95875L17.4349,14.1379L16.1699,6.96356C15.9874,6.92257,15.8174,6.8483,15.6667,6.74746L11.99771,10.4165C11.99923,10.44414,12,10.47198,12,10.5C12,10.66,11.97495,10.814160000000001,11.92855,10.95875ZM10.5,9C10.259830000000001,9,10.03285,9.05644,9.83159,9.15679L7.04919,5.1831L15.0493,5.88302C15.054,5.90072,15.059,5.91829,15.0643,5.9357299999999995L11.56066,9.43934C11.28921,9.16789,10.91421,9,10.5,9Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const bz=()=>yz();var xz=Q('<svg viewBox="0 0 22 22"><path d=M4.727219638671875,8.007996215820313L9.973849638671876,2.7629472158203123C10.167279638671875,2.5696791158203123,10.480729638671875,2.5696791158203123,10.674169638671875,2.7629472158203123L13.223329638671874,5.311756215820313C13.416929638671874,5.505236215820313,13.416929638671874,5.8189862158203125,13.223329638671874,6.012466215820313L7.977129638671875,11.257906215820313C7.379859638671875,11.855176215820313,7.407609638671875,12.909396215820312,8.033809638671876,13.535596215820313C8.660409638671876,14.162596215820313,9.713849638671874,14.189996215820312,10.311129638671876,13.591896215820313L15.556929638671875,8.346066215820311C15.750429638671875,8.152526215820313,16.064229638671875,8.152526215820313,16.257629638671872,8.346066215820311L18.806529638671876,10.895266215820312C19.000029638671876,11.088746215820313,19.000029638671876,11.402496215820312,18.806529638671876,11.595976215820313L13.560629638671875,16.841796215820313C11.165619638671876,19.237196215820312,7.197149638671875,19.19919621582031,4.783499638671875,16.785496215820313C2.3698426386718747,14.371896215820312,2.331397638671875,10.403416215820313,4.727219638671875,8.007996215820313ZM12.172299638671875,5.662106215820312L10.323809638671875,3.8136162158203124L5.4287196386718755,8.709096215820313C3.422893638671875,10.714536215820312,3.4549956386718748,14.055196215820313,5.484999638671875,16.08479621582031C7.514609638671875,18.114796215820313,10.855289638671875,18.146496215820314,12.860719638671876,16.141096215820312L15.465629638671874,13.535796215820312L14.090929638671875,12.160756215820312L14.791629638671875,11.460436215820312L16.166229638671876,12.834996215820313L17.755829638671877,11.245226215820313L15.907729638671874,9.396736215820312L11.011839638671875,14.292596215820312C10.042809638671875,15.262396215820312,8.418249638671874,15.243796215820312,7.406019638671875,14.306496215820312L7.333099638671875,14.236296215820312C6.327599638671876,13.230796215820313,6.284009638671876,11.550396215820312,7.276419638671875,10.557586215820312L9.882199638671874,7.952026215820313L8.501079638671875,6.570906215820313L9.201789638671876,5.870186215820313L10.582939638671874,7.251336215820312L12.172299638671875,5.662106215820312Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const wz=e=>(()=>{var t=xz();return We(t,"class",`icon-overlay ${e??""}`),t})();var Cz=Q('<svg viewBox="0 0 22 22"><defs><clipPath id=master_svg0_151_615><rect x=0 y=0 width=22 height=22 rx=0></rect></clipPath></defs><g clip-path=url(#master_svg0_151_615)><path d=M19.672,3.0673368C19.4417,2.9354008,19.1463,3.00292252,18.9994,3.2210900000000002L17.4588,5.50622L16.743299999999998,3.781253L13.9915,7.4662L13.9618,7.51108C13.8339,7.72862,13.8936,8.005659999999999,14.1004,8.15391L14.1462,8.183430000000001C14.3683,8.308720000000001,14.6511,8.25001,14.8022,8.047229999999999L16.4907,5.78571L17.246299999999998,7.60713L19.8374,3.7635389999999997L19.8651,3.717088C19.9871,3.484615,19.9023,3.199273,19.672,3.0673368ZM4.79974,8.462530000000001L10.117740000000001,3.252975C10.31381,3.0610145,10.63152,3.0610145,10.82759,3.252975L13.4115,5.78453C13.6076,5.976710000000001,13.6076,6.28833,13.4115,6.4805L8.093869999999999,11.69045C7.48847,12.28368,7.51659,13.3308,8.151309999999999,13.9528C8.786439999999999,14.5755,9.85421,14.6027,10.45961,14.0087L15.7768,8.79831C15.9729,8.60609,16.2909,8.60609,16.487099999999998,8.79831L19.0705,11.33026C19.2667,11.52244,19.2667,11.83406,19.0705,12.02623L13.7533,17.2366C11.32572,19.6158,7.30328,19.578,4.85679,17.1807C2.410298,14.7834,2.371331,10.84174,4.79974,8.462530000000001ZM12.3461,6.1325199999999995L10.47246,4.29654L5.51079,9.15889C3.477674,11.15076,3.510214,14.4688,5.56784,16.4847C7.62506,18.500999999999998,11.01117,18.5325,13.0439,16.540599999999998L15.6842,13.9529L14.2908,12.58718L15.0011,11.89161L16.394399999999997,13.2569L18.0056,11.67786L16.1323,9.84188L11.16985,14.7046C10.18764,15.6679,8.540980000000001,15.6494,7.51498,14.7184L7.44107,14.6487C6.4219,13.65,6.37771,11.98096,7.38362,10.994869999999999L10.02485,8.40693L8.624939999999999,7.03516L9.335180000000001,6.33919L10.73512,7.71099L12.3461,6.1325199999999995Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const _z=e=>(()=>{var t=Cz();return We(t,"class",`icon-overlay ${e??""}`),t})();var Sz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11,17C5.80945,17,3.667717,12.85,3.113386,11.575C2.9622047,11.2,2.9622047,10.8,3.113386,10.425C3.667717,9.15,5.80945,5,11,5C16.165399999999998,5,18.3323,9.15,18.8866,10.425C19.0378,10.8,19.0378,11.2,18.8866,11.575C18.3323,12.85,16.165399999999998,17,11,17ZM4.04567,10.8C3.995276,10.925,3.995276,11.05,4.04567,11.175C4.52441,12.325,6.43937,16,11,16C15.5606,16,17.4756,12.325,17.9543,11.2C18.0047,11.075,18.0047,10.95,17.9543,10.825C17.4756,9.675,15.5606,6,11,6C6.43937,6,4.52441,9.675,4.04567,10.8ZM11,13.5C9.61417,13.5,8.480319999999999,12.375,8.480319999999999,11C8.480319999999999,9.625,9.61417,8.5,11,8.5C12.38583,8.5,13.5197,9.625,13.5197,11C13.5197,12.375,12.38583,13.5,11,13.5ZM11,9.5C10.1685,9.5,9.48819,10.175,9.48819,11C9.48819,11.825,10.1685,12.5,11,12.5C11.8315,12.5,12.51181,11.825,12.51181,11C12.51181,10.175,11.8315,9.5,11,9.5Z stroke-opacity=0 fill-opacity=1>');const kz=()=>Sz();var Tz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M5.80417,14.9887L4.62563,16.167299999999997C4.43037,16.3625,4.43037,16.6791,4.62563,16.8744C4.82089,17.0696,5.13748,17.0696,5.332739999999999,16.8744L6.62638,15.5807C7.75595,16.290100000000002,9.19328,16.7929,11,16.7929C16.165399999999998,16.7929,18.3323,12.64289,18.8866,11.36789C19.0378,10.99289,19.0378,10.59289,18.8866,10.21789C18.5549,9.45486,17.6456,7.66212,15.8617,6.34545L17.3536,4.853553C17.5488,4.658291,17.5488,4.341709,17.3536,4.146447C17.1583,3.9511845,16.8417,3.9511845,16.6464,4.146447L15.0014,5.7915399999999995C13.9314,5.1969,12.61166,4.792893,11,4.792893C5.80945,4.792893,3.667717,8.94289,3.113386,10.21789C2.9622049,10.59289,2.9622049,10.99289,3.113386,11.36789C3.424435,12.08333,4.2353000000000005,13.70399,5.80417,14.9887ZM7.36012,14.847C8.32327,15.4074,9.52286,15.7929,11,15.7929C15.5606,15.7929,17.4756,12.11789,17.9543,10.99289C18.0047,10.86789,18.0047,10.74289,17.9543,10.61789C17.659,9.90846,16.8171,8.23812,15.1447,7.06241L12.96929,9.23782C13.3134,9.66543,13.5197,10.20642,13.5197,10.79289C13.5197,12.16789,12.38583,13.29289,11,13.29289C10.41596,13.29289,9.87667,13.09308,9.44815,12.75896L7.36012,14.847ZM8.794609999999999,11.99829L6.520099999999999,14.2728C5.06905,13.12119,4.32057,11.628250000000001,4.04567,10.96789C3.995275,10.84289,3.995275,10.71789,4.04567,10.59289C4.52441,9.46789,6.43937,5.79289,11,5.79289C12.28868,5.79289,13.3661,6.086320000000001,14.2596,6.53329L12.19759,8.5953C11.84086,8.40257,11.43271,8.29289,11,8.29289C9.61417,8.29289,8.480319999999999,9.41789,8.480319999999999,10.79289C8.480319999999999,11.22918,8.594470000000001,11.64029,8.794609999999999,11.99829ZM10.16528,12.04183C10.404869999999999,12.20032,10.692070000000001,12.29289,11,12.29289C11.8315,12.29289,12.51181,11.61789,12.51181,10.79289C12.51181,10.48318,12.41593,10.194600000000001,12.25216,9.95494L10.16528,12.04183ZM11.43602,9.35687L9.55616,11.236740000000001C9.512,11.09633,9.48819,10.94724,9.48819,10.79289C9.48819,9.96789,10.1685,9.29289,11,9.29289C11.15142,9.29289,11.29782,9.31528,11.43602,9.35687Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Ez=()=>Tz();var Mz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><defs><clipPath id=master_svg0_151_625><rect x=0 y=0 width=22 height=22 rx=0></rect></clipPath></defs><g clip-path=url(#master_svg0_151_625)><path d=M14.5385,9.76923L15.6538,9.76923C16.6538,9.76923,17.4615,10.576920000000001,17.4615,11.576920000000001L17.4615,17.1923C17.4615,18.1923,16.6538,19,15.6538,19L5.80769,19C4.807692,19,4,18.1923,4,17.1923L4,11.576920000000001C4,10.576920000000001,4.807692,9.76923,5.80769,9.76923L7.23077,9.76923L7.23077,7.576919999999999C7.23077,5.61538,8.88462,4,10.88462,4C12.88462,4,14.5385,5.61538,14.5385,7.576919999999999L14.5385,9.76923ZM10.88461,5.15385C9.5,5.15385,8.38461,6.23077,8.38461,7.576919999999999L8.38461,9.76923L13.38462,9.76923L13.38462,7.576919999999999C13.38462,6.23077,12.26923,5.15385,10.88461,5.15385ZM15.6538,17.8462C16,17.8462,16.3077,17.5385,16.3077,17.1923L16.3077,11.576920000000001C16.3077,11.23077,16,10.923079999999999,15.6538,10.923079999999999L5.80769,10.923079999999999C5.46154,10.923079999999999,5.15385,11.23077,5.15385,11.576920000000001L5.15385,17.1923C5.15385,17.5385,5.46154,17.8462,5.80769,17.8462L15.6538,17.8462ZM10.153839999999999,12.65385C10.153839999999999,12.34615,10.42307,12.07692,10.73076,12.07692C11.038450000000001,12.07692,11.307680000000001,12.34615,11.307680000000001,12.65385L11.307680000000001,14.5769C11.307680000000001,14.8846,11.038450000000001,15.1538,10.73076,15.1538C10.42307,15.1538,10.153839999999999,14.8846,10.153839999999999,14.5769L10.153839999999999,12.65385Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Iz=()=>Mz();var Lz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><defs><clipPath id=master_svg0_151_620><rect x=0 y=0 width=22 height=22 rx=0></rect></clipPath></defs><g clip-path=url(#master_svg0_151_620)><path d=M8.38461,9.76923L15.6538,9.76923C16.6538,9.76923,17.4615,10.576920000000001,17.4615,11.576920000000001L17.4615,17.1923C17.4615,18.1923,16.6538,19,15.6538,19L5.80769,19C4.807692,19,4,18.1923,4,17.1923L4,11.576920000000001C4,10.576920000000001,4.807693,9.76923,5.80769,9.76923L7.23077,9.76923L7.23077,7.576919999999999C7.23077,5.61538,8.88462,4,10.88462,4C12.46154,4,13.84615,4.961539,14.3462,6.423080000000001C14.4615,6.73077,14.3077,7.038460000000001,14,7.15385C13.69231,7.26923,13.38461,7.11538,13.26923,6.80769C12.92308,5.80769,11.96154,5.15385,10.88462,5.15385C9.5,5.15385,8.38461,6.23077,8.38461,7.576919999999999L8.38461,9.76923ZM15.6538,17.8462C16,17.8462,16.3077,17.5385,16.3077,17.1923L16.3077,11.576920000000001C16.3077,11.23077,16,10.923079999999999,15.6538,10.923079999999999L5.80769,10.923079999999999C5.46154,10.923079999999999,5.15385,11.23077,5.15385,11.576920000000001L5.15385,17.1923C5.15385,17.5385,5.46154,17.8462,5.80769,17.8462L15.6538,17.8462ZM10.153839999999999,12.65385C10.153839999999999,12.34615,10.42307,12.07692,10.73076,12.07692C11.03846,12.07692,11.307690000000001,12.34615,11.307690000000001,12.65385L11.307690000000001,14.5769C11.307690000000001,14.8846,11.03846,15.1538,10.73076,15.1538C10.42307,15.1538,10.153839999999999,14.8846,10.153839999999999,14.5769L10.153839999999999,12.65385Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Pz=()=>Lz();var Az=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M16.966900000000003,8.67144C16.6669,8.67144,16.4247,8.91558,16.4247,9.21802L16.4247,16.631500000000003C16.4247,17.322,16.007199999999997,17.9068,15.5139,17.9068L13.93072,17.9068L13.93072,9.2162C13.93072,8.91741,13.68675,8.67144,13.38855,8.67144C13.09036,8.67144,12.84639,8.91741,12.84639,9.21802L12.84639,17.9068L10.151810000000001,17.9068L10.151810000000001,9.21802C10.151810000000001,8.91741,9.90783,8.67144,9.609639999999999,8.67144C9.31145,8.67144,9.06747,8.91741,9.06747,9.219850000000001L9.06747,17.9068L7.48614,17.9068C6.99277,17.9068,6.5753,17.322,6.5753,16.631500000000003L6.5753,9.21802C6.5753,8.91558,6.333130000000001,8.67144,6.03313,8.67144C5.73313,8.67144,5.49096,8.91558,5.49096,9.21802L5.49096,16.631500000000003C5.49096,17.9378,6.385540000000001,19,7.48614,19L15.512,19C16.6127,19,17.509,17.9378,17.509,16.631500000000003L17.509,9.21802C17.509,8.91558,17.2669,8.67144,16.966900000000003,8.67144ZM18.4578,6.21183L4.542169,6.21183C4.243976,6.21183,4,6.45779,4,6.75841C4,7.05903,4.243976,7.30499,4.542169,7.30499L18.4578,7.30499C18.756,7.30499,19,7.05903,19,6.75841C19,6.45779,18.756,6.21183,18.4578,6.21183ZM8.68072,5.10045L14.3193,5.10045C14.6175,5.10045,14.8614,4.852666,14.8614,4.550225C14.8614,4.247783,14.6175,4,14.3193,4L8.68072,4C8.38253,4,8.13855,4.247783,8.13855,4.550225C8.13855,4.852666,8.38253,5.10045,8.68072,5.10045Z stroke-opacity=0 fill-opacity=1>');const Dz=()=>Az();var Fz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d=m15.57,0.2l-15.37,15.37l6.33,6.33l15.37,-15.37l-6.33,-6.33zm-13.56,15.37l0.89,-0.89l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.92,-0.92l0.9,0.9l0.9,-0.9l-0.9,-0.9l0.9,-0.9l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.89,-0.89l0.9,0.9l0.9,-0.9l-0.9,-0.9l0.9,-0.9l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.92,-0.92l0.9,0.9l0.9,-0.9l-0.9,-0.9l0.9,-0.9l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.91,-0.91l4.52,4.52l-13.56,13.56l-4.52,-4.52z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Rz=()=>Fz();var Oz=Q('<svg width=30 height=40 fill=currentColor stroke=currentColor stroke-width=0.06 stroke-linecap=round fill-rule=evenodd clip-rule=evenodd shape-rendering=geometricPrecision text-rendering=geometricPrecision viewBox="0 0 1.45 1.63"><circle transform="matrix(-1.01724 -0.370788 0.370788 -1.01724 0.140283 1.49275)"r=0.13></circle><line fill=transparent x1=0.15 y1=1.49 x2=1.31 y2=1.49></line><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.140293 0.140278)"r=0.13></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.140293 0.945028)"r=0.13></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 1.3066 0.945028)"r=0.13></circle><line fill=transparent x1=1.31 y1=0.14 x2=0.15 y2=0.14></line><line fill=transparent x1=1.31 y1=0.95 x2=0.15 y2=0.95></line><line fill=transparent x1=0.65 y1=1.11 x2=0.65 y2=0.53></line><path fill=transparent d="M0.8 0.42l-0.11 -0.17c-0.02,-0.03 -0.05,-0.03 -0.08,0l-0.11 0.17c-0.02,0.04 -0.02,0.09 0,0.13 0.15,0 0.15,0 0.3,0 0.02,-0.04 0.02,-0.09 0,-0.13z"></path><path fill=transparent d="M0.8 1.21l-0.11 0.17c-0.02,0.04 -0.05,0.03 -0.08,0l-0.11 -0.17c-0.02,-0.04 -0.02,-0.09 0,-0.13 0.15,0 0.15,0 0.3,0 0.02,0.04 0.02,0.09 0,0.13z">');const Nz=()=>Oz();var zz=Q('<svg width=30 height=40 fill=currentColor stroke=currentColor stroke-width=0.06 stroke-linecap=round fill-rule=evenodd clip-rule=evenodd shape-rendering=geometricPrecision text-rendering=geometricPrecision viewBox="0 0 1.71 1.93"><circle transform="matrix(-1.01724 -0.370788 0.370788 -1.01724 0.165745 1.76369)"r=0.15></circle><line fill=none x1=0.18 y1=1.76 x2=1.54 y2=1.76></line><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.165756 0.165739)"r=0.15></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.165756 0.788812)"r=0.15></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 1.54375 0.788812)"r=0.15></circle><line fill=none x1=1.54 y1=0.17 x2=0.18 y2=0.17></line><line fill=none x1=1.54 y1=0.79 x2=0.18 y2=0.79></line><line fill=none x1=0.77 y1=1.31 x2=0.77 y2=0.63></line><path fill=transparent d="M0.95 0.5l-0.13 -0.2c-0.03,-0.04 -0.07,-0.04 -0.09,0l-0.13 0.2c-0.03,0.04 -0.03,0.11 0,0.15 0.16,0 0.17,0 0.35,0 0.02,-0.04 0.02,-0.11 0,-0.15z"></path><path fill=transparent d="M0.95 1.43l-0.13 0.2c-0.03,0.04 -0.07,0.04 -0.09,0l-0.13 -0.2c-0.03,-0.04 -0.03,-0.11 0,-0.15 0.16,0 0.17,0 0.35,0 0.02,0.04 0.02,0.11 0,0.15z">');const Bz=()=>zz();var $z=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d="M6 4V18M4 18H8M10 7V4H2V7M17 4V18M17 4L14 7M17 4L20 7M17 18L14 15M17 18L20 15"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');const Vz=()=>$z();var Wz=Q('<svg class=icon-overlay viewBox="0 0 22 22"><path d="M11 2V11M8 11H14M19 5V2H3V5M3 17H19M3 17L6 20M3 17L6 14M19 17L16 20M19 17L16 14"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');const Uz=()=>Wz(),Hz={horizontalStraightLine:gN,horizontalRayLine:mN,horizontalSegment:bN,verticalStraightLine:wN,verticalRayLine:_N,verticalSegment:kN,straightLine:EN,rayLine:IN,segment:PN,arrow:DN,priceLine:RN,priceChannelLine:NN,parallelStraightLine:BN,fibonacciLine:VN,fibonacciSegment:UN,fibonacciCircle:YN,fibonacciSpiral:jN,fibonacciSpeedResistanceFan:GN,fibonacciExtension:KN,gannBox:JN,circle:tz,triangle:nz,rect:oz,parallelogram:sz,threeWaves:cz,fiveWaves:dz,eightWaves:pz,anyWaves:gz,abcd:mz,xabcd:bz,weak_magnet:wz,strong_magnet:_z,lock:Iz,unlock:Pz,visible:kz,invisible:Ez,remove:Dz,ruler:Rz,longPosition:Nz,shortPosition:Bz,simpleAnnotation:Vz,simpleTag:Uz};function Yz(e){return[{key:"horizontalStraightLine",text:I("horizontal_straight_line",e)},{key:"horizontalRayLine",text:I("horizontal_ray_line",e)},{key:"horizontalSegment",text:I("horizontal_segment",e)},{key:"verticalStraightLine",text:I("vertical_straight_line",e)},{key:"verticalRayLine",text:I("vertical_ray_line",e)},{key:"verticalSegment",text:I("vertical_segment",e)},{key:"straightLine",text:I("straight_line",e)},{key:"rayLine",text:I("ray_line",e)},{key:"segment",text:I("segment",e)},{key:"arrow",text:I("arrow",e)},{key:"priceLine",text:I("price_line",e)}]}function Xz(e){return[{key:"priceChannelLine",text:I("price_channel_line",e)},{key:"parallelStraightLine",text:I("parallel_straight_line",e)}]}function jz(e){return[{key:"circle",text:I("circle",e)},{key:"rect",text:I("rect",e)},{key:"parallelogram",text:I("parallelogram",e)},{key:"triangle",text:I("triangle",e)}]}function Zz(e){return[{key:"fibonacciLine",text:I("fibonacci_line",e)},{key:"fibonacciSegment",text:I("fibonacci_segment",e)},{key:"fibonacciCircle",text:I("fibonacci_circle",e)},{key:"fibonacciSpiral",text:I("fibonacci_spiral",e)},{key:"fibonacciSpeedResistanceFan",text:I("fibonacci_speed_resistance_fan",e)},{key:"fibonacciExtension",text:I("fibonacci_extension",e)},{key:"gannBox",text:I("gann_box",e)}]}function Gz(e){return[{key:"xabcd",text:I("xabcd",e)},{key:"abcd",text:I("abcd",e)},{key:"threeWaves",text:I("three_waves",e)},{key:"fiveWaves",text:I("five_waves",e)},{key:"eightWaves",text:I("eight_waves",e)},{key:"anyWaves",text:I("any_waves",e)}]}function Qz(e){return[{key:"weak_magnet",text:I("weak_magnet",e)},{key:"strong_magnet",text:I("strong_magnet",e)}]}function Kz(e){return[{key:"ruler",text:I("ruler",e)}]}function qz(e){return[{key:"longPosition",text:I("long_position",e)},{key:"shortPosition",text:I("short_position",e)}]}function Jz(e){return[{key:"simpleAnnotation",text:I("simpleAnnotation",e)},{key:"simpleTag",text:I("simpleTag",e)}]}const Io=e=>Hz[e.name](e.class);var bg=Q("<span class=split-line>"),eB=Q('<div class=item tabindex=0><span style=width:32px;height:32px></span><div class=icon-arrow><svg viewBox="0 0 4 6"><path d=M1.07298,0.159458C0.827521,-0.0531526,0.429553,-0.0531526,0.184094,0.159458C-0.0613648,0.372068,-0.0613648,0.716778,0.184094,0.929388L2.61275,3.03303L0.260362,5.07061C0.0149035,5.28322,0.0149035,5.62793,0.260362,5.84054C0.505822,6.05315,0.903789,6.05315,1.14925,5.84054L3.81591,3.53075C4.01812,3.3556,4.05374,3.0908,3.92279,2.88406C3.93219,2.73496,3.87113,2.58315,3.73964,2.46925L1.07298,0.159458Z stroke=none stroke-opacity=0>'),xg=Q("<div class=item><span style=width:32px;height:32px>"),tB=Q("<div class=chartspire-ui-drawing-bar><div class=toggle-container>"),my=Q("<div class=item tabindex=0><span style=width:32px;height:32px>"),yy=Q('<div class=icon-arrow><svg viewBox="0 0 4 6"><path d=M1.07298,0.159458C0.827521,-0.0531526,0.429553,-0.0531526,0.184094,0.159458C-0.0613648,0.372068,-0.0613648,0.716778,0.184094,0.929388L2.61275,3.03303L0.260362,5.07061C0.0149035,5.28322,0.0149035,5.62793,0.260362,5.84054C0.505822,6.05315,0.903789,6.05315,1.14925,5.84054L3.81591,3.53075C4.01812,3.3556,4.05374,3.0908,3.92279,2.88406C3.93219,2.73496,3.87113,2.58315,3.73964,2.46925L1.07298,0.159458Z stroke=none stroke-opacity=0>'),rB=Q("<div class=chartspire-ui-drawing-bar-dropdowns><div class=dropdown-list>"),nB=Q('<li style="cursor:pointer;display:flex;align-items:center;padding:8px 12px;user-select:none;"><div class=icon-overlay style=pointer-events:none;></div><span style=pointer-events:none;>');const wg="drawing_tools",iB=e=>{const[t,r]=be("horizontalStraightLine"),[n,i]=be("priceChannelLine"),[o,s]=be("circle"),[u,d]=be("fibonacciLine"),[h,p]=be("xabcd"),[g,m]=be("ruler"),[b,x]=be("longPosition"),[C,_]=be("simpleAnnotation"),[k,M]=be("weak_magnet"),[L,A]=be("normal"),[P,$]=be(!1),[R,z]=be(!0),[B,W]=be(""),[X,ee]=be({top:0,item:null});let U={};const q=ir(()=>[{key:"singleLine",icon:t(),list:Yz(e.locale),setter:r},{key:"moreLine",icon:n(),list:Xz(e.locale),setter:i},{key:"polygon",icon:o(),list:jz(e.locale),setter:s},{key:"fibonacci",icon:u(),list:Zz(e.locale),setter:d},{key:"wave",icon:h(),list:Gz(e.locale),setter:p},{key:"ruler",icon:g(),list:Kz(e.locale),setter:m}]),ie=ir(()=>[{key:"simpleAnnotation",icon:C(),list:Jz(e.locale),setter:_},{key:"longPosition",icon:b(),list:qz(e.locale),setter:x}]),le=ir(()=>Qz(e.locale)),ae=ir(()=>{const ue=B();return ue?ue==="mode"?{key:"mode",list:le(),setter:M}:[...q(),...ie()].find(j=>j.key===ue):null}),te=ue=>{var j;const Z=U[ue];if(!Z)return;const pe=Z.getBoundingClientRect(),Y=(j=Z.closest(".chartspire-ui-drawing-bar"))==null?void 0:j.getBoundingClientRect();if(Y){const fe=pe.top-Y.top;ee({top:fe,item:ae()})}};nt(()=>{const ue=B();ue&&U[ue]&&te(ue)});const ce=ue=>{ue===B()?W(""):(W(ue),setTimeout(()=>te(ue),10))};return[(()=>{var ue=tB(),j=ue.firstChild;return F(ue,G(ze,{get when(){return!e.drawingBarCollapsed},get children(){return[Ae(()=>q().map(Z=>(()=>{var pe=my(),Y=pe.firstChild;return pe.addEventListener("blur",()=>{W("")}),hi(fe=>U[Z.key]=fe,pe),Y.$$click=()=>{e.onDrawingItemClick({groupId:wg,name:Z.icon,visible:R(),lock:P(),mode:L()})},F(Y,G(Io,{get name(){return Z.icon}})),F(pe,(()=>{var fe=Ae(()=>Z.list.length>1);return()=>fe()&&(()=>{var ve=yy(),$e=ve.firstChild;return ve.$$click=()=>ce(Z.key),De(()=>We($e,"class",Z.key===B()?"rotate":"")),ve})()})(),null),pe})())),bg(),Ae(()=>ie().map(Z=>(()=>{var pe=my(),Y=pe.firstChild;return pe.addEventListener("blur",()=>{W("")}),hi(fe=>U[Z.key]=fe,pe),Y.$$click=()=>{e.onDrawingItemClick({groupId:wg,name:Z.icon,visible:R(),lock:P(),mode:L()})},F(Y,G(Io,{get name(){return Z.icon}})),F(pe,(()=>{var fe=Ae(()=>Z.list.length>1);return()=>fe()&&(()=>{var ve=yy(),$e=ve.firstChild;return ve.$$click=()=>ce(Z.key),De(()=>We($e,"class",Z.key===B()?"rotate":"")),ve})()})(),null),pe})())),bg(),(()=>{var Z=eB(),pe=Z.firstChild,Y=pe.nextSibling,fe=Y.firstChild;return Z.addEventListener("blur",()=>{W("")}),hi(ve=>U.mode=ve,Z),pe.$$click=()=>{let ve=k();L()!=="normal"&&(ve="normal"),A(ve),e.onModeChange(ve)},F(pe,(()=>{var ve=Ae(()=>k()==="weak_magnet");return()=>ve()?Ae(()=>L()==="weak_magnet")()?G(Io,{name:"weak_magnet",class:"selected"}):G(Io,{name:"weak_magnet"}):Ae(()=>L()==="strong_magnet")()?G(Io,{name:"strong_magnet",class:"selected"}):G(Io,{name:"strong_magnet"})})()),Y.$$click=()=>ce("mode"),De(()=>We(fe,"class",B()==="mode"?"rotate":"")),Z})(),(()=>{var Z=xg(),pe=Z.firstChild;return pe.$$click=()=>{const Y=!P();$(Y),e.onLockChange(Y)},F(pe,(()=>{var Y=Ae(()=>!!P());return()=>Y()?G(Io,{name:"lock"}):G(Io,{name:"unlock"})})()),Z})(),(()=>{var Z=xg(),pe=Z.firstChild;return pe.$$click=()=>{const Y=!R();z(Y),e.onVisibleChange(Y)},F(pe,(()=>{var Y=Ae(()=>!!R());return()=>Y()?G(Io,{name:"visible"}):G(Io,{name:"invisible"})})()),Z})(),bg(),(()=>{var Z=xg(),pe=Z.firstChild;return pe.$$click=()=>{e.onRemoveClick(wg)},F(pe,G(Io,{name:"remove"})),Z})()]}}),j),F(j,G(vv,{get isExpanded(){return!e.drawingBarCollapsed},onClick:()=>{e.setDrawingBarCollapsed(!e.drawingBarCollapsed)},get ariaLabel(){return e.drawingBarCollapsed?"Expand drawing bar":"Collapse drawing bar"},className:"toggle-button",startingDirection:"left"})),De(()=>We(ue,"data-collapsed",e.drawingBarCollapsed.toString())),ue})(),Ae(()=>Ae(()=>!!(B()&&ae()))()&&(()=>{var ue=rB(),j=ue.firstChild;return j.$$click=Z=>{Z.stopPropagation()},F(j,()=>{var Z;return(Z=ae())==null?void 0:Z.list.map((pe,Y)=>(()=>{var fe=nB(),ve=fe.firstChild,$e=ve.nextSibling;return fe.$$mousedown=Ie=>{var Oe;Ie.preventDefault(),Ie.stopPropagation(),B()==="mode"?(M(pe.key),A(pe.key),e.onModeChange(pe.key)):((Oe=ae())==null||Oe.setter(pe.key),e.onDrawingItemClick({name:pe.key,lock:P(),mode:L()})),W("")},F(ve,G(Io,{get name(){return pe.key}})),F($e,()=>pe.text),fe})())}),De(Z=>Tn(j,`top: ${X().top}px`,Z)),ue})())]};jt(["click","mousedown"]);var oB=Q("<img style=width:500px;margin-top:20px>");const aB=e=>G(Rl,{get title(){return I("screenshot",e.locale)},width:540,get buttons(){return[{type:"confirm",children:I("save",e.locale),onClick:()=>{const t=document.createElement("a");t.download="screenshot",t.href=e.url,document.body.appendChild(t),t.click(),t.remove()}}]},get onClose(){return e.onClose},get children(){var t=oB();return De(()=>We(t,"src",e.url)),t}}),sB={AO:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:5},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:34}],BIAS:[{paramNameKey:"BIAS1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"BIAS2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"BIAS3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"BIAS4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"BIAS5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],BOLL:[{paramNameKey:"period",type:"number",precision:0,min:1,default:20},{paramNameKey:"standard_deviation",type:"number",precision:2,min:1,default:2}],BRAR:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:26}],BBI:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:3},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_4",type:"number",precision:0,min:1,default:24}],CCI:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:20}],CR:[{paramNameKey:"cr",type:"number",precision:0,min:1,default:26},{paramNameKey:"ma1",type:"number",precision:0,min:1,default:10},{paramNameKey:"ma2",type:"number",precision:0,min:1,default:20},{paramNameKey:"ma3",type:"number",precision:0,min:1,default:40},{paramNameKey:"ma4",type:"number",precision:0,min:1,default:60}],EMV:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:10},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:50},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:10}],DMI:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:14},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],DMA:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:10},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:50},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:10}],EMA:[{paramNameKey:"EMA1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"EMA2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"EMA3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"EMA4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"EMA5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],MTM:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],MA:[{paramNameKey:"MA1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"MA2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"MA3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"MA4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"MA5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],MACD:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:26},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:9}],OBV:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:30}],PVT:[],PSY:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],ROC:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],RSI:[{paramNameKey:"RSI1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"RSI2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"RSI3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"RSI4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"RSI5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],SMA:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:2}],KDJ:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:9},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:3},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:3}],SAR:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:2,upColor:"#FF7F50",downColor:"#A020F0"},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:2,upColor:"#FF7F50",downColor:"#A020F0"},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:20,upColor:"#FF7F50",downColor:"#A020F0"}],TRIX:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:9}],VOL:[{paramNameKey:"MA1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"MA2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"MA3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"MA4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"MA5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],VR:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:26},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],WR:[{paramNameKey:"WR1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"WR2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"WR3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"WR4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"WR5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],WEMA:[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}],"Volume Profile Fixed Range":[{paramNameKey:"Value area (range 0-1)",type:"number",precision:0,min:0,max:1,default:.7}],"Force Index":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:13}],"Ichimoku Cloud":[{paramNameKey:"Conversion Period",type:"number",precision:0,min:1,default:9},{paramNameKey:"Base Period",type:"number",precision:0,min:1,default:26},{paramNameKey:"Span Period",type:"number",precision:0,min:1,default:52},{paramNameKey:"Displacement",type:"number",precision:0,min:1,default:26},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],ATR:[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}],ADX:[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14},{paramNameKey:"Adxr Period",type:"number",precision:0,min:1,default:6}],ADXR:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],PDI:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],MDI:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],TR:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],WS:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],"Chaikin Oscillator":[{paramNameKey:"Short Period",type:"number",precision:0,min:1,default:3},{paramNameKey:"Long Period",type:"number",precision:0,min:1,default:10}],"Percentage Price Oscillator":[{paramNameKey:"Fast Period",type:"number",precision:0,min:1,default:12},{paramNameKey:"Slow Period",type:"number",precision:0,min:1,default:26},{paramNameKey:"Signal Period",type:"number",precision:0,min:1,default:9}],"Percentage Volume Oscillator":[{paramNameKey:"Short Period",type:"number",precision:0,min:1,default:12},{paramNameKey:"Long Period",type:"number",precision:0,min:1,default:26},{paramNameKey:"Signal Period",type:"number",precision:0,min:1,default:9}],Qstick:[{paramNameKey:"period",type:"number",precision:0,min:1,default:20}],"Absolute Price Oscillator":[{paramNameKey:"Fast Period",type:"number",precision:0,min:1,default:14},{paramNameKey:"Slow Period",type:"number",precision:0,min:1,default:30}],Aroon:[{paramNameKey:"Length",type:"number",precision:0,min:1,default:14}],"Balance of Power":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:20}],"Double Exponential Moving Average":[{paramNameKey:"EMA1 Period",type:"number",precision:0,min:1,default:10},{paramNameKey:"EMA2 Period",type:"number",precision:0,min:1,default:16}],"Envelope (EMA)":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:20},{paramNameKey:"Percentage",type:"number",precision:0,min:0,max:100,default:20},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],"Envelope (SMA)":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:20},{paramNameKey:"Percentage",type:"number",precision:0,min:1,default:20},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],"Volume Weighted Average Price":[{paramNameKey:"Anchor Period",type:"select",precision:0,options:[{value:"None",label:"None"},{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarter",label:"Quarter"},{value:"Year",label:"Year"}],default:"None"},{paramNameKey:"Source",type:"select",precision:0,options:[{value:"Open",label:"Open"},{value:"High",label:"High"},{value:"Close",label:"Close"},{value:"HLC3",label:"HLC3"},{value:"HLC2",label:"HLC2"},{value:"OHLC4",label:"OHLC4"},{value:"HLCC4",label:"HLCC4"}],default:"Close"},{paramNameKey:"Offset",type:"number",precision:0,min:-100,max:100,default:0},{paramNameKey:"Bands Mode",type:"select",precision:0,options:[{value:"Standard Deviation",label:"Standard Deviation"},{value:"Percentage",label:"Percentage"},{value:"Fixed",label:"Fixed"}],default:"Standard Deviation"},{paramNameKey:"Bands Multiplier",type:"select",precision:0,options:[{value:"0.5",label:"0.5"},{value:"1",label:"1.0"},{value:"1.5",label:"1.5"},{value:"2",label:"2.0"},{value:"2.5",label:"2.5"},{value:"3",label:"3.0"}],default:"2"},{paramNameKey:"Show Bands",type:"boolean",precision:0,default:!0},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],"Negative Volume Index":[{paramNameKey:"Length",type:"number",precision:0,min:1,default:5}],"Money Flow Volume":[],"Money Flow Multiplier":[],"Moving Linear Regression":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}],"Moving Least Square":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}]};var lB=Q("<div class=chartspire-ui-indicator-setting-input><span>");const N5=e=>(()=>{var t=lB(),r=t.firstChild;return F(r,()=>e.label),F(t,G(Wa,{style:{width:"120px"},get value(){return e.value},get onChange(){return e.onChange}}),null),t})();var cB=Q("<div class=chartspire-ui-indicator-setting-select><span>");const zp=e=>(()=>{var t=cB(),r=t.firstChild;return F(r,()=>e.label),F(t,G(Xp,{style:{width:"120px"},get value(){return e.value},get dataSource(){return e.dataSource},get onSelected(){return e.onSelected}}),null),t})();var uB=Q("<div class=chartspire-ui-indicator-setting-styles><span>");const Nc=e=>(()=>{var t=uB(),r=t.firstChild;return F(r,()=>e.label),F(t,G(fv,{style:{width:"120px"},get value(){return e.value},get onChange(){return e.onChange}}),null),t})();var dB=Q("<div class=styles-container>");const lp=({index:e,locale:t,styles:r,setStyles:n,type:i})=>{const o=gn.clone(r());return(()=>{var s=dB();return F(s,(()=>{var u=Ae(()=>i===k0.line);return()=>u()?[G(Nc,{get label(){return`${I("Color",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.lines)==null?void 0:h[e])==null?void 0:p.color)??"#000000"},onChange:d=>{var h,p,g;(((p=(h=o==null?void 0:o.lines)==null?void 0:h[e])==null?void 0:p.color)!==void 0||((g=o==null?void 0:o.lines)==null?void 0:g[e])!==void 0)&&(o.lines[e].color=d),n({...o})}}),G(zp,{get label(){return`${I("Size",t)} ${e+1}`},get value(){var d,h,p;return String(((p=(h=(d=r())==null?void 0:d.lines)==null?void 0:h[e])==null?void 0:p.size)??1)},dataSource:[{key:"1",text:"1"},{key:"2",text:"2"},{key:"3",text:"3"},{key:"4",text:"4"},{key:"5",text:"5"},{key:"6",text:"6"},{key:"7",text:"7"},{key:"8",text:"8"},{key:"9",text:"9"},{key:"10",text:"10"}],onSelected:d=>{var h,p,g;(((p=(h=o==null?void 0:o.lines)==null?void 0:h[e])==null?void 0:p.size)!==void 0||((g=o==null?void 0:o.lines)==null?void 0:g[e])!==void 0)&&(o.lines[e].size=Number(d.key)),n({...o})}}),G(zp,{get label(){return I("LineType",t)},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.lines)==null?void 0:h[e])==null?void 0:p.style)??"solid"},dataSource:[{key:"solid",text:"Solid"},{key:"dashed",text:"Dashed"}],onSelected:d=>{var h,p,g;(((p=(h=o==null?void 0:o.lines)==null?void 0:h[e])==null?void 0:p.style)!==void 0||((g=o==null?void 0:o.lines)==null?void 0:g[e])!==void 0)&&(o.lines[e].style=d.key),n({...o})}})]:Ae(()=>i===k0.circle)()?[Ae(()=>Ae(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0})()&&G(Nc,{get label(){return`${I("upColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.upColor)??"#000000"},onChange:d=>{var h,p,g;(((p=(h=o==null?void 0:o.circles)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0||((g=o==null?void 0:o.circles)==null?void 0:g[e])!==void 0)&&(o.circles[e].upColor=d),n({...o})}})),Ae(()=>Ae(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0})()&&G(Nc,{get label(){return`${I("downColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.downColor)??"#000000"},onChange:d=>{var h,p,g;(((p=(h=o==null?void 0:o.circles)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0||((g=o==null?void 0:o.circles)==null?void 0:g[e])!==void 0)&&(o.circles[e].downColor=d),n({...o})}})),Ae(()=>Ae(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0})()&&G(Nc,{get label(){return`${I("noChangeColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.circles)==null?void 0:h[e])==null?void 0:p.noChangeColor)??"#000000"},onChange:d=>{var h,p,g;(((p=(h=o==null?void 0:o.circles)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0||((g=o==null?void 0:o.circles)==null?void 0:g[e])!==void 0)&&(o.circles[e].noChangeColor=d),n({...o})}}))]:Ae(()=>i===k0.bar)()?[Ae(()=>Ae(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0})()&&G(Nc,{get label(){return`${I("upColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.upColor)??"#000000"},onChange:d=>{var h,p,g;(((p=(h=o==null?void 0:o.bars)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0||((g=o==null?void 0:o.bars)==null?void 0:g[e])!==void 0)&&(o.bars[e].upColor=d),n({...o})}})),Ae(()=>Ae(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0})()&&G(Nc,{get label(){return`${I("downColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.downColor)??"#000000"},onChange:d=>{var h,p,g;(((p=(h=o==null?void 0:o.bars)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0||((g=o==null?void 0:o.bars)==null?void 0:g[e])!==void 0)&&(o.bars[e].downColor=d),n({...o})}})),Ae(()=>Ae(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0})()&&G(Nc,{get label(){return`${I("noChangeColor",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.bars)==null?void 0:h[e])==null?void 0:p.noChangeColor)??"#000000"},onChange:d=>{var h,p,g;(((p=(h=o==null?void 0:o.bars)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0||((g=o==null?void 0:o.bars)==null?void 0:g[e])!==void 0)&&(o.bars[e].noChangeColor=d),n({...o})}}))]:Ae(()=>i===k0.custom)()?Ae(()=>Ae(()=>{var d,h,p;return((p=(h=(d=r())==null?void 0:d.custom)==null?void 0:h[e])==null?void 0:p.opacity)!==void 0})()&&G(N5,{get label(){return`${I("opacity",t)} ${e+1}`},get value(){var d,h,p;return((p=(h=(d=r())==null?void 0:d.custom)==null?void 0:h[e])==null?void 0:p.opacity)??.3},onChange:d=>{var h,p,g;(((p=(h=o==null?void 0:o.custom)==null?void 0:h[e])==null?void 0:p.opacity)!==void 0||((g=o==null?void 0:o.custom)==null?void 0:g[e])!==void 0)&&(o.custom[e].opacity=d),n({...o})}})):null})()),s})()};var hB=Q("<div class=chartspire-ui-indicator-setting-modal-content>"),pB=Q("<div class=chartspire-ui-indicator-setting-modal-content> <!> <!> "),fB=Q("<div class=chartspire-ui-indicator-setting-modal-wrapper><div class=topbar>"),gB=Q("<button>"),cp=Q("<div class=styles-container>"),k0=(e=>(e.line="line",e.circle="circle",e.bar="bar",e.custom="custom",e))(k0||{});const vB=e=>{const[t,r]=be(gn.clone(e.params.calcParams)),[n,i]=be(gn.clone(e.params.styles)),[o,s]=be("params"),u=h=>sB[h],d=[{text:"Params",key:"params"},{text:"Style",key:"style"}];return G(Rl,{get title(){return e.params.indicatorName},width:360,contentHeight:"80%",buttonContainerPadding:"30px 30px 20px",get buttons(){return[{type:"confirm",children:I("confirm",e.locale),onClick:()=>{var h;const p=u(e.params.indicatorName),g=[];(h=gn.clone(t()))==null||h.forEach((m,b)=>{!gn.isValid(m)||m===""?"default"in p[b]&&g.push(p[b].default):g.push(m)}),e.onConfirm(g,n()),e.onClose()}}]},get onClose(){return e.onClose},get children(){var h=fB(),p=h.firstChild;return F(p,G(mn,{each:d,children:g=>(()=>{var m=gB();return m.$$click=()=>s(g.key),F(m,()=>g.text),De(()=>at(m,`${o()===g.key?"selected":""}`)),m})()})),F(h,G(ze,{get when(){return o()==="params"},get children(){var g=hB();return F(g,()=>{var m;return(m=u(e.params.indicatorName))==null?void 0:m.map((b,x)=>b.type==="boolean"?G(zp,{get label(){return I(b.paramNameKey,e.locale)},get value(){var C;return(C=t()[x])!=null&&C.value?"true":"false"},dataSource:[{key:"true",text:"Yes"},{key:"false",text:"No"}],onSelected:C=>{const _=gn.clone(t());_[x]={..._[x],value:C.key==="true"},r(_)}}):b.type==="select"?G(zp,{get label(){return I(b.paramNameKey,e.locale)},get value(){var C;return((C=t()[x])==null?void 0:C.value)??b.default},get dataSource(){var C;return((C=b.options)==null?void 0:C.map(_=>({key:_.value,text:_.label})))??[]},onSelected:C=>{const _=gn.clone(t());_[x]={..._[x],value:C.key},r(_)}}):G(N5,{key:x,get label(){return I(b.paramNameKey,e.locale)},get value(){var C;return((C=t()[x])==null?void 0:C.value)??""},get precision(){return b.precision},get min(){return b.min},onChange:C=>{const _=gn.clone(t());_[x]={..._[x],value:Number(C)},r(_)}}))}),g}}),null),F(h,G(ze,{get when(){return o()==="style"},get children(){var g=pB(),m=g.firstChild,b=m.nextSibling,x=b.nextSibling,C=x.nextSibling;return C.nextSibling,F(g,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.lines)==null?void 0:k.map((M,L)=>(()=>{var A=cp();return We(A,"key",L),F(A,G(lp,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"line"}})),A})())},m),F(g,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.circles)==null?void 0:k.map((M,L)=>(()=>{var A=cp();return We(A,"key",L),F(A,G(lp,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"circle"}})),A})())},b),F(g,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.bars)==null?void 0:k.map((M,L)=>(()=>{var A=cp();return We(A,"key",L),F(A,G(lp,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"bar"}})),A})())},C),F(g,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.custom)==null?void 0:k.map((M,L)=>(()=>{var A=cp();return We(A,"key",L),F(A,G(lp,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"custom"}})),A})())},null),g}}),null),h}})};jt(["click"]);var mB=Q('<svg viewBox="0 0 22 22"><rect x=2 y=2 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=9 y=2 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=16 y=2 width=4 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=2 y=9 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=9 y=9 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=16 y=9 width=4 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=2 y=16 width=5 height=4 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=9 y=16 width=5 height=4 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=16 y=16 width=4 height=4 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none>');const yB=e=>(()=>{var t=mB();return De(()=>We(t,"class",e.class||"icon-overlay")),t})();var bB=Q('<svg viewBox="0 0 24 24"fill=none><path d="M5 2h14v20H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round></path><path d="M7 7h10M7 11h8M7 15h6"stroke=currentColor stroke-width=1.5 stroke-linecap=round>');const xB=e=>(()=>{var t=bB();return De(()=>We(t,"class",e.class||"icon-overlay")),t})();var wB=Q('<svg viewBox="0 0 22 22"fill=none xmlns=http://www.w3.org/2000/svg><path d="M4 6H18M4 10H16M4 14H18M4 18H14"stroke-width=1.5 stroke-linecap=round stroke-linejoin=round></path><circle cx=19 cy=5 r=2.5 stroke-width=1.5 fill=none></circle><path d="M19 4V5L19.5 5.5"stroke-width=1 stroke-linecap=round stroke-linejoin=round></path><circle cx=2 cy=6 r=1 fill=currentColor></circle><circle cx=2 cy=10 r=1 fill=currentColor></circle><circle cx=2 cy=14 r=1 fill=currentColor></circle><circle cx=2 cy=18 r=1 fill=currentColor>');const CB=e=>(()=>{var t=wB();return De(()=>We(t,"class",e.class)),t})();var _B=Q('<div class=item tabindex=0><span style=width:40px;height:40px><svg viewBox="0 0 22 22"><path d="M8 6.00067L21 6.00139M8 12.0007L21 12.0015M8 18.0007L21 18.0015M3.5 6H3.51M3.5 12H3.51M3.5 18H3.51M4 6C4 6.27614 3.77614 6.5 3.5 6.5C3.22386 6.5 3 6.27614 3 6C3 5.72386 3.22386 5.5 3.5 5.5C3.77614 5.5 4 5.72386 4 6ZM4 12C4 12.2761 3.77614 12.5 3.5 12.5C3.22386 12.5 3 12.2761 3 12C3 11.7239 3.22386 11.5 3.5 11.5C3.77614 11.5 4 11.7239 4 12ZM4 18C4 18.2761 3.77614 18.5 3.5 18.5C3.22386 18.5 3 18.2761 3 18C3 17.7239 3.22386 17.5 3.5 17.5C3.77614 17.5 4 17.7239 4 18Z"stroke-width=2 stroke-linecap=round stroke-linejoin=round>'),SB=Q('<div class="item paper-trading-item"tabindex=0><span style=width:40px;height:40px>'),kB=Q('<div class="item trades-item"tabindex=0><span style=width:40px;height:40px>'),TB=Q('<div class="item orderbook-item"tabindex=0><span style=width:40px;height:40px>'),EB=Q("<div class=chartspire-ui-right-bar><div class=toggle-container>");const MB=e=>(()=>{var t=EB(),r=t.firstChild;return F(t,G(ze,{get when(){return e.isWatchListEnabled&&!e.rightBarCollapsed},get children(){var n=_B(),i=n.firstChild,o=i.firstChild;return n.$$click=()=>{console.log("Watchlist clicked"),e.setWatchListModalVisible!=null&&e.setWatchListModalVisible(s=>!s)},De(()=>We(o,"class",`icon-overlay ${e.watchListModalVisible?"selected":""}`)),n}}),r),F(t,G(ze,{get when(){return e.isPaperTradingEnabled&&!e.rightBarCollapsed},get children(){var n=SB(),i=n.firstChild;return n.$$click=()=>{console.log("Paper Trading clicked"),e.setPaperTradingModalVisible!=null&&e.setPaperTradingModalVisible(o=>!o)},F(i,G(yB,{get class(){return`icon-overlay ${e.paperTradingModalVisible?"selected":""}`}})),n}}),r),F(t,G(ze,{get when(){return e.isTradesEnabled&&!e.rightBarCollapsed},get children(){var n=kB(),i=n.firstChild;return n.$$click=()=>{console.log("Trades clicked"),e.setTradesVisible!=null&&e.setTradesVisible(o=>!o)},F(i,G(CB,{get class(){return`icon-overlay ${e.tradesModalVisible?"selected":""}`}})),n}}),r),F(t,G(ze,{get when(){return e.isOrderBookEnabled&&!e.rightBarCollapsed},get children(){var n=TB(),i=n.firstChild;return n.$$click=()=>{console.log("Orderbook clicked"),e.setOrderBookVisible!=null&&e.setOrderBookVisible(o=>!o)},F(i,G(xB,{get class(){return`icon-overlay ${e.orderBookModalVisible?"selected":""}`}})),n}}),r),F(r,G(vv,{get isExpanded(){return!e.rightBarCollapsed},onClick:()=>{e.setRightBarCollapsed(!e.rightBarCollapsed)},get ariaLabel(){return e.rightBarCollapsed?"Show sidebar":"Hide sidebar"},className:"toggle-button",startingDirection:"right"})),De(()=>We(t,"data-collapsed",e.rightBarCollapsed.toString())),t})();jt(["click"]);const IB=NT.map(e=>e.name),LB=e=>{const t=e.getDataList(),r=e.getIndicators(),n=new Set,i={};r.forEach(p=>{console.log(p.result),IB.includes(p.name)||Object.entries(p.result).forEach(([g,m])=>{const b=m;Object.keys(b).forEach(x=>{let C=!1;n.add(x),i[x]||(i[x]={}),i[x][g]||(i[x][g]=[]),b[x]!==void 0&&b[x]!==null&&(i[x][g].push(b[x]),C=!0),C||n.delete(x)})})});const o=["timestamp","open","high","low","close","volume",...n].join(","),s=t.map((p,g)=>{const m=Array.from(n).map(b=>i[b][g]??"").join(",");return`${p.timestamp},${p.open},${p.high},${p.low},${p.close},${p.volume??""},${m}`}).join(`
`),u=`${o}
${s}`,d=new Blob([u],{type:"text/csv"}),h=document.createElement("a");h.href=URL.createObjectURL(d),h.download="data.csv",document.body.appendChild(h),h.click(),document.body.removeChild(h)};var PB=Q('<div class="item tools">'),AB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><rect width=15 height=14 fill=none stroke=currentColor rx=4 transform="translate(.5 .5)">'),DB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14">'),FB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15">'),RB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M5 0v14"></path><path d="M10 0v14">'),OB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 4.5h15"></path><path d="M0 9.5h15">'),NB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M7.5 7h7.5">'),zB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M0 7h7.5">'),BB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M7.5 0v7">'),$B=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M7.5 7v7">'),VB=Q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7.5h15M7.5 0v14">'),WB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 3.5h15"></path><path d="M0 7h15"></path><path d="M0 10.5h15">'),UB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M3.75 0v14"></path><path d="M7.5 0v14"></path><path d="M11.25 0v14">'),HB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M7.5 4.5h7.5"></path><path d="M7.5 9.5h7.5">'),YB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M0 4.5h7.5"></path><path d="M0 9.5h7.5">'),XB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M5 7v7"></path><path d="M10 7v7">'),jB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M5 0v7"></path><path d="M10 0v7">'),ZB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 2.8h15"></path><path d="M0 5.6h15"></path><path d="M0 8.4h15"></path><path d="M0 11.2h15">'),GB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M3 0v14"></path><path d="M6 0v14"></path><path d="M9 0v14"></path><path d="M12 0v14">'),QB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M7.5 3.5h7.5"></path><path d="M7.5 7h7.5"></path><path d="M7.5 10.5h7.5">'),KB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M0 3.5h7.5"></path><path d="M0 7h7.5"></path><path d="M0 10.5h7.5">'),qB=Q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M5 0v14"></path><path d="M10 0v14"></path><path d="M0 7.5h15M7.5">'),JB=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M2.5 0v14"></path><path d="M5 0v14"></path><path d="M7.5 0v14"></path><path d="M10 0v14"></path><path d="M12.5 0v14">'),e$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 2.5h15"></path><path d="M0 5h15"></path><path d="M0 7.5h15"></path><path d="M0 10h15"></path><path d="M0 12.5h15">'),t$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 4.5h15"></path><path d="M0 9.5h15"></path><path d="M7.5 0v14">'),r$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 2h15"></path><path d="M0 4h15"></path><path d="M0 6h15"></path><path d="M0 8h15"></path><path d="M0 10h15"></path><path d="M0 12h15">'),n$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M2.14 0v14"></path><path d="M4.28 0v14"></path><path d="M6.42 0v14"></path><path d="M8.57 0v14"></path><path d="M10.71 0v14"></path><path d="M12.85 0v14">'),i$=Q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15M3.75 0v14M7.5 0v14M11.25 0v14">'),o$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.75h15"></path><path d="M0 3.5h15"></path><path d="M0 5.25h15"></path><path d="M0 7h15"></path><path d="M0 8.75h15"></path><path d="M0 10.5h15"></path><path d="M0 12.25h15">'),a$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.875 0v14"></path><path d="M3.75 0v14"></path><path d="M5.625 0v14"></path><path d="M7.5 0v14"></path><path d="M9.375 0v14"></path><path d="M11.25 0v14"></path><path d="M13.125 0v14">'),s$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 4.5h15"></path><path d="M0 9.5h15"></path><path d="M5 0v14"></path><path d="M10 0v14">'),l$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.5h15"></path><path d="M0 3h15"></path><path d="M0 4.5h15"></path><path d="M0 6h15"></path><path d="M0 7.5h15"></path><path d="M0 9h15"></path><path d="M0 10.5h15"></path><path d="M0 12h15">'),c$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.67 0v14"></path><path d="M3.33 0v14"></path><path d="M5 0v14"></path><path d="M6.67 0v14"></path><path d="M8.33 0v14"></path><path d="M10 0v14"></path><path d="M11.67 0v14"></path><path d="M13.33 0v14">'),u$=Q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15M3 0v14M6 0v14M9 0v14M12 0v14">'),d$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.4h15"></path><path d="M0 2.8h15"></path><path d="M0 4.2h15"></path><path d="M0 5.6h15"></path><path d="M0 7h15"></path><path d="M0 8.4h15"></path><path d="M0 9.8h15"></path><path d="M0 11.2h15"></path><path d="M0 12.6h15">'),h$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.5 0v14"></path><path d="M3 0v14"></path><path d="M4.5 0v14"></path><path d="M6 0v14"></path><path d="M7.5 0v14"></path><path d="M9 0v14"></path><path d="M10.5 0v14"></path><path d="M12 0v14"></path><path d="M13.5 0v14">'),p$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 3.5h15"></path><path d="M0 7h15"></path><path d="M0 10.5h15"></path><path d="M5 0v14"></path><path d="M10 0v14">'),f$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.17h15"></path><path d="M0 2.33h15"></path><path d="M0 3.5h15"></path><path d="M0 4.67h15"></path><path d="M0 5.83h15"></path><path d="M0 7h15"></path><path d="M0 8.17h15"></path><path d="M0 9.33h15"></path><path d="M0 10.5h15"></path><path d="M0 11.67h15"></path><path d="M0 12.83h15">'),g$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.25 0v14"></path><path d="M2.5 0v14"></path><path d="M3.75 0v14"></path><path d="M5 0v14"></path><path d="M6.25 0v14"></path><path d="M7.5 0v14"></path><path d="M8.75 0v14"></path><path d="M10 0v14"></path><path d="M11.25 0v14"></path><path d="M12.5 0v14"></path><path d="M13.75 0v14">'),v$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 7h15"></path><path d="M2.5 0v14"></path><path d="M5 0v14"></path><path d="M7.5 0v14"></path><path d="M10 0v14"></path><path d="M12.5 0v14">'),by=Q('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M2 0v14"></path><path d="M5 0v14"></path><path d="M12 0v14"></path><path d="M0 7.5h15M9 0v14">'),m$=Q('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 3.5h15"></path><path d="M0 7h15"></path><path d="M0 10.5h15"></path><path d="M3.75 0v14"></path><path d="M7.5 0v14"></path><path d="M11.25 0v14">');const y$=e=>(()=>{var t=PB();return Wi(t,"click",e.onMultiChartClick),F(t,(()=>{var r=Ae(()=>e.multiChart===H.ONE);return()=>r()&&AB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.TWO);return()=>r()&&DB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.TWO_VERTICAL);return()=>r()&&FB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.THREE);return()=>r()&&RB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.THREE_VERTICAL);return()=>r()&&OB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.THREE_MIXED);return()=>r()&&NB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.THREE_MIXED_REVERSE);return()=>r()&&zB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.THREE_MIXED_BOTTOM);return()=>r()&&BB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.THREE_MIXED_TOP);return()=>r()&&$B()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FOUR);return()=>r()&&VB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FOUR_VERTICAL);return()=>r()&&WB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FOUR_HORIZONTAL);return()=>r()&&UB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FOUR_MIXED);return()=>r()&&HB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FOUR_MIXED_REVERSE);return()=>r()&&YB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FOUR_MIXED_TOP);return()=>r()&&XB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FOUR_MIXED_BOTTOM);return()=>r()&&jB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FIVE_VERTICAL);return()=>r()&&ZB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FIVE_HORIZONTAL);return()=>r()&&GB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FIVE_MIXED);return()=>r()&&QB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FIVE_MIXED_REVERSE);return()=>r()&&KB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.SIX);return()=>r()&&qB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.SIX_HORIZONTAL);return()=>r()&&JB()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.SIX_VERTICAL);return()=>r()&&e$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.SIX_MIXED);return()=>r()&&t$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.SEVEN_VERTICAL);return()=>r()&&r$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.SEVEN_HORIZONTAL);return()=>r()&&n$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.EIGHT);return()=>r()&&i$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.EIGHT_VERTICAL);return()=>r()&&o$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.EIGHT_HORIZONTAL);return()=>r()&&a$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.NINE);return()=>r()&&s$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.NINE_VERTICAL);return()=>r()&&l$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.NINE_HORIZONTAL);return()=>r()&&c$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.TEN);return()=>r()&&u$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.TEN_VERTICAL);return()=>r()&&d$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.TEN_HORIZONTAL);return()=>r()&&h$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.TWELVE);return()=>r()&&p$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.TWELVE_VERTICAL);return()=>r()&&f$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.TWELVE_HORIZONTAL);return()=>r()&&g$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.TWELVE_GRID);return()=>r()&&v$()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.FOURTEEN);return()=>r()&&by()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.SIXTEEN);return()=>r()&&by()})(),null),F(t,(()=>{var r=Ae(()=>e.multiChart===H.SIXTEEN_GRID);return()=>r()&&m$()})(),null),t})();jt(["click"]);var b$=Q("<div class=candle-type-dropdown><div class=candle-icon-container><div class=candle-icon></div><span class=candle-type-text></span><span class=dropdown-indicator>");const up={candle_solid:'<svg width="20" height="20" stroke="currentColor" stroke-width="0.04" viewBox="0 0 0.63 0.99"><path fill="none" d="M.52.02v.95M.11.02v.95"></path><rect x=".02" y=".16" width=".19" height=".5" rx=".02" ry=".07" fill="currentColor"></rect><rect x=".42" y=".35" width=".19" height=".5" rx=".02" ry=".07" fill="currentColor"></rect></svg>',candle_stroke:'<svg viewBox="0 0 26 26" width="28" height="28" fill="currentColor"><g transform="translate(0.5, 0.5)"><path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1zM9 4v5H7v11h2v3h1v-3h2V9h-2V4H9zm6 3h3v10h-3V7zm-7 3h3v9H8v-9z"></path></g></svg>',candle_up_stroke:`<svg viewBox="0 0 26 26" width="25" height="25" fill="currentColor">
    <g transform="translate(0.5, 0.5)">
      <!-- Right candle (filled) -->
      <path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1z" fill="currentColor"/>
      <path d="M16 6h3v10h-3V6z" fill="currentColor"/>
      
      <!-- Left candle (hollow) -->
      <path d="M9 4v5h-2v11h2v3h1v-3h2V9h-2V4h-1z" stroke="currentColor" stroke-width="0.8" fill="none"/>
    </g>
  </svg>`,candle_down_stroke:`<svg viewBox="0 0 26 26" width="25" height="25" fill="currentColor">
    <g transform="translate(0.5, 0.5)">
      <!-- Right candle (hollow) -->
      <path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1z" stroke="currentColor" stroke-width="0.8" fill="none"/>
      
      <!-- Left candle (filled) -->
      <path d="M9 4v5h-2v11h2v3h1v-3h2V9h-2V4h-1z" fill="currentColor"/>
      <path d="M8 9v9h3V9h-3z" fill="currentColor"/>
    </g>
  </svg>`,ohlc:'<svg stroke="currentColor" stroke-width="0.04" stroke-linecap="round" stroke-linejoin="round" width="18" height="20" fill="none" viewBox="0 0 0.73 1.07"><path d="M.58.02v1.03M.15.02v1.03"></path><path d="M.02.26h.13M.15.7h.12M.58.97h.13M.46.36h.12"></path></svg>',area:'<svg fill="none" stroke="currentColor" stroke-width="0.12" stroke-linejoin="round" width="20" height="20" viewBox="0 0 2.28 1.65"><path d="M.03 1.62.36.78l.38.59.36-.7.36.25.36-.89.42.74v.85z"></path></svg>',heikin_ashi:'<svg width="20" height="20" stroke-width="0.03" stroke="currentColor" viewBox="0 0 0.63 0.99"><path fill="none" d="M.52.02v.96M.11.02v.96"></path><rect fill="currentColor" x=".02" y=".48" width=".19" height=".5" rx=".02" ry=".07"></rect><rect fill="currentColor" x=".42" y=".48" width=".19" height=".5" rx=".02" ry=".07"></rect></svg>',[$0.RENKO]:'<svg viewBox="0 0 26 26" width="25" height="25" fill="currentColor"><g transform="translate(0.5, 0.5)"><path d="M12 4v6h3V4h-3zm3 6v6h3v-6h-3zm3 6v6h3v-6h-3zm-6-6H9v6h3v-6zm-3 6H6v6h3v-6zm4-11h1v4h-1V5zm-3 6h1v4h-1v-4zm-3 6h1v4H7v-4z"></path></g></svg>'},x$=e=>{const t=F5(e).find(r=>r.key==="candle.type");return!t||!t.dataSource?[{value:"candle_solid",label:I("candle_solid",e),icon:up.candle_solid},{value:"heikin_ashi",label:I("heikin_ashi",e),icon:up.heikin_ashi}]:t.dataSource.map(r=>({value:r.key,label:r.text,icon:up[r.key]||up.candle_solid}))},w$=e=>{const t=x$(e.locale),[r,n]=be(!1);let i;const[o,s]=be(t.find(g=>g.value===e.currentCandleType)||t[0]);nt(()=>{const g=e.currentCandleType,m=t.find(b=>b.value===g);m&&s(m)});const u=ir(()=>t.map(g=>({key:g.value,text:g.label,value:g,icon:g.icon}))),d=g=>{const m=g.value;s(m),e.onCandleTypeChange(m.value)},h=()=>{n(!r())},p=()=>{n(!1)};return[(()=>{var g=b$(),m=g.firstChild,b=m.firstChild,x=b.nextSibling,C=i;return typeof C=="function"?hi(C,g):i=g,m.$$click=h,F(x,()=>I("charts",e.locale)),De(()=>b.innerHTML=o().icon),g})(),G(x5,{get options(){return u()},get selectedKey(){return o().value},onSelect:d,triggerRef:i,get isOpen(){return r()},onClose:p,placement:"bottom",className:"candle-dropdown",maxHeight:600})]};jt(["click"]);$0.RENKO;const z5=10;function As(e){return e===$0.RENKO||String(e).toLowerCase()==="renko"}function B5(e,t,r){var n,i,o,s;if(!e||e.length===0)return[];let u=[],d=e[0].open;for(let h=1;h<e.length;h++){const p=e[h].timestamp,g=e[h].close,m=Number((g-d).toFixed(r));if(m>0){let b=m;for(;b>=t;){const x=Number((d+t).toFixed(r)),C={open:d,high:x,low:d,close:x,timestamp:p};(u.length===0||x!==((n=u.at(-1))==null?void 0:n.open)&&x!==((i=u.at(-1))==null?void 0:i.close))&&u.push(C),d=x,b-=t}}else if(m<0){let b=Math.abs(m);for(;b>=t;){const x=Number((d-t).toFixed(r)),C={open:d,high:d,low:x,close:x,timestamp:p};(u.length===0||x!==((o=u.at(-1))==null?void 0:o.open)&&x!==((s=u.at(-1))==null?void 0:s.close))&&u.push(C),d=x,b-=t}}}return u}function C$(e,t,r,n){var i,o,s,u,d;if(t.length===0)return B5([{open:e.open,high:e.high,low:e.low,close:e.close,timestamp:e.timestamp-6e4},e],r,n);let h=[...t],p=((i=h.at(-1))==null?void 0:i.close)||0;const g=e.timestamp;let m=e.close;const b=Number((m-p).toFixed(n));if(b>0&&b>=r){const C=Math.floor(b/r);for(let _=0;_<C;_++){const k=Number((p+r).toFixed(n)),M={open:p,high:k,low:p,close:k,timestamp:g};(h.length===0||k!==((o=h.at(-1))==null?void 0:o.open)&&k!==((s=h.at(-1))==null?void 0:s.close))&&h.push(M),p=k}}else if(b<0&&Math.abs(b)>=r){const C=Math.floor(Math.abs(b)/r);for(let _=0;_<C;_++){const k=Number((p-r).toFixed(n)),M={open:p,high:p,low:k,close:k,timestamp:g};(h.length===0||k!==((u=h.at(-1))==null?void 0:u.open)&&k!==((d=h.at(-1))==null?void 0:d.close))&&h.push(M),p=k}}const x=b-Math.floor(Math.abs(b)/r)*(b>=0?r:-r);if(x!==0&&h.length>0){const C=h.at(-1),_=Number((C.close+x).toFixed(n));C.shadowPrice=_}return h}function _$(e,t){if(e.length===0)return e;const r=[...e],n=r[r.length-1],i=t.close,o={...n,shadowPrice:i};return r[r.length-1]=o,r}function S$(e,t,r){var n;if(!t||t.length===0)return console.warn(`No data provided for Renko chart initialization (chart ${r})`),[];try{const i=((n=e.getStyles().candle.renko)==null?void 0:n.brick.size)||z5;e.getStyles().candle.type="candle_solid";const o=[...t].sort((p,g)=>p.timestamp-g.timestamp),s=B5(o,i,4);if(s.length===0)return console.warn(`Failed to generate Renko bricks for chart ${r} - using original data`),o;const u=o.at(-1),d=C$(u,s,i,4),h=_$(d,u);return h.length>0?h:t}catch(i){return console.error(`Error initializing Renko chart ${r}:`,i),t}}var k$=Q("<img alt=symbol>"),T$=Q("<div class=symbol><span>"),E$=Q('<div class=chartspire-ui-top-bar><select class=select-dropdown></select><div class="item tools"><svg viewBox="0 0 20 20"><path d=M15.873,20L3.65079,20C1.5873,20,0,18.3871,0,16.2903L0,3.70968C-3.78442e-7,1.6129,1.5873,0,3.65079,0L15.873,0C17.9365,0,19.5238,1.6129,19.5238,3.70968C19.5238,4.35484,19.2063,4.51613,18.5714,4.51613C17.9365,4.51613,17.619,4.19355,17.619,3.70968C17.619,2.74194,16.8254,1.93548,15.873,1.93548L3.65079,1.93548C2.69841,1.93548,1.90476,2.74194,1.90476,3.70968L1.90476,16.2903C1.90476,17.2581,2.69841,18.0645,3.65079,18.0645L15.873,18.0645C16.8254,18.0645,17.619,17.2581,17.619,16.2903C17.619,15.8065,18.0952,15.3226,18.5714,15.3226C19.0476,15.3226,19.5238,15.8065,19.5238,16.2903C19.5238,18.2258,17.9365,20,15.873,20ZM14.9206,12.9032C14.7619,12.9032,14.4444,12.9032,14.2857,12.7419L11.2698,9.35484C10.9524,9.03226,10.9524,8.54839,11.2698,8.22581C11.5873,7.90323,12.0635,7.90323,12.381,8.22581L15.3968,11.6129C15.7143,11.9355,15.7143,12.4194,15.3968,12.7419C15.3968,12.9032,15.2381,12.9032,14.9206,12.9032ZM11.4286,13.2258C11.2698,13.2258,11.1111,13.2258,10.9524,13.0645C10.6349,12.7419,10.6349,12.4194,10.9524,12.0968L15.0794,7.74193C15.3968,7.41935,15.7143,7.41935,16.0317,7.74193C16.3492,8.06452,16.3492,8.3871,16.0317,8.70968L11.9048,13.0645C11.746,13.2258,11.5873,13.2258,11.4286,13.2258ZM10.3175,3.70968C10.6349,3.70968,11.4286,3.87097,11.4286,4.67742C11.4286,5.32258,10.4762,5.16129,10.1587,5.16129C8.73016,5.16129,8.25397,5.96774,8.09524,6.6129L7.77778,8.54839L9.36508,8.54839C9.68254,8.54839,10,8.87097,10,9.19355C10,9.51613,9.68254,9.83871,9.36508,9.83871L7.61905,9.83871L6.50794,14.8387Q6.34921,16.2903,5.39683,16.2903Q4.44444,16.2903,4.92064,14.8387L6.03175,10L4.60317,10C4.28571,10,3.96825,9.67742,3.96825,9.35484C3.96825,8.70968,4.28571,8.54839,4.60317,8.54839L6.34921,8.54839L6.8254,6.45161C7.14286,3.70968,9.52381,3.54839,10.3175,3.70968ZM18.4127,6.6129C18.5714,6.12903,18.8889,5.96774,19.3651,5.96774C19.8413,6.12903,20,6.45161,20,6.93548L18.4127,13.3871C18.254,13.871,17.9365,14.0323,17.4603,14.0323C16.9841,13.871,16.8254,13.5484,16.8254,13.0645L18.4127,6.6129Z></path></svg><span></span></div><div><svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd d="M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z M12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 Z M8,17 L8,7 C8,6.21456446 8.86395093,5.73572169 9.52999894,6.1520017 L17.5299989,11.1520017 C18.156667,11.5436692 18.156667,12.4563308 17.5299989,12.8479983 L9.52999894,17.8479983 C8.86395093,18.2642783 8,17.7854355 8,17 Z M15.1132038,12 L10,8.80424764 L10,15.1957524 L15.1132038,12 Z"></path></svg><span></span></div><div></div><div class="item tools csv"><svg viewBox="0 50 500 400"><path d="M430.557,79.556H218.44c21.622,12.688,40.255,29.729,54.859,49.906h157.258 c7.196,0,13.063,5.863,13.063,13.06v238.662c0,7.199-5.866,13.064-13.063,13.064H191.894c-7.198,0-13.062-5.865-13.062-13.064 V222.173c-6.027-3.1-12.33-5.715-18.845-7.732c-3.818,11.764-12.105,21.787-23.508,27.781c-2.39,1.252-4.987,2.014-7.554,2.844 v136.119c0,34.717,28.25,62.971,62.968,62.971h238.663c34.718,0,62.969-28.254,62.969-62.971V142.522 C493.525,107.806,465.275,79.556,430.557,79.556z"></path><path id=XMLID_31_ d="M129.037,175.989c51.419,1.234,96.388,28.283,122.25,68.865c2.371,3.705,6.434,5.848,10.657,5.848 c1.152,0,2.322-0.162,3.46-0.486c5.377-1.545,9.114-6.418,9.179-12.006c0-0.504,0-1.01,0-1.51 c0-81.148-64.853-147.023-145.527-148.957V64.155c0-5.492-3.038-10.512-7.879-13.078c-2.16-1.139-4.533-1.707-6.889-1.707 c-2.94,0-5.848,0.88-8.35,2.584L5.751,120.526C2.162,122.98,0.018,127.041,0,131.394c-0.017,4.338,2.113,8.418,5.687,10.902 l100.17,69.451c2.518,1.753,5.459,2.631,8.414,2.631c2.355,0,4.696-0.553,6.857-1.676c4.855-2.549,7.909-7.6,7.909-13.092V175.989z "></path></svg></div><div class="item tools"><svg viewBox="0 0 20 20"><path d=M19.7361,12.542L18.1916,11.2919C18.2647,10.8678,18.3025,10.4347,18.3025,10.0017C18.3025,9.56861,18.2647,9.13555,18.1916,8.71142L19.7361,7.46135C19.9743,7.26938,20.0615,6.95686,19.9554,6.6756L19.9342,6.61756C19.5074,5.49026,18.8755,4.45449,18.0549,3.53926L18.0124,3.49238C17.8096,3.26692,17.4819,3.1821,17.1848,3.28032L15.2677,3.92544C14.5603,3.3763,13.7704,2.94324,12.9168,2.63966L12.5466,0.742229C12.49,0.449802,12.2472,0.222111,11.9383,0.168536L11.8746,0.157375C10.6461,-0.0524583,9.35391,-0.0524583,8.1254,0.157375L8.06174,0.168536C7.75284,0.222111,7.50997,0.449802,7.45338,0.742229L7.08082,2.64859C6.2343,2.95217,5.44909,3.383,4.74641,3.92991L2.81522,3.28032C2.52047,3.1821,2.19036,3.26469,1.98757,3.49238L1.94513,3.53926C1.12455,4.45672,0.492609,5.49249,0.0658141,6.61756L0.0445921,6.6756C-0.0615171,6.95463,0.0257283,7.26715,0.263885,7.46135L1.82723,8.72482C1.75413,9.14448,1.71876,9.57308,1.71876,9.99944C1.71876,10.428,1.75413,10.8566,1.82723,11.2741L0.263885,12.5375C0.025729,12.7295,-0.0615164,13.042,0.0445929,13.3233L0.0658148,13.3813C0.49261,14.5064,1.12455,15.5444,1.94513,16.4596L1.98757,16.5065C2.19036,16.732,2.51812,16.8168,2.81522,16.7186L4.74641,16.069C5.44909,16.6159,6.2343,17.0489,7.08082,17.3503L7.45338,19.2567C7.50997,19.5491,7.75284,19.7768,8.06174,19.8303L8.1254,19.8415C8.74084,19.9464,9.37042,20,10,20C10.6296,20,11.2615,19.9464,11.8746,19.8415L11.9383,19.8303C12.2472,19.7768,12.49,19.5491,12.5466,19.2567L12.9168,17.3592C13.7704,17.0556,14.5603,16.6248,15.2677,16.0734L17.1848,16.7186C17.4795,16.8168,17.8096,16.7342,18.0124,16.5065L18.0549,16.4596C18.8755,15.5422,19.5074,14.5064,19.9342,13.3813L19.9554,13.3233C20.0615,13.0487,19.9743,12.7362,19.7361,12.542ZM16.5175,8.97483C16.5764,9.3119,16.6071,9.65791,16.6071,10.0039C16.6071,10.3499,16.5764,10.6959,16.5175,11.033L16.3618,11.9281L18.1233,13.3545C17.8568,13.9372,17.5196,14.4863,17.1188,14.9975L14.9305,14.2631L14.1901,14.839C13.6266,15.2765,12.9994,15.6203,12.3203,15.8614L11.4219,16.1806L10.9998,18.3459C10.3372,18.4173,9.66045,18.4173,8.9955,18.3459L8.57342,16.1761L7.6821,15.8524C7.01008,15.6114,6.38521,15.2676,5.82637,14.8323L5.08596,14.2541L2.88361,14.9953C2.48275,14.4841,2.14791,13.9327,1.8791,13.3523L3.65938,11.9125L3.50611,11.0196C3.44952,10.687,3.41887,10.3432,3.41887,10.0039C3.41887,9.66237,3.44716,9.32083,3.50611,8.98822L3.65938,8.09531L1.8791,6.6555C2.14556,6.07288,2.48275,5.52374,2.88361,5.01255L5.08596,5.75367L5.82637,5.17551C6.38521,4.74022,7.01008,4.39645,7.6821,4.15536L8.57578,3.83615L8.99786,1.66638C9.66045,1.59495,10.3372,1.59495,11.0021,1.66638L11.4242,3.83168L12.3226,4.1509C12.9994,4.39198,13.6289,4.73575,14.1925,5.17328L14.9329,5.7492L17.1211,5.01479C17.522,5.52598,17.8568,6.07734,18.1256,6.65773L16.3642,8.08416L16.5175,8.97483ZM10.0024,5.85189C7.7104,5.85189,5.85231,7.61092,5.85231,9.78068C5.85231,11.9504,7.7104,13.7095,10.0024,13.7095C12.2943,13.7095,14.1524,11.9504,14.1524,9.78068C14.1524,7.61092,12.2943,5.85189,10.0024,5.85189ZM11.8699,11.5486C11.37,12.0196,10.7074,12.2808,10.0024,12.2808C9.29732,12.2808,8.63473,12.0196,8.13483,11.5486C7.6373,11.0754,7.36142,10.4481,7.36142,9.78068C7.36142,9.11323,7.6373,8.48596,8.13483,8.01272C8.63473,7.53948,9.29732,7.28054,10.0024,7.28054C10.7074,7.28054,11.37,7.53948,11.8699,8.01272C12.3674,8.48596,12.6433,9.11323,12.6433,9.78068C12.6433,10.4481,12.3674,11.0754,11.8699,11.5486Z></path></svg></div><div class="item tools"><svg viewBox="0 0 20 20"><path d=M6.50977,1L13.4902,1C13.6406,1,13.7695,1.1104910000000001,13.7969,1.2631700000000001L14.0273,2.52277C14.1387,3.13147,14.6543,3.57143,15.2559,3.57143L17.5,3.57143C18.8809,3.57143,20,4.72254,20,6.14286L20,16.4286C20,17.8489,18.8809,19,17.5,19L2.5,19C1.11914,19,0,17.8489,0,16.4286L0,6.14286C0,4.72254,1.11914,3.57143,2.5,3.57143L4.74414,3.57143C5.3457,3.57143,5.86133,3.13147,5.97266,2.52277L6.20312,1.2631700000000001C6.23047,1.1104910000000001,6.35937,1,6.50977,1ZM15.2559,4.857139999999999C14.0547,4.857139999999999,13.0215,3.97522,12.7988,2.75982L12.7129,2.28571L7.28711,2.28571L7.20117,2.75982C6.98047,3.97522,5.94727,4.857139999999999,4.74414,4.857139999999999L2.5,4.857139999999999C1.81055,4.857139999999999,1.25,5.43371,1.25,6.14286L1.25,16.4286C1.25,17.1377,1.81055,17.7143,2.5,17.7143L17.5,17.7143C18.1895,17.7143,18.75,17.1377,18.75,16.4286L18.75,6.14286C18.75,5.43371,18.1895,4.857139999999999,17.5,4.857139999999999L15.2559,4.857139999999999ZM4.375,6.78571L3.125,6.78571C2.7793,6.78571,2.5,6.49844,2.5,6.14286C2.5,5.78728,2.7793,5.5,3.125,5.5L4.375,5.5C4.7207,5.5,5,5.78728,5,6.14286C5,6.49844,4.7207,6.78571,4.375,6.78571ZM10,6.14286C7.06641,6.14286,4.6875,8.58973,4.6875,11.6071C4.6875,14.6246,7.06641,17.0714,10,17.0714C12.9336,17.0714,15.3125,14.6246,15.3125,11.6071C15.3125,8.58973,12.9336,6.14286,10,6.14286ZM10,7.42857C11.0859,7.42857,12.1055,7.8625,12.873,8.65201C13.6406,9.44152,14.0625,10.49018,14.0625,11.6071C14.0625,12.7241,13.6406,13.7728,12.873,14.5623C12.1055,15.3518,11.0859,15.7857,10,15.7857C8.91406,15.7857,7.89453,15.3518,7.12695,14.5623C6.35937,13.7728,5.9375,12.7241,5.9375,11.6071C5.9375,10.49018,6.35938,9.44152,7.12695,8.65201C7.89453,7.8625,8.91406,7.42857,10,7.42857ZM10,9.67857C8.96484,9.67857,8.125,10.54241,8.125,11.6071C8.125,12.6719,8.96484,13.5357,10,13.5357C11.0352,13.5357,11.875,12.6719,11.875,11.6071C11.875,10.54241,11.0352,9.67857,10,9.67857ZM10,10.96429C10.3438,10.96429,10.625,11.2536,10.625,11.6071C10.625,11.9607,10.3438,12.25,10,12.25C9.65625,12.25,9.375,11.9607,9.375,11.6071C9.375,11.2536,9.65625,10.96429,10,10.96429Z></path></svg></div><div class="item tools">'),M$=Q("<option>"),I$=Q('<svg viewBox="0 0 20 20"><path d=M1.08108,0L0,1.079L4.18919,5.27938L2.54826,6.91715L6.9112,6.91715L6.9112,2.56262L5.28957,4.18112L1.08108,0ZM15.8108,5.27938L20,1.079L18.9189,0L14.7104,4.18112L13.0888,2.56262L13.0888,6.91715L17.4517,6.91715L15.8108,5.27938ZM4.16988,14.7014L0.07722,18.8054L1.1583,20L5.27027,15.7996L6.9112,17.4374L6.9112,13.0829L2.54826,13.0829L4.16988,14.7014ZM17.4517,13.0829L13.0888,13.0829L13.0888,17.4374L14.7297,15.7996L18.8417,20L19.9228,18.8054L15.8301,14.7013L17.4517,13.0829Z>'),L$=Q('<svg viewBox="0 0 20 20"><path d=M2.93444,1.76899L7.57544,6.40999L6.38918,7.59626L1.76899,2.93444L0,4.70343L0,0L4.70343,0L2.93444,1.76899ZM6.40999,12.4037L1.76899,17.0447L0,15.2758L0,19.9792L4.70343,19.9792L2.93444,18.2102L7.57544,13.5692L6.40999,12.4037ZM15.2758,0L17.0447,1.76899L12.4037,6.40999L13.59,7.59626L18.231,2.95526L20,4.72425L20,0L15.2758,0ZM13.5692,12.4037L12.3829,13.59L17.0239,18.231L15.2549,20L19.9792,20L19.9792,15.2758L18.2102,17.0447L13.5692,12.4037Z>');const P$=e=>{const[t,r]=be(!1),n=()=>{r(i=>!i)};return ki(()=>{document.addEventListener("fullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("msfullscreenchange",n)}),$r(()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("mozfullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("msfullscreenchange",n)}),(()=>{var i=E$(),o=i.firstChild,s=o.nextSibling,u=s.firstChild,d=u.nextSibling,h=s.nextSibling,p=h.firstChild,g=p.nextSibling,m=h.nextSibling,b=m.nextSibling,x=b.nextSibling,C=x.nextSibling,_=C.nextSibling;return hi(k=>{},i),F(i,G(ze,{get when(){return e.symbol},get children(){var k=T$(),M=k.firstChild;return Wi(k,"click",e.onSymbolClick),F(k,G(ze,{get when(){return e.symbol.logo},get children(){var L=k$();return L.addEventListener("error",A=>A.currentTarget.style.display="none"),De(()=>We(L,"src",e.symbol.logo)),L}}),M),F(M,()=>e.symbol.symbol??e.symbol.shortName??e.symbol.name),k}}),o),o.addEventListener("change",k=>{const M=e.periods.find(L=>L.text===k.target.value);M&&e.onPeriodChange(M)}),F(o,()=>e.periods.map(k=>(()=>{var M=M$();return F(M,()=>k.text),De(()=>M.selected=k.text===e.period.text),De(()=>M.value=k.text),M})())),Wi(s,"click",e.onIndicatorClick),F(d,()=>I("indicator",e.locale)),F(i,G(w$,{get locale(){return e.locale},get currentCandleType(){return e.currentCandleType},get onCandleTypeChange(){return e.onCandleTypeChange}}),h),Wi(h,"click",As(e.currentCandleType)?void 0:e.onReplayClick),F(g,()=>I("replay",e.locale)),m.style.setProperty("flex","1"),F(i,G(y$,{get onMultiChartClick(){return e.onMultiChartClick},get multiChart(){return e.multiChart}}),b),b.$$click=()=>{LB(e.chart)},Wi(x,"click",e.onSettingClick),Wi(C,"click",e.onScreenshotClick),_.$$click=()=>{t()||e.rootContainer},F(_,(()=>{var k=Ae(()=>!!t());return()=>k()?I$():L$()})()),De(()=>at(h,`item tools ${As(e.currentCandleType)?"disabled":""}`)),i})()};jt(["click"]);var A$=Q("<div class=chartspire-ui-interval-container>"),D$=Q("<span>");const F$=e=>{const[t,r]=be(Ke.ONE_DAY),n=[Ke.ONE_DAY,Ke.FIVE_DAY,Ke.ONE_MONTH,Ke.THREE_MONTH,Ke.SIX_MONTH,Ke.ONE_YEAR,Ke.FIVE_YEAR],i=()=>{var o;const s=(o=e.widget)==null?void 0:o.getSize();let u={[Ke.ONE_DAY]:1440,[Ke.FIVE_DAY]:1440,[Ke.ONE_MONTH]:1440,[Ke.THREE_MONTH]:1440,[Ke.SIX_MONTH]:2016,[Ke.ONE_YEAR]:365,[Ke.FIVE_YEAR]:260}[t()];e.ticker.type===vr.STOCKS&&(u={[Ke.ONE_DAY]:390,[Ke.FIVE_DAY]:390,[Ke.ONE_MONTH]:273,[Ke.THREE_MONTH]:390,[Ke.SIX_MONTH]:390,[Ke.ONE_YEAR]:252,[Ke.FIVE_YEAR]:252}[t()]);const d=Math.min(Math.max(((s==null?void 0:s.width)??0)/u,1),50);e.widget.setBarSpace(d);let h={multiplier:u,timespan:kn.DAY,text:Ke.ONE_DAY};t()===Ke.ONE_DAY?h={multiplier:1,timespan:kn.MINUTE,text:Ke.ONE_MIN}:t()===Ke.FIVE_DAY?h={multiplier:5,timespan:kn.MINUTE,text:Ke.FIVE_MIN}:t()===Ke.ONE_MONTH?h={multiplier:1,timespan:kn.MINUTE,text:Ke.THIRTY_MIN}:t()===Ke.THREE_MONTH?h={multiplier:1,timespan:kn.HOUR,text:Ke.ONE_HOUR}:t()===Ke.SIX_MONTH?h={multiplier:2,timespan:kn.HOUR,text:Ke.TWO_HOUR}:t()===Ke.ONE_YEAR?h={multiplier:1,timespan:kn.DAY,text:Ke.ONE_DAY}:t()===Ke.FIVE_YEAR&&(h={multiplier:1,timespan:kn.WEEK,text:Ke.ONE_WEEK}),e.widget.setOffsetRightDistance(0),e.setInterval(h)};return(()=>{var o=A$();return F(o,()=>n.map(s=>(()=>{var u=D$();return u.$$click=()=>{console.log("interval clicked",s),r(s),i()},F(u,s),De(()=>at(u,`interval-buttons ${s===t()?"selected":""}`)),u})())),o})()};jt(["click"]);var R$=Q("<div class=chartspire-ui-layout-selector><select></select><span class=button>+</span><span class=button>-"),O$=Q("<option>"),N$=Q('<div class=edit-layout><span class=edit-button><svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z">'),z$=Q('<div class=edit-layout-form><span class=confirm-button><svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg></span><span class=cancel-button>X');const B$=e=>{const[t,r]=be([]),[n,i]=be(null),[o,s]=be("");nt(()=>{e.allLayouts&&r([...new Set(e.allLayouts)])});const u=m=>{e.onLayoutChange(m)},d=()=>{if(t().length>=e.layoutLimit+1){alert("You can only have a maximum of "+e.layoutLimit.toString()+" layouts.");return}const m=`Layout${t().length+1}`;if(t().includes(m)){alert("A layout with this name already exists.");return}r([...t(),m]),e.setAllLayouts([...t(),m]),u(m)},h=()=>{if(e.layout===mt.getInstance(e.widget).getDefaultLayout()||!window.confirm("Are you sure you want to delete this layout?"))return;mt.getInstance(e.widget).removeStorage();const m=t().filter(b=>b!==e.layout);r(m),e.setAllLayouts(m),m.length>0?u(m[0]):u(""),i(null)},p=()=>{if(e.layout===mt.getInstance(e.widget).getDefaultLayout())return;const m=t().find(b=>b===e.layout);m&&(i(m),s(m))},g=async()=>{if(e.layout===mt.getInstance(e.widget).getDefaultLayout())return;const m=t().map(b=>b===n()?o():b);r(m),i(null),await mt.getInstance(e.widget).updateLayoutName(o()),e.setAllLayouts(m),u(o())};return(()=>{var m=R$(),b=m.firstChild,x=b.nextSibling,C=x.nextSibling;return b.addEventListener("change",_=>{e.layout===mt.getInstance(e.widget).getDefaultLayout()&&mt.getInstance(e.widget).removeAllOverlays();const k=_.target.value;u(k)}),F(b,G(mn,{get each(){return t()},children:_=>(()=>{var k=O$();return k.value=_,F(k,_),De(()=>k.selected=_===e.layout),k})()})),x.$$click=d,C.$$click=h,F(m,(()=>{var _=Ae(()=>!!e.layout);return()=>_()&&(()=>{var k=N$(),M=k.firstChild;return M.$$click=p,F(k,(()=>{var L=Ae(()=>n()===e.layout);return()=>L()&&(()=>{var A=z$(),P=A.firstChild,$=P.nextSibling;return F(A,G(Wa,{class:"layout-input",get value(){return o()},onChange:R=>{s(R)}}),P),P.$$click=g,$.$$click=()=>i(null),A})()})(),null),k})()})(),null),De(()=>b.value=e.layout),m})()};jt(["click"]);const $$={builtInThemes:["Light Theme 1","Light Theme 2","Midnight Theme","Dark Theme","Dark Gray Theme","Blue Theme","Red Theme","Green Theme","Yellow Theme","Pink Theme"],customThemes:[],allowCustomThemes:!0};class V${constructor(){xe(this,"storageKey","chartspire-custom-themes")}save(t){try{localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(r){console.warn("Failed to save custom themes to localStorage:",r)}}load(){try{const t=localStorage.getItem(this.storageKey);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load custom themes from localStorage:",t)}return null}}const W$=async()=>null;class U${constructor(t=!1){xe(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}save(t){this.log("[ExternalThemeStorageProvider] Saving custom themes via callback"),this.log("[ExternalThemeStorageProvider] Themes to save:",t),this.log("[ExternalThemeStorageProvider] Themes count:",t.length),this.logWarn("[ExternalThemeStorageProvider] No save callback registered, themes not saved")}load(){return this.log("[ExternalThemeStorageProvider] Load called - use loadAsync() for external storage"),null}async loadAsync(){try{this.log("[ExternalThemeStorageProvider] Loading custom themes via callback");const t=await W$();return t&&t.length>0?(this.log("[ExternalThemeStorageProvider] Custom themes loaded successfully"),t):(this.log("[ExternalThemeStorageProvider] No custom themes found"),[])}catch(t){return console.error("[ExternalThemeStorageProvider] Error loading custom themes:",t),null}}}const $5=class Ed{constructor(t=!1){xe(this,"themeConfig"),xe(this,"customStyleElement",null),xe(this,"storageProvider"),xe(this,"useExternalStorage"),this.themeConfig={...$$},this.useExternalStorage=t,this.storageProvider=t?new U$:new V$,this.loadCustomThemes()}static getInstance(t=!1){return Ed.instance||(Ed.instance=new Ed(t)),Ed.instance}static async initializeAsync(t=!1){const r=Ed.getInstance(t);return t&&r.isExternalStorageProvider(r.storageProvider)&&await r.loadCustomThemesAsync(),r}isUsingExternalStorage(){return this.useExternalStorage}isExternalStorageProvider(t){return"loadAsync"in t&&typeof t.loadAsync=="function"}setThemeConfig(t){this.themeConfig={...this.themeConfig,...t},this.saveCustomThemes(),this.updateCustomThemeStyles()}addCustomTheme(t){const r=this.themeConfig.customThemes.findIndex(n=>n.name===t.name);r>=0?this.themeConfig.customThemes[r]=t:this.themeConfig.customThemes.push(t),this.saveCustomThemes(),this.updateCustomThemeStyles()}removeCustomTheme(t){this.themeConfig.customThemes=this.themeConfig.customThemes.filter(r=>r.name!==t),this.saveCustomThemes(),this.updateCustomThemeStyles()}getAllThemes(){const t=this.themeConfig.customThemes.map(r=>r.displayName);return[...this.themeConfig.builtInThemes,...t]}getCustomThemes(){return this.themeConfig.customThemes}areCustomThemesAllowed(){return this.themeConfig.allowCustomThemes}isCustomTheme(t){return this.themeConfig.customThemes.some(r=>r.displayName===t||r.name===t)}getCustomTheme(t){return this.themeConfig.customThemes.find(r=>r.displayName===t||r.name===t)}loadCustomThemes(){const t=this.storageProvider.load();t&&(this.themeConfig.customThemes=t,this.updateCustomThemeStyles())}async loadCustomThemesAsync(){if(this.isExternalStorageProvider(this.storageProvider)){const t=await this.storageProvider.loadAsync();t&&(this.themeConfig.customThemes=t,this.updateCustomThemeStyles())}}saveCustomThemes(){this.storageProvider.save(this.themeConfig.customThemes)}updateCustomThemeStyles(){if(this.customStyleElement&&this.customStyleElement.remove(),this.themeConfig.customThemes.length>0){this.customStyleElement=document.createElement("style"),this.customStyleElement.id="chartspire-custom-themes";let t="";for(const r of this.themeConfig.customThemes)t+=this.generateThemeCSS(r);this.customStyleElement.textContent=t,document.head.appendChild(this.customStyleElement)}}generateThemeCSS(t){const r=t.colors;return`
.chartspire-ui[data-theme="${t.name}"] {
	--chartspire-ui-primary-color: ${r.primaryColor};
	--chartspire-ui-selected-color: ${r.selectedColor};
	--chartspire-ui-hover-background-color: ${r.hoverBackgroundColor};
	--chartspire-ui-background-color: ${r.backgroundColor};
	--chartspire-ui-popover-background-color: ${r.popoverBackgroundColor};
	--chartspire-ui-text-color: ${r.textColor};
	--chartspire-ui-text-second-color: ${r.textSecondColor};
	--chartspire-ui-border-color: ${r.borderColor};
}
`}importThemes(t){try{const r=JSON.parse(t);for(const n of r)this.addCustomTheme(n)}catch{throw new Error("Invalid theme JSON format")}}exportThemes(){return JSON.stringify(this.themeConfig.customThemes,null,2)}};xe($5,"instance");let xy=$5;var H$=Q("<button class=custom-theme-toggle>+"),Y$=Q("<div class=import-section><label></label><textarea rows=4></textarea><div class=import-buttons><button></button><button>"),X$=Q("<div class=custom-themes-list><h5>"),j$=Q("<div class=chartspire-ui><div class=custom-theme-creator><div class=creator-header><h4></h4><button class=close-btn></button></div><div class=theme-form><div class=form-group><label></label><input type=text></div><div class=color-inputs></div><div class=action-buttons><button class=create-btn></button><button class=import-btn></button><button class=export-btn>"),Z$=Q('<div class=chartspire-ui-theme-selector><div class=theme-selector-header><svg viewBox="2 2 20 20"><path d="M12 2.75C6.89321 2.75 2.75 6.90121 2.75 12.0261C2.75 16.7885 6.32861 20.7112 10.9326 21.2412C11.395 21.2944 11.89 21.1004 12.2858 20.7036C12.6473 20.3412 12.6473 19.7528 12.2858 19.3904C11.9739 19.0776 11.6611 18.6609 11.4899 18.1872C11.3146 17.702 11.2713 17.0933 11.627 16.5276C11.9499 16.014 12.4341 15.739 12.9421 15.6053C13.4313 15.4766 13.9734 15.4693 14.494 15.5009C14.978 15.5303 15.4991 15.5978 16.0045 15.6633C16.0471 15.6689 16.0896 15.6744 16.132 15.6798C16.6889 15.7517 17.2328 15.8188 17.7581 15.8439C18.8324 15.8954 19.6599 15.76 20.2254 15.2976C20.7667 14.8552 21.25 13.9568 21.25 12.0261C21.25 6.90121 17.1068 2.75 12 2.75ZM1.25 12.0261C1.25 6.07647 6.0611 1.25 12 1.25C17.9389 1.25 22.75 6.07647 22.75 12.0261C22.75 14.1713 22.2132 15.6101 21.1748 16.459C20.1608 17.2879 18.8495 17.398 17.6863 17.3422C17.0929 17.3138 16.4934 17.239 15.9399 17.1675C15.901 17.1625 15.8625 17.1575 15.8241 17.1525C15.3046 17.0853 14.8335 17.0243 14.4032 16.9982C13.937 16.9699 13.5828 16.9878 13.3239 17.0559C13.0837 17.1191 12.968 17.2127 12.8968 17.326C12.858 17.3877 12.8307 17.4837 12.9007 17.6775C12.9749 17.8829 13.1368 18.1195 13.3478 18.3311C14.2933 19.279 14.2933 20.815 13.3478 21.7629C12.6976 22.4148 11.7682 22.8473 10.761 22.7314C5.40565 22.1148 1.25 17.5562 1.25 12.0261ZM9.585 6.24977C9.17079 6.24977 8.835 6.58556 8.835 6.99977C8.835 7.41399 9.17079 7.74977 9.585 7.74977C9.99922 7.74977 10.335 7.41399 10.335 6.99977C10.335 6.58556 9.99922 6.24977 9.585 6.24977ZM7.335 6.99977C7.335 5.75713 8.34236 4.74977 9.585 4.74977C10.8276 4.74977 11.835 5.75713 11.835 6.99977C11.835 8.24241 10.8276 9.24977 9.585 9.24977C8.34236 9.24977 7.335 8.24241 7.335 6.99977ZM14.5 6.25C14.0858 6.25 13.75 6.58579 13.75 7C13.75 7.41421 14.0858 7.75 14.5 7.75C14.9142 7.75 15.25 7.41421 15.25 7C15.25 6.58579 14.9142 6.25 14.5 6.25ZM12.25 7C12.25 5.75736 13.2574 4.75 14.5 4.75C15.7426 4.75 16.75 5.75736 16.75 7C16.75 8.24264 15.7426 9.25 14.5 9.25C13.2574 9.25 12.25 8.24264 12.25 7ZM6.5 10.75C6.08579 10.75 5.75 11.0858 5.75 11.5C5.75 11.9142 6.08579 12.25 6.5 12.25C6.91421 12.25 7.25 11.9142 7.25 11.5C7.25 11.0858 6.91421 10.75 6.5 10.75ZM4.25 11.5C4.25 10.2574 5.25736 9.25 6.5 9.25C7.74264 9.25 8.75 10.2574 8.75 11.5C8.75 12.7426 7.74264 13.75 6.5 13.75C5.25736 13.75 4.25 12.7426 4.25 11.5ZM17.5 10.75C17.0858 10.75 16.75 11.0858 16.75 11.5C16.75 11.9142 17.0858 12.25 17.5 12.25C17.9142 12.25 18.25 11.9142 18.25 11.5C18.25 11.0858 17.9142 10.75 17.5 10.75ZM15.25 11.5C15.25 10.2574 16.2574 9.25 17.5 9.25C18.7426 9.25 19.75 10.2574 19.75 11.5C19.75 12.7426 18.7426 13.75 17.5 13.75C16.2574 13.75 15.25 12.7426 15.25 11.5Z"></path></svg><select>'),G$=Q("<option>"),Q$=Q("<div class=form-group><label><span class=field-description></span></label><div class=color-input-group><input type=color><input type=text>"),K$=Q("<div class=theme-item><span class=theme-name></span><div class=theme-actions><button class=edit-btn></button><button class=delete-btn>");const q$=e=>{const[t,r]=be([]),[n,i]=be([]),[o,s]=be(!1),[u,d]=be({left:0,top:0}),[h,p]=be(""),[g,m]=be(null),[b,x]=be({primaryColor:"#1677ff",selectedColor:"rgba(22, 119, 255, 0.15)",hoverBackgroundColor:"rgba(22, 119, 255, 0.15)",backgroundColor:"#ffffff",popoverBackgroundColor:"#ffffff",textColor:"#051441",textSecondColor:"#76808f",borderColor:"#ebedf1"}),[C,_]=be(!1),[k,M]=be("");localStorage.getItem(Pv);const L=xy.getInstance(e.themeUseExternalStorage??!1),A=()=>{const q=L.getAllThemes(),ie=L.getCustomThemes(),le=q.map(ae=>L.isCustomTheme(ae)?ae:I(ae,e.locale));r(le),i([...ie])};ki(async()=>{if(A(),e.themeUseExternalStorage){await new Promise(ie=>setTimeout(ie,1e3));try{await xy.initializeAsync(!0),A()}catch(ie){console.error("[ThemeSelector] Failed to initialize external theme storage: ",ie)}}const q=()=>{if(o()){const ie=document.querySelector(".custom-theme-toggle");if(ie){const le=ie.getBoundingClientRect(),ae=window.innerWidth<=480?window.innerWidth-16:320,te=600,ce=window.innerWidth<=480?8:16;let ue=le.left;ue+ae>window.innerWidth-ce&&(ue=window.innerWidth-ae-ce),ue<ce&&(ue=ce);let j=le.top-te-8;j<ce&&(j=le.bottom+8),j+te>window.innerHeight-ce&&(j=window.innerHeight-te-ce),d({left:ue,top:j})}}};return window.addEventListener("resize",q),()=>{window.removeEventListener("resize",q)}});const P=q=>{console.log("[ThemeSelector] handleThemeChange called with:",q);let ie=q;const le=["Light Theme 1","Light Theme 2","Midnight Theme","Dark Theme","Dark Gray Theme","Blue Theme","Red Theme","Green Theme","Yellow Theme","Pink Theme"];for(const ae of le)if(I(ae,e.locale)===q){ie=ae;break}if(L.isCustomTheme(q)){const ae=L.getCustomTheme(q);ae&&(ie=ae.name)}console.log("[ThemeSelector] Setting theme to:",ie),e.setTheme(ie)},$=[{key:"primaryColor",label:"Primary Color",description:"Main accent color for buttons and highlights"},{key:"selectedColor",label:"Selected Color",description:"Color for selected items and active states"},{key:"hoverBackgroundColor",label:"Hover Background",description:"Background color when hovering over elements"},{key:"backgroundColor",label:"Background Color",description:"Main background color of the interface"},{key:"popoverBackgroundColor",label:"Popover Background",description:"Background color for dropdowns and modals"},{key:"textColor",label:"Text Color",description:"Primary text color"},{key:"textSecondColor",label:"Secondary Text",description:"Color for secondary text and labels"},{key:"borderColor",label:"Border Color",description:"Color for borders and dividers"}],R=(q,ie)=>{x(le=>({...le,[q]:ie}))},z=()=>{if(!h().trim()){alert(I("Please enter a theme name",e.locale));return}const q={name:h().trim(),displayName:h().trim(),colors:b()};try{L.addCustomTheme(q),A(),B();const ie=g()?I("Theme updated successfully!",e.locale):I("Theme created successfully!",e.locale);alert(ie),s(!1)}catch{const ie=g()?I("Failed to update theme",e.locale):I("Failed to create theme",e.locale);alert(ie)}},B=()=>{p(""),m(null),x({primaryColor:"#1677ff",selectedColor:"rgba(22, 119, 255, 0.15)",hoverBackgroundColor:"rgba(22, 119, 255, 0.15)",backgroundColor:"#ffffff",popoverBackgroundColor:"#ffffff",textColor:"#051441",textSecondColor:"#76808f",borderColor:"#ebedf1"})},W=q=>{m(q),p(q.displayName),x(q.colors),s(!0)},X=()=>{try{L.importThemes(k()),M(""),_(!1),A(),alert(I("Themes imported successfully!",e.locale))}catch{alert(I("Invalid theme JSON format",e.locale))}},ee=()=>{const q=L.exportThemes();navigator.clipboard.writeText(q).then(()=>{alert(I("Themes exported to clipboard!",e.locale))}).catch(()=>{const ie=document.createElement("textarea");ie.value=q,document.body.appendChild(ie),ie.select(),document.execCommand("copy"),document.body.removeChild(ie),alert(I("Themes exported to clipboard!",e.locale))})},U=q=>{confirm(I(`Are you sure you want to delete the theme "${q}"?`,e.locale))&&(L.removeCustomTheme(q),A(),alert(I("Theme deleted successfully!",e.locale)))};return(()=>{var q=Z$(),ie=q.firstChild,le=ie.firstChild,ae=le.nextSibling;return ae.addEventListener("change",te=>P(te.currentTarget.value)),F(ae,G(mn,{get each(){return t()},children:te=>(()=>{var ce=G$();return ce.value=te,F(ce,te,null),F(ce,()=>L.isCustomTheme(te)?" (Custom)":"",null),De(()=>ce.selected=te===e.theme),ce})()})),F(ie,G(ze,{get when(){return e.themeGeneraterEnabled!==!1},get children(){var te=H$();return te.$$click=ce=>{if(!o()){const ue=ce.currentTarget.getBoundingClientRect(),j=window.innerWidth<=480?window.innerWidth-16:320,Z=600,pe=window.innerWidth<=480?8:16;let Y=ue.left;Y+j>window.innerWidth-pe&&(Y=window.innerWidth-j-pe),Y<pe&&(Y=pe);let fe=ue.top-Z-8;fe<pe&&(fe=ue.bottom+8),fe+Z>window.innerHeight-pe&&(fe=window.innerHeight-Z-pe),d({left:Y,top:fe})}s(!o())},De(()=>We(te,"title",I("Create Custom Theme",e.locale))),te}}),null),F(q,G(ze,{get when(){return o()},get children(){return G(tv,{get children(){var te=j$(),ce=te.firstChild,ue=ce.firstChild,j=ue.firstChild,Z=j.nextSibling,pe=ue.nextSibling,Y=pe.firstChild,fe=Y.firstChild,ve=fe.nextSibling,$e=Y.nextSibling,Ie=$e.nextSibling,Oe=Ie.firstChild,Ce=Oe.nextSibling,Le=Ce.nextSibling;return F(j,(()=>{var Ve=Ae(()=>!!g());return()=>Ve()?I("Edit Custom Theme",e.locale):I("Create Custom Theme",e.locale)})()),Z.$$click=()=>{B(),s(!1)},F(fe,()=>I("Theme Name",e.locale)),ve.$$input=Ve=>p(Ve.currentTarget.value),F($e,G(mn,{each:$,children:Ve=>(()=>{var je=Q$(),qe=je.firstChild,ht=qe.firstChild,vt=qe.nextSibling,bt=vt.firstChild,or=bt.nextSibling;return F(qe,()=>I(Ve.label,e.locale),ht),F(ht,()=>I(Ve.description,e.locale)),bt.$$input=dr=>R(Ve.key,dr.currentTarget.value),or.$$input=dr=>R(Ve.key,dr.currentTarget.value),De(()=>We(or,"placeholder",I("Color value (hex, rgb, rgba)",e.locale))),De(()=>bt.value=b()[Ve.key].startsWith("rgba")?"#1677ff":b()[Ve.key]),De(()=>or.value=b()[Ve.key]),je})()})),Oe.$$click=z,F(Oe,(()=>{var Ve=Ae(()=>!!g());return()=>Ve()?I("Update Theme",e.locale):I("Create Theme",e.locale)})()),Ce.$$click=()=>_(!C()),F(Ce,()=>I("Import",e.locale)),Le.$$click=ee,F(Le,()=>I("Export",e.locale)),F(pe,G(ze,{get when(){return C()},get children(){var Ve=Y$(),je=Ve.firstChild,qe=je.nextSibling,ht=qe.nextSibling,vt=ht.firstChild,bt=vt.nextSibling;return F(je,()=>I("Paste Theme JSON",e.locale)),qe.$$input=or=>M(or.currentTarget.value),vt.$$click=X,F(vt,()=>I("Import",e.locale)),bt.$$click=()=>_(!1),F(bt,()=>I("Cancel",e.locale)),De(()=>We(qe,"placeholder",I("Paste your theme JSON here...",e.locale))),De(()=>qe.value=k()),Ve}}),null),F(pe,G(ze,{get when(){return n().length>0},get children(){var Ve=X$(),je=Ve.firstChild;return F(je,()=>I("Custom Themes",e.locale)),F(Ve,G(mn,{get each(){return n()},children:qe=>(()=>{var ht=K$(),vt=ht.firstChild,bt=vt.nextSibling,or=bt.firstChild,dr=or.nextSibling;return F(vt,()=>qe.displayName),or.$$click=()=>W(qe),F(or,()=>I("Edit",e.locale)),dr.$$click=()=>U(qe.name),F(dr,()=>I("Delete",e.locale)),ht})()}),null),Ve}}),null),De(Ve=>{var je=e.theme,qe=`${u().left}px`,ht=`${u().top}px`,vt=I("Enter theme name",e.locale);return je!==Ve.e&&We(te,"data-theme",Ve.e=je),qe!==Ve.t&&((Ve.t=qe)!=null?ce.style.setProperty("left",qe):ce.style.removeProperty("left")),ht!==Ve.a&&((Ve.a=ht)!=null?ce.style.setProperty("top",ht):ce.style.removeProperty("top")),vt!==Ve.o&&We(ve,"placeholder",Ve.o=vt),Ve},{e:void 0,t:void 0,a:void 0,o:void 0}),De(()=>ve.value=h()),te}})}}),null),De(()=>ae.value=e.theme?L.isCustomTheme(e.theme)?e.theme:I(e.theme,e.locale):I("Light Theme 1",e.locale)),q})()};jt(["click","input"]);var J$=Q('<div class=chartspire-ui-timezone-container><div class=timezone-display><div class=time-text></div><div class=timezone-text></div><svg width=8 height=8 viewBox="0 0 8 8"><path d="M4 5.5L1.5 3h5L4 5.5z">');const eV=e=>{const[t,r]=be(""),[n,i]=be(!1);let o,s;const u=()=>{try{const m=new Date().toLocaleTimeString("en-US",{timeZone:e.timezone.key,hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});r(m)}catch{const m=new Date().toLocaleTimeString("en-US",{timeZone:"UTC",hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});r(m)}},d=ir(()=>yE(e.locale).map(m=>({key:m.key,text:typeof m.text=="string"?m.text:String(m.text),value:m}))),h=m=>{const b=m.value;e.onTimezoneChange(b)},p=()=>{i(!n())},g=()=>{i(!1)};return ki(()=>{u(),o=window.setInterval(u,1e3)}),$r(()=>{o&&clearInterval(o)}),[(()=>{var m=J$(),b=m.firstChild,x=b.firstChild,C=x.nextSibling,_=C.nextSibling,k=s;return typeof k=="function"?hi(k,m):s=m,b.$$click=p,F(x,t),F(C,(()=>{var M=Ae(()=>typeof e.timezone.text=="string");return()=>M()&&e.timezone.text.split(" ")[0]||e.timezone.text})()),De(()=>We(_,"class",`dropdown-arrow ${n()?"open":""}`)),m})(),G(x5,{get options(){return d()},get selectedKey(){return e.timezone.key},onSelect:h,triggerRef:s,get isOpen(){return n()},onClose:g,placement:"top",className:"timezone-dropdown",maxHeight:800})]};jt(["click"]);var tV=Q("<div class=chartspire-ui-bottom-bar>");const rV=e=>(()=>{var t=tV();return hi(r=>{},t),F(t,G(ze,{get when(){return e.intervalEnabled!==!1},get children(){return G(F$,{get widget(){return e.widget},get ticker(){return e.ticker},get setInterval(){return e.setInterval}})}}),null),F(t,G(ze,{get when(){return e.layoutsEnabled!==!1},get children(){return G(B$,{get widget(){return e.widget},get layout(){return e.layout},get allLayouts(){return e.allLayouts},get setAllLayouts(){return e.setAllLayouts},get onLayoutChange(){return e.onLayoutChange},get layoutLimit(){return e.layoutLimit}})}}),null),F(t,G(ze,{get when(){return e.themesEnabled!==!1},get children(){return G(q$,{get widget(){return e.widget},get theme(){return e.theme},get setTheme(){return e.setTheme},get locale(){return e.locale},get themeUseExternalStorage(){return e.themeUseExternalStorage},get themeGeneraterEnabled(){return e.themeGeneraterEnabled}})}}),null),F(t,G(ze,{get when(){return e.timezoneEnabled!==!1},get children(){return G(eV,{get timezone(){return e.timezone},get onTimezoneChange(){return e.onTimezoneChange},get locale(){return e.locale}})}}),null),t})(),Kt={color:"#1677FF",borderColor:"rgba(22, 119, 255, 0.35)",borderSize:1,radius:5,activeColor:"#1677FF",activeBorderColor:"rgba(22, 119, 255, 0.35)",activeBorderSize:3,activeRadius:5},Mn={style:"fill",color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderSize:0,borderRadius:2,borderColor:"#1677FF",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"rgba(22, 119, 255)"},Mv={style:"fill",color:"rgba(22, 119, 255, 0.25)",borderColor:"#1677FF",borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},Xc={style:"fill",color:"rgba(22, 119, 255)",borderColor:"#1677FF",borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},In={...Mv,borderRadius:2,color:"rgba(22, 119, 255, 0.1)",borderColor:"#1677FF",borderSize:1,borderStyle:"solid",borderDashedValue:[2,2],paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2},Iv={style:"solid",color:"#1677FF",size:1,dashedValue:[2,2]},kr={...Iv,smooth:!1};function nV(){return{point:Kt}}function iV(){return{line:kr,point:Kt}}function oV(){return{line:kr,point:Kt}}function aV(){return{line:kr,point:Kt}}function sV(){return{line:kr,point:Kt}}function lV(){return{line:kr,point:Kt}}function cV(){return{line:kr,point:Kt}}function uV(){return{line:kr,point:Kt}}function dV(){return{line:kr,point:Kt}}function hV(){return{line:kr,point:Kt}}function pV(){return{line:kr,text:Mn,point:Kt}}function fV(){return{line:kr,point:Kt}}function gV(){return{polygon:Xc,point:Kt}}function vV(){return{polygon:Xc,point:Kt}}function mV(){return{circle:Mv,point:Kt}}function yV(){return{arc:Iv,point:Kt}}function bV(){return{text:Mn}}function xV(){return{line:kr,rect:In,point:Kt}}function wV(){return{line:kr,rect:In,point:Kt}}function CV(){return{line:kr,text:Mn,polygon:Xc}}function _V(){return{text:Mn,line:kr,polygon:Xc}}function SV(){return{polygon:Xc,rect:In,point:Kt}}function kV(){return{point:Kt,rect:In,polygon:Xc}}function TV(){return{line:kr,rect:In,text:Mn,point:Kt}}function EV(){return{line:kr,rect:In,text:Mn,point:Kt}}function MV(){return{circle:Mv,rect:In,text:Mn,point:Kt}}function IV(){return{line:kr,rect:In,text:Mn,arc:Iv,point:Kt}}function LV(){return{line:kr,rect:In,text:Mn,point:Kt}}function PV(){return{line:kr,rect:In,text:Mn,point:Kt}}function AV(){return{line:kr,rect:In,text:Mn,point:Kt}}function DV(){return{line:kr,rect:In,text:Mn,point:Kt}}function FV(){return{line:kr,rect:In,text:Mn,point:Kt}}function RV(){return{line:kr,rect:In,text:Mn,point:Kt}}function OV(){return{line:kr,rect:In,text:Mn,point:Kt}}function NV(){return{line:kr,rect:In,text:Mn,point:Kt}}function zV(){return{line:kr,rect:In,text:Mn,point:Kt}}function BV(){return{line:kr,rect:In,text:Mn,point:Kt,polygon:Xc}}function $V(){return{rect:In,text:Mn,point:Kt}}const Cg={pointStyle:()=>tt.cloneDeep(nV()),horizontalStraightLineStyle:()=>tt.cloneDeep(iV()),horizontalRayLineStyle:()=>tt.cloneDeep(aV()),horizontalSegmentStyle:()=>tt.cloneDeep(oV()),verticalStraightLineStyle:()=>tt.cloneDeep(cV()),verticalRayLineStyle:()=>tt.cloneDeep(sV()),verticalSegmentStyle:()=>tt.cloneDeep(lV()),straightLineStyle:()=>tt.cloneDeep(fV()),rayLineStyle:()=>tt.cloneDeep(uV()),segmentStyle:()=>tt.cloneDeep(dV()),arrowStyle:()=>tt.cloneDeep(hV()),priceLineStyle:()=>tt.cloneDeep(pV()),rectStyle:()=>tt.cloneDeep(gV()),polygonStyle:()=>tt.cloneDeep(vV()),circleStyle:()=>tt.cloneDeep(mV()),arcStyle:()=>tt.cloneDeep(yV()),textStyle:()=>tt.cloneDeep(bV()),priceChannelLineStyle:()=>tt.cloneDeep(xV()),simpleTagStyle:()=>tt.cloneDeep(CV()),simpleAnnotationStyle:()=>tt.cloneDeep(_V()),parallelStraightLineStyle:()=>tt.cloneDeep(wV()),parallelogramStyle:()=>tt.cloneDeep(SV()),triangleStyle:()=>tt.cloneDeep(kV()),fibonacciSpiralStyle:()=>tt.cloneDeep(IV()),fibonacciCircleStyle:()=>tt.cloneDeep(MV()),fibonacciExtensionStyle:()=>tt.cloneDeep(LV()),fibonacciLineStyle:()=>tt.cloneDeep(TV()),fibonacciSegmentStyle:()=>tt.cloneDeep(EV()),fibonacciSpeedResistanceFanStyle:()=>tt.cloneDeep(PV()),gannBoxStyle:()=>tt.cloneDeep(AV()),abcdStyle:()=>tt.cloneDeep(FV()),anyWavesStyle:()=>tt.cloneDeep(zV()),eightWavesStyle:()=>tt.cloneDeep(NV()),fiveWavesStyle:()=>tt.cloneDeep(OV()),threeWavesStyle:()=>tt.cloneDeep(RV()),xabcdStyle:()=>tt.cloneDeep(DV()),rulerStyle:()=>tt.cloneDeep(BV()),rrStyle:()=>tt.cloneDeep($V())},wy={createPointFigures:({bounding:e,coordinates:t})=>({type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]},ignoreEvent:!1}),createYAxisFigures:({overlay:e,coordinates:t,bounding:r,yAxis:n})=>{var i;const o=(n==null?void 0:n.isFromZero())??!1;let s="left",u=0;o?(s="left",u=0):(s="right",u=r.width);let d="";return e.extendData!=null&&(typeof e.extendData!="function"?d=e.extendData??"":d=e.extendData(e)),d===""&&typeof((i=e.points[0])==null?void 0:i.value)=="number"&&(d=e.points[0].value.toString()),{type:"text",attrs:{x:u,y:t[0].y,text:d,align:s,baseline:"middle"}}}},VV={createPointFigures:({overlay:e,coordinates:t})=>{let r="";e.extendData&&(r=typeof e.extendData=="function"?e.extendData(e):e.extendData||"");const n=t[0].x,i=t[0].y-6,o=i-50,s=o-5;return[{type:"line",attrs:{coordinates:[{x:n,y:i},{x:n,y:o}]},ignoreEvent:!1},{type:"polygon",attrs:{coordinates:[{x:n,y:o},{x:n-4,y:s},{x:n+4,y:s}]},ignoreEvent:!1},{type:"text",attrs:{x:n,y:s,text:r,align:"center",baseline:"bottom"},ignoreEvent:!1}]}};function Lv(e){if(e.name==="simpleTag"||e.name==="simpleAnnotation"){e.createPointFigures||(e.name==="simpleTag"?(e.createPointFigures=wy.createPointFigures,e.createYAxisFigures=wy.createYAxisFigures):e.name==="simpleAnnotation"&&(e.createPointFigures=VV.createPointFigures));const t=e.createPointFigures;e.createPointFigures=r=>{if(t){const n=t(r);if(Array.isArray(n))return n.map(i=>({...i,ignoreEvent:!1}));if(n)return{...n,ignoreEvent:!1}}return[]}}}var WV=Q("<div class=overlay-type>Text"),UV=Q("<div class=component><span>Label Text"),HV=Q("<div class=chartspire-ui-overlay-setting-modal-content><div class=content>"),YV=Q("<div class=overlay-type>"),XV=Q("<div>"),jV=Q("<div class=component><span>");const V5=e=>{let t=e.overlay.styles?e.overlay.styles:Cg[`${e.overlay.name}Style`]();(e.overlay.name==="simpleTag"||e.overlay.name==="simpleAnnotation")&&(t=Cg[`${e.overlay.name}Style`]());const r=iN(e.locale);let n=[],i=[];t&&(n=Object.keys(r),i=Object.keys(t));const o=d=>{const[h,p,g]=d.split(".");if(t&&t[p]&&t&&t[p][g]!==void 0)return t[p][g];{const m=Cg[`${e.overlay.name}Style`]();if(m&&m[p]&&m[p][g]!==void 0)return m[p][g]}},s=(d,h,p)=>{const g=d.key.split(".")[2];t[p][g]=h,(m=>{const b=tt.cloneDeep(m),[x,C,_]=d.key.split("."),k=C?`${C}.${_}`:`${C}.${_}`;C?tt.set(b,k,h):tt.set(b,`${d.key}`,h);const M={id:e.overlay.id,styles:b};if(e.widget.overrideOverlay(M),mt.getInstance(e.widget).overrideOverlay(M),e.chartId){const L=N0(),A={...e.overlay,styles:b};L.onOverlayUpdated(e.chartId,A)}return b})(t)},u=d=>{const h=typeof d=="number"?String(d):d,p={id:e.overlay.id,extendData:h};if(e.widget.overrideOverlay(p),mt.getInstance(e.widget).overrideOverlay(p),e.chartId){const g=N0(),m={...e.overlay,extendData:h};g.onOverlayUpdated(e.chartId,m)}(e.overlay.name==="simpleTag"||e.overlay.name==="simpleAnnotation")&&Lv(e.overlay)};return G(Rl,{get title(){return`Style ${e.overlay.name}`},width:360,contentHeight:"90%",onClose:()=>{e.setOverlayVisible(!1),e.setShowOverlaySetting(!1)},get children(){var d=HV(),h=d.firstChild;return F(h,G(ze,{get when(){return e.overlay.name==="simpleTag"||e.overlay.name==="simpleAnnotation"},get children(){return[WV(),(()=>{var p=UV();return p.firstChild,F(p,G(Wa,{style:{width:"120px"},get value(){return typeof e.overlay.extendData=="string"?e.overlay.extendData:""},onChange:g=>{u(g)}}),null),p})()]}}),null),F(h,G(mn,{each:i,children:p=>{if(n.includes(p))return[(()=>{var g=YV();return F(g,p),g})(),G(mn,{get each(){return r[p]},children:g=>{let m;const b=o(g.key);if(b!==void 0){switch(g.component){case"select":{m=G(Xp,{style:{width:"120px"},get value(){return I(b,e.locale)},get dataSource(){return g.dataSource},onSelected:x=>{const C=x.key;s(g,C,p)}});break}case"input":{m=[G(ze,{get when(){return tt.isArray(b)},get children(){var x=XV();return x.style.setProperty("width","120px"),x.style.setProperty("display","flex"),x.style.setProperty("flex-direction","row"),x.style.setProperty("align-items","center"),x.style.setProperty("vertical-align","middle"),F(x,G(Wa,{style:{width:"50px","margin-right":"10px"},get value(){return b[0]??"4"},onChange:C=>{let _=o(g.key);_[0]=Number(C),s(g,_,p)}}),null),F(x,G(Wa,{style:{width:"50px","margin-left":"10px"},get value(){return b[1]??"4"},onChange:C=>{let _=o(g.key);_[1]=Number(C),s(g,_,p)}}),null),x}}),G(ze,{get when(){return!tt.isArray(b)},get children(){return G(Wa,{style:{width:"120px"},value:b??"4",onChange:x=>{let C=Number(x);s(g,C,p)}})}})];break}case"color":{m=G(fv,{style:{width:"120px"},value:b,opacityEnabled:!0,onChange:x=>{s(g,x,p)}});break}}if(m)return(()=>{var x=jV(),C=x.firstChild;return F(C,()=>g.text),F(x,m,null),x})()}}})]}}),null),d}})};var ZV=Q("<div class=chartspire-ui-popup-background><div class=popup><button>Settings</button><button>Remove</button><button>Close");const GV=e=>{const[t,r]=be(e.overlayMousePosition),[n,i]=be(!1),o=p=>{p.preventDefault()},s=()=>{const p=t();try{const g=e.widget.getDom("candle_pane");if(g){const m=g.getBoundingClientRect();return{x:m.left+p.x,y:m.top+p.y}}}catch(g){console.warn("Failed to get chart container bounds for popup positioning:",g)}return p},u=()=>{e.setShowOverlaySetting?(e.setShowOverlaySetting(!0),e.setOverlayVisible(!1)):(i(!0),e.setOverlayVisible(!1))},d=()=>{e.setOverlayVisible(!1)},h=()=>{e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()?mt.getInstance(e.widget).deleteOverlay(e.overlay):e.widget.removeOverlay(e.overlay),d()};return(()=>{var p=ZV(),g=p.firstChild,m=g.firstChild,b=m.nextSibling,x=b.nextSibling;return p.$$contextmenu=o,g.style.setProperty("position","fixed"),g.style.setProperty("z-index","1000011"),m.$$click=u,b.$$click=h,x.$$click=d,F(p,G(ze,{get when(){return n()&&!e.setShowOverlaySetting},get children(){return G(V5,{get widget(){return e.widget},get locale(){return e.locale},get overlay(){return e.overlay},get setOverlayVisible(){return e.setOverlayVisible},setShowOverlaySetting:i,get chartId(){return e.chartId},onConfirm:C=>{console.log("Selected color:",C),i(!1)}})}}),null),De(C=>{var _=`${s().y}px`,k=`${s().x}px`;return _!==C.e&&((C.e=_)!=null?g.style.setProperty("top",_):g.style.removeProperty("top")),k!==C.t&&((C.t=k)!=null?g.style.setProperty("left",k):g.style.removeProperty("left")),C},{e:void 0,t:void 0}),p})()};jt(["contextmenu","click"]);const QV=e=>G(ze,{get when(){return e.screenshotUrl.length>0},get children(){return G(aB,{get locale(){return e.locale},get url(){return e.screenshotUrl},onClose:()=>{e.setScreenshotUrl("")}})}}),KV=e=>G(ze,{get when(){return e.indicatorSettingModalParams.visible},get children(){return G(vB,{get locale(){return e.locale},get params(){return e.indicatorSettingModalParams},onClose:()=>{e.setIndicatorSettingModalParams({visible:!1,indicatorName:"",paneId:"",calcParams:[],styles:{}})},onConfirm:(t,r)=>{const n=e.indicatorSettingModalParams;e.widget.overrideIndicator({name:n.indicatorName,calcParams:t,styles:r}),e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()&&mt.getInstance(e.widget).saveIndicators()}})}}),qV=e=>G(ze,{get when(){return e.isActive},get children(){return G(P$,{get chart(){return e.widget},get rootContainer(){return e.rootContainer},get locale(){return e.locale},get symbol(){return e.symbols},get spread(){return e.drawingBarVisible},get period(){return e.period},get periods(){return e.periods},get multiChart(){return e.multiChart},get layout(){return e.layout},get allLayouts(){return e.allLayouts},get setAllLayouts(){return e.setAllLayouts},get currentCandleType(){return e.currentCandleType},get onCandleTypeChange(){return e.onCandleTypeChange},onMenuClick:async()=>{try{await KT(()=>e.setDrawingBarVisible(!e.drawingBarVisible)),e.widget.resize()}catch(t){console.error(t)}},onSymbolClick:()=>{e.setSymbolSearchModalVisible(!e.symbolSearchModalVisible)},get onPeriodChange(){return e.setPeriod},onIndicatorClick:()=>{e.setIndicatorModalVisible(!e.indicatorModalVisible)},onSettingClick:()=>{e.setSettingModalVisible(!e.settingModalVisible)},onScreenshotClick:()=>{if(e.widget!=null){const t=e.widget.getConvertPictureUrl(!0,"jpeg",e.theme==="dark"?"#151517":"#ffffff");e.setScreenshotUrl(t)}},onMultiChartClick:()=>{e.setMultiChartModalVisible(!e.multiChartModalVisible)},onReplayClick:()=>{e.setReplayModalVisible(!e.replayModalVisible)},get onLayoutChange(){return e.setLayout},get layoutLimit(){return e.layoutLimit}})}}),Bp=(e,t,r)=>({x:t,y:r}),JV=e=>{const t=N0();return G(ze,{get when(){return e.drawingBarVisible&&e.isActive},get children(){return G(iB,{get locale(){return e.locale},get widget(){return e.widget},get currentLayout(){return e.currentLayout},get setOverlaySettingVisible(){return e.setOverlaySettingVisible},get setOverlayStyles(){return e.setOverlayStyles},get setOverlayMousePosition(){return e.setOverlayMousePosition},get drawingBarCollapsed(){return e.drawingBarCollapsed},get setDrawingBarCollapsed(){return e.setDrawingBarCollapsed},onDrawingItemClick:r=>{const n={...r,onDrawing:function(i){return e.chartIds&&C0()&&t.onOverlayUpdated(e.chartIds,i.overlay),!1},onDrawEnd:function(i){return e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()&&mt.getInstance(i.chart).saveOverlay(i.overlay),(i.overlay.name==="simpleTag"||i.overlay.name==="simpleAnnotation")&&Lv(i.overlay),e.chartIds&&C0()&&t.onOverlayCreated(e.chartIds,i.overlay),!0},onRightClick:function(i){var o;const s=i.x||0,u=i.y||0,d=Bp(e.widget,s,u);return e.setOverlayMousePosition(d),e.setOverlaySettingVisible(!0),e.setOverlayStyles(i.overlay),(o=i.preventDefault)==null||o.call(i),!0},onDoubleClick:function(i){const o=i.x||0,s=i.y||0,u=Bp(e.widget,o,s);return e.setOverlayMousePosition(u),e.setOverlaySettingVisible(!0),e.setOverlayStyles(i.overlay),!0},onPressedMoving:function(i){return e.chartIds&&C0()&&t.onOverlayUpdated(e.chartIds,i.overlay),!1},onPressedMoveEnd:function(i){return e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()&&setTimeout(()=>{mt.getInstance(i.chart).overrideOverlay(i.overlay)},0),e.chartIds&&C0()&&t.onOverlayUpdated(e.chartIds,i.overlay),!0}};e.widget.createOverlay(n)},onModeChange:r=>{},onLockChange:r=>{const n=e.widget.getOverlays();n&&typeof n.forEach=="function"&&n.forEach(i=>{e.widget.overrideOverlay({id:i.id,lock:r})})},onVisibleChange:r=>{const n=e.widget.getOverlays();n&&typeof n.forEach=="function"&&n.forEach(i=>{e.widget.overrideOverlay({id:i.id,visible:r})})},onRemoveClick:r=>{const n=e.widget.getOverlays(),i=[];n&&typeof n.forEach=="function"&&n.forEach(o=>{i.push(o)}),e.currentLayout!==mt.getInstance(e.widget).getDefaultLayout()?mt.getInstance(e.widget).removeAllOverlays(!0):n&&typeof n.forEach=="function"&&n.forEach(o=>{e.widget.removeOverlay({id:o.id})}),e.chartIds&&i.forEach(o=>{t.onOverlayRemoved(e.chartIds,o)})}})}})},eW=(e,t)=>e===H.THREE_MIXED?t==="chart1"?"three-chart-mixed-large":"three-chart-mixed-small":e===H.THREE_MIXED_REVERSE?t==="chart3"?"three-chart-mixed-reverse-large":"three-chart-mixed-reverse-small":e===H.THREE_MIXED_BOTTOM?t==="chart3"?"three-chart-mixed-bottom-large":"three-chart-mixed-bottom-small":e===H.THREE_MIXED_TOP?t==="chart1"?"three-chart-mixed-top-large":"three-chart-mixed-top-small":e===H.FOUR_MIXED?t==="chart1"?"four-chart-mixed-large":"four-chart-mixed-small":e===H.FOUR_MIXED_REVERSE?t==="chart4"?"four-chart-mixed-reverse-large":"four-chart-mixed-reverse-small":e===H.FOUR_MIXED_TOP?t==="chart1"?"four-chart-mixed-top-large":"four-chart-mixed-top-small":e===H.FOUR_MIXED_BOTTOM?t==="chart4"?"four-chart-mixed-bottom-large":"four-chart-mixed-bottom-small":e===H.FIVE_MIXED?t==="chart1"?"five-chart-mixed-large":"five-chart-mixed-small":e===H.FIVE_MIXED_REVERSE?t==="chart5"?"five-chart-mixed-reverse-large":"five-chart-mixed-reverse-small":tW(e),tW=e=>{switch(e){case H.TWO:return"two-chart";case H.TWO_VERTICAL:return"two-chart-vertical";case H.THREE:return"three-chart";case H.THREE_VERTICAL:return"three-chart-vertical";case H.FOUR:return"four-chart";case H.FOUR_VERTICAL:return"four-chart-vertical";case H.FOUR_HORIZONTAL:return"four-chart-horizontal";case H.FIVE_VERTICAL:return"five-chart-vertical";case H.FIVE_HORIZONTAL:return"five-chart-horizontal";case H.SIX:return"six-chart";case H.SIX_HORIZONTAL:return"six-chart-horizontal";case H.SIX_VERTICAL:return"six-chart-vertical";case H.SIX_MIXED:return"six-chart-mixed";case H.SEVEN_VERTICAL:return"seven-chart-vertical";case H.SEVEN_HORIZONTAL:return"seven-chart-horizontal";case H.EIGHT:return"eight-chart";case H.EIGHT_VERTICAL:return"eight-chart-vertical";case H.EIGHT_HORIZONTAL:return"eight-chart-horizontal";case H.NINE:return"nine-chart";case H.NINE_VERTICAL:return"nine-chart-vertical";case H.NINE_HORIZONTAL:return"nine-chart-horizontal";case H.TEN:return"ten-chart";case H.TEN_VERTICAL:return"ten-chart-vertical";case H.TEN_HORIZONTAL:return"ten-chart-horizontal";case H.TWELVE:return"twelve-chart";case H.TWELVE_VERTICAL:return"twelve-chart-vertical";case H.TWELVE_HORIZONTAL:return"twelve-chart-horizontal";case H.TWELVE_GRID:return"twelve-chart-grid";case H.FOURTEEN:return"fourteen-chart";case H.SIXTEEN:return"sixteen-chart";case H.SIXTEEN_GRID:return"sixteen-chart-grid";case H.ONE:default:return"one-chart"}};var rW=Q("<div><div>");const nW=e=>{const t=()=>{e.onClick!=null&&e.onClick()},r=()=>{e.onClick!=null&&e.onClick()};return(()=>{var n=rW(),i=n.firstChild;F(n,G(ze,{get when(){return e.loadingVisible},get children(){return G(z2,{})}}),i),i.$$touchend=r,i.$$click=t;var o=e.ref;return typeof o=="function"?hi(o,i):e.ref=i,De(s=>{var u=`chartspire-ui-content ${eW(e.multiChart,e.chartIds)}`,d=`
          chartspire-ui-widget
          ${e.chartIds}
          ${e.isActive&&e.multiChart>1?"active-chart":""}
          `,h=e.chartIds,p=e.drawingBarVisible,g=e.drawingBarCollapsed,m=String(e.multiChart),b=e.isActive;return u!==s.e&&at(n,s.e=u),d!==s.t&&at(i,s.t=d),h!==s.a&&We(i,"data-chart-id",s.a=h),p!==s.o&&We(i,"data-drawing-bar-visible",s.o=p),g!==s.i&&We(i,"data-drawing-bar-collapsed",s.i=g),m!==s.n&&We(i,"multichart-amount",s.n=m),b!==s.s&&We(i,"is-active-chart",s.s=b),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),n})()};jt(["click","touchend"]);const iW=e=>G(ze,{get when(){return e.symbolModalVisible},get children(){return G($2,{get locale(){return e.locale},get onSymbolSelected(){return e.setSymbol},onClose:()=>{e.setSymbolSearchModalVisible(!1)},get enabledSymbolTypes(){return e.enabledSymbolTypes??[]}})}});function oW(e,t,r){nt(()=>{e()&&r(!0)}),nt(()=>{t()||r(!1)})}function aW(e,t){nt(()=>{e()&&zU(t())})}function sW(e,t){nt(()=>{e()&&(t(),e()>1?Iy(!0):Iy(!1))})}const W5=()=>({axis:{position:"right",inside:!1,reverse:!1,scrollZoomEnabled:!0,gap:{top:.2,bottom:.1}},dragEnabled:!0,state:"normal"});function lW(e,t,r,n,i,o,s,u,d,h,p,g){nt(async()=>{if(r()&&i()&&e()&&t!=null){if(o([]),s(O2({})),await mt.getInstance(Ge(t)).removeAllOverlays(),HU(Ge(t)),r()===mt.getInstance(Ge(t)).getDefaultLayout())return Ge(t).setStyles(Ui(Or())),uW(Ge(t)),g&&Ui(Or()).candle&&Ui(Or()).candle.type&&g(Ui(Or()).candle.type),null;Av(r());const m=await mt.getInstance(Ge(t)).getLayoutFromStore()??Id();if(Ge(t)!==null&&g){await cW(Ge(t),m,g),await dW(Ge(t),m),await hW(Ge(t),m,d,h,p,Ge(n));const b=await mt.getInstance(Ge(t)).getIndicators(m);u(b.indicators)}}})}async function cW(e,t,r){const n=await mt.getInstance(e).getStyles(t);n?(e.setStyles(n),r&&n.candle&&n.candle.type&&r(n.candle.type)):(e.setStyles(Ui(Or())),r&&Ui(Or()).candle&&Ui(Or()).candle.type&&r(Ui(Or()).candle.type))}function uW(e){e.setPaneOptions(W5())}async function dW(e,t){const r=await mt.getInstance(e).getPaneOptionsFromStore(t);r&&r.paneOptions&&Object.keys(r.paneOptions).length>0&&e.setPaneOptions(r.paneOptions)}async function hW(e,t,r,n,i,o){const s=await mt.getInstance(e).getOverlays(t);tt.forEach(s,u=>{var d,h,p;(d=mt.getInstance(e))!=null&&d.isDefaultLayout()||o.symbol===((h=u==null?void 0:u.symbolInfo)==null?void 0:h.symbol)&&o.type===((p=u==null?void 0:u.symbolInfo)==null?void 0:p.type)&&(u.overlay.onDrawEnd=g=>(mt.getInstance(g.chart).saveOverlay(g.overlay),!0),u.overlay.onRightClick=g=>{var m;const b=Bp(e,g.x??0,g.y??0);return i(b),r(!0),n(g.overlay),(m=g.preventDefault)==null||m.call(g),!0},u.overlay.onDoubleClick=g=>{const m=Bp(e,g.x??0,g.y??0);return i(m),r(!0),n(g.overlay),!0},u.overlay.onPressedMoveEnd=g=>{var m;return(m=mt.getInstance(e))!=null&&m.isDefaultLayout()||setTimeout(()=>{mt.getInstance(g.chart).overrideOverlay(g.overlay)},0),!0},(u.overlay.name==="simpleTag"||u.overlay.name==="simpleAnnotation")&&Lv(u.overlay),e.createOverlay(u.overlay))})}function pW(e,t,r){nt(()=>{const n=t();n!=null&&n.priceCurrency?(r.innerHTML=n.priceCurrency.toLocaleUpperCase(),r.style.display="flex"):r.style.display="none"})}function fW(e,t){nt(()=>{e(),t()})}function gW(e,t){nt(()=>{e()&&t()})}function vW(e,t){nt(()=>{console.log("useLocaleEffect",t()),Ge(e).setLocale(t())})}let U5=new Intl.DateTimeFormat("en",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"America/Los_Angeles"});function mW(e){U5=new Intl.DateTimeFormat("en",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:e})}function yW(){return U5}function bW(e,t,r){nt(()=>{if(Ge(e)==null)return;const n=t().key;mW(n),r()})}function xW(e,t,r){nt(()=>{t()&&Ge(e)&&(Ge(e).setStyles(t()),r(Ge(e).getStyles()))})}function wW(e,t){Dv.applyStylesToChart(e,t)}function CW(e,t){nt(()=>{Ge(e).setStyles(t),wW(Ge(e),t)})}const zc=new Map;class z0{constructor(t,r,n){xe(this,"chart"),xe(this,"replayCandle"),xe(this,"replaySpeed"),xe(this,"hasReplaySpeedChanged",!1),xe(this,"dataList",[]),xe(this,"currentReplayData",[]),xe(this,"isPaused",!1),xe(this,"currentCallback",null),xe(this,"currentRightList",[]),xe(this,"selectedCandleIndex",null),xe(this,"currentIndex",0),xe(this,"intervalId",null),this.chart=t,this.replayCandle=r,this.replaySpeed=n}static getInstance(t,r,n,i){var o;if(!zc.has(t)||((o=zc.get(t))==null?void 0:o.chart)==null){const s=new z0(r,n,i);zc.set(t,s)}return zc.get(t)}static destroyInstance(t){zc.has(t)&&zc.delete(t)}static getInstancesMap(){return zc}getCurrentReplayData(){return this.currentReplayData}setCurrentCallback(t){this.currentCallback=t}startReplayInterval(){if(this.currentRightList.length===0){console.warn("Replay: No data available for replay interval");return}if(!this.currentCallback){console.warn("Replay: No callback available for replay interval");return}this.clearCurrentInterval(),this.isPaused=!1;const t=this.validateReplaySpeed();this.createReplayInterval(this.currentRightList,this.currentCallback,t)}stopReplayInterval(){this.cleanupReplayState()}initializeReplayData(){var t;this.hasReplaySpeedChanged=!0,this.dataList=((t=this.chart)==null?void 0:t.getDataList())??[],this.selectedCandleIndex=this.replayCandle()}setupInitialChartState(t){var r;this.currentReplayData=[...t],(r=this.chart)==null||r.setDataLoader({getBars:({callback:n})=>{n(t)},subscribeBar:()=>{console.log("subscribeBar called during replay, returning",t.length,"data points")},unsubscribeBar:()=>{console.warn("unsubscribeBar called during replay")}})}getDataListToRightOfCandle(){try{if(!this.hasReplaySpeedChanged&&(this.initializeReplayData(),this.selectedCandleIndex!=null)){const t=this.selectedCandleIndex.dataIndex,r=this.dataList.slice(0,t+1);return this.dataList.slice(t+1)}if(this.selectedCandleIndex!==null)return this.dataList.slice(this.selectedCandleIndex.dataIndex+1)}catch(t){console.error("Error trying to get data to replay:",t)}return[]}isReplayPaused(){return this.isPaused&&this.currentIndex>0}isReplayActive(){return this.intervalId!==null}updateReplaySpeed(){try{if(!this.isReplayActive()||!this.currentCallback||this.currentRightList.length===0)return;const t=this.validateReplaySpeed();this.clearCurrentInterval(),this.createReplayInterval(this.currentRightList,this.currentCallback,t)}catch(t){console.error("Error updating replay speed:",t)}}validateReplaySpeed(){const t=Number(NA(this.replaySpeed().key));return isNaN(t)||t<=0?(console.warn("Invalid replay speed. Must be a positive number., Return set to 1x"),1e3):t}clearCurrentInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}cleanupReplayState(){this.clearCurrentInterval(),this.currentCallback=null,this.currentRightList=[],this.isPaused=!1}createReplayInterval(t,r,n){this.intervalId=setInterval(()=>{try{if(this.currentIndex<t.length){const i=t[this.currentIndex];this.currentReplayData.push(i),r(i),this.currentIndex++}else this.cleanupReplayState()}catch(i){console.error("Error during replay interval:",i),this.clearCurrentInterval()}},n)}initializeFreshReplay(){if(this.currentIndex=0,this.isPaused=!1,this.selectedCandleIndex!=null){const t=this.selectedCandleIndex.dataIndex;this.currentReplayData=this.dataList.slice(0,t+1)}else this.currentReplayData=[]}prepareResumeReplay(){this.isPaused=!1}startReplay(t){try{if(!Array.isArray(t)||t.length===0){console.warn("Invalid data provided for replay");return}if(this.currentRightList=[...t],this.isReplayPaused())if(this.prepareResumeReplay(),this.currentCallback){const r=this.validateReplaySpeed();this.createReplayInterval(t,this.currentCallback,r)}else console.warn("No callback available for resume, this should not happen");else this.initializeFreshReplay(),console.log("Replay: Using ChartDataProvider to create replay data loader"),console.log("Replay: Ready for ChartDataProvider integration - call createDataLoader with isReplayMode=true")}catch(r){console.log("Error starting replay:",r)}}pauseReplay(){try{this.intervalId!==null&&(this.clearCurrentInterval(),this.isPaused=!0)}catch(t){console.log("Error while pausing replay:",t)}}skipReplay(){try{this.pauseReplay(),this.currentReplayData=[...this.dataList],this.currentIndex=this.dataList.length,this.isPaused=!1,console.log("Replay: Skipping to end and transitioning back to live mode"),console.log("Replay: Skip completed - caller should transition to live mode via ChartDataProvider")}catch(t){console.log("Error while skipping to end:",t)}}}const _W=(e,t,r)=>{const n=()=>({key:"1x",text:RA("1x",e)}),i=W=>z0.getInstance(r,Ge(o),()=>Ge(C),W||(()=>Ge(h))),[o,s]=be(t),[u,d]=be(!1),[h,p]=be(n()),[g,m]=be(!1),[b,x]=be(!1),[C,_]=be(null),[k,M]=be(!0),[L,A]=be(""),[P,$]=be(!1),[R,z]=be(!1);nt(()=>{const W=i();if(g()&&!b())if(Ge(C)!=null){W.startReplay(W.getDataListToRightOfCandle());const X=Br.getInstance(),ee=X.getConfig(r);if(ee&&ee.symbol&&Ge(o)){console.log("useReplay: Creating replay data loader via ChartDataProvider");const U=X.createDataLoader(r,ee.symbol,ee.interval,ee.candleType||void 0,void 0,!1).unsubscribeBar;console.log("useReplay: Cleaning up existing live subscription before replay"),U(),setTimeout(()=>{const q=X.createDataLoader(r,ee.symbol,ee.interval,ee.candleType||void 0,void 0,!0);console.warn("useReplay: Setting replay data loader"),Ge(o).setDataLoader(q),z(!0),M(!1)},100)}else console.warn("useReplay: Missing config or widget for replay data loader"),M(!0)}else M(!0);else b()&&W.pauseReplay(),z(!1)}),nt(()=>{const W=h();R()&&i(()=>W).updateReplaySpeed()}),nt(()=>{u()?M(!0):(m(!1),x(!1))}),nt(()=>{if(P()){i().skipReplay();const W=Br.getInstance(),X=W.getConfig(r);if(X&&X.symbol&&Ge(o)){console.log("useReplay: Transitioning back to live mode after skip");const ee=W.createDataLoader(r,X.symbol,X.interval,X.candleType||void 0,void 0,!1);console.log("useReplay: Setting live data loader"),Ge(o).setDataLoader(ee)}B()}});const B=()=>{const W=i();if(W){W.skipReplay();const X=Br.getInstance(),ee=X.getConfig(r);if(ee&&ee.symbol&&Ge(o)){console.log("useReplay: Transitioning back to live mode on close");const U=X.createDataLoader(r,ee.symbol,ee.interval,ee.candleType||void 0,void 0,!1);console.log("useReplay: Setting live data loader on close"),Ge(o).setDataLoader(U)}}_(null),d(!1),p(n()),m(!1),x(!0),M(!0),A(""),$(!1),z0.destroyInstance(r)};return{replayModalVisible:u,setReplayModalVisible:d,replaySpeed:h,setReplaySpeed:p,replayPlay:g,setReplayPlay:m,replayPaused:b,setReplayPaused:x,replayCandle:C,setReplayCandle:_,isAlertVisible:k,setIsAlertVisible:M,alertMessage:L,setAlertMessage:A,resetReplayState:B,setSkipToEnd:$,skipToEnd:P,isPlaying:R,setIsPlaying:z,setReplayWidget:s}};function SW(e){nt(()=>{e()})}function Cy(e,t,r,n,i){const o=Br.getInstance(),s=o.getConfig(i);s&&o.setPreviousSymbol(i,s.symbol);const u=o.createDataLoader(i,t,r,n).unsubscribeBar;u(),setTimeout(()=>{const d=o.createDataLoader(i,t,r,n);e.setDataLoader(d)},100)}function kW(e,t,r,n,i,o,s,u,d){const[h,p]=be(null);return nt(()=>{const g=e();if(g){const m=g.getStyles();m&&m.candle&&m.candle.type&&n(m.candle.type)}}),nt(()=>{const g=e(),m=t(),b=r();if(g==null||m==null)return;const x=h();p(b);const C={...m,candle:{...m.candle,type:b}};g.setStyles(C),g.resize();const _=As(b)&&!As(x),k=!As(b)&&As(x);(_||k)&&i&&o&&d&&g&&Cy(g,Ge(i),Ge(o),b,d)}),nt(()=>{if(s()&&Ge(e)){const g=Ge(e),m=Ge(r),b=Ge(i),x=Ge(o);As(m)&&Cy(g,b,x,m,d),u(!1)}}),g=>{n(g);const m=e();if(m){const b=m.getStyles();b.candle.type=g,m.setStyles(b),mt.getInstance(m).saveStyles()}}}function TW(e){return e===$0.RENKO||String(e).toLowerCase()==="renko"}const EW=(e,t,r,n)=>{nt(()=>{const i=t();if(i&&TW(e())){const o=s=>{s.preventDefault(),n({x:s.clientX,y:s.clientY}),r(!0)};i.addEventListener("contextmenu",o),$r(()=>{i.removeEventListener("contextmenu",o)})}})};function MW(e){nt(()=>{Or()==="Dark Theme"||Or()==="Midnight Theme"||Or()==="Dark Gray Theme"||Or()==="Blue Theme"||Or()==="Red Theme"||Or()==="Green Theme"||Or()==="Yellow Theme"||Or(),Ge(e).setStyles(Ui(Or()))})}function IW(e,t){nt(Jg(()=>{var r,n,i,o;return[(r=t())==null?void 0:r.symbol,(n=t())==null?void 0:n.exchange,(i=t())==null?void 0:i.pricePrecision,(o=t())==null?void 0:o.volumePrecision]},async()=>{var r;t()&&Ge(e)&&(await mt.getInstance(Ge(e)).removeAllOverlays(),(r=Ge(e))==null||r.setSymbol({ticker:t().symbol}))}))}function LW(e,t){const[r,n]=be(!1);return nt(()=>{const i=r()?"24px":"52px";document.documentElement.style.setProperty("--right-bar-width",i),setTimeout(()=>{t(o=>!o)},350)}),{rightBarCollapsed:r,setRightBarCollapsed:n}}const[_y,PW]=be(!1),v0=[];function AW(e){return e&&!v0.includes(e)&&v0.push(e),nt(()=>{const t=_y()?"24px":"60px";document.documentElement.style.setProperty("--drawing-bar-width",t),setTimeout(()=>{v0.forEach(r=>r())},350)}),{drawingBarCollapsed:_y,setDrawingBarCollapsed:PW,cleanUpDrawingBar:e?()=>{const t=v0.indexOf(e);t>-1&&v0.splice(t,1)}:void 0}}function DW(e,t,r,n,i){const[o,s]=be({timeRemaining:"",isActive:!1,nextCandleTimestamp:0});let u=null;const d=(x,C)=>{const _=new Date(x);switch(C.timespan){case"minute":const k=Math.floor(_.getUTCMinutes()/C.multiplier)*C.multiplier;_.setUTCMinutes(k+C.multiplier,0,0);break;case"hour":const M=Math.floor(_.getUTCHours()/C.multiplier)*C.multiplier;_.setUTCHours(M+C.multiplier,0,0,0);break;case"day":_.setUTCDate(_.getUTCDate()+C.multiplier),_.setUTCHours(0,0,0,0);break;case"week":const L=_.getUTCDay(),A=L===0?1:8-L;_.setUTCDate(_.getUTCDate()+A+(C.multiplier-1)*7),_.setUTCHours(0,0,0,0);break;case"month":_.setUTCMonth(_.getUTCMonth()+C.multiplier,1),_.setUTCHours(0,0,0,0);break;default:_.setUTCMinutes(_.getUTCMinutes()+1,0,0)}return _.getTime()},h=x=>{const C=Math.floor(x/1e3),_=Math.floor(C/86400),k=Math.floor(C%86400/3600),M=Math.floor(C%3600/60),L=C%60;return _>0?k>0?`${_}d ${k}h`:`${_}d`:k>0?k>=12?`${k}h ${M}m`:`${k.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`:`${M.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`},p=()=>{const x=Date.now(),C=t(),_=d(x,C),k=_-x;if(k<=0){const M=d(x,C),L=M-x;s({timeRemaining:h(L),isActive:!0,nextCandleTimestamp:M})}else s({timeRemaining:h(k),isActive:!0,nextCandleTimestamp:_})},g=()=>{u||(p(),u=setInterval(p,1e3))},m=()=>{u&&(clearInterval(u),u=null);const x=e();if(x)try{x.setStyles({candle:{priceMark:{last:{text:{extendTexts:[]}}}}})}catch(C){console.warn("Error clearing timer on stop:",C)}s({timeRemaining:"",isActive:!1,nextCandleTimestamp:0})},b=()=>{var x,C;const _=e(),k=o();if(_)try{if(!k.isActive||!r()){_.setStyles({candle:{priceMark:{last:{text:{extendTexts:[]}}}}});return}const M={show:!0,color:"#D0D0D0",size:13,family:i||"monospace",weight:"normal",style:"fill",borderStyle:"solid",borderDashedValue:[2,2],borderSize:0,borderColor:"transparent",paddingTop:2,paddingBottom:2,paddingLeft:4,paddingRight:4,position:"below_price",updateInterval:0,borderRadius:2},L=((C=(x=_.getStyles().candle)==null?void 0:x.priceMark)==null?void 0:C.last)||{},A=`${k.timeRemaining}`,P=_.getFormatter();_.setFormatter({...P,formatExtendText:({type:$,index:R})=>$==="last_price"&&R===0?A:""}),_.setStyles({candle:{priceMark:{last:{...L,show:!0,extendTexts:[M]}}}})}catch(M){console.warn("Error updating price mark timer:",M)}};return nt(()=>{const x=e(),C=r();t(),x&&C?g():m()}),nt(()=>{t(),r()&&(m(),setTimeout(()=>{r()&&g()},100))}),nt(()=>{n&&(n(),r()&&(m(),setTimeout(()=>{r()&&g()},200)))}),nt(()=>{b()}),$r(()=>{m()}),{timerState:o,startTimer:g,stopTimer:m}}function FW(e,t,r){let n={...e()};nt(()=>{const i=e(),o=t();console.log("useSymbolPropsToState triggered with symbol:",i);const s=i.symbol!==n.symbol||i.exchange!==n.exchange,u=i.symbol!==o.symbol||i.exchange!==o.exchange;s&&u&&(console.log("useSymbolPropsToState: Syncing symbol change from",o,"to",i),r(i)),n={...i}})}function RW(e,t,r,n,i,o){nt(Jg(()=>{var s,u;return[(s=r())==null?void 0:s.multiplier,(u=r())==null?void 0:u.timespan]},()=>{const s=Ge(t),u=Ge(r),d=Ge(n);s&&u&&(Br.getInstance().setPreviousSymbol(i,d),e?o({chartId:i,skipBroadcast:!1,interval:u}):e=!0,s.setPeriod({span:u.multiplier,type:u.timespan}))}))}function OW(e,t,r,n,i){nt(Jg(()=>[e().interval.timespan,e().interval.multiplier,e().interval.text,e().skipBroadcast],()=>{if(T5()&&e().chartId.id!==t.id){const o=e(),s=Ge(r),u=Ge(n);(s==null?void 0:s.text)!==o.interval.text&&(o.skipBroadcast||(Br.getInstance().setPreviousSymbol(t,u),i(o.interval)))}}))}function NW({chartRef:e,period:t,setChart:r,timezone:n,documentResize:i}){window.addEventListener("resize",i);const o=zW(e,t);n&&n.key&&(console.log("setting timezone",n.key),o.setTimezone(n.key)),r(o);const s=o.getDom("candle_pane","yAxis"),u=document.createElement("span");return u.className="chartspire-price-unit",s==null||s.appendChild(u),{chart:o,priceUnitDom:u}}function zW(e,t){const r=t4(e,{formatter:{formatDate:n=>{const i=yW(),o=t();if(n.type==="xAxis"){const u=BW(o,n.template);return gn.formatDate(i,n.timestamp,u)}const s=$W(o);return gn.formatDate(i,n.timestamp,s)}}});if(!r)throw new Error("Failed to initialize chart");return r}function BW(e,t){switch(e.timespan){case"minute":return"HH:mm";case"hour":return"(DD) HH:mm";case"day":return e.multiplier===1?"MM-DD":"YYYY-MM-DD";case"week":return"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";default:return t}}function $W(e){switch(e.timespan){case"minute":return"MM-DD HH:mm";case"hour":return"YYYY-MM-DD HH:mm";case"day":case"week":return"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";default:return"YYYY-MM-DD HH:mm"}}async function VW({chart:e,layout:t,symbol:r,updateIndicators:n,addMainIndicatorsToChart:i}){const o=mt.getInstance(e),s=await WW(o,t);await UW(o,s,n,i);const u=await HW(o,s,e);return await YW(o,s,r,e),{savedStyles:u,layoutData:s}}async function WW(e,t){return t()===e.getDefaultLayout()?e.getDefaultLayoutData():await e.getLayoutFromStore()??e.getDefaultLayoutData()}async function UW(e,t,r,n){const i=await e.getIndicators(t);r(i.indicators),n()}async function HW(e,t,r){const n=await e.getStyles(t);return n!=null&&r.setStyles(n),n}async function YW(e,t,r,n){const i=await e.getOverlays(t);tt.forEach(i,o=>{var s;i!=null&&r().symbol===((s=o.symbolInfo)==null?void 0:s.symbol)&&r().type===o.symbolInfo.type&&n.createOverlay(o.overlay)})}function XW(e,t,r,n,i,o){r(e);const s=e.data.current.timestamp,u=new Date(s);n("Candle selected from date: "+u.toLocaleString()+" - Press play to start replay"),Av(t),i(o)}function jW({chart:e,layout:t,mainIndicators:r,setMainIndicators:n,subIndicators:i,setSubIndicators:o,setReplayCandle:s,setAlertMessage:u,setReplayWidget:d,setIndicatorSettingModalParams:h}){const p=Z5({chart:e,mainIndicators:r,setMainIndicators:n,subIndicators:i,setSubIndicators:o,setIndicatorSettingModalParams:h});e.subscribeAction("onIndicatorTooltipFeatureClick",p);const g=Dv.createCandleTooltipIconClickHandler(e);e.subscribeAction("onCandleTooltipFeatureClick",g),e.subscribeAction("onCandleBarClick",m=>{XW(m,t,s,u,d,e)})}async function ZW({chart:e,setAllLayouts:t,layoutLimit:r}){const n=await mt.getInstance(e).getNameOfAllLayouts();t(n.slice(0,r))}function GW({chart:e,chartIds:t,symbol:r,period:n}){const i=C5(),o=_5(),s=N0(),u=r.symbol,d=r.type?String(r.type):void 0;return i.registerChart(t,e,u,d),o.registerChart(t,e,u,d),s.registerChart(t,e,u,d,n.timespan+n.multiplier),{syncManager:i,timeSyncManager:o,drawingSyncManager:s,initialSymbol:{symbol:u,type:d}}}function QW({chart:e,chartIds:t,isActiveChart:r,timeSyncManager:n}){let i=null,o=0,s={x:0,y:0},u={x:0,y:0};const d=e.getDom("candle_pane");if(!d)return()=>{};const h=(C,_)=>{if(r()){o=Date.now(),s={x:C,y:_};const k=d.getBoundingClientRect();u={x:C-k.left,y:_-k.top}}},p=(C,_)=>{var k;if(r()){const M=Date.now()-o,L=Math.sqrt(Math.pow(C-s.x,2)+Math.pow(_-s.y,2));if(M<300&&L<5){try{const A=e.convertFromPixel([u],{paneId:"candle_pane"});if(A&&Array.isArray(A)&&(k=A[0])!=null&&k.timestamp){const P=A[0].timestamp;n.syncTime(t,P)}}catch(A){console.error("[TimeSync] Error converting interaction position to timestamp:",A)}i&&clearTimeout(i),i=setTimeout(()=>{},150)}}},g=C=>{if(C.preventDefault(),C.touches.length===1){const _=C.touches[0];h(_.clientX,_.clientY)}},m=C=>{if(C.preventDefault(),C.changedTouches.length===1){const _=C.changedTouches[0];p(_.clientX,_.clientY)}},b=C=>{h(C.clientX,C.clientY)},x=C=>{p(C.clientX,C.clientY)};return d.addEventListener("mousedown",b),d.addEventListener("mouseup",x),d.addEventListener("touchstart",g,{passive:!1}),d.addEventListener("touchend",m,{passive:!1}),()=>{d.removeEventListener("mousedown",b),d.removeEventListener("mouseup",x),d.removeEventListener("touchstart",g),d.removeEventListener("touchend",m),i&&clearTimeout(i)}}function KW({chart:e,chartIds:t,isActiveChart:r,syncManager:n}){e.subscribeAction("onCrosshairChange",i=>{const o=i;if(o.paneId==="candle_pane"&&r()){if(!o.timestamp&&o.x!==void 0)try{const s=e.convertFromPixel([{x:o.x}],{paneId:o.paneId});if(s&&Array.isArray(s)&&s[0]){const u=s[0];if(u.timestamp&&(o.timestamp=u.timestamp),u.dataIndex!==void 0&&(o.dataIndex=u.dataIndex),u.dataIndex!==void 0){const d=e.getDataList();d&&d[u.dataIndex]&&(o.kLineData=d[u.dataIndex],!o.timestamp&&o.kLineData.timestamp&&(o.timestamp=o.kLineData.timestamp))}}}catch(s){console.error("Error converting x to timestamp:",s)}n.resetCrosshairVisibility(t),n.syncCrosshair(t,o)}})}async function qW(e,t,r,n,i,o,s,u,d,h,p,g,m,b,x,C,_,k,M,L){console.log("setupChart called",i());const{chart:A,priceUnitDom:P}=NW({chartRef:e,period:t,setChart:n,timezone:L(),documentResize:C});await VW({chart:A,layout:o,symbol:i,updateIndicators:_,addMainIndicatorsToChart:M}),console.log("[setupChart] Registering chart with sync managers for chartId:",k.chartIds);const $=GW({chart:A,chartIds:k.chartIds,symbol:i(),period:t()});console.log("[setupChart] Setting up sync effects for chartId:",k.chartIds),console.log("[setupChart] Setting up crosshair and mouse event handlers for chartId:",k.chartIds),KW({chart:A,chartIds:k.chartIds,isActiveChart:()=>k.isActiveChart??!0,syncManager:$.syncManager}),QW({chart:A,chartIds:k.chartIds,isActiveChart:()=>k.isActiveChart??!0,timeSyncManager:$.timeSyncManager}),jW({chart:A,layout:o,mainIndicators:s,setMainIndicators:u,subIndicators:d,setSubIndicators:h,setReplayCandle:p,setAlertMessage:g,setReplayWidget:m,setIndicatorSettingModalParams:x}),await ZW({chart:A,setAllLayouts:b,layoutLimit:k.layoutLimit}),pW(()=>A,i,P)}function Sy(e,t,r,n){console.log(`cleanUpMainUI: Starting cleanup for chart ${r.id}`);try{C5().unregisterChart(r),_5().unregisterChart(r),N0().unregisterChart(r),console.log(`[cleanUpMainUI] Successfully unregistered chart ${r.id} from sync managers`)}catch(o){console.error(`[cleanUpMainUI] Error unregistering chart ${r.id} from sync managers:`,o)}n&&n.getAttribute("data-chart-id"),window.removeEventListener("resize",e);const i=Br.getInstance().getDataFeed();i&&(console.log(`cleanUpMainUI: Calling unsubscribeAllForChart for ${r.id}`),i.unsubscribeAllForChart(r.id),i.getActiveSubscriptions()===0&&KU()),console.log(`cleanUpMainUI: Cleanup completed for chart ${r.id}`)}function JW(e,t,r,n,i,o){if(!e){console.warn("initializeChartData: Chart not available");return}console.log(`initializeChartData [${n}]: Setting up chart for ${t.symbol} ${r.multiplier}${r.timespan}`);const s=Br.getInstance().createDataLoader(n,t,r,o,i);e.setDataLoader(s),console.log(`initializeChartData [${n}]: Initialization complete`)}function eU(e){console.log(`cleanupChartData [${e}]: Cleaning up`),Br.getInstance().cleanup(e)}const tU=e=>G(ze,{get when(){return e.isActive&&e.bottomBarEnabled},get children(){return G(rV,{get widget(){return e.widget},get ticker(){return e.symbol},get setInterval(){return e.setInterval},get layout(){return e.layout},get allLayouts(){return e.allLayouts},get setAllLayouts(){return e.setAllLayouts},get layoutLimit(){return e.layoutLimit},get onLayoutChange(){return e.onLayoutChange},get theme(){return e.theme},get setTheme(){return e.setTheme},get locale(){return e.locale},get themeUseExternalStorage(){return e.themeUseExternalStorage},get timezone(){return e.timezone},get onTimezoneChange(){return e.onTimezoneChange},get intervalEnabled(){return e.intervalEnabled},get layoutsEnabled(){return e.layoutsEnabled},get themesEnabled(){return e.themesEnabled},get themeGeneraterEnabled(){return e.themeGeneraterEnabled},get timezoneEnabled(){return e.timezoneEnabled}})}}),rU=e=>{const[t,r]=be(!1);return[G(ze,{get when(){return e.overlayOptionsVisible},get children(){return G(GV,{get setOverlayVisible(){return e.setOverlayOptionsVisible},get overlay(){return e.overlayStyles},get widget(){return e.widget},get locale(){return e.locale},get currentLayout(){return e.currentLayout},get chartId(){return e.chartId},get overlayMousePosition(){return e.overlayMousePosition},setShowOverlaySetting:r})}}),G(ze,{get when(){return t()},get children(){return G(V5,{get widget(){return e.widget},get locale(){return e.locale},get overlay(){return e.overlayStyles},get setOverlayVisible(){return e.setOverlayOptionsVisible},setShowOverlaySetting:r,get chartId(){return e.chartId},onConfirm:n=>{console.log("Selected color:",n),r(!1)}})}})]};var nU=Q("<div class=chartspire-ui-renko-setting-modal-content><div class=content><div class=setting-item><span></span></div><div class=setting-footer><button class=cancel-button></button><button class=confirm-button>");const iU=e=>{var t,r;const n=((r=(t=e.widget.getStyles().candle.renko)==null?void 0:t.brick)==null?void 0:r.size)||z5,[i,o]=be(n.toString()),s=()=>{const d=e.widget.getStyles();d.candle.renko||(d.candle.renko={brick:{size:10}}),d.candle.renko||(d.candle.renko={brick:{size:10}});const h=Number(i());!isNaN(h)&&h>0?(d.candle.renko&&(d.candle.renko={brick:{size:h}}),e.widget.setStyles(d),mt.getInstance(e.widget).saveStyles(),e.widget.resize(),e.setRenkoRefresh(!0),console.log(`Renko brick size updated to ${h}`)):console.error("Invalid brick size"),e.setShowRenkoSetting(!1),e.setRenkoPopupVisible(!1),e.onConfirm()},u=()=>{e.setShowRenkoSetting(!1)};return G(Rl,{get title(){return I("renko_settings",e.locale)||"Renko Settings"},contentHeight:"auto",onClose:u,get children(){var d=nU(),h=d.firstChild,p=h.firstChild,g=p.firstChild,m=p.nextSibling,b=m.firstChild,x=b.nextSibling;return F(g,()=>I("brick_size",e.locale)||"Brick Size"),F(p,G(Wa,{style:{width:"120px"},get value(){return i()},onChange:C=>o(C),min:.1}),null),b.$$click=u,F(b,()=>I("cancel",e.locale)||"Cancel"),x.$$click=s,F(x,()=>I("save",e.locale)||"Save"),d}})};jt(["click"]);var oU=Q("<div class=chartspire-ui-popup-background><div class=popup><button>Brick Size Settings</button><button>Close");const aU=e=>{const[t,r]=be(!1),n=s=>{s.preventDefault()},i=()=>{r(!0)},o=()=>{e.setRenkoPopupVisible(!1)};return(()=>{var s=oU(),u=s.firstChild,d=u.firstChild,h=d.nextSibling;return s.$$contextmenu=n,d.$$click=i,h.$$click=o,F(s,G(ze,{get when(){return t()},get children(){return G(iU,{get widget(){return e.widget},get locale(){return e.locale},get setRenkoPopupVisible(){return e.setRenkoPopupVisible},setShowRenkoSetting:r,get setRenkoRefresh(){return e.setRenkoRefresh},onConfirm:()=>{r(!1)}})}}),null),De(p=>{var g=`${e.renkoMousePosition.y}px`,m=`${e.renkoMousePosition.x}px`;return g!==p.e&&((p.e=g)!=null?u.style.setProperty("top",g):u.style.removeProperty("top")),m!==p.t&&((p.t=m)!=null?u.style.setProperty("left",m):u.style.removeProperty("left")),p},{e:void 0,t:void 0}),s})()};jt(["contextmenu","click"]);const sU=()=>{const[e,t]=Fl({timezoneModalVisible:!1,multiChartModalVisible:!1,symbolSearchModalVisible:!1,indicatorModalVisible:!1,settingModalVisible:!1,overlaySettingVisible:!1,renkoPopupVisible:!1});return{modalState:e,setModalState:t,toggleModal:(r,n)=>{t(r,n??!e[r])},closeAllModals:()=>{t({timezoneModalVisible:!1,multiChartModalVisible:!1,symbolSearchModalVisible:!1,indicatorModalVisible:!1,settingModalVisible:!1,overlaySettingVisible:!1,renkoPopupVisible:!1})}}},lU=e=>{const[t,r]=Fl({chart:null,symbol:{...e.symbol},interval:{...e.interval},mainIndicators:[...e.mainIndicators],subIndicators:{},candleType:"candle_solid",layout:"default",hasLayoutChanged:!1});return{chartData:t,setChartData:r}},cU=e=>{const[t,r]=Fl({drawingBarVisible:!!e.drawingBarVisible,loadingVisible:!1,drawingBarCollapsed:!1,screenshotUrl:"",renkoRefresh:!1});return{uiState:t,setUIState:r}},uU=()=>{const[e,t]=Fl({overlayMousePosition:{x:0,y:0},renkoMousePosition:{x:0,y:0}});return{positions:e,setPositions:t}},dU=e=>{const[t,r]=Fl({styles:{...e.styles},chartStyles:void 0,overlay:null,indicatorSettingModalParams:{visible:!1,indicatorName:"",paneId:"",calcParams:[],styles:{}}});return{settings:t,setSettings:r}};var hU=Q('<i class="icon-close chartspire-ui-load-icon">');const _g=new Set,[ky,Sg]=be([]),[dp,pU]=be("en-US"),[_d,hp]=be({key:"Etc/UTC",text:yp("Etc/UTC","en-US")}),fU=e=>{const t=e.chartIds;let r=!1;hp({key:e.timezone??"Etc/UTC",text:yp(e.timezone??"Etc/UTC","en-US")}),_g.has(t)?console.warn(`Chart ${t.id} is being mounted again, this may cause issues`):(console.log(`Mounting chart ${t.id} for the first time`),_g.add(t));let n;const[i,o]=be(!1),{modalState:s,setModalState:u}=sU(),{chartData:d,setChartData:h}=lU(e),{uiState:p,setUIState:g}=cU(e),{positions:m,setPositions:b}=uU(),{settings:x,setSettings:C}=dU(e),{drawingBarCollapsed:_,setDrawingBarCollapsed:k,cleanUpDrawingBar:M}=AW(()=>{var Y;return(Y=d.chart)==null?void 0:Y.resize()});FW(()=>e.symbol,()=>d.symbol,Y=>{console.log("useSymbolPropsToState triggered with symbol:",Y),h("symbol",Y)});const L=Y=>{k(Y),g("drawingBarCollapsed",Y)},A=()=>{var Y;(Y=d.chart)==null||Y.resize()},P=Y=>{bE(Y,d.chart,fe=>h("mainIndicators",fe),fe=>h("subIndicators",fe))},$=()=>{xE(d.mainIndicators,d.chart)};ki(()=>{const Y={destroy:()=>{console.log("MainUI destroy called for chart:",t.id),Sy(A,d.symbol,t,n)},setStyles:fe=>{setTimeout(()=>{var ve;(ve=d.chart)==null||ve.setStyles(fe),hN(fe)},50)},getStyles:()=>d.chart?d.chart.getStyles():{},setLocale:fe=>{var ve;pU(fe),(ve=d.chart)==null||ve.setLocale(fe),hp({key:_d().key,text:yp(_d().key,fe)})},getLocale:()=>dp(),setTimezone:fe=>{hp({key:fe,text:yp(fe,dp())})},getTimezone:()=>_d().key,setSymbol:fe=>{h("symbol",fe)},getSymbol:()=>d.symbol,setInterval:fe=>{h("interval",fe)},getInterval:()=>d.interval,getMultiCharts:()=>e.multiChartLimit,getUnderlyingChart:()=>d.chart};e.ref(Y)});const{replayModalVisible:R,setReplayModalVisible:z,replaySpeed:B,setReplaySpeed:W,setReplayPlay:X,setReplayPaused:ee,replayCandle:U,setReplayCandle:q,isAlertVisible:ie,alertMessage:le,setAlertMessage:ae,resetReplayState:te,setSkipToEnd:ce,isPlaying:ue,setReplayWidget:j}=_W(e.locale,d.chart,t),Z=kW(()=>d.chart,()=>x.chartStyles,()=>d.candleType,Y=>h("candleType",Y),()=>d.symbol,()=>d.interval,()=>p.renkoRefresh,Y=>g("renkoRefresh",Y),t);ki(async()=>{h("layout",mt.getInstance(d.chart||{}).getDefaultLayout()),await qW(n,()=>d.interval,()=>d.chart,Y=>{h("chart",Y),Y&&(Br.getInstance().updateChartReference(t,Y),JW(Y,d.symbol,d.interval,t,fe=>g("loadingVisible",fe),d.candleType),o(!0))},()=>d.symbol,()=>d.layout,()=>d.mainIndicators,Y=>h("mainIndicators",Y),()=>d.subIndicators,Y=>h("subIndicators",Y),q,ae,j,Sg,Y=>C("indicatorSettingModalParams",Y),A,P,e,$,_d)}),$r(()=>{Sy(A,d.symbol,t,n),eU(t),console.log(`Removing chart ${t.id} from mounted charts tracking`),_g.delete(t),M&&M()}),CW(()=>d.chart,e.theme),vW(()=>d.chart,dp),bW(()=>d.chart,_d,A),xW(()=>d.chart,()=>x.styles,Y=>C("chartStyles",Y)),sW(()=>e.multiChartLimit,A),fW(()=>e.resizeChart,A),gW(()=>e.rightBarExpandedViewVisible,A),aW(()=>e.isActiveChart,()=>d.symbol),oW(()=>d.layout,()=>e.isActiveChart,Y=>h("hasLayoutChanged",Y)),lW(()=>e.isActiveChart,()=>d.chart,()=>d.layout,()=>d.symbol,()=>d.hasLayoutChanged,Y=>h("mainIndicators",Y),Y=>h("subIndicators",Y),P,Y=>u("overlaySettingVisible",Y),Y=>C("overlay",Y),Y=>b("overlayMousePosition",Y),Y=>h("candleType",Y)),SW($),EW(()=>d.candleType,()=>n,Y=>u("renkoPopupVisible",Y),Y=>b("renkoMousePosition",Y)),MW(()=>d.chart),IW(()=>d.chart,()=>d.symbol),DW(()=>d.chart,()=>d.interval,()=>e.candleCloseTimerEnabled??!1,()=>d.symbol,e.fontFamily),RW(r,()=>d.chart,()=>d.interval,()=>d.symbol,t,e.setCommonInterval),OW(e.commonInterval,t,()=>d.interval,()=>d.symbol,Y=>h("interval",Y));const pe=Y=>{n=Y};return[hU(),G(rU,{get overlayOptionsVisible(){return s.overlaySettingVisible},setOverlayOptionsVisible:Y=>u("overlaySettingVisible",Y),get overlayStyles(){return x.overlay},get widget(){return d.chart},get locale(){return e.locale},get currentLayout(){return d.layout},chartId:t,get overlayMousePosition(){return m.overlayMousePosition}}),G(ze,{get when(){return s.renkoPopupVisible},get children(){return G(aU,{get widget(){return d.chart},setRenkoPopupVisible:Y=>u("renkoPopupVisible",Y),get locale(){return dp()},get renkoMousePosition(){return m.renkoMousePosition},setRenkoRefresh:Y=>g("renkoRefresh",Y)})}}),G(iW,{get enabledSymbolTypes(){return e.enabledSymbolTypes},setSymbol:Y=>{console.log("SymbolSearch setSymbol called with symbol:",Y),iv().requestSymbolChange(e.chartIds,Y)},get symbolModalVisible(){return s.symbolSearchModalVisible},setSymbolSearchModalVisible:Y=>u("symbolSearchModalVisible",Y),get locale(){return e.locale}}),G(XA,{mainIndicators:()=>d.mainIndicators,setMainIndicators:Y=>h("mainIndicators",Y),subIndicators:()=>d.subIndicators,setSubIndicators:Y=>h("subIndicators",O2(Y)),get indicatorModalVisible(){return s.indicatorModalVisible},setIndicatorModalVisible:Y=>u("indicatorModalVisible",Y),get widget(){return d.chart},get locale(){return e.locale},get currentLayout(){return d.layout}}),G(ze,{get when(){return s.multiChartModalVisible},get children(){return G(iD,{get multiChart(){return e.multiChartLimit},get maxMultiCharts(){return e.maxMultiCharts},get onMultiChartClick(){return e.onMultiChartClick},setMultiChartModalVisible:Y=>u("multiChartModalVisible",Y),get locale(){return e.locale}})}}),G($A,{get locale(){return e.locale},get replaySpeed(){return B()},setReplaySpeed:W,get replayCandle(){return U()},onPlay:X,onPause:ee,onClose:te,skipReplay:ce,isPlaying:ue,get chartId(){return t.id},get isAlertVisible(){return ie()},get alertMessage(){return le()},get replayModalVisible(){return R()},get isActive(){return e.isActiveChart}}),G(pN,{settingModalVisible:()=>s.settingModalVisible,setSettingModalVisible:Y=>u("settingModalVisible",Y),get widget(){return d.chart},widgetDefaultStyles:()=>x.chartStyles,get locale(){return e.locale},get currentLayout(){return d.layout}}),G(QV,{get screenshotUrl(){return p.screenshotUrl},setScreenshotUrl:Y=>g("screenshotUrl",Y),get locale(){return e.locale}}),G(KV,{get locale(){return e.locale},get widget(){return d.chart},get currentLayout(){return d.layout},get indicatorSettingModalParams(){return x.indicatorSettingModalParams},setIndicatorSettingModalParams:Y=>C("indicatorSettingModalParams",Y)}),G(qV,{get rootContainer(){return e.rootContainer},get locale(){return e.locale},get symbols(){return d.symbol},get spread(){return p.drawingBarVisible},get period(){return d.interval},setPeriod:Y=>{h("interval",Y),e.isActiveChart&&e.onIntervalChange&&e.onIntervalChange(Y)},get periods(){return e.periods},get multiChart(){return e.multiChartLimit},get widget(){return d.chart},get theme(){return e.theme},get isActive(){return e.isActiveChart},setIndicatorModalVisible:Y=>u("indicatorModalVisible",Y),setMultiChartModalVisible:Y=>u("multiChartModalVisible",Y),get replayModalVisible(){return R()},setReplayModalVisible:z,setSettingModalVisible:Y=>u("settingModalVisible",Y),setScreenshotUrl:Y=>g("screenshotUrl",Y),setTimezoneModalVisible:Y=>u("timezoneModalVisible",Y),get symbolSearchModalVisible(){return s.symbolSearchModalVisible},setSymbolSearchModalVisible:Y=>u("symbolSearchModalVisible",Y),get drawingBarVisible(){return p.drawingBarVisible},setDrawingBarVisible:Y=>g("drawingBarVisible",Y),get layout(){return d.layout},setLayout:Y=>h("layout",Y),get allLayouts(){return ky()},setAllLayouts:Sg,get layoutLimit(){return e.layoutLimit},get currentCandleType(){return d.candleType},onCandleTypeChange:Z,get indicatorModalVisible(){return s.indicatorModalVisible},get settingModalVisible(){return s.settingModalVisible},get multiChartModalVisible(){return s.multiChartModalVisible}}),G(JV,{get isActive(){return e.isActiveChart},get locale(){return e.locale},get drawingBarVisible(){return p.drawingBarVisible},get widget(){return d.chart},get currentLayout(){return d.layout},setOverlaySettingVisible:Y=>u("overlaySettingVisible",Y),setOverlayStyles:Y=>C("overlay",Y),setOverlayMousePosition:Y=>b("overlayMousePosition",Y),chartIds:t,get drawingBarCollapsed(){return _()},setDrawingBarCollapsed:L}),G(tU,{get isActive(){return e.isActiveChart},get widget(){return d.chart},get symbol(){return d.symbol},setInterval:Y=>{h("interval",Y),e.isActiveChart&&e.onIntervalChange&&e.onIntervalChange(Y)},get layout(){return d.layout},get allLayouts(){return ky()},setAllLayouts:Sg,get layoutLimit(){return e.layoutLimit},onLayoutChange:Y=>h("layout",Y),get theme(){return e.theme},get setTheme(){return e.setTheme},get locale(){return e.locale},get timezone(){return _d()},onTimezoneChange:Y=>{hp(Y)},get bottomBarEnabled(){return e.bottomBarEnabled??!0},get intervalEnabled(){return e.intervalEnabled??!0},get layoutsEnabled(){return e.layoutsEnabled??!0},get themesEnabled(){return e.themesEnabled??!0},get themeGeneraterEnabled(){return e.themeGeneraterEnabled??!0},get themeUseExternalStorage(){return e.themeUseExternalStorage??!1},get timezoneEnabled(){return e.timezoneEnabled??!0}}),G(nW,{ref:pe,get chartIds(){return t.id},get multiChart(){return e.multiChartLimit},get isActive(){return e.isActiveChart},get loadingVisible(){return p.loadingVisible},get drawingBarVisible(){return p.drawingBarVisible},get drawingBarCollapsed(){return _()},get onClick(){return e.onClick}})]};function gU(e,t,r){nt(()=>{const n=e.slice(0,t());r(n[0])})}function vU(e,t){nt(()=>{e==null||e.setAttribute("data-theme",t()),localStorage.setItem(Pv,t())})}const Sd={MIN_POSITION_REGULAR:20,MAX_POSITION_REGULAR:80,MIN_POSITION_GRID:15,MAX_POSITION_GRID:85,DEFAULT_SPLIT_POSITION:50,DEFAULT_SECOND_SPLIT_POSITION:75},Bc={SINGLE:1,SPLIT:2,GRID:3},pp={WATCHLIST:"watchlist",PAPER_TRADING:"papertrading",ORDERBOOK:"orderbook",TRADES:"trades"},mU=1e3,Si={CONTAINER:"chartspire-ui-right-bar-extended-view",MODAL_CONTAINER:"modal-container",MODAL_PANEL:"modal-panel",SPLIT_HANDLE:"split-handle",SPLIT_HANDLE_INDICATOR:"split-handle-indicator",RESIZABLE_HANDLE:"resizable-handle",SINGLE_VIEW:"single-view",SPLIT_VIEW:"split-view",GRID_VIEW:"grid-view",FIRST_SPLIT_HANDLE:"first-split-handle"};function yU(e){const t=ir(()=>{const s=e(),u=[];return s.watchListModalVisible&&u.push(pp.WATCHLIST),s.paperTradingModalVisible&&u.push(pp.PAPER_TRADING),s.orderbookModalVisible&&u.push(pp.ORDERBOOK),s.tradesModalVisible&&u.push(pp.TRADES),u}),r=ir(()=>t().length),n=ir(()=>r()===Bc.SINGLE),i=ir(()=>r()===Bc.SPLIT),o=ir(()=>r()===Bc.GRID);return{visiblePanels:t,visibleModalCount:r,isSingleView:n,isSplitView:i,isGridView:o,getPanelHeight:(s,u)=>{const d=t(),h=d.indexOf(s);return d.length===Bc.SINGLE?"100%":d.length===Bc.SPLIT?h===0?`${u}%`:`${100-u}%`:d.length===Bc.GRID?void 0:"100%"},getPanelWidth:s=>(t().length,Bc.GRID,"100%")}}function bU(){const[e,t]=be(Sd.DEFAULT_SPLIT_POSITION),[r,n]=be(Sd.DEFAULT_SECOND_SPLIT_POSITION);let i=0;return{splitPosition:e,setSplitPosition:t,secondSplitPosition:r,setSecondSplitPosition:n,handleSplitStart:(o,s)=>{i=s},handleSplitMove:(o,s)=>{const u=document.querySelector(`.${Si.CONTAINER} .${Si.MODAL_CONTAINER}`);if(!u)return;const d=u.getBoundingClientRect(),h=o/d.height*100;let p=i+h;s?p=Math.max(Sd.MIN_POSITION_GRID,Math.min(Sd.MAX_POSITION_GRID,p)):p=Math.max(Sd.MIN_POSITION_REGULAR,Math.min(Sd.MAX_POSITION_REGULAR,p)),t(p)},handleSplitEnd:()=>{i=0}}}var xU=Q("<div><div>");const wU=e=>{let t=!1,r=0;const n=h=>{h.preventDefault(),h.stopPropagation(),t=!0,r=h.clientY,e.onSplitStart(h.clientY,e.splitPosition),document.addEventListener("mousemove",i),document.addEventListener("mouseup",o)},i=h=>{if(!t)return;const p=h.clientY-r;e.onSplitMove(p)},o=()=>{t&&(t=!1,document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o),e.onSplitEnd())},s=h=>{h.preventDefault(),h.stopPropagation();const p=h.touches[0];p&&(t=!0,r=p.clientY,e.onSplitStart(p.clientY,e.splitPosition),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",d))},u=h=>{if(!t)return;h.preventDefault();const p=h.touches[0];if(!p)return;const g=p.clientY-r;e.onSplitMove(g)},d=()=>{t&&(t=!1,document.removeEventListener("touchmove",u),document.removeEventListener("touchend",d),e.onSplitEnd())};return $r(()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",d)}),(()=>{var h=xU(),p=h.firstChild;return h.$$touchstart=s,h.$$mousedown=n,De(g=>{var m=`${Si.SPLIT_HANDLE} ${Si.FIRST_SPLIT_HANDLE}`,b=`${e.splitPosition}%`,x=Si.SPLIT_HANDLE_INDICATOR;return m!==g.e&&at(h,g.e=m),b!==g.t&&((g.t=b)!=null?h.style.setProperty("top",b):h.style.removeProperty("top")),x!==g.a&&at(p,g.a=x),g},{e:void 0,t:void 0,a:void 0}),h})()};jt(["mousedown","touchstart"]);var m0=Q("<div>"),CU=Q("<div><div>");const _U=e=>{const[t,r]=be(parseInt(getComputedStyle(document.documentElement).getPropertyValue("--right-bar-extended-view-width"),10)),[n,i]=be(0),o=()=>({watchListModalVisible:e.watchListModalVisible,paperTradingModalVisible:e.paperTradingModalVisible,orderbookModalVisible:e.orderBookModalVisible,tradesModalVisible:e.tradesModalVisible}),{visibleModalCount:s,isSplitView:u,isGridView:d,getPanelHeight:h,getPanelWidth:p}=yU(o),{splitPosition:g,handleSplitStart:m,handleSplitMove:b,handleSplitEnd:x}=bU();let C,_;nt(()=>{if(e.chart&&e.paperTradingModalVisible&&e.currentSymbol()){const B=()=>{try{const X=e.chart.getDataList();if(X&&X.length>0){const ee=X[X.length-1];i(ee.close||0)}}catch(X){console.error("Error getting current price from chart:",X)}};B();const W=setInterval(B,mU);return()=>{clearInterval(W)}}});const k=B=>{C=B.clientX,_=t(),document.addEventListener("mousemove",M),document.addEventListener("mouseup",L)},M=B=>{const W=_-(B.clientX-C);r(W),document.documentElement.style.setProperty("--right-bar-extended-view-width",`${W}px`),e.resizeChart(X=>!X)},L=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",L)},A=(B,W)=>{m(B,W)},P=B=>{b(B,d())},$=()=>{x()};$r(()=>{console.log("Cleaning up right bar extended view modal"),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",L)});const R=()=>d()?Si.GRID_VIEW:u()?Si.SPLIT_VIEW:Si.SINGLE_VIEW,z=()=>d()?{"--split-top":`${g()}fr`,"--split-bottom":`${100-g()}fr`}:{};return(()=>{var B=CU(),W=B.firstChild;return W.$$mousedown=k,F(B,G(ze,{get when(){return s()>0},get children(){var X=m0();return F(X,G(ze,{get when(){return e.watchListModalVisible},get children(){var ee=m0();return F(ee,G(OM,{get locale(){return e.locale},get watchListLimit(){return e.watchListLimit},get watchListAmount(){return e.watchListAmount},get subscribedSymbolsURL(){return e.subscribedTickersURL},get useExternalWatchListStorage(){return e.useExternalWatchListStorage},get setInterval(){return e.setInterval},get watchListHttp(){return e.watchListHttp},get watchListHttpInterval(){return e.watchListHttpInterval},get watchListHttpBatchSize(){return e.watchListHttpBatchSize},get watchListHttpRetryEnabled(){return e.watchListHttpRetryEnabled},get watchListHttpMaxRetries(){return e.watchListHttpMaxRetries},get enabledSymbolTypes(){return e.enabledSymbolTypes}})),De(U=>{var q=`${Si.MODAL_PANEL} watchlist-panel`,ie={...h("watchlist",g())&&{height:h("watchlist",g())},width:p("watchlist")};return q!==U.e&&at(ee,U.e=q),U.t=Tn(ee,ie,U.t),U},{e:void 0,t:void 0}),ee}}),null),F(X,G(ze,{get when(){return e.paperTradingModalVisible},get children(){var ee=m0();return F(ee,G(mP,{get symbol(){return e.currentSymbol()||{symbol:"",type:null}},get currentPrice(){return n()},get locale(){return e.locale},get priceTrackingConfig(){return{updateInterval:e.priceTrackingInterval,enableLogging:e.priceTrackingLogging}},get paperTradingUseExternalStorage(){return e.useExternalPaperTradingStorage},get paperTradingMaxTrades(){return e.paperTradingMaxTrades}})),De(U=>{var q=`${Si.MODAL_PANEL} paper-trading-panel`,ie={...h("papertrading",g())&&{height:h("papertrading",g())},width:p("papertrading")};return q!==U.e&&at(ee,U.e=q),U.t=Tn(ee,ie,U.t),U},{e:void 0,t:void 0}),ee}}),null),F(X,G(ze,{get when(){return e.tradesModalVisible},get children(){var ee=m0();return F(ee,G(IA,{get locale(){return e.locale},currentSymbol:()=>e.currentSymbol(),get tradesMaxRows(){return e.tradesMaxRows},get timeFormat(){return e.tradesTimeFormat}})),De(U=>{var q=`${Si.MODAL_PANEL} trades-panel`,ie={...h("trades",g())&&{height:h("trades",g())},width:p("trades")};return q!==U.e&&at(ee,U.e=q),U.t=Tn(ee,ie,U.t),U},{e:void 0,t:void 0}),ee}}),null),F(X,G(ze,{get when(){return e.orderBookModalVisible},get children(){var ee=m0();return F(ee,G(oA,{get locale(){return e.locale},currentSymbol:()=>e.currentSymbol(),get orderBookMaxRows(){return e.orderBookMaxRows},get orderBookDepthVisualization(){return e.orderBookDepthVisualization}})),De(U=>{var q=`${Si.MODAL_PANEL} orderbook-panel`,ie={...h("orderbook",g())&&{height:h("orderbook",g())},width:p("orderbook")};return q!==U.e&&at(ee,U.e=q),U.t=Tn(ee,ie,U.t),U},{e:void 0,t:void 0}),ee}}),null),F(X,G(ze,{get when(){return u()||d()},get children(){return G(wU,{get splitPosition(){return g()},get isGridView(){return d()},onSplitStart:A,onSplitMove:P,onSplitEnd:$})}}),null),De(ee=>{var U=`${Si.MODAL_CONTAINER} ${R()}`,q=z();return U!==ee.e&&at(X,ee.e=U),ee.t=Tn(X,q,ee.t),ee},{e:void 0,t:void 0}),X}}),null),De(X=>{var ee=Si.CONTAINER,U=`${t()}px`,q=Si.RESIZABLE_HANDLE;return ee!==X.e&&at(B,X.e=ee),U!==X.t&&((X.t=U)!=null?B.style.setProperty("width",U):B.style.removeProperty("width")),q!==X.a&&at(W,X.a=q),X},{e:void 0,t:void 0,a:void 0}),B})()};jt(["mousedown"]);const SU=3,kU=e=>{var t;let r,n,i,o,s,u,d,h;const p=((t=e.defaultOpenComponents)==null?void 0:t.slice(0,3))||[],[g,m]=be(p),{rightBarCollapsed:b,setRightBarCollapsed:x}=LW(e.chartComponentApis,e.resizeChart);if(e.watchListEnabled){const A=p.includes("watchlist");[r,n]=be(A)}if(e.isPaperTradingEnabled){const A=p.includes("papertrading");[i,o]=be(A)}if(e.isOrderBookEnabled){const A=p.includes("orderbook");[s,u]=be(A)}if(e.isTradesEnabled){const A=p.includes("trades");[d,h]=be(A)}const C=(A,P,$)=>!P||!$?null:R=>{const z=$(),B=typeof R=="function"?R(z):R;m(B?W=>{const X=W.filter(ee=>ee!==A);if(X.push(A),X.length>SU){const ee=X.shift();if(ee)switch(ee){case"watchlist":n&&n(!1);break;case"papertrading":o&&o(!1);break;case"orderbook":u&&u(!1);break;case"trades":h&&h(!1);break}}return X}:W=>W.filter(X=>X!==A)),P(B)},_=C("watchlist",n,r),k=C("papertrading",o,i),M=C("orderbook",u,s),L=C("trades",h,d);return nt(()=>{((r==null?void 0:r())??!1)||((i==null?void 0:i())??!1)||((s==null?void 0:s())??!1)||((d==null?void 0:d())??!1)?(e.setRightBarExpandedViewVisible(!0),b()&&x(!1)):e.setRightBarExpandedViewVisible(!1),e.resizeChart(A=>!A)}),[G(MB,{get isWatchListEnabled(){return e.watchListEnabled},get isPaperTradingEnabled(){return e.isPaperTradingEnabled},get watchListModalVisible(){return r!=null?r():!1},get paperTradingModalVisible(){return i!=null?i():!1},get isOrderBookEnabled(){return e.isOrderBookEnabled},get orderBookModalVisible(){return s!=null?s():!1},get isTradesEnabled(){return e.isTradesEnabled},get tradesModalVisible(){return d!=null?d():!1},setWatchListModalVisible:_,setPaperTradingModalVisible:k,setOrderBookVisible:M,setTradesVisible:L,get rightBarCollapsed(){return b()},setRightBarCollapsed:x}),G(ze,{get when(){return e.rightBarExpandedViewVisible()},get children(){return G(_U,{get locale(){return e.locale},get watchListModalVisible(){return r!=null?r():!1},get paperTradingModalVisible(){return i!=null?i():!1},get orderBookModalVisible(){return s!=null?s():!1},get tradesModalVisible(){return d!=null?d():!1},get priceTrackingInterval(){return e.paperTradingPriceTrackingInterval},get priceTrackingLogging(){return e.paperTradingPriceTrackingLogging},get useExternalPaperTradingStorage(){return e.paperTradingUseExternalStorage},get paperTradingMaxTrades(){return e.paperTradingMaxTrades},get watchListLimit(){return e.watchListLimit},get watchListAmount(){return e.watchListAmount},get subscribedTickersURL(){return e.subscribedSymbolsURL??null},get resizeChart(){return e.resizeChart},get useExternalWatchListStorage(){return e.watchListUseExternalStorage},get chart(){return e.chart},get currentSymbol(){return e.currentSymbol},get setInterval(){return e.setInterval},get orderBookMaxRows(){return e.orderBookMaxRows},get orderBookDepthVisualization(){return e.orderBookDepthVisualization},get tradesMaxRows(){return e.tradesMaxRows??50},get tradesTimeFormat(){return e.tradesTimeFormat},get watchListHttp(){return e.watchListHttp},get watchListHttpInterval(){return e.watchListHttpInterval},get watchListHttpBatchSize(){return e.watchListHttpBatchSize},get watchListHttpRetryEnabled(){return e.watchListHttpRetryEnabled},get watchListHttpMaxRetries(){return e.watchListHttpMaxRetries},get enabledSymbolTypes(){return e.enabledSymbolTypes}})}})]},TU=e=>({[H.ONE]:1,[H.TWO]:2,[H.TWO_VERTICAL]:2,[H.THREE]:3,[H.THREE_VERTICAL]:3,[H.THREE_MIXED]:3,[H.THREE_MIXED_REVERSE]:3,[H.THREE_MIXED_BOTTOM]:3,[H.THREE_MIXED_TOP]:3,[H.FOUR]:4,[H.FOUR_VERTICAL]:4,[H.FOUR_HORIZONTAL]:4,[H.FOUR_MIXED]:4,[H.FOUR_MIXED_REVERSE]:4,[H.FOUR_MIXED_TOP]:4,[H.FOUR_MIXED_BOTTOM]:4,[H.FIVE_VERTICAL]:5,[H.FIVE_HORIZONTAL]:5,[H.FIVE_MIXED]:5,[H.FIVE_MIXED_REVERSE]:5,[H.FIVE_MIXED_TOP]:5,[H.SIX]:6,[H.SIX_HORIZONTAL]:6,[H.SIX_VERTICAL]:6,[H.SIX_MIXED]:6,[H.SEVEN_HORIZONTAL]:7,[H.SEVEN_VERTICAL]:7,[H.EIGHT]:8,[H.EIGHT_VERTICAL]:8,[H.EIGHT_HORIZONTAL]:8,[H.NINE]:9,[H.NINE_VERTICAL]:9,[H.NINE_HORIZONTAL]:9,[H.TEN]:10,[H.TEN_VERTICAL]:10,[H.TEN_HORIZONTAL]:10,[H.TWELVE]:12,[H.TWELVE_VERTICAL]:12,[H.TWELVE_HORIZONTAL]:12,[H.TWELVE_GRID]:12,[H.FOURTEEN]:14,[H.SIXTEEN]:16,[H.SIXTEEN_GRID]:16})[e]??e,EU=e=>({[H.ONE]:"one-charts",[H.TWO]:"two-charts",[H.TWO_VERTICAL]:"two-charts-vertical",[H.THREE]:"three-charts",[H.THREE_VERTICAL]:"three-charts-vertical",[H.THREE_MIXED]:"three-charts-mixed",[H.THREE_MIXED_REVERSE]:"three-charts-mixed-reverse",[H.THREE_MIXED_BOTTOM]:"three-charts-mixed-bottom",[H.THREE_MIXED_TOP]:"three-charts-mixed-top",[H.FOUR]:"four-charts",[H.FOUR_VERTICAL]:"four-charts-vertical",[H.FOUR_HORIZONTAL]:"four-charts-horizontal",[H.FOUR_MIXED]:"four-charts-mixed",[H.FOUR_MIXED_REVERSE]:"four-charts-mixed-reverse",[H.FOUR_MIXED_TOP]:"four-charts-mixed-top",[H.FOUR_MIXED_BOTTOM]:"four-charts-mixed-bottom",[H.FIVE_VERTICAL]:"five-charts-vertical",[H.FIVE_HORIZONTAL]:"five-charts-horizontal",[H.FIVE_MIXED]:"five-charts-mixed",[H.FIVE_MIXED_REVERSE]:"five-charts-mixed-reverse",[H.FIVE_MIXED_TOP]:"five-charts-mixed-top",[H.SIX]:"six-charts",[H.SIX_HORIZONTAL]:"six-charts-horizontal",[H.SIX_VERTICAL]:"six-charts-vertical",[H.SIX_MIXED]:"six-charts-mixed",[H.SEVEN_HORIZONTAL]:"seven-charts-horizontal",[H.SEVEN_VERTICAL]:"seven-charts-vertical",[H.EIGHT]:"eight-charts",[H.EIGHT_VERTICAL]:"eight-charts-vertical",[H.EIGHT_HORIZONTAL]:"eight-charts-horizontal",[H.NINE]:"nine-charts",[H.NINE_VERTICAL]:"nine-charts-vertical",[H.NINE_HORIZONTAL]:"nine-charts-horizontal",[H.TEN]:"ten-charts",[H.TEN_VERTICAL]:"ten-charts-vertical",[H.TEN_HORIZONTAL]:"ten-charts-horizontal",[H.TWELVE]:"twelve-charts",[H.TWELVE_VERTICAL]:"twelve-charts-vertical",[H.TWELVE_HORIZONTAL]:"twelve-charts-horizontal",[H.TWELVE_GRID]:"twelve-charts-grid",[H.FOURTEEN]:"fourteen-charts",[H.SIXTEEN]:"sixteen-charts",[H.SIXTEEN_GRID]:"sixteen-charts-grid"})[e]??"one-charts",H5=class T0{constructor(){xe(this,"registeredDataFeeds",new Map)}static getInstance(){return T0.instance||(T0.instance=new T0),T0.instance}registerDataFeed(t,r,...n){if(this.registeredDataFeeds.has(t))throw new Error(`DataFeed with name "${t}" is already registered`);const i=new r(...n);this.validateDataFeedImplementation(i,t),this.registeredDataFeeds.set(t,r),console.log(`DataFeedRegistry: Registered datafeed "${t}"`)}createDataFeed(t,...r){const n=this.registeredDataFeeds.get(t);if(!n)throw new Error(`DataFeed with name "${t}" is not registered`);return new n(...r)}isRegistered(t){return this.registeredDataFeeds.has(t)}getRegisteredNames(){return Array.from(this.registeredDataFeeds.keys())}unregisterDataFeed(t){const r=this.registeredDataFeeds.delete(t);return r&&console.log(`DataFeedRegistry: Unregistered datafeed "${t}"`),r}clear(){this.registeredDataFeeds.clear(),console.log("DataFeedRegistry: Cleared all registered datafeeds")}validateDataFeedImplementation(t,r){const n=["searchSymbols","getHistoricalTimeSeries","getPrice","getOrderBook","subscribeSymbol","unsubscribeSymbol","unsubscribeAllForChart","subscribeOrderBookData","unsubscribeOrderBookData","closeWebsocket","clearAllListeners","debugChannels","getActiveSubscriptions"];for(const o of n)if(typeof t[o]!="function")throw new Error(`DataFeed "${r}" must implement method: ${o}`);const i=["subscribeTradeData","unsubscribeTradeData"];for(const o of i)t[o]&&typeof t[o]!="function"&&console.warn(`DataFeed "${r}" has invalid implementation for optional method: ${o}`)}};xe(H5,"instance",null);let MU=H5;function IU(){return MU.getInstance()}function LU(e,t){return r=>{const n=e();if(console.log("IntervalHandler: handleSetInterval called for chart:",n),console.log("IntervalHandler: Available chart APIs:",Object.keys(t)),t[n.id]){const i=typeof r=="function"?r({multiplier:1,timespan:"minute",text:"1m"}):r;console.log("IntervalHandler: Setting interval on chart:",n,"to:",i),t[n.id].chart.setInterval(i,n)}else console.error("IntervalHandler: Chart API not found for:",n)}}var PU=Q("<div class=chartspire><div>");let Cp=!0,Ir='Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',Lr="normal";const[Md,$p]=be(1);let Y5=250;const Pv="chartspire-theme";let Lo="en-US";const AU=localStorage.getItem(Pv)??I("Light Theme 1",Lo),[Or,Ty]=be(AU),[Ba,Ey]=be({id:"chart1"});class DU{constructor(t){xe(this,"_rootContainer",null),xe(this,"_container"),xe(this,"_chartApi",null),xe(this,"_chartComponentApis",{}),xe(this,"_dispose"),xe(this,"_allChartIds",[]),xe(this,"_visibleChartIds",()=>[]);var r,n;if(t.theme&&Ty(t.theme),Lo=t.locale??"en-US",t.fontFamily&&(Ir=t.fontFamily),t.fontWeight&&(Lr=t.fontWeight.toString()),t.customStyles&&lN(t.customStyles),gn.isString(t.container)){if(this._container=document.getElementById(t.container),this._container==null)throw new Error("Container is null")}else this._container=t.container;mv(),this._rootContainer=document.createElement("div"),this._rootContainer.className="chartspire-root-container",(r=this._container)==null||r.appendChild(this._rootContainer),this._container.classList.add("chartspire-ui"),(n=this._container)==null||n.setAttribute("data-theme",Or()),t.fontFamily?(this._container.style.setProperty("--chartspire-ui-font-family",t.fontFamily),console.log("ChartSpire: Font family set to:",t.fontFamily),console.log("ChartSpire: CSS custom property value:",this._container.style.getPropertyValue("--chartspire-ui-font-family"))):this._container.style.setProperty("--chartspire-ui-font-family",Ir),t.fontWeight?this._container.style.setProperty("--chartspire-ui-font-weight",t.fontWeight.toString()):this._container.style.setProperty("--chartspire-ui-font-weight",Lr);const i=t.bottomBarEnabled??!0?"38px":"0px";if(this._container.style.setProperty("--chartspire-ui-bottom-bar-height",i),vU(this._container,Or),t.defaultDataFeed){let o;if(typeof t.defaultDataFeed=="string"){const s=IU();if(!s.isRegistered(t.defaultDataFeed))throw new Error(`DataFeed "${t.defaultDataFeed}" is not registered. Use DataFeedRegistry.registerDataFeed() to register it first.`);o=s.createDataFeed(t.defaultDataFeed)}else o=t.defaultDataFeed;Br.initializeWithDataFeed(o)}Cp=t.layoutUseExternalStorage??!1,Y5=t.multiChartDelay??500,this._dispose=Dd(o=>{let s=t.multiChartLimit??H.SIXTEEN;(s<1||s>16)&&(s=H.SIXTEEN,console.warn("Invalid multiChartLimit value. It must be between 1 and 16. Defaulting to 16."));const u=[{id:"chart1"},{id:"chart2"},{id:"chart3"},{id:"chart4"},{id:"chart5"},{id:"chart6"},{id:"chart7"},{id:"chart8"},{id:"chart9"},{id:"chart10"},{id:"chart11"},{id:"chart12"},{id:"chart13"},{id:"chart14"},{id:"chart15"},{id:"chart16"}].slice(0,s);this._allChartIds=u,$p(H.ONE);const d=ir(()=>{const L=Md(),A=TU(L);return u.slice(0,A)});this._visibleChartIds=d;const[h,p]=be(!1),[g,m]=be(!1);let[b,x]=be(Object.fromEntries(u.map(L=>[L.id,t.symbol])));const C=LU(Ba,this._chartComponentApis);iv().initialize(b,x,d,Ba,(L,A,P)=>{this.setSymbol(L,A,P)}),gU(u,Md,Ba);const _=L=>{Ey(L)},[k,M]=be({chartId:{id:"chart1"},skipBroadcast:!0,interval:t.interval});return uE(()=>{const L=this;return(()=>{var A=PU(),P=A.firstChild;return hi($=>L._rootContainer=$,A),F(P,G(mn,{get each(){return d()},children:($,R)=>G(fU,{ref:z=>{if(L._chartApi=z,(z==null?void 0:z.destroy)!=null){L._chartComponentApis[$.id]={onCleanUp:z.destroy,chart:z,underlyingChart:null};const B=()=>{var W;const X=(W=z.getUnderlyingChart)==null?void 0:W.call(z);X&&L._chartComponentApis[$.id]?L._chartComponentApis[$.id].underlyingChart=X:X||L._chartComponentApis[$.id]&&setTimeout(B,100)};B()}},get rootContainer(){return L._rootContainer},get styles(){return t.styles??{}},get customStyles(){return t.customStyles},watermark:"options.watermark ?? (Logo as Node)",get locale(){return t.locale??"en-US"},get drawingBarVisible(){return t.drawingBarVisible??!0},get symbol(){var z;return((z=b())==null?void 0:z[$.id])??t.symbol},get interval(){return t.interval},get periods(){return t.periods??[{multiplier:1,timespan:kn.MINUTE,text:Ke.ONE_MIN},{multiplier:3,timespan:kn.MINUTE,text:Ke.THREE_MIN},{multiplier:5,timespan:kn.MINUTE,text:Ke.FIVE_MIN},{multiplier:15,timespan:kn.MINUTE,text:Ke.FIFTEEN_MIN},{multiplier:30,timespan:kn.MINUTE,text:Ke.THIRTY_MIN},{multiplier:1,timespan:kn.HOUR,text:Ke.ONE_HOUR},{multiplier:2,timespan:kn.HOUR,text:Ke.TWO_HOUR},{multiplier:4,timespan:kn.HOUR,text:Ke.FOUR_HOUR},{multiplier:1,timespan:kn.DAY,text:Ke.ONE_DAY},{multiplier:1,timespan:kn.WEEK,text:Ke.ONE_WEEK},{multiplier:1,timespan:kn.MONTH,text:Ke.ONE_MONTH}]},get timezone(){return t.timezone??"Etc/UTC"},get mainIndicators(){return t.mainIndicators??[]},get subIndicators(){return t.subIndicators??[]},maxMultiCharts:s,get defaultDataFeed(){return Br.getInstance().getDataFeed()},get layoutLimit(){return t.layoutLimit??20},get themeUseExternalStorage(){return t.themeUseExternalStorage??!1},onClick:()=>{_($)},get isActiveChart(){return Ba().id===$.id},get multiChartLimit(){return Md()},onMultiChartClick:GA,chartIds:$,get theme(){return Or()},setTheme:Ty,onSymbolChange:z=>{},onIntervalChange:z=>{L.setInterval(z,$)},get rightBarExpandedViewVisible(){return h()},get resizeChart(){return g()},get candleCloseTimerEnabled(){return t.candleCloseTimerEnabled??!1},get fontFamily(){return t.fontFamily??"monospace"},get enabledSymbolTypes(){return t.enabledSymbolTypes},get intervalEnabled(){return t.intervalEnabled??!0},get layoutsEnabled(){return t.layoutsEnabled??!0},get themesEnabled(){return t.themesEnabled??!0},get themeGeneraterEnabled(){return t.themeGeneraterEnabled??!0},get timezoneEnabled(){return t.timezoneEnabled??!0},get bottomBarEnabled(){return t.bottomBarEnabled??!0},commonInterval:k,setCommonInterval:z=>{M(z)}})})),F(A,G(kU,{get isPaperTradingEnabled(){return t.paperTradingEnabled??!1},get paperTradingPriceTrackingInterval(){return t.paperTradingPriceTrackingInterval},get paperTradingPriceTrackingLogging(){return t.paperTradingPriceTrackingLogging},get paperTradingUseExternalStorage(){return t.paperTradingUseExternalStorage??!1},get paperTradingMaxTrades(){return t.paperTradingMaxTrades},get defaultOpenComponents(){return t.defaultOpenComponents},get subscribedSymbolsURL(){return t.subscribedSymbolsURL??null},get watchListLimit(){return t.watchListLimit??50},get watchListAmount(){return t.watchListAmount??5},get watchListUseExternalStorage(){return t.watchListUseExternalStorage??!1},setInterval:C,rightBarExpandedViewVisible:h,setRightBarExpandedViewVisible:p,get locale(){return t.locale??"en-US"},resizeChart:m,get chart(){var $;return(($=L._chartComponentApis[Ba().id])==null?void 0:$.underlyingChart)||null},currentSymbol:()=>{var $;const R=($=L._chartComponentApis[Ba().id])==null?void 0:$.chart;return(R==null?void 0:R.getSymbol(Ba()))??t.symbol},get chartComponentApis(){return L._chartComponentApis},get isOrderBookEnabled(){return t.orderBookEnabled??!1},get orderBookMaxRows(){return t.orderBookMaxRows??10},get orderBookDepthVisualization(){return t.orderBookDepthVisualization??"cumulative"},get isTradesEnabled(){return t.tradesEnabled??!1},get tradesMaxRows(){return t.tradesMaxRows??50},get tradesTimeFormat(){return t.tradesTimeFormat??"24h"},get watchListEnabled(){return t.watchListEnabled??!1},get watchListHttp(){return t.watchListHttp??!1},get watchListHttpInterval(){return t.watchListHttpInterval??5e3},get watchListHttpBatchSize(){return t.watchListHttpBatchSize??10},get watchListHttpRetryEnabled(){return t.watchListHttpRetryEnabled??!0},get watchListHttpMaxRetries(){return t.watchListHttpMaxRetries??3},get enabledSymbolTypes(){return t.enabledSymbolTypes??[]}}),null),De($=>{var R=`chartspire-ui-parent-flex ${EU(Md())}`,z=h();return R!==$.e&&at(P,$.e=R),z!==$.t&&We(P,"right-bar-extended-view-visible",$.t=z),$},{e:void 0,t:void 0}),A})()},this._container),o})}setTheme(t){var r;const n=[I("Light Theme 1",Lo),I("Light Theme 2",Lo),I("Midnight Theme",Lo),I("Dark Theme",Lo),I("Dark Gray Theme",Lo),I("Blue Theme",Lo),I("Red Theme",Lo),I("Green Theme",Lo),I("Yellow Theme",Lo),I("Pink Theme",Lo)];if(!n.includes(t)){console.error("Invalid theme: ",t," should be one of: ",n);return}(r=this._container)==null||r.setAttribute("data-theme",t)}getTheme(){return Or()}setStyles(t){Object.values(this._chartComponentApis).forEach(r=>{console.log("setting styles",t),r.chart.setStyles(t)})}getStyles(){return this._chartComponentApis[Ba().id].chart.getStyles()}setCustomStyles(t){S0().updateCustomOverrides(t);const r=Or();Object.values(this._chartComponentApis).forEach(n=>{n.chart.setStyles(Ui(r))})}getCustomStyles(){return S0().getCustomOverrides()}clearCustomStyles(){S0().clearCustomOverrides();const t=Or();Object.values(this._chartComponentApis).forEach(r=>{r.chart.setStyles(Ui(t))})}hasCustomStyles(){return S0().hasCustomStyles()}setLocale(t){Object.values(this._chartComponentApis).forEach(r=>{console.log("setting locale",t),r.chart.setLocale(t)})}getLocale(){var t;return((t=this._chartApi)==null?void 0:t.getLocale())??"en-US"}setFontFamily(t){Ir=t,this._container&&(this._container.style.setProperty("--chartspire-ui-font-family",t),console.log("ChartSpire: Font family updated to:",t),console.log("ChartSpire: CSS custom property value:",this._container.style.getPropertyValue("--chartspire-ui-font-family")))}getFontFamily(){return this._container&&this._container.style.getPropertyValue("--chartspire-ui-font-family")||'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'}setFontWeight(t){Lr=t.toString(),this._container&&(this._container.style.setProperty("--chartspire-ui-font-weight",t.toString()),console.log("ChartSpire: Font weight updated to:",t),console.log("ChartSpire: CSS custom property value:",this._container.style.getPropertyValue("--chartspire-ui-font-weight")))}getFontWeight(){return this._container&&this._container.style.getPropertyValue("--chartspire-ui-font-weight")||"normal"}setTimezone(t){Object.values(this._chartComponentApis).forEach(r=>{r.chart.setTimezone(t)})}getTimezone(){var t;return((t=this._chartApi)==null?void 0:t.getTimezone())??"America/New_York"}setSymbol(t,r,n){if(this._chartComponentApis[r.id]==null){console.error("Chart not found: ",r);return}if(n==null){console.error("Data feed is null");return}console.debug("ChartSpire setSymbol called with symbol:",t),this._chartComponentApis[r.id].chart.setSymbol(t,r,n)}getSymbol(t){return this._chartComponentApis[t.id]==null?(console.error("Chart not found: ",t),null):this._chartComponentApis[t.id].chart.getSymbol(t)}setInterval(t,r){if(this._chartComponentApis[r.id]==null){console.error("Chart not found: ",r);return}this._chartComponentApis[r.id].chart.setInterval(t,r)}getInterval(t){return this._chartComponentApis[t.id]==null?(console.error("Chart not found: ",t),null):this._chartComponentApis[t.id].chart.getInterval(t)}getActiveChart(){return this._chartApi}getChart(t){return this._chartComponentApis[t.id]==null?(console.error("Chart not found"),null):this._chartComponentApis[t.id].chart}isActiveChart(t){return Ba().id===t.id}setActiveChart(t){if(this._chartComponentApis[t.id]==null){console.error("Chart not found: ",t);return}Ey(t)}getMultiChart(){return Md()}getAllChartIds(){return[...this._allChartIds]}getVisibleChartIds(){return[...this._visibleChartIds()]}destroy(){console.log("Destroying chart");const t=Object.keys(this._chartComponentApis).length;console.log(`Destroying ${t} charts`),Object.entries(this._chartComponentApis).forEach(([r,n])=>{n.onCleanUp()}),this._dispose(),jA(),this._container.classList.remove("chartspire-ui"),this._container.removeAttribute("data-theme"),this._container.innerHTML="",this._container=null,this._chartApi=null,this._chartComponentApis={}}syncAllSymbolsToActiveChart(){}syncAllIntervalsToActiveChart(){}}const FU=()=>(console.warn("No getStoreCallback set."),null),RU=()=>(console.warn("No updateStoreCallback set."),null),OU=()=>(console.warn("No deleteStoreCallback set."),null);class NU{async getAllLayouts(){try{return console.warn("Retrieving from Store"),Cp&&!FU()?(console.warn("No callback is set. "),{}):localStorage}catch(t){console.warn("Error getting all layouts: ",t)}return{}}async removeStorage(t){try{if(Cp){const r=OU();r&&await r(t)}else localStorage.removeItem(t)}catch(r){console.warn("Error removing storage: ",r)}}async addToStore(t,r){try{if(Cp){const n=RU();n&&await n(t,r)}else localStorage.setItem(t,JSON.stringify(r))}catch(n){console.warn("Error updating storage: ",n)}}getLayoutEntry(t,r){return Object.entries(r).map(([n,i])=>({key:n,value:i})).find(n=>n.key===t)}async getLayoutFromStore(t){try{const r=await this.getAllLayouts();if(r instanceof Storage)return JSON.parse(r.getItem(t));const n=this.getLayoutEntry(t,r);return n?n.value:null}catch(r){console.warn("Error getting layout from store: ",r)}return{indicatorStore:{indicators:[]},stylesStore:{},overlayStore:{overlay:{},tickerInfo:{}}}}}const[My,zU]=be(null),[BU,Av]=be("default"),[$U,Iy]=be(!1),Id=()=>({indicatorStore:{indicators:[]},stylesStore:Or()==="Light Theme 1"||Or()==="Light Theme 2"?Ui("Light Theme 1"):Ui("Dark Theme"),overlayStore:[],paneOptionsStore:{paneOptions:W5()}}),X5=class j5{constructor(t){xe(this,"chart"),xe(this,"storageProvider"),xe(this,"stylesStore","stylesStore"),xe(this,"indicatorStore","indicatorStore"),xe(this,"overlayStore","overlayStore"),xe(this,"paneOptionsStore","paneOptionsStore"),xe(this,"defaultLayoutStore","default_mainStore"),this.chart=t,this.storageProvider=new NU}static getInstance(t){return this.instances.has(t)||this.instances.set(t,new j5(t)),this.instances.get(t)}get getSelectedLayoutName(){return(Ge(BU).replace(/\s+/g,"")??"default")+"_mainStore"}getDefaultLayout(){return this.defaultLayoutStore.replace("_mainStore","")}isDefaultLayout(){return this.getSelectedLayoutName===this.defaultLayoutStore}async getNameOfAllLayouts(){try{const t=[],r=await this.storageProvider.getAllLayouts();let n=0;t.push(this.getDefaultLayout()),r instanceof Storage?n=r.length:n=Object.keys(r).length;for(let i=0;i<n;i++)if(r instanceof Storage){const o=r.key(i);o!=null&&o.endsWith("_mainStore")&&t.push(o.replace("_mainStore",""))}else{const o=Object.keys(r)[i];o.endsWith("_mainStore")&&t.push(o.replace("_mainStore",""))}return t}catch(t){console.warn("Error getting the list of all names for layouts: ",t)}return[]}saveIndicators(){if(!(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore))try{const t=this.createIndicatorStoreFromChart();this.addDataToLayout(this.indicatorStore,t)}catch(t){console.warn("Error saving indicators:",t)}}async getIndicators(t){try{if(this.getSelectedLayoutName===this.defaultLayoutStore)return{indicators:[]};if(t){const r=t[this.indicatorStore];if(r)return r}}catch(r){console.warn("Error getting indicators: ",r)}return{indicators:[]}}saveStyles(){if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore)return;const t=this.getStylesFromChart();if(t)try{this.addDataToLayout(this.stylesStore,t)}catch(r){console.warn("Error saving styles:",r)}}async getStyles(t){if(this.getSelectedLayoutName===this.defaultLayoutStore)return null;try{if(t){const r=t[this.stylesStore];if(r)return r}}catch(r){console.warn("Error getting styles:",r)}return null}savePaneOptions(){if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore)return;const t={paneOptions:this.getPaneOptionsFromChart()};if(t)try{this.addDataToLayout(this.paneOptionsStore,t)}catch(r){console.warn("Error saving pane options:",r)}}async getPaneOptionsFromStore(t){if(this.getSelectedLayoutName===this.defaultLayoutStore)return{paneOptions:{}};try{if(t){const r=t[this.paneOptionsStore];if(r)return r}}catch(r){console.warn("Error getting pane options from store:",r)}return{paneOptions:{}}}removeNullValuesAndSpecificFields(t,r){const n={};for(const i in t){const o=t[i];r.includes(i)||o!==null&&(typeof o=="object"&&!Array.isArray(o)?n[i]=this.removeNullValuesAndSpecificFields(o,r):n[i]=o)}return n}async saveOverlay(t){if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore||t===null||My()===null)return;const r={overlay:this.removeNullValuesAndSpecificFields(t,["visible","lock","zLevel","mode","needDefaultPointFigure","needDefaultXAxisFigure","needDefaultYAxisFigure","modeSensitivity","totalStep","currentStep","groupId","_prevPressedPoints","logo","paneId","createPointFigures","createYAxisFigures","createXAxisFigures","onDrawStart","onDrawing","onDrawEnd","onPressedMoveStart","onPressedMoving","onPressedMoveEnd","onMoveStart","onMoving","onMoveEnd","onRightClick","onClick"]),symbolInfo:this.getActiveChartSymbol()};try{const n=await this.getLayoutFromStore()??Id();let i=await this.getOverlays(n);Array.isArray(i)||(i=[]),i==null||i.push(r),this.addDataToLayout(this.overlayStore,i)}catch(n){console.warn("Error saving overlay:",n)}}async overrideOverlay(t){try{if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore||t===null)return;const r=await this.getLayoutFromStore()??Id();let n=await this.getOverlays(r);if(!n||n.length===0){console.warn("No overlays found, nothing to override");return}n.forEach(i=>{i.overlay.id===(t==null?void 0:t.id)&&(console.log("Found overlay in store, overriding... ",t==null?void 0:t.id),t.styles&&(i.overlay.styles=t.styles),t.extendData&&(i.overlay.extendData=t.extendData),t.points&&(console.log("Updating points for overlay: ",t.id),i.overlay.points=t.points))}),this.addDataToLayout(this.overlayStore,n)}catch(r){console.warn("Error overriding overlay: ",r)}}async deleteOverlay(t){if(!(!this.chart||!this.getSelectedLayoutName))try{this.chart.removeOverlay(t);const r=await this.getLayoutFromStore();if(r){console.log("Deleting overlay for symbol: ",this.getActiveChartSymbol());const n=r.overlayStore.filter(i=>i.overlay.id!==t.id);await this.addDataToLayout(this.overlayStore,n)}else console.warn("Unable to delete overlay, layout not found")}catch(r){console.warn("Error deleting overlay:",r)}}async getOverlays(t){if(this.getSelectedLayoutName===this.defaultLayoutStore)return[];if(t){const r=t[this.overlayStore];if(r)return r}return[]}async removeAllOverlays(t=!1){var r;if((r=this.chart.getOverlays())==null||r.forEach(n=>{this.chart.removeOverlay(n)}),t){const n=await this.getLayoutFromStore();n&&(tt.forEach(n.overlayStore,i=>{var o;i.symbolInfo.symbol===((o=this.getActiveChartSymbol())==null?void 0:o.symbol)&&(n.overlayStore=n.overlayStore.filter(s=>s!==i))}),this.addDataToLayout(this.overlayStore,n.overlayStore))}}async updateLayoutName(t){if(this.getSelectedLayoutName!==this.defaultLayoutStore)try{const r=await this.getLayoutFromStore()??Id();if(r){const n=t.replace(/\s+/g,"")+"_mainStore",i={indicatorStore:r[this.indicatorStore],stylesStore:r[this.stylesStore],overlayStore:r[this.overlayStore],paneOptionsStore:r[this.paneOptionsStore]};await this.storageProvider.addToStore(n,i),await this.storageProvider.removeStorage(this.getSelectedLayoutName),Av(t)}}catch(r){console.warn("Error updating store name:",r)}}getActiveChartSymbol(){return My()}async removeStorage(){this.getSelectedLayoutName!==this.getDefaultLayout()&&await this.storageProvider.removeStorage(this.getSelectedLayoutName)}async addDataToLayout(t,r){try{console.warn("Adding data to Store");let n;if($U()?n=await this.getLayoutFromStore()??Id():n=this.createLayoutFromChart(),n){const i=n instanceof Storage?JSON.parse(n):n;i&&(i[t]=r,await this.storageProvider.addToStore(this.getSelectedLayoutName,i))}}catch(n){console.warn("Error updating storage: ",n)}}async getLayoutFromStore(){return await this.storageProvider.getLayoutFromStore(this.getSelectedLayoutName)}getDefaultLayoutData(){return Id()}createLayoutFromChart(){var t;const r=this.createIndicatorStoreFromChart(),n=this.getStylesFromChart(),i={paneOptions:this.getPaneOptionsFromChart()},o=[];return(t=this.chart.getOverlays())==null||t.forEach(s=>{o.push({overlay:s,symbolInfo:this.getActiveChartSymbol()})}),{indicatorStore:r,stylesStore:n,overlayStore:o,paneOptionsStore:i}}createIndicatorStoreFromChart(){const t=this.chart.getIndicators(),r=t.filter(i=>i.paneId==="candle_pane");t.forEach(i=>{A0.forEach(o=>{o===i.name&&r.push(i)})});const n=[];return tt.forEach(r,i=>{const o={id:i.id,name:i.name,paneId:i.paneId,calcParams:i.calcParams,visible:i.visible,zLevel:i.zLevel,precision:i.precision,shortName:i.shortName,shouldOhlc:i.shouldOhlc,shouldFormatBigNumber:i.shouldFormatBigNumber,extendData:i.extendData,series:i.series,minValue:i.minValue,maxValue:i.maxValue,styles:i.styles,figures:i.figures};n.push(o)}),{indicators:n}}getStylesFromChart(){return this.chart.getStyles()}getPaneOptionsFromChart(){const t=this.chart.getPaneOptions();return t===null?{}:Array.isArray(t)?t.length>0?t[0]:{}:t||{}}};xe(X5,"instances",new Map);let mt=X5;class Ly{static getIconsForCandleTooltip(t){var r,n;const i=t.id||"unknown",o=Yc.getCandleTooltipCollapseState(i);return(((n=(r=t.getStyles().candle)==null?void 0:r.tooltip)==null?void 0:n.features)||[]).map(s=>s.id==="arrow_down"?{...s,...Ad.createArrowIcon(o)}:s)}}class Yc{static handleIconClick(t,r,n,i,o,s,u){console.log("TooltipIconHandler.handleIconClick called with data:",r);const d=r.paneId,h=r.indicator,p=r.feature;if(console.log("Parsed data - paneId:",d,"indicator:",h,"feature:",p),h&&p){const g=h.name,m=p.id;switch(console.log(`Processing icon click: ${m} for indicator: ${g}`),m){case"invisible":this.handleVisibilityToggle(t,g,d,!0);break;case"visible":this.handleVisibilityToggle(t,g,d,!1);break;case"setting":this.handleSettings(t,g,d,n);break;case"close":this.handleClose(t,g,d,i,o,s,u);break;case"arrow_down":this.handleArrowDown(t,g);break;default:console.warn(`Unknown tooltip icon: ${m}`)}}}static handleVisibilityToggle(t,r,n,i){t.overrideIndicator({name:r,visible:i,paneId:n})}static handleSettings(t,r,n,i){const o=t.getIndicators({name:r,paneId:n});if(o&&o.length>0){const s=o[0];s&&i({visible:!0,indicatorName:r,paneId:n,calcParams:s.calcParams,styles:s.styles})}}static handleClose(t,r,n,i,o,s,u){if(console.log(`TooltipIconHandler.handleClose: Attempting to close indicator ${r} in pane ${n}`),n==="candle_pane"){const d=i(),h=d.indexOf(r);if(h===-1)console.warn(`Indicator ${r} not found in main indicators array. Skipping state update.`),t.removeIndicator({name:r,paneId:"candle_pane"});else{const p=[...d];t.removeIndicator({name:r,paneId:"candle_pane"}),p.splice(h,1),o(p)}}else{const d=s();if(!(r in d))console.warn(`Indicator ${r} not found in sub indicators. Skipping state update.`),t.removeIndicator({name:r,paneId:n});else{const h={...d};t.removeIndicator({name:r,paneId:n}),delete h[r],u(h)}}mt.getInstance(t).saveIndicators()}static handleArrowDown(t,r){const n=t.id||"unknown",i=this.getIndicatorCollapseState(r,n);this.setIndicatorCollapseState(r,!i,n);const o=t.getIndicators().find(s=>s.name===r);o&&t.overrideIndicator(o)}static handleCandleTooltipIconClick(t,r){const n=r.feature;if(n&&n.id==="arrow_down"){const i=t.id||"unknown",o=this.getCandleTooltipCollapseState(i);this.setCandleTooltipCollapseState(!o,i),this.updateCandleTooltipStyles(t,!o)}}static updateCandleTooltipStyles(t,r){var n,i,o,s,u,d,h,p,g;const m=t.id||"unknown",b=t.getStyles();if(r){const x=(o=(i=(n=b.candle)==null?void 0:n.tooltip)==null?void 0:i.legend)==null?void 0:o.template;x&&!this.originalCandleTemplates.has(m)&&this.originalCandleTemplates.set(m,x);const C=(k,M)=>{if(Array.isArray(x))return x.length>0?[x[0]]:[];if(typeof x=="function")try{const L=x(k,M);return Array.isArray(L)&&L.length>0?[L[0]]:[]}catch{return[]}return[]},_=Ly.getIconsForCandleTooltip(t);t.setStyles({candle:{tooltip:{...(s=b.candle)==null?void 0:s.tooltip,features:_,legend:{...(d=(u=b.candle)==null?void 0:u.tooltip)==null?void 0:d.legend,template:C}}}})}else{const x=this.originalCandleTemplates.get(m),C=Ly.getIconsForCandleTooltip(t);t.setStyles({candle:{tooltip:{...(h=b.candle)==null?void 0:h.tooltip,features:C,legend:{...(g=(p=b.candle)==null?void 0:p.tooltip)==null?void 0:g.legend,template:x}}}})}}static createKey(t,r){return`${t}:${r}`}static getIndicatorCollapseState(t,r){if(!r)return!1;const n=this.createKey(r,t);return this.collapsedIndicators.has(n)}static setIndicatorCollapseState(t,r,n){if(!n)return;const i=this.createKey(n,t);r?this.collapsedIndicators.add(i):this.collapsedIndicators.delete(i)}static getCandleTooltipCollapseState(t){if(!t)return!1;const r=this.createKey(t,"candle");return this.collapsedIndicators.has(r)}static setCandleTooltipCollapseState(t,r){if(!r)return;const n=this.createKey(r,"candle");t?this.collapsedIndicators.add(n):this.collapsedIndicators.delete(n)}static getCurrentCandleTooltipChartId(){return null}}xe(Yc,"collapsedIndicators",new Set),xe(Yc,"originalCandleTemplates",new Map);function Z5({chart:e,mainIndicators:t,setMainIndicators:r,subIndicators:n,setSubIndicators:i,setIndicatorSettingModalParams:o}){return s=>{Yc.handleIconClick(e,s,o,t,r,n,i)}}class VU{static getIconsForIndicator(t,r){const n=t.getStyles().indicator.tooltip.features,i=[],o=t.id||"unknown",s=Yc.getIndicatorCollapseState(r.name,o),u=n.find(m=>m.id==="visible"),d=n.find(m=>m.id==="invisible"),h=n.find(m=>m.id==="setting"),p=n.find(m=>m.id==="close"),g=n.find(m=>m.id==="arrow_down");if(s){if(r.visible?(u&&i.push(this.applyIconPadding(u)),h&&i.push(this.applyIconPadding(h))):(d&&i.push(this.applyIconPadding(d)),h&&i.push(this.applyIconPadding(h))),g){const m={...g,...Ad.createArrowIcon(!0)};i.push(this.applyIconPadding(m))}return p&&i.push(this.applyIconPadding(p)),i}if(r.visible){if(u&&i.push(this.applyIconPadding(u)),h&&i.push(this.applyIconPadding(h)),g){const m={...g,...Ad.createArrowIcon(!1)};i.push(this.applyIconPadding(m))}p&&i.push(this.applyIconPadding(p))}else{if(d&&i.push(this.applyIconPadding(d)),h&&i.push(this.applyIconPadding(h)),g){const m={...g,...Ad.createArrowIcon(!1)};i.push(this.applyIconPadding(m))}p&&i.push(this.applyIconPadding(p))}return i}static applyIconPadding(t){return t.id==="arrow_down"&&(t.marginTop!==void 0||t.marginLeft!==void 0)?t:{...t,marginTop:1,marginLeft:4}}static getIconById(t,r){return t.getStyles().indicator.tooltip.features.find(n=>n.id===r)}static getAllIcons(t){return t.getStyles().indicator.tooltip.features}}class WU{static createDataSource(t){return({indicator:r,crosshair:n})=>{const i=t.id||"unknown",o=Yc.getIndicatorCollapseState(r.name,i)?[]:this.createLegends(t,r,n),s=VU.getIconsForIndicator(t,r);return{name:r.name,calcParamsText:"",features:s,legends:o}}}static createLegends(t,r,n){var i,o;const s=r.result,u=((o=(i=n.kLineData)==null?void 0:i.timestamp)==null?void 0:o.toString())??"",d=s[u],h=[];if(d){for(const p in d)if(Object.prototype.hasOwnProperty.call(d,p)&&d[p]!==void 0){const g=this.determineValueColor(t,r,h.length);h.push({title:p.toUpperCase()+": ",value:{text:d[p].toFixed(2),color:g}})}}return h}static determineValueColor(t,r,n){let i=t.getStyles().indicator.lines[n%t.getStyles().indicator.lines.length].color;const o=r.styles;return o&&(o.lines?i=o.lines[n%o.lines.length].color:o.circles&&(i=o.circles[n%o.circles.length].upColor)),i}}class Dv{static applyStylesToChart(t,r){if(!t)return;const n=UT.createTooltipConfig(r),i=HT.createCandleTooltipConfig(r);t.setStyles({indicator:{tooltip:n},candle:{tooltip:i}})}static createIndicatorWithTooltip(t,r,n=!0,i,o){const s={name:r,visible:!0,createTooltipDataSource:WU.createDataSource(t)},u=(t==null?void 0:t.createIndicator(s,i,o))??null;return n&&mt.getInstance(t).saveIndicators(),u}static createIconClickHandler(t){return Z5(t)}static createCandleTooltipIconClickHandler(t){return r=>{Yc.handleCandleTooltipIconClick(t,r)}}static updateTheme(t,r){this.applyStylesToChart(t,r)}}function Wg(e,t,r,n,i){return Dv.createIndicatorWithTooltip(e,t,r,n,i)}const UU=(e,t,r)=>{let n=t,i=n;switch(e.timespan){case"minute":{n=n-n%(60*1e3),i=n-r*e.multiplier*60*1e3;break}case"hour":{n=n-n%(3600*1e3),i=n-r*e.multiplier*60*60*1e3;break}case"day":{n=n-n%(3600*1e3),i=n-r*e.multiplier*24*60*60*1e3;break}case"week":{const o=new Date(n).getDay(),s=o===0?6:o-1;n=n-s*60*60*24;const u=new Date(n);n=new Date(`${u.getFullYear()}-${u.getMonth()+1}-${u.getDate()}`).getTime(),i=r*e.multiplier*7*24*60*60*1e3;break}case"month":{const o=new Date(n),s=o.getFullYear(),u=o.getMonth()+1;n=new Date(`${s}-${u}-01`).getTime(),i=r*e.multiplier*30*24*60*60*1e3;const d=new Date(i);i=new Date(`${d.getFullYear()}-${d.getMonth()+1}-01`).getTime();break}case"year":{const o=new Date(n).getFullYear();n=new Date(`${o}-01-01`).getTime(),i=r*e.multiplier*365*24*60*60*1e3;const s=new Date(i);i=new Date(`${s.getFullYear()}-01-01`).getTime();break}}return[i,n]},HU=e=>{e.getIndicators().forEach(t=>{e.removeIndicator({id:t.id})})},_p=new Map;function YU(e){return _p.has(e)||_p.set(e,{currentCandle:null,targetInterval:{multiplier:1,timespan:"minute",text:"1m"},lastTimestamp:0,initialized:!1,lastVolume:0,isFirstDataPoint:!0}),_p.get(e)}function XU(e){_p.set(e,{currentCandle:null,targetInterval:{multiplier:1,timespan:"minute",text:"1m"},lastTimestamp:0,initialized:!1,lastVolume:0,isFirstDataPoint:!0})}function jU(e,t,r){if(!r.currentCandle)return!0;const n=new Date(r.currentCandle.timestamp),i=new Date(e);switch(t.timespan){case"minute":const o=t.multiplier,s=n.getUTCHours()*60+n.getUTCMinutes(),u=i.getUTCHours()*60+i.getUTCMinutes();return Math.floor(s/o)!==Math.floor(u/o);case"hour":const d=t.multiplier,h=n.getUTCHours(),p=i.getUTCHours(),g=Math.floor(h/d)!==Math.floor(p/d),m=n.getUTCDate()!==i.getUTCDate();return!!(g||m);case"day":return Math.floor((i.getTime()-n.getTime())/(1440*60*1e3))>=t.multiplier;case"week":const b=_=>{const k=new Date(_.getTime());let M=k.getUTCDay();M===0&&(M=7);const L=M-1;return k.setUTCDate(k.getUTCDate()-L),k.setUTCHours(0,0,0,0),k},x=b(n),C=b(i);return x.getTime()!==C.getTime();case"month":return(i.getUTCFullYear()-n.getUTCFullYear())*12+(i.getUTCMonth()-n.getUTCMonth())>=t.multiplier;default:return console.warn(`Unknown interval: ${t.timespan}`),!0}}function G5(e,t){const r=new Date(e);r.toISOString();let n=new Date(e);switch(t.timespan){case"minute":const i=Math.floor(r.getUTCMinutes()/t.multiplier)*t.multiplier;n.setUTCMinutes(i,0,0);break;case"hour":const o=r.getUTCHours(),s=Math.floor(o/t.multiplier)*t.multiplier;n.setUTCHours(s,0,0,0);break;case"day":if(n.setUTCHours(0,0,0,0),t.multiplier>1){const h=Math.floor(r.getTime()/864e5)%t.multiplier;n.setTime(n.getTime()-h*24*60*60*1e3)}break;case"week":let u=r.getUTCDay();u===0&&(u=7);const d=u-1;if(n.setUTCDate(r.getUTCDate()-d),n.setUTCHours(0,0,0,0),t.multiplier>1){const h=new Date(Date.UTC(2e3,0,3)).getTime(),p=(Math.floor((n.getTime()-h)/6048e5)%t.multiplier+t.multiplier)%t.multiplier;p>0&&n.setTime(n.getTime()-p*6048e5)}break;case"month":if(n.setUTCDate(1),n.setUTCHours(0,0,0,0),t.multiplier>1){const h=r.getUTCMonth(),p=h%t.multiplier;n.setUTCMonth(h-p)}break;default:return e}return n.getTime()}function Q5(e,t){try{const r=e.getDataList();return!r||r.length===0?(console.log(`No existing data found in chart for timestamp lookup: ${new Date(t).toISOString()}`),null):r.find(i=>i.timestamp===t)||null}catch(r){return console.error("Error finding existing candle:",r),null}}function ZU(e,t,r,n){if(!n.initialized)try{const i=G5(t,r),o=Q5(e,i);if(o)n.currentCandle={...o};else if(r.timespan==="week"){const s=(h=>{const p=new Date(h.getTime());let g=p.getUTCDay();return g===0&&(g=7),p.setUTCDate(p.getUTCDate()-(g-1)),p.setUTCHours(0,0,0,0),p})(new Date(t)),u=new Date(s.getTime()+10080*60*1e3),d=e.getDataList();if(d&&d.length>0){const h=d.find(p=>{const g=new Date(p.timestamp).getTime();return g>=s.getTime()&&g<u.getTime()});h&&(n.currentCandle={...h,timestamp:i})}}n.initialized=!0}catch(i){console.error("Error initializing from existing data:",i),n.initialized=!0}}function GU(e,t,r,n,i){if(r.timespan==="minute"&&r.multiplier===1){i?i(t):console.warn("candleAggregate called without callback for 1-minute data");return}const o=YU(n);o.targetInterval=r,o.initialized||ZU(e,t.timestamp,r,o);const s=t.timestamp;o.lastTimestamp=s;const u=G5(s,r),d=t.volume||0,h=Math.max(0,d-o.lastVolume);if(o.lastVolume=d,!o.currentCandle||jU(s,r,o)){o.lastVolume=d,o.isFirstDataPoint=!0,o.currentCandle&&i&&i(o.currentCandle);const p=Q5(e,u);if(p){o.currentCandle={...p},o.currentCandle.high=Math.max(p.high,t.high),o.currentCandle.low=Math.min(p.low,t.low),o.currentCandle.close=t.close;const g=p.volume||0;o.currentCandle.volume=g}else o.currentCandle={open:t.open,high:t.high,low:t.low,close:t.close,volume:d,timestamp:u};i&&i(o.currentCandle)}else if(o.currentCandle){const p=o.currentCandle;p.high=Math.max(p.high,t.high),p.low=Math.min(p.low,t.low),p.close=t.close,o.isFirstDataPoint||(p.volume=(p.volume||0)+h),i&&i(p)}o.isFirstDataPoint=!1}const Py={multiplier:1,timespan:"minute",text:"1m"},K5=class Ld{constructor(){xe(this,"chartConfigs",new Map),xe(this,"previousSymbols",new Map),xe(this,"dataFeed",new JU)}static getInstance(){return Ld.instance||(Ld.instance=new Ld),Ld.instance}setDataFeed(t){this.dataFeed=t,console.log("ChartDataProvider: Data feed instance set")}getDataFeed(){return this.dataFeed}static initializeWithDataFeed(t){Ld.getInstance().setDataFeed(t),console.log("ChartDataProvider initialized with data feed:",t.constructor.name)}createDataLoader(t,r,n,i,o,s){return{getBars:this.createGetBarsHandler(t,r,n,i,o,s),subscribeBar:this.createSubscribeBarHandler(t,s),unsubscribeBar:this.createUnsubscribeBarHandler(t,s)}}createGetBarsHandler(t,r,n,i,o,s){return async({callback:u})=>{o&&o(!0);try{if(!this.dataFeed){console.error(`ChartDataProvider [${t.id}]: No data feed available. Make sure setDataFeed() was called first.`),u([]);return}if(s&&this.handleReplayGetBars(t,u,o))return;let d=this.chartConfigs.get(t);if(d){const m=d.symbol;d.symbol=r,d.interval=n,d.candleType=i||null,d.dataFeed=this.dataFeed,console.debug(`ChartDataProvider [${t.id}]: Updated existing config, chart reference: ${d.chart?"preserved":"still null"}, oldTicker:`,m,"newTicker:",r)}else d={symbol:r,interval:n,candleType:i||null,dataFeed:this.dataFeed,chart:null},this.chartConfigs.set(t,d),console.debug(`ChartDataProvider [${t.id}]: Created new config, chart reference: null`);XU(t);const[h,p]=UU(n,new Date().getTime(),500);let g=await this.dataFeed.getHistoricalTimeSeries(r,n,h,p,r.type);if(i&&As(i)&&g.length>0&&(g=this.handleRenkoGetBars(t,g,i),g.length===0)){u([]);return}u(g)}catch(d){console.warn(`ChartDataProvider [${t.id}]: Error fetching data:`,d),u([])}finally{o&&o(!1)}}}createSubscribeBarHandler(t,r){return({callback:n})=>{const i=this.chartConfigs.get(t);if(!i){console.warn(`ChartDataProvider [${t.id}]: No config found for subscribeBar`);return}if(r){if(this.handleReplaySubscribe(t,n))return;console.warn(`ChartDataProvider [${t.id}]: Replay mode not handled`)}if(As(i.candleType)){if(this.handleRenkoSubscribe(t))return;console.warn(`ChartDataProvider [${t.id}]: Renko mode not handled`)}this.handleStandardSubscribe(t,n)}}createUnsubscribeBarHandler(t,r){return async()=>{console.warn("createUnsubscribeBarHandler called");const n=this.chartConfigs.get(t);if(console.debug(`ChartDataProvider [${t.id}]: Unsubscribe handler called, config:`,n),!n)return;const i=this.getPreviousSymbol(t);console.warn(`ChartDataProvider [${t.id}]: Unsubscribe handler called, previousSymbol:`,i,"currentConfig.ticker:",n.symbol),!(r&&await this.handleReplayUnsubscribe(t))&&await this.handleStandardUnsubscribe(t)}}updateChartReference(t,r){let n=this.chartConfigs.get(t);n?(n.chart=r,console.debug(`ChartDataProvider [${t.id}]: Updated chart reference in existing config`)):(console.error("ChartDataProvider: No config found for updateChartReference",t),n={symbol:{symbol:"",type:vr.CRYPTO},interval:{multiplier:1,timespan:"minute",text:"1m"},candleType:null,dataFeed:this.dataFeed,chart:r},this.chartConfigs.set(t,n),console.debug(`ChartDataProvider [${t.id}]: Created new config with chart reference`))}cleanup(t){this.chartConfigs.delete(t),console.warn(`ChartDataProvider [${t.id}]: Configuration cleaned up`)}getConfig(t){return this.chartConfigs.get(t)}setPreviousSymbol(t,r){console.log("ChartDataProvider: Setting previous symbol for chart:",t,r);const n={...r};this.previousSymbols.set(t.id,n)}getPreviousSymbol(t){const r=this.previousSymbols.get(t.id);return console.debug(`ChartDataProvider [${t.id}]: getPreviousSymbol called, returning:`,r),r}getReplayInstance(t){return z0.getInstancesMap().get(t)||null}handleReplayGetBars(t,r,n){console.debug(`ChartDataProvider [${t.id}]: REPLAY MODE - Getting initial replay data`);const i=this.getReplayInstance(t);if(i){const o=i.getCurrentReplayData();return console.debug(`ChartDataProvider [${t.id}]: Returning ${o.length} initial replay data points`),r(o),n&&n(!1),!0}else return console.warn(`ChartDataProvider [${t.id}]: No replay instance found for replay mode`),!1}handleReplaySubscribe(t,r){console.log(`ChartDataProvider [${t.id}]: REPLAY MODE - Setting up replay subscription`);const n=this.getReplayInstance(t);return n?(n.setCurrentCallback(r),n.startReplayInterval(),console.debug(`ChartDataProvider [${t.id}]: Replay interval started`),!0):(console.warn(`ChartDataProvider [${t.id}]: No replay instance found for replay subscription`),!1)}async handleReplayUnsubscribe(t){console.warn(`ChartDataProvider [${t.id}]: REPLAY MODE - Cleaning up replay subscription`);const r=this.getReplayInstance(t);return r?(r.stopReplayInterval(),console.warn(`ChartDataProvider [${t.id}]: Replay interval stopped`),!0):!1}handleRenkoGetBars(t,r,n){const i=this.chartConfigs.get(t);if(!(i!=null&&i.chart))return console.error(`ChartDataProvider [${t.id}]: Chart reference is null for Renko processing. Make sure updateChartReference was called before creating the data loader.`),[];console.log(`ChartDataProvider [${t.id}]: Processing ${r.length} data points for Renko chart`);const o=S$(i.chart,r,t);return console.log(`ChartDataProvider [${t.id}]: Generated ${o.length} Renko bricks`),o}handleRenkoSubscribe(t){return console.warn(`ChartDataProvider [${t.id}]: Renko detected - live subscription disabled`),!0}handleStandardSubscribe(t,r){var n;const i=this.chartConfigs.get(t);if(!i){console.warn(`ChartDataProvider [${t.id}]: No config found for subscribeBar`);return}if(!i.chart){console.error(`ChartDataProvider [${t.id}]: Chart reference is null. Make sure updateChartReference was called before creating the data loader.`);return}(n=this.dataFeed)==null||n.subscribeSymbol(i.symbol,Py,o=>{i.chart?GU(i.chart,o,i.interval,t,r):console.warn(`ChartDataProvider [${t.id}]: Chart reference became null during data processing`)},t.id)}async handleStandardUnsubscribe(t){var r;const n=this.chartConfigs.get(t);if(!n)return;const i=this.getPreviousSymbol(t)||n.symbol;i?await((r=this.dataFeed)==null?void 0:r.unsubscribeSymbol(i,Py,t.id)):console.warn(`ChartDataProvider [${t.id}]: No symbol found for unsubscribe`)}};xe(K5,"instance");let Br=K5;function QU(e){const t=[{name:vr.CRYPTO,class:q5}];(e!=null?t.filter(r=>r.name.toLowerCase()!==e.toLowerCase()):t).forEach(r=>{r.class.checkAndCloseIfNoSubscriptions()})}function KU(){const e=Br.getInstance().getDataFeed();e&&(console.log("Closing websocket for ",e),e.closeWebsocket())}const El=class Se{async getPrice(t,r){try{if(r!==void 0&&r!==vr.CRYPTO)return console.warn("BinanceDataFeed: getPrice only supports crypto symbols"),null;const n=`https://api.binance.com/api/v3/ticker/price?symbol=${t.symbol.toUpperCase()}`,i=await fetch(n);if(!i.ok)throw new Error(`Network response was not ok: ${i.statusText}`);const o=await i.json();if(!o.price)throw new Error("No price data in response");return parseFloat(o.price)}catch(n){return console.error("BinanceDataFeed: Failed to fetch price for",t.symbol,":",n),null}}async searchSymbols(t,r){try{if(r!==void 0&&r!==vr.CRYPTO)return[];(t===void 0||t==="")&&(t="BTCUSDT");const n=`https://api.binance.com/api/v3/exchangeInfo?symbol=${t.toUpperCase()}`,i=await fetch(n);if(console.log("response",i),!i.ok)throw new Error(`Network response was not ok: ${i.statusText}`);const o=await i.json();if(console.log("result",o),!o.symbols||!Array.isArray(o.symbols))throw new Error("Invalid response format: 'symbols' not found or not an array.");return console.log(o.symbols),(o.symbols!=null?o.symbols:[]).map(s=>({symbol:s.symbol,exchange:"binance",logo:"binance-logo.svg",type:vr.CRYPTO}))}catch(n){return console.error("Failed to fetch data from Binance API:",n),[]}}async getHistoricalTimeSeries(t,r,n,i,o){console.warn("Fetching historical time series for crypto");const s=1e3,u=Wc(vr.CRYPTO,r);let d=[],h=s,p,g=Math.ceil(s/1e3);try{for(;h>0&&g>0;){const m=Math.min(1e3,h),b=await qU(t.symbol,u,m,p).catch(x=>(console.error("Failed to fetch candle data:",x),[]));if(!b||b.length===0){console.warn("No data returned, stopping further requests");break}if(d=[...b,...d],h-=b.length,g--,p=b[0][0],d.length>=s)break}return d.length<s&&console.warn(`Requested ${s} data points, but only fetched ${d.length}`),d.slice(0,s).map(m=>({timestamp:m[0],open:parseFloat(m[1]),high:parseFloat(m[2]),low:parseFloat(m[3]),close:parseFloat(m[4]),volume:parseFloat(m[5])}))}catch(m){return console.error("An error occurred during data fetching:",m),[]}}async subscribeSymbol(t,r,n,i){var o;if((t==null?void 0:t.symbol)==null){console.warn("Invalid symbol: Symbol must have a valid symbol.");return}if(r==null){console.warn("Invalid period: Period cannot be null or undefined.");return}if(i==null){console.warn("Invalid subscriberUID: subscriberUID cannot be null or undefined.");return}try{QU(vr.CRYPTO),((o=Se._ws)==null?void 0:o.readyState)!==WebSocket.OPEN?await this.createWebSocket(t,r,i):(console.log("WebSocket is already connected, proceeding to subscribe"),await this.subscribe(t,r,i)),this.addListener(t,r,n,i)}catch(s){console.error("Failed to subscribe to symbol: ",s)}}subscribeAllTickers(t,r,n,i=500,o){const s=async u=>{await new Promise(d=>setTimeout(d,u))};t.length!==0&&this.subscribeSymbol(t[0],r,n,o).then(async()=>{console.log(`Subscribed to symbol: ${t[0].symbol}`),console.log("Applying initial delay of 3 seconds"),await s(3e3);for(let u=1;u<t.length;u++)setTimeout(()=>{this.subscribeSymbol(t[u],r,n,o).then(()=>{console.log(`Subscribed to symbol: ${t[u].symbol}`)})},(u-1)*i)})}async getOrderBook(t,r){try{if(r!==void 0&&r!==vr.CRYPTO)return console.warn("BinanceDataFeed: getOrderBook only supports crypto symbols"),null;const n=`https://api.binance.com/api/v3/depth?symbol=${t.symbol.toUpperCase()}&limit=20`,i=await fetch(n);if(!i.ok)throw new Error(`Network response was not ok: ${i.statusText}`);const o=await i.json();if(!o.bids||!o.asks)throw new Error("No order book data in response");return{bids:o.bids,asks:o.asks,timestamp:Date.now()}}catch(n){return console.error("BinanceDataFeed: Failed to fetch order book for",t.symbol,":",n),null}}unsubscribeSymbol(t,r,n){!this.validateTickerPeriodUuid(t,r,n)||n==null||this.removeListener(t.symbol,r,n)&&this.unSubscribeToSymbol(t.symbol,r)}unsubscribeAllTickers(t,r,n,i){console.log("Unsubscribing all tickers"),t.forEach((o,s)=>{!this.validateTickerPeriodUuid(o,r,i)||i==null||setTimeout(()=>{console.log("Subscribed Symbols Before",Se._subscribedSymbolListenersMap.size),this.removeListener(o.symbol,r,i)&&this.unSubscribeToSymbol(o.symbol,r),Se.checkAndCloseIfNoSubscriptions()},s*n)})}closeWebsocket(){Se.closeWebsocket()}static closeWebsocket(){var t;console.warn("Closing websocket connection"),(t=Se._ws)==null||t.close(),Se._ws=void 0,Se._subscribedSymbolListenersMap.clear(),Se._subscribedSymbolsMap.clear(),Se._domListenersMap.clear(),Se._domSubscriptionsMap.clear(),Se._tradeListenersMap.clear(),Se._tradeSubscriptionsMap.clear()}async createWebSocket(t,r,n){var i,o;if(!(((i=Se._ws)==null?void 0:i.readyState)===WebSocket.OPEN||((o=Se._ws)==null?void 0:o.readyState)===WebSocket.CONNECTING)){console.warn("Creating new ws connection"),Se._ws=new WebSocket("wss://stream.binance.com:9443/ws");try{await this.waitForWebSocketToOpen(Se._ws),console.log("WebSocket connection established"),await this.subscribe(t,r,n)}catch(s){console.warn("Failed to establish Binance websocket connection: ",s)}}}async subscribe(t,r,n){var i,o,s,u;Se._ws==null&&await this.createWebSocket(t,r,n);const d=`${t.symbol.toLowerCase()}_${r.text}`;if(Se._subscribedSymbolsMap.set(d,(Se._subscribedSymbolsMap.get(d)??0)+1),console.log("Subscribed ",d," count: ",Se._subscribedSymbolsMap.get(d)),console.log("=== Active Subscriptions After Backend Subscribe ==="),this.debugChannels(),console.log("=== End Active Subscriptions ==="),Se._subscribedSymbolsMap.get(d)>1){console.log("No need to re-subscribe as we are already subscribed for ticker: ",t);return}try{const h=t.symbol.toLowerCase(),p=Wc(vr.CRYPTO,r),g=JSON.stringify({method:"SUBSCRIBE",params:[`${h}@kline_${p}`],id:1});((i=Se._ws)==null?void 0:i.readyState)===WebSocket.OPEN?(console.log("WebSocket is open, sending subscription message"),(o=Se._ws)==null||o.send(g)):((s=Se._ws)==null?void 0:s.readyState)===WebSocket.CONNECTING?(console.log("WebSocket is still connecting, waiting for connection to be established"),await this.waitForWebSocketToOpen(Se._ws),(u=Se._ws)==null||u.send(g)):await this.createWebSocket(t,r,n),console.log(`Subscribed to ${h}@kline_${p}`)}catch(h){console.error("Failed to subscribe to symbol: ",h),Se._subscribedSymbolsMap.set(d,(Se._subscribedSymbolsMap.get(d)??0)-1)}}getActiveSubscriptions(){return Se._subscribedSymbolListenersMap.size+Se._domListenersMap.size+Se._tradeListenersMap.size}subscribeTradeData(t,r,n){if(!(t!=null&&t.symbol)){console.warn("Invalid ticker for trade subscription");return}if(!n){console.warn("Invalid uuid for trade subscription");return}try{this.subscribeToTradeSymbol(t,n),this.addTradeListener(t,r,n)}catch(i){console.error("Failed to subscribe to trade data:",i)}}unsubscribeTradeData(t,r){if(!(t!=null&&t.symbol)||!r){console.warn("Invalid ticker or uuid for trade unsubscription");return}try{this.removeTradeListener(t.symbol,r)&&this.unsubscribeFromTradeSymbol(t.symbol)}catch(n){console.error("Failed to unsubscribe from trade data:",n)}}unSubscribeToSymbol(t,r){var n;const i=`${t.toLowerCase()}_${r.text}`;if(Se._subscribedSymbolsMap.set(i,(Se._subscribedSymbolsMap.get(i)??1)-1),console.log("Unsubscribed ",i," count: ",Se._subscribedSymbolsMap.get(i)),Se._subscribedSymbolsMap.get(i)>=1){console.log("No need to un-subscribe as another chart is using this interval");return}const o=t.toLowerCase(),s=Wc(vr.CRYPTO,r),u=JSON.stringify({method:"UNSUBSCRIBE",params:[`${o}@kline_${s}`],id:2});(n=Se._ws)==null||n.send(u),Se._subscribedSymbolsMap.delete(i),console.log(`Un subscribed to ${o}@kline_${s}`)}static checkAndCloseIfNoSubscriptions(){Se._subscribedSymbolListenersMap.size===0&&Se._domListenersMap.size===0&&Se._tradeListenersMap.size===0&&Se._ws!==void 0&&(console.log("Closing Binance websocket connection"),Se.closeWebsocket())}addListener(t,r,n,i){const o=`${t.symbol.toLowerCase()}_${r.text}_${i}`,s=u=>{const d=JSON.parse(u.data),h=d==null?void 0:d.k,p=Wc(vr.CRYPTO,r);if(h!=null&&h.s.toLowerCase()===t.symbol.toLowerCase()&&h.i===p){const g=d.k;n({timestamp:g.t,open:parseFloat(g.o),high:parseFloat(g.h),low:parseFloat(g.l),close:parseFloat(g.c),volume:parseFloat(g.v),turnover:parseFloat(g.q)},t)}};Se._ws.addEventListener("message",s),Se._subscribedSymbolListenersMap.set(o,s),console.log("Adding Listener for: ",o," count: ",Se._subscribedSymbolListenersMap.size),console.log("=== Active Subscriptions After Adding Listener ==="),this.debugChannels(),console.log("=== End Active Subscriptions ===")}removeListener(t,r,n){const i=`${t.toLowerCase()}_${r.text}_${n}`,o=Se._subscribedSymbolListenersMap.get(i);return o!=null?(console.log("Removing Listener for: ",i),Se._ws.removeEventListener("message",o),Se._subscribedSymbolListenersMap.delete(i),console.log("=== Active Subscriptions After Removing Listener ==="),this.debugChannels(),console.log("=== End Active Subscriptions ==="),!0):!1}async waitForWebSocketToOpen(t){await new Promise((r,n)=>{t.readyState===WebSocket.OPEN?(console.log("WebSocket is open"),r()):(t.onopen=()=>{console.log("WebSocket connection opened"),r()},t.onerror=i=>{n(i),console.error("Binance WebSocket error: ",i)})})}validateTickerPeriodUuid(t,r,n){switch(!0){case(t==null?void 0:t.symbol)==null:return console.warn("Invalid symbol: Symbol must have a valid ticker."),!1;case r==null:return console.warn("Invalid period: Period cannot be null or undefined."),!1;case n==null:console.warn("Invalid subscriberUID: Uuid cannot be null");default:return!0}}clearAllListeners(){console.log("BinanceDataFeed: Clearing all listeners"),Se._subscribedSymbolListenersMap.clear(),Se._subscribedSymbolsMap.clear(),Se._domListenersMap.clear(),Se._domSubscriptionsMap.clear(),Se._tradeListenersMap.clear(),Se._tradeSubscriptionsMap.clear()}unsubscribeAllForChart(t){console.log(`BinanceDataFeed: unsubscribeAllForChart called for chart ${t}`);const r=[];for(const[o,s]of Se._subscribedSymbolListenersMap.entries())o.endsWith(`_${t}`)&&r.push(o);for(const o of r){const s=o.split("_");if(s.length>=3){const u=s[0],d=s[1],h=s[2],p={text:d,multiplier:parseInt(d)||1,timespan:d.includes("m")?"minute":d.includes("h")?"hour":d.includes("d")?"day":"minute"};this.removeListener(u,p,h)&&this.unSubscribeToSymbol(u,p),console.log(`BinanceDataFeed: Properly cleaned up ticker subscription ${o}`)}else Se._subscribedSymbolListenersMap.delete(o),console.log(`BinanceDataFeed: Removed subscription ${o} (fallback cleanup)`)}const n=[];for(const[o,s]of Se._domListenersMap.entries())o.endsWith(`_${t}`)&&n.push(o);for(const o of n){const s=o.split("_");if(s.length>=3){const u=s[0];this.removeDOMListener(u,t)&&this.unsubscribeFromDOMSymbol(u),console.log(`BinanceDataFeed: Properly cleaned up DOM subscription ${o}`)}else Se._domListenersMap.delete(o),console.log(`BinanceDataFeed: Removed DOM subscription ${o} (fallback cleanup)`)}const i=[];for(const[o,s]of Se._tradeListenersMap.entries())o.endsWith(`_${t}`)&&i.push(o);for(const o of i){const s=o.split("_");if(s.length>=3){const u=s[0];this.removeTradeListener(u,t)&&this.unsubscribeFromTradeSymbol(u),console.log(`BinanceDataFeed: Properly cleaned up trade subscription ${o}`)}else Se._tradeListenersMap.delete(o),console.log(`BinanceDataFeed: Removed trade subscription ${o} (fallback cleanup)`)}Se.checkAndCloseIfNoSubscriptions(),console.log(`BinanceDataFeed: Cleaned up ${r.length} ticker subscriptions, ${n.length} DOM subscriptions, and ${i.length} trade subscriptions for chart ${t}`),this.debugChannels()}debugChannels(){var t,r,n;console.log("=== BinanceDataFeed Debug: Active Subscriptions ==="),console.log(`WebSocket Status: ${((t=Se._ws)==null?void 0:t.readyState)===WebSocket.OPEN?"OPEN":((r=Se._ws)==null?void 0:r.readyState)===WebSocket.CONNECTING?"CONNECTING":((n=Se._ws)==null?void 0:n.readyState)===WebSocket.CLOSED?"CLOSED":"UNDEFINED"}`),console.log("Ticker Subscriptions (Backend):");for(const[i,o]of Se._subscribedSymbolsMap.entries())console.log(`  ${i}: ${o} backend subscriptions`);console.log("Ticker Listeners (Frontend):");for(const[i,o]of Se._subscribedSymbolListenersMap.entries())console.log(`  ${i}: listener registered`);console.log("DOM Subscriptions (Backend):");for(const[i,o]of Se._domSubscriptionsMap.entries())console.log(`  ${i}: ${o} backend subscriptions`);console.log("DOM Listeners (Frontend):");for(const[i,o]of Se._domListenersMap.entries())console.log(`  ${i}: listener registered`);console.log("Trade Subscriptions (Backend):");for(const[i,o]of Se._tradeSubscriptionsMap.entries())console.log(`  ${i}: ${o} backend subscriptions`);console.log("Trade Listeners (Frontend):");for(const[i,o]of Se._tradeListenersMap.entries())console.log(`  ${i}: listener registered`);console.log(`Total Active Listeners: ${this.getActiveSubscriptions()}`),console.log("=== End Debug ===")}subscribeOrderBookData(t,r,n){if(!(t!=null&&t.symbol)){console.warn("Invalid ticker for DOM subscription");return}if(!n){console.warn("Invalid uuid for DOM subscription");return}try{this.subscribeToDOMSymbol(t,n),this.addDOMListener(t,r,n)}catch(i){console.error("Failed to subscribe to DOM data:",i)}}unsubscribeOrderBookData(t,r){if(!(t!=null&&t.symbol)||!r){console.warn("Invalid ticker or uuid for DOM unsubscription");return}try{this.removeDOMListener(t.symbol,r)&&this.unsubscribeFromDOMSymbol(t.symbol)}catch(n){console.error("Failed to unsubscribe from DOM data:",n)}}async subscribeToDOMSymbol(t,r){var n,i,o,s,u,d;if(((n=Se._ws)==null?void 0:n.readyState)!==WebSocket.OPEN&&((i=Se._ws)==null?void 0:i.readyState)!==WebSocket.CONNECTING){console.warn("Creating new ws connection for DOM"),Se._ws=new WebSocket("wss://stream.binance.com:9443/ws");try{await this.waitForWebSocketToOpen(Se._ws),console.log("WebSocket connection established for DOM")}catch(p){console.warn("Failed to establish Binance websocket connection for DOM: ",p);return}}const h=`${t.symbol.toLowerCase()}_dom`;if(Se._domSubscriptionsMap.set(h,(Se._domSubscriptionsMap.get(h)??0)+1),console.log("DOM Subscribed ",h," count: ",Se._domSubscriptionsMap.get(h)),Se._domSubscriptionsMap.get(h)>1){console.log("No need to re-subscribe to DOM as we are already subscribed for symbol: ",t);return}try{const p=t.symbol.toLowerCase(),g=JSON.stringify({method:"SUBSCRIBE",params:[`${p}@depth20@1000ms`],id:Date.now()});((o=Se._ws)==null?void 0:o.readyState)===WebSocket.OPEN?(console.log("WebSocket is open, sending DOM subscription message:",g),(s=Se._ws)==null||s.send(g)):((u=Se._ws)==null?void 0:u.readyState)===WebSocket.CONNECTING&&(console.log("WebSocket is still connecting, waiting for connection to be established for DOM"),await this.waitForWebSocketToOpen(Se._ws),(d=Se._ws)==null||d.send(g)),console.log(`Subscribed to DOM for ${p}@depth20@1000ms`)}catch(p){console.error("Failed to subscribe to DOM symbol: ",p),Se._domSubscriptionsMap.set(h,(Se._domSubscriptionsMap.get(h)??0)-1)}}unsubscribeFromDOMSymbol(t){var r;const n=`${t.toLowerCase()}_dom`;if(Se._domSubscriptionsMap.set(n,(Se._domSubscriptionsMap.get(n)??1)-1),console.log("DOM Unsubscribed ",n," count: ",Se._domSubscriptionsMap.get(n)),Se._domSubscriptionsMap.get(n)>=1){console.log("No need to un-subscribe from DOM as another component is using this symbol");return}const i=t.toLowerCase(),o=JSON.stringify({method:"UNSUBSCRIBE",params:[`${i}@depth20@1000ms`],id:Date.now()});(r=Se._ws)==null||r.send(o),Se._domSubscriptionsMap.delete(n),console.log(`Un subscribed from DOM for ${i}@depth20@1000ms`)}addDOMListener(t,r,n){const i=`${t.symbol.toLowerCase()}_dom_${n}`,o=s=>{try{const u=JSON.parse(s.data);if(u.stream&&u.stream.includes(t.symbol.toLowerCase()),u.stream&&u.stream.includes("@depth20@")){const d=u.data,h={bids:d.bids||[],asks:d.asks||[],timestamp:d.lastUpdateId||Date.now()};r(h,t)}else if(u.e==="depthUpdate"&&u.s&&u.s.toLowerCase()===t.symbol.toLowerCase()){const d=u,h={bids:d.b||[],asks:d.a||[],timestamp:d.E};r(h,t)}else if(u.bids&&u.asks&&!u.e){const d={bids:u.bids||[],asks:u.asks||[],timestamp:Date.now()};r(d,t)}}catch(u){console.error("Error parsing DOM data:",u)}};Se._ws.addEventListener("message",o),Se._domListenersMap.set(i,o),console.log("Adding DOM Listener for: ",i," count: ",Se._domListenersMap.size)}removeDOMListener(t,r){const n=`${t.toLowerCase()}_dom_${r}`,i=Se._domListenersMap.get(n);return i!=null?(console.log("Removing DOM Listener for: ",n),Se._ws.removeEventListener("message",i),Se._domListenersMap.delete(n),!0):!1}async subscribeToTradeSymbol(t,r){var n,i,o,s,u,d;if(((n=Se._ws)==null?void 0:n.readyState)!==WebSocket.OPEN&&((i=Se._ws)==null?void 0:i.readyState)!==WebSocket.CONNECTING){console.warn("Creating new ws connection for trades"),Se._ws=new WebSocket("wss://stream.binance.com:9443/ws");try{await this.waitForWebSocketToOpen(Se._ws),console.log("WebSocket connection established for trades")}catch(p){console.warn("Failed to establish Binance websocket connection for trades: ",p);return}}const h=`${t.symbol.toLowerCase()}_trades`;if(Se._tradeSubscriptionsMap.set(h,(Se._tradeSubscriptionsMap.get(h)??0)+1),console.log("Trade Subscribed ",h," count: ",Se._tradeSubscriptionsMap.get(h)),Se._tradeSubscriptionsMap.get(h)>1){console.log("No need to re-subscribe to trades as we are already subscribed for symbol: ",t);return}try{const p=t.symbol.toLowerCase(),g=JSON.stringify({method:"SUBSCRIBE",params:[`${p}@trade`],id:Date.now()});((o=Se._ws)==null?void 0:o.readyState)===WebSocket.OPEN?(console.log("WebSocket is open, sending trade subscription message:",g),(s=Se._ws)==null||s.send(g)):((u=Se._ws)==null?void 0:u.readyState)===WebSocket.CONNECTING&&(console.log("WebSocket is still connecting, waiting for connection to be established for trades"),await this.waitForWebSocketToOpen(Se._ws),(d=Se._ws)==null||d.send(g)),console.log(`Subscribed to trades for ${p}@trade`)}catch(p){console.error("Failed to subscribe to trade symbol: ",p),Se._tradeSubscriptionsMap.set(h,(Se._tradeSubscriptionsMap.get(h)??0)-1)}}unsubscribeFromTradeSymbol(t){var r;const n=`${t.toLowerCase()}_trades`;if(Se._tradeSubscriptionsMap.set(n,(Se._tradeSubscriptionsMap.get(n)??1)-1),console.log("Trade Unsubscribed ",n," count: ",Se._tradeSubscriptionsMap.get(n)),Se._tradeSubscriptionsMap.get(n)>=1){console.log("No need to un-subscribe from trades as another component is using this symbol");return}const i=t.toLowerCase(),o=JSON.stringify({method:"UNSUBSCRIBE",params:[`${i}@trade`],id:Date.now()});(r=Se._ws)==null||r.send(o),Se._tradeSubscriptionsMap.delete(n),console.log(`Un subscribed from trades for ${i}@trade`)}addTradeListener(t,r,n){const i=`${t.symbol.toLowerCase()}_trades_${n}`,o=s=>{try{const u=JSON.parse(s.data);if(u.e==="trade"&&u.s&&u.s.toLowerCase()===t.symbol.toLowerCase()){console.log("Trade: Processing trade data for",u.s);const d=u,h={trades:[{id:String(d.t),price:d.p,quantity:d.q,timestamp:d.T,side:d.m?"sell":"buy"}],symbol:t.symbol,exchange:t.exchange||"binance",lastUpdated:d.T};console.log("Trade: Calling callback with trade data:",h),r(h,t)}}catch(u){console.error("Error parsing trade data:",u)}};Se._ws.addEventListener("message",o),Se._tradeListenersMap.set(i,o),console.log("Adding Trade Listener for: ",i," count: ",Se._tradeListenersMap.size)}removeTradeListener(t,r){const n=`${t.toLowerCase()}_trades_${r}`,i=Se._tradeListenersMap.get(n);return i!=null?(console.log("Removing Trade Listener for: ",n),Se._ws.removeEventListener("message",i),Se._tradeListenersMap.delete(n),!0):!1}};xe(El,"_ws"),xe(El,"_subscribedSymbolListenersMap",new Map),xe(El,"_subscribedSymbolsMap",new Map),xe(El,"_domListenersMap",new Map),xe(El,"_domSubscriptionsMap",new Map),xe(El,"_tradeListenersMap",new Map),xe(El,"_tradeSubscriptionsMap",new Map);let q5=El;async function qU(e,t,r,n){let i=`https://api.binance.com/api/v3/klines?symbol=${e}&interval=${t}&limit=${r}`;return n!=null&&(i+=`&endTime=${n}`),await(await fetch(i)).json()}const kd={baseUrl:"http://localhost:3000",endpoints:{search:"",historical:"",websocket:"",orderBook:"",price:""},headers:{"Content-Type":"application/json"},websocket:{enabled:!0,reconnectInterval:5e3,maxReconnectAttempts:3}};class JU{constructor(t){xe(this,"config"),xe(this,"websocket",null),xe(this,"reconnectAttempts",0),xe(this,"clientId"),xe(this,"channelSubscriptions",new Map),xe(this,"subscriberCallbacks",new Map),xe(this,"orderBookCallbacks",new Map),xe(this,"pendingOrderBookSubscriptions",new Set),xe(this,"tradeCallbacks",new Map),xe(this,"pendingTradeSubscriptions",new Set);var r,n,i,o,s,u;this.config={...kd,...t,endpoints:{...kd.endpoints,...t==null?void 0:t.endpoints},headers:{...kd.headers,...t==null?void 0:t.headers},websocket:{enabled:((r=t==null?void 0:t.websocket)==null?void 0:r.enabled)??((n=kd.websocket)==null?void 0:n.enabled)??!0,reconnectInterval:((i=t==null?void 0:t.websocket)==null?void 0:i.reconnectInterval)??((o=kd.websocket)==null?void 0:o.reconnectInterval)??5e3,maxReconnectAttempts:((s=t==null?void 0:t.websocket)==null?void 0:s.maxReconnectAttempts)??((u=kd.websocket)==null?void 0:u.maxReconnectAttempts)??3}},this.clientId=this.generateClientId()}generateClientId(){const t=Date.now(),r=Math.random().toString(36).substr(2,9);return`client_${t}_${r}`}async searchSymbols(t,r){(!t||t==="")&&(t=r===vr.CRYPTO?"BTC":"AAPL");const n=this.getTypeIdentifier(r),i=`${this.config.baseUrl}/${this.config.endpoints.search}/${n}?symbol=${encodeURIComponent(t)}`;try{console.log(`UnifiedDataFeed: Searching for ${t} in market-data/${n}`);const o=await fetch(i,{method:"GET",headers:this.config.headers});if(!o.ok)return console.error(`UnifiedDataFeed: Search request failed with status ${o.status}`),[];const s=await o.json();return!(s!=null&&s.data)||!Array.isArray(s.data)?(console.warn("UnifiedDataFeed: No data received from search API"),[]):(console.log(`UnifiedDataFeed: Found ${s.data.length} results for ${t}`),s.data.map(u=>this.transformSearchResult(u,r)))}catch(o){return console.error("UnifiedDataFeed: Error fetching search data:",o),[]}}async getHistoricalTimeSeries(t,r,n,i,o){console.warn("UnifiedDataFeed: getHistoricalTimeSeries called");const s=t.type,u=this.getTypeIdentifier(s),d=Wc(s,r);console.log("tickerType",s,"mapped to",u);const h=`${this.config.baseUrl}/${this.config.endpoints.historical}/${u}?symbol=${encodeURIComponent(t.symbol)}&interval=${encodeURIComponent(d)}&from=${n}&to=${i}`;console.log("UnifiedDataFeed: Fetching historical data for ",h);try{console.log(`UnifiedDataFeed: Fetching historical data for ${t.symbol} (market-data/${s})`);const p=await fetch(h,{method:"GET",headers:this.config.headers});if(!p.ok)return console.error(`UnifiedDataFeed: Historical data request failed with status ${p.status}`),[];const g=await p.json();return!(g!=null&&g.values)||!Array.isArray(g.values)?(console.warn("UnifiedDataFeed: No historical data received"),[]):g.values.map(m=>this.transformHistoricalData(m))}catch(p){return console.error("UnifiedDataFeed: Error fetching historical data:",p),[]}}async getPrice(t,r){console.warn("UnifiedDataFeed: getPrice called");const n=r||t.type,i=this.getTypeIdentifier(n),o=this.config.endpoints.price||"price",s=`${this.config.baseUrl}/${o}/${i}?symbol=${encodeURIComponent(t.symbol)}`;try{console.log(`UnifiedDataFeed: Fetching current price for ${t.symbol} on ${t.exchange||"default"} (market-data/${i})`);const u=await fetch(s,{method:"GET",headers:this.config.headers});if(!u.ok)return console.error(`UnifiedDataFeed: Price request failed with status ${u.status}`),null;const d=await u.json();if(typeof d=="number")return d;if((d==null?void 0:d.price)!==void 0)return Number(d.price);if((d==null?void 0:d.close)!==void 0)return Number(d.close);if(d!=null&&d.values&&Array.isArray(d.values)&&d.values.length>0){const h=d.values[d.values.length-1];return Number(h.close||h.c)}return console.warn("UnifiedDataFeed: No price data found in response"),null}catch(u){return console.error("UnifiedDataFeed: Error fetching price data:",u),null}}async getOrderBook(t,r){console.warn("UnifiedDataFeed: getOrderBook called");const n=r||t.type,i=this.getTypeIdentifier(n),o=`${this.config.baseUrl}${this.config.endpoints.orderBook}/${i}?symbol=${encodeURIComponent(t.symbol)}`;try{console.log(`UnifiedDataFeed: Fetching order book for ${t.symbol} (market-data/${i})`);const s=await fetch(o,{method:"GET",headers:this.config.headers});if(!s.ok)return console.error(`UnifiedDataFeed: Order book request failed with status ${s.status}`),null;const u=await s.json();return!(u!=null&&u.bids)||!(u!=null&&u.asks)?(console.warn("UnifiedDataFeed: No order book data received"),null):(console.log(`UnifiedDataFeed: Received order book data for ${t.symbol}`),{bids:u.bids,asks:u.asks,timestamp:u.timestamp})}catch(s){return console.error("UnifiedDataFeed: Error fetching order book data:",s),null}}subscribeSymbol(t,r,n,i){console.warn("UnifiedDataFeed: subscribeTicker called (channel-based)");const o=(t.exchange||"default").toLowerCase(),s=`${t.symbol}_${o}_${r.multiplier}${r.timespan}`,u=i||`${t.symbol}_${Date.now()}`;console.log(`UnifiedDataFeed: Subscribing to channel ${s} with handler ${u}`),this.subscriberCallbacks.set(u,n);let d=this.channelSubscriptions.get(s);if(d){if(d.handlers.find(h=>h.id===u)){console.warn(`UnifiedDataFeed: Handler ${u} already exists in channel ${s}, skipping duplicate`);return}d.handlers.push({id:u,callback:n}),console.log(`UnifiedDataFeed: Added handler ${u} to existing channel ${s}`),console.log(`UnifiedDataFeed: Channel ${s} now has ${d.handlers.length} handlers:`,d.handlers.map(h=>h.id))}else d={symbol:t.symbol,period:r,ticker:{...t},handlers:[{id:u,callback:n}]},this.channelSubscriptions.set(s,d),this.createBackendSubscription(t,r,s),console.log(`UnifiedDataFeed: Created new channel ${s} with handler ${u}`);this.debugChannels()}unsubscribeSymbol(t,r,n){console.warn("UnifiedDataFeed: unsubscribeTicker called (channel-based)");const i=(t.exchange||"default").toLowerCase(),o=`${t.symbol}_${i}_${r.multiplier}${r.timespan}`,s=n||`${t.symbol}_${Date.now()}`;console.log(`UnifiedDataFeed: Unsubscribing handler ${s} from channel ${o}`),this.subscriberCallbacks.delete(s);const u=this.channelSubscriptions.get(o);if(!u){console.warn(`UnifiedDataFeed: Channel ${o} not found for unsubscription`);return}console.log(`UnifiedDataFeed: Channel ${o} has ${u.handlers.length} handlers before removal:`,u.handlers.map(h=>h.id));const d=u.handlers.findIndex(h=>h.id===s);d!==-1?(u.handlers.splice(d,1),console.log(`UnifiedDataFeed: Removed handler ${s} from channel ${o}`)):console.warn(`UnifiedDataFeed: Handler ${s} not found in channel ${o}`),console.log(`UnifiedDataFeed: Channel ${o} has ${u.handlers.length} handlers after removal:`,u.handlers.map(h=>h.id)),u.handlers.length===0&&(console.log(`UnifiedDataFeed: No more handlers for channel ${o}, removing backend subscription`),this.removeBackendSubscription(u.backendSubscriptionId,t,r),this.channelSubscriptions.delete(o)),this.debugChannels()}unsubscribeAllForChart(t){console.log(`UnifiedDataFeed: unsubscribeAllForChart called for chart ${t}`);let r=0;const n=[];for(const[i,o]of this.channelSubscriptions.entries()){const s=o.handlers.findIndex(u=>u.id===t);s!==-1&&(console.log(`UnifiedDataFeed: Found chart ${t} in channel ${i}`),o.handlers.splice(s,1),r++,o.handlers.length===0?(console.log(`UnifiedDataFeed: Channel ${i} has no more handlers, marking for removal`),n.push(i)):console.log(`UnifiedDataFeed: Channel ${i} still has ${o.handlers.length} handlers:`,o.handlers.map(u=>u.id)))}for(const i of n){const o=this.channelSubscriptions.get(i);if(o){console.log(`UnifiedDataFeed: Removing backend subscription for channel ${i}`);const s=i.split("_");if(s.length>=3){const u=s[0],d=s[1];s.slice(2).join("_");const h={symbol:u,exchange:d,type:vr.CRYPTO},p={multiplier:1,timespan:"minute",text:"1m"};this.removeBackendSubscription(o.backendSubscriptionId,h,p)}this.channelSubscriptions.delete(i)}}console.log(`UnifiedDataFeed: Removed chart ${t} from ${r} channels, cleaned up ${n.length} empty channels`),this.debugChannels()}subscribeOrderBookData(t,r,n){var i;if(console.warn("UnifiedDataFeed: subscribeOrderBookData called"),!((i=this.config.websocket)!=null&&i.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping order book subscription for:",t.symbol);return}const o=t.type,s=(t.exchange||"default").toLowerCase(),u=`${t.symbol}_${s}_orderbook`,d=`${t.symbol}_orderbook_${n}`;if(console.log(`UnifiedDataFeed: Subscribing to order book for ${t.symbol}`),this.pendingOrderBookSubscriptions.has(d)){console.log("UnifiedDataFeed: Order book subscription already pending, skipping duplicate");return}this.orderBookCallbacks.set(d,r);const h={event:"subscribe",data:{type:this.getTypeIdentifier(o),symbol:t.symbol,dataType:"orderbook",subscriptionId:u,uuid:n,exchange:s,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending order book subscription message:",h),this.sendWebSocketMessage(h)||(console.error("UnifiedDataFeed: WebSocket not available for order book, retrying in 1 second"),this.pendingOrderBookSubscriptions.add(d),setTimeout(()=>{console.log("UnifiedDataFeed: Retrying order book subscription after delay"),this.pendingOrderBookSubscriptions.delete(d),this.subscribeOrderBookData(t,r,n)},1e3))}unsubscribeOrderBookData(t,r){var n;if(console.warn("UnifiedDataFeed: unsubscribeOrderBookData called"),!((n=this.config.websocket)!=null&&n.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping order book unsubscription for:",t.symbol);return}const i=t.type,o=(t.exchange||"default").toLowerCase(),s=`${t.symbol}_${o}_orderbook`,u=`${t.symbol}_orderbook_${r}`;console.log(`UnifiedDataFeed: Unsubscribing from order book for ${t.symbol}`),this.orderBookCallbacks.delete(u);const d={event:"unsubscribe",data:{subscriptionId:s,type:this.getTypeIdentifier(i),symbol:t.symbol,dataType:"orderbook",uuid:r,exchange:o,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending order book unsubscription message:",d),this.sendWebSocketMessage(d)}subscribeTradeData(t,r,n){var i;if(console.warn("UnifiedDataFeed: subscribeTradeData called"),!((i=this.config.websocket)!=null&&i.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping trade subscription for:",t.symbol);return}const o=t.type,s=(t.exchange||"default").toLowerCase(),u=`${t.symbol}_${s}_trades`,d=`${t.symbol}_trades_${n}`;if(console.log(`UnifiedDataFeed: Subscribing to trades for ${t.symbol}`),this.pendingTradeSubscriptions.has(d)){console.log("UnifiedDataFeed: Trade subscription already pending, skipping duplicate");return}this.tradeCallbacks.set(d,r);const h={event:"subscribe",data:{type:this.getTypeIdentifier(o),symbol:t.symbol,dataType:"trades",subscriptionId:u,uuid:n,exchange:s,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending trade subscription message:",h),this.sendWebSocketMessage(h)||(console.error("UnifiedDataFeed: WebSocket not available for trades, retrying in 1 second"),this.pendingTradeSubscriptions.add(d),setTimeout(()=>{console.log("UnifiedDataFeed: Retrying trade subscription after delay"),this.pendingTradeSubscriptions.delete(d),this.subscribeTradeData(t,r,n)},1e3))}unsubscribeTradeData(t,r){var n;if(console.warn("UnifiedDataFeed: unsubscribeTradeData called"),!((n=this.config.websocket)!=null&&n.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping trade unsubscription for:",t.symbol);return}const i=t.type,o=(t.exchange||"default").toLowerCase(),s=`${t.symbol}_${o}_trades`,u=`${t.symbol}_trades_${r}`;console.log(`UnifiedDataFeed: Unsubscribing from trades for ${t.symbol}`),this.tradeCallbacks.delete(u);const d={event:"unsubscribe",data:{subscriptionId:s,type:this.getTypeIdentifier(i),symbol:t.symbol,dataType:"trades",uuid:r,exchange:o,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending trade unsubscription message:",d),this.sendWebSocketMessage(d)}closeWebsocket(){console.warn("UnifiedDataFeed: closeWebsocket called"),console.log("UnifiedDataFeed: Closing WebSocket connection"),this.websocket&&((this.websocket.readyState===WebSocket.OPEN||this.websocket.readyState===WebSocket.CONNECTING)&&this.websocket.close(),this.websocket=null),this.reconnectAttempts=0,this.orderBookCallbacks.clear(),this.pendingOrderBookSubscriptions.clear(),this.tradeCallbacks.clear(),this.pendingTradeSubscriptions.clear(),this.channelSubscriptions.clear(),this.subscriberCallbacks.clear()}clearAllListeners(){console.warn("UnifiedDataFeed: clearAllListeners called"),console.log("UnifiedDataFeed: Clearing all listeners"),this.closeWebsocket()}debugChannels(){console.log("=== UnifiedDataFeed Debug: Active Channels ===");for(const[t,r]of this.channelSubscriptions.entries())console.log(`Channel: ${t}`),console.log(`  Handlers (${r.handlers.length}):`,r.handlers.map(n=>n.id)),console.log(`  Backend Subscription ID: ${r.backendSubscriptionId}`);console.log("=== End Debug ===")}getActiveSubscriptions(){return console.log("UnifiedDataFeed: Active subscriptions:",this.channelSubscriptions.size+this.orderBookCallbacks.size),this.channelSubscriptions.size+this.orderBookCallbacks.size}sendWebSocketMessage(t){const r=this.getOrCreateWebSocket();if(r&&r.readyState===WebSocket.OPEN)return r.send(JSON.stringify(t)),!0;if(r&&r.readyState===WebSocket.CONNECTING){const n=()=>{r.send(JSON.stringify(t)),r.removeEventListener("open",n)};return r.addEventListener("open",n),!0}return!1}getOrCreateWebSocket(){var t;if(!((t=this.config.websocket)!=null&&t.enabled))return null;if(!this.websocket||this.websocket.readyState===WebSocket.CLOSED||this.websocket.readyState===WebSocket.CLOSING)try{const r=`${this.config.baseUrl.replace("http","ws")}/${this.config.endpoints.websocket||"/websocket"}`;this.websocket=new WebSocket(r),this.websocket.onopen=()=>{this.reconnectAttempts=0},this.websocket.onmessage=n=>{this.handleWebSocketMessage(n)},this.websocket.onerror=n=>{console.error("UnifiedDataFeed: WebSocket error:",n)},this.websocket.onclose=n=>{console.warn("UnifiedDataFeed: WebSocket closed with code:",n.code,"reason:",n.reason),this.handleWebSocketReconnect()}}catch(r){return console.error("UnifiedDataFeed: Failed to create WebSocket:",r),null}return this.websocket}handleWebSocketMessage(t){try{const r=JSON.parse(t.data);if(r.event){const n=r;switch(n.event){case"subscribed":case"subscription_acknowledged":this.handleSubscriptionResponse(n);break;case"unsubscribed":case"unsubscription_acknowledged":this.handleUnsubscriptionResponse(n);break;case"subscription_error":case"unsubscription_error":case"error":this.handleErrorMessage(n);break;case"market_data":this.handleMarketDataMessage(n);break;case"connected":case"disconnected":this.handleConnectionMessage(n);break;case"pong":break;default:console.log("UnifiedDataFeed: Unknown event type:",n.event),this.handleMarketData(r)}}else this.handleMarketData(r)}catch(r){console.error("UnifiedDataFeed: Error parsing WebSocket message:",r)}}handleSubscriptionResponse(t){var r;console.log(`UnifiedDataFeed: ${t.event} for ${(r=t.data)==null?void 0:r.symbol}`)}handleUnsubscriptionResponse(t){var r;console.log(`UnifiedDataFeed: ${t.event} for ${(r=t.data)==null?void 0:r.symbol}`)}handleErrorMessage(t){var r;console.error(`UnifiedDataFeed: ${t.event}:`,(r=t.data)==null?void 0:r.error)}handleMarketDataMessage(t){this.handleMarketData(t.data)}handleConnectionMessage(t){console.log(`UnifiedDataFeed: ${t.event}`)}handleMarketData(t){if(!t)return;const r=t.type||"kline",n=t.exchange||"crypto",i=t.symbol,o=t.data||t;if(r==="kline"||o.e==="kline"&&o.k){const s=o.k||o,u=(i||s.s).toLowerCase(),d=n;for(const[h,p]of this.channelSubscriptions.entries()){const[g,m]=h.split("_");if(g.toLowerCase()===u&&(m===d||m==="default")){const b={timestamp:s.timestamp||s.t,open:parseFloat(s.open||s.o),high:parseFloat(s.high||s.h),low:parseFloat(s.low||s.l),close:parseFloat(s.close||s.c),volume:parseFloat(s.volume||s.v),turnover:parseFloat(s.turnover||s.q)};p.handlers.forEach(x=>{x.callback(b,p.ticker)})}}}else if(r==="orderbook"){const s=i.toLowerCase(),u={bids:o.bids||[],asks:o.asks||[],timestamp:o.timestamp||Date.now()};for(const[d,h]of this.orderBookCallbacks.entries()){const[p]=d.split("_");p.toLowerCase()===s&&h(u)}}else if(r==="trades"){const s=i.toLowerCase(),u=n;let d;o.trades&&Array.isArray(o.trades)?d=o.trades:d=[{id:o.tradeId||String(o.timestamp||Date.now()),price:String(o.price||0),quantity:String(o.quantity||0),timestamp:o.timestamp||Date.now(),side:o.side||"buy",tradeType:o.tradeType}];const h={trades:d,symbol:i,exchange:u,lastUpdated:o.timestamp||Date.now()};for(const[p,g]of this.tradeCallbacks.entries()){const[m]=p.split("_");m.toLowerCase()===s&&g(h)}}}handleWebSocketReconnect(){var t,r;const n=((t=this.config.websocket)==null?void 0:t.maxReconnectAttempts)||3;if(this.reconnectAttempts<n){const i=((r=this.config.websocket)==null?void 0:r.reconnectInterval)||5e3;setTimeout(()=>{console.log(`UnifiedDataFeed: Attempting to reconnect WebSocket (attempt ${this.reconnectAttempts+1})`),this.reconnectAttempts+=1,this.getOrCreateWebSocket()},i)}else console.error("UnifiedDataFeed: Max reconnection attempts reached, clearing pending subscriptions"),this.pendingOrderBookSubscriptions.clear()}getTypeIdentifier(t){switch(t){case vr.STOCKS:return"stocks";case vr.CRYPTO:return"crypto";case vr.FOREX:return"forex";case vr.FUTURES:return"futures";case"all":return"all";default:return"all"}}createBackendSubscription(t,r,n){var i;if(!((i=this.config.websocket)!=null&&i.enabled)){console.log("UnifiedDataFeed: WebSocket disabled, skipping backend subscription for channel:",n);return}const o=n,s={event:"subscribe",data:{type:this.getTypeIdentifier(t.type),symbol:t.symbol,dataType:"kline",interval:Wc(t.type,r),subscriptionId:o,exchange:(t.exchange||"default").toLowerCase(),clientId:this.clientId}};if(console.log("UnifiedDataFeed: Sending backend subscription:",s),this.sendWebSocketMessage(s)){const u=this.channelSubscriptions.get(n);u&&(u.backendSubscriptionId=o)}else console.error("UnifiedDataFeed: WebSocket not available for backend subscription, retrying in 1 second"),setTimeout(()=>{console.log("UnifiedDataFeed: Retrying backend subscription after delay"),this.createBackendSubscription(t,r,n)},1e3)}removeBackendSubscription(t,r,n){if(!t)return;const i=(r.exchange||"default").toLowerCase(),o={event:"unsubscribe",data:{subscriptionId:t,type:this.getTypeIdentifier(r.type),symbol:r.symbol,dataType:"kline",interval:Wc(r.type,n),exchange:i,clientId:this.clientId}};console.log("UnifiedDataFeed: Sending backend unsubscription:",o),this.sendWebSocketMessage(o)}transformSearchResult(t,r){const n=t.type||r;return{symbol:t.symbol,name:t.name,shortName:t.shortName||t.symbol,exchange:t.exchange,market:t.market||this.getMarketFromType(n),type:n||"UNKNOWN",pricePrecision:t.pricePrecision||this.getDefaultPrecision(n,"price"),volumePrecision:t.volumePrecision||this.getDefaultPrecision(n,"volume"),priceCurrency:t.priceCurrency,logo:t.logo}}transformHistoricalData(t){return{timestamp:new Date(t.datetime||t.timestamp).getTime(),open:parseFloat(t.open),high:parseFloat(t.high),low:parseFloat(t.low),close:parseFloat(t.close),volume:parseFloat(t.volume||0)}}getMarketFromType(t){switch(t){case vr.STOCKS:return"Stock";case vr.CRYPTO:return"Cryptocurrency";case vr.FOREX:return"Foreign Exchange";case vr.FUTURES:return"Futures";default:return"Unknown"}}getDefaultPrecision(t,r){if(r==="volume")return 0;switch(t){case vr.CRYPTO:return 6;case vr.FOREX:return 5;case vr.STOCKS:case vr.FUTURES:default:return 2}}}qg.forEach(e=>{Wy(e)});Ik.forEach(e=>{U8(e)});const eH=()=>{const e=E0.useRef(null),t=E0.useRef(null);return E0.useEffect(()=>{if(e.current){const r={container:e.current,rootContainer:e.current,locale:"en-US",setTheme:()=>{},symbol:{exchange:"binance",market:"Crypto",name:"Bitcoin",shortName:"BTCUSDT",symbol:"BTCUSDT",priceCurrency:"usd",type:vr.CRYPTO},interval:{multiplier:1,timespan:"week",text:"W"},watchListEnabled:!0,watchListUseExternalStorage:!1,defaultDataFeed:new q5,layoutUseExternalStorage:!1,layoutLimit:10,paperTradingEnabled:!0,paperTradingUseExternalStorage:!1,paperTradingPriceTrackingInterval:3e4,paperTradingMaxTrades:100,multiChartLimit:16,themeUseExternalStorage:!1,orderBookEnabled:!0,enabledSymbolTypes:[vr.CRYPTO],tradesEnabled:!0};t.current=new DU(r)}return()=>{t.current&&(console.warn("chartRef.current.destroy() called in ChartSpireReact.tsx useEffect cleanup function"),t.current.destroy(),t.current=null)}},[]),Ml.jsx("div",{id:"container",ref:e})},Ay={statusBar:{backgroundColor:"#ff6b6b",color:"white",padding:"8px 16px",textAlign:"center",fontWeight:"bold",fontSize:"14px",position:"absolute",top:0,left:0,right:0,zIndex:1000020,width:"100%",boxSizing:"border-box"},closeButton:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"18px",padding:"2px 6px"}};function tH(){const[e,t]=E0.useState(!0);return Ml.jsxs(Ml.Fragment,{children:[e&&Ml.jsxs("div",{style:Ay.statusBar,children:[" Alpha v1.0.0-alpha14: Data from Binance API. This is a pre-release version for testing purposes only.",Ml.jsx("button",{style:Ay.closeButton,onClick:()=>t(!1),title:"Hide status bar",children:""})]}),Ml.jsx(eH,{})]})}L6.createRoot(document.getElementById("root")).render(Ml.jsx(E0.StrictMode,{children:Ml.jsx(tH,{})}));
