(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Gf={exports:{}},x0={},Jf={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am;function P6(){if(am)return $t;am=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function m(j){return j===null||typeof j!="object"?null:(j=g&&j[g]||j["@@iterator"],typeof j=="function"?j:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function _(j,H,de){this.props=j,this.context=H,this.refs=C,this.updater=de||b}_.prototype.isReactComponent={},_.prototype.setState=function(j,H){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,H,"setState")},_.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function k(){}k.prototype=_.prototype;function M(j,H,de){this.props=j,this.context=H,this.refs=C,this.updater=de||b}var L=M.prototype=new k;L.constructor=M,x(L,_.prototype),L.isPureReactComponent=!0;var D=Array.isArray,P=Object.prototype.hasOwnProperty,$={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function N(j,H,de){var U,fe={},ce=null,Oe=null;if(H!=null)for(U in H.ref!==void 0&&(Oe=H.ref),H.key!==void 0&&(ce=""+H.key),H)P.call(H,U)&&!A.hasOwnProperty(U)&&(fe[U]=H[U]);var Ee=arguments.length-2;if(Ee===1)fe.children=de;else if(1<Ee){for(var Fe=Array(Ee),Ce=0;Ce<Ee;Ce++)Fe[Ce]=arguments[Ce+2];fe.children=Fe}if(j&&j.defaultProps)for(U in Ee=j.defaultProps,Ee)fe[U]===void 0&&(fe[U]=Ee[U]);return{$$typeof:e,type:j,key:ce,ref:Oe,props:fe,_owner:$.current}}function z(j,H){return{$$typeof:e,type:j.type,key:H,ref:j.ref,props:j.props,_owner:j._owner}}function B(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function Q(j){var H={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(de){return H[de]})}var ne=/\/+/g;function Z(j,H){return typeof j=="object"&&j!==null&&j.key!=null?Q(""+j.key):H.toString(36)}function J(j,H,de,U,fe){var ce=typeof j;(ce==="undefined"||ce==="boolean")&&(j=null);var Oe=!1;if(j===null)Oe=!0;else switch(ce){case"string":case"number":Oe=!0;break;case"object":switch(j.$$typeof){case e:case t:Oe=!0}}if(Oe)return Oe=j,fe=fe(Oe),j=U===""?"."+Z(Oe,0):U,D(fe)?(de="",j!=null&&(de=j.replace(ne,"$&/")+"/"),J(fe,H,de,"",function(Ce){return Ce})):fe!=null&&(B(fe)&&(fe=z(fe,de+(!fe.key||Oe&&Oe.key===fe.key?"":(""+fe.key).replace(ne,"$&/")+"/")+j)),H.push(fe)),1;if(Oe=0,U=U===""?".":U+":",D(j))for(var Ee=0;Ee<j.length;Ee++){ce=j[Ee];var Fe=U+Z(ce,Ee);Oe+=J(ce,H,de,Fe,fe)}else if(Fe=m(j),typeof Fe=="function")for(j=Fe.call(j),Ee=0;!(ce=j.next()).done;)ce=ce.value,Fe=U+Z(ce,Ee++),Oe+=J(ce,H,de,Fe,fe);else if(ce==="object")throw H=String(j),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Oe}function ue(j,H,de){if(j==null)return j;var U=[],fe=0;return J(j,U,"","",function(ce){return H.call(de,ce,fe++)}),U}function le(j){if(j._status===-1){var H=j._result;H=H(),H.then(function(de){(j._status===0||j._status===-1)&&(j._status=1,j._result=de)},function(de){(j._status===0||j._status===-1)&&(j._status=2,j._result=de)}),j._status===-1&&(j._status=0,j._result=H)}if(j._status===1)return j._result.default;throw j._result}var ae={current:null},te={transition:null},ve={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:te,ReactCurrentOwner:$};function pe(){throw Error("act(...) is not supported in production builds of React.")}return $t.Children={map:ue,forEach:function(j,H,de){ue(j,function(){H.apply(this,arguments)},de)},count:function(j){var H=0;return ue(j,function(){H++}),H},toArray:function(j){return ue(j,function(H){return H})||[]},only:function(j){if(!B(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},$t.Component=_,$t.Fragment=r,$t.Profiler=i,$t.PureComponent=M,$t.StrictMode=n,$t.Suspense=c,$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,$t.act=pe,$t.cloneElement=function(j,H,de){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var U=x({},j.props),fe=j.key,ce=j.ref,Oe=j._owner;if(H!=null){if(H.ref!==void 0&&(ce=H.ref,Oe=$.current),H.key!==void 0&&(fe=""+H.key),j.type&&j.type.defaultProps)var Ee=j.type.defaultProps;for(Fe in H)P.call(H,Fe)&&!A.hasOwnProperty(Fe)&&(U[Fe]=H[Fe]===void 0&&Ee!==void 0?Ee[Fe]:H[Fe])}var Fe=arguments.length-2;if(Fe===1)U.children=de;else if(1<Fe){Ee=Array(Fe);for(var Ce=0;Ce<Fe;Ce++)Ee[Ce]=arguments[Ce+2];U.children=Ee}return{$$typeof:e,type:j.type,key:fe,ref:ce,props:U,_owner:Oe}},$t.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:o,_context:j},j.Consumer=j},$t.createElement=N,$t.createFactory=function(j){var H=N.bind(null,j);return H.type=j,H},$t.createRef=function(){return{current:null}},$t.forwardRef=function(j){return{$$typeof:u,render:j}},$t.isValidElement=B,$t.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:le}},$t.memo=function(j,H){return{$$typeof:h,type:j,compare:H===void 0?null:H}},$t.startTransition=function(j){var H=te.transition;te.transition={};try{j()}finally{te.transition=H}},$t.unstable_act=pe,$t.useCallback=function(j,H){return ae.current.useCallback(j,H)},$t.useContext=function(j){return ae.current.useContext(j)},$t.useDebugValue=function(){},$t.useDeferredValue=function(j){return ae.current.useDeferredValue(j)},$t.useEffect=function(j,H){return ae.current.useEffect(j,H)},$t.useId=function(){return ae.current.useId()},$t.useImperativeHandle=function(j,H,de){return ae.current.useImperativeHandle(j,H,de)},$t.useInsertionEffect=function(j,H){return ae.current.useInsertionEffect(j,H)},$t.useLayoutEffect=function(j,H){return ae.current.useLayoutEffect(j,H)},$t.useMemo=function(j,H){return ae.current.useMemo(j,H)},$t.useReducer=function(j,H,de){return ae.current.useReducer(j,H,de)},$t.useRef=function(j){return ae.current.useRef(j)},$t.useState=function(j){return ae.current.useState(j)},$t.useSyncExternalStore=function(j,H,de){return ae.current.useSyncExternalStore(j,H,de)},$t.useTransition=function(){return ae.current.useTransition()},$t.version="18.3.1",$t}var sm;function qg(){return sm||(sm=1,Jf.exports=P6()),Jf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function A6(){if(lm)return x0;lm=1;var e=qg(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(u,c,h){var p,g={},m=null,b=null;h!==void 0&&(m=""+h),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(b=c.ref);for(p in c)n.call(c,p)&&!o.hasOwnProperty(p)&&(g[p]=c[p]);if(u&&u.defaultProps)for(p in c=u.defaultProps,c)g[p]===void 0&&(g[p]=c[p]);return{$$typeof:t,type:u,key:m,ref:b,props:g,_owner:i.current}}return x0.Fragment=r,x0.jsx=s,x0.jsxs=s,x0}var cm;function D6(){return cm||(cm=1,Gf.exports=A6()),Gf.exports}var Pl=D6(),F0=qg(),op={},eg={exports:{}},Hi={},tg={exports:{}},rg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var um;function F6(){return um||(um=1,(function(e){function t(te,ve){var pe=te.length;te.push(ve);e:for(;0<pe;){var j=pe-1>>>1,H=te[j];if(0<i(H,ve))te[j]=ve,te[pe]=H,pe=j;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var ve=te[0],pe=te.pop();if(pe!==ve){te[0]=pe;e:for(var j=0,H=te.length,de=H>>>1;j<de;){var U=2*(j+1)-1,fe=te[U],ce=U+1,Oe=te[ce];if(0>i(fe,pe))ce<H&&0>i(Oe,fe)?(te[j]=Oe,te[ce]=pe,j=ce):(te[j]=fe,te[U]=pe,j=U);else if(ce<H&&0>i(Oe,pe))te[j]=Oe,te[ce]=pe,j=ce;else break e}}return ve}function i(te,ve){var pe=te.sortIndex-ve.sortIndex;return pe!==0?pe:te.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var c=[],h=[],p=1,g=null,m=3,b=!1,x=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(te){for(var ve=r(h);ve!==null;){if(ve.callback===null)n(h);else if(ve.startTime<=te)n(h),ve.sortIndex=ve.expirationTime,t(c,ve);else break;ve=r(h)}}function D(te){if(C=!1,L(te),!x)if(r(c)!==null)x=!0,le(P);else{var ve=r(h);ve!==null&&ae(D,ve.startTime-te)}}function P(te,ve){x=!1,C&&(C=!1,k(N),N=-1),b=!0;var pe=m;try{for(L(ve),g=r(c);g!==null&&(!(g.expirationTime>ve)||te&&!Q());){var j=g.callback;if(typeof j=="function"){g.callback=null,m=g.priorityLevel;var H=j(g.expirationTime<=ve);ve=e.unstable_now(),typeof H=="function"?g.callback=H:g===r(c)&&n(c),L(ve)}else n(c);g=r(c)}if(g!==null)var de=!0;else{var U=r(h);U!==null&&ae(D,U.startTime-ve),de=!1}return de}finally{g=null,m=pe,b=!1}}var $=!1,A=null,N=-1,z=5,B=-1;function Q(){return!(e.unstable_now()-B<z)}function ne(){if(A!==null){var te=e.unstable_now();B=te;var ve=!0;try{ve=A(!0,te)}finally{ve?Z():($=!1,A=null)}}else $=!1}var Z;if(typeof M=="function")Z=function(){M(ne)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ue=J.port2;J.port1.onmessage=ne,Z=function(){ue.postMessage(null)}}else Z=function(){_(ne,0)};function le(te){A=te,$||($=!0,Z())}function ae(te,ve){N=_(function(){te(e.unstable_now())},ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){x||b||(x=!0,le(P))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(te){switch(m){case 1:case 2:case 3:var ve=3;break;default:ve=m}var pe=m;m=ve;try{return te()}finally{m=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,ve){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var pe=m;m=te;try{return ve()}finally{m=pe}},e.unstable_scheduleCallback=function(te,ve,pe){var j=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?j+pe:j):pe=j,te){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=pe+H,te={id:p++,callback:ve,priorityLevel:te,startTime:pe,expirationTime:H,sortIndex:-1},pe>j?(te.sortIndex=pe,t(h,te),r(c)===null&&te===r(h)&&(C?(k(N),N=-1):C=!0,ae(D,pe-j))):(te.sortIndex=H,t(c,te),x||b||(x=!0,le(P))),te},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(te){var ve=m;return function(){var pe=m;m=ve;try{return te.apply(this,arguments)}finally{m=pe}}}})(rg)),rg}var dm;function R6(){return dm||(dm=1,tg.exports=F6()),tg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm;function O6(){if(hm)return Hi;hm=1;var e=qg(),t=R6();function r(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,v=1;v<arguments.length;v++)l+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(a,l){s(a,l),s(a+"Capture",l)}function s(a,l){for(i[a]=l,a=0;a<l.length;a++)n.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function m(a){return c.call(g,a)?!0:c.call(p,a)?!1:h.test(a)?g[a]=!0:(p[a]=!0,!1)}function b(a,l,v,y){if(v!==null&&v.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:v!==null?!v.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function x(a,l,v,y){if(l===null||typeof l>"u"||b(a,l,v,y))return!0;if(y)return!1;if(v!==null)switch(v.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(a,l,v,y,S,E,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=v,this.propertyName=a,this.type=l,this.sanitizeURL=E,this.removeEmptyString=O}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){_[a]=new C(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];_[l]=new C(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){_[a]=new C(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){_[a]=new C(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){_[a]=new C(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){_[a]=new C(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){_[a]=new C(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){_[a]=new C(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){_[a]=new C(a,5,!1,a.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(k,M);_[l]=new C(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(k,M);_[l]=new C(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(k,M);_[l]=new C(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){_[a]=new C(a,1,!1,a.toLowerCase(),null,!1,!1)}),_.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){_[a]=new C(a,1,!1,a.toLowerCase(),null,!0,!0)});function L(a,l,v,y){var S=_.hasOwnProperty(l)?_[l]:null;(S!==null?S.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(x(l,v,S,y)&&(v=null),y||S===null?m(l)&&(v===null?a.removeAttribute(l):a.setAttribute(l,""+v)):S.mustUseProperty?a[S.propertyName]=v===null?S.type===3?!1:"":v:(l=S.attributeName,y=S.attributeNamespace,v===null?a.removeAttribute(l):(S=S.type,v=S===3||S===4&&v===!0?"":""+v,y?a.setAttributeNS(y,l,v):a.setAttribute(l,v))))}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),$=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),Q=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),te=Symbol.iterator;function ve(a){return a===null||typeof a!="object"?null:(a=te&&a[te]||a["@@iterator"],typeof a=="function"?a:null)}var pe=Object.assign,j;function H(a){if(j===void 0)try{throw Error()}catch(v){var l=v.stack.trim().match(/\n( *(at )?)/);j=l&&l[1]||""}return`
`+j+a}var de=!1;function U(a,l){if(!a||de)return"";de=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(xe){var y=xe}Reflect.construct(a,[],l)}else{try{l.call()}catch(xe){y=xe}a.call(l.prototype)}else{try{throw Error()}catch(xe){y=xe}a()}}catch(xe){if(xe&&y&&typeof xe.stack=="string"){for(var S=xe.stack.split(`
`),E=y.stack.split(`
`),O=S.length-1,q=E.length-1;1<=O&&0<=q&&S[O]!==E[q];)q--;for(;1<=O&&0<=q;O--,q--)if(S[O]!==E[q]){if(O!==1||q!==1)do if(O--,q--,0>q||S[O]!==E[q]){var ee=`
`+S[O].replace(" at new "," at ");return a.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",a.displayName)),ee}while(1<=O&&0<=q);break}}}finally{de=!1,Error.prepareStackTrace=v}return(a=a?a.displayName||a.name:"")?H(a):""}function fe(a){switch(a.tag){case 5:return H(a.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return a=U(a.type,!1),a;case 11:return a=U(a.type.render,!1),a;case 1:return a=U(a.type,!0),a;default:return""}}function ce(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case A:return"Fragment";case $:return"Portal";case z:return"Profiler";case N:return"StrictMode";case Z:return"Suspense";case J:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Q:return(a.displayName||"Context")+".Consumer";case B:return(a._context.displayName||"Context")+".Provider";case ne:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ue:return l=a.displayName||null,l!==null?l:ce(a.type)||"Memo";case le:l=a._payload,a=a._init;try{return ce(a(l))}catch{}}return null}function Oe(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(l);case 8:return l===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ee(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Fe(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ce(a){var l=Fe(a)?"checked":"value",v=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var S=v.get,E=v.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return S.call(this)},set:function(O){y=""+O,E.call(this,O)}}),Object.defineProperty(a,l,{enumerable:v.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Te(a){a._valueTracker||(a._valueTracker=Ce(a))}function et(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var v=l.getValue(),y="";return a&&(y=Fe(a)?a.checked?"true":"false":a.value),a=y,a!==v?(l.setValue(a),!0):!1}function Qe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function it(a,l){var v=l.checked;return pe({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??a._wrapperState.initialChecked})}function He(a,l){var v=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;v=Ee(l.value!=null?l.value:v),a._wrapperState={initialChecked:y,initialValue:v,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ct(a,l){l=l.checked,l!=null&&L(a,"checked",l,!1)}function ut(a,l){ct(a,l);var v=Ee(l.value),y=l.type;if(v!=null)y==="number"?(v===0&&a.value===""||a.value!=v)&&(a.value=""+v):a.value!==""+v&&(a.value=""+v);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?Gt(a,l.type,v):l.hasOwnProperty("defaultValue")&&Gt(a,l.type,Ee(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Qt(a,l,v){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,v||l===a.value||(a.value=l),a.defaultValue=l}v=a.name,v!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,v!==""&&(a.name=v)}function Gt(a,l,v){(l!=="number"||Qe(a.ownerDocument)!==a)&&(v==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+v&&(a.defaultValue=""+v))}var Mt=Array.isArray;function gt(a,l,v,y){if(a=a.options,l){l={};for(var S=0;S<v.length;S++)l["$"+v[S]]=!0;for(v=0;v<a.length;v++)S=l.hasOwnProperty("$"+a[v].value),a[v].selected!==S&&(a[v].selected=S),S&&y&&(a[v].defaultSelected=!0)}else{for(v=""+Ee(v),l=null,S=0;S<a.length;S++){if(a[S].value===v){a[S].selected=!0,y&&(a[S].defaultSelected=!0);return}l!==null||a[S].disabled||(l=a[S])}l!==null&&(l.selected=!0)}}function Yt(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(r(91));return pe({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function cn(a,l){var v=l.value;if(v==null){if(v=l.children,l=l.defaultValue,v!=null){if(l!=null)throw Error(r(92));if(Mt(v)){if(1<v.length)throw Error(r(93));v=v[0]}l=v}l==null&&(l=""),v=l}a._wrapperState={initialValue:Ee(v)}}function xn(a,l){var v=Ee(l.value),y=Ee(l.defaultValue);v!=null&&(v=""+v,v!==a.value&&(a.value=v),l.defaultValue==null&&a.defaultValue!==v&&(a.defaultValue=v)),y!=null&&(a.defaultValue=""+y)}function dr(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Rt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zt(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Rt(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var nr,Kr=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,v,y,S){MSApp.execUnsafeLocalFunction(function(){return a(l,v,y,S)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(nr=nr||document.createElement("div"),nr.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=nr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function hr(a,l){if(l){var v=a.firstChild;if(v&&v===a.lastChild&&v.nodeType===3){v.nodeValue=l;return}}a.textContent=l}var Br={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Et=["Webkit","ms","Moz","O"];Object.keys(Br).forEach(function(a){Et.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Br[l]=Br[a]})});function We(a,l,v){return l==null||typeof l=="boolean"||l===""?"":v||typeof l!="number"||l===0||Br.hasOwnProperty(a)&&Br[a]?(""+l).trim():l+"px"}function _t(a,l){a=a.style;for(var v in l)if(l.hasOwnProperty(v)){var y=v.indexOf("--")===0,S=We(v,l[v],y);v==="float"&&(v="cssFloat"),y?a.setProperty(v,S):a[v]=S}}var wt=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function St(a,l){if(l){if(wt[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(r(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(r(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(r(61))}if(l.style!=null&&typeof l.style!="object")throw Error(r(62))}}function Ct(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ut=null;function Kt(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var mr=null,pr=null,cr=null;function ti(a){if(a=Rn(a)){if(typeof mr!="function")throw Error(r(280));var l=a.stateNode;l&&(l=Tu(l),mr(a.stateNode,a.type,l))}}function Hr(a){pr?cr?cr.push(a):cr=[a]:pr=a}function Ur(){if(pr){var a=pr,l=cr;if(cr=pr=null,ti(a),l)for(a=0;a<l.length;a++)ti(l[a])}}function ri(a,l){return a(l)}function Pt(){}var Pr=!1;function kt(a,l,v){if(Pr)return a(l,v);Pr=!0;try{return ri(a,l,v)}finally{Pr=!1,(pr!==null||cr!==null)&&(Pt(),Ur())}}function Ar(a,l){var v=a.stateNode;if(v===null)return null;var y=Tu(v);if(y===null)return null;v=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(v&&typeof v!="function")throw Error(r(231,l,typeof v));return v}var wr=!1;if(u)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){wr=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{wr=!1}function rn(a,l,v,y,S,E,O,q,ee){var xe=Array.prototype.slice.call(arguments,3);try{l.apply(v,xe)}catch(De){this.onError(De)}}var jr=!1,nn=null,wn=!1,An=null,ji={onError:function(a){jr=!0,nn=a}};function uo(a,l,v,y,S,E,O,q,ee){jr=!1,nn=null,rn.apply(ji,arguments)}function Ya(a,l,v,y,S,E,O,q,ee){if(uo.apply(this,arguments),jr){if(jr){var xe=nn;jr=!1,nn=null}else throw Error(r(198));wn||(wn=!0,An=xe)}}function mi(a){var l=a,v=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(v=l.return),a=l.return;while(a)}return l.tag===3?v:null}function da(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function $s(a){if(mi(a)!==a)throw Error(r(188))}function ha(a){var l=a.alternate;if(!l){if(l=mi(a),l===null)throw Error(r(188));return l!==a?null:a}for(var v=a,y=l;;){var S=v.return;if(S===null)break;var E=S.alternate;if(E===null){if(y=S.return,y!==null){v=y;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===v)return $s(S),a;if(E===y)return $s(S),l;E=E.sibling}throw Error(r(188))}if(v.return!==y.return)v=S,y=E;else{for(var O=!1,q=S.child;q;){if(q===v){O=!0,v=S,y=E;break}if(q===y){O=!0,y=S,v=E;break}q=q.sibling}if(!O){for(q=E.child;q;){if(q===v){O=!0,v=E,y=S;break}if(q===y){O=!0,y=E,v=S;break}q=q.sibling}if(!O)throw Error(r(189))}}if(v.alternate!==y)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?a:l}function Za(a){return a=ha(a),a!==null?Ka(a):null}function Ka(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Ka(a);if(l!==null)return l;a=a.sibling}return null}var $l=t.unstable_scheduleCallback,Wl=t.unstable_cancelCallback,qa=t.unstable_shouldYield,Jc=t.unstable_requestPaint,yr=t.unstable_now,eu=t.unstable_getCurrentPriorityLevel,Ws=t.unstable_ImmediatePriority,Hl=t.unstable_UserBlockingPriority,pa=t.unstable_NormalPriority,tu=t.unstable_LowPriority,Hs=t.unstable_IdlePriority,Qa=null,ze=null;function ru(a){if(ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(Qa,a,void 0,(a.current.flags&128)===128)}catch{}}var ni=Math.clz32?Math.clz32:Xl,Ul=Math.log,jl=Math.LN2;function Xl(a){return a>>>=0,a===0?32:31-(Ul(a)/jl|0)|0}var zo=64,Ga=4194304;function Vo(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function ho(a,l){var v=a.pendingLanes;if(v===0)return 0;var y=0,S=a.suspendedLanes,E=a.pingedLanes,O=v&268435455;if(O!==0){var q=O&~S;q!==0?y=Vo(q):(E&=O,E!==0&&(y=Vo(E)))}else O=v&~S,O!==0?y=Vo(O):E!==0&&(y=Vo(E));if(y===0)return 0;if(l!==0&&l!==y&&(l&S)===0&&(S=y&-y,E=l&-l,S>=E||S===16&&(E&4194240)!==0))return l;if((y&4)!==0&&(y|=v&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=y;0<l;)v=31-ni(l),S=1<<v,y|=a[v],l&=~S;return y}function Yl(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nu(a,l){for(var v=a.suspendedLanes,y=a.pingedLanes,S=a.expirationTimes,E=a.pendingLanes;0<E;){var O=31-ni(E),q=1<<O,ee=S[O];ee===-1?((q&v)===0||(q&y)!==0)&&(S[O]=Yl(q,l)):ee<=l&&(a.expiredLanes|=q),E&=~q}}function Ja(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Us(){var a=zo;return zo<<=1,(zo&4194240)===0&&(zo=64),a}function fa(a){for(var l=[],v=0;31>v;v++)l.push(a);return l}function ga(a,l,v){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-ni(l),a[l]=v}function Zl(a,l){var v=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<v;){var S=31-ni(v),E=1<<S;l[S]=0,y[S]=-1,a[S]=-1,v&=~E}}function va(a,l){var v=a.entangledLanes|=l;for(a=a.entanglements;v;){var y=31-ni(v),S=1<<y;S&l|a[y]&l&&(a[y]|=l),v&=~S}}var qt=0;function po(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var js,es,Kl,Xs,Ys,ts=!1,ma=[],Xi=null,Yi=null,Zi=null,Bo=new Map,ya=new Map,Ki=[],iu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ql(a,l){switch(a){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":Bo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ya.delete(l.pointerId)}}function fo(a,l,v,y,S,E){return a===null||a.nativeEvent!==E?(a={blockedOn:l,domEventName:v,eventSystemFlags:y,nativeEvent:E,targetContainers:[S]},l!==null&&(l=Rn(l),l!==null&&es(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),a)}function ou(a,l,v,y,S){switch(l){case"focusin":return Xi=fo(Xi,a,l,v,y,S),!0;case"dragenter":return Yi=fo(Yi,a,l,v,y,S),!0;case"mouseover":return Zi=fo(Zi,a,l,v,y,S),!0;case"pointerover":var E=S.pointerId;return Bo.set(E,fo(Bo.get(E)||null,a,l,v,y,S)),!0;case"gotpointercapture":return E=S.pointerId,ya.set(E,fo(ya.get(E)||null,a,l,v,y,S)),!0}return!1}function Ql(a){var l=yo(a.target);if(l!==null){var v=mi(l);if(v!==null){if(l=v.tag,l===13){if(l=da(v),l!==null){a.blockedOn=l,Ys(a.priority,function(){Kl(v)});return}}else if(l===3&&v.stateNode.current.memoizedState.isDehydrated){a.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}a.blockedOn=null}function rs(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var v=cu(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(v===null){v=a.nativeEvent;var y=new v.constructor(v.type,v);Ut=y,v.target.dispatchEvent(y),Ut=null}else return l=Rn(v),l!==null&&es(l),a.blockedOn=v,!1;l.shift()}return!0}function Gl(a,l,v){rs(a)&&v.delete(l)}function au(){ts=!1,Xi!==null&&rs(Xi)&&(Xi=null),Yi!==null&&rs(Yi)&&(Yi=null),Zi!==null&&rs(Zi)&&(Zi=null),Bo.forEach(Gl),ya.forEach(Gl)}function ir(a,l){a.blockedOn===l&&(a.blockedOn=null,ts||(ts=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,au)))}function Jt(a){function l(S){return ir(S,a)}if(0<ma.length){ir(ma[0],a);for(var v=1;v<ma.length;v++){var y=ma[v];y.blockedOn===a&&(y.blockedOn=null)}}for(Xi!==null&&ir(Xi,a),Yi!==null&&ir(Yi,a),Zi!==null&&ir(Zi,a),Bo.forEach(l),ya.forEach(l),v=0;v<Ki.length;v++)y=Ki[v],y.blockedOn===a&&(y.blockedOn=null);for(;0<Ki.length&&(v=Ki[0],v.blockedOn===null);)Ql(v),v.blockedOn===null&&Ki.shift()}var Zs=D.ReactCurrentBatchConfig,su=!0;function of(a,l,v,y){var S=qt,E=Zs.transition;Zs.transition=null;try{qt=1,ah(a,l,v,y)}finally{qt=S,Zs.transition=E}}function af(a,l,v,y){var S=qt,E=Zs.transition;Zs.transition=null;try{qt=4,ah(a,l,v,y)}finally{qt=S,Zs.transition=E}}function ah(a,l,v,y){if(su){var S=cu(a,l,v,y);if(S===null)_h(a,l,y,lu,v),ql(a,y);else if(ou(S,a,l,v,y))y.stopPropagation();else if(ql(a,y),l&4&&-1<iu.indexOf(a)){for(;S!==null;){var E=Rn(S);if(E!==null&&js(E),E=cu(a,l,v,y),E===null&&_h(a,l,y,lu,v),E===S)break;S=E}S!==null&&y.stopPropagation()}else _h(a,l,y,null,v)}}var lu=null;function cu(a,l,v,y){if(lu=null,a=Kt(y),a=yo(a),a!==null)if(l=mi(a),l===null)a=null;else if(v=l.tag,v===13){if(a=da(l),a!==null)return a;a=null}else if(v===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return lu=a,null}function Y0(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eu()){case Ws:return 1;case Hl:return 4;case pa:case tu:return 16;case Hs:return 536870912;default:return 16}default:return 16}}var Dr=null,Jl=null,go=null;function sh(){if(go)return go;var a,l=Jl,v=l.length,y,S="value"in Dr?Dr.value:Dr.textContent,E=S.length;for(a=0;a<v&&l[a]===S[a];a++);var O=v-a;for(y=1;y<=O&&l[v-y]===S[E-y];y++);return go=S.slice(a,1<y?1-y:void 0)}function Ks(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Un(){return!0}function lh(){return!1}function ii(a){function l(v,y,S,E,O){this._reactName=v,this._targetInst=S,this.type=y,this.nativeEvent=E,this.target=O,this.currentTarget=null;for(var q in a)a.hasOwnProperty(q)&&(v=a[q],this[q]=v?v(E):E[q]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Un:lh,this.isPropagationStopped=lh,this}return pe(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){},isPersistent:Un}),l}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=ii(ns),qs=pe({},ns,{view:0,detail:0}),Z0=ii(qs),jn,ch,Dn,du=pe({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Dn&&(Dn&&a.type==="mousemove"?(jn=a.screenX-Dn.screenX,ch=a.screenY-Dn.screenY):ch=jn=0,Dn=a),jn)},movementY:function(a){return"movementY"in a?a.movementY:ch}}),uh=ii(du),ba=pe({},du,{dataTransfer:0}),hu=ii(ba),dh=pe({},qs,{relatedTarget:0}),Cr=ii(dh),xa=pe({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),hh=ii(xa),sf=pe({},ns,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ph=ii(sf),lf=pe({},ns,{data:0}),K0=ii(lf),cf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qs(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=pu[a])?!!l[a]:!1}function fh(){return Qs}var Q0=pe({},qs,{key:function(a){if(a.key){var l=cf[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Ks(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?q0[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fh,charCode:function(a){return a.type==="keypress"?Ks(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ks(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),G0=ii(Q0),gh=pe({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fu=ii(gh),J0=pe({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fh}),uf=ii(J0),vh=pe({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),mh=ii(vh),df=pe({},du,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),e1=ii(df),yi=[9,13,27,32],ec=u&&"CompositionEvent"in window,$o=null;u&&"documentMode"in document&&($o=document.documentMode);var t1=u&&"TextEvent"in window&&!$o,yh=u&&(!ec||$o&&8<$o&&11>=$o),r1=" ",n1=!1;function i1(a,l){switch(a){case"keyup":return yi.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Gs=!1;function Js(a,l){switch(a){case"compositionend":return o1(l);case"keypress":return l.which!==32?null:(n1=!0,r1);case"textInput":return a=l.data,a===r1&&n1?null:a;default:return null}}function hf(a,l){if(Gs)return a==="compositionend"||!ec&&i1(a,l)?(a=sh(),go=Jl=Dr=null,Gs=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return yh&&l.locale!=="ko"?null:l.data;default:return null}}var pf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gu(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!pf[a.type]:l==="textarea"}function bh(a,l,v,y){Hr(y),l=Su(l,"onChange"),0<l.length&&(v=new uu("onChange","change",null,v,y),a.push({event:v,listeners:l}))}var Ti=null,wa=null;function ff(a){h1(a,0)}function vu(a){var l=Tt(a);if(et(l))return a}function gf(a,l){if(a==="change")return l}var is=!1;if(u){var bi;if(u){var mu="oninput"in document;if(!mu){var a1=document.createElement("div");a1.setAttribute("oninput","return;"),mu=typeof a1.oninput=="function"}bi=mu}else bi=!1;is=bi&&(!document.documentMode||9<document.documentMode)}function s1(){Ti&&(Ti.detachEvent("onpropertychange",l1),wa=Ti=null)}function l1(a){if(a.propertyName==="value"&&vu(wa)){var l=[];bh(l,wa,a,Kt(a)),kt(ff,l)}}function vf(a,l,v){a==="focusin"?(s1(),Ti=l,wa=v,Ti.attachEvent("onpropertychange",l1)):a==="focusout"&&s1()}function mf(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return vu(wa)}function el(a,l){if(a==="click")return vu(l)}function oe(a,l){if(a==="input"||a==="change")return vu(l)}function _e(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var ye=typeof Object.is=="function"?Object.is:_e;function je(a,l){if(ye(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var v=Object.keys(a),y=Object.keys(l);if(v.length!==y.length)return!1;for(y=0;y<v.length;y++){var S=v[y];if(!c.call(l,S)||!ye(a[S],l[S]))return!1}return!0}function xt(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function or(a,l){var v=xt(a);a=0;for(var y;v;){if(v.nodeType===3){if(y=a+v.textContent.length,a<=l&&y>=l)return{node:v,offset:l-a};a=y}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=xt(v)}}function qr(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?qr(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function gr(){for(var a=window,l=Qe();l instanceof a.HTMLIFrameElement;){try{var v=typeof l.contentWindow.location.href=="string"}catch{v=!1}if(v)a=l.contentWindow;else break;l=Qe(a.document)}return l}function tc(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function yf(a){var l=gr(),v=a.focusedElem,y=a.selectionRange;if(l!==v&&v&&v.ownerDocument&&qr(v.ownerDocument.documentElement,v)){if(y!==null&&tc(v)){if(l=y.start,a=y.end,a===void 0&&(a=l),"selectionStart"in v)v.selectionStart=l,v.selectionEnd=Math.min(a,v.value.length);else if(a=(l=v.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var S=v.textContent.length,E=Math.min(y.start,S);y=y.end===void 0?E:Math.min(y.end,S),!a.extend&&E>y&&(S=y,y=E,E=S),S=or(v,E);var O=or(v,y);S&&O&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),a.removeAllRanges(),E>y?(a.addRange(l),a.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),a.addRange(l)))}}for(l=[],a=v;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<l.length;v++)a=l[v],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Ii=u&&"documentMode"in document&&11>=document.documentMode,Wo=null,xh=null,vo=null,tl=!1;function rc(a,l,v){var y=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;tl||Wo==null||Wo!==Qe(y)||(y=Wo,"selectionStart"in y&&tc(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),vo&&je(vo,y)||(vo=y,y=Su(xh,"onSelect"),0<y.length&&(l=new uu("onSelect","select",null,l,v),a.push({event:l,listeners:y}),l.target=Wo)))}function ar(a,l){var v={};return v[a.toLowerCase()]=l.toLowerCase(),v["Webkit"+a]="webkit"+l,v["Moz"+a]="moz"+l,v}var rl={animationend:ar("Animation","AnimationEnd"),animationiteration:ar("Animation","AnimationIteration"),animationstart:ar("Animation","AnimationStart"),transitionend:ar("Transition","TransitionEnd")},yu={},nc={};u&&(nc=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function bu(a){if(yu[a])return yu[a];if(!rl[a])return a;var l=rl[a],v;for(v in l)if(l.hasOwnProperty(v)&&v in nc)return yu[a]=l[v];return a}var c1=bu("animationend"),u1=bu("animationiteration"),ic=bu("animationstart"),Ho=bu("transitionend"),oc=new Map,wh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(a,l){oc.set(a,l),o(l,[a])}for(var xu=0;xu<wh.length;xu++){var wu=wh[xu],Cu=wu.toLowerCase(),d1=wu[0].toUpperCase()+wu.slice(1);qi(Cu,"on"+d1)}qi(c1,"onAnimationEnd"),qi(u1,"onAnimationIteration"),qi(ic,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Ho,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),os=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function ac(a,l,v){var y=a.type||"unknown-event";a.currentTarget=v,Ya(y,l,void 0,a),a.currentTarget=null}function h1(a,l){l=(l&4)!==0;for(var v=0;v<a.length;v++){var y=a[v],S=y.event;y=y.listeners;e:{var E=void 0;if(l)for(var O=y.length-1;0<=O;O--){var q=y[O],ee=q.instance,xe=q.currentTarget;if(q=q.listener,ee!==E&&S.isPropagationStopped())break e;ac(S,q,xe),E=ee}else for(O=0;O<y.length;O++){if(q=y[O],ee=q.instance,xe=q.currentTarget,q=q.listener,ee!==E&&S.isPropagationStopped())break e;ac(S,q,xe),E=ee}}}if(wn)throw a=An,wn=!1,An=null,a}function Mr(a,l){var v=l[Eu];v===void 0&&(v=l[Eu]=new Set);var y=a+"__bubble";v.has(y)||(_u(l,a,2,!1),v.add(y))}function Ch(a,l,v){var y=0;l&&(y|=4),_u(v,a,y,l)}var as="_reactListening"+Math.random().toString(36).slice(2);function Ca(a){if(!a[as]){a[as]=!0,n.forEach(function(v){v!=="selectionchange"&&(os.has(v)||Ch(v,!1,a),Ch(v,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[as]||(l[as]=!0,Ch("selectionchange",!1,l))}}function _u(a,l,v,y){switch(Y0(l)){case 1:var S=of;break;case 4:S=af;break;default:S=ah}v=S.bind(null,l,v,a),S=void 0,!wr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),y?S!==void 0?a.addEventListener(l,v,{capture:!0,passive:S}):a.addEventListener(l,v,!0):S!==void 0?a.addEventListener(l,v,{passive:S}):a.addEventListener(l,v,!1)}function _h(a,l,v,y,S){var E=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var q=y.stateNode.containerInfo;if(q===S||q.nodeType===8&&q.parentNode===S)break;if(O===4)for(O=y.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&(ee=O.stateNode.containerInfo,ee===S||ee.nodeType===8&&ee.parentNode===S))return;O=O.return}for(;q!==null;){if(O=yo(q),O===null)return;if(ee=O.tag,ee===5||ee===6){y=E=O;continue e}q=q.parentNode}}y=y.return}kt(function(){var xe=E,De=Kt(v),Ne=[];e:{var Ie=oc.get(a);if(Ie!==void 0){var Xe=uu,Je=a;switch(a){case"keypress":if(Ks(v)===0)break e;case"keydown":case"keyup":Xe=G0;break;case"focusin":Je="focus",Xe=Cr;break;case"focusout":Je="blur",Xe=Cr;break;case"beforeblur":case"afterblur":Xe=Cr;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=uh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=uf;break;case c1:case u1:case ic:Xe=hh;break;case Ho:Xe=mh;break;case"scroll":Xe=Z0;break;case"wheel":Xe=e1;break;case"copy":case"cut":case"paste":Xe=ph;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=fu}var rt=(l&4)!==0,Yr=!rt&&a==="scroll",he=rt?Ie!==null?Ie+"Capture":null:Ie;rt=[];for(var ie=xe,ge;ie!==null;){ge=ie;var Ve=ge.stateNode;if(ge.tag===5&&Ve!==null&&(ge=Ve,he!==null&&(Ve=Ar(ie,he),Ve!=null&&rt.push(nl(ie,Ve,ge)))),Yr)break;ie=ie.return}0<rt.length&&(Ie=new Xe(Ie,Je,null,v,De),Ne.push({event:Ie,listeners:rt}))}}if((l&7)===0){e:{if(Ie=a==="mouseover"||a==="pointerover",Xe=a==="mouseout"||a==="pointerout",Ie&&v!==Ut&&(Je=v.relatedTarget||v.fromElement)&&(yo(Je)||Je[xi]))break e;if((Xe||Ie)&&(Ie=De.window===De?De:(Ie=De.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Xe?(Je=v.relatedTarget||v.toElement,Xe=xe,Je=Je?yo(Je):null,Je!==null&&(Yr=mi(Je),Je!==Yr||Je.tag!==5&&Je.tag!==6)&&(Je=null)):(Xe=null,Je=xe),Xe!==Je)){if(rt=uh,Ve="onMouseLeave",he="onMouseEnter",ie="mouse",(a==="pointerout"||a==="pointerover")&&(rt=fu,Ve="onPointerLeave",he="onPointerEnter",ie="pointer"),Yr=Xe==null?Ie:Tt(Xe),ge=Je==null?Ie:Tt(Je),Ie=new rt(Ve,ie+"leave",Xe,v,De),Ie.target=Yr,Ie.relatedTarget=ge,Ve=null,yo(De)===xe&&(rt=new rt(he,ie+"enter",Je,v,De),rt.target=ge,rt.relatedTarget=Yr,Ve=rt),Yr=Ve,Xe&&Je)t:{for(rt=Xe,he=Je,ie=0,ge=rt;ge;ge=il(ge))ie++;for(ge=0,Ve=he;Ve;Ve=il(Ve))ge++;for(;0<ie-ge;)rt=il(rt),ie--;for(;0<ge-ie;)he=il(he),ge--;for(;ie--;){if(rt===he||he!==null&&rt===he.alternate)break t;rt=il(rt),he=il(he)}rt=null}else rt=null;Xe!==null&&Qr(Ne,Ie,Xe,rt,!1),Je!==null&&Yr!==null&&Qr(Ne,Yr,Je,rt,!0)}}e:{if(Ie=xe?Tt(xe):window,Xe=Ie.nodeName&&Ie.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&Ie.type==="file")var ot=gf;else if(gu(Ie))if(is)ot=oe;else{ot=mf;var dt=vf}else(Xe=Ie.nodeName)&&Xe.toLowerCase()==="input"&&(Ie.type==="checkbox"||Ie.type==="radio")&&(ot=el);if(ot&&(ot=ot(a,xe))){bh(Ne,ot,v,De);break e}dt&&dt(a,Ie,xe),a==="focusout"&&(dt=Ie._wrapperState)&&dt.controlled&&Ie.type==="number"&&Gt(Ie,"number",Ie.value)}switch(dt=xe?Tt(xe):window,a){case"focusin":(gu(dt)||dt.contentEditable==="true")&&(Wo=dt,xh=xe,vo=null);break;case"focusout":vo=xh=Wo=null;break;case"mousedown":tl=!0;break;case"contextmenu":case"mouseup":case"dragend":tl=!1,rc(Ne,v,De);break;case"selectionchange":if(Ii)break;case"keydown":case"keyup":rc(Ne,v,De)}var lt;if(ec)e:{switch(a){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else Gs?i1(a,v)&&(mt="onCompositionEnd"):a==="keydown"&&v.keyCode===229&&(mt="onCompositionStart");mt&&(yh&&v.locale!=="ko"&&(Gs||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Gs&&(lt=sh()):(Dr=De,Jl="value"in Dr?Dr.value:Dr.textContent,Gs=!0)),dt=Su(xe,mt),0<dt.length&&(mt=new K0(mt,a,null,v,De),Ne.push({event:mt,listeners:dt}),lt?mt.data=lt:(lt=o1(v),lt!==null&&(mt.data=lt)))),(lt=t1?Js(a,v):hf(a,v))&&(xe=Su(xe,"onBeforeInput"),0<xe.length&&(De=new K0("onBeforeInput","beforeinput",null,v,De),Ne.push({event:De,listeners:xe}),De.data=lt))}h1(Ne,l)})}function nl(a,l,v){return{instance:a,listener:l,currentTarget:v}}function Su(a,l){for(var v=l+"Capture",y=[];a!==null;){var S=a,E=S.stateNode;S.tag===5&&E!==null&&(S=E,E=Ar(a,v),E!=null&&y.unshift(nl(a,E,S)),E=Ar(a,l),E!=null&&y.push(nl(a,E,S))),a=a.return}return y}function il(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Qr(a,l,v,y,S){for(var E=l._reactName,O=[];v!==null&&v!==y;){var q=v,ee=q.alternate,xe=q.stateNode;if(ee!==null&&ee===y)break;q.tag===5&&xe!==null&&(q=xe,S?(ee=Ar(v,E),ee!=null&&O.unshift(nl(v,ee,q))):S||(ee=Ar(v,E),ee!=null&&O.push(nl(v,ee,q)))),v=v.return}O.length!==0&&a.push({event:l,listeners:O})}var Fn=/\r\n?/g,bf=/\u0000|\uFFFD/g;function p1(a){return(typeof a=="string"?a:""+a).replace(Fn,`
`).replace(bf,"")}function sc(a,l,v){if(l=p1(l),p1(a)!==l&&v)throw Error(r(425))}function ku(){}var lc=null,ss=null;function cc(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var _a=typeof setTimeout=="function"?setTimeout:void 0,uc=typeof clearTimeout=="function"?clearTimeout:void 0,ol=typeof Promise=="function"?Promise:void 0,Mu=typeof queueMicrotask=="function"?queueMicrotask:typeof ol<"u"?function(a){return ol.resolve(null).then(a).catch(al)}:_a;function al(a){setTimeout(function(){throw a})}function Sh(a,l){var v=l,y=0;do{var S=v.nextSibling;if(a.removeChild(v),S&&S.nodeType===8)if(v=S.data,v==="/$"){if(y===0){a.removeChild(S),Jt(l);return}y--}else v!=="$"&&v!=="$?"&&v!=="$!"||y++;v=S}while(v);Jt(l)}function Sa(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function f1(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var v=a.data;if(v==="$"||v==="$!"||v==="$?"){if(l===0)return a;l--}else v==="/$"&&l++}a=a.previousSibling}return null}var sl=Math.random().toString(36).slice(2),mo="__reactFiber$"+sl,ka="__reactProps$"+sl,xi="__reactContainer$"+sl,Eu="__reactEvents$"+sl,V="__reactListeners$"+sl,ll="__reactHandles$"+sl;function yo(a){var l=a[mo];if(l)return l;for(var v=a.parentNode;v;){if(l=v[xi]||v[mo]){if(v=l.alternate,l.child!==null||v!==null&&v.child!==null)for(a=f1(a);a!==null;){if(v=a[mo])return v;a=f1(a)}return l}a=v,v=a.parentNode}return null}function Rn(a){return a=a[mo]||a[xi],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Tt(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(r(33))}function Tu(a){return a[ka]||null}var kh=[],cl=-1;function oi(a){return{current:a}}function Er(a){0>cl||(a.current=kh[cl],kh[cl]=null,cl--)}function _r(a,l){cl++,kh[cl]=a.current,a.current=l}var Ma={},On=oi(Ma),ai=oi(!1),Xn=Ma;function ul(a,l){var v=a.type.contextTypes;if(!v)return Ma;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var S={},E;for(E in v)S[E]=l[E];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=S),S}function si(a){return a=a.childContextTypes,a!=null}function Iu(){Er(ai),Er(On)}function g1(a,l,v){if(On.current!==Ma)throw Error(r(168));_r(On,l),_r(ai,v)}function v1(a,l,v){var y=a.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return v;y=y.getChildContext();for(var S in y)if(!(S in l))throw Error(r(108,Oe(a)||"Unknown",S));return pe({},v,y)}function Li(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ma,Xn=On.current,_r(On,a),_r(ai,ai.current),!0}function m1(a,l,v){var y=a.stateNode;if(!y)throw Error(r(169));v?(a=v1(a,l,Xn),y.__reactInternalMemoizedMergedChildContext=a,Er(ai),Er(On),_r(On,a)):Er(ai),_r(ai,v)}var jo=null,Lu=!1,Mh=!1;function y1(a){jo===null?jo=[a]:jo.push(a)}function ls(a){Lu=!0,y1(a)}function Ea(){if(!Mh&&jo!==null){Mh=!0;var a=0,l=qt;try{var v=jo;for(qt=1;a<v.length;a++){var y=v[a];do y=y(!0);while(y!==null)}jo=null,Lu=!1}catch(S){throw jo!==null&&(jo=jo.slice(a+1)),$l(Ws,Ea),S}finally{qt=l,Mh=!1}}return null}var dl=[],Nn=0,Pu=null,Au=0,Pi=[],Ai=0,cs=null,bo=1,xo="";function us(a,l){dl[Nn++]=Au,dl[Nn++]=Pu,Pu=a,Au=l}function b1(a,l,v){Pi[Ai++]=bo,Pi[Ai++]=xo,Pi[Ai++]=cs,cs=a;var y=bo;a=xo;var S=32-ni(y)-1;y&=~(1<<S),v+=1;var E=32-ni(l)+S;if(30<E){var O=S-S%5;E=(y&(1<<O)-1).toString(32),y>>=O,S-=O,bo=1<<32-ni(l)+S|v<<S|y,xo=E+a}else bo=1<<E|v<<S|y,xo=a}function dc(a){a.return!==null&&(us(a,1),b1(a,1,0))}function ds(a){for(;a===Pu;)Pu=dl[--Nn],dl[Nn]=null,Au=dl[--Nn],dl[Nn]=null;for(;a===cs;)cs=Pi[--Ai],Pi[Ai]=null,xo=Pi[--Ai],Pi[Ai]=null,bo=Pi[--Ai],Pi[Ai]=null}var zn=null,wi=null,Tr=!1,Qi=null;function wo(a,l){var v=Vi(5,null,null,0);v.elementType="DELETED",v.stateNode=l,v.return=a,l=a.deletions,l===null?(a.deletions=[v],a.flags|=16):l.push(v)}function Du(a,l){switch(a.tag){case 5:var v=a.type;return l=l.nodeType!==1||v.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,zn=a,wi=Sa(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,zn=a,wi=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(v=cs!==null?{id:bo,overflow:xo}:null,a.memoizedState={dehydrated:l,treeContext:v,retryLane:1073741824},v=Vi(18,null,null,0),v.stateNode=l,v.return=a,a.child=v,zn=a,wi=null,!0):!1;default:return!1}}function Xo(a){return(a.mode&1)!==0&&(a.flags&128)===0}function li(a){if(Tr){var l=wi;if(l){var v=l;if(!Du(a,l)){if(Xo(a))throw Error(r(418));l=Sa(v.nextSibling);var y=zn;l&&Du(a,l)?wo(y,v):(a.flags=a.flags&-4097|2,Tr=!1,zn=a)}}else{if(Xo(a))throw Error(r(418));a.flags=a.flags&-4097|2,Tr=!1,zn=a}}}function x1(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;zn=a}function hc(a){if(a!==zn)return!1;if(!Tr)return x1(a),Tr=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!cc(a.type,a.memoizedProps)),l&&(l=wi)){if(Xo(a))throw Eh(),Error(r(418));for(;l;)wo(a,l),l=Sa(l.nextSibling)}if(x1(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var v=a.data;if(v==="/$"){if(l===0){wi=Sa(a.nextSibling);break e}l--}else v!=="$"&&v!=="$!"&&v!=="$?"||l++}a=a.nextSibling}wi=null}}else wi=zn?Sa(a.stateNode.nextSibling):null;return!0}function Eh(){for(var a=wi;a;)a=Sa(a.nextSibling)}function Co(){wi=zn=null,Tr=!1}function _o(a){Qi===null?Qi=[a]:Qi.push(a)}var w1=D.ReactCurrentBatchConfig;function pc(a,l,v){if(a=v.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(r(309));var y=v.stateNode}if(!y)throw Error(r(147,a));var S=y,E=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===E?l.ref:(l=function(O){var q=S.refs;O===null?delete q[E]:q[E]=O},l._stringRef=E,l)}if(typeof a!="string")throw Error(r(284));if(!v._owner)throw Error(r(290,a))}return a}function hs(a,l){throw a=Object.prototype.toString.call(l),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function C1(a){var l=a._init;return l(a._payload)}function Th(a){function l(he,ie){if(a){var ge=he.deletions;ge===null?(he.deletions=[ie],he.flags|=16):ge.push(ie)}}function v(he,ie){if(!a)return null;for(;ie!==null;)l(he,ie),ie=ie.sibling;return null}function y(he,ie){for(he=new Map;ie!==null;)ie.key!==null?he.set(ie.key,ie):he.set(ie.index,ie),ie=ie.sibling;return he}function S(he,ie){return he=io(he,ie),he.index=0,he.sibling=null,he}function E(he,ie,ge){return he.index=ge,a?(ge=he.alternate,ge!==null?(ge=ge.index,ge<ie?(he.flags|=2,ie):ge):(he.flags|=2,ie)):(he.flags|=1048576,ie)}function O(he){return a&&he.alternate===null&&(he.flags|=2),he}function q(he,ie,ge,Ve){return ie===null||ie.tag!==6?(ie=f0(ge,he.mode,Ve),ie.return=he,ie):(ie=S(ie,ge),ie.return=he,ie)}function ee(he,ie,ge,Ve){var ot=ge.type;return ot===A?De(he,ie,ge.props.children,Ve,ge.key):ie!==null&&(ie.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===le&&C1(ot)===ie.type)?(Ve=S(ie,ge.props),Ve.ref=pc(he,ie,ge),Ve.return=he,Ve):(Ve=fd(ge.type,ge.key,ge.props,null,he.mode,Ve),Ve.ref=pc(he,ie,ge),Ve.return=he,Ve)}function xe(he,ie,ge,Ve){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ge.containerInfo||ie.stateNode.implementation!==ge.implementation?(ie=g0(ge,he.mode,Ve),ie.return=he,ie):(ie=S(ie,ge.children||[]),ie.return=he,ie)}function De(he,ie,ge,Ve,ot){return ie===null||ie.tag!==7?(ie=_s(ge,he.mode,Ve,ot),ie.return=he,ie):(ie=S(ie,ge),ie.return=he,ie)}function Ne(he,ie,ge){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=f0(""+ie,he.mode,ge),ie.return=he,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:return ge=fd(ie.type,ie.key,ie.props,null,he.mode,ge),ge.ref=pc(he,null,ie),ge.return=he,ge;case $:return ie=g0(ie,he.mode,ge),ie.return=he,ie;case le:var Ve=ie._init;return Ne(he,Ve(ie._payload),ge)}if(Mt(ie)||ve(ie))return ie=_s(ie,he.mode,ge,null),ie.return=he,ie;hs(he,ie)}return null}function Ie(he,ie,ge,Ve){var ot=ie!==null?ie.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ot!==null?null:q(he,ie,""+ge,Ve);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:return ge.key===ot?ee(he,ie,ge,Ve):null;case $:return ge.key===ot?xe(he,ie,ge,Ve):null;case le:return ot=ge._init,Ie(he,ie,ot(ge._payload),Ve)}if(Mt(ge)||ve(ge))return ot!==null?null:De(he,ie,ge,Ve,null);hs(he,ge)}return null}function Xe(he,ie,ge,Ve,ot){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return he=he.get(ge)||null,q(ie,he,""+Ve,ot);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case P:return he=he.get(Ve.key===null?ge:Ve.key)||null,ee(ie,he,Ve,ot);case $:return he=he.get(Ve.key===null?ge:Ve.key)||null,xe(ie,he,Ve,ot);case le:var dt=Ve._init;return Xe(he,ie,ge,dt(Ve._payload),ot)}if(Mt(Ve)||ve(Ve))return he=he.get(ge)||null,De(ie,he,Ve,ot,null);hs(ie,Ve)}return null}function Je(he,ie,ge,Ve){for(var ot=null,dt=null,lt=ie,mt=ie=0,hn=null;lt!==null&&mt<ge.length;mt++){lt.index>mt?(hn=lt,lt=null):hn=lt.sibling;var sr=Ie(he,lt,ge[mt],Ve);if(sr===null){lt===null&&(lt=hn);break}a&&lt&&sr.alternate===null&&l(he,lt),ie=E(sr,ie,mt),dt===null?ot=sr:dt.sibling=sr,dt=sr,lt=hn}if(mt===ge.length)return v(he,lt),Tr&&us(he,mt),ot;if(lt===null){for(;mt<ge.length;mt++)lt=Ne(he,ge[mt],Ve),lt!==null&&(ie=E(lt,ie,mt),dt===null?ot=lt:dt.sibling=lt,dt=lt);return Tr&&us(he,mt),ot}for(lt=y(he,lt);mt<ge.length;mt++)hn=Xe(lt,he,mt,ge[mt],Ve),hn!==null&&(a&&hn.alternate!==null&&lt.delete(hn.key===null?mt:hn.key),ie=E(hn,ie,mt),dt===null?ot=hn:dt.sibling=hn,dt=hn);return a&&lt.forEach(function(Va){return l(he,Va)}),Tr&&us(he,mt),ot}function rt(he,ie,ge,Ve){var ot=ve(ge);if(typeof ot!="function")throw Error(r(150));if(ge=ot.call(ge),ge==null)throw Error(r(151));for(var dt=ot=null,lt=ie,mt=ie=0,hn=null,sr=ge.next();lt!==null&&!sr.done;mt++,sr=ge.next()){lt.index>mt?(hn=lt,lt=null):hn=lt.sibling;var Va=Ie(he,lt,sr.value,Ve);if(Va===null){lt===null&&(lt=hn);break}a&&lt&&Va.alternate===null&&l(he,lt),ie=E(Va,ie,mt),dt===null?ot=Va:dt.sibling=Va,dt=Va,lt=hn}if(sr.done)return v(he,lt),Tr&&us(he,mt),ot;if(lt===null){for(;!sr.done;mt++,sr=ge.next())sr=Ne(he,sr.value,Ve),sr!==null&&(ie=E(sr,ie,mt),dt===null?ot=sr:dt.sibling=sr,dt=sr);return Tr&&us(he,mt),ot}for(lt=y(he,lt);!sr.done;mt++,sr=ge.next())sr=Xe(lt,he,mt,sr.value,Ve),sr!==null&&(a&&sr.alternate!==null&&lt.delete(sr.key===null?mt:sr.key),ie=E(sr,ie,mt),dt===null?ot=sr:dt.sibling=sr,dt=sr);return a&&lt.forEach(function(Bf){return l(he,Bf)}),Tr&&us(he,mt),ot}function Yr(he,ie,ge,Ve){if(typeof ge=="object"&&ge!==null&&ge.type===A&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:e:{for(var ot=ge.key,dt=ie;dt!==null;){if(dt.key===ot){if(ot=ge.type,ot===A){if(dt.tag===7){v(he,dt.sibling),ie=S(dt,ge.props.children),ie.return=he,he=ie;break e}}else if(dt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===le&&C1(ot)===dt.type){v(he,dt.sibling),ie=S(dt,ge.props),ie.ref=pc(he,dt,ge),ie.return=he,he=ie;break e}v(he,dt);break}else l(he,dt);dt=dt.sibling}ge.type===A?(ie=_s(ge.props.children,he.mode,Ve,ge.key),ie.return=he,he=ie):(Ve=fd(ge.type,ge.key,ge.props,null,he.mode,Ve),Ve.ref=pc(he,ie,ge),Ve.return=he,he=Ve)}return O(he);case $:e:{for(dt=ge.key;ie!==null;){if(ie.key===dt)if(ie.tag===4&&ie.stateNode.containerInfo===ge.containerInfo&&ie.stateNode.implementation===ge.implementation){v(he,ie.sibling),ie=S(ie,ge.children||[]),ie.return=he,he=ie;break e}else{v(he,ie);break}else l(he,ie);ie=ie.sibling}ie=g0(ge,he.mode,Ve),ie.return=he,he=ie}return O(he);case le:return dt=ge._init,Yr(he,ie,dt(ge._payload),Ve)}if(Mt(ge))return Je(he,ie,ge,Ve);if(ve(ge))return rt(he,ie,ge,Ve);hs(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ie!==null&&ie.tag===6?(v(he,ie.sibling),ie=S(ie,ge),ie.return=he,he=ie):(v(he,ie),ie=f0(ge,he.mode,Ve),ie.return=he,he=ie),O(he)):v(he,ie)}return Yr}var $r=Th(!0),Fu=Th(!1),fc=oi(null),Ci=null,Ta=null,hl=null;function Yo(){hl=Ta=Ci=null}function Ru(a){var l=fc.current;Er(fc),a._currentValue=l}function Cn(a,l,v){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===v)break;a=a.return}}function Ia(a,l){Ci=a,hl=Ta=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Zn=!0),a.firstContext=null)}function Di(a){var l=a._currentValue;if(hl!==a)if(a={context:a,memoizedValue:l,next:null},Ta===null){if(Ci===null)throw Error(r(308));Ta=a,Ci.dependencies={lanes:0,firstContext:a}}else Ta=Ta.next=a;return l}var ps=null;function Ih(a){ps===null?ps=[a]:ps.push(a)}function Ou(a,l,v,y){var S=l.interleaved;return S===null?(v.next=v,Ih(l)):(v.next=S.next,S.next=v),l.interleaved=v,Zo(a,y)}function Zo(a,l){a.lanes|=l;var v=a.alternate;for(v!==null&&(v.lanes|=l),v=a,a=a.return;a!==null;)a.childLanes|=l,v=a.alternate,v!==null&&(v.childLanes|=l),v=a,a=a.return;return v.tag===3?v.stateNode:null}var Fi=!1;function Nu(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _1(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Ko(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Ri(a,l,v){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(er&2)!==0){var S=y.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),y.pending=l,Zo(a,v)}return S=y.interleaved,S===null?(l.next=l,Ih(y)):(l.next=S.next,S.next=l),y.interleaved=l,Zo(a,v)}function zu(a,l,v){if(l=l.updateQueue,l!==null&&(l=l.shared,(v&4194240)!==0)){var y=l.lanes;y&=a.pendingLanes,v|=y,l.lanes=v,va(a,v)}}function S1(a,l){var v=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,v===y)){var S=null,E=null;if(v=v.firstBaseUpdate,v!==null){do{var O={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};E===null?S=E=O:E=E.next=O,v=v.next}while(v!==null);E===null?S=E=l:E=E.next=l}else S=E=l;v={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:y.shared,effects:y.effects},a.updateQueue=v;return}a=v.lastBaseUpdate,a===null?v.firstBaseUpdate=l:a.next=l,v.lastBaseUpdate=l}function pl(a,l,v,y){var S=a.updateQueue;Fi=!1;var E=S.firstBaseUpdate,O=S.lastBaseUpdate,q=S.shared.pending;if(q!==null){S.shared.pending=null;var ee=q,xe=ee.next;ee.next=null,O===null?E=xe:O.next=xe,O=ee;var De=a.alternate;De!==null&&(De=De.updateQueue,q=De.lastBaseUpdate,q!==O&&(q===null?De.firstBaseUpdate=xe:q.next=xe,De.lastBaseUpdate=ee))}if(E!==null){var Ne=S.baseState;O=0,De=xe=ee=null,q=E;do{var Ie=q.lane,Xe=q.eventTime;if((y&Ie)===Ie){De!==null&&(De=De.next={eventTime:Xe,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Je=a,rt=q;switch(Ie=l,Xe=v,rt.tag){case 1:if(Je=rt.payload,typeof Je=="function"){Ne=Je.call(Xe,Ne,Ie);break e}Ne=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=rt.payload,Ie=typeof Je=="function"?Je.call(Xe,Ne,Ie):Je,Ie==null)break e;Ne=pe({},Ne,Ie);break e;case 2:Fi=!0}}q.callback!==null&&q.lane!==0&&(a.flags|=64,Ie=S.effects,Ie===null?S.effects=[q]:Ie.push(q))}else Xe={eventTime:Xe,lane:Ie,tag:q.tag,payload:q.payload,callback:q.callback,next:null},De===null?(xe=De=Xe,ee=Ne):De=De.next=Xe,O|=Ie;if(q=q.next,q===null){if(q=S.shared.pending,q===null)break;Ie=q,q=Ie.next,Ie.next=null,S.lastBaseUpdate=Ie,S.shared.pending=null}}while(!0);if(De===null&&(ee=Ne),S.baseState=ee,S.firstBaseUpdate=xe,S.lastBaseUpdate=De,l=S.shared.interleaved,l!==null){S=l;do O|=S.lane,S=S.next;while(S!==l)}else E===null&&(S.shared.lanes=0);Fa|=O,a.lanes=O,a.memoizedState=Ne}}function Lh(a,l,v){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var y=a[l],S=y.callback;if(S!==null){if(y.callback=null,y=v,typeof S!="function")throw Error(r(191,S));S.call(y)}}}var gc={},So=oi(gc),vc=oi(gc),fl=oi(gc);function qo(a){if(a===gc)throw Error(r(174));return a}function Ph(a,l){switch(_r(fl,l),_r(vc,a),_r(So,gc),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Zt(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Zt(l,a)}Er(So),_r(So,l)}function La(){Er(So),Er(vc),Er(fl)}function Ah(a){qo(fl.current);var l=qo(So.current),v=Zt(l,a.type);l!==v&&(_r(vc,a),_r(So,v))}function Vu(a){vc.current===a&&(Er(So),Er(vc))}var Fr=oi(0);function fs(a){for(var l=a;l!==null;){if(l.tag===13){var v=l.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Dh=[];function Bu(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var mc=D.ReactCurrentDispatcher,Fh=D.ReactCurrentBatchConfig,Pa=0,zr=null,Xr=null,on=null,gl=!1,yc=!1,gs=0,Ot=0;function Vn(){throw Error(r(321))}function Rh(a,l){if(l===null)return!1;for(var v=0;v<l.length&&v<a.length;v++)if(!ye(a[v],l[v]))return!1;return!0}function vs(a,l,v,y,S,E){if(Pa=E,zr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,mc.current=a===null||a.memoizedState===null?wf:Yu,a=v(y,S),yc){E=0;do{if(yc=!1,gs=0,25<=E)throw Error(r(301));E+=1,on=Xr=null,l.updateQueue=null,mc.current=bl,a=v(y,S)}while(yc)}if(mc.current=Xu,l=Xr!==null&&Xr.next!==null,Pa=0,on=Xr=zr=null,gl=!1,l)throw Error(r(300));return a}function $u(){var a=gs!==0;return gs=0,a}function ko(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?zr.memoizedState=on=a:on=on.next=a,on}function Oi(){if(Xr===null){var a=zr.alternate;a=a!==null?a.memoizedState:null}else a=Xr.next;var l=on===null?zr.memoizedState:on.next;if(l!==null)on=l,Xr=a;else{if(a===null)throw Error(r(310));Xr=a,a={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},on===null?zr.memoizedState=on=a:on=on.next=a}return on}function Bn(a,l){return typeof l=="function"?l(a):l}function Oh(a){var l=Oi(),v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=a;var y=Xr,S=y.baseQueue,E=v.pending;if(E!==null){if(S!==null){var O=S.next;S.next=E.next,E.next=O}y.baseQueue=S=E,v.pending=null}if(S!==null){E=S.next,y=y.baseState;var q=O=null,ee=null,xe=E;do{var De=xe.lane;if((Pa&De)===De)ee!==null&&(ee=ee.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),y=xe.hasEagerState?xe.eagerState:a(y,xe.action);else{var Ne={lane:De,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};ee===null?(q=ee=Ne,O=y):ee=ee.next=Ne,zr.lanes|=De,Fa|=De}xe=xe.next}while(xe!==null&&xe!==E);ee===null?O=y:ee.next=q,ye(y,l.memoizedState)||(Zn=!0),l.memoizedState=y,l.baseState=O,l.baseQueue=ee,v.lastRenderedState=y}if(a=v.interleaved,a!==null){S=a;do E=S.lane,zr.lanes|=E,Fa|=E,S=S.next;while(S!==a)}else S===null&&(v.lanes=0);return[l.memoizedState,v.dispatch]}function vl(a){var l=Oi(),v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=a;var y=v.dispatch,S=v.pending,E=l.memoizedState;if(S!==null){v.pending=null;var O=S=S.next;do E=a(E,O.action),O=O.next;while(O!==S);ye(E,l.memoizedState)||(Zn=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),v.lastRenderedState=E}return[E,y]}function Wu(){}function Nh(a,l){var v=zr,y=Oi(),S=l(),E=!ye(y.memoizedState,S);if(E&&(y.memoizedState=S,Zn=!0),y=y.queue,Mo(Qo.bind(null,v,y,a),[a]),y.getSnapshot!==l||E||on!==null&&on.memoizedState.tag&1){if(v.flags|=2048,ml(9,ci.bind(null,v,y,S,l),void 0,null),dn===null)throw Error(r(349));(Pa&30)!==0||zh(v,l,S)}return S}function zh(a,l,v){a.flags|=16384,a={getSnapshot:l,value:v},l=zr.updateQueue,l===null?(l={lastEffect:null,stores:null},zr.updateQueue=l,l.stores=[a]):(v=l.stores,v===null?l.stores=[a]:v.push(a))}function ci(a,l,v,y){l.value=v,l.getSnapshot=y,Hu(l)&&Vh(a)}function Qo(a,l,v){return v(function(){Hu(l)&&Vh(a)})}function Hu(a){var l=a.getSnapshot;a=a.value;try{var v=l();return!ye(a,v)}catch{return!0}}function Vh(a){var l=Zo(a,1);l!==null&&no(l,a,1,-1)}function bc(a){var l=ko();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:a},l.queue=a,a=a.dispatch=L1.bind(null,zr,a),[l.memoizedState,a]}function ml(a,l,v,y){return a={tag:a,create:l,destroy:v,deps:y,next:null},l=zr.updateQueue,l===null?(l={lastEffect:null,stores:null},zr.updateQueue=l,l.lastEffect=a.next=a):(v=l.lastEffect,v===null?l.lastEffect=a.next=a:(y=v.next,v.next=a,a.next=y,l.lastEffect=a)),a}function Uu(){return Oi().memoizedState}function xc(a,l,v,y){var S=ko();zr.flags|=a,S.memoizedState=ml(1|l,v,void 0,y===void 0?null:y)}function yl(a,l,v,y){var S=Oi();y=y===void 0?null:y;var E=void 0;if(Xr!==null){var O=Xr.memoizedState;if(E=O.destroy,y!==null&&Rh(y,O.deps)){S.memoizedState=ml(l,v,E,y);return}}zr.flags|=a,S.memoizedState=ml(1|l,v,E,y)}function ju(a,l){return xc(8390656,8,a,l)}function Mo(a,l){return yl(2048,8,a,l)}function k1(a,l){return yl(4,2,a,l)}function Go(a,l){return yl(4,4,a,l)}function Bh(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function $h(a,l,v){return v=v!=null?v.concat([a]):null,yl(4,4,Bh.bind(null,l,a),v)}function wc(){}function M1(a,l){var v=Oi();l=l===void 0?null:l;var y=v.memoizedState;return y!==null&&l!==null&&Rh(l,y[1])?y[0]:(v.memoizedState=[a,l],a)}function E1(a,l){var v=Oi();l=l===void 0?null:l;var y=v.memoizedState;return y!==null&&l!==null&&Rh(l,y[1])?y[0]:(a=a(),v.memoizedState=[a,l],a)}function T1(a,l,v){return(Pa&21)===0?(a.baseState&&(a.baseState=!1,Zn=!0),a.memoizedState=v):(ye(v,l)||(v=Us(),zr.lanes|=v,Fa|=v,a.baseState=!0),l)}function I1(a,l){var v=qt;qt=v!==0&&4>v?v:4,a(!0);var y=Fh.transition;Fh.transition={};try{a(!1),l()}finally{qt=v,Fh.transition=y}}function Wh(){return Oi().memoizedState}function xf(a,l,v){var y=Na(a);if(v={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null},Hh(a))Yn(l,v);else if(v=Ou(a,l,v,y),v!==null){var S=Qn();no(v,a,y,S),Gi(v,l,y)}}function L1(a,l,v){var y=Na(a),S={lane:y,action:v,hasEagerState:!1,eagerState:null,next:null};if(Hh(a))Yn(l,S);else{var E=a.alternate;if(a.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var O=l.lastRenderedState,q=E(O,v);if(S.hasEagerState=!0,S.eagerState=q,ye(q,O)){var ee=l.interleaved;ee===null?(S.next=S,Ih(l)):(S.next=ee.next,ee.next=S),l.interleaved=S;return}}catch{}finally{}v=Ou(a,l,S,y),v!==null&&(S=Qn(),no(v,a,y,S),Gi(v,l,y))}}function Hh(a){var l=a.alternate;return a===zr||l!==null&&l===zr}function Yn(a,l){yc=gl=!0;var v=a.pending;v===null?l.next=l:(l.next=v.next,v.next=l),a.pending=l}function Gi(a,l,v){if((v&4194240)!==0){var y=l.lanes;y&=a.pendingLanes,v|=y,l.lanes=v,va(a,v)}}var Xu={readContext:Di,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},wf={readContext:Di,useCallback:function(a,l){return ko().memoizedState=[a,l===void 0?null:l],a},useContext:Di,useEffect:ju,useImperativeHandle:function(a,l,v){return v=v!=null?v.concat([a]):null,xc(4194308,4,Bh.bind(null,l,a),v)},useLayoutEffect:function(a,l){return xc(4194308,4,a,l)},useInsertionEffect:function(a,l){return xc(4,2,a,l)},useMemo:function(a,l){var v=ko();return l=l===void 0?null:l,a=a(),v.memoizedState=[a,l],a},useReducer:function(a,l,v){var y=ko();return l=v!==void 0?v(l):l,y.memoizedState=y.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},y.queue=a,a=a.dispatch=xf.bind(null,zr,a),[y.memoizedState,a]},useRef:function(a){var l=ko();return a={current:a},l.memoizedState=a},useState:bc,useDebugValue:wc,useDeferredValue:function(a){return ko().memoizedState=a},useTransition:function(){var a=bc(!1),l=a[0];return a=I1.bind(null,a[1]),ko().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,v){var y=zr,S=ko();if(Tr){if(v===void 0)throw Error(r(407));v=v()}else{if(v=l(),dn===null)throw Error(r(349));(Pa&30)!==0||zh(y,l,v)}S.memoizedState=v;var E={value:v,getSnapshot:l};return S.queue=E,ju(Qo.bind(null,y,E,a),[a]),y.flags|=2048,ml(9,ci.bind(null,y,E,v,l),void 0,null),v},useId:function(){var a=ko(),l=dn.identifierPrefix;if(Tr){var v=xo,y=bo;v=(y&~(1<<32-ni(y)-1)).toString(32)+v,l=":"+l+"R"+v,v=gs++,0<v&&(l+="H"+v.toString(32)),l+=":"}else v=Ot++,l=":"+l+"r"+v.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},Yu={readContext:Di,useCallback:M1,useContext:Di,useEffect:Mo,useImperativeHandle:$h,useInsertionEffect:k1,useLayoutEffect:Go,useMemo:E1,useReducer:Oh,useRef:Uu,useState:function(){return Oh(Bn)},useDebugValue:wc,useDeferredValue:function(a){var l=Oi();return T1(l,Xr.memoizedState,a)},useTransition:function(){var a=Oh(Bn)[0],l=Oi().memoizedState;return[a,l]},useMutableSource:Wu,useSyncExternalStore:Nh,useId:Wh,unstable_isNewReconciler:!1},bl={readContext:Di,useCallback:M1,useContext:Di,useEffect:Mo,useImperativeHandle:$h,useInsertionEffect:k1,useLayoutEffect:Go,useMemo:E1,useReducer:vl,useRef:Uu,useState:function(){return vl(Bn)},useDebugValue:wc,useDeferredValue:function(a){var l=Oi();return Xr===null?l.memoizedState=a:T1(l,Xr.memoizedState,a)},useTransition:function(){var a=vl(Bn)[0],l=Oi().memoizedState;return[a,l]},useMutableSource:Wu,useSyncExternalStore:Nh,useId:Wh,unstable_isNewReconciler:!1};function Ni(a,l){if(a&&a.defaultProps){l=pe({},l),a=a.defaultProps;for(var v in a)l[v]===void 0&&(l[v]=a[v]);return l}return l}function Zu(a,l,v,y){l=a.memoizedState,v=v(y,l),v=v==null?l:pe({},l,v),a.memoizedState=v,a.lanes===0&&(a.updateQueue.baseState=v)}var Ku={isMounted:function(a){return(a=a._reactInternals)?mi(a)===a:!1},enqueueSetState:function(a,l,v){a=a._reactInternals;var y=Qn(),S=Na(a),E=Ko(y,S);E.payload=l,v!=null&&(E.callback=v),l=Ri(a,E,S),l!==null&&(no(l,a,S,y),zu(l,a,S))},enqueueReplaceState:function(a,l,v){a=a._reactInternals;var y=Qn(),S=Na(a),E=Ko(y,S);E.tag=1,E.payload=l,v!=null&&(E.callback=v),l=Ri(a,E,S),l!==null&&(no(l,a,S,y),zu(l,a,S))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var v=Qn(),y=Na(a),S=Ko(v,y);S.tag=2,l!=null&&(S.callback=l),l=Ri(a,S,y),l!==null&&(no(l,a,y,v),zu(l,a,y))}};function Uh(a,l,v,y,S,E,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,E,O):l.prototype&&l.prototype.isPureReactComponent?!je(v,y)||!je(S,E):!0}function ms(a,l,v){var y=!1,S=Ma,E=l.contextType;return typeof E=="object"&&E!==null?E=Di(E):(S=si(l)?Xn:On.current,y=l.contextTypes,E=(y=y!=null)?ul(a,S):Ma),l=new l(v,E),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Ku,a.stateNode=l,l._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=E),l}function xl(a,l,v,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(v,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(v,y),l.state!==a&&Ku.enqueueReplaceState(l,l.state,null)}function jh(a,l,v,y){var S=a.stateNode;S.props=v,S.state=a.memoizedState,S.refs={},Nu(a);var E=l.contextType;typeof E=="object"&&E!==null?S.context=Di(E):(E=si(l)?Xn:On.current,S.context=ul(a,E)),S.state=a.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(Zu(a,l,E,v),S.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&Ku.enqueueReplaceState(S,S.state,null),pl(a,v,S,y),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function ys(a,l){try{var v="",y=l;do v+=fe(y),y=y.return;while(y);var S=v}catch(E){S=`
Error generating stack: `+E.message+`
`+E.stack}return{value:a,source:l,stack:S,digest:null}}function qu(a,l,v){return{value:a,source:null,stack:v??null,digest:l??null}}function wl(a,l){try{console.error(l.value)}catch(v){setTimeout(function(){throw v})}}var P1=typeof WeakMap=="function"?WeakMap:Map;function Cc(a,l,v){v=Ko(-1,v),v.tag=3,v.payload={element:null};var y=l.value;return v.callback=function(){sd||(sd=!0,s0=y),wl(a,l)},v}function Qu(a,l,v){v=Ko(-1,v),v.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var S=l.value;v.payload=function(){return y(S)},v.callback=function(){wl(a,l)}}var E=a.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(v.callback=function(){wl(a,l),typeof y!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),v}function _c(a,l,v){var y=a.pingCache;if(y===null){y=a.pingCache=new P1;var S=new Set;y.set(l,S)}else S=y.get(l),S===void 0&&(S=new Set,y.set(l,S));S.has(v)||(S.add(v),a=If.bind(null,a,l,v),l.then(a,a))}function A1(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function Xh(a,l,v,y,S){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(l=Ko(-1,1),l.tag=2,Ri(v,l,1))),v.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var Gu=D.ReactCurrentOwner,Zn=!1;function _n(a,l,v,y){l.child=a===null?Fu(l,null,v,y):$r(l,a.child,v,y)}function D1(a,l,v,y,S){v=v.render;var E=l.ref;return Ia(l,S),y=vs(a,l,v,y,E,S),v=$u(),a!==null&&!Zn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,Ji(a,l,S)):(Tr&&v&&dc(l),l.flags|=1,_n(a,l,y,S),l.child)}function Yh(a,l,v,y,S){if(a===null){var E=v.type;return typeof E=="function"&&!pd(E)&&E.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(l.tag=15,l.type=E,Eo(a,l,E,y,S)):(a=fd(v.type,null,y,l,l.mode,S),a.ref=l.ref,a.return=l,l.child=a)}if(E=a.child,(a.lanes&S)===0){var O=E.memoizedProps;if(v=v.compare,v=v!==null?v:je,v(O,y)&&a.ref===l.ref)return Ji(a,l,S)}return l.flags|=1,a=io(E,y),a.ref=l.ref,a.return=l,l.child=a}function Eo(a,l,v,y,S){if(a!==null){var E=a.memoizedProps;if(je(E,y)&&a.ref===l.ref)if(Zn=!1,l.pendingProps=y=E,(a.lanes&S)!==0)(a.flags&131072)!==0&&(Zn=!0);else return l.lanes=a.lanes,Ji(a,l,S)}return qh(a,l,v,y,S)}function Zh(a,l,v){var y=l.pendingProps,S=y.children,E=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(kl,Si),Si|=v;else{if((v&1073741824)===0)return a=E!==null?E.baseLanes|v:v,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,_r(kl,Si),Si|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:v,_r(kl,Si),Si|=y}else E!==null?(y=E.baseLanes|v,l.memoizedState=null):y=v,_r(kl,Si),Si|=y;return _n(a,l,S,v),l.child}function Kh(a,l){var v=l.ref;(a===null&&v!==null||a!==null&&a.ref!==v)&&(l.flags|=512,l.flags|=2097152)}function qh(a,l,v,y,S){var E=si(v)?Xn:On.current;return E=ul(l,E),Ia(l,S),v=vs(a,l,v,y,E,S),y=$u(),a!==null&&!Zn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,Ji(a,l,S)):(Tr&&y&&dc(l),l.flags|=1,_n(a,l,v,S),l.child)}function Qh(a,l,v,y,S){if(si(v)){var E=!0;Li(l)}else E=!1;if(Ia(l,S),l.stateNode===null)ed(a,l),ms(l,v,y),jh(l,v,y,S),y=!0;else if(a===null){var O=l.stateNode,q=l.memoizedProps;O.props=q;var ee=O.context,xe=v.contextType;typeof xe=="object"&&xe!==null?xe=Di(xe):(xe=si(v)?Xn:On.current,xe=ul(l,xe));var De=v.getDerivedStateFromProps,Ne=typeof De=="function"||typeof O.getSnapshotBeforeUpdate=="function";Ne||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q!==y||ee!==xe)&&xl(l,O,y,xe),Fi=!1;var Ie=l.memoizedState;O.state=Ie,pl(l,y,O,S),ee=l.memoizedState,q!==y||Ie!==ee||ai.current||Fi?(typeof De=="function"&&(Zu(l,v,De,y),ee=l.memoizedState),(q=Fi||Uh(l,v,q,y,Ie,ee,xe))?(Ne||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=ee),O.props=y,O.state=ee,O.context=xe,y=q):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{O=l.stateNode,_1(a,l),q=l.memoizedProps,xe=l.type===l.elementType?q:Ni(l.type,q),O.props=xe,Ne=l.pendingProps,Ie=O.context,ee=v.contextType,typeof ee=="object"&&ee!==null?ee=Di(ee):(ee=si(v)?Xn:On.current,ee=ul(l,ee));var Xe=v.getDerivedStateFromProps;(De=typeof Xe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q!==Ne||Ie!==ee)&&xl(l,O,y,ee),Fi=!1,Ie=l.memoizedState,O.state=Ie,pl(l,y,O,S);var Je=l.memoizedState;q!==Ne||Ie!==Je||ai.current||Fi?(typeof Xe=="function"&&(Zu(l,v,Xe,y),Je=l.memoizedState),(xe=Fi||Uh(l,v,xe,y,Ie,Je,ee)||!1)?(De||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,Je,ee),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,Je,ee)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||q===a.memoizedProps&&Ie===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===a.memoizedProps&&Ie===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Je),O.props=y,O.state=Je,O.context=ee,y=xe):(typeof O.componentDidUpdate!="function"||q===a.memoizedProps&&Ie===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===a.memoizedProps&&Ie===a.memoizedState||(l.flags|=1024),y=!1)}return Gh(a,l,v,y,E,S)}function Gh(a,l,v,y,S,E){Kh(a,l);var O=(l.flags&128)!==0;if(!y&&!O)return S&&m1(l,v,!1),Ji(a,l,E);y=l.stateNode,Gu.current=l;var q=O&&typeof v.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,a!==null&&O?(l.child=$r(l,a.child,null,E),l.child=$r(l,null,q,E)):_n(a,l,q,E),l.memoizedState=y.state,S&&m1(l,v,!0),l.child}function F1(a){var l=a.stateNode;l.pendingContext?g1(a,l.pendingContext,l.pendingContext!==l.context):l.context&&g1(a,l.context,!1),Ph(a,l.containerInfo)}function To(a,l,v,y,S){return Co(),_o(S),l.flags|=256,_n(a,l,v,y),l.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function kc(a){return{baseLanes:a,cachePool:null,transitions:null}}function Ju(a,l,v){var y=l.pendingProps,S=Fr.current,E=!1,O=(l.flags&128)!==0,q;if((q=O)||(q=a!==null&&a.memoizedState===null?!1:(S&2)!==0),q?(E=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),_r(Fr,S&1),a===null)return li(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=y.children,a=y.fallback,E?(y=l.mode,E=l.child,O={mode:"hidden",children:O},(y&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=O):E=gd(O,y,0,null),a=_s(a,y,v,null),E.return=l,a.return=l,E.sibling=a,l.child=E,l.child.memoizedState=kc(v),l.memoizedState=Sc,a):Cl(l,O));if(S=a.memoizedState,S!==null&&(q=S.dehydrated,q!==null))return pt(a,l,O,y,q,S,v);if(E){E=y.fallback,O=l.mode,S=a.child,q=S.sibling;var ee={mode:"hidden",children:y.children};return(O&1)===0&&l.child!==S?(y=l.child,y.childLanes=0,y.pendingProps=ee,l.deletions=null):(y=io(S,ee),y.subtreeFlags=S.subtreeFlags&14680064),q!==null?E=io(q,E):(E=_s(E,O,v,null),E.flags|=2),E.return=l,y.return=l,y.sibling=E,l.child=y,y=E,E=l.child,O=a.child.memoizedState,O=O===null?kc(v):{baseLanes:O.baseLanes|v,cachePool:null,transitions:O.transitions},E.memoizedState=O,E.childLanes=a.childLanes&~v,l.memoizedState=Sc,y}return E=a.child,a=E.sibling,y=io(E,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=v),y.return=l,y.sibling=null,a!==null&&(v=l.deletions,v===null?(l.deletions=[a],l.flags|=16):v.push(a)),l.child=y,l.memoizedState=null,y}function Cl(a,l){return l=gd({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Jo(a,l,v,y){return y!==null&&_o(y),$r(l,a.child,null,v),a=Cl(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function pt(a,l,v,y,S,E,O){if(v)return l.flags&256?(l.flags&=-257,y=qu(Error(r(422))),Jo(a,l,O,y)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(E=y.fallback,S=l.mode,y=gd({mode:"visible",children:y.children},S,0,null),E=_s(E,S,O,null),E.flags|=2,y.return=l,E.return=l,y.sibling=E,l.child=y,(l.mode&1)!==0&&$r(l,a.child,null,O),l.child.memoizedState=kc(O),l.memoizedState=Sc,E);if((l.mode&1)===0)return Jo(a,l,O,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var q=y.dgst;return y=q,E=Error(r(419)),y=qu(E,y,void 0),Jo(a,l,O,y)}if(q=(O&a.childLanes)!==0,Zn||q){if(y=dn,y!==null){switch(O&-O){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|O))!==0?0:S,S!==0&&S!==E.retryLane&&(E.retryLane=S,Zo(a,S),no(y,a,S,-1))}return p0(),y=qu(Error(r(421))),Jo(a,l,O,y)}return S.data==="$?"?(l.flags|=128,l.child=a.child,l=Lf.bind(null,a),S._reactRetry=l,null):(a=E.treeContext,wi=Sa(S.nextSibling),zn=l,Tr=!0,Qi=null,a!==null&&(Pi[Ai++]=bo,Pi[Ai++]=xo,Pi[Ai++]=cs,bo=a.id,xo=a.overflow,cs=l),l=Cl(l,y.children),l.flags|=4096,l)}function Mc(a,l,v){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),Cn(a.return,l,v)}function Ec(a,l,v,y,S){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:v,tailMode:S}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=v,E.tailMode=S)}function Aa(a,l,v){var y=l.pendingProps,S=y.revealOrder,E=y.tail;if(_n(a,l,y.children,v),y=Fr.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Mc(a,v,l);else if(a.tag===19)Mc(a,v,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(_r(Fr,y),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(v=l.child,S=null;v!==null;)a=v.alternate,a!==null&&fs(a)===null&&(S=v),v=v.sibling;v=S,v===null?(S=l.child,l.child=null):(S=v.sibling,v.sibling=null),Ec(l,!1,S,v,E);break;case"backwards":for(v=null,S=l.child,l.child=null;S!==null;){if(a=S.alternate,a!==null&&fs(a)===null){l.child=S;break}a=S.sibling,S.sibling=v,v=S,S=a}Ec(l,!0,v,null,E);break;case"together":Ec(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ed(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Ji(a,l,v){if(a!==null&&(l.dependencies=a.dependencies),Fa|=l.lanes,(v&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(r(153));if(l.child!==null){for(a=l.child,v=io(a,a.pendingProps),l.child=v,v.return=l;a.sibling!==null;)a=a.sibling,v=v.sibling=io(a,a.pendingProps),v.return=l;v.sibling=null}return l.child}function R1(a,l,v){switch(l.tag){case 3:F1(l),Co();break;case 5:Ah(l);break;case 1:si(l.type)&&Li(l);break;case 4:Ph(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,S=l.memoizedProps.value;_r(fc,y._currentValue),y._currentValue=S;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(_r(Fr,Fr.current&1),l.flags|=128,null):(v&l.child.childLanes)!==0?Ju(a,l,v):(_r(Fr,Fr.current&1),a=Ji(a,l,v),a!==null?a.sibling:null);_r(Fr,Fr.current&1);break;case 19:if(y=(v&l.childLanes)!==0,(a.flags&128)!==0){if(y)return Aa(a,l,v);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),_r(Fr,Fr.current),y)break;return null;case 22:case 23:return l.lanes=0,Zh(a,l,v)}return Ji(a,l,v)}var Sn,Jh,O1,e0;Sn=function(a,l){for(var v=l.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break;for(;v.sibling===null;){if(v.return===null||v.return===l)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Jh=function(){},O1=function(a,l,v,y){var S=a.memoizedProps;if(S!==y){a=l.stateNode,qo(So.current);var E=null;switch(v){case"input":S=it(a,S),y=it(a,y),E=[];break;case"select":S=pe({},S,{value:void 0}),y=pe({},y,{value:void 0}),E=[];break;case"textarea":S=Yt(a,S),y=Yt(a,y),E=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=ku)}St(v,y);var O;v=null;for(xe in S)if(!y.hasOwnProperty(xe)&&S.hasOwnProperty(xe)&&S[xe]!=null)if(xe==="style"){var q=S[xe];for(O in q)q.hasOwnProperty(O)&&(v||(v={}),v[O]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(i.hasOwnProperty(xe)?E||(E=[]):(E=E||[]).push(xe,null));for(xe in y){var ee=y[xe];if(q=S!=null?S[xe]:void 0,y.hasOwnProperty(xe)&&ee!==q&&(ee!=null||q!=null))if(xe==="style")if(q){for(O in q)!q.hasOwnProperty(O)||ee&&ee.hasOwnProperty(O)||(v||(v={}),v[O]="");for(O in ee)ee.hasOwnProperty(O)&&q[O]!==ee[O]&&(v||(v={}),v[O]=ee[O])}else v||(E||(E=[]),E.push(xe,v)),v=ee;else xe==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,q=q?q.__html:void 0,ee!=null&&q!==ee&&(E=E||[]).push(xe,ee)):xe==="children"?typeof ee!="string"&&typeof ee!="number"||(E=E||[]).push(xe,""+ee):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(i.hasOwnProperty(xe)?(ee!=null&&xe==="onScroll"&&Mr("scroll",a),E||q===ee||(E=[])):(E=E||[]).push(xe,ee))}v&&(E=E||[]).push("style",v);var xe=E;(l.updateQueue=xe)&&(l.flags|=4)}},e0=function(a,l,v,y){v!==y&&(l.flags|=4)};function Tc(a,l){if(!Tr)switch(a.tailMode){case"hidden":l=a.tail;for(var v=null;l!==null;)l.alternate!==null&&(v=l),l=l.sibling;v===null?a.tail=null:v.sibling=null;break;case"collapsed":v=a.tail;for(var y=null;v!==null;)v.alternate!==null&&(y=v),v=v.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function kn(a){var l=a.alternate!==null&&a.alternate.child===a.child,v=0,y=0;if(l)for(var S=a.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)v|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=y,a.childLanes=v,l}function Cf(a,l,v){var y=l.pendingProps;switch(ds(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(l),null;case 1:return si(l.type)&&Iu(),kn(l),null;case 3:return y=l.stateNode,La(),Er(ai),Er(On),Bu(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(hc(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Qi!==null&&(u0(Qi),Qi=null))),Jh(a,l),kn(l),null;case 5:Vu(l);var S=qo(fl.current);if(v=l.type,a!==null&&l.stateNode!=null)O1(a,l,v,y,S),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(r(166));return kn(l),null}if(a=qo(So.current),hc(l)){y=l.stateNode,v=l.type;var E=l.memoizedProps;switch(y[mo]=l,y[ka]=E,a=(l.mode&1)!==0,v){case"dialog":Mr("cancel",y),Mr("close",y);break;case"iframe":case"object":case"embed":Mr("load",y);break;case"video":case"audio":for(S=0;S<Uo.length;S++)Mr(Uo[S],y);break;case"source":Mr("error",y);break;case"img":case"image":case"link":Mr("error",y),Mr("load",y);break;case"details":Mr("toggle",y);break;case"input":He(y,E),Mr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!E.multiple},Mr("invalid",y);break;case"textarea":cn(y,E),Mr("invalid",y)}St(v,E),S=null;for(var O in E)if(E.hasOwnProperty(O)){var q=E[O];O==="children"?typeof q=="string"?y.textContent!==q&&(E.suppressHydrationWarning!==!0&&sc(y.textContent,q,a),S=["children",q]):typeof q=="number"&&y.textContent!==""+q&&(E.suppressHydrationWarning!==!0&&sc(y.textContent,q,a),S=["children",""+q]):i.hasOwnProperty(O)&&q!=null&&O==="onScroll"&&Mr("scroll",y)}switch(v){case"input":Te(y),Qt(y,E,!0);break;case"textarea":Te(y),dr(y);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(y.onclick=ku)}y=S,l.updateQueue=y,y!==null&&(l.flags|=4)}else{O=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Rt(v)),a==="http://www.w3.org/1999/xhtml"?v==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=O.createElement(v,{is:y.is}):(a=O.createElement(v),v==="select"&&(O=a,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):a=O.createElementNS(a,v),a[mo]=l,a[ka]=y,Sn(a,l,!1,!1),l.stateNode=a;e:{switch(O=Ct(v,y),v){case"dialog":Mr("cancel",a),Mr("close",a),S=y;break;case"iframe":case"object":case"embed":Mr("load",a),S=y;break;case"video":case"audio":for(S=0;S<Uo.length;S++)Mr(Uo[S],a);S=y;break;case"source":Mr("error",a),S=y;break;case"img":case"image":case"link":Mr("error",a),Mr("load",a),S=y;break;case"details":Mr("toggle",a),S=y;break;case"input":He(a,y),S=it(a,y),Mr("invalid",a);break;case"option":S=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},S=pe({},y,{value:void 0}),Mr("invalid",a);break;case"textarea":cn(a,y),S=Yt(a,y),Mr("invalid",a);break;default:S=y}St(v,S),q=S;for(E in q)if(q.hasOwnProperty(E)){var ee=q[E];E==="style"?_t(a,ee):E==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&Kr(a,ee)):E==="children"?typeof ee=="string"?(v!=="textarea"||ee!=="")&&hr(a,ee):typeof ee=="number"&&hr(a,""+ee):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?ee!=null&&E==="onScroll"&&Mr("scroll",a):ee!=null&&L(a,E,ee,O))}switch(v){case"input":Te(a),Qt(a,y,!1);break;case"textarea":Te(a),dr(a);break;case"option":y.value!=null&&a.setAttribute("value",""+Ee(y.value));break;case"select":a.multiple=!!y.multiple,E=y.value,E!=null?gt(a,!!y.multiple,E,!1):y.defaultValue!=null&&gt(a,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=ku)}switch(v){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return kn(l),null;case 6:if(a&&l.stateNode!=null)e0(a,l,a.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(r(166));if(v=qo(fl.current),qo(So.current),hc(l)){if(y=l.stateNode,v=l.memoizedProps,y[mo]=l,(E=y.nodeValue!==v)&&(a=zn,a!==null))switch(a.tag){case 3:sc(y.nodeValue,v,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&sc(y.nodeValue,v,(a.mode&1)!==0)}E&&(l.flags|=4)}else y=(v.nodeType===9?v:v.ownerDocument).createTextNode(y),y[mo]=l,l.stateNode=y}return kn(l),null;case 13:if(Er(Fr),y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Tr&&wi!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Eh(),Co(),l.flags|=98560,E=!1;else if(E=hc(l),y!==null&&y.dehydrated!==null){if(a===null){if(!E)throw Error(r(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[mo]=l}else Co(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;kn(l),E=!1}else Qi!==null&&(u0(Qi),Qi=null),E=!0;if(!E)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=v,l):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(Fr.current&1)!==0?an===0&&(an=3):p0())),l.updateQueue!==null&&(l.flags|=4),kn(l),null);case 4:return La(),Jh(a,l),a===null&&Ca(l.stateNode.containerInfo),kn(l),null;case 10:return Ru(l.type._context),kn(l),null;case 17:return si(l.type)&&Iu(),kn(l),null;case 19:if(Er(Fr),E=l.memoizedState,E===null)return kn(l),null;if(y=(l.flags&128)!==0,O=E.rendering,O===null)if(y)Tc(E,!1);else{if(an!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(O=fs(a),O!==null){for(l.flags|=128,Tc(E,!1),y=O.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=v,v=l.child;v!==null;)E=v,a=y,E.flags&=14680066,O=E.alternate,O===null?(E.childLanes=0,E.lanes=a,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=O.childLanes,E.lanes=O.lanes,E.child=O.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=O.memoizedProps,E.memoizedState=O.memoizedState,E.updateQueue=O.updateQueue,E.type=O.type,a=O.dependencies,E.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),v=v.sibling;return _r(Fr,Fr.current&1|2),l.child}a=a.sibling}E.tail!==null&&yr()>bs&&(l.flags|=128,y=!0,Tc(E,!1),l.lanes=4194304)}else{if(!y)if(a=fs(O),a!==null){if(l.flags|=128,y=!0,v=a.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),Tc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!O.alternate&&!Tr)return kn(l),null}else 2*yr()-E.renderingStartTime>bs&&v!==1073741824&&(l.flags|=128,y=!0,Tc(E,!1),l.lanes=4194304);E.isBackwards?(O.sibling=l.child,l.child=O):(v=E.last,v!==null?v.sibling=O:l.child=O,E.last=O)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=yr(),l.sibling=null,v=Fr.current,_r(Fr,y?v&1|2:v&1),l):(kn(l),null);case 22:case 23:return h0(),y=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(Si&1073741824)!==0&&(kn(l),l.subtreeFlags&6&&(l.flags|=8192)):kn(l),null;case 24:return null;case 25:return null}throw Error(r(156,l.tag))}function _f(a,l){switch(ds(l),l.tag){case 1:return si(l.type)&&Iu(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return La(),Er(ai),Er(On),Bu(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Vu(l),null;case 13:if(Er(Fr),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Co()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Er(Fr),null;case 4:return La(),null;case 10:return Ru(l.type._context),null;case 22:case 23:return h0(),null;case 24:return null;default:return null}}var td=!1,Rr=!1,Kn=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function _l(a,l){var v=a.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(y){Vr(a,l,y)}else v.current=null}function Ic(a,l,v){try{v()}catch(y){Vr(a,l,y)}}var N1=!1;function Sf(a,l){if(lc=su,a=gr(),tc(a)){if("selectionStart"in a)var v={start:a.selectionStart,end:a.selectionEnd};else e:{v=(v=a.ownerDocument)&&v.defaultView||window;var y=v.getSelection&&v.getSelection();if(y&&y.rangeCount!==0){v=y.anchorNode;var S=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{v.nodeType,E.nodeType}catch{v=null;break e}var O=0,q=-1,ee=-1,xe=0,De=0,Ne=a,Ie=null;t:for(;;){for(var Xe;Ne!==v||S!==0&&Ne.nodeType!==3||(q=O+S),Ne!==E||y!==0&&Ne.nodeType!==3||(ee=O+y),Ne.nodeType===3&&(O+=Ne.nodeValue.length),(Xe=Ne.firstChild)!==null;)Ie=Ne,Ne=Xe;for(;;){if(Ne===a)break t;if(Ie===v&&++xe===S&&(q=O),Ie===E&&++De===y&&(ee=O),(Xe=Ne.nextSibling)!==null)break;Ne=Ie,Ie=Ne.parentNode}Ne=Xe}v=q===-1||ee===-1?null:{start:q,end:ee}}else v=null}v=v||{start:0,end:0}}else v=null;for(ss={focusedElem:a,selectionRange:v},su=!1,Ke=l;Ke!==null;)if(l=Ke,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Ke=a;else for(;Ke!==null;){l=Ke;try{var Je=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Je!==null){var rt=Je.memoizedProps,Yr=Je.memoizedState,he=l.stateNode,ie=he.getSnapshotBeforeUpdate(l.elementType===l.type?rt:Ni(l.type,rt),Yr);he.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ge=l.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ve){Vr(l,l.return,Ve)}if(a=l.sibling,a!==null){a.return=l.return,Ke=a;break}Ke=l.return}return Je=N1,N1=!1,Je}function ea(a,l,v){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&a)===a){var E=S.destroy;S.destroy=void 0,E!==void 0&&Ic(l,v,E)}S=S.next}while(S!==y)}}function Lc(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var v=l=l.next;do{if((v.tag&a)===a){var y=v.create;v.destroy=y()}v=v.next}while(v!==l)}}function rd(a){var l=a.ref;if(l!==null){var v=a.stateNode;switch(a.tag){case 5:a=v;break;default:a=v}typeof l=="function"?l(a):l.current=a}}function z1(a){var l=a.alternate;l!==null&&(a.alternate=null,z1(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[mo],delete l[ka],delete l[Eu],delete l[V],delete l[ll])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function V1(a){return a.tag===5||a.tag===3||a.tag===4}function B1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||V1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function t0(a,l,v){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?v.nodeType===8?v.parentNode.insertBefore(a,l):v.insertBefore(a,l):(v.nodeType===8?(l=v.parentNode,l.insertBefore(a,v)):(l=v,l.appendChild(a)),v=v._reactRootContainer,v!=null||l.onclick!==null||(l.onclick=ku));else if(y!==4&&(a=a.child,a!==null))for(t0(a,l,v),a=a.sibling;a!==null;)t0(a,l,v),a=a.sibling}function nd(a,l,v){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?v.insertBefore(a,l):v.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(nd(a,l,v),a=a.sibling;a!==null;)nd(a,l,v),a=a.sibling}var un=null,eo=!1;function Io(a,l,v){for(v=v.child;v!==null;)r0(a,l,v),v=v.sibling}function r0(a,l,v){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(Qa,v)}catch{}switch(v.tag){case 5:Rr||_l(v,l);case 6:var y=un,S=eo;un=null,Io(a,l,v),un=y,eo=S,un!==null&&(eo?(a=un,v=v.stateNode,a.nodeType===8?a.parentNode.removeChild(v):a.removeChild(v)):un.removeChild(v.stateNode));break;case 18:un!==null&&(eo?(a=un,v=v.stateNode,a.nodeType===8?Sh(a.parentNode,v):a.nodeType===1&&Sh(a,v),Jt(a)):Sh(un,v.stateNode));break;case 4:y=un,S=eo,un=v.stateNode.containerInfo,eo=!0,Io(a,l,v),un=y,eo=S;break;case 0:case 11:case 14:case 15:if(!Rr&&(y=v.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var E=S,O=E.destroy;E=E.tag,O!==void 0&&((E&2)!==0||(E&4)!==0)&&Ic(v,l,O),S=S.next}while(S!==y)}Io(a,l,v);break;case 1:if(!Rr&&(_l(v,l),y=v.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=v.memoizedProps,y.state=v.memoizedState,y.componentWillUnmount()}catch(q){Vr(v,l,q)}Io(a,l,v);break;case 21:Io(a,l,v);break;case 22:v.mode&1?(Rr=(y=Rr)||v.memoizedState!==null,Io(a,l,v),Rr=y):Io(a,l,v);break;default:Io(a,l,v)}}function Sl(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var v=a.stateNode;v===null&&(v=a.stateNode=new Kn),l.forEach(function(y){var S=Pf.bind(null,a,y);v.has(y)||(v.add(y),y.then(S,S))})}}function _i(a,l){var v=l.deletions;if(v!==null)for(var y=0;y<v.length;y++){var S=v[y];try{var E=a,O=l,q=O;e:for(;q!==null;){switch(q.tag){case 5:un=q.stateNode,eo=!1;break e;case 3:un=q.stateNode.containerInfo,eo=!0;break e;case 4:un=q.stateNode.containerInfo,eo=!0;break e}q=q.return}if(un===null)throw Error(r(160));r0(E,O,S),un=null,eo=!1;var ee=S.alternate;ee!==null&&(ee.return=null),S.return=null}catch(xe){Vr(S,l,xe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)n0(l,a),l=l.sibling}function n0(a,l){var v=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(_i(l,a),to(a),y&4){try{ea(3,a,a.return),Lc(3,a)}catch(rt){Vr(a,a.return,rt)}try{ea(5,a,a.return)}catch(rt){Vr(a,a.return,rt)}}break;case 1:_i(l,a),to(a),y&512&&v!==null&&_l(v,v.return);break;case 5:if(_i(l,a),to(a),y&512&&v!==null&&_l(v,v.return),a.flags&32){var S=a.stateNode;try{hr(S,"")}catch(rt){Vr(a,a.return,rt)}}if(y&4&&(S=a.stateNode,S!=null)){var E=a.memoizedProps,O=v!==null?v.memoizedProps:E,q=a.type,ee=a.updateQueue;if(a.updateQueue=null,ee!==null)try{q==="input"&&E.type==="radio"&&E.name!=null&&ct(S,E),Ct(q,O);var xe=Ct(q,E);for(O=0;O<ee.length;O+=2){var De=ee[O],Ne=ee[O+1];De==="style"?_t(S,Ne):De==="dangerouslySetInnerHTML"?Kr(S,Ne):De==="children"?hr(S,Ne):L(S,De,Ne,xe)}switch(q){case"input":ut(S,E);break;case"textarea":xn(S,E);break;case"select":var Ie=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!E.multiple;var Xe=E.value;Xe!=null?gt(S,!!E.multiple,Xe,!1):Ie!==!!E.multiple&&(E.defaultValue!=null?gt(S,!!E.multiple,E.defaultValue,!0):gt(S,!!E.multiple,E.multiple?[]:"",!1))}S[ka]=E}catch(rt){Vr(a,a.return,rt)}}break;case 6:if(_i(l,a),to(a),y&4){if(a.stateNode===null)throw Error(r(162));S=a.stateNode,E=a.memoizedProps;try{S.nodeValue=E}catch(rt){Vr(a,a.return,rt)}}break;case 3:if(_i(l,a),to(a),y&4&&v!==null&&v.memoizedState.isDehydrated)try{Jt(l.containerInfo)}catch(rt){Vr(a,a.return,rt)}break;case 4:_i(l,a),to(a);break;case 13:_i(l,a),to(a),S=a.child,S.flags&8192&&(E=S.memoizedState!==null,S.stateNode.isHidden=E,!E||S.alternate!==null&&S.alternate.memoizedState!==null||(a0=yr())),y&4&&Sl(a);break;case 22:if(De=v!==null&&v.memoizedState!==null,a.mode&1?(Rr=(xe=Rr)||De,_i(l,a),Rr=xe):_i(l,a),to(a),y&8192){if(xe=a.memoizedState!==null,(a.stateNode.isHidden=xe)&&!De&&(a.mode&1)!==0)for(Ke=a,De=a.child;De!==null;){for(Ne=Ke=De;Ke!==null;){switch(Ie=Ke,Xe=Ie.child,Ie.tag){case 0:case 11:case 14:case 15:ea(4,Ie,Ie.return);break;case 1:_l(Ie,Ie.return);var Je=Ie.stateNode;if(typeof Je.componentWillUnmount=="function"){y=Ie,v=Ie.return;try{l=y,Je.props=l.memoizedProps,Je.state=l.memoizedState,Je.componentWillUnmount()}catch(rt){Vr(y,v,rt)}}break;case 5:_l(Ie,Ie.return);break;case 22:if(Ie.memoizedState!==null){Da(Ne);continue}}Xe!==null?(Xe.return=Ie,Ke=Xe):Da(Ne)}De=De.sibling}e:for(De=null,Ne=a;;){if(Ne.tag===5){if(De===null){De=Ne;try{S=Ne.stateNode,xe?(E=S.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(q=Ne.stateNode,ee=Ne.memoizedProps.style,O=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,q.style.display=We("display",O))}catch(rt){Vr(a,a.return,rt)}}}else if(Ne.tag===6){if(De===null)try{Ne.stateNode.nodeValue=xe?"":Ne.memoizedProps}catch(rt){Vr(a,a.return,rt)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===a)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===a)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===a)break e;De===Ne&&(De=null),Ne=Ne.return}De===Ne&&(De=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:_i(l,a),to(a),y&4&&Sl(a);break;case 21:break;default:_i(l,a),to(a)}}function to(a){var l=a.flags;if(l&2){try{e:{for(var v=a.return;v!==null;){if(V1(v)){var y=v;break e}v=v.return}throw Error(r(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(hr(S,""),y.flags&=-33);var E=B1(a);nd(a,E,S);break;case 3:case 4:var O=y.stateNode.containerInfo,q=B1(a);t0(a,q,O);break;default:throw Error(r(161))}}catch(ee){Vr(a,a.return,ee)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function id(a,l,v){Ke=a,i0(a)}function i0(a,l,v){for(var y=(a.mode&1)!==0;Ke!==null;){var S=Ke,E=S.child;if(S.tag===22&&y){var O=S.memoizedState!==null||td;if(!O){var q=S.alternate,ee=q!==null&&q.memoizedState!==null||Rr;q=td;var xe=Rr;if(td=O,(Rr=ee)&&!xe)for(Ke=S;Ke!==null;)O=Ke,ee=O.child,O.tag===22&&O.memoizedState!==null?$1(S):ee!==null?(ee.return=O,Ke=ee):$1(S);for(;E!==null;)Ke=E,i0(E),E=E.sibling;Ke=S,td=q,Rr=xe}ro(a)}else(S.subtreeFlags&8772)!==0&&E!==null?(E.return=S,Ke=E):ro(a)}}function ro(a){for(;Ke!==null;){var l=Ke;if((l.flags&8772)!==0){var v=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Rr||Lc(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Rr)if(v===null)y.componentDidMount();else{var S=l.elementType===l.type?v.memoizedProps:Ni(l.type,v.memoizedProps);y.componentDidUpdate(S,v.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=l.updateQueue;E!==null&&Lh(l,E,y);break;case 3:var O=l.updateQueue;if(O!==null){if(v=null,l.child!==null)switch(l.child.tag){case 5:v=l.child.stateNode;break;case 1:v=l.child.stateNode}Lh(l,O,v)}break;case 5:var q=l.stateNode;if(v===null&&l.flags&4){v=q;var ee=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&v.focus();break;case"img":ee.src&&(v.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var xe=l.alternate;if(xe!==null){var De=xe.memoizedState;if(De!==null){var Ne=De.dehydrated;Ne!==null&&Jt(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Rr||l.flags&512&&rd(l)}catch(Ie){Vr(l,l.return,Ie)}}if(l===a){Ke=null;break}if(v=l.sibling,v!==null){v.return=l.return,Ke=v;break}Ke=l.return}}function Da(a){for(;Ke!==null;){var l=Ke;if(l===a){Ke=null;break}var v=l.sibling;if(v!==null){v.return=l.return,Ke=v;break}Ke=l.return}}function $1(a){for(;Ke!==null;){var l=Ke;try{switch(l.tag){case 0:case 11:case 15:var v=l.return;try{Lc(4,l)}catch(ee){Vr(l,v,ee)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var S=l.return;try{y.componentDidMount()}catch(ee){Vr(l,S,ee)}}var E=l.return;try{rd(l)}catch(ee){Vr(l,E,ee)}break;case 5:var O=l.return;try{rd(l)}catch(ee){Vr(l,O,ee)}}}catch(ee){Vr(l,l.return,ee)}if(l===a){Ke=null;break}var q=l.sibling;if(q!==null){q.return=l.return,Ke=q;break}Ke=l.return}}var W1=Math.ceil,od=D.ReactCurrentDispatcher,o0=D.ReactCurrentOwner,zi=D.ReactCurrentBatchConfig,er=0,dn=null,Gr=null,Mn=0,Si=0,kl=oi(0),an=0,Pc=null,Fa=0,Ac=0,ad=0,Dc=null,ui=null,a0=0,bs=1/0,ta=null,sd=!1,s0=null,Ra=null,ld=!1,Oa=null,qn=0,Fc=0,l0=null,cd=-1,Rc=0;function Qn(){return(er&6)!==0?yr():cd!==-1?cd:cd=yr()}function Na(a){return(a.mode&1)===0?1:(er&2)!==0&&Mn!==0?Mn&-Mn:w1.transition!==null?(Rc===0&&(Rc=Us()),Rc):(a=qt,a!==0||(a=window.event,a=a===void 0?16:Y0(a.type)),a)}function no(a,l,v,y){if(50<Fc)throw Fc=0,l0=null,Error(r(185));ga(a,v,y),((er&2)===0||a!==dn)&&(a===dn&&((er&2)===0&&(Ac|=v),an===4&&za(a,Mn)),di(a,y),v===1&&er===0&&(l.mode&1)===0&&(bs=yr()+500,Lu&&Ea()))}function di(a,l){var v=a.callbackNode;nu(a,l);var y=ho(a,a===dn?Mn:0);if(y===0)v!==null&&Wl(v),a.callbackNode=null,a.callbackPriority=0;else if(l=y&-y,a.callbackPriority!==l){if(v!=null&&Wl(v),l===1)a.tag===0?ls(H1.bind(null,a)):y1(H1.bind(null,a)),Mu(function(){(er&6)===0&&Ea()}),v=null;else{switch(po(y)){case 1:v=Ws;break;case 4:v=Hl;break;case 16:v=pa;break;case 536870912:v=Hs;break;default:v=pa}v=q1(v,ud.bind(null,a))}a.callbackPriority=l,a.callbackNode=v}}function ud(a,l){if(cd=-1,Rc=0,(er&6)!==0)throw Error(r(327));var v=a.callbackNode;if(Ml()&&a.callbackNode!==v)return null;var y=ho(a,a===dn?Mn:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||l)l=dd(a,y);else{l=y;var S=er;er|=2;var E=j1();(dn!==a||Mn!==l)&&(ta=null,bs=yr()+500,ws(a,l));do try{Ef();break}catch(q){U1(a,q)}while(!0);Yo(),od.current=E,er=S,Gr!==null?l=0:(dn=null,Mn=0,l=an)}if(l!==0){if(l===2&&(S=Ja(a),S!==0&&(y=S,l=c0(a,S))),l===1)throw v=Pc,ws(a,0),za(a,y),di(a,yr()),v;if(l===6)za(a,y);else{if(S=a.current.alternate,(y&30)===0&&!kf(S)&&(l=dd(a,y),l===2&&(E=Ja(a),E!==0&&(y=E,l=c0(a,E))),l===1))throw v=Pc,ws(a,0),za(a,y),di(a,yr()),v;switch(a.finishedWork=S,a.finishedLanes=y,l){case 0:case 1:throw Error(r(345));case 2:Cs(a,ui,ta);break;case 3:if(za(a,y),(y&130023424)===y&&(l=a0+500-yr(),10<l)){if(ho(a,0)!==0)break;if(S=a.suspendedLanes,(S&y)!==y){Qn(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=_a(Cs.bind(null,a,ui,ta),l);break}Cs(a,ui,ta);break;case 4:if(za(a,y),(y&4194240)===y)break;for(l=a.eventTimes,S=-1;0<y;){var O=31-ni(y);E=1<<O,O=l[O],O>S&&(S=O),y&=~E}if(y=S,y=yr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*W1(y/1960))-y,10<y){a.timeoutHandle=_a(Cs.bind(null,a,ui,ta),y);break}Cs(a,ui,ta);break;case 5:Cs(a,ui,ta);break;default:throw Error(r(329))}}}return di(a,yr()),a.callbackNode===v?ud.bind(null,a):null}function c0(a,l){var v=Dc;return a.current.memoizedState.isDehydrated&&(ws(a,l).flags|=256),a=dd(a,l),a!==2&&(l=ui,ui=v,l!==null&&u0(l)),a}function u0(a){ui===null?ui=a:ui.push.apply(ui,a)}function kf(a){for(var l=a;;){if(l.flags&16384){var v=l.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var y=0;y<v.length;y++){var S=v[y],E=S.getSnapshot;S=S.value;try{if(!ye(E(),S))return!1}catch{return!1}}}if(v=l.child,l.subtreeFlags&16384&&v!==null)v.return=l,l=v;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function za(a,l){for(l&=~ad,l&=~Ac,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var v=31-ni(l),y=1<<v;a[v]=-1,l&=~y}}function H1(a){if((er&6)!==0)throw Error(r(327));Ml();var l=ho(a,0);if((l&1)===0)return di(a,yr()),null;var v=dd(a,l);if(a.tag!==0&&v===2){var y=Ja(a);y!==0&&(l=y,v=c0(a,y))}if(v===1)throw v=Pc,ws(a,0),za(a,l),di(a,yr()),v;if(v===6)throw Error(r(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Cs(a,ui,ta),di(a,yr()),null}function d0(a,l){var v=er;er|=1;try{return a(l)}finally{er=v,er===0&&(bs=yr()+500,Lu&&Ea())}}function xs(a){Oa!==null&&Oa.tag===0&&(er&6)===0&&Ml();var l=er;er|=1;var v=zi.transition,y=qt;try{if(zi.transition=null,qt=1,a)return a()}finally{qt=y,zi.transition=v,er=l,(er&6)===0&&Ea()}}function h0(){Si=kl.current,Er(kl)}function ws(a,l){a.finishedWork=null,a.finishedLanes=0;var v=a.timeoutHandle;if(v!==-1&&(a.timeoutHandle=-1,uc(v)),Gr!==null)for(v=Gr.return;v!==null;){var y=v;switch(ds(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Iu();break;case 3:La(),Er(ai),Er(On),Bu();break;case 5:Vu(y);break;case 4:La();break;case 13:Er(Fr);break;case 19:Er(Fr);break;case 10:Ru(y.type._context);break;case 22:case 23:h0()}v=v.return}if(dn=a,Gr=a=io(a.current,null),Mn=Si=l,an=0,Pc=null,ad=Ac=Fa=0,ui=Dc=null,ps!==null){for(l=0;l<ps.length;l++)if(v=ps[l],y=v.interleaved,y!==null){v.interleaved=null;var S=y.next,E=v.pending;if(E!==null){var O=E.next;E.next=S,y.next=O}v.pending=y}ps=null}return a}function U1(a,l){do{var v=Gr;try{if(Yo(),mc.current=Xu,gl){for(var y=zr.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}gl=!1}if(Pa=0,on=Xr=zr=null,yc=!1,gs=0,o0.current=null,v===null||v.return===null){an=1,Pc=l,Gr=null;break}e:{var E=a,O=v.return,q=v,ee=l;if(l=Mn,q.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var xe=ee,De=q,Ne=De.tag;if((De.mode&1)===0&&(Ne===0||Ne===11||Ne===15)){var Ie=De.alternate;Ie?(De.updateQueue=Ie.updateQueue,De.memoizedState=Ie.memoizedState,De.lanes=Ie.lanes):(De.updateQueue=null,De.memoizedState=null)}var Xe=A1(O);if(Xe!==null){Xe.flags&=-257,Xh(Xe,O,q,E,l),Xe.mode&1&&_c(E,xe,l),l=Xe,ee=xe;var Je=l.updateQueue;if(Je===null){var rt=new Set;rt.add(ee),l.updateQueue=rt}else Je.add(ee);break e}else{if((l&1)===0){_c(E,xe,l),p0();break e}ee=Error(r(426))}}else if(Tr&&q.mode&1){var Yr=A1(O);if(Yr!==null){(Yr.flags&65536)===0&&(Yr.flags|=256),Xh(Yr,O,q,E,l),_o(ys(ee,q));break e}}E=ee=ys(ee,q),an!==4&&(an=2),Dc===null?Dc=[E]:Dc.push(E),E=O;do{switch(E.tag){case 3:E.flags|=65536,l&=-l,E.lanes|=l;var he=Cc(E,ee,l);S1(E,he);break e;case 1:q=ee;var ie=E.type,ge=E.stateNode;if((E.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Ra===null||!Ra.has(ge)))){E.flags|=65536,l&=-l,E.lanes|=l;var Ve=Qu(E,q,l);S1(E,Ve);break e}}E=E.return}while(E!==null)}Y1(v)}catch(ot){l=ot,Gr===v&&v!==null&&(Gr=v=v.return);continue}break}while(!0)}function j1(){var a=od.current;return od.current=Xu,a===null?Xu:a}function p0(){(an===0||an===3||an===2)&&(an=4),dn===null||(Fa&268435455)===0&&(Ac&268435455)===0||za(dn,Mn)}function dd(a,l){var v=er;er|=2;var y=j1();(dn!==a||Mn!==l)&&(ta=null,ws(a,l));do try{Mf();break}catch(S){U1(a,S)}while(!0);if(Yo(),er=v,od.current=y,Gr!==null)throw Error(r(261));return dn=null,Mn=0,an}function Mf(){for(;Gr!==null;)X1(Gr)}function Ef(){for(;Gr!==null&&!qa();)X1(Gr)}function X1(a){var l=K1(a.alternate,a,Si);a.memoizedProps=a.pendingProps,l===null?Y1(a):Gr=l,o0.current=null}function Y1(a){var l=a;do{var v=l.alternate;if(a=l.return,(l.flags&32768)===0){if(v=Cf(v,l,Si),v!==null){Gr=v;return}}else{if(v=_f(v,l),v!==null){v.flags&=32767,Gr=v;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{an=6,Gr=null;return}}if(l=l.sibling,l!==null){Gr=l;return}Gr=l=a}while(l!==null);an===0&&(an=5)}function Cs(a,l,v){var y=qt,S=zi.transition;try{zi.transition=null,qt=1,Tf(a,l,v,y)}finally{zi.transition=S,qt=y}return null}function Tf(a,l,v,y){do Ml();while(Oa!==null);if((er&6)!==0)throw Error(r(327));v=a.finishedWork;var S=a.finishedLanes;if(v===null)return null;if(a.finishedWork=null,a.finishedLanes=0,v===a.current)throw Error(r(177));a.callbackNode=null,a.callbackPriority=0;var E=v.lanes|v.childLanes;if(Zl(a,E),a===dn&&(Gr=dn=null,Mn=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||ld||(ld=!0,q1(pa,function(){return Ml(),null})),E=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||E){E=zi.transition,zi.transition=null;var O=qt;qt=1;var q=er;er|=4,o0.current=null,Sf(a,v),n0(v,a),yf(ss),su=!!lc,ss=lc=null,a.current=v,id(v),Jc(),er=q,qt=O,zi.transition=E}else a.current=v;if(ld&&(ld=!1,Oa=a,qn=S),E=a.pendingLanes,E===0&&(Ra=null),ru(v.stateNode),di(a,yr()),l!==null)for(y=a.onRecoverableError,v=0;v<l.length;v++)S=l[v],y(S.value,{componentStack:S.stack,digest:S.digest});if(sd)throw sd=!1,a=s0,s0=null,a;return(qn&1)!==0&&a.tag!==0&&Ml(),E=a.pendingLanes,(E&1)!==0?a===l0?Fc++:(Fc=0,l0=a):Fc=0,Ea(),null}function Ml(){if(Oa!==null){var a=po(qn),l=zi.transition,v=qt;try{if(zi.transition=null,qt=16>a?16:a,Oa===null)var y=!1;else{if(a=Oa,Oa=null,qn=0,(er&6)!==0)throw Error(r(331));var S=er;for(er|=4,Ke=a.current;Ke!==null;){var E=Ke,O=E.child;if((Ke.flags&16)!==0){var q=E.deletions;if(q!==null){for(var ee=0;ee<q.length;ee++){var xe=q[ee];for(Ke=xe;Ke!==null;){var De=Ke;switch(De.tag){case 0:case 11:case 15:ea(8,De,E)}var Ne=De.child;if(Ne!==null)Ne.return=De,Ke=Ne;else for(;Ke!==null;){De=Ke;var Ie=De.sibling,Xe=De.return;if(z1(De),De===xe){Ke=null;break}if(Ie!==null){Ie.return=Xe,Ke=Ie;break}Ke=Xe}}}var Je=E.alternate;if(Je!==null){var rt=Je.child;if(rt!==null){Je.child=null;do{var Yr=rt.sibling;rt.sibling=null,rt=Yr}while(rt!==null)}}Ke=E}}if((E.subtreeFlags&2064)!==0&&O!==null)O.return=E,Ke=O;else e:for(;Ke!==null;){if(E=Ke,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:ea(9,E,E.return)}var he=E.sibling;if(he!==null){he.return=E.return,Ke=he;break e}Ke=E.return}}var ie=a.current;for(Ke=ie;Ke!==null;){O=Ke;var ge=O.child;if((O.subtreeFlags&2064)!==0&&ge!==null)ge.return=O,Ke=ge;else e:for(O=ie;Ke!==null;){if(q=Ke,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Lc(9,q)}}catch(ot){Vr(q,q.return,ot)}if(q===O){Ke=null;break e}var Ve=q.sibling;if(Ve!==null){Ve.return=q.return,Ke=Ve;break e}Ke=q.return}}if(er=S,Ea(),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(Qa,a)}catch{}y=!0}return y}finally{qt=v,zi.transition=l}}return!1}function hd(a,l,v){l=ys(v,l),l=Cc(a,l,1),a=Ri(a,l,1),l=Qn(),a!==null&&(ga(a,1,l),di(a,l))}function Vr(a,l,v){if(a.tag===3)hd(a,a,v);else for(;l!==null;){if(l.tag===3){hd(l,a,v);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ra===null||!Ra.has(y))){a=ys(v,a),a=Qu(l,a,1),l=Ri(l,a,1),a=Qn(),l!==null&&(ga(l,1,a),di(l,a));break}}l=l.return}}function If(a,l,v){var y=a.pingCache;y!==null&&y.delete(l),l=Qn(),a.pingedLanes|=a.suspendedLanes&v,dn===a&&(Mn&v)===v&&(an===4||an===3&&(Mn&130023424)===Mn&&500>yr()-a0?ws(a,0):ad|=v),di(a,l)}function Z1(a,l){l===0&&((a.mode&1)===0?l=1:(l=Ga,Ga<<=1,(Ga&130023424)===0&&(Ga=4194304)));var v=Qn();a=Zo(a,l),a!==null&&(ga(a,l,v),di(a,v))}function Lf(a){var l=a.memoizedState,v=0;l!==null&&(v=l.retryLane),Z1(a,v)}function Pf(a,l){var v=0;switch(a.tag){case 13:var y=a.stateNode,S=a.memoizedState;S!==null&&(v=S.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(l),Z1(a,v)}var K1;K1=function(a,l,v){if(a!==null)if(a.memoizedProps!==l.pendingProps||ai.current)Zn=!0;else{if((a.lanes&v)===0&&(l.flags&128)===0)return Zn=!1,R1(a,l,v);Zn=(a.flags&131072)!==0}else Zn=!1,Tr&&(l.flags&1048576)!==0&&b1(l,Au,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;ed(a,l),a=l.pendingProps;var S=ul(l,On.current);Ia(l,v),S=vs(null,l,y,a,S,v);var E=$u();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,si(y)?(E=!0,Li(l)):E=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Nu(l),S.updater=Ku,l.stateNode=S,S._reactInternals=l,jh(l,y,a,v),l=Gh(null,l,y,!0,E,v)):(l.tag=0,Tr&&E&&dc(l),_n(null,l,S,v),l=l.child),l;case 16:y=l.elementType;e:{switch(ed(a,l),a=l.pendingProps,S=y._init,y=S(y._payload),l.type=y,S=l.tag=Df(y),a=Ni(y,a),S){case 0:l=qh(null,l,y,a,v);break e;case 1:l=Qh(null,l,y,a,v);break e;case 11:l=D1(null,l,y,a,v);break e;case 14:l=Yh(null,l,y,Ni(y.type,a),v);break e}throw Error(r(306,y,""))}return l;case 0:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ni(y,S),qh(a,l,y,S,v);case 1:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ni(y,S),Qh(a,l,y,S,v);case 3:e:{if(F1(l),a===null)throw Error(r(387));y=l.pendingProps,E=l.memoizedState,S=E.element,_1(a,l),pl(l,y,null,v);var O=l.memoizedState;if(y=O.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){S=ys(Error(r(423)),l),l=To(a,l,y,v,S);break e}else if(y!==S){S=ys(Error(r(424)),l),l=To(a,l,y,v,S);break e}else for(wi=Sa(l.stateNode.containerInfo.firstChild),zn=l,Tr=!0,Qi=null,v=Fu(l,null,y,v),l.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Co(),y===S){l=Ji(a,l,v);break e}_n(a,l,y,v)}l=l.child}return l;case 5:return Ah(l),a===null&&li(l),y=l.type,S=l.pendingProps,E=a!==null?a.memoizedProps:null,O=S.children,cc(y,S)?O=null:E!==null&&cc(y,E)&&(l.flags|=32),Kh(a,l),_n(a,l,O,v),l.child;case 6:return a===null&&li(l),null;case 13:return Ju(a,l,v);case 4:return Ph(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=$r(l,null,y,v):_n(a,l,y,v),l.child;case 11:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ni(y,S),D1(a,l,y,S,v);case 7:return _n(a,l,l.pendingProps,v),l.child;case 8:return _n(a,l,l.pendingProps.children,v),l.child;case 12:return _n(a,l,l.pendingProps.children,v),l.child;case 10:e:{if(y=l.type._context,S=l.pendingProps,E=l.memoizedProps,O=S.value,_r(fc,y._currentValue),y._currentValue=O,E!==null)if(ye(E.value,O)){if(E.children===S.children&&!ai.current){l=Ji(a,l,v);break e}}else for(E=l.child,E!==null&&(E.return=l);E!==null;){var q=E.dependencies;if(q!==null){O=E.child;for(var ee=q.firstContext;ee!==null;){if(ee.context===y){if(E.tag===1){ee=Ko(-1,v&-v),ee.tag=2;var xe=E.updateQueue;if(xe!==null){xe=xe.shared;var De=xe.pending;De===null?ee.next=ee:(ee.next=De.next,De.next=ee),xe.pending=ee}}E.lanes|=v,ee=E.alternate,ee!==null&&(ee.lanes|=v),Cn(E.return,v,l),q.lanes|=v;break}ee=ee.next}}else if(E.tag===10)O=E.type===l.type?null:E.child;else if(E.tag===18){if(O=E.return,O===null)throw Error(r(341));O.lanes|=v,q=O.alternate,q!==null&&(q.lanes|=v),Cn(O,v,l),O=E.sibling}else O=E.child;if(O!==null)O.return=E;else for(O=E;O!==null;){if(O===l){O=null;break}if(E=O.sibling,E!==null){E.return=O.return,O=E;break}O=O.return}E=O}_n(a,l,S.children,v),l=l.child}return l;case 9:return S=l.type,y=l.pendingProps.children,Ia(l,v),S=Di(S),y=y(S),l.flags|=1,_n(a,l,y,v),l.child;case 14:return y=l.type,S=Ni(y,l.pendingProps),S=Ni(y.type,S),Yh(a,l,y,S,v);case 15:return Eo(a,l,l.type,l.pendingProps,v);case 17:return y=l.type,S=l.pendingProps,S=l.elementType===y?S:Ni(y,S),ed(a,l),l.tag=1,si(y)?(a=!0,Li(l)):a=!1,Ia(l,v),ms(l,y,S),jh(l,y,S,v),Gh(null,l,y,!0,a,v);case 19:return Aa(a,l,v);case 22:return Zh(a,l,v)}throw Error(r(156,l.tag))};function q1(a,l){return $l(a,l)}function Af(a,l,v,y){this.tag=a,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(a,l,v,y){return new Af(a,l,v,y)}function pd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Df(a){if(typeof a=="function")return pd(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ne)return 11;if(a===ue)return 14}return 2}function io(a,l){var v=a.alternate;return v===null?(v=Vi(a.tag,l,a.key,a.mode),v.elementType=a.elementType,v.type=a.type,v.stateNode=a.stateNode,v.alternate=a,a.alternate=v):(v.pendingProps=l,v.type=a.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=a.flags&14680064,v.childLanes=a.childLanes,v.lanes=a.lanes,v.child=a.child,v.memoizedProps=a.memoizedProps,v.memoizedState=a.memoizedState,v.updateQueue=a.updateQueue,l=a.dependencies,v.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},v.sibling=a.sibling,v.index=a.index,v.ref=a.ref,v}function fd(a,l,v,y,S,E){var O=2;if(y=a,typeof a=="function")pd(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case A:return _s(v.children,S,E,l);case N:O=8,S|=8;break;case z:return a=Vi(12,v,l,S|2),a.elementType=z,a.lanes=E,a;case Z:return a=Vi(13,v,l,S),a.elementType=Z,a.lanes=E,a;case J:return a=Vi(19,v,l,S),a.elementType=J,a.lanes=E,a;case ae:return gd(v,S,E,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case B:O=10;break e;case Q:O=9;break e;case ne:O=11;break e;case ue:O=14;break e;case le:O=16,y=null;break e}throw Error(r(130,a==null?a:typeof a,""))}return l=Vi(O,v,l,S),l.elementType=a,l.type=y,l.lanes=E,l}function _s(a,l,v,y){return a=Vi(7,a,y,l),a.lanes=v,a}function gd(a,l,v,y){return a=Vi(22,a,y,l),a.elementType=ae,a.lanes=v,a.stateNode={isHidden:!1},a}function f0(a,l,v){return a=Vi(6,a,null,l),a.lanes=v,a}function g0(a,l,v){return l=Vi(4,a.children!==null?a.children:[],a.key,l),l.lanes=v,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function Ff(a,l,v,y,S){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fa(0),this.expirationTimes=fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fa(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function v0(a,l,v,y,S,E,O,q,ee){return a=new Ff(a,l,v,q,ee),l===1?(l=1,E===!0&&(l|=8)):l=0,E=Vi(3,null,null,l),a.current=E,E.stateNode=a,E.memoizedState={element:y,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nu(E),a}function Rf(a,l,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:y==null?null:""+y,children:a,containerInfo:l,implementation:v}}function Q1(a){if(!a)return Ma;a=a._reactInternals;e:{if(mi(a)!==a||a.tag!==1)throw Error(r(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(si(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(r(171))}if(a.tag===1){var v=a.type;if(si(v))return v1(a,v,l)}return l}function G1(a,l,v,y,S,E,O,q,ee){return a=v0(v,y,!0,a,S,E,O,q,ee),a.context=Q1(null),v=a.current,y=Qn(),S=Na(v),E=Ko(y,S),E.callback=l??null,Ri(v,E,S),a.current.lanes=S,ga(a,S,y),di(a,y),a}function vd(a,l,v,y){var S=l.current,E=Qn(),O=Na(S);return v=Q1(v),l.context===null?l.context=v:l.pendingContext=v,l=Ko(E,O),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=Ri(S,l,O),a!==null&&(no(a,S,O,E),zu(a,S,O)),O}function md(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function J1(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var v=a.retryLane;a.retryLane=v!==0&&v<l?v:l}}function m0(a,l){J1(a,l),(a=a.alternate)&&J1(a,l)}function Of(){return null}var ep=typeof reportError=="function"?reportError:function(a){console.error(a)};function yd(a){this._internalRoot=a}Oc.prototype.render=yd.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(r(409));vd(a,l,null,null)},Oc.prototype.unmount=yd.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;xs(function(){vd(null,a,null,null)}),l[xi]=null}};function Oc(a){this._internalRoot=a}Oc.prototype.unstable_scheduleHydration=function(a){if(a){var l=Xs();a={blockedOn:null,target:a,priority:l};for(var v=0;v<Ki.length&&l!==0&&l<Ki[v].priority;v++);Ki.splice(v,0,a),v===0&&Ql(a)}};function y0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function bd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function tp(){}function Nf(a,l,v,y,S){if(S){if(typeof y=="function"){var E=y;y=function(){var xe=md(O);E.call(xe)}}var O=G1(l,y,a,0,null,!1,!1,"",tp);return a._reactRootContainer=O,a[xi]=O.current,Ca(a.nodeType===8?a.parentNode:a),xs(),O}for(;S=a.lastChild;)a.removeChild(S);if(typeof y=="function"){var q=y;y=function(){var xe=md(ee);q.call(xe)}}var ee=v0(a,0,!1,null,null,!1,!1,"",tp);return a._reactRootContainer=ee,a[xi]=ee.current,Ca(a.nodeType===8?a.parentNode:a),xs(function(){vd(l,ee,v,y)}),ee}function Ss(a,l,v,y,S){var E=v._reactRootContainer;if(E){var O=E;if(typeof S=="function"){var q=S;S=function(){var ee=md(O);q.call(ee)}}vd(l,O,a,S)}else O=Nf(v,l,a,S,y);return md(O)}js=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var v=Vo(l.pendingLanes);v!==0&&(va(l,v|1),di(l,yr()),(er&6)===0&&(bs=yr()+500,Ea()))}break;case 13:xs(function(){var y=Zo(a,1);if(y!==null){var S=Qn();no(y,a,1,S)}}),m0(a,1)}},es=function(a){if(a.tag===13){var l=Zo(a,134217728);if(l!==null){var v=Qn();no(l,a,134217728,v)}m0(a,134217728)}},Kl=function(a){if(a.tag===13){var l=Na(a),v=Zo(a,l);if(v!==null){var y=Qn();no(v,a,l,y)}m0(a,l)}},Xs=function(){return qt},Ys=function(a,l){var v=qt;try{return qt=a,l()}finally{qt=v}},mr=function(a,l,v){switch(l){case"input":if(ut(a,v),l=v.name,v.type==="radio"&&l!=null){for(v=a;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<v.length;l++){var y=v[l];if(y!==a&&y.form===a.form){var S=Tu(y);if(!S)throw Error(r(90));et(y),ut(y,S)}}}break;case"textarea":xn(a,v);break;case"select":l=v.value,l!=null&&gt(a,!!v.multiple,l,!1)}},ri=d0,Pt=xs;var zf={usingClientEntryPoint:!1,Events:[Rn,Tt,Tu,Hr,Ur,d0]},Nc={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vf={bundleType:Nc.bundleType,version:Nc.version,rendererPackageName:Nc.rendererPackageName,rendererConfig:Nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Za(a),a===null?null:a.stateNode},findFiberByHostInstance:Nc.findFiberByHostInstance||Of,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{Qa=xd.inject(Vf),ze=xd}catch{}}return Hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zf,Hi.createPortal=function(a,l){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y0(l))throw Error(r(200));return Rf(a,l,null,v)},Hi.createRoot=function(a,l){if(!y0(a))throw Error(r(299));var v=!1,y="",S=ep;return l!=null&&(l.unstable_strictMode===!0&&(v=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=v0(a,1,!1,null,null,v,!1,y,S),a[xi]=l.current,Ca(a.nodeType===8?a.parentNode:a),new yd(l)},Hi.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=Za(l),a=a===null?null:a.stateNode,a},Hi.flushSync=function(a){return xs(a)},Hi.hydrate=function(a,l,v){if(!bd(l))throw Error(r(200));return Ss(null,a,l,!0,v)},Hi.hydrateRoot=function(a,l,v){if(!y0(a))throw Error(r(405));var y=v!=null&&v.hydratedSources||null,S=!1,E="",O=ep;if(v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(E=v.identifierPrefix),v.onRecoverableError!==void 0&&(O=v.onRecoverableError)),l=G1(l,null,a,1,v??null,S,!1,E,O),a[xi]=l.current,Ca(a),y)for(a=0;a<y.length;a++)v=y[a],S=v._getVersion,S=S(v._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[v,S]:l.mutableSourceEagerHydrationData.push(v,S);return new Oc(l)},Hi.render=function(a,l,v){if(!bd(l))throw Error(r(200));return Ss(null,a,l,!1,v)},Hi.unmountComponentAtNode=function(a){if(!bd(a))throw Error(r(40));return a._reactRootContainer?(xs(function(){Ss(null,null,a,!1,function(){a._reactRootContainer=null,a[xi]=null})}),!0):!1},Hi.unstable_batchedUpdates=d0,Hi.unstable_renderSubtreeIntoContainer=function(a,l,v,y){if(!bd(v))throw Error(r(200));if(a==null||a._reactInternals===void 0)throw Error(r(38));return Ss(a,l,v,!1,y)},Hi.version="18.3.1-next-f1338f8080-20240426",Hi}var pm;function N6(){if(pm)return eg.exports;pm=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),eg.exports=O6(),eg.exports}var fm;function z6(){if(fm)return op;fm=1;var e=N6();return op.createRoot=e.createRoot,op.hydrateRoot=e.hydrateRoot,op}var V6=z6(),B6=Object.defineProperty,$6=(e,t,r)=>t in e?B6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,be=(e,t,r)=>($6(e,typeof t!="symbol"?t+"":t,r),r);/**
     * @license
     * KLineChart v10.0.0-alpha8
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */var Lg=function(e,t){return Lg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Lg(e,t)};function At(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Lg(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ye=function(){return Ye=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ye.apply(this,arguments)};function Ip(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Wy(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(p){try{h(n.next(p))}catch(g){s(g)}}function c(p){try{h(n.throw(p))}catch(g){s(g)}}function h(p){p.done?o(p.value):i(p.value).then(u,c)}h((n=n.apply(e,[])).next())})}function Hy(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(h){return function(p){return c([h,p])}}function c(h){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(p){h=[6,p],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function ca(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function j0(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function jp(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function yn(e,t){if(!(!oa(e)&&!oa(t))){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=e[r],i=t[r];oa(i)&&oa(n)?yn(n,i):we(t[r])&&(e[r]=Hd(t[r]))}}}function Hd(e){if(!oa(e))return e;var t=null;Wa(e)?t=[]:t={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=e[r];oa(n)?t[r]=Hd(n):t[r]=n}return t}function Wa(e){return Object.prototype.toString.call(e)==="[object Array]"}function vi(e){return typeof e=="function"}function oa(e){return typeof e=="object"&&we(e)}function ht(e){return typeof e=="number"&&Number.isFinite(e)}function we(e){return e!=null}function N0(e){return typeof e=="boolean"}function ur(e){return typeof e=="string"}function Ud(e){return e==="transparent"||e==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(e)||/^[hH][Ss][Ll][Aa]\(([\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(e)}function Al(e,t){var r=e.replace(/^#/,""),n=parseInt(r,16),i=n>>16&255,o=n>>8&255,s=n&255;return"rgba(".concat(i,", ").concat(o,", ").concat(s,", ").concat(t??1,")")}var ft={RED:"#F92855",GREEN:"#2DC08E",WHITE:"#FFFFFF",GREY:"#76808F",BLUE:"#1677FF"};function W6(){return{show:!0,horizontal:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]},vertical:{show:!0,size:1,color:"#EDEDED",style:"dashed",dashedValue:[2,2]}}}function H6(){var e={show:!0,color:ft.GREY,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"};return{type:"candle_solid",bar:{compareRule:"current_open",upColor:ft.GREEN,downColor:ft.RED,noChangeColor:ft.GREY,upBorderColor:ft.GREEN,downBorderColor:ft.RED,noChangeBorderColor:ft.GREY,upWickColor:ft.GREEN,downWickColor:ft.RED,noChangeWickColor:ft.GREY},area:{lineSize:2,lineColor:ft.BLUE,smooth:!1,value:"close",backgroundColor:[{offset:0,color:Al(ft.BLUE,.01)},{offset:1,color:Al(ft.BLUE,.2)}],point:{show:!0,color:ft.BLUE,radius:4,rippleColor:Al(ft.BLUE,.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:Ye({},e),low:Ye({},e),last:{show:!0,compareRule:"current_open",upColor:ft.GREEN,downColor:ft.RED,noChangeColor:ft.GREY,line:{show:!0,style:"dashed",dashedValue:[4,4],size:1},text:{show:!0,style:"fill",size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:"solid",borderSize:0,borderDashedValue:[2,2],color:ft.WHITE,family:"Helvetica Neue",weight:"normal",borderRadius:2},extendTexts:[]}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",rect:{position:"fixed",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},title:{show:!0,size:14,family:"Helvetica Neue",weight:"normal",color:ft.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,template:"{ticker} · {period}"},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:ft.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a",template:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}]},features:[]},renko:{brick:{size:10}}}}function U6(){var e=Al(ft.GREEN,.7),t=Al(ft.RED,.7);return{ohlc:{compareRule:"current_open",upColor:e,downColor:t,noChangeColor:ft.GREY},bars:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:e,downColor:t,noChangeColor:ft.GREY}],lines:["#FF9600","#935EBD",ft.BLUE,"#E11D74","#01C5C4"].map(function(r){return{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:r}}),circles:[{style:"fill",borderStyle:"solid",borderSize:1,borderDashedValue:[2,2],upColor:e,downColor:t,noChangeColor:ft.GREY}],lastValueMark:{show:!1,text:{show:!1,style:"fill",color:ft.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:"always",showType:"standard",title:{show:!0,showName:!0,showParams:!0,size:12,family:"Helvetica Neue",weight:"normal",color:ft.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},legend:{size:12,family:"Helvetica Neue",weight:"normal",color:ft.GREY,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4,defaultValue:"n/a"},features:[]}}}function gm(){return{show:!0,size:"auto",axisLine:{show:!0,color:"#DDDDDD",size:1},tickText:{show:!0,color:ft.GREY,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:6},tickLine:{show:!0,size:1,length:3,color:"#DDDDDD"}}}function j6(){return{show:!0,horizontal:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:ft.GREY},text:{show:!0,style:"fill",color:ft.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:ft.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:ft.GREY},features:[]},vertical:{show:!0,line:{show:!0,style:"dashed",dashedValue:[4,2],size:1,color:ft.GREY},text:{show:!0,style:"fill",color:ft.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderColor:ft.GREY,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:ft.GREY}}}}function X6(){var e=Al(ft.BLUE,.35),t=Al(ft.BLUE,.25);function r(){return{style:"fill",color:ft.WHITE,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:ft.BLUE,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:ft.BLUE}}return{point:{color:ft.BLUE,borderColor:e,borderSize:1,radius:5,activeColor:ft.BLUE,activeBorderColor:e,activeBorderSize:3,activeRadius:5},line:{style:"solid",smooth:!1,color:ft.BLUE,size:1,dashedValue:[2,2]},rect:{style:"fill",color:t,borderColor:ft.BLUE,borderSize:1,borderRadius:0,borderStyle:"solid",borderDashedValue:[2,2]},polygon:{style:"fill",color:ft.BLUE,borderColor:ft.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},circle:{style:"fill",color:t,borderColor:ft.BLUE,borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},arc:{style:"solid",color:ft.BLUE,size:1,dashedValue:[2,2]},text:r()}}function Y6(){return{size:1,color:"#DDDDDD",fill:!0,activeBackgroundColor:Al(ft.BLUE,.08)}}function Uy(){return{grid:W6(),candle:H6(),indicator:U6(),xAxis:gm(),yAxis:gm(),separator:Y6(),crosshair:j6(),overlay:X6()}}var Z6=/\\(\\)?/g,K6=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function In(e,t,r){if(we(e)){var n=[];t.replace(K6,function(u){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];var p=u;return we(c[1])?p=c[2].replace(Z6,"$1"):we(c[0])&&(p=c[0].trim()),n.push(p),""});for(var i=e,o=0,s=n.length;we(i)&&o<s;)i=i==null?void 0:i[n[o++]];return we(i)?i:r??"--"}return r??"--"}function q6(e,t){var r={};return e.formatToParts(new Date(t)).forEach(function(n){var i=n.type,o=n.value;switch(i){case"year":{r.YYYY=o;break}case"month":{r.MM=o;break}case"day":{r.DD=o;break}case"hour":{r.HH=o==="24"?"00":o;break}case"minute":{r.mm=o;break}case"second":{r.ss=o;break}}}),r}function jy(e,t,r){var n=q6(e,t);return r.replace(/YYYY|MM|DD|HH|mm|ss/g,function(i){return n[i]})}function ei(e,t){var r=+e;return ht(r)?r.toFixed(t??2):"".concat(e)}function Xy(e){var t=+e;if(ht(t)){if(t>1e9)return"".concat(+(t/1e9).toFixed(3),"B");if(t>1e6)return"".concat(+(t/1e6).toFixed(3),"M");if(t>1e3)return"".concat(+(t/1e3).toFixed(3),"K")}return"".concat(e)}function Yy(e,t){var r="".concat(e);if(t.length===0)return r;if(r.includes(".")){var n=r.split(".");return"".concat(n[0].replace(/(\d)(?=(\d{3})+$)/g,function(i){return"".concat(i).concat(t)}),".").concat(n[1])}return r.replace(/(\d)(?=(\d{3})+$)/g,function(i){return"".concat(i).concat(t)})}function Zy(e,t){var r="".concat(e),n=new RegExp("\\.0{"+t+",}[1-9][0-9]*$");if(n.test(r)){var i=r.split("."),o=i.length-1,s=i[o],u=/0*/.exec(s);if(we(u)){var c=u[0].length;return i[o]=s.replace(/0*/,"0{".concat(c,"}")),i.join(".")}}return r}function vm(e,t){return e.replace(/\{(\w+)\}/g,function(r,n){var i=t[n];return we(i)?i:"{".concat(n,"}")})}var w0=null;function Dl(e){var t,r;return(r=(t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.devicePixelRatio)!==null&&r!==void 0?r:1}function Kc(e,t,r){return"".concat(t??"normal"," ").concat(e??12,"px ").concat(r??"Helvetica Neue")}function aa(e,t,r,n){if(!we(w0)){var i=document.createElement("canvas"),o=Dl(i);w0=i.getContext("2d"),w0.scale(o,o)}return w0.font=Kc(t,r,n),Math.round(w0.measureText(e).width)}function Lp(e){var t={width:0,height:0,left:0,right:0,top:0,bottom:0};return we(e)&&yn(t,e),t}var zd=-1;function Pp(e){return vi(window.requestAnimationFrame)?window.requestAnimationFrame(e):window.setTimeout(e,20)}function mm(e){vi(window.cancelAnimationFrame)?window.cancelAnimationFrame(e):window.clearTimeout(e)}function ym(e){if(vi(window.requestIdleCallback))return window.requestIdleCallback(e);var t=performance.now();return window.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-t))}})},1)}function Q6(e){vi(window.cancelIdleCallback)?window.cancelIdleCallback(e):window.clearTimeout(e)}var Pg=(function(){function e(t){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,yn(this._options,t)}return e.prototype._loop=function(){var t=this;this._running=!0;var r=function(){var n;if(t._running){var i=new Date().getTime()-t._time;i<t._options.duration?((n=t._doFrameCallback)===null||n===void 0||n.call(t,i),Pp(r)):(t.stop(),t._currentIterationCount++,t._currentIterationCount<t._options.iterationCount&&t.start())}};Pp(r)},e.prototype.doFrame=function(t){return this._doFrameCallback=t,this},e.prototype.setDuration=function(t){return this._options.duration=t,this},e.prototype.setIterationCount=function(t){return this._options.iterationCount=t,this},e.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},e.prototype.stop=function(){var t;this._running&&((t=this._doFrameCallback)===null||t===void 0||t.call(this,this._options.duration)),this._running=!1},e})(),ng=1,bm=new Date().getTime();function bp(e){var t=new Date().getTime();return t===bm?++ng:ng=1,bm=t,"".concat(e??"").concat(t,"_").concat(ng)}function zs(e,t){var r,n=document.createElement(e),i=t??{};for(var o in i)n.style[o]=(r=i[o])!==null&&r!==void 0?r:"";return n}function Ag(e,t,r){var n=0,i=0;for(i=e.length-1;n!==i;){var o=Math.floor((i+n)/2),s=i-n,u=e[o][t];if(r===e[n][t])return n;if(r===e[i][t])return i;if(r===u)return o;if(r>u?n=o:i=o,s<=2)break}return n}function G6(e){var t=Math.floor(Is(e)),r=Xc(t),n=e/r,i=0;return n<1.5?i=1:n<2.5?i=2:n<3.5?i=3:n<4.5?i=4:n<5.5?i=5:n<6.5?i=6:i=8,e=i*r,+e.toFixed(Math.abs(t))}function xm(e,t){t=Math.max(0,t??0);var r=Math.pow(10,t);return Math.round(e*r)/r}function J6(e){var t=e.toString(),r=t.indexOf("e");if(r>0){var n=+t.slice(r+1);return n<0?-n:0}var i=t.indexOf(".");return i<0?0:t.length-1-i}function Ky(e,t,r){for(var n,i,o=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],s=e.length,u=0;u<s;){var c=e[u];o[0]=Math.max((n=c[t])!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,o[0]),o[1]=Math.min((i=c[r])!==null&&i!==void 0?i:Number.MAX_SAFE_INTEGER,o[1]),++u}return o}function Is(e){return e===0?0:Math.log10(e)}function Xc(e){return Math.pow(10,e)}function wm(){return{from:0,to:0,realFrom:0,realTo:0}}function Cm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join("_")}var e8=(function(){function e(t){this._requestIdleCallbackId=zd,this._tasks=t??[],this._operateTasks()}return e.prototype._operateTasks=function(t){var r=this;this._requestIdleCallbackId!==zd&&(Q6(this._requestIdleCallbackId),this._requestIdleCallbackId=zd),t==null||t(),this._requestIdleCallbackId=ym(function(n){r._runTasks(n)})},e.prototype._runTasks=function(t){for(var r=this;t.timeRemaining()>0&&this._tasks.length>0;){var n=this._tasks.shift();n==null||n.handler()}this._tasks.length>0&&(this._requestIdleCallbackId=ym(function(i){r._runTasks(i)}))},e.prototype.addTask=function(t){var r=this;return this._operateTasks(function(){var n=r._tasks.findIndex(function(i){return i.id===t.id});n>-1?r._tasks[n]=t:r._tasks.push(t)}),this},e.prototype.removeTask=function(t){var r=this;return we(t)&&this._operateTasks(function(){if(we(t)){var n=r._tasks.findIndex(function(i){return i.id===t});n>-1&&r._tasks.splice(n,1)}else r._tasks=[]}),this},e})(),t8=(function(){function e(){this._callbacks=[]}return e.prototype.subscribe=function(t){var r=this._callbacks.indexOf(t);r<0&&this._callbacks.push(t)},e.prototype.unsubscribe=function(t){if(vi(t)){var r=this._callbacks.indexOf(t);r>-1&&this._callbacks.splice(r,1)}else this._callbacks=[]},e.prototype.execute=function(t){this._callbacks.forEach(function(r){r(t)})},e.prototype.isEmpty=function(){return this._callbacks.length===0},e})();function Qg(e,t,r,n){var i=e.result,o=e.figures,s=e.styles,u=In(s,"circles",r.circles),c=u.length,h=In(s,"bars",r.bars),p=h.length,g=In(s,"lines",r.lines),m=g.length,b=0,x=0,C=0,_,k=0;o.forEach(function(M){var L,D,P,$;switch(M.type){case"circle":{k=b;var A=u[b%c];_=Ye(Ye({},A),{color:A.noChangeColor}),b++;break}case"bar":{k=x;var N=h[x%p];_=Ye(Ye({},N),{color:N.noChangeColor}),x++;break}case"line":{k=C,_=g[C%m],C++;break}}if(we(M.type)){var z=(L=M.styles)===null||L===void 0?void 0:L.call(M,{data:{prev:i[(D=t.prev)!==null&&D!==void 0?D:""],current:i[(P=t.current)!==null&&P!==void 0?P:""],next:i[($=t.next)!==null&&$!==void 0?$:""]},indicator:e,defaultStyles:r});n(M,Ye(Ye({},_),z),k)}})}var qy=(function(){function e(t){this.precision=4,this.calcParams=[],this.shouldOhlc=!1,this.shouldFormatBigNumber=!1,this.visible=!0,this.zLevel=0,this.series="normal",this.figures=[],this.minValue=null,this.maxValue=null,this.styles=null,this.shouldUpdate=function(r,n){var i=JSON.stringify(r.calcParams)!==JSON.stringify(n.calcParams)||r.figures!==n.figures||r.calc!==n.calc,o=i||r.shortName!==n.shortName||r.series!==n.series||r.minValue!==n.minValue||r.maxValue!==n.maxValue||r.precision!==n.precision||r.shouldOhlc!==n.shouldOhlc||r.shouldFormatBigNumber!==n.shouldFormatBigNumber||r.visible!==n.visible||r.zLevel!==n.zLevel||r.extendData!==n.extendData||r.regenerateFigures!==n.regenerateFigures||r.createTooltipDataSource!==n.createTooltipDataSource||r.draw!==n.draw;return{calc:i,draw:o}},this.calc=function(){return{}},this.regenerateFigures=null,this.createTooltipDataSource=null,this.draw=null,this.onDataStateChange=null,this.result={},this._lockSeriesPrecision=!1,this.override(t),this._lockSeriesPrecision=!1}return e.prototype.override=function(t){var r,n,i=this,o=i.result,s=Ip(i,["result"]);this._prevIndicator=Ye(Ye({},Hd(s)),{result:o});var u=t.id,c=t.name,h=t.shortName,p=t.precision,g=t.styles,m=t.figures,b=t.calcParams,x=Ip(t,["id","name","shortName","precision","styles","figures","calcParams"]);!ur(this.id)&&ur(u)&&(this.id=u),ur(this.name)||(this.name=c??""),this.shortName=(r=h??this.shortName)!==null&&r!==void 0?r:this.name,ht(p)&&(this.precision=p,this._lockSeriesPrecision=!0),we(g)&&((n=this.styles)!==null&&n!==void 0||(this.styles={}),yn(this.styles,g)),yn(this,x),we(b)&&(this.calcParams=b,vi(this.regenerateFigures)&&(this.figures=this.regenerateFigures(this.calcParams))),this.figures=m??this.figures},e.prototype.setSeriesPrecision=function(t){this._lockSeriesPrecision||(this.precision=t)},e.prototype.shouldUpdateImp=function(){var t=this._prevIndicator.zLevel!==this.zLevel,r=this.shouldUpdate(this._prevIndicator,this);return N0(r)?{calc:r,draw:r,sort:t}:Ye(Ye({},r),{sort:t})},e.prototype.calcImp=function(t){return Wy(this,void 0,void 0,function(){var r;return Hy(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.calc(t,this)];case 1:return r=n.sent(),this.result=r,[2,!0];case 2:return n.sent(),[2,!1];case 3:return[2]}})})},e.extend=function(t){var r=(function(n){At(i,n);function i(){return n.call(this,t)||this}return i})(e);return r},e})(),r8={name:"AVP",shortName:"AVP",series:"price",precision:2,styles:{lines:[{color:"#A020F0",size:1}]},figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(e){var t=0,r=0;return e.reduce(function(n,i){var o,s,u={},c=(o=i.turnover)!==null&&o!==void 0?o:0,h=(s=i.volume)!==null&&s!==void 0?s:0;return t+=c,r+=h,r!==0&&(u.avp=t/r),n[i.timestamp]=u,n},{})}},n8={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(e){var t,r,n=e.data,i=e.indicator,o=e.defaultStyles,s=n.prev,u=n.current,c=(t=s==null?void 0:s.ao)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,h=(r=u==null?void 0:u.ao)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER,p="";h>c?p=In(i.styles,"bars[0].upColor",o.bars[0].upColor):p=In(i.styles,"bars[0].downColor",o.bars[0].downColor);var g=h>c?"stroke":"fill";return{color:p,style:g,borderColor:p}}}],calc:function(e,t){var r=t.calcParams,n=Math.max(r[0],r[1]),i=0,o=0,s=0,u=0;return e.reduce(function(c,h,p){var g={},m=(h.low+h.high)/2;if(i+=m,o+=m,p>=r[0]-1){s=i/r[0];var b=e[p-(r[0]-1)];i-=(b.low+b.high)/2}if(p>=r[1]-1){u=o/r[1];var b=e[p-(r[1]-1)];o-=(b.low+b.high)/2}return p>=n-1&&(g.ao=s-u),c[h.timestamp]=g,c},{})}},i8={name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#ff0000",size:1}]},figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"bias".concat(r+1),title:"BIAS".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[];return e.reduce(function(o,s,u){var c={},h=s.close;return r.forEach(function(p,g){var m;if(i[g]=((m=i[g])!==null&&m!==void 0?m:0)+h,u>=p-1){var b=i[g]/r[g];c[n[g].key]=(h-b)/b*100,i[g]-=e[u-(p-1)].close}}),o[s.timestamp]=c,o},{})}};function o8(e,t){var r=e.length,n=0;return e.forEach(function(i){var o=i.close-t;n+=o*o}),n=Math.abs(n),Math.sqrt(n/r)}var a8={name:"BOLL",shortName:"BOLL",series:"price",calcParams:[20,2],precision:2,shouldOhlc:!0,styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=r[0]-1,i=0;return e.reduce(function(o,s,u){var c=s.close,h={};if(i+=c,u>=n){h.mid=i/r[0];var p=o8(e.slice(u-n,u+1),h.mid);h.up=h.mid+r[1]*p,h.dn=h.mid-r[1]*p,i-=e[u-n].close}return o[s.timestamp]=h,o},{})}},s8={name:"BRAR",shortName:"BRAR",calcParams:[26],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0;return e.reduce(function(u,c,h){var p,g,m={},b=c.high,x=c.low,C=c.open,_=((p=e[h-1])!==null&&p!==void 0?p:c).close;if(o+=b-C,s+=C-x,n+=b-_,i+=_-x,h>=r[0]-1){s!==0?m.ar=o/s*100:m.ar=0,i!==0?m.br=n/i*100:m.br=0;var k=e[h-(r[0]-1)],M=k.high,L=k.low,D=k.open,P=((g=e[h-r[0]])!==null&&g!==void 0?g:e[h-(r[0]-1)]).close;n-=M-P,i-=P-L,o-=M-D,s-=D-L}return u[c.timestamp]=m,u},{})}},l8={name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=Math.max.apply(Math,jp([],j0(r),!1)),i=[],o=[];return e.reduce(function(s,u,c){var h={},p=u.close;if(r.forEach(function(m,b){var x;i[b]=((x=i[b])!==null&&x!==void 0?x:0)+p,c>=m-1&&(o[b]=i[b]/m,i[b]-=e[c-(m-1)].close)}),c>=n-1){var g=0;o.forEach(function(m){g+=m}),h.bbi=g/4}return s[u.timestamp]=h,s},{})}},c8={name:"CCI",shortName:"CCI",calcParams:[20],styles:{lines:[{color:"#007FFF",size:1}]},figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=r[0]-1,i=0,o=[];return e.reduce(function(s,u,c){var h={},p=(u.high+u.low+u.close)/3;if(i+=p,o.push(p),c>=n){var g=i/r[0],m=o.slice(c-n,c+1),b=0;m.forEach(function(_){b+=Math.abs(_-g)});var x=b/r[0];h.cci=x!==0?(p-g)/x/.015:0;var C=(e[c-n].high+e[c-n].low+e[c-n].close)/3;i-=C}return s[u.timestamp]=h,s},{})}},u8={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#FFFF00",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=Math.ceil(r[1]/2.5+1),i=Math.ceil(r[2]/2.5+1),o=Math.ceil(r[3]/2.5+1),s=Math.ceil(r[4]/2.5+1),u=0,c=[],h=0,p=[],g=0,m=[],b=0,x=[],C=[],_={};return e.forEach(function(k,M){var L,D,P,$,A,N={},z=(L=e[M-1])!==null&&L!==void 0?L:k,B=(z.high+z.close+z.low+z.open)/4,Q=Math.max(0,k.high-B),ne=Math.max(0,B-k.low);M>=r[0]-1&&(ne!==0?N.cr=Q/ne*100:N.cr=0,u+=N.cr,h+=N.cr,g+=N.cr,b+=N.cr,M>=r[0]+r[1]-2&&(c.push(u/r[1]),M>=r[0]+r[1]+n-3&&(N.ma1=c[c.length-1-n]),u-=(D=C[M-(r[1]-1)].cr)!==null&&D!==void 0?D:0),M>=r[0]+r[2]-2&&(p.push(h/r[2]),M>=r[0]+r[2]+i-3&&(N.ma2=p[p.length-1-i]),h-=(P=C[M-(r[2]-1)].cr)!==null&&P!==void 0?P:0),M>=r[0]+r[3]-2&&(m.push(g/r[3]),M>=r[0]+r[3]+o-3&&(N.ma3=m[m.length-1-o]),g-=($=C[M-(r[3]-1)].cr)!==null&&$!==void 0?$:0),M>=r[0]+r[4]-2&&(x.push(b/r[4]),M>=r[0]+r[4]+s-3&&(N.ma4=x[x.length-1-s]),b-=(A=C[M-(r[4]-1)].cr)!==null&&A!==void 0?A:0)),C.push(N),_[k.timestamp]=N}),_}},d8={name:"DMA",shortName:"DMA",calcParams:[10,50,10],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=Math.max(r[0],r[1]),i=0,o=0,s=0,u=[],c={};return e.forEach(function(h,p){var g,m={},b=h.close;i+=b,o+=b;var x=0,C=0;if(p>=r[0]-1&&(x=i/r[0],i-=e[p-(r[0]-1)].close),p>=r[1]-1&&(C=o/r[1],o-=e[p-(r[1]-1)].close),p>=n-1){var _=x-C;m.dma=_,s+=_,p>=n+r[2]-2&&(m.ama=s/r[2],s-=(g=u[p-(r[2]-1)].dma)!==null&&g!==void 0?g:0)}u.push(m),c[h.timestamp]=m}),c}},h8={name:"DMI",shortName:"DMI",calcParams:[14,6],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=0,c=0,h=0,p=0,g=[],m={};return e.forEach(function(b,x){var C,_,k={},M=(C=e[x-1])!==null&&C!==void 0?C:b,L=M.close,D=b.high,P=b.low,$=D-P,A=Math.abs(D-L),N=Math.abs(L-P),z=D-M.high,B=M.low-P,Q=Math.max(Math.max($,A),N),ne=z>0&&z>B?z:0,Z=B>0&&B>z?B:0;if(n+=Q,i+=ne,o+=Z,x>=r[0]-1){x>r[0]-1?(s=s-s/r[0]+Q,u=u-u/r[0]+ne,c=c-c/r[0]+Z):(s=n,u=i,c=o);var J=0,ue=0;s!==0&&(J=u*100/s,ue=c*100/s),k.pdi=J,k.mdi=ue;var le=0;ue+J!==0&&(le=Math.abs(ue-J)/(ue+J)*100),h+=le,x>=r[0]*2-2&&(x>r[0]*2-2?p=(p*(r[0]-1)+le)/r[0]:p=h/r[0],k.adx=p,x>=r[0]*2+r[1]-3&&(k.adxr=(((_=g[x-(r[1]-1)].adx)!==null&&_!==void 0?_:0)+p)/2))}g.push(k),m[b.timestamp]=k}),m}},p8={name:"EMV",shortName:"EMV",calcParams:[14,9],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=[];return e.reduce(function(o,s,u){var c,h={};if(u>0){var p=e[u-1],g=s.high,m=s.low,b=(c=s.volume)!==null&&c!==void 0?c:0,x=(g+m)/2-(p.high+p.low)/2;if(b===0||g-m===0)h.emv=0;else{var C=b/1e8/(g-m);h.emv=x/C}n+=h.emv,i.push(h.emv),u>=r[0]&&(h.maEmv=n/r[0],n-=i[u-r[0]])}return o[s.timestamp]=h,o},{})}},f8={name:"EMA",shortName:"EMA",series:"price",calcParams:[6,12,20],styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"ema".concat(r+1),title:"EMA".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=0,o=[];return e.reduce(function(s,u,c){var h={},p=u.close;return i+=p,r.forEach(function(g,m){c>=g-1&&(c>g-1?o[m]=(2*p+(g-1)*o[m])/(g+1):o[m]=i/g,h[n[m].key]=o[m])}),s[u.timestamp]=h,s},{})}},g8={name:"MTM",shortName:"MTM",calcParams:[12,6],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=[],o={};return e.forEach(function(s,u){var c,h={};if(u>=r[0]){var p=s.close,g=e[u-r[0]].close;h.mtm=p-g,n+=h.mtm,u>=r[0]+r[1]-1&&(h.maMtm=n/r[1],n-=(c=i[u-(r[1]-1)].mtm)!==null&&c!==void 0?c:0)}i.push(h),o[s.timestamp]=h}),o}},v8={name:"MA",shortName:"MA",series:"price",calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"ma".concat(r+1),title:"MA".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[];return e.reduce(function(o,s,u){var c={},h=s.close;return r.forEach(function(p,g){var m;i[g]=((m=i[g])!==null&&m!==void 0?m:0)+h,u>=p-1&&(c[n[g].key]=i[g]/p,i[g]-=e[u-(p-1)].close)}),o[s.timestamp]=c,o},{})}},m8={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(e){var t,r,n=e.data,i=e.indicator,o=e.defaultStyles,s=n.prev,u=n.current,c=(t=s==null?void 0:s.macd)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,h=(r=u==null?void 0:u.macd)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER,p="";h>0?p=In(i.styles,"bars[0].upColor",o.bars[0].upColor):h<0?p=In(i.styles,"bars[0].downColor",o.bars[0].downColor):p=In(i.styles,"bars[0].noChangeColor",o.bars[0].noChangeColor);var g=c<h?"stroke":"fill";return{style:g,color:p,borderColor:p}}}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=0,c=0,h=Math.max(r[0],r[1]);return e.reduce(function(p,g,m){var b={},x=g.close;return n+=x,m>=r[0]-1&&(m>r[0]-1?i=(2*x+(r[0]-1)*i)/(r[0]+1):i=n/r[0]),m>=r[1]-1&&(m>r[1]-1?o=(2*x+(r[1]-1)*o)/(r[1]+1):o=n/r[1]),m>=h-1&&(s=i-o,b.dif=s,u+=s,m>=h+r[2]-2&&(m>h+r[2]-2?c=(s*2+c*(r[2]-1))/(r[2]+1):c=u/r[2],b.macd=(s-c)*2,b.dea=c)),p[g.timestamp]=b,p},{})}},y8={name:"OBV",shortName:"OBV",calcParams:[30],styles:{lines:[{color:"#A020F0",size:1},{color:"#007FFF",size:1}]},figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=[],s={};return e.forEach(function(u,c){var h,p,g,m,b=(h=e[c-1])!==null&&h!==void 0?h:u;u.close<b.close?i-=(p=u.volume)!==null&&p!==void 0?p:0:u.close>b.close&&(i+=(g=u.volume)!==null&&g!==void 0?g:0);var x={obv:i};n+=i,c>=r[0]-1&&(x.maObv=n/r[0],n-=(m=o[c-(r[0]-1)].obv)!==null&&m!==void 0?m:0),o.push(x),s[u.timestamp]=x}),s}},b8={name:"PVT",shortName:"PVT",styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(e){var t=0;return e.reduce(function(r,n,i){var o,s,u={},c=n.close,h=(o=n.volume)!==null&&o!==void 0?o:1,p=((s=e[i-1])!==null&&s!==void 0?s:n).close,g=0,m=p*h;return m!==0&&(g=(c-p)/m),t+=g,u.pvt=t,r[n.timestamp]=u,r},{})}},x8={name:"PSY",shortName:"PSY",calcParams:[12,6],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=[],s=[],u={};return e.forEach(function(c,h){var p,g,m={},b=((p=e[h-1])!==null&&p!==void 0?p:c).close,x=c.close-b>0?1:0;o.push(x),n+=x,h>=r[0]-1&&(m.psy=n/r[0]*100,i+=m.psy,h>=r[0]+r[1]-2&&(m.maPsy=i/r[1],i-=(g=s[h-(r[1]-1)].psy)!==null&&g!==void 0?g:0),n-=o[h-(r[0]-1)]),s.push(m),u[c.timestamp]=m}),u}},w8={name:"ROC",shortName:"ROC",calcParams:[12,6],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=[],i={},o=0;return e.forEach(function(s,u){var c,h,p={};if(u>=r[0]-1){var g=s.close,m=((c=e[u-r[0]])!==null&&c!==void 0?c:e[u-(r[0]-1)]).close;m!==0?p.roc=(g-m)/m*100:p.roc=0,o+=p.roc,u>=r[0]-1+r[1]-1&&(p.maRoc=o/r[1],o-=(h=n[u-(r[1]-1)].roc)!==null&&h!==void 0?h:0)}n.push(p),i[s.timestamp]=p}),i}},C8={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){var n=r+1;return{key:"rsi".concat(n),title:"RSI".concat(n,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[],o=[];return e.reduce(function(s,u,c){var h,p={},g=((h=e[c-1])!==null&&h!==void 0?h:u).close,m=u.close-g;return r.forEach(function(b,x){var C,_,k;if(m>0?i[x]=((C=i[x])!==null&&C!==void 0?C:0)+m:o[x]=((_=o[x])!==null&&_!==void 0?_:0)+Math.abs(m),c>=b-1){o[x]!==0?p[n[x].key]=100-100/(1+i[x]/o[x]):p[n[x].key]=0;var M=e[c-(b-1)],L=(k=e[c-b])!==null&&k!==void 0?k:M,D=M.close-L.close;D>0?i[x]-=D:o[x]-=Math.abs(D)}}),s[u.timestamp]=p,s},{})}},_8={name:"SMA",shortName:"SMA",series:"price",calcParams:[12,2],precision:2,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(e,t){var r=t.calcParams,n=0,i=0;return e.reduce(function(o,s,u){var c={},h=s.close;return n+=h,u>=r[0]-1&&(u>r[0]-1?i=(h*r[1]+i*(r[0]-r[1]+1))/(r[0]+1):i=n/r[0],c.sma=i),o[s.timestamp]=c,o},{})}},S8={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=[],i={};return e.forEach(function(o,s){var u,c,h,p,g={},m=o.close;if(s>=r[0]-1){var b=Ky(e.slice(s-(r[0]-1),s+1),"high","low"),x=b[0],C=b[1],_=x-C,k=(m-C)/(_===0?1:_)*100;g.k=((r[1]-1)*((c=(u=n[s-1])===null||u===void 0?void 0:u.k)!==null&&c!==void 0?c:50)+k)/r[1],g.d=((r[2]-1)*((p=(h=n[s-1])===null||h===void 0?void 0:h.d)!==null&&p!==void 0?p:50)+g.k)/r[2],g.j=3*g.k-2*g.d}n.push(g),i[o.timestamp]=g}),i}},k8={name:"SAR",shortName:"SAR",series:"price",calcParams:[2,2,20],precision:2,shouldOhlc:!0,styles:{circles:[{upColor:"#FF7F50",downColor:"#A020F0",noChangeColor:"#A8A8A8"}]},figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(e){var t,r,n,i=e.data,o=e.indicator,s=e.defaultStyles,u=i.current,c=(t=u==null?void 0:u.sar)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER,h=(((r=u==null?void 0:u.high)!==null&&r!==void 0?r:0)+((n=u==null?void 0:u.low)!==null&&n!==void 0?n:0))/2,p=c<h?In(o.styles,"circles[0].upColor",s.circles[0].upColor):In(o.styles,"circles[0].downColor",s.circles[0].downColor);return{color:p}}}],calc:function(e,t){var r=t.calcParams,n=r[0]/100,i=r[1]/100,o=r[2]/100,s=n,u=-100,c=!1,h=0;return e.reduce(function(p,g,m){var b=h,x=g.high,C=g.low;if(c){(u===-100||u<x)&&(u=x,s=Math.min(s+i,o)),h=b+s*(u-b);var _=Math.min(e[Math.max(1,m)-1].low,C);h>g.low?(h=u,s=n,u=-100,c=!c):h>_&&(h=_)}else{(u===-100||u>C)&&(u=C,s=Math.min(s+i,o)),h=b+s*(u-b);var k=Math.max(e[Math.max(1,m)-1].high,x);h<g.high?(h=u,s=0,u=-100,c=!c):h<k&&(h=k)}return p[g.timestamp]={high:x,low:C,sar:h},p},{})}},M8={name:"TRIX",shortName:"TRIX",calcParams:[12,9],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=0,c=0,h=0,p=[],g={};return e.forEach(function(m,b){var x,C={},_=m.close;if(n+=_,b>=r[0]-1&&(b>r[0]-1?i=(2*_+(r[0]-1)*i)/(r[0]+1):i=n/r[0],u+=i,b>=r[0]*2-2&&(b>r[0]*2-2?o=(2*i+(r[0]-1)*o)/(r[0]+1):o=u/r[0],c+=o,b>=r[0]*3-3))){var k=0,M=0;b>r[0]*3-3?(k=(2*o+(r[0]-1)*s)/(r[0]+1),M=(k-s)/s*100):k=c/r[0],s=k,C.trix=M,h+=M,b>=r[0]*3+r[1]-4&&(C.maTrix=h/r[1],h-=(x=p[b-(r[1]-1)].trix)!==null&&x!==void 0?x:0)}p.push(C),g[m.timestamp]=C}),g}};function _m(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(e){var t=e.data,r=e.indicator,n=e.defaultStyles,i=t.current,o=In(r.styles,"bars[0].noChangeColor",n.bars[0].noChangeColor);return we(i)&&(i.close>i.open?o=In(r.styles,"bars[0].upColor",n.bars[0].upColor):i.close<i.open&&(o=In(r.styles,"bars[0].downColor",n.bars[0].downColor))),{color:o}}}}var E8={name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},_m()],regenerateFigures:function(e){var t=e.map(function(r,n){return{key:"ma".concat(n+1),title:"MA".concat(r,": "),type:"line"}});return t.push(_m()),t},calc:function(e,t){var r=t.calcParams,n=t.figures,i=[];return e.reduce(function(o,s,u){var c,h=(c=s.volume)!==null&&c!==void 0?c:0,p={volume:h,open:s.open,close:s.close};return r.forEach(function(g,m){var b,x;i[m]=((b=i[m])!==null&&b!==void 0?b:0)+h,u>=g-1&&(p[n[m].key]=i[m]/g,i[m]-=(x=e[u-(g-1)].volume)!==null&&x!==void 0?x:0)}),o[s.timestamp]=p,o},{})}},T8={name:"VR",shortName:"VR",calcParams:[26,6],styles:{lines:[{color:"#FF6E6E",size:2},{color:"#FFD700",size:4}]},figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,n=0,i=0,o=0,s=0,u=[],c={};return e.forEach(function(h,p){var g,m,b,x,C,_={},k=h.close,M=((g=e[p-1])!==null&&g!==void 0?g:h).close,L=(m=h.volume)!==null&&m!==void 0?m:0;if(k>M?n+=L:k<M?i+=L:o+=L,p>=r[0]-1){var D=o/2;i+D===0?_.vr=0:_.vr=(n+D)/(i+D)*100,s+=_.vr,p>=r[0]+r[1]-2&&(_.maVr=s/r[1],s-=(b=u[p-(r[1]-1)].vr)!==null&&b!==void 0?b:0);var P=e[p-(r[0]-1)],$=(x=e[p-r[0]])!==null&&x!==void 0?x:P,A=P.close,N=(C=P.volume)!==null&&C!==void 0?C:0;A>$.close?n-=N:A<$.close?i-=N:o-=N}u.push(_),c[h.timestamp]=_}),c}},I8={name:"WR",shortName:"WR",calcParams:[6,10,14],styles:{lines:[{color:"#A020F0",size:1},{color:"#FFD700",size:1},{color:"#FF6E6E",size:1}]},figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"wr".concat(r+1),title:"WR".concat(r+1,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,n=t.figures;return e.reduce(function(i,o,s){var u={},c=o.close;return r.forEach(function(h,p){var g=h-1;if(s>=g){var m=Ky(e.slice(s-g,s+1),"high","low"),b=m[0],x=m[1],C=b-x;u[n[p].key]=C===0?0:(c-b)/C*100}}),i[o.timestamp]=u,i},{})}},Gg={},L8=[r8,n8,i8,a8,s8,l8,c8,u8,d8,h8,p8,f8,g8,v8,m8,y8,b8,x8,w8,C8,_8,S8,k8,M8,E8,T8,I8];L8.forEach(function(e){Gg[e.name]=qy.extend(e)});function Qy(e){Gg[e.name]=qy.extend(e)}function Gy(e){var t;return(t=Gg[e])!==null&&t!==void 0?t:null}function ia(e,t){var r,n=(r=t==null?void 0:t.ignoreEvent)!==null&&r!==void 0?r:!1;return N0(n)?!n:!n.includes(e)}var Sm=1,C0=-1,P8="overlay_",_d="overlay_figure_",Jy=(function(){function e(t){this.groupId="",this.totalStep=1,this.currentStep=Sm,this.lock=!1,this.visible=!0,this.zLevel=0,this.needDefaultPointFigure=!1,this.needDefaultXAxisFigure=!1,this.needDefaultYAxisFigure=!1,this.mode="normal",this.modeSensitivity=8,this.points=[],this.styles=null,this.createPointFigures=null,this.createXAxisFigures=null,this.createYAxisFigures=null,this.performEventPressedMove=null,this.performEventMoveForDrawing=null,this.onDrawStart=null,this.onDrawing=null,this.onDrawEnd=null,this.onClick=null,this.onDoubleClick=null,this.onRightClick=null,this.onPressedMoveStart=null,this.onPressedMoving=null,this.onPressedMoveEnd=null,this.onMouseMove=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRemoved=null,this.onSelected=null,this.onDeselected=null,this._prevZLevel=0,this._prevPressedPoint=null,this._prevPressedPoints=[],this.override(t)}return e.prototype.override=function(t){var r,n;this._prevOverlay=Hd(this);var i=t.id,o=t.name;t.currentStep;var s=t.points,u=t.styles,c=Ip(t,["id","name","currentStep","points","styles"]);if(yn(this,c),ur(this.name)||(this.name=o??""),!ur(this.id)&&ur(i)&&(this.id=i),we(u)&&((r=this.styles)!==null&&r!==void 0||(this.styles={}),yn(this.styles,u)),Wa(s)&&s.length>0){var h=0;if(this.points=jp([],j0(s),!1),s.length>=this.totalStep-1?(this.currentStep=C0,h=this.totalStep-1):(this.currentStep=s.length+1,h=s.length),vi(this.performEventMoveForDrawing))for(var p=0;p<h;p++)this.performEventMoveForDrawing({currentStep:p+2,mode:this.mode,points:this.points,performPointIndex:p,performPoint:this.points[p]});this.currentStep===C0&&((n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}))}},e.prototype.getPrevZLevel=function(){return this._prevZLevel},e.prototype.setPrevZLevel=function(t){this._prevZLevel=t},e.prototype.shouldUpdate=function(){var t=this._prevOverlay.zLevel!==this.zLevel,r=t||JSON.stringify(this._prevOverlay.points)!==JSON.stringify(this.points)||this._prevOverlay.visible!==this.visible||this._prevOverlay.extendData!==this.extendData||this._prevOverlay.styles!==this.styles;return{sort:t,draw:r}},e.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=C0:this.currentStep++},e.prototype.forceComplete=function(){this.currentStep=C0},e.prototype.isDrawing=function(){return this.currentStep!==C0},e.prototype.isStart=function(){return this.currentStep===Sm},e.prototype.eventMoveForDrawing=function(t){var r,n=this.currentStep-1,i={};ht(t.timestamp)&&(i.timestamp=t.timestamp),ht(t.dataIndex)&&(i.dataIndex=t.dataIndex),ht(t.value)&&(i.value=t.value),this.points[n]=i,(r=this.performEventMoveForDrawing)===null||r===void 0||r.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:n,performPoint:i})},e.prototype.eventPressedPointMove=function(t,r){var n;this.points[r].timestamp=t.timestamp,ht(t.value)&&(this.points[r].value=t.value),(n=this.performEventPressedMove)===null||n===void 0||n.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:r,performPoint:this.points[r]})},e.prototype.startPressedMove=function(t){this._prevPressedPoint=Ye({},t),this._prevPressedPoints=Hd(this.points)},e.prototype.eventPressedOtherMove=function(t,r){if(this._prevPressedPoint!==null){var n=null;ht(t.dataIndex)&&ht(this._prevPressedPoint.dataIndex)&&(n=t.dataIndex-this._prevPressedPoint.dataIndex);var i=null;ht(t.value)&&ht(this._prevPressedPoint.value)&&(i=t.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(o){var s;ht(o.timestamp)&&(o.dataIndex=r.timestampToDataIndex(o.timestamp));var u=Ye({},o);return ht(n)&&ht(o.dataIndex)&&(u.dataIndex=o.dataIndex+n,u.timestamp=(s=r.dataIndexToTimestamp(u.dataIndex))!==null&&s!==void 0?s:void 0),ht(i)&&ht(o.value)&&(u.value=o.value+i),u})}},e.extend=function(t){var r=(function(n){At(i,n);function i(){return n.call(this,t)||this}return i})(e);return r},e})(),A8={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t,r,n,i=e.chart,o=e.coordinates,s=e.bounding,u=e.overlay,c=e.yAxis,h=u.points;if(o.length>0){var p=0;if(!((t=c==null?void 0:c.isInCandle())!==null&&t!==void 0)||t)p=(n=(r=i.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2;else{var g=i.getIndicators({paneId:u.paneId});g.forEach(function(L){p=Math.max(p,L.precision)})}var m=[],b=[],x=0,C=s.width;if(o.length>1&&ht(h[0].value)&&ht(h[1].value)){var _=[1,.786,.618,.5,.382,.236,0],k=o[0].y-o[1].y,M=h[0].value-h[1].value;_.forEach(function(L){var D,P=o[1].y+k*L,$=i.getDecimalFold().format(i.getThousandsSeparator().format((((D=h[1].value)!==null&&D!==void 0?D:0)+M*L).toFixed(p)));m.push({coordinates:[{x,y:P},{x:C,y:P}]}),b.push({x,y:P,text:"".concat($," (").concat((L*100).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:m},{type:"text",isCheckEvent:!1,attrs:b}]}return[]}},D8={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding,n={x:0,y:t[0].y};return we(t[1])&&t[0].x<t[1].x&&(n.x=r.width),[{type:"line",attrs:{coordinates:[t[0],n]}}]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].value=r.value,t[1].value=r.value},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].value=n.value)}},F8={name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=[];return t.length===2&&r.push({coordinates:t}),[{type:"line",attrs:r}]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].value=r.value,t[1].value=r.value},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].value=n.value)}},R8={name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:r.width,y:t[0].y}]}}]}},Jg=(function(){function e(){this._children=[],this._callbacks=new Map}return e.prototype.registerEvent=function(t,r){return this._callbacks.set(t,r),this},e.prototype.onEvent=function(t,r){var n=this._callbacks.get(t);return we(n)&&this.checkEventOn(r)?n(r):!1},e.prototype.dispatchEventToChildren=function(t,r){var n=this._children.length-1;if(n>-1){for(var i=n;i>-1;i--)if(this._children[i].dispatchEvent(t,r))return!0}return!1},e.prototype.dispatchEvent=function(t,r){return this.dispatchEventToChildren(t,r)?!0:this.onEvent(t,r)},e.prototype.addChild=function(t){return this._children.push(t),this},e.prototype.clear=function(){this._children=[]},e})(),Wn=2,O8=(function(e){At(t,e);function t(r){var n=e.call(this)||this;return n.attrs=r.attrs,n.styles=r.styles,n}return t.prototype.checkEventOn=function(r){return this.checkEventOnImp(r,this.attrs,this.styles)},t.prototype.setAttrs=function(r){return this.attrs=r,this},t.prototype.setStyles=function(r){return this.styles=r,this},t.prototype.draw=function(r){this.drawImp(r,this.attrs,this.styles)},t.extend=function(r){var n=(function(i){At(o,i);function o(){return i!==null&&i.apply(this,arguments)||this}return o.prototype.checkEventOnImp=function(s,u,c){return r.checkEventOn(s,u,c)},o.prototype.drawImp=function(s,u,c){r.draw(s,u,c)},o})(t);return n},t})(Jg);function e2(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=ca(i),s=o.next();!s.done;s=o.next()){var u=s.value,c=u.coordinates;if(c.length>1)for(var h=1;h<c.length;h++){var p=c[h-1],g=c[h];if(p.x===g.x){if(Math.abs(p.y-e.y)+Math.abs(g.y-e.y)-Math.abs(p.y-g.y)<Wn+Wn&&Math.abs(e.x-p.x)<Wn)return!0}else{var m=Xp(p,g),b=ev(m,e),x=Math.abs(b-e.y);if(Math.abs(p.x-e.x)+Math.abs(g.x-e.x)-Math.abs(p.x-g.x)<Wn+Wn&&x*x/(m[0]*m[0]+1)<Wn*Wn)return!0}}}}catch(C){r={error:C}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function ev(e,t){return e!==null?t.x*e[0]+e[1]:t.y}function z0(e,t,r){var n=Xp(e,t);return ev(n,r)}function Xp(e,t){var r=e.x-t.x;if(r!==0){var n=(e.y-t.y)/r,i=e.y-n*e.x;return[n,i]}return null}function t2(e,t,r){var n=t.length,i=ht(r)?r>0&&r<1?r:0:r?.5:0;if(i>0&&n>2){for(var o=t[0].x,s=t[0].y,u=1;u<n-1;u++){var c=t[u-1],h=t[u],p=t[u+1],g=h.x-c.x,m=h.y-c.y,b=p.x-h.x,x=p.y-h.y,C=p.x-c.x,_=p.y-c.y,k=Math.sqrt(g*g+m*m),M=Math.sqrt(b*b+x*x),L=M/(M+k),D=h.x+C*i*L,P=h.y+_*i*L;D=Math.min(D,Math.max(p.x,h.x)),P=Math.min(P,Math.max(p.y,h.y)),D=Math.max(D,Math.min(p.x,h.x)),P=Math.max(P,Math.min(p.y,h.y)),C=D-h.x,_=P-h.y;var $=h.x-C*k/M,A=h.y-_*k/M;$=Math.min($,Math.max(c.x,h.x)),A=Math.min(A,Math.max(c.y,h.y)),$=Math.max($,Math.min(c.x,h.x)),A=Math.max(A,Math.min(c.y,h.y)),C=h.x-$,_=h.y-A,D=h.x+C*M/k,P=h.y+_*M/k,e.bezierCurveTo(o,s,$,A,h.x,h.y),o=D,s=P}var N=t[n-1];e.bezierCurveTo(o,s,N.x,N.y,N.x,N.y)}else for(var u=1;u<n;u++)e.lineTo(t[u].x,t[u].y)}function N8(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"solid":i,s=r.smooth,u=s===void 0?!1:s,c=r.size,h=c===void 0?1:c,p=r.color,g=p===void 0?"currentColor":p,m=r.dashedValue,b=m===void 0?[2,2]:m;e.lineWidth=h,e.strokeStyle=g,o==="dashed"?e.setLineDash(b):e.setLineDash([]);var x=h%2===1?.5:0;n.forEach(function(C){var _=C.coordinates;_.length>1&&(_.length===2&&(_[0].x===_[1].x||_[0].y===_[1].y)?(e.beginPath(),_[0].x===_[1].x?(e.moveTo(_[0].x+x,_[0].y),e.lineTo(_[1].x+x,_[1].y)):(e.moveTo(_[0].x,_[0].y+x),e.lineTo(_[1].x,_[1].y+x)),e.stroke(),e.closePath()):(e.save(),h%2===1&&e.translate(.5,.5),e.beginPath(),e.moveTo(_[0].x,_[0].y),t2(e,_,u),e.stroke(),e.closePath(),e.restore()))})}var z8={name:"line",checkEventOn:e2,draw:function(e,t,r){N8(e,t,r)}};function r2(e,t,r){var n=r??0,i=[];if(e.length>1)if(e[0].x===e[1].x){var o=0,s=t.height;if(i.push({coordinates:[{x:e[0].x,y:o},{x:e[0].x,y:s}]}),e.length>2){i.push({coordinates:[{x:e[2].x,y:o},{x:e[2].x,y:s}]});for(var u=e[0].x-e[2].x,c=0;c<n;c++){var h=u*(c+1);i.push({coordinates:[{x:e[0].x+h,y:o},{x:e[0].x+h,y:s}]})}}}else{var p=0,g=t.width,m=Xp(e[0],e[1]),b=m[0],x=m[1];if(i.push({coordinates:[{x:p,y:p*b+x},{x:g,y:g*b+x}]}),e.length>2){var C=e[2].y-b*e[2].x;i.push({coordinates:[{x:p,y:p*b+C},{x:g,y:g*b+C}]});for(var u=x-C,c=0;c<n;c++){var _=x+u*(c+1);i.push({coordinates:[{x:p,y:p*b+_},{x:g,y:g*b+_}]})}}}return i}var V8={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:r2(t,r)}]}},B8={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:r2(t,r,1)}]}},$8={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t,r,n,i=e.chart,o=e.coordinates,s=e.bounding,u=e.overlay,c=e.yAxis,h=0;if(!((t=c==null?void 0:c.isInCandle())!==null&&t!==void 0)||t)h=(n=(r=i.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2;else{var p=i.getIndicators({paneId:u.paneId});p.forEach(function(b){h=Math.max(h,b.precision)})}var g=u.points[0].value,m=g===void 0?0:g;return[{type:"line",attrs:{coordinates:[o[0],{x:s.width,y:o[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:o[0].x,y:o[0].y,text:i.getDecimalFold().format(i.getThousandsSeparator().format(m.toFixed(h))),baseline:"bottom"}}]}};function W8(e,t){if(e.length>1){var r={x:0,y:0};return e[0].x===e[1].x&&e[0].y!==e[1].y?e[0].y<e[1].y?r={x:e[0].x,y:t.height}:r={x:e[0].x,y:0}:e[0].x>e[1].x?r={x:0,y:z0(e[0],e[1],{x:0,y:e[0].y})}:r={x:t.width,y:z0(e[0],e[1],{x:t.width,y:e[0].y})},{coordinates:[e[0],r]}}return[]}var H8={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:W8(t,r)}]}},U8={name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]}},j8={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return t.length===2?t[0].x===t[1].x?[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:r.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:z0(t[0],t[1],{x:0,y:t[0].y})},{x:r.width,y:z0(t[0],t[1],{x:r.width,y:t[0].y})}]}}]:[]}},X8={name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;if(t.length===2){var n={x:t[0].x,y:0};return t[0].y<t[1].y&&(n.y=r.height),[{type:"line",attrs:{coordinates:[t[0],n]}}]}return[]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].timestamp=r.timestamp,t[0].dataIndex=r.dataIndex,t[1].timestamp=r.timestamp,t[1].dataIndex=r.dataIndex},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].timestamp=n.timestamp,r[0].dataIndex=n.dataIndex)}},Y8={name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].timestamp=r.timestamp,t[0].dataIndex=r.dataIndex,t[1].timestamp=r.timestamp,t[1].dataIndex=r.dataIndex},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,n=e.performPoint;t===2&&(r[0].timestamp=n.timestamp,r[0].dataIndex=n.dataIndex)}},Z8={name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:r.height}]}}]}},K8={name:"simpleAnnotation",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(e){var t,r=e.overlay,n=e.coordinates,i="";we(r.extendData)&&(vi(r.extendData)?i=r.extendData(r):i=(t=r.extendData)!==null&&t!==void 0?t:"");var o=n[0].x,s=n[0].y-6,u=s-50,c=u-5;return[{type:"line",attrs:{coordinates:[{x:o,y:s},{x:o,y:u}]},ignoreEvent:!1},{type:"polygon",attrs:{coordinates:[{x:o,y:u},{x:o-4,y:c},{x:o+4,y:c}]},ignoreEvent:!1},{type:"text",attrs:{x:o,y:c,text:i,align:"center",baseline:"bottom"},ignoreEvent:!1}]}},q8={name:"simpleTag",totalStep:2,styles:{line:{style:"dashed"}},createPointFigures:function(e){var t=e.bounding,r=e.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:r[0].y},{x:t.width,y:r[0].y}]},ignoreEvent:!1}},createYAxisFigures:function(e){var t,r,n,i,o=e.chart,s=e.overlay,u=e.coordinates,c=e.bounding,h=e.yAxis,p=(t=h==null?void 0:h.isFromZero())!==null&&t!==void 0?t:!1,g="left",m=0;p?(g="left",m=0):(g="right",m=c.width);var b="";return we(s.extendData)&&(vi(s.extendData)?b=s.extendData(s):b=(r=s.extendData)!==null&&r!==void 0?r:""),!we(b)&&ht(s.points[0].value)&&(b=ei(s.points[0].value,(i=(n=o.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&i!==void 0?i:2)),{type:"text",attrs:{x:m,y:u[0].y,text:b,align:g,baseline:"middle"}}}},tv={},Q8=[A8,D8,F8,R8,V8,B8,$8,H8,U8,j8,X8,Y8,Z8,K8,q8];Q8.forEach(function(e){tv[e.name]=Jy.extend(e)});function G8(e){tv[e.name]=Jy.extend(e)}function J8(e){var t;return(t=tv[e])!==null&&t!==void 0?t:null}var eb={grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},title:{color:"#76808F"},legend:{color:"#76808F"}}},indicator:{tooltip:{title:{color:"#76808F"},legend:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},tb={grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},title:{color:"#929AA5"},legend:{color:"#929AA5"}}},indicator:{tooltip:{title:{color:"#929AA5"},legend:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}},rb={light:eb,dark:tb};function nb(e){var t;return(t=rb[e])!==null&&t!==void 0?t:null}var xp=30,n2=100,Vt={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},km={MIN:1,MAX:50},ib=10,ob=80,ab=.2,Dg=10,sb=(function(){function e(t,r){var n=this;this._styles=Uy(),this._formatter={formatDate:function(g){var m=g.dateTimeFormat,b=g.timestamp,x=g.template;return jy(m,b,x)},formatBigNumber:Xy,formatExtendText:function(g){return""}},this._innerFormatter={formatDate:function(g,m,b){return n._formatter.formatDate({dateTimeFormat:n._dateTimeFormat,timestamp:g,template:m,type:b})},formatBigNumber:function(g){return n._formatter.formatBigNumber(g)},formatExtendText:function(g){return n._formatter.formatExtendText(g)}},this._locale="en-US",this._thousandsSeparator={sign:",",format:function(g){return Yy(g,n._thousandsSeparator.sign)}},this._decimalFold={threshold:3,format:function(g){return Zy(g,n._decimalFold.threshold)}},this._symbol=null,this._period=null,this._dataList=[],this._dataLoader=null,this._loading=!1,this._dataLoadMore={forward:!1,backward:!1},this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=ib,this._offsetRightDistance=ob,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole="bar_count",this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=wm(),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._crosshair={},this._actions=new Map,this._indicators=new Map,this._taskScheduler=new e8,this._overlays=new Map,this._progressOverlayInfo=null,this._lastPriceMarkExtendTextUpdateTimers=[],this._pressedOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._hoverOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._clickOverlayInfo={paneId:"",overlay:null,figureType:"none",figureIndex:-1,figure:null},this._chart=t,this._calcOptimalBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace;var i=r??{},o=i.styles,s=i.locale,u=i.timezone,c=i.formatter,h=i.thousandsSeparator,p=i.decimalFold;we(o)&&this.setStyles(o),ur(s)&&this.setLocale(s),this.setTimezone(u??""),we(c)&&this.setFormatter(c),we(h)&&this.setThousandsSeparator(h),we(p)&&this.setDecimalFold(p)}return e.prototype.setStyles=function(t){var r=this,n,i,o,s,u,c,h=null;if(ur(t)?h=nb(t):h=t,yn(this._styles,h),Wa((o=(i=(n=h==null?void 0:h.candle)===null||n===void 0?void 0:n.tooltip)===null||i===void 0?void 0:i.legend)===null||o===void 0?void 0:o.template)&&(this._styles.candle.tooltip.legend.template=h.candle.tooltip.legend.template),we((c=(u=(s=h==null?void 0:h.candle)===null||s===void 0?void 0:s.priceMark)===null||u===void 0?void 0:u.last)===null||c===void 0?void 0:c.extendTexts)){this._clearLastPriceMarkExtendTextUpdateTimer();var p=[];this._styles.candle.priceMark.last.extendTexts.forEach(function(g){var m=g.updateInterval;if(g.show&&m>0&&!p.includes(m)){p.push(m);var b=setInterval(function(){r._chart.updatePane(0,Vt.CANDLE)},m);r._lastPriceMarkExtendTextUpdateTimers.push(b)}})}},e.prototype.getStyles=function(){return this._styles},e.prototype.setFormatter=function(t){yn(this._formatter,t)},e.prototype.getFormatter=function(){return this._formatter},e.prototype.getInnerFormatter=function(){return this._innerFormatter},e.prototype.setLocale=function(t){this._locale=t},e.prototype.getLocale=function(){return this._locale},e.prototype.setTimezone=function(t){if(!we(this._dateTimeFormat)||this.getTimezone()!==t){var r={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};t.length>0&&(r.timeZone=t);var n=null;try{n=new Intl.DateTimeFormat("en",r)}catch{}n!==null&&(this._dateTimeFormat=n)}},e.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},e.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},e.prototype.setThousandsSeparator=function(t){yn(this._thousandsSeparator,t)},e.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},e.prototype.setDecimalFold=function(t){yn(this._decimalFold,t)},e.prototype.getDecimalFold=function(){return this._decimalFold},e.prototype.setSymbol=function(t){this._processDataUnsubscribe(),this._symbol=t,this._synchronizeIndicatorSeriesPrecision(),this.resetData()},e.prototype.getSymbol=function(){return this._symbol},e.prototype.setPeriod=function(t){this._processDataUnsubscribe(),this._period=t,this.resetData()},e.prototype.getPeriod=function(){return this._period},e.prototype.getDataList=function(){return this._dataList},e.prototype.getVisibleRangeDataList=function(){return this._visibleRangeDataList},e.prototype.getVisibleRangeHighLowPrice=function(){return this._visibleRangeHighLowPrice},e.prototype._addData=function(t,r,n){var i=this,o,s,u=!1,c=!1,h=0;if(Wa(t)){var p={backward:!1,forward:!1};switch(N0(n)?(p.backward=n,p.forward=n):(p.backward=(o=n==null?void 0:n.backward)!==null&&o!==void 0?o:!1,p.forward=(s=n==null?void 0:n.forward)!==null&&s!==void 0?s:!1),h=t.length,r){case"init":{this._clearData(),this._dataList=t,this._dataLoadMore.backward=p.backward,this._dataLoadMore.forward=p.forward,this.setOffsetRightDistance(this._offsetRightDistance),c=!0;break}case"backward":{this._dataList=this._dataList.concat(t),this._dataLoadMore.backward=p.backward,this._lastBarRightSideDiffBarCount-=h,c=h>0;break}case"forward":{this._dataList=t.concat(this._dataList),this._dataLoadMore.forward=p.forward,c=h>0;break}}u=!0}else{var g=this._dataList.length,m=t.timestamp,b=In(this._dataList[g-1],"timestamp",0);if(m>b){this._dataList.push(t);var x=this.getLastBarRightSideDiffBarCount();x<0&&this.setLastBarRightSideDiffBarCount(--x),h=1,u=!0,c=!0}else m===b&&(this._dataList[g-1]=t,u=!0,c=!0)}if(u&&c){this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0});var C=this.getIndicatorsByFilter({});C.forEach(function(_){i._addIndicatorCalcTask(_,r)}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:r!=="init"})}},e.prototype.setDataLoader=function(t){this._dataLoader=t,this.resetData()},e.prototype._calcOptimalBarSpace=function(){var t=4,r=1-ab*Math.atan(Math.max(t,this._barSpace)-t)/(Math.PI*.5),n=Math.min(Math.floor(this._barSpace*r),Math.floor(this._barSpace));n%2===0&&n+2>=this._barSpace&&--n,this._gapBarSpace=Math.max(1,n)},e.prototype._adjustVisibleRange=function(){var t,r,n=this._dataList.length,i=this._totalBarSpace/this._barSpace,o=0,s=0;this._scrollLimitRole==="distance"?(o=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,s=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(o=this._minVisibleBarCount.left,s=this._minVisibleBarCount.right),o=Math.max(0,o),s=Math.max(0,s);var u=i-Math.min(o,n);this._lastBarRightSideDiffBarCount>u&&(this._lastBarRightSideDiffBarCount=u);var c=-n+Math.min(s,n);this._lastBarRightSideDiffBarCount<c&&(this._lastBarRightSideDiffBarCount=c);var h=Math.round(this._lastBarRightSideDiffBarCount+n+.5),p=h;h>n&&(h=n);var g=Math.round(h-i)-1;g<0&&(g=0);var m=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-i)-1:g;this._visibleRange={from:g,to:h,realFrom:m,realTo:p},this.executeAction("onVisibleRangeChange",this._visibleRange),this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}];for(var b=m;b<p;b++){var x=this._dataList[b],C=this.dataIndexToCoordinate(b);this._visibleRangeDataList.push({dataIndex:b,x:C,data:{prev:(t=this._dataList[b-1])!==null&&t!==void 0?t:x,current:x,next:(r=this._dataList[b+1])!==null&&r!==void 0?r:x}}),we(x)&&(this._visibleRangeHighLowPrice[0].price<x.high&&(this._visibleRangeHighLowPrice[0].price=x.high,this._visibleRangeHighLowPrice[0].x=C),this._visibleRangeHighLowPrice[1].price>x.low&&(this._visibleRangeHighLowPrice[1].price=x.low,this._visibleRangeHighLowPrice[1].x=C))}g===0?this._dataLoadMore.forward&&this._processDataLoad("forward"):h===n&&this._dataLoadMore.backward&&this._processDataLoad("backward")},e.prototype._processDataLoad=function(t){var r=this,n,i,o,s;if(!this._loading&&we(this._dataLoader)&&we(this._symbol)&&we(this._period)){this._loading=!0;var u={type:t,symbol:this._symbol,period:this._period,timestamp:null,callback:function(c,h){var p,g;r._loading=!1,r._addData(c,t,h),t==="init"&&((g=(p=r._dataLoader)===null||p===void 0?void 0:p.subscribeBar)===null||g===void 0||g.call(p,{symbol:r._symbol,period:r._period,callback:function(m){r._addData(m,"update")}}))}};switch(t){case"backward":{u.timestamp=(i=(n=this._dataList[this._dataList.length-1])===null||n===void 0?void 0:n.timestamp)!==null&&i!==void 0?i:null;break}case"forward":{u.timestamp=(s=(o=this._dataList[0])===null||o===void 0?void 0:o.timestamp)!==null&&s!==void 0?s:null;break}}this._dataLoader.getBars(u)}},e.prototype._processDataUnsubscribe=function(){var t,r;we(this._dataLoader)&&we(this._symbol)&&we(this._period)&&((r=(t=this._dataLoader).unsubscribeBar)===null||r===void 0||r.call(t,{symbol:this._symbol,period:this._period}))},e.prototype.resetData=function(){this._loading=!1,this._processDataLoad("init")},e.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},e.prototype.setBarSpace=function(t,r){t<km.MIN||t>km.MAX||this._barSpace===t||(this._barSpace=t,this._calcOptimalBarSpace(),r==null||r(),this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0}))},e.prototype.setTotalBarSpace=function(t){this._totalBarSpace!==t&&(this._totalBarSpace=t,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}))},e.prototype.setOffsetRightDistance=function(t,r){return this._offsetRightDistance=this._scrollLimitRole==="distance"?Math.min(this._maxOffsetDistance.right,t):t,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,(r??!1)&&(this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0})),this},e.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},e.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},e.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},e.prototype.setLastBarRightSideDiffBarCount=function(t){this._lastBarRightSideDiffBarCount=t},e.prototype.setMaxOffsetLeftDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.left=t},e.prototype.setMaxOffsetRightDistance=function(t){this._scrollLimitRole="distance",this._maxOffsetDistance.right=t},e.prototype.setLeftMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.left=t},e.prototype.setRightMinVisibleBarCount=function(t){this._scrollLimitRole="bar_count",this._minVisibleBarCount.right=t},e.prototype.getVisibleRange=function(){return this._visibleRange},e.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},e.prototype.scroll=function(t){if(this._scrollEnabled){var r=t/this._barSpace,n=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-r,this._adjustVisibleRange(),this.setCrosshair(this._crosshair,{notInvalidate:!0}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:!0});var i=Math.round(n-this._lastBarRightSideDiffBarCount*this._barSpace);i!==0&&this.executeAction("onScroll",{distance:i})}},e.prototype.getDataByDataIndex=function(t){var r;return(r=this._dataList[t])!==null&&r!==void 0?r:null},e.prototype.coordinateToFloatIndex=function(t){var r=this._dataList.length,n=(this._totalBarSpace-t)/this._barSpace,i=r+this._lastBarRightSideDiffBarCount-n;return Math.round(i*1e6)/1e6},e.prototype.dataIndexToTimestamp=function(t){var r=this._dataList.length;if(r===0)return null;var n=this.getDataByDataIndex(t);if(we(n))return n.timestamp;if(we(this._period)){var i=r-1,o=null,s=0;if(t>i?(o=this._dataList[i].timestamp,s=t-i):t<0&&(o=this._dataList[0].timestamp,s=t),ht(o)){var u=this._period,c=u.type,h=u.span;switch(c){case"second":return o+h*1e3*s;case"minute":return o+h*60*1e3*s;case"hour":return o+h*60*60*1e3*s;case"day":return o+h*24*60*60*1e3*s;case"week":return o+h*7*24*60*60*1e3*s;case"month":{var p=new Date(o),g=p.getDate();p.setDate(1),p.setMonth(p.getMonth()+h*s);var m=new Date(p.getFullYear(),p.getMonth()+1,0).getDate();return p.setDate(Math.min(g,m)),p.getTime()}case"year":{var p=new Date(o);return p.setFullYear(p.getFullYear()+h*s),p.getTime()}}}}return null},e.prototype.timestampToDataIndex=function(t){var r=this._dataList.length;if(r===0)return 0;if(we(this._period)){var n=null,i=0,o=r-1,s=this._dataList[o].timestamp;t>s&&(n=s,i=o);var u=this._dataList[0].timestamp;if(t<u&&(n=u,i=0),ht(n)){var c=this._period,h=c.type,p=c.span;switch(h){case"second":return i+Math.floor((t-n)/(p*1e3));case"minute":return i+Math.floor((t-n)/(p*60*1e3));case"hour":return i+Math.floor((t-n)/(p*60*60*1e3));case"day":return i+Math.floor((t-n)/(p*24*60*60*1e3));case"week":return i+Math.floor((t-n)/(p*7*24*60*60*1e3));case"month":{var g=new Date(n),m=new Date(t),b=g.getFullYear(),x=m.getFullYear(),C=g.getMonth(),_=m.getMonth();return i+Math.floor(((x-b)*12+(_-C))/p)}case"year":{var b=new Date(n).getFullYear(),x=new Date(t).getFullYear();return i+Math.floor((x-b)/p)}}}}return Ag(this._dataList,"timestamp",t)},e.prototype.dataIndexToCoordinate=function(t){var r=this._dataList.length,n=r+this._lastBarRightSideDiffBarCount-t;return Math.floor(this._totalBarSpace-(n-.5)*this._barSpace+.5)},e.prototype.coordinateToDataIndex=function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1},e.prototype.zoom=function(t,r){var n=this,i;if(this._zoomEnabled){var o=r??null;ht(o==null?void 0:o.x)||(o={x:(i=this._crosshair.x)!==null&&i!==void 0?i:this._totalBarSpace/2});var s=o.x,u=this.coordinateToFloatIndex(s),c=this._barSpace,h=this._barSpace+t*(this._barSpace/Dg);this.setBarSpace(h,function(){n._lastBarRightSideDiffBarCount+=u-n.coordinateToFloatIndex(s)});var p=this._barSpace/c;p!==1&&this.executeAction("onZoom",{scale:p})}},e.prototype.setZoomEnabled=function(t){this._zoomEnabled=t},e.prototype.isZoomEnabled=function(){return this._zoomEnabled},e.prototype.setScrollEnabled=function(t){this._scrollEnabled=t},e.prototype.isScrollEnabled=function(){return this._scrollEnabled},e.prototype.setCrosshair=function(t,r){var n,i=r??{},o=i.notInvalidate,s=i.notExecuteAction,u=i.forceInvalidate,c=t??{},h=0,p=0;ht(c.x)?(h=this.coordinateToDataIndex(c.x),h<0?p=0:h>this._dataList.length-1?p=this._dataList.length-1:p=h):(h=this._dataList.length-1,p=h);var g=this._dataList[p],m=this.dataIndexToCoordinate(h),b={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=Ye(Ye({},c),{realX:m,kLineData:g,realDataIndex:h,dataIndex:p,timestamp:(n=this.dataIndexToTimestamp(h))!==null&&n!==void 0?n:void 0}),(b.x!==c.x||b.y!==c.y||b.paneId!==c.paneId||(u??!1))&&(we(g)&&!(s??!1)&&this.hasAction("onCrosshairChange")&&ur(this._crosshair.paneId)&&this.executeAction("onCrosshairChange",t),(o??!1)||this._chart.updatePane(1))},e.prototype.getCrosshair=function(){return this._crosshair},e.prototype.executeAction=function(t,r){var n;(n=this._actions.get(t))===null||n===void 0||n.execute(r)},e.prototype.subscribeAction=function(t,r){var n;this._actions.has(t)||this._actions.set(t,new t8),(n=this._actions.get(t))===null||n===void 0||n.subscribe(r)},e.prototype.unsubscribeAction=function(t,r){var n=this._actions.get(t);we(n)&&(n.unsubscribe(r),n.isEmpty()&&this._actions.delete(t))},e.prototype.hasAction=function(t){var r=this._actions.get(t);return we(r)&&!r.isEmpty()},e.prototype._sortIndicators=function(t){var r;ur(t)?(r=this._indicators.get(t))===null||r===void 0||r.sort(function(n,i){return n.zLevel-i.zLevel}):this._indicators.forEach(function(n){n.sort(function(i,o){return i.zLevel-o.zLevel})})},e.prototype._addIndicatorCalcTask=function(t,r){var n=this;this._taskScheduler.addTask({id:Cm(t.id),handler:function(){var i;(i=t.onDataStateChange)===null||i===void 0||i.call(t,{state:"loading",type:r,indicator:t}),t.calcImp(n._dataList).then(function(o){var s;o&&(n._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0,cacheYAxisWidth:r!=="init"}),(s=t.onDataStateChange)===null||s===void 0||s.call(t,{state:"ready",type:r,indicator:t}))}).catch(function(){var o;(o=t.onDataStateChange)===null||o===void 0||o.call(t,{state:"error",type:r,indicator:t})})}})},e.prototype.addIndicator=function(t,r,n){var i=t.name,o=this.getIndicatorsByFilter(t);if(o.length>0)return!1;var s=this.getIndicatorsByPaneId(r),u=Gy(i),c=new u;return this._synchronizeIndicatorSeriesPrecision(c),c.paneId=r,c.override(t),n||(this.removeIndicator({paneId:r}),s=[]),s.push(c),this._indicators.set(r,s),this._sortIndicators(r),this._addIndicatorCalcTask(c,"init"),!0},e.prototype.getIndicatorsByPaneId=function(t){var r;return(r=this._indicators.get(t))!==null&&r!==void 0?r:[]},e.prototype.getIndicatorsByFilter=function(t){var r=t.paneId,n=t.name,i=t.id,o=function(u){return we(i)?u.id===i:!we(n)||u.name===n},s=[];return we(r)?s=s.concat(this.getIndicatorsByPaneId(r).filter(o)):this._indicators.forEach(function(u){s=s.concat(u.filter(o))}),s},e.prototype.removeIndicator=function(t){var r=this,n=!1,i=this.getIndicatorsByFilter(t);return i.forEach(function(o){var s=r.getIndicatorsByPaneId(o.paneId),u=s.findIndex(function(c){return c.id===o.id});u>-1&&(r._taskScheduler.removeTask(Cm(o.id)),s.splice(u,1),n=!0),s.length===0&&r._indicators.delete(o.paneId)}),n},e.prototype.hasIndicators=function(t){return this._indicators.has(t)},e.prototype._synchronizeIndicatorSeriesPrecision=function(t){if(we(this._symbol)){var r=this._symbol,n=r.pricePrecision,i=n===void 0?2:n,o=r.volumePrecision,s=o===void 0?0:o,u=function(c){switch(c.series){case"price":{c.setSeriesPrecision(i);break}case"volume":{c.setSeriesPrecision(s);break}}};we(t)?u(t):this._indicators.forEach(function(c){c.forEach(function(h){u(h)})})}},e.prototype.overrideIndicator=function(t){var r=this,n=!1,i=!1,o=this.getIndicatorsByFilter(t);return o.forEach(function(s){s.override(t);var u=s.shouldUpdateImp(),c=u.calc,h=u.draw,p=u.sort;p&&(i=!0),c?r._addIndicatorCalcTask(s,"update"):h&&(n=!0)}),i&&this._sortIndicators(),n?(this._chart.layout({update:!0}),!0):!1},e.prototype.getOverlaysByFilter=function(t){var r,n=t.id,i=t.groupId,o=t.paneId,s=t.name,u=function(p){return we(n)?p.id===n:we(i)?p.groupId===i&&(!we(s)||p.name===s):!we(s)||p.name===s},c=[];we(o)?c=c.concat(this.getOverlaysByPaneId(o).filter(u)):this._overlays.forEach(function(p){c=c.concat(p.filter(u))});var h=(r=this._progressOverlayInfo)===null||r===void 0?void 0:r.overlay;return we(h)&&u(h)&&c.push(h),c},e.prototype.getOverlaysByPaneId=function(t){var r;if(!ur(t)){var n=[];return this._overlays.forEach(function(i){n=n.concat(i)}),n}return(r=this._overlays.get(t))!==null&&r!==void 0?r:[]},e.prototype._sortOverlays=function(t){var r;ur(t)?(r=this._overlays.get(t))===null||r===void 0||r.sort(function(n,i){return n.zLevel-i.zLevel}):this._overlays.forEach(function(n){n.sort(function(i,o){return i.zLevel-o.zLevel})})},e.prototype.addOverlays=function(t,r){var n=this,i=[],o=t.map(function(s,u){var c,h,p,g,m,b,x,C;if(we(s.id)){var _=null;try{for(var k=ca(n._overlays),M=k.next();!M.done;M=k.next()){var L=M.value,D=L[1],P=D.find(function(B){return B.id===s.id});if(we(P)){_=P;break}}}catch(B){c={error:B}}finally{try{M&&!M.done&&(h=k.return)&&h.call(k)}finally{if(c)throw c.error}}if(we(_))return s.id}var $=J8(s.name);if(we($)){var A=(p=s.id)!==null&&p!==void 0?p:bp(P8),P=new $,N=(g=s.paneId)!==null&&g!==void 0?g:Vt.CANDLE;s.id=A,(m=s.groupId)!==null&&m!==void 0||(s.groupId=A);var z=n.getOverlaysByPaneId(N).length;return(b=s.zLevel)!==null&&b!==void 0||(s.zLevel=z),P.override(s),i.includes(N)||i.push(N),P.isDrawing()?n._progressOverlayInfo={paneId:N,overlay:P,appointPaneFlag:r[u]}:(n._overlays.has(N)||n._overlays.set(N,[]),(x=n._overlays.get(N))===null||x===void 0||x.push(P)),P.isStart()&&((C=P.onDrawStart)===null||C===void 0||C.call(P,{overlay:P,chart:n._chart})),A}return null});return i.length>0&&(this._sortOverlays(),i.forEach(function(s){n._chart.updatePane(1,s)}),this._chart.updatePane(1,Vt.X_AXIS)),o},e.prototype.getProgressOverlayInfo=function(){return this._progressOverlayInfo},e.prototype.progressOverlayComplete=function(){var t;if(this._progressOverlayInfo!==null){var r=this._progressOverlayInfo,n=r.overlay,i=r.paneId;n.isDrawing()||(this._overlays.has(i)||this._overlays.set(i,[]),(t=this._overlays.get(i))===null||t===void 0||t.push(n),this._sortOverlays(i),this._progressOverlayInfo=null)}},e.prototype.updateProgressOverlayInfo=function(t,r){this._progressOverlayInfo!==null&&(N0(r)&&r&&(this._progressOverlayInfo.appointPaneFlag=r),this._progressOverlayInfo.paneId=t,this._progressOverlayInfo.overlay.override({paneId:t}))},e.prototype.overrideOverlay=function(t){var r=this,n=!1,i=[],o=this.getOverlaysByFilter(t);return o.forEach(function(s){s.override(t);var u=s.shouldUpdate(),c=u.sort,h=u.draw;c&&(n=!0),(c||h)&&(i.includes(s.paneId)||i.push(s.paneId))}),n&&this._sortOverlays(),i.length>0?(i.forEach(function(s){r._chart.updatePane(1,s)}),this._chart.updatePane(1,Vt.X_AXIS),!0):!1},e.prototype.removeOverlay=function(t){var r=this,n=[],i=this.getOverlaysByFilter(t);return i.forEach(function(o){var s,u=o.paneId,c=r.getOverlaysByPaneId(o.paneId);if((s=o.onRemoved)===null||s===void 0||s.call(o,{overlay:o,chart:r._chart}),n.includes(u)||n.push(u),o.isDrawing())r._progressOverlayInfo=null;else{var h=c.findIndex(function(p){return p.id===o.id});h>-1&&c.splice(h,1)}c.length===0&&r._overlays.delete(u)}),n.length>0?(n.forEach(function(o){r._chart.updatePane(1,o)}),this._chart.updatePane(1,Vt.X_AXIS),!0):!1},e.prototype.setPressedOverlayInfo=function(t){this._pressedOverlayInfo=t},e.prototype.getPressedOverlayInfo=function(){return this._pressedOverlayInfo},e.prototype.setHoverOverlayInfo=function(t,r,n){var i=this._hoverOverlayInfo,o=i.overlay,s=i.figureType,u=i.figureIndex,c=i.figure,h=t.overlay;if(((o==null?void 0:o.id)!==(h==null?void 0:h.id)||s!==t.figureType||u!==t.figureIndex)&&(this._hoverOverlayInfo=t,(o==null?void 0:o.id)!==(h==null?void 0:h.id))){var p=!1,g=!1;o!==null&&(o.override({zLevel:o.getPrevZLevel()}),g=!0,n(o,c)&&(p=!0)),h!==null&&(h.setPrevZLevel(h.zLevel),h.override({zLevel:Number.MAX_SAFE_INTEGER}),g=!0,r(h,t.figure)&&(p=!0)),g&&this._sortOverlays(),p||this._chart.updatePane(1)}},e.prototype.getHoverOverlayInfo=function(){return this._hoverOverlayInfo},e.prototype.setClickOverlayInfo=function(t,r,n){var i=this._clickOverlayInfo,o=i.paneId,s=i.overlay,u=i.figureType,c=i.figure,h=i.figureIndex,p=t.overlay;((s==null?void 0:s.id)!==(p==null?void 0:p.id)||u!==t.figureType||h!==t.figureIndex)&&(this._clickOverlayInfo=t,(s==null?void 0:s.id)!==(p==null?void 0:p.id)&&(we(s)&&n(s,c),we(p)&&r(p,t.figure),this._chart.updatePane(1,t.paneId),o!==t.paneId&&this._chart.updatePane(1,o),this._chart.updatePane(1,Vt.X_AXIS)))},e.prototype.getClickOverlayInfo=function(){return this._clickOverlayInfo},e.prototype.isOverlayEmpty=function(){return this._overlays.size===0&&this._progressOverlayInfo===null},e.prototype.isOverlayDrawing=function(){var t,r;return(r=(t=this._progressOverlayInfo)===null||t===void 0?void 0:t.overlay.isDrawing())!==null&&r!==void 0?r:!1},e.prototype._clearLastPriceMarkExtendTextUpdateTimer=function(){this._lastPriceMarkExtendTextUpdateTimers.forEach(function(t){clearInterval(t)}),this._lastPriceMarkExtendTextUpdateTimers=[]},e.prototype._clearData=function(){this._dataLoadMore.backward=!1,this._dataLoadMore.forward=!1,this._loading=!1,this._dataList=[],this._visibleRangeDataList=[],this._visibleRangeHighLowPrice=[{x:0,price:Number.MIN_SAFE_INTEGER},{x:0,price:Number.MAX_SAFE_INTEGER}],this._visibleRange=wm(),this._crosshair={}},e.prototype.getChart=function(){return this._chart},e.prototype.destroy=function(){this._clearData(),this._clearLastPriceMarkExtendTextUpdateTimer(),this._taskScheduler.removeTask(),this._overlays.clear(),this._indicators.clear(),this._actions.clear()},e})(),Wt={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"},R0=7;function lb(){return Wy(this,void 0,void 0,function(){return Hy(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t){var r=new ResizeObserver(function(n){t(n.every(function(i){return"devicePixelContentBoxSize"in i})),r.disconnect()});r.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,e.sent()]}})})}var Mm=(function(){function e(t,r){var n=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=zd,this._mediaQueryListener=function(){var i=Dl(n._element);n._nextPixelWidth=Math.round(n._element.clientWidth*i),n._nextPixelHeight=Math.round(n._element.clientHeight*i),n._resetPixelRatio()},this._listener=r,this._element=zs("canvas",t),this._ctx=this._element.getContext("2d"),lb().then(function(i){n._supportedDevicePixelContentBox=i,i?(n._resizeObserver=new ResizeObserver(function(o){var s=o.find(function(c){return c.target===n._element}),u=s==null?void 0:s.devicePixelContentBoxSize[0];we(u)&&(n._nextPixelWidth=u.inlineSize,n._nextPixelHeight=u.blockSize,(n._pixelWidth!==n._nextPixelWidth||n._pixelHeight!==n._nextPixelHeight)&&n._resetPixelRatio())}),n._resizeObserver.observe(n._element,{box:"device-pixel-content-box"})):(n._mediaQueryList=window.matchMedia("(resolution: ".concat(Dl(n._element),"dppx)")),n._mediaQueryList.addListener(n._mediaQueryListener))}).catch(function(i){return!1})}return e.prototype._resetPixelRatio=function(){var t=this;this._executeListener(function(){var r=t._element.clientWidth,n=t._element.clientHeight;t._width=r,t._height=n,t._pixelWidth=t._nextPixelWidth,t._pixelHeight=t._nextPixelHeight,t._element.width=t._nextPixelWidth,t._element.height=t._nextPixelHeight;var i=t._nextPixelWidth/r,o=t._nextPixelHeight/n;t._ctx.scale(i,o)})},e.prototype._executeListener=function(t){var r=this;this._requestAnimationId===zd&&(this._requestAnimationId=Pp(function(){r._ctx.clearRect(0,0,r._width,r._height),t==null||t(),r._listener(),r._requestAnimationId=zd}))},e.prototype.update=function(t,r){if(this._width!==t||this._height!==r){if(this._element.style.width="".concat(t,"px"),this._element.style.height="".concat(r,"px"),!this._supportedDevicePixelContentBox){var n=Dl(this._element);this._nextPixelWidth=Math.round(t*n),this._nextPixelHeight=Math.round(r*n),this._resetPixelRatio()}}else this._executeListener()},e.prototype.getElement=function(){return this._element},e.prototype.getContext=function(){return this._ctx},e.prototype.destroy=function(){we(this._resizeObserver)&&this._resizeObserver.unobserve(this._element),we(this._mediaQueryList)&&this._mediaQueryList.removeListener(this._mediaQueryListener)},e})(),i2=(function(e){At(t,e);function t(r,n){var i=e.call(this)||this;return i._bounding=Lp(),i._cursor="crosshair",i._forceCursor=null,i._pane=n,i._rootContainer=r,i._container=i.createContainer(),r.appendChild(i._container),i}return t.prototype.setBounding=function(r){return yn(this._bounding,r),this},t.prototype.getContainer=function(){return this._container},t.prototype.getBounding=function(){return this._bounding},t.prototype.getPane=function(){return this._pane},t.prototype.checkEventOn=function(r){return!0},t.prototype.setCursor=function(r){ur(this._forceCursor)||r!==this._cursor&&(this._cursor=r,this._container.style.cursor=this._cursor)},t.prototype.setForceCursor=function(r){var n;r!==this._forceCursor&&(this._forceCursor=r,this._container.style.cursor=(n=this._forceCursor)!==null&&n!==void 0?n:this._cursor)},t.prototype.getForceCursor=function(){return this._forceCursor},t.prototype.update=function(r){this.updateImp(this._container,this._bounding,r??3)},t.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},t})(Jg),rv=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;i._mainCanvas=new Mm({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateMain(i._mainCanvas.getContext())}),i._overlayCanvas=new Mm({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateOverlay(i._overlayCanvas.getContext())});var o=i.getContainer();return o.appendChild(i._mainCanvas.getElement()),o.appendChild(i._overlayCanvas.getElement()),i}return t.prototype.createContainer=function(){return zs("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},t.prototype.updateImp=function(r,n,i){var o=n.width,s=n.height,u=n.left;r.style.left="".concat(u,"px");var c=i,h=r.clientWidth,p=r.clientHeight;switch((o!==h||s!==p)&&(r.style.width="".concat(o,"px"),r.style.height="".concat(s,"px"),c=3),c){case 0:{this._mainCanvas.update(o,s);break}case 1:{this._overlayCanvas.update(o,s);break}case 3:case 4:{this._mainCanvas.update(o,s),this._overlayCanvas.update(o,s);break}}},t.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},t.prototype.getImage=function(r){var n=this.getBounding(),i=n.width,o=n.height,s=zs("canvas",{width:"".concat(i,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),u=s.getContext("2d"),c=Dl(s);return s.width=i*c,s.height=o*c,u.scale(c,c),u.drawImage(this._mainCanvas.getElement(),0,0,i,o),r&&u.drawImage(this._overlayCanvas.getElement(),0,0,i,o),s},t})(i2);function o2(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=ca(i),s=o.next();!s.done;s=o.next()){var u=s.value,c=u.x,h=u.y,p=u.r,g=e.x-c,m=e.y-h;if(!(g*g+m*m>p*p))return!0}}catch(b){r={error:b}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function cb(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"fill":i,s=r.color,u=s===void 0?"currentColor":s,c=r.borderSize,h=c===void 0?1:c,p=r.borderColor,g=p===void 0?"currentColor":p,m=r.borderStyle,b=m===void 0?"solid":m,x=r.borderDashedValue,C=x===void 0?[2,2]:x,_=(o==="fill"||r.style==="stroke_fill")&&(!ur(u)||!Ud(u));_&&(e.fillStyle=u,n.forEach(function(k){var M=k.x,L=k.y,D=k.r;e.beginPath(),e.arc(M,L,D,0,Math.PI*2),e.closePath(),e.fill()})),(o==="stroke"||r.style==="stroke_fill")&&h>0&&!Ud(g)&&(e.strokeStyle=g,e.lineWidth=h,b==="dashed"?e.setLineDash(C):e.setLineDash([]),n.forEach(function(k){var M=k.x,L=k.y,D=k.r;(!_||D>h)&&(e.beginPath(),e.arc(M,L,D,0,Math.PI*2),e.closePath(),e.stroke())}))}var ub={name:"circle",checkEventOn:o2,draw:function(e,t,r){cb(e,t,r)}};function a2(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=ca(i),s=o.next();!s.done;s=o.next()){for(var u=s.value,c=!1,h=u.coordinates,p=0,g=h.length-1;p<h.length;g=p++)h[p].y>e.y!=h[g].y>e.y&&e.x<(h[g].x-h[p].x)*(e.y-h[p].y)/(h[g].y-h[p].y)+h[p].x&&(c=!c);if(c)return!0}}catch(m){r={error:m}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function db(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"fill":i,s=r.color,u=s===void 0?"currentColor":s,c=r.borderSize,h=c===void 0?1:c,p=r.borderColor,g=p===void 0?"currentColor":p,m=r.borderStyle,b=m===void 0?"solid":m,x=r.borderDashedValue,C=x===void 0?[2,2]:x;(o==="fill"||r.style==="stroke_fill")&&(!ur(u)||!Ud(u))&&(e.fillStyle=u,n.forEach(function(_){var k=_.coordinates;e.beginPath(),e.moveTo(k[0].x,k[0].y);for(var M=1;M<k.length;M++)e.lineTo(k[M].x,k[M].y);e.closePath(),e.fill()})),(o==="stroke"||r.style==="stroke_fill")&&h>0&&!Ud(g)&&(e.strokeStyle=g,e.lineWidth=h,b==="dashed"?e.setLineDash(C):e.setLineDash([]),n.forEach(function(_){var k=_.coordinates;e.beginPath(),e.moveTo(k[0].x,k[0].y);for(var M=1;M<k.length;M++)e.lineTo(k[M].x,k[M].y);e.closePath(),e.stroke()}))}var hb={name:"polygon",checkEventOn:a2,draw:function(e,t,r){db(e,t,r)}};function nv(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=ca(i),s=o.next();!s.done;s=o.next()){var u=s.value,c=u.x,h=u.width;h<Wn*2&&(c-=Wn,h=Wn*2);var p=u.y,g=u.height;if(g<Wn*2&&(p-=Wn,g=Wn*2),e.x>=c&&e.x<=c+h&&e.y>=p&&e.y<=p+g)return!0}}catch(m){r={error:m}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function s2(e,t,r){var n,i=[];i=i.concat(t);var o=r.style,s=o===void 0?"fill":o,u=r.color,c=u===void 0?"transparent":u,h=r.borderSize,p=h===void 0?1:h,g=r.borderColor,m=g===void 0?"transparent":g,b=r.borderStyle,x=b===void 0?"solid":b,C=r.borderRadius,_=C===void 0?0:C,k=r.borderDashedValue,M=k===void 0?[2,2]:k,L=(n=e.roundRect)!==null&&n!==void 0?n:e.rect,D=(s==="fill"||r.style==="stroke_fill")&&(!ur(c)||!Ud(c));if(D&&(e.fillStyle=c,i.forEach(function(A){var N=A.x,z=A.y,B=A.width,Q=A.height;e.beginPath(),L.call(e,N,z,B,Q,_),e.closePath(),e.fill()})),(s==="stroke"||r.style==="stroke_fill")&&p>0&&!Ud(m)){e.strokeStyle=m,e.fillStyle=m,e.lineWidth=p,x==="dashed"?e.setLineDash(M):e.setLineDash([]);var P=p%2===1?.5:0,$=Math.round(P*2);i.forEach(function(A){var N=A.x,z=A.y,B=A.width,Q=A.height;B>p*2&&Q>p*2?(e.beginPath(),L.call(e,N+P,z+P,B-$,Q-$,_),e.closePath(),e.stroke()):D||e.fillRect(N,z,B,Q)})}}var pb={name:"rect",checkEventOn:nv,draw:function(e,t,r){s2(e,t,r)}};function l2(e,t){var r=t.size,n=r===void 0?12:r,i=t.paddingLeft,o=i===void 0?0:i,s=t.paddingTop,u=s===void 0?0:s,c=t.paddingRight,h=c===void 0?0:c,p=t.paddingBottom,g=p===void 0?0:p,m=t.weight,b=m===void 0?"normal":m,x=t.family,C=e.x,_=e.y,k=e.text,M=e.align,L=M===void 0?"left":M,D=e.baseline,P=D===void 0?"top":D,$=e.width,A=e.height,N=$??o+aa(k,n,b,x)+h,z=A??u+n+g,B=0;switch(L){case"left":case"start":{B=C;break}case"right":case"end":{B=C-N;break}default:{B=C-N/2;break}}var Q=0;switch(P){case"top":case"hanging":{Q=_;break}case"bottom":case"ideographic":case"alphabetic":{Q=_-z;break}default:{Q=_-z/2;break}}return{x:B,y:Q,width:N,height:z}}function c2(e,t,r){var n,i,o=[];o=o.concat(t);try{for(var s=ca(o),u=s.next();!u.done;u=s.next()){var c=u.value,h=l2(c,r),p=h.x,g=h.y,m=h.width,b=h.height;if(e.x>=p&&e.x<=p+m&&e.y>=g&&e.y<=g+b)return!0}}catch(x){n={error:x}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return!1}function fb(e,t,r){var n=[];n=n.concat(t);var i=r.color,o=i===void 0?"currentColor":i,s=r.size,u=s===void 0?12:s,c=r.family,h=r.weight,p=r.paddingLeft,g=p===void 0?0:p,m=r.paddingTop,b=m===void 0?0:m,x=r.paddingRight,C=x===void 0?0:x,_=n.map(function(k){return l2(k,r)});s2(e,_,Ye(Ye({},r),{color:r.backgroundColor})),e.textAlign="left",e.textBaseline="top",e.font=Kc(u,h,c),e.fillStyle=o,n.forEach(function(k,M){var L=_[M];e.fillText(k.text,L.x+g,L.y+b,L.width-g-C)})}var gb={name:"text",checkEventOn:c2,draw:function(e,t,r){fb(e,t,r)}};function vb(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}function u2(e,t){var r,n,i=[];i=i.concat(t);try{for(var o=ca(i),s=o.next();!s.done;s=o.next()){var u=s.value;if(Math.abs(vb(e,u)-u.r)<Wn){var c=u.r,h=u.startAngle,p=u.endAngle,g=c*Math.cos(h)+u.x,m=c*Math.sin(h)+u.y,b=c*Math.cos(p)+u.x,x=c*Math.sin(p)+u.y;if(e.x<=Math.max(g,b)+Wn&&e.x>=Math.min(g,b)-Wn&&e.y<=Math.max(m,x)+Wn&&e.y>=Math.min(m,x)-Wn)return!0}}}catch(C){r={error:C}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function mb(e,t,r){var n=[];n=n.concat(t);var i=r.style,o=i===void 0?"solid":i,s=r.size,u=s===void 0?1:s,c=r.color,h=c===void 0?"currentColor":c,p=r.dashedValue,g=p===void 0?[2,2]:p;e.lineWidth=u,e.strokeStyle=h,o==="dashed"?e.setLineDash(g):e.setLineDash([]),n.forEach(function(m){var b=m.x,x=m.y,C=m.r,_=m.startAngle,k=m.endAngle;e.beginPath(),e.arc(b,x,C,_,k),e.stroke(),e.closePath()})}var yb={name:"arc",checkEventOn:u2,draw:function(e,t,r){mb(e,t,r)}};function Em(e,t,r,n,i,o,s){var u=j0(n,7),c=u[0],h=u[1],p=u[2],g=u[3],m=u[4],b=u[5],x=u[6],C=s?t+b:b+i,_=s?r+x:x+o,k=bb(t,r,c,h,p,g,m,C,_);k.forEach(function(M){e.bezierCurveTo(M[0],M[1],M[2],M[3],M[4],M[5])})}function bb(e,t,r,n,i,o,s,u,c){for(var h=xb(e,t,r,n,i,o,s,u,c),p=h.cx,g=h.cy,m=h.startAngle,b=h.deltaAngle,x=[],C=Math.ceil(Math.abs(b)/(Math.PI/2)),_=0;_<C;_++){var k=m+_*b/C,M=m+(_+1)*b/C,L=wb(p,g,r,n,i,k,M);x.push(L)}return x}function xb(e,t,r,n,i,o,s,u,c){var h=i*Math.PI/180,p=(e-u)/2,g=(t-c)/2,m=Math.cos(h)*p+Math.sin(h)*g,b=-Math.sin(h)*p+Math.cos(h)*g,x=Math.pow(m,2)/Math.pow(r,2)+Math.pow(b,2)/Math.pow(n,2);x>1&&(r*=Math.sqrt(x),n*=Math.sqrt(x));var C=o===s?-1:1,_=Math.pow(r,2)*Math.pow(n,2)-Math.pow(r,2)*Math.pow(b,2)-Math.pow(n,2)*Math.pow(m,2),k=Math.pow(r,2)*Math.pow(b,2)+Math.pow(n,2)*Math.pow(m,2),M=C*Math.sqrt(Math.abs(_/k))*(r*b/n),L=C*Math.sqrt(Math.abs(_/k))*(-n*m/r),D=Math.cos(h)*M-Math.sin(h)*L+(e+u)/2,P=Math.sin(h)*M+Math.cos(h)*L+(t+c)/2,$=Math.atan2((b-L)/n,(m-M)/r),A=Math.atan2((-b-L)/n,(-m-M)/r)-$;return A<0&&s===1?A+=2*Math.PI:A>0&&s===0&&(A-=2*Math.PI),{cx:D,cy:P,startAngle:$,deltaAngle:A}}function wb(e,t,r,n,i,o,s){var u=Math.sin(s-o)*(Math.sqrt(4+3*Math.pow(Math.tan((s-o)/2),2))-1)/3,c=Math.cos(i),h=Math.sin(i),p=e+r*Math.cos(o)*c-n*Math.sin(o)*h,g=t+r*Math.cos(o)*h+n*Math.sin(o)*c,m=e+r*Math.cos(s)*c-n*Math.sin(s)*h,b=t+r*Math.cos(s)*h+n*Math.sin(s)*c,x=p+u*(-r*Math.sin(o)*c-n*Math.cos(o)*h),C=g+u*(-r*Math.sin(o)*h+n*Math.cos(o)*c),_=m-u*(-r*Math.sin(s)*c-n*Math.cos(s)*h),k=b-u*(-r*Math.sin(s)*h+n*Math.cos(s)*c);return[x,C,_,k,m,b]}function Cb(e,t,r){var n=[];n=n.concat(t);var i=r.lineWidth,o=i===void 0?1:i,s=r.color,u=s===void 0?"currentColor":s;e.lineWidth=o,e.strokeStyle=u,e.setLineDash([]),n.forEach(function(c){var h=c.x,p=c.y,g=c.path,m=g.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi);if(we(m)){var b=h,x=p;e.beginPath(),m.forEach(function(C){var _=0,k=0,M=0,L=0,D=C[0],P=C.slice(1).trim().split(/[\s,]+/).map(Number);switch(D){case"M":_=P[0]+b,k=P[1]+x,e.moveTo(_,k),M=_,L=k;break;case"m":_+=P[0],k+=P[1],e.moveTo(_,k),M=_,L=k;break;case"L":_=P[0]+b,k=P[1]+x,e.lineTo(_,k);break;case"l":_+=P[0],k+=P[1],e.lineTo(_,k);break;case"H":_=P[0]+b,e.lineTo(_,k);break;case"h":_+=P[0],e.lineTo(_,k);break;case"V":k=P[0]+x,e.lineTo(_,k);break;case"v":k+=P[0],e.lineTo(_,k);break;case"C":e.bezierCurveTo(P[0]+b,P[1]+x,P[2]+b,P[3]+x,P[4]+b,P[5]+x),_=P[4]+b,k=P[5]+x;break;case"c":e.bezierCurveTo(_+P[0],k+P[1],_+P[2],k+P[3],_+P[4],k+P[5]),_+=P[4],k+=P[5];break;case"S":e.bezierCurveTo(_,k,P[0]+b,P[1]+x,P[2]+b,P[3]+x),_=P[2]+b,k=P[3]+x;break;case"s":e.bezierCurveTo(_,k,_+P[0],k+P[1],_+P[2],k+P[3]),_+=P[2],k+=P[3];break;case"Q":e.quadraticCurveTo(P[0]+b,P[1]+x,P[2]+b,P[3]+x),_=P[2]+b,k=P[3]+x;break;case"q":e.quadraticCurveTo(_+P[0],k+P[1],_+P[2],k+P[3]),_+=P[2],k+=P[3];break;case"T":e.quadraticCurveTo(_,k,P[0]+b,P[1]+x),_=P[0]+b,k=P[1]+x;break;case"t":e.quadraticCurveTo(_,k,_+P[0],k+P[1]),_+=P[0],k+=P[1];break;case"A":Em(e,_,k,P,b,x,!1),_=P[5]+b,k=P[6]+x;break;case"a":Em(e,_,k,P,b,x,!0),_+=P[5],k+=P[6];break;case"Z":case"z":e.closePath(),_=M,k=L;break}}),r.style==="fill"?e.fill():e.stroke()}})}var _b={name:"path",checkEventOn:nv,draw:function(e,t,r){Cb(e,t,r)}},iv={},Sb=[ub,z8,hb,pb,gb,yb,_b];Sb.forEach(function(e){iv[e.name]=O8.extend(e)});function kb(e){var t;return(t=iv[e])!==null&&t!==void 0?t:null}function jd(e){var t;return(t=iv[e])!==null&&t!==void 0?t:null}var No=(function(e){At(t,e);function t(r){var n=e.call(this)||this;return n._widget=r,n}return t.prototype.getWidget=function(){return this._widget},t.prototype.createFigure=function(r,n){var i=kb(r.name);if(i!==null){var o=new i(r);if(we(n)){for(var s in n)n.hasOwnProperty(s)&&o.registerEvent(s,n[s]);this.addChild(o)}return o}return null},t.prototype.draw=function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.clear(),this.drawImp(r,n)},t.prototype.checkEventOn=function(r){return!0},t})(Jg),Mb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i,o=this.getWidget(),s=this.getWidget().getPane(),u=s.getChart(),c=o.getBounding(),h=u.getStyles().grid,p=h.show;if(p){r.save(),r.globalCompositeOperation="destination-over";var g=h.horizontal,m=g.show;if(m){var b=s.getAxisComponent(),x=b.getTicks().map(function(M){return{coordinates:[{x:0,y:M.coord},{x:c.width,y:M.coord}]}});(n=this.createFigure({name:"line",attrs:x,styles:g}))===null||n===void 0||n.draw(r)}var C=h.vertical,_=C.show;if(_){var k=u.getXAxisPane().getAxisComponent(),x=k.getTicks().map(function(L){return{coordinates:[{x:L.coord,y:0},{x:L.coord,y:c.height}]}});(i=this.createFigure({name:"line",attrs:x,styles:C}))===null||i===void 0||i.draw(r)}r.restore()}},t})(No),d2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.eachChildren=function(r){for(var n=this.getWidget().getPane(),i=n.getChart().getChartStore(),o=i.getVisibleRangeDataList(),s=i.getBarSpace(),u=o.length,c=0;c<u;)r(o[c],s,c),++c},t})(No),Tm=1e-6,h2=(function(e){At(t,e);function t(){var r=e.apply(this,jp([],j0(arguments),!1))||this;return r._heikinAshiCache=new Map,r._boundCandleBarClickEvent=function(n){return function(){return r.getWidget().getPane().getChart().getChartStore().executeAction("onCandleBarClick",n),!1}},r}return t.prototype.drawImp=function(r){var n=this,i=this.getWidget().getPane(),o=i.getId()===Vt.CANDLE,s=i.getChart().getChartStore(),u=this.getCandleBarOptions();if(u!==null){var c=u.type,h=u.styles,p=0,g=0;if(u.type==="ohlc"){var m=s.getBarSpace().gapBar;p=Math.min(Math.max(Math.round(m*.2),1),8),p>2&&p%2===1&&p--,g=Math.floor(p/2)}u.type!=="heikin_ashi"&&this._heikinAshiCache.clear();var b=i.getAxisComponent();this.eachChildren(function(x,C){var _,k=x.x,M=x.data,L=M.current,D=M.prev;if(we(L)){var P=L.open,$=L.high,A=L.low,N=L.close,z=h.compareRule==="current_open"?P:(_=D==null?void 0:D.close)!==null&&_!==void 0?_:N,B=[];N>z?(B[0]=h.upColor,B[1]=h.upBorderColor,B[2]=h.upWickColor):N<z?(B[0]=h.downColor,B[1]=h.downBorderColor,B[2]=h.downWickColor):(B[0]=h.noChangeColor,B[1]=h.noChangeBorderColor,B[2]=h.noChangeWickColor);var Q=b.convertToPixel(P),ne=b.convertToPixel(N),Z=[Q,ne,b.convertToPixel($),b.convertToPixel(A)];Z.sort(function(ae,te){return ae-te});var J=C.gapBar%2===0?1:0,ue=[];switch(c){case"candle_solid":{ue=n._createSolidBar(k,Z,C,B,J);break}case"candle_stroke":{ue=n._createStrokeBar(k,Z,C,B,J);break}case"candle_up_stroke":{N>P?ue=n._createStrokeBar(k,Z,C,B,J):ue=n._createSolidBar(k,Z,C,B,J);break}case"candle_down_stroke":{P>N?ue=n._createStrokeBar(k,Z,C,B,J):ue=n._createSolidBar(k,Z,C,B,J);break}case"ohlc":{ue=[{name:"rect",attrs:[{x:k-g,y:Z[0],width:p,height:Z[3]-Z[0]},{x:k-C.halfGapBar,y:Q+p>Z[3]?Z[3]-p:Q,width:C.halfGapBar-g,height:p},{x:k+g,y:ne+p>Z[3]?Z[3]-p:ne,width:C.halfGapBar-g,height:p}],styles:{color:B[0]}}];break}case"heikin_ashi":{var le=n._calculateHeikinAshi(x);B=n._getHeikinAshiColors(le.haValues.open,le.haValues.close,P,N,h),ue=n._createSolidBar(k,le.priceY,C,B,J);break}}ue.forEach(function(ae){var te,ve=null;o&&(ve={mouseClickEvent:n._boundCandleBarClickEvent(x)}),(te=n.createFigure(ae,ve??void 0))===null||te===void 0||te.draw(r)})}})}},t.prototype.getCandleBarOptions=function(){var r=this.getWidget().getPane().getChart().getStyles().candle;return{type:r.type,styles:r.bar}},t.prototype._createSolidBar=function(r,n,i,o,s){return[{name:"rect",attrs:{x:r,y:n[0],width:1,height:n[3]-n[0]},styles:{color:o[2]}},{name:"rect",attrs:{x:r-i.halfGapBar,y:n[1],width:i.gapBar+s,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke_fill",color:o[0],borderColor:o[1]}}]},t.prototype._createStrokeBar=function(r,n,i,o,s){return[{name:"rect",attrs:[{x:r,y:n[0],width:1,height:n[1]-n[0]},{x:r,y:n[2],width:1,height:n[3]-n[2]}],styles:{color:o[2]}},{name:"rect",attrs:{x:r-i.halfGapBar,y:n[1],width:i.gapBar+s,height:Math.max(1,n[2]-n[1])},styles:{style:"stroke",borderColor:o[1]}}]},t.prototype._calculateHeikinAshi=function(r){var n=r.data,i=r.dataIndex,o=n.current,s=o.open,u=o.high,c=o.low,h=o.close,p=this._heikinAshiCache.get(i);if(p!==void 0){var g=this.getWidget().getPane().getAxisComponent(),m=[g.convertToPixel(p.open),g.convertToPixel(p.close),g.convertToPixel(p.high),g.convertToPixel(p.low)];return m.sort(function($,A){return $-A}),{priceY:m,haValues:p}}var b=(s+u+c+h)/4,x=0;if(i>0){var C=this._getHeikinAshiValues(i-1);if(C!==null)x=(C.open+C.close)/2;else{var _=this.getPreviousData(i);_!==null?x=(_.open+_.close)/2:x=s}}else x=(s+h)/2;var k=Math.max(u,x,b),M=Math.min(c,x,b),L={open:x,high:k,low:M,close:b};this._heikinAshiCache.set(i,L);var D=this.getWidget().getPane().getAxisComponent(),P=[D.convertToPixel(x),D.convertToPixel(b),D.convertToPixel(k),D.convertToPixel(M)];return P.sort(function($,A){return $-A}),{priceY:P,haValues:L}},t.prototype._getHeikinAshiValues=function(r){var n=this._heikinAshiCache.get(r);if(n!==void 0)return n;var i=this.getWidget().getPane().getChart().getChartStore().getDataList();if(r<0||r>=i.length)return null;var o=i[r],s=null;r>0&&(s=this._getHeikinAshiValues(r-1));var u=o.open,c=o.high,h=o.low,p=o.close,g=(u+c+h+p)/4,m=0;s!==null?m=(s.open+s.close)/2:m=(u+p)/2;var b=Math.max(c,m,g),x=Math.min(h,m,g),C={open:m,high:b,low:x,close:g};return this._heikinAshiCache.set(r,C),C},t.prototype.getPreviousData=function(r){var n=this.getWidget().getPane(),i=n.getChart().getChartStore(),o=i.getDataList();return r<=0||r>=o.length?null:r>0&&r<o.length?o[r-1]:null},t.prototype._getHeikinAshiColors=function(r,n,i,o,s){var u=[],c=n-r;return c>Tm?(u[0]=s.upColor,u[1]=s.upBorderColor,u[2]=s.upWickColor):c<-Tm?(u[0]=s.downColor,u[1]=s.downBorderColor,u[2]=s.downWickColor):o>i?(u[0]=s.upColor,u[1]=s.upBorderColor,u[2]=s.upWickColor):o<i?(u[0]=s.downColor,u[1]=s.downBorderColor,u[2]=s.downWickColor):(u[0]=s.noChangeColor,u[1]=s.noChangeBorderColor,u[2]=s.noChangeWickColor),u},t})(d2),Eb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCandleBarOptions=function(){var r,n,i=this.getWidget().getPane(),o=i.getAxisComponent();if(!o.isInCandle()){var s=i.getChart().getChartStore(),u=s.getIndicatorsByPaneId(i.getId());try{for(var c=ca(u),h=c.next();!h.done;h=c.next()){var p=h.value;if(p.shouldOhlc&&p.visible){var g=p.styles,m=s.getStyles().indicator,b=In(g,"ohlc.compareRule",m.ohlc.compareRule),x=In(g,"ohlc.upColor",m.ohlc.upColor),C=In(g,"ohlc.downColor",m.ohlc.downColor),_=In(g,"ohlc.noChangeColor",m.ohlc.noChangeColor);return{type:"ohlc",styles:{compareRule:b,upColor:x,downColor:C,noChangeColor:_,upBorderColor:x,downBorderColor:C,noChangeBorderColor:_,upWickColor:x,downWickColor:C,noChangeWickColor:_}}}}}catch(k){r={error:k}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}return null},t.prototype.drawImp=function(r){var n=this;e.prototype.drawImp.call(this,r);var i=this.getWidget(),o=i.getPane(),s=o.getChart(),u=i.getBounding(),c=s.getXAxisPane().getAxisComponent(),h=o.getAxisComponent(),p=s.getChartStore(),g=p.getIndicatorsByPaneId(o.getId()),m=p.getStyles().indicator;r.save(),g.forEach(function(b){if(b.visible){b.zLevel<0?r.globalCompositeOperation="destination-over":r.globalCompositeOperation="source-over";var x=!1;if(b.draw!==null&&(r.save(),x=b.draw({ctx:r,chart:s,indicator:b,bounding:u,xAxis:c,yAxis:h}),r.restore()),!x){var C=b.result,_=[];n.eachChildren(function(k,M){var L,D,P,$,A,N,z,B,Q,ne,Z,J,ue,le,ae,te=M.halfGapBar,ve=k.dataIndex,pe=k.x,j=k.data,H=c.convertToPixel(ve-1),de=c.convertToPixel(ve+1),U=(P=C[(D=(L=j.prev)===null||L===void 0?void 0:L.timestamp)!==null&&D!==void 0?D:""])!==null&&P!==void 0?P:{},fe=(N=C[(A=($=j.current)===null||$===void 0?void 0:$.timestamp)!==null&&A!==void 0?A:""])!==null&&N!==void 0?N:{},ce=(Q=C[(B=(z=j.next)===null||z===void 0?void 0:z.timestamp)!==null&&B!==void 0?B:""])!==null&&Q!==void 0?Q:{},Oe={x:H},Ee={x:pe},Fe={x:de};b.figures.forEach(function(Ce){var Te=Ce.key,et=U[Te];ht(et)&&(Oe[Te]=h.convertToPixel(et));var Qe=fe[Te];ht(Qe)&&(Ee[Te]=h.convertToPixel(Qe));var it=ce[Te];ht(it)&&(Fe[Te]=h.convertToPixel(it))}),Qg(b,{prev:(Z=(ne=j.prev)===null||ne===void 0?void 0:ne.timestamp)!==null&&Z!==void 0?Z:null,current:(ue=(J=j.current)===null||J===void 0?void 0:J.timestamp)!==null&&ue!==void 0?ue:null,next:(ae=(le=j.next)===null||le===void 0?void 0:le.timestamp)!==null&&ae!==void 0?ae:null},m,function(Ce,Te,et){var Qe,it,He;if(we(fe[Ce.key])){var ct=Ee[Ce.key],ut=(Qe=Ce.attrs)===null||Qe===void 0?void 0:Qe.call(Ce,{data:{prev:U,current:fe,next:ce},coordinate:{prev:Oe,current:Ee,next:Fe},bounding:u,barSpace:M,xAxis:c,yAxis:h});if(!we(ut))switch(Ce.type){case"circle":{ut={x:pe,y:ct,r:Math.max(1,te)};break}case"rect":case"bar":{var Qt=(it=Ce.baseValue)!==null&&it!==void 0?it:h.getRange().from,Gt=h.convertToPixel(Qt),Mt=Math.abs(Gt-ct);Qt!==fe[Ce.key]&&(Mt=Math.max(1,Mt));var gt=0;ct>Gt?gt=Gt:gt=ct,ut={x:pe-te,y:gt,width:Math.max(1,te*2),height:Mt};break}case"line":{we(_[et])||(_[et]=[]),ht(Ee[Ce.key])&&ht(Fe[Ce.key])&&_[et].push({coordinates:[{x:Ee.x,y:Ee[Ce.key]},{x:Fe.x,y:Fe[Ce.key]}],styles:Te});break}}var Yt=Ce.type;we(ut)&&Yt!=="line"&&((He=n.createFigure({name:Yt==="bar"?"rect":Yt,attrs:ut,styles:Te}))===null||He===void 0||He.draw(r))}})}),_.forEach(function(k){var M,L,D,P;if(k.length>1){for(var $=[{coordinates:[k[0].coordinates[0],k[0].coordinates[1]],styles:k[0].styles}],A=1;A<k.length;A++){var N=$[$.length-1],z=k[A],B=N.coordinates[N.coordinates.length-1];B.x===z.coordinates[0].x&&B.y===z.coordinates[0].y&&N.styles.style===z.styles.style&&N.styles.color===z.styles.color&&N.styles.size===z.styles.size&&N.styles.smooth===z.styles.smooth&&((M=N.styles.dashedValue)===null||M===void 0?void 0:M[0])===((L=z.styles.dashedValue)===null||L===void 0?void 0:L[0])&&((D=N.styles.dashedValue)===null||D===void 0?void 0:D[1])===((P=z.styles.dashedValue)===null||P===void 0?void 0:P[1])?N.coordinates.push(z.coordinates[1]):$.push({coordinates:[z.coordinates[0],z.coordinates[1]],styles:z.styles})}$.forEach(function(Q){var ne,Z=Q.coordinates,J=Q.styles;(ne=n.createFigure({name:"line",attrs:{coordinates:Z},styles:J}))===null||ne===void 0||ne.draw(r)})}})}}}),r.restore()},t})(h2),Tb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this.getWidget(),i=n.getPane(),o=n.getBounding(),s=n.getPane().getChart().getChartStore(),u=s.getCrosshair(),c=s.getStyles().crosshair;if(ur(u.paneId)&&c.show){if(u.paneId===i.getId()){var h=u.y;this._drawLine(r,[{x:0,y:h},{x:o.width,y:h}],c.horizontal)}var p=u.realX;this._drawLine(r,[{x:p,y:0},{x:p,y:o.height}],c.vertical)}},t.prototype._drawLine=function(r,n,i){var o;if(i.show){var s=i.line;s.show&&((o=this.createFigure({name:"line",attrs:{coordinates:n},styles:s}))===null||o===void 0||o.draw(r))}},t})(No),p2=(function(e){At(t,e);function t(r){var n=e.call(this,r)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(i,o){return function(){var s=n.getWidget().getPane();return s.getChart().getChartStore().executeAction(i,o),!0}},n._featureMouseMoveEvent=function(i){return function(){return n._activeFeatureInfo=i,!0}},n.registerEvent("mouseMoveEvent",function(i){return n._activeFeatureInfo=null,!1}),n}return t.prototype.drawImp=function(r){var n=this.getWidget(),i=n.getPane(),o=i.getChart().getChartStore(),s=o.getCrosshair();if(we(s.kLineData)){var u=n.getBounding(),c=o.getStyles().indicator.tooltip,h=c.offsetLeft,p=c.offsetTop,g=c.offsetRight;this.drawIndicatorTooltip(r,h,p,u.width-g)}},t.prototype.drawIndicatorTooltip=function(r,n,i,o){var s=this,u=this.getWidget().getPane(),c=u.getChart().getChartStore(),h=c.getStyles().indicator,p=h.tooltip;if(this.isDrawTooltip(c.getCrosshair(),p)){var g=c.getIndicatorsByPaneId(u.getId()),m=p.title,b=p.legend;g.forEach(function(x){var C=0,_={x:n,y:i},k=s.getIndicatorTooltipData(x),M=k.name,L=k.calcParamsText,D=k.legends,P=k.features,$=M.length>0,A=D.length>0;if($||A){var N=s.classifyTooltipFeatures(P);if(C=s.drawStandardTooltipFeatures(r,N[0],_,x,n,C,o),$){var z=M;L.length>0&&(z="".concat(z).concat(L));var B=m.color;C=s.drawStandardTooltipLegends(r,[{title:{text:"",color:B},value:{text:z,color:B}}],_,n,C,o,m)}C=s.drawStandardTooltipFeatures(r,N[1],_,x,n,C,o),A&&(C=s.drawStandardTooltipLegends(r,D,_,n,C,o,b)),C=s.drawStandardTooltipFeatures(r,N[2],_,x,n,C,o),i=_.y+C}})}return i},t.prototype.drawStandardTooltipFeatures=function(r,n,i,o,s,u,c){var h=this;if(n.length>0){var p=0,g=0;n.forEach(function(x){var C=x.marginLeft,_=C===void 0?0:C,k=x.marginTop,M=k===void 0?0:k,L=x.marginRight,D=L===void 0?0:L,P=x.marginBottom,$=P===void 0?0:P,A=x.paddingLeft,N=A===void 0?0:A,z=x.paddingTop,B=z===void 0?0:z,Q=x.paddingRight,ne=Q===void 0?0:Q,Z=x.paddingBottom,J=Z===void 0?0:Z,ue=x.size,le=ue===void 0?0:ue,ae=x.type,te=x.content,ve=0;if(ae==="icon_font"){var pe=te;r.font=Kc(le,"normal",pe.family),ve=r.measureText(pe.code).width}else ve=le;p+=_+N+ve+ne+D,g=Math.max(g,M+B+le+J+$)}),i.x+p>c?(i.x=s,i.y+=u,u=g):u=Math.max(u,g);var m=this.getWidget().getPane(),b=m.getId();n.forEach(function(x){var C,_,k,M,L,D=x.marginLeft,P=D===void 0?0:D,$=x.marginTop,A=$===void 0?0:$,N=x.marginRight,z=N===void 0?0:N,B=x.paddingLeft,Q=B===void 0?0:B,ne=x.paddingTop,Z=ne===void 0?0:ne,J=x.paddingRight,ue=J===void 0?0:J,le=x.paddingBottom,ae=le===void 0?0:le,te=x.backgroundColor,ve=x.activeBackgroundColor,pe=x.borderRadius,j=x.size,H=j===void 0?0:j,de=x.color,U=x.activeColor,fe=x.type,ce=x.content,Oe=de,Ee=te;((C=h._activeFeatureInfo)===null||C===void 0?void 0:C.paneId)===b&&((_=h._activeFeatureInfo.indicator)===null||_===void 0?void 0:_.id)===(o==null?void 0:o.id)&&h._activeFeatureInfo.feature.id===x.id&&(Oe=U??de,Ee=ve??te);var Fe="onCandleTooltipFeatureClick",Ce={paneId:b,feature:x};we(o)&&(Fe="onIndicatorTooltipFeatureClick",Ce.indicator=o);var Te={mouseClickEvent:h._featureClickEvent(Fe,Ce),mouseMoveEvent:h._featureMouseMoveEvent(Ce)},et=0;if(fe==="icon_font"){var Qe=ce;(k=h.createFigure({name:"text",attrs:{text:Qe.code,x:i.x+P,y:i.y+A},styles:{paddingLeft:Q,paddingTop:Z,paddingRight:ue,paddingBottom:ae,borderRadius:pe,size:H,family:Qe.family,color:Oe,backgroundColor:Ee}},Te))===null||k===void 0||k.draw(r),et=r.measureText(Qe.code).width}else{(M=h.createFigure({name:"rect",attrs:{x:i.x+P,y:i.y+A,width:H,height:H},styles:{paddingLeft:Q,paddingTop:Z,paddingRight:ue,paddingBottom:ae,color:Ee}},Te))===null||M===void 0||M.draw(r);var it=ce;(L=h.createFigure({name:"path",attrs:{path:it.path,x:i.x+P+Q,y:i.y+A+Z,width:H,height:H},styles:{style:it.style,lineWidth:it.lineWidth,color:Oe}}))===null||L===void 0||L.draw(r),et=H}i.x+=P+Q+et+ue+z})}return u},t.prototype.drawStandardTooltipLegends=function(r,n,i,o,s,u,c){var h=this;if(n.length>0){var p=c.marginLeft,g=c.marginTop,m=c.marginRight,b=c.marginBottom,x=c.size,C=c.family,_=c.weight;r.font=Kc(x,_,C),n.forEach(function(k){var M,L,D=k.title,P=k.value,$=r.measureText(D.text).width,A=r.measureText(P.text).width,N=$+A,z=g+x+b;i.x+p+N+m>u?(i.x=o,i.y+=s,s=z):s=Math.max(s,z),D.text.length>0&&((M=h.createFigure({name:"text",attrs:{x:i.x+p,y:i.y+g,text:D.text},styles:{color:D.color,size:x,family:C,weight:_}}))===null||M===void 0||M.draw(r)),(L=h.createFigure({name:"text",attrs:{x:i.x+p+$,y:i.y+g,text:P.text},styles:{color:P.color,size:x,family:C,weight:_}}))===null||L===void 0||L.draw(r),i.x+=p+N+m})}return s},t.prototype.isDrawTooltip=function(r,n){var i=n.showRule;return i==="always"||i==="follow_cross"&&ur(r.paneId)},t.prototype.getIndicatorTooltipData=function(r){var n,i,o,s=this.getWidget().getPane().getChart().getChartStore(),u=s.getStyles().indicator,c=u.tooltip,h=c.title,p="",g="";if(h.show&&(h.showName&&(p=r.shortName),h.showParams)){var m=r.calcParams;m.length>0&&(g="(".concat(m.join(","),")"))}var b={name:p,calcParamsText:g,legends:[],features:c.features},x=s.getCrosshair().dataIndex,C=r.result,_=s.getInnerFormatter(),k=s.getDecimalFold(),M=s.getThousandsSeparator(),L=[];if(r.visible){var D=s.getDataList(),P=(n=D[x])!==null&&n!==void 0?n:{},$=(i=D[x-1])!==null&&i!==void 0?i:{},A=C[P.timestamp];!we(A)&&x===D.length-1&&(A=C[$.timestamp]);var N=c.legend.defaultValue;Qg(r,{prev:$.timestamp,current:P.timestamp,next:(o=D[x])===null||o===void 0?void 0:o.timestamp},u,function(ve,pe){if(ur(ve.title)){var j=pe.color,H=A==null?void 0:A[ve.key];ht(H)&&(H=ei(H,r.precision),r.shouldFormatBigNumber&&(H=_.formatBigNumber(H)),H=k.format(M.format(H))),L.push({title:{text:ve.title,color:j},value:{text:H??N,color:j}})}}),b.legends=L}if(vi(r.createTooltipDataSource)){var z=this.getWidget(),B=z.getPane(),Q=B.getChart(),ne=r.createTooltipDataSource({chart:Q,indicator:r,crosshair:s.getCrosshair(),bounding:z.getBounding(),xAxis:B.getChart().getXAxisPane().getAxisComponent(),yAxis:B.getAxisComponent()}),Z=ne.name,J=ne.calcParamsText,ue=ne.legends,le=ne.features;if(h.show&&(ur(Z)&&h.showName&&(b.name=Z),ur(J)&&h.showParams&&(b.calcParamsText=J)),we(le)&&(b.features=le),we(ue)&&r.visible){var ae=[],te=u.tooltip.legend.color;ue.forEach(function(ve){var pe={text:"",color:te};oa(ve.title)?pe=ve.title:pe.text=ve.title;var j={text:"",color:te};oa(ve.value)?j=ve.value:j.text=ve.value,ht(Number(j.text))&&(j.text=k.format(M.format(j.text))),ae.push({title:pe,value:j})}),b.legends=ae}}return b},t.prototype.classifyTooltipFeatures=function(r){var n=[],i=[],o=[];return r.forEach(function(s){switch(s.position){case"left":{n.push(s);break}case"middle":{i.push(s);break}case"right":{o.push(s);break}}}),[n,i,o]},t})(No),f2=(function(e){At(t,e);function t(r){var n=e.call(this,r)||this;return n._initEvent(),n}return t.prototype._initEvent=function(){var r=this,n=this.getWidget(),i=n.getPane(),o=i.getId(),s=i.getChart(),u=s.getChartStore();this.registerEvent("mouseMoveEvent",function(c){var h,p=u.getProgressOverlayInfo();if(p!==null){var g=p.overlay,m=p.paneId;g.isStart()&&(u.updateProgressOverlayInfo(o),m=o);var b=g.points.length-1;return g.isDrawing()&&m===o&&(g.eventMoveForDrawing(r._coordinateToPoint(g,c)),(h=g.onDrawing)===null||h===void 0||h.call(g,Ye({chart:s,overlay:g},c))),r._figureMouseMoveEvent(g,"point",b,{key:"".concat(_d,"point_").concat(b),type:"circle",attrs:{}})(c)}return u.setHoverOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(x,C){return r._processOverlayMouseEnterEvent(x,C,c)},function(x,C){return r._processOverlayMouseLeaveEvent(x,C,c)}),n.setForceCursor(null),!1}).registerEvent("mouseClickEvent",function(c){var h,p,g=u.getProgressOverlayInfo();if(g!==null){var m=g.overlay,b=g.paneId;m.isStart()&&(u.updateProgressOverlayInfo(o,!0),b=o);var x=m.points.length-1;return m.isDrawing()&&b===o&&(m.eventMoveForDrawing(r._coordinateToPoint(m,c)),(h=m.onDrawing)===null||h===void 0||h.call(m,Ye({chart:s,overlay:m},c)),m.nextStep(),m.isDrawing()||(u.progressOverlayComplete(),(p=m.onDrawEnd)===null||p===void 0||p.call(m,Ye({chart:s,overlay:m},c)))),r._figureMouseClickEvent(m,"point",x,{key:"".concat(_d,"point_").concat(x),type:"circle",attrs:{}})(c)}return u.setClickOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null},function(C,_){return r._processOverlaySelectedEvent(C,_,c)},function(C,_){return r._processOverlayDeselectedEvent(C,_,c)}),!1}).registerEvent("mouseDoubleClickEvent",function(c){var h,p=u.getProgressOverlayInfo();if(p!==null){var g=p.overlay,m=p.paneId;g.isDrawing()&&m===o&&(g.forceComplete(),g.isDrawing()||(u.progressOverlayComplete(),(h=g.onDrawEnd)===null||h===void 0||h.call(g,Ye({chart:s,overlay:g},c))));var b=g.points.length-1;return r._figureMouseClickEvent(g,"point",b,{key:"".concat(_d,"point_").concat(b),type:"circle",attrs:{}})(c)}return!1}).registerEvent("mouseRightClickEvent",function(c){var h=u.getProgressOverlayInfo();if(h!==null){var p=h.overlay;if(p.isDrawing()){var g=p.points.length-1;return r._figureMouseRightClickEvent(p,"point",g,{key:"".concat(_d,"point_").concat(g),type:"circle",attrs:{}})(c)}}return!1}).registerEvent("mouseUpEvent",function(c){var h,p=u.getPressedOverlayInfo(),g=p.overlay,m=p.figure;return g!==null&&ia("onPressedMoveEnd",m)&&((h=g.onPressedMoveEnd)===null||h===void 0||h.call(g,Ye({chart:s,overlay:g,figure:m??void 0},c))),u.setPressedOverlayInfo({paneId:o,overlay:null,figureType:"none",figureIndex:-1,figure:null}),!1}).registerEvent("pressedMouseMoveEvent",function(c){var h,p=u.getPressedOverlayInfo(),g=p.overlay,m=p.figureType,b=p.figureIndex,x=p.figure;if(g!==null&&ia("onPressedMoving",x)){if(!g.lock){var C=r._coordinateToPoint(g,c);m==="point"?g.eventPressedPointMove(C,b):g.eventPressedOtherMove(C,r.getWidget().getPane().getChart().getChartStore());var _=!1;(h=g.onPressedMoving)===null||h===void 0||h.call(g,Ye(Ye({chart:s,overlay:g,figure:x??void 0},c),{preventDefault:function(){_=!0}})),_?r.getWidget().setForceCursor(null):r.getWidget().setForceCursor("pointer")}return!0}return r.getWidget().setForceCursor(null),!1})},t.prototype._createFigureEvents=function(r,n,i,o){return r.isDrawing()?null:{mouseMoveEvent:this._figureMouseMoveEvent(r,n,i,o),mouseDownEvent:this._figureMouseDownEvent(r,n,i,o),mouseClickEvent:this._figureMouseClickEvent(r,n,i,o),mouseRightClickEvent:this._figureMouseRightClickEvent(r,n,i,o),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(r,n,i,o)}},t.prototype._processOverlayMouseEnterEvent=function(r,n,i){return vi(r.onMouseEnter)&&ia("onMouseEnter",n)?(r.onMouseEnter(Ye({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._processOverlayMouseLeaveEvent=function(r,n,i){return vi(r.onMouseLeave)&&ia("onMouseLeave",n)?(r.onMouseLeave(Ye({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._processOverlaySelectedEvent=function(r,n,i){var o;return ia("onSelected",n)?((o=r.onSelected)===null||o===void 0||o.call(r,Ye({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._processOverlayDeselectedEvent=function(r,n,i){var o;return ia("onDeselected",n)?((o=r.onDeselected)===null||o===void 0||o.call(r,Ye({chart:this.getWidget().getPane().getChart(),overlay:r,figure:n??void 0},i)),!0):!1},t.prototype._figureMouseMoveEvent=function(r,n,i,o){var s=this;return function(u){var c,h=s.getWidget().getPane(),p=!r.isDrawing()&&ia("onMouseMove",o);if(p){var g=!1;(c=r.onMouseMove)===null||c===void 0||c.call(r,Ye(Ye({chart:h.getChart(),overlay:r,figure:o},u),{preventDefault:function(){g=!0}})),g?s.getWidget().setForceCursor(null):s.getWidget().setForceCursor("pointer")}return h.getChart().getChartStore().setHoverOverlayInfo({paneId:h.getId(),overlay:r,figureType:n,figure:o,figureIndex:i},function(m,b){return s._processOverlayMouseEnterEvent(m,b,u)},function(m,b){return s._processOverlayMouseLeaveEvent(m,b,u)}),p}},t.prototype._figureMouseDownEvent=function(r,n,i,o){var s=this;return function(u){var c,h=s.getWidget().getPane(),p=h.getId();return r.startPressedMove(s._coordinateToPoint(r,u)),ia("onPressedMoveStart",o)?((c=r.onPressedMoveStart)===null||c===void 0||c.call(r,Ye({chart:h.getChart(),overlay:r,figure:o},u)),h.getChart().getChartStore().setPressedOverlayInfo({paneId:p,overlay:r,figureType:n,figureIndex:i,figure:o}),!r.isDrawing()):!1}},t.prototype._figureMouseClickEvent=function(r,n,i,o){var s=this;return function(u){var c,h=s.getWidget().getPane(),p=h.getId(),g=!r.isDrawing()&&ia("onClick",o);return g&&((c=r.onClick)===null||c===void 0||c.call(r,Ye({chart:s.getWidget().getPane().getChart(),overlay:r,figure:o},u))),h.getChart().getChartStore().setClickOverlayInfo({paneId:p,overlay:r,figureType:n,figureIndex:i,figure:o},function(m,b){return s._processOverlaySelectedEvent(m,b,u)},function(m,b){return s._processOverlayDeselectedEvent(m,b,u)}),g}},t.prototype._figureMouseDoubleClickEvent=function(r,n,i,o){var s=this;return function(u){var c;return ia("onDoubleClick",o)?((c=r.onDoubleClick)===null||c===void 0||c.call(r,Ye(Ye({},u),{chart:s.getWidget().getPane().getChart(),figure:o,overlay:r})),!r.isDrawing()):!1}},t.prototype._figureMouseRightClickEvent=function(r,n,i,o){var s=this;return function(u){var c;if(ia("onRightClick",o)){var h=!1;return(c=r.onRightClick)===null||c===void 0||c.call(r,Ye(Ye({chart:s.getWidget().getPane().getChart(),overlay:r,figure:o},u),{preventDefault:function(){h=!0}})),h||s.getWidget().getPane().getChart().getChartStore().removeOverlay(r),!r.isDrawing()}return!1}},t.prototype._coordinateToPoint=function(r,n){var i,o={},s=this.getWidget().getPane(),u=s.getChart(),c=s.getId(),h=u.getChartStore();if(this.coordinateToPointTimestampDataIndexFlag()){var p=u.getXAxisPane().getAxisComponent(),g=p.convertFromPixel(n.x),m=(i=h.dataIndexToTimestamp(g))!==null&&i!==void 0?i:void 0;o.timestamp=m,o.dataIndex=g}if(this.coordinateToPointValueFlag()){var b=s.getAxisComponent(),x=b.convertFromPixel(n.y);if(r.mode!=="normal"&&c===Vt.CANDLE&&ht(o.dataIndex)){var C=h.getDataByDataIndex(o.dataIndex);if(C!==null){var _=r.modeSensitivity;if(x>C.high)if(r.mode==="weak_magnet"){var k=b.convertToPixel(C.high),M=b.convertFromPixel(k-_);x<M&&(x=C.high)}else x=C.high;else if(x<C.low)if(r.mode==="weak_magnet"){var L=b.convertToPixel(C.low),M=b.convertFromPixel(L-_);x>M&&(x=C.low)}else x=C.low;else{var D=Math.max(C.open,C.close),P=Math.min(C.open,C.close);x>D?x-D<C.high-x?x=D:x=C.high:x<P?x-C.low<P-x?x=C.low:x=P:D-x<x-P?x=D:x=P}}}o.value=x}return o},t.prototype.coordinateToPointValueFlag=function(){return!0},t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.dispatchEvent=function(r,n){return this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()?this.onEvent(r,n):e.prototype.dispatchEvent.call(this,r,n)},t.prototype.drawImp=function(r){var n=this,i=this.getCompleteOverlays();i.forEach(function(s){s.visible&&n._drawOverlay(r,s)});var o=this.getProgressOverlay();we(o)&&o.visible&&this._drawOverlay(r,o)},t.prototype._drawOverlay=function(r,n){var i=n.points,o=this.getWidget().getPane(),s=o.getChart(),u=s.getChartStore(),c=o.getAxisComponent(),h=s.getXAxisPane().getAxisComponent(),p=i.map(function(m){var b,x=null;ht(m.timestamp)&&(x=u.timestampToDataIndex(m.timestamp));var C={x:0,y:0};return ht(x)&&(C.x=h.convertToPixel(x)),ht(m.value)&&(C.y=(b=c==null?void 0:c.convertToPixel(m.value))!==null&&b!==void 0?b:0),C});if(p.length>0){var g=[].concat(this.getFigures(n,p));this.drawFigures(r,n,g)}this.drawDefaultFigures(r,n,p)},t.prototype.drawFigures=function(r,n,i){var o=this,s=this.getWidget().getPane().getChart().getStyles().overlay;i.forEach(function(u,c){var h=u.type,p=u.styles,g=u.attrs,m=[].concat(g);m.forEach(function(b){var x,C,_=o._createFigureEvents(n,"other",c,u),k=Ye(Ye(Ye({},s[h]),(x=n.styles)===null||x===void 0?void 0:x[h]),p);(C=o.createFigure({name:h,attrs:b,styles:k},_??void 0))===null||C===void 0||C.draw(r)})})},t.prototype.getCompleteOverlays=function(){var r=this.getWidget().getPane();return r.getChart().getChartStore().getOverlaysByPaneId(r.getId())},t.prototype.getProgressOverlay=function(){var r=this.getWidget().getPane(),n=r.getChart().getChartStore().getProgressOverlayInfo();return we(n)&&n.paneId===r.getId()?n.overlay:null},t.prototype.getFigures=function(r,n){var i,o,s=this.getWidget(),u=s.getPane(),c=u.getChart(),h=u.getAxisComponent(),p=c.getXAxisPane().getAxisComponent(),g=s.getBounding();return(o=(i=r.createPointFigures)===null||i===void 0?void 0:i.call(r,{chart:c,overlay:r,coordinates:n,bounding:g,xAxis:p,yAxis:h}))!==null&&o!==void 0?o:[]},t.prototype.drawDefaultFigures=function(r,n,i){var o=this,s,u;if(n.needDefaultPointFigure){var c=this.getWidget().getPane().getChart().getChartStore(),h=c.getHoverOverlayInfo(),p=c.getClickOverlayInfo();if(((s=h.overlay)===null||s===void 0?void 0:s.id)===n.id&&h.figureType!=="none"||((u=p.overlay)===null||u===void 0?void 0:u.id)===n.id&&p.figureType!=="none"){var g=c.getStyles().overlay,m=n.styles,b=Ye(Ye({},g.point),m==null?void 0:m.point);i.forEach(function(x,C){var _,k,M,L,D,P=x.x,$=x.y,A=b.radius,N=b.color,z=b.borderColor,B=b.borderSize;((_=h.overlay)===null||_===void 0?void 0:_.id)===n.id&&h.figureType==="point"&&((k=h.figure)===null||k===void 0?void 0:k.key)==="".concat(_d,"point_").concat(C)&&(A=b.activeRadius,N=b.activeColor,z=b.activeBorderColor,B=b.activeBorderSize),(L=o.createFigure({name:"circle",attrs:{x:P,y:$,r:A+B},styles:{color:z}},(M=o._createFigureEvents(n,"point",C,{key:"".concat(_d,"point_").concat(C),type:"circle",attrs:{x:P,y:$,r:A+B},styles:{color:z}}))!==null&&M!==void 0?M:void 0))===null||L===void 0||L.draw(r),(D=o.createFigure({name:"circle",attrs:{x:P,y:$,r:A},styles:{color:N}}))===null||D===void 0||D.draw(r)})}}},t})(No),g2=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._gridView=new Mb(i),i._indicatorView=new Eb(i),i._crosshairLineView=new Tb(i),i._tooltipView=i.createTooltipView(),i._overlayView=new f2(i),i.addChild(i._tooltipView),i.addChild(i._overlayView),i}return t.prototype.getName=function(){return Wt.MAIN},t.prototype.updateMain=function(r){this.getPane().getOptions().state!=="minimize"&&(this.updateMainContent(r),this._indicatorView.draw(r),this._gridView.draw(r))},t.prototype.createTooltipView=function(){return new p2(this)},t.prototype.updateMainContent=function(r){},t.prototype.updateOverlayContent=function(r){},t.prototype.updateOverlay=function(r){this.getPane().getOptions().state!=="minimize"&&(this._overlayView.draw(r),this._crosshairLineView.draw(r),this.updateOverlayContent(r)),this._tooltipView.draw(r)},t})(rv),Ib=(function(e){At(t,e);function t(){var r=e.apply(this,jp([],j0(arguments),!1))||this;return r._ripplePoint=r.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),r._animationFrameTime=0,r._animation=new Pg({iterationCount:1/0}).doFrame(function(n){r._animationFrameTime=n;var i=r.getWidget().getPane();i.getChart().updatePane(0,i.getId())}),r}return t.prototype.drawImp=function(r){var n,i,o,s=this.getWidget(),u=s.getPane(),c=u.getChart(),h=c.getDataList(),p=h.length-1,g=s.getBounding(),m=u.getAxisComponent(),b=c.getStyles().candle.area,x=[],C=Number.MAX_SAFE_INTEGER,_=Number.MIN_SAFE_INTEGER,k=null;if(this.eachChildren(function(A){var N=A.x,z=A.data.current,B=z==null?void 0:z[b.value];if(ht(B)){var Q=m.convertToPixel(B);_===Number.MIN_SAFE_INTEGER&&(_=N),x.push({x:N,y:Q}),C=Math.min(C,Q),A.dataIndex===p&&(k={x:N,y:Q})}}),x.length>0){(n=this.createFigure({name:"line",attrs:{coordinates:x},styles:{color:b.lineColor,size:b.lineSize,smooth:b.smooth}}))===null||n===void 0||n.draw(r);var M=b.backgroundColor,L="";if(Wa(M)){var D=r.createLinearGradient(0,g.height,0,C);try{M.forEach(function(A){var N=A.offset,z=A.color;D.addColorStop(N,z)})}catch{}L=D}else L=M;r.fillStyle=L,r.beginPath(),r.moveTo(_,g.height),r.lineTo(x[0].x,x[0].y),t2(r,x,b.smooth),r.lineTo(x[x.length-1].x,g.height),r.closePath(),r.fill()}var P=b.point;if(P.show&&we(k)){(i=this.createFigure({name:"circle",attrs:{x:k.x,y:k.y,r:P.radius},styles:{style:"fill",color:P.color}}))===null||i===void 0||i.draw(r);var $=P.rippleRadius;P.animation&&($=P.radius+this._animationFrameTime/P.animationDuration*(P.rippleRadius-P.radius),this._animation.setDuration(P.animationDuration).start()),(o=this._ripplePoint)===null||o===void 0||o.setAttrs({x:k.x,y:k.y,r:$}).setStyles({style:"fill",color:P.rippleColor}).draw(r)}else this.stopAnimation()},t.prototype.stopAnimation=function(){this._animation.stop()},t})(d2),Lb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i,o=this.getWidget(),s=o.getPane(),u=s.getChart().getChartStore(),c=u.getStyles().candle.priceMark,h=c.high,p=c.low;if(c.show&&(h.show||p.show)){var g=u.getVisibleRangeHighLowPrice(),m=(i=(n=u.getSymbol())===null||n===void 0?void 0:n.pricePrecision)!==null&&i!==void 0?i:2,b=s.getAxisComponent(),x=g[0],C=x.price,_=x.x,k=g[1],M=k.price,L=k.x,D=b.convertToPixel(C),P=b.convertToPixel(M),$=u.getDecimalFold(),A=u.getThousandsSeparator();h.show&&C!==Number.MIN_SAFE_INTEGER&&this._drawMark(r,$.format(A.format(ei(C,m))),{x:_,y:D},D<P?[-2,-5]:[2,5],h),p.show&&M!==Number.MAX_SAFE_INTEGER&&this._drawMark(r,$.format(A.format(ei(M,m))),{x:L,y:P},D<P?[2,5]:[-2,-5],p)}},t.prototype._drawMark=function(r,n,i,o,s){var u,c,h,p=i.x,g=i.y+o[0];(u=this.createFigure({name:"line",attrs:{coordinates:[{x:p-2,y:g+o[0]},{x:p,y:g},{x:p+2,y:g+o[0]}]},styles:{color:s.color}}))===null||u===void 0||u.draw(r);var m=0,b=0,x="left",C=this.getWidget().getBounding().width;p>C/2?(m=p-5,b=m-s.textOffset,x="right"):(m=p+5,x="left",b=m+s.textOffset);var _=g+o[1];(c=this.createFigure({name:"line",attrs:{coordinates:[{x:p,y:g},{x:p,y:_},{x:m,y:_}]},styles:{color:s.color}}))===null||c===void 0||c.draw(r),(h=this.createFigure({name:"text",attrs:{x:b,y:_,text:n,align:x,baseline:"middle"},styles:{color:s.color,size:s.textSize,family:s.textFamily,weight:s.textWeight}}))===null||h===void 0||h.draw(r)},t})(No),Pb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i,o,s=this.getWidget(),u=s.getPane(),c=s.getBounding(),h=u.getChart().getChartStore(),p=h.getStyles().candle.priceMark,g=p.last,m=g.line;if(p.show&&g.show&&m.show){var b=u.getAxisComponent(),x=h.getDataList(),C=x[x.length-1];if(we(C)){var _=C.close,k=C.open,M=g.compareRule==="current_open"?k:(i=(n=x[x.length-2])===null||n===void 0?void 0:n.close)!==null&&i!==void 0?i:_,L=b.convertToNicePixel(_),D="";_>M?D=g.upColor:_<M?D=g.downColor:D=g.noChangeColor,(o=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:L},{x:c.width,y:L}]},styles:{style:m.style,color:D,size:m.size,dashedValue:m.dashedValue}}))===null||o===void 0||o.draw(r)}}},t})(No),Ab={second:"HH:mm:ss",minute:"HH:mm",hour:"MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},v2={second:"HH:mm:ss",minute:"YYYY-MM-DD HH:mm",hour:"YYYY-MM-DD HH:mm",day:"YYYY-MM-DD",week:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"},Db={time:"时间：",open:"开：",high:"高：",low:"低：",close:"收：",volume:"成交量：",turnover:"成交额：",change:"涨幅：",second:"秒",minute:"",hour:"小时",day:"天",week:"周",month:"月",year:"年"},Fb={time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: ",second:"S",minute:"",hour:"H",day:"D",week:"W",month:"M",year:"Y"},Rb={"zh-CN":Db,"en-US":Fb};function Im(e,t){var r;return(r=Rb[t][e])!==null&&r!==void 0?r:e}var Ob=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this.getWidget(),i=n.getPane().getChart().getChartStore(),o=i.getCrosshair();if(we(o.kLineData)){var s=n.getBounding(),u=i.getStyles(),c=u.candle,h=u.indicator;if(c.tooltip.showType==="rect"&&h.tooltip.showType==="rect"){var p=this.isDrawTooltip(o,c.tooltip),g=this.isDrawTooltip(o,h.tooltip);this._drawRectTooltip(r,p,g,c.tooltip.offsetTop)}else if(c.tooltip.showType==="standard"&&h.tooltip.showType==="standard"){var m=c.tooltip,b=m.offsetLeft,x=m.offsetTop,C=m.offsetRight,_=s.width-C,k=this._drawCandleStandardTooltip(r,b,x,_);this.drawIndicatorTooltip(r,b,k,_)}else if(c.tooltip.showType==="rect"&&h.tooltip.showType==="standard"){var M=c.tooltip,b=M.offsetLeft,x=M.offsetTop,C=M.offsetRight,_=s.width-C,L=this.drawIndicatorTooltip(r,b,x,_),p=this.isDrawTooltip(o,c.tooltip);this._drawRectTooltip(r,p,!1,L)}else{var D=c.tooltip,b=D.offsetLeft,x=D.offsetTop,C=D.offsetRight,_=s.width-C,P=this._drawCandleStandardTooltip(r,b,x,_),g=this.isDrawTooltip(o,h.tooltip);this._drawRectTooltip(r,!1,g,P)}}},t.prototype._drawCandleStandardTooltip=function(r,n,i,o){var s,u=this.getWidget().getPane().getChart().getChartStore(),c=u.getStyles().candle,h=c.tooltip,p=h.legend,g=0,m={x:n,y:i},b=u.getCrosshair();if(this.isDrawTooltip(b,h)){var x=h.title;if(x.show){var C=(s=u.getPeriod())!==null&&s!==void 0?s:{},_=C.type,k=_===void 0?"":_,M=C.span,L=M===void 0?"":M,D=vm(x.template,Ye(Ye({},u.getSymbol()),{period:"".concat(L).concat(Im(k,u.getLocale()))})),P=x.color,$=this.drawStandardTooltipLegends(r,[{title:{text:"",color:P},value:{text:D,color:P}}],{x:n,y:i},n,0,o,x);m.y=m.y+$}var A=this._getCandleTooltipLegends(),N=this.classifyTooltipFeatures(h.features);g=this.drawStandardTooltipFeatures(r,N[0],m,null,n,g,o),g=this.drawStandardTooltipFeatures(r,N[1],m,null,n,g,o),A.length>0&&(g=this.drawStandardTooltipLegends(r,A,m,n,g,o,p)),g=this.drawStandardTooltipFeatures(r,N[2],m,null,n,g,o)}return m.y+g},t.prototype._drawRectTooltip=function(r,n,i,o){var s=this,u,c,h=this.getWidget(),p=h.getPane(),g=p.getChart().getChartStore(),m=g.getStyles(),b=m.candle,x=m.indicator,C=b.tooltip,_=x.tooltip;if(n||i){var k=this._getCandleTooltipLegends(),M=C.offsetLeft,L=C.offsetTop,D=C.offsetRight,P=C.offsetBottom,$=C.legend,A=$.marginLeft,N=$.marginRight,z=$.marginTop,B=$.marginBottom,Q=$.size,ne=$.weight,Z=$.family,J=C.rect,ue=J.position,le=J.paddingLeft,ae=J.paddingRight,te=J.paddingTop,ve=J.paddingBottom,pe=J.offsetLeft,j=J.offsetRight,H=J.offsetTop,de=J.offsetBottom,U=J.borderSize,fe=J.borderRadius,ce=J.borderColor,Oe=J.color,Ee=0,Fe=0,Ce=0;n&&(r.font=Kc(Q,ne,Z),k.forEach(function(wt){var St=wt.title,Ct=wt.value,Ut="".concat(St.text).concat(Ct.text),Kt=r.measureText(Ut).width+A+N;Ee=Math.max(Ee,Kt)}),Ce+=(B+z+Q)*k.length);var Te=_.legend,et=Te.marginLeft,Qe=Te.marginRight,it=Te.marginTop,He=Te.marginBottom,ct=Te.size,ut=Te.weight,Qt=Te.family,Gt=[];if(i){var Mt=g.getIndicatorsByPaneId(p.getId());r.font=Kc(ct,ut,Qt),Mt.forEach(function(wt){var St=s.getIndicatorTooltipData(wt).legends;Gt.push(St),St.forEach(function(Ct){var Ut=Ct.title,Kt=Ct.value,mr="".concat(Ut.text).concat(Kt.text),pr=r.measureText(mr).width+et+Qe;Ee=Math.max(Ee,pr),Ce+=it+He+ct})})}if(Fe+=Ee,Fe!==0&&Ce!==0){var gt=g.getCrosshair(),Yt=h.getBounding(),cn=p.getYAxisWidget().getBounding();Fe+=U*2+le+ae,Ce+=U*2+te+ve;var xn=Yt.width/2,dr=ue==="pointer"&&gt.paneId===Vt.CANDLE,Rt=((u=gt.realX)!==null&&u!==void 0?u:0)>xn,Zt=0;if(dr){var nr=gt.realX;Rt?Zt=nr-j-Fe:Zt=nr+pe}else{var Kr=this.getWidget().getPane().getAxisComponent();Rt?(Zt=pe+M,Kr.inside&&Kr.position==="left"&&(Zt+=cn.width)):(Zt=Yt.width-j-Fe-D,Kr.inside&&Kr.position==="right"&&(Zt-=cn.width))}var hr=o+H;if(dr){var Br=gt.y;hr=Br-Ce/2,hr+Ce>Yt.height-de-P&&(hr=Yt.height-de-Ce-P),hr<o+H&&(hr=o+H+L)}(c=this.createFigure({name:"rect",attrs:{x:Zt,y:hr,width:Fe,height:Ce},styles:{style:"stroke_fill",color:Oe,borderColor:ce,borderSize:U,borderRadius:fe}}))===null||c===void 0||c.draw(r);var Et=Zt+U+le+A,We=hr+U+te;if(n&&k.forEach(function(wt){var St,Ct;We+=z;var Ut=wt.title;(St=s.createFigure({name:"text",attrs:{x:Et,y:We,text:Ut.text},styles:{color:Ut.color,size:Q,family:Z,weight:ne}}))===null||St===void 0||St.draw(r);var Kt=wt.value;(Ct=s.createFigure({name:"text",attrs:{x:Zt+Fe-U-N-ae,y:We,text:Kt.text,align:"right"},styles:{color:Kt.color,size:Q,family:Z,weight:ne}}))===null||Ct===void 0||Ct.draw(r),We+=Q+B}),i){var _t=Zt+U+le+et;Gt.forEach(function(wt){wt.forEach(function(St){var Ct,Ut;We+=it;var Kt=St.title,mr=St.value;(Ct=s.createFigure({name:"text",attrs:{x:_t,y:We,text:Kt.text},styles:{color:Kt.color,size:ct,family:Qt,weight:ut}}))===null||Ct===void 0||Ct.draw(r),(Ut=s.createFigure({name:"text",attrs:{x:Zt+Fe-U-Qe-ae,y:We,text:mr.text,align:"right"},styles:{color:mr.color,size:ct,family:Qt,weight:ut}}))===null||Ut===void 0||Ut.draw(r),We+=ct+He})})}}}},t.prototype._getCandleTooltipLegends=function(){var r,n,i,o,s,u,c,h,p=this.getWidget().getPane().getChart().getChartStore(),g=p.getStyles().candle,m=p.getDataList(),b=p.getInnerFormatter(),x=p.getDecimalFold(),C=p.getThousandsSeparator(),_=p.getLocale(),k=(r=p.getSymbol())!==null&&r!==void 0?r:{},M=k.pricePrecision,L=M===void 0?2:M,D=k.volumePrecision,P=D===void 0?0:D,$=p.getPeriod(),A=(n=p.getCrosshair().dataIndex)!==null&&n!==void 0?n:0,N=g.tooltip,z=N.legend,B=z.color,Q=z.defaultValue,ne=z.template,Z=(i=m[A-1])!==null&&i!==void 0?i:null,J=m[A],ue=(o=Z==null?void 0:Z.close)!==null&&o!==void 0?o:J.close,le=J.close-ue,ae=Ye(Ye({},J),{time:b.formatDate(J.timestamp,v2[(s=$==null?void 0:$.type)!==null&&s!==void 0?s:"day"],"tooltip"),open:x.format(C.format(ei(J.open,L))),high:x.format(C.format(ei(J.high,L))),low:x.format(C.format(ei(J.low,L))),close:x.format(C.format(ei(J.close,L))),volume:x.format(C.format(b.formatBigNumber(ei((u=J.volume)!==null&&u!==void 0?u:Q,P)))),turnover:x.format(C.format(ei((c=J.turnover)!==null&&c!==void 0?c:Q,L))),change:ue===0?Q:"".concat(C.format(ei(le/ue*100)),"%")}),te=vi(ne)?ne({prev:Z,current:J,next:(h=m[A+1])!==null&&h!==void 0?h:null},g):ne;return te.map(function(ve){var pe=ve.title,j=ve.value,H={text:"",color:B};oa(pe)?H=Ye({},pe):H.text=pe,H.text=Im(H.text,_);var de={text:Q,color:B};return oa(j)?de=Ye({},j):de.text=j,we(/{change}/.exec(de.text))&&(de.color=le===0?g.priceMark.last.noChangeColor:le>0?g.priceMark.last.upColor:g.priceMark.last.downColor),de.text=vm(de.text,ae),{title:H,value:de}})},t})(p2),Nb=(function(e){At(t,e);function t(r){var n=e.call(this,r)||this;return n._activeFeatureInfo=null,n._featureClickEvent=function(i){return function(){var o=n.getWidget().getPane();return o.getChart().getChartStore().executeAction("onCrosshairFeatureClick",i),!0}},n._featureMouseMoveEvent=function(i){return function(){return n._activeFeatureInfo=i,n.getWidget().setForceCursor("pointer"),!0}},n.registerEvent("mouseMoveEvent",function(i){return n._activeFeatureInfo=null,n.getWidget().setForceCursor(null),!1}),n}return t.prototype.drawImp=function(r){var n=this,i,o,s=this.getWidget(),u=s.getPane(),c=s.getPane().getChart().getChartStore(),h=c.getCrosshair(),p=this.getWidget(),g=p.getPane().getAxisComponent();if(ur(h.paneId)&&h.paneId===u.getId()&&g.isInCandle()){var m=c.getStyles().crosshair,b=m.horizontal.features;if(m.show&&m.horizontal.show&&b.length>0){var x=g.position==="right",C=p.getBounding(),_=0,k=m.horizontal.text;if(g.inside&&k.show){var M=g.convertFromPixel(h.y),L=g.getRange(),D=g.displayValueToText(g.realValueToDisplayValue(g.valueToRealValue(M,{range:L}),{range:L}),(o=(i=c.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&o!==void 0?o:2);D=c.getDecimalFold().format(c.getThousandsSeparator().format(D)),_=k.paddingLeft+aa(D,k.size,k.weight,k.family)+k.paddingRight}var P=_;x&&(P=C.width-_);var $=h.y;b.forEach(function(A){var N,z,B,Q,ne=A.marginLeft,Z=ne===void 0?0:ne,J=A.marginTop,ue=J===void 0?0:J,le=A.marginRight,ae=le===void 0?0:le,te=A.paddingLeft,ve=te===void 0?0:te,pe=A.paddingTop,j=pe===void 0?0:pe,H=A.paddingRight,de=H===void 0?0:H,U=A.paddingBottom,fe=U===void 0?0:U,ce=A.color,Oe=A.activeColor,Ee=A.backgroundColor,Fe=A.activeBackgroundColor,Ce=A.borderRadius,Te=A.size,et=Te===void 0?0:Te,Qe=A.type,it=A.content,He=et;if(Qe==="icon_font"){var ct=it;He=ve+aa(ct.code,et,"normal",ct.family)+de}x?P-=He+ae:P+=Z;var ut=ce,Qt=Ee;((N=n._activeFeatureInfo)===null||N===void 0?void 0:N.feature.id)===A.id&&(ut=Oe??ce,Qt=Fe??Ee);var Gt={mouseClickEvent:n._featureClickEvent({crosshair:h,feature:A}),mouseMoveEvent:n._featureMouseMoveEvent({crosshair:h,feature:A})};if(Qe==="icon_font"){var ct=it;(z=n.createFigure({name:"text",attrs:{text:ct.code,x:P,y:$+ue,baseline:"middle"},styles:{paddingLeft:ve,paddingTop:j,paddingRight:de,paddingBottom:fe,borderRadius:Ce,size:et,family:ct.family,color:ut,backgroundColor:Qt}},Gt))===null||z===void 0||z.draw(r)}else{(B=n.createFigure({name:"rect",attrs:{x:P,y:$+ue-et/2,width:et,height:et},styles:{paddingLeft:ve,paddingTop:j,paddingRight:de,paddingBottom:fe,color:Qt}},Gt))===null||B===void 0||B.draw(r);var Mt=it;(Q=n.createFigure({name:"path",attrs:{path:Mt.path,x:P,y:$+ue+j-et/2,width:et,height:et},styles:{style:Mt.style,lineWidth:Mt.lineWidth,color:ut}}))===null||Q===void 0||Q.draw(r)}x?P-=Z:P+=He+ae})}}},t})(No),zb=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._candleBarView=new h2(i),i._candleAreaView=new Ib(i),i._candleHighLowPriceView=new Lb(i),i._candleLastPriceLineView=new Pb(i),i._crosshairFeatureView=new Nb(i),i.addChild(i._candleBarView),i.addChild(i._crosshairFeatureView),i}return t.prototype.updateMainContent=function(r){var n=this.getPane().getChart().getStyles().candle;n.type!=="area"?(this._candleBarView.draw(r),this._candleHighLowPriceView.draw(r),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(r),this._candleLastPriceLineView.draw(r)},t.prototype.updateOverlayContent=function(r){this._crosshairFeatureView.draw(r)},t.prototype.createTooltipView=function(){return new Ob(this)},t})(g2),m2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r,n){var i=this,o,s,u=this.getWidget(),c=u.getPane(),h=u.getBounding(),p=c.getAxisComponent(),g=this.getAxisStyles(c.getChart().getStyles());if(g.show&&(g.axisLine.show&&((o=this.createFigure({name:"line",attrs:this.createAxisLine(h,g),styles:g.axisLine}))===null||o===void 0||o.draw(r)),!n[0])){var m=p.getTicks();if(g.tickLine.show){var b=this.createTickLines(m,h,g);b.forEach(function(C){var _;(_=i.createFigure({name:"line",attrs:C,styles:g.tickLine}))===null||_===void 0||_.draw(r)})}if(g.tickText.show){var x=this.createTickTexts(m,h,g);(s=this.createFigure({name:"text",attrs:x,styles:g.tickText}))===null||s===void 0||s.draw(r)}}},t})(No),Vb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(r){return r.yAxis},t.prototype.createAxisLine=function(r,n){var i=this.getWidget().getPane().getAxisComponent(),o=n.axisLine.size,s=0;return i.isFromZero()?s=0:s=r.width-o,{coordinates:[{x:s,y:0},{x:s,y:r.height}]}},t.prototype.createTickLines=function(r,n,i){var o=this.getWidget().getPane().getAxisComponent(),s=i.axisLine,u=i.tickLine,c=0,h=0;return o.isFromZero()?(c=0,s.show&&(c+=s.size),h=c+u.length):(c=n.width,s.show&&(c-=s.size),h=c-u.length),r.map(function(p){return{coordinates:[{x:c,y:p.coord},{x:h,y:p.coord}]}})},t.prototype.createTickTexts=function(r,n,i){var o=this.getWidget().getPane().getAxisComponent(),s=i.axisLine,u=i.tickLine,c=i.tickText,h=0;o.isFromZero()?(h=c.marginStart,s.show&&(h+=s.size),u.show&&(h+=u.length)):(h=n.width-c.marginEnd,s.show&&(h-=s.size),u.show&&(h-=u.length));var p=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return r.map(function(g){return{x:h,y:g.coord,text:g.text,align:p,baseline:"middle"}})},t})(m2),Bb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this,i,o,s,u,c=this.getWidget(),h=c.getPane(),p=c.getBounding(),g=h.getChart().getChartStore(),m=g.getStyles().candle.priceMark,b=m.last,x=b.text;if(m.show&&b.show&&x.show){var C=(o=(i=g.getSymbol())===null||i===void 0?void 0:i.pricePrecision)!==null&&o!==void 0?o:2,_=h.getAxisComponent(),k=g.getDataList(),M=k[k.length-1];if(we(M)){var L=M.close,D=M.open,P=b.compareRule==="current_open"?D:(u=(s=k[k.length-2])===null||s===void 0?void 0:s.close)!==null&&u!==void 0?u:L,$=_.convertToNicePixel(L),A="";L>P?A=b.upColor:L<P?A=b.downColor:A=b.noChangeColor;var N=0,z="left";_.isFromZero()?(N=0,z="left"):(N=p.width,z="right");var B=[],Q=_.getRange(),ne=_.displayValueToText(_.realValueToDisplayValue(_.valueToRealValue(L,{range:Q}),{range:Q}),C);ne=g.getDecimalFold().format(g.getThousandsSeparator().format(ne));var Z=x.paddingLeft,J=x.paddingRight,ue=x.paddingTop,le=x.paddingBottom,ae=x.size,te=x.family,ve=x.weight,pe=Z+aa(ne,ae,ve,te)+J,j=ue+ae+le;B.push({name:"text",attrs:{x:N,y:$,width:pe,height:j,text:ne,align:z,baseline:"middle"},styles:Ye(Ye({},x),{backgroundColor:A})});var H=g.getInnerFormatter().formatExtendText,de=ae/2,U=$-de-ue,fe=$+de+le;b.extendTexts.forEach(function(ce,Oe){var Ee=H({type:"last_price",data:M,index:Oe});if(Ee.length>0&&ce.show){var Fe=ce.size/2,Ce=0;ce.position==="above_price"?(U-=ce.paddingBottom+Fe,Ce=U,U-=Fe+ce.paddingTop):(fe+=ce.paddingTop+Fe,Ce=fe,fe+=Fe+ce.paddingBottom),pe=Math.max(pe,ce.paddingLeft+aa(Ee,ce.size,ce.weight,ce.family)+ce.paddingRight),B.push({name:"text",attrs:{x:N,y:Ce,width:pe,height:ce.paddingTop+ce.size+ce.paddingBottom,text:Ee,align:z,baseline:"middle"},styles:Ye(Ye({},ce),{backgroundColor:A})})}}),B.forEach(function(ce){var Oe;ce.attrs.width=pe,(Oe=n.createFigure(ce))===null||Oe===void 0||Oe.draw(r)})}}},t})(No),$b=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n=this,i,o,s=this.getWidget(),u=s.getPane(),c=s.getBounding(),h=u.getChart().getChartStore(),p=h.getStyles().indicator,g=p.lastValueMark,m=g.text;if(g.show){var b=u.getAxisComponent(),x=b.getRange(),C=h.getDataList(),_=(i=C[C.length-1])!==null&&i!==void 0?i:{},k=(o=C[C.length-2])!==null&&o!==void 0?o:{},M=h.getIndicatorsByPaneId(u.getId()),L=h.getInnerFormatter(),D=h.getDecimalFold(),P=h.getThousandsSeparator();M.forEach(function($){var A,N,z=$.result,B=(N=(A=z[_.timestamp])!==null&&A!==void 0?A:z[k.timestamp])!==null&&N!==void 0?N:{};if(we(B)&&$.visible){var Q=$.precision;Qg($,{prev:k.timestamp,current:_.timestamp,next:null},p,function(ne,Z){var J,ue=B[ne.key];if(ht(ue)){var le=b.convertToNicePixel(ue),ae=b.displayValueToText(b.realValueToDisplayValue(b.valueToRealValue(ue,{range:x}),{range:x}),Q);$.shouldFormatBigNumber&&(ae=L.formatBigNumber(ae)),ae=D.format(P.format(ae));var te=0,ve="left";b.isFromZero()?(te=0,ve="left"):(te=c.width,ve="right"),(J=n.createFigure({name:"text",attrs:{x:te,y:le,text:ae,align:ve,baseline:"middle"},styles:Ye(Ye({},m),{backgroundColor:Z.color})}))===null||J===void 0||J.draw(r)}})}})}},t})(No),y2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},t.prototype.drawDefaultFigures=function(r,n,i){this.drawFigures(r,n,this.getDefaultFigures(n,i))},t.prototype.getDefaultFigures=function(r,n){var i,o=this.getWidget(),s=o.getPane(),u=s.getChart().getChartStore(),c=u.getClickOverlayInfo(),h=[];if(r.needDefaultYAxisFigure&&r.id===((i=c.overlay)===null||i===void 0?void 0:i.id)&&c.paneId===s.getId()){var p=s.getAxisComponent(),g=o.getBounding(),m=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER,x=p.isFromZero(),C="left",_=0;x?(C="left",_=0):(C="right",_=g.width);var k=u.getDecimalFold(),M=u.getThousandsSeparator();n.forEach(function(L,D){var P,$,A=r.points[D];if(ht(A.value)){m=Math.min(m,L.y),b=Math.max(b,L.y);var N=k.format(M.format(ei(A.value,($=(P=u.getSymbol())===null||P===void 0?void 0:P.pricePrecision)!==null&&$!==void 0?$:2)));h.push({type:"text",attrs:{x:_,y:L.y,text:N,align:C,baseline:"middle"},ignoreEvent:!0})}}),n.length>1&&h.unshift({type:"rect",attrs:{x:0,y:m,width:g.width,height:b-m},ignoreEvent:!0})}return h},t.prototype.getFigures=function(r,n){var i,o,s=this.getWidget(),u=s.getPane(),c=u.getChart(),h=u.getAxisComponent(),p=c.getXAxisPane().getAxisComponent(),g=s.getBounding();return(o=(i=r.createYAxisFigures)===null||i===void 0?void 0:i.call(r,{chart:c,overlay:r,coordinates:n,bounding:g,xAxis:p,yAxis:h}))!==null&&o!==void 0?o:[]},t})(f2),b2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var n,i=this.getWidget(),o=i.getPane(),s=i.getPane().getChart().getChartStore(),u=s.getCrosshair();if(ur(u.paneId)&&this.compare(u,o.getId())){var c=s.getStyles().crosshair;if(c.show){var h=this.getDirectionStyles(c),p=h.text;if(h.show&&p.show){var g=i.getBounding(),m=o.getAxisComponent(),b=this.getText(u,s,m);r.font=Kc(p.size,p.weight,p.family),(n=this.createFigure({name:"text",attrs:this.getTextAttrs(b,r.measureText(b).width,u,g,m,p),styles:p}))===null||n===void 0||n.draw(r)}}}},t.prototype.compare=function(r,n){return r.paneId===n},t.prototype.getDirectionStyles=function(r){return r.horizontal},t.prototype.getText=function(r,n,i){var o,s,u=i,c=i.convertFromPixel(r.y),h=0,p=!1;if(u.isInCandle())h=(s=(o=n.getSymbol())===null||o===void 0?void 0:o.pricePrecision)!==null&&s!==void 0?s:2;else{var g=n.getIndicatorsByPaneId(r.paneId);g.forEach(function(x){h=Math.max(x.precision,h),p||(p=x.shouldFormatBigNumber)})}var m=u.getRange(),b=u.displayValueToText(u.realValueToDisplayValue(u.valueToRealValue(c,{range:m}),{range:m}),h);return p&&(b=n.getInnerFormatter().formatBigNumber(b)),n.getDecimalFold().format(n.getThousandsSeparator().format(b))},t.prototype.getTextAttrs=function(r,n,i,o,s,u){var c=s,h=0,p="left";return c.isFromZero()?(h=0,p="left"):(h=o.width,p="right"),{x:h,y:i.y,text:r,align:p,baseline:"middle"}},t})(No),Wb=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._yAxisView=new Vb(i),i._candleLastPriceLabelView=new Bb(i),i._indicatorLastValueView=new $b(i),i._overlayYAxisView=new y2(i),i._crosshairHorizontalLabelView=new b2(i),i.setCursor("ns-resize"),i.addChild(i._overlayYAxisView),i}return t.prototype.getName=function(){return Wt.Y_AXIS},t.prototype.updateMain=function(r){var n=this.getPane().getOptions().state==="minimize";this._yAxisView.draw(r,n),n||(this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(r),this._indicatorLastValueView.draw(r))},t.prototype.updateOverlay=function(r){this.getPane().getOptions().state!=="minimize"&&(this._overlayYAxisView.draw(r),this._crosshairHorizontalLabelView.draw(r))},t})(rv);function Lm(){return{from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0,displayFrom:0,displayTo:0,displayRange:0}}var x2=(function(){function e(t){this.scrollZoomEnabled=!0,this._range=Lm(),this._prevRange=Lm(),this._ticks=[],this._autoCalcTickFlag=!0,this._parent=t}return e.prototype.getParent=function(){return this._parent},e.prototype.buildTicks=function(t){return this._autoCalcTickFlag&&(this._range=this.createRangeImp()),this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||t?(this._prevRange=this._range,this._ticks=this.createTicksImp(),!0):!1},e.prototype.getTicks=function(){return this._ticks},e.prototype.setRange=function(t){this._autoCalcTickFlag=!1,this._range=t},e.prototype.getRange=function(){return this._range},e.prototype.setAutoCalcTickFlag=function(t){this._autoCalcTickFlag=t},e.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},e})(),ap=8,wp=(function(e){At(t,e);function t(r,n){var i=e.call(this,r)||this;return i.reverse=!1,i.inside=!1,i.position="right",i.gap={top:.2,bottom:.1},i.createRange=function(o){return o.defaultRange},i.minSpan=function(o){return Xc(-o)},i.valueToRealValue=function(o){return o},i.realValueToDisplayValue=function(o){return o},i.displayValueToRealValue=function(o){return o},i.realValueToValue=function(o){return o},i.displayValueToText=function(o,s){return ei(o,s)},i.override(n),i}return t.prototype.override=function(r){var n=r.name,i=r.gap,o=Ip(r,["name","gap"]);ur(this.name)||(this.name=n),yn(this.gap,i),yn(this,o)},t.prototype.createRangeImp=function(){var r,n,i=this.getParent(),o=i.getChart(),s=o.getChartStore(),u=i.getId(),c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER,p=!1,g=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,b=Number.MAX_SAFE_INTEGER,x=s.getIndicatorsByPaneId(u);x.forEach(function(Oe){p||(p=Oe.shouldOhlc),b=Math.min(b,Oe.precision),ht(Oe.minValue)&&(g=Math.min(g,Oe.minValue)),ht(Oe.maxValue)&&(m=Math.max(m,Oe.maxValue))});var C=4,_=this.isInCandle();if(_){var k=(n=(r=s.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2;b!==Number.MAX_SAFE_INTEGER?C=Math.min(b,k):C=k}else b!==Number.MAX_SAFE_INTEGER&&(C=b);var M=s.getVisibleRangeDataList(),L=o.getStyles().candle,D=L.type==="area",P=L.area.value,$=_&&!D||!_&&p;M.forEach(function(Oe){var Ee=Oe.data.current;if(we(Ee)){if($&&(c=Math.min(c,Ee.low),h=Math.max(h,Ee.high)),_&&D){var Fe=Ee[P];ht(Fe)&&(c=Math.min(c,Fe),h=Math.max(h,Fe))}x.forEach(function(Ce){var Te,et=Ce.result,Qe=Ce.figures,it=(Te=et[Ee.timestamp])!==null&&Te!==void 0?Te:{};Qe.forEach(function(He){var ct=it[He.key];ht(ct)&&(c=Math.min(c,ct),h=Math.max(h,ct))})})}}),c!==Number.MAX_SAFE_INTEGER&&h!==Number.MIN_SAFE_INTEGER?(c=Math.min(g,c),h=Math.max(m,h)):(c=0,h=10);var A=h-c,N={from:c,to:h,range:A,realFrom:c,realTo:h,realRange:A,displayFrom:c,displayTo:h,displayRange:A},z=this.createRange({chart:o,paneId:u,defaultRange:N}),B=z.realFrom,Q=z.realTo,ne=z.realRange,Z=this.minSpan(C);if(B===Q||ne<Z){var J=g===B,ue=m===Q,le=ap/2;B=J?B:ue?B-ap*Z:B-le*Z,Q=ue?Q:J?Q+ap*Z:Q+le*Z}var ae=this.getBounding().height,te=this.gap,ve=te.top,pe=te.bottom,j=ve;j>=1&&(j=j/ae);var H=pe;H>=1&&(H=H/ae),ne=Q-B,B=B-ne*H,Q=Q+ne*j;var de=this.realValueToValue(B,{range:z}),U=this.realValueToValue(Q,{range:z}),fe=this.realValueToDisplayValue(B,{range:z}),ce=this.realValueToDisplayValue(Q,{range:z});return{from:de,to:U,range:U-de,realFrom:B,realTo:Q,realRange:Q-B,displayFrom:fe,displayTo:ce,displayRange:ce-fe}},t.prototype.isInCandle=function(){return this.getParent().getId()===Vt.CANDLE},t.prototype.isFromZero=function(){return this.position==="left"&&this.inside||this.position==="right"&&!this.inside},t.prototype.createTicksImp=function(){var r=this,n,i,o,s,u=this.getRange(),c=u.displayFrom,h=u.displayTo,p=u.displayRange,g=[];if(p>=0){var m=G6(p/ap),b=J6(m),x=xm(Math.ceil(c/m)*m,b),C=xm(Math.floor(h/m)*m,b),_=0,k=x;if(m!==0)for(;k<=C;){var M=k.toFixed(b);g[_]={text:M,coord:0,value:M},++_,k+=m}}var L=this.getParent(),D=(i=(n=L.getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&i!==void 0?i:0,P=L.getChart().getChartStore(),$=[],A=P.getIndicatorsByPaneId(L.getId()),N=P.getStyles(),z=0,B=!1;this.isInCandle()?z=(s=(o=P.getSymbol())===null||o===void 0?void 0:o.pricePrecision)!==null&&s!==void 0?s:2:A.forEach(function(le){z=Math.max(z,le.precision),B||(B=le.shouldFormatBigNumber)});var Q=P.getInnerFormatter(),ne=P.getThousandsSeparator(),Z=P.getDecimalFold(),J=N.xAxis.tickText.size,ue=NaN;return g.forEach(function(le){var ae=le.value,te=r.displayValueToText(+ae,z),ve=r.convertToPixel(r.realValueToValue(r.displayValueToRealValue(+ae,{range:u}),{range:u}));B&&(te=Q.formatBigNumber(ae)),te=Z.format(ne.format(te));var pe=ht(ue);ve>J&&ve<D-J&&(pe&&Math.abs(ue-ve)>J*2||!pe)&&($.push({text:te,coord:ve,value:ae}),ue=ve)}),vi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:$}):$},t.prototype.getAutoSize=function(){var r,n,i=this.getParent(),o=i.getChart(),s=o.getChartStore(),u=s.getStyles(),c=u.yAxis,h=c.size;if(h!=="auto")return h;var p=0;if(c.show&&(c.axisLine.show&&(p+=c.axisLine.size),c.tickLine.show&&(p+=c.tickLine.length),c.tickText.show)){var g=0;this.getTicks().forEach(function(ve){g=Math.max(g,aa(ve.text,c.tickText.size,c.tickText.weight,c.tickText.family))}),p+=c.tickText.marginStart+c.tickText.marginEnd+g}var m=u.candle.priceMark,b=m.show&&m.last.show&&m.last.text.show,x=0,C=u.crosshair,_=C.show&&C.horizontal.show&&C.horizontal.text.show,k=0;if(b||_){var M=(n=(r=s.getSymbol())===null||r===void 0?void 0:r.pricePrecision)!==null&&n!==void 0?n:2,L=this.getRange().displayTo;if(b){var D=s.getDataList(),P=D[D.length-1];if(we(P)){var $=m.last.text,A=$.paddingLeft,N=$.paddingRight,z=$.size,B=$.family,Q=$.weight;x=A+aa(ei(P.close,M),z,Q,B)+N;var ne=s.getInnerFormatter().formatExtendText;m.last.extendTexts.forEach(function(ve,pe){var j=ne({type:"last_price",data:P,index:pe});j.length>0&&ve.show&&(x=Math.max(x,ve.paddingLeft+aa(j,ve.size,ve.weight,ve.family)+ve.paddingRight))})}}if(_){var Z=s.getIndicatorsByPaneId(i.getId()),J=0,ue=!1;Z.forEach(function(ve){J=Math.max(ve.precision,J),ue||(ue=ve.shouldFormatBigNumber)});var le=2;if(this.isInCandle()){var ae=u.indicator.lastValueMark;ae.show&&ae.text.show?le=Math.max(J,M):le=M}else le=J;var te=ei(L,le);ue&&(te=s.getInnerFormatter().formatBigNumber(te)),te=s.getDecimalFold().format(te),k+=C.horizontal.text.paddingLeft+C.horizontal.text.paddingRight+C.horizontal.text.borderSize*2+aa(te,C.horizontal.text.size,C.horizontal.text.weight,C.horizontal.text.family)}}return Math.max(p,x,k)},t.prototype.getBounding=function(){return this.getParent().getYAxisWidget().getBounding()},t.prototype.convertFromPixel=function(r){var n=this.getBounding().height,i=this.getRange(),o=i.realFrom,s=i.realRange,u=this.reverse?r/n:1-r/n,c=u*s+o;return this.realValueToValue(c,{range:i})},t.prototype.convertToPixel=function(r){var n,i,o=this.getRange(),s=this.valueToRealValue(r,{range:o}),u=(i=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&i!==void 0?i:0,c=o.realFrom,h=o.realRange,p=(s-c)/h;return this.reverse?Math.round(p*u):Math.round((1-p)*u)},t.prototype.convertToNicePixel=function(r){var n,i,o=(i=(n=this.getParent().getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&i!==void 0?i:0,s=this.convertToPixel(r);return Math.round(Math.max(o*.05,Math.min(s,o*.98)))},t.extend=function(r){var n=(function(i){At(o,i);function o(s){return i.call(this,s,r)||this}return o})(t);return n},t})(x2),Hb={name:"normal"},Ub={name:"percentage",minSpan:function(){return Math.pow(10,-2)},displayValueToText:function(e){return"".concat(ei(e,2),"%")},valueToRealValue:function(e,t){var r=t.range;return(e-r.from)/r.range*r.realRange+r.realFrom},realValueToValue:function(e,t){var r=t.range;return(e-r.realFrom)/r.realRange*r.range+r.from},createRange:function(e){var t=e.chart,r=e.defaultRange,n=t.getDataList(),i=t.getVisibleRange(),o=n[i.from];if(we(o)){var s=r.from,u=r.to,c=r.range,h=(r.from-o.close)/o.close*100,p=(r.to-o.close)/o.close*100,g=p-h;return{from:s,to:u,range:c,realFrom:h,realTo:p,realRange:g,displayFrom:h,displayTo:p,displayRange:g}}return r}},jb={name:"logarithm",minSpan:function(e){return .05*Xc(-e)},valueToRealValue:function(e){return e<0?-Is(Math.abs(e)):Is(e)},realValueToDisplayValue:function(e){return e<0?-Xc(Math.abs(e)):Xc(e)},displayValueToRealValue:function(e){return e<0?-Is(Math.abs(e)):Is(e)},realValueToValue:function(e){return e<0?-Xc(Math.abs(e)):Xc(e)},createRange:function(e){var t=e.defaultRange,r=t.from,n=t.to,i=t.range,o=r<0?-Is(Math.abs(r)):Is(r),s=n<0?-Is(Math.abs(n)):Is(n);return{from:r,to:n,range:i,realFrom:o,realTo:s,realRange:s-o,displayFrom:r,displayTo:n,displayRange:i}}},Pm={normal:wp.extend(Hb),percentage:wp.extend(Ub),logarithm:wp.extend(jb)};function Xb(e){var t;return(t=Pm[e])!==null&&t!==void 0?t:Pm.normal}var w2=(function(){function e(t,r){this._bounding=Lp(),this._originalBounding=Lp(),this._visible=!0,this._chart=t,this._id=r,this._container=zs("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"})}return e.prototype.getContainer=function(){return this._container},e.prototype.setVisible=function(t){this._visible!==t&&(this._container.style.display=t?"block":"none",this._visible=t)},e.prototype.getVisible=function(){return this._visible},e.prototype.getId=function(){return this._id},e.prototype.getChart=function(){return this._chart},e.prototype.getBounding=function(){return this._bounding},e.prototype.setOriginalBounding=function(t){yn(this._originalBounding,t)},e.prototype.getOriginalBounding=function(){return this._originalBounding},e.prototype.update=function(t){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(t??3,this._container,this._bounding)},e})(),C2=(function(e){At(t,e);function t(r,n,i){var o=e.call(this,r,n)||this;o._yAxisWidget=null,o._options={id:"",minHeight:xp,dragEnabled:!0,order:0,height:n2,state:"normal",axis:{name:"normal",scrollZoomEnabled:!0}};var s=o.getContainer();return o._mainWidget=o.createMainWidget(s),o._yAxisWidget=o.createYAxisWidget(s),o.setOptions(i),o}return t.prototype.setOptions=function(r){var n,i,o,s,u,c=this.getId();if(c===Vt.CANDLE||c===Vt.X_AXIS){var h=(n=r.axis)===null||n===void 0?void 0:n.name;(!we(this._axis)||we(h)&&this._options.axis.name!==h)&&(this._axis=this.createAxisComponent(h??"normal"))}else we(this._axis)||(this._axis=this.createAxisComponent("normal"));this._axis instanceof wp&&this._axis.setAutoCalcTickFlag(!0),yn(this._options,r),this._axis.override(Ye(Ye({},this._options.axis),{name:(o=(i=r.axis)===null||i===void 0?void 0:i.name)!==null&&o!==void 0?o:"normal"}));var p=null,g="default";return this.getId()===Vt.X_AXIS?(p=this.getMainWidget().getContainer(),g="ew-resize"):(p=this.getYAxisWidget().getContainer(),g="ns-resize"),!((u=(s=r.axis)===null||s===void 0?void 0:s.scrollZoomEnabled)!==null&&u!==void 0)||u?p.style.cursor=g:p.style.cursor="default",this},t.prototype.getOptions=function(){return this._options},t.prototype.getAxisComponent=function(){return this._axis},t.prototype.setBounding=function(r,n,i,o){var s,u,c,h;yn(this.getBounding(),r);var p={};we(r.height)&&(p.height=r.height),we(r.top)&&(p.top=r.top),this._mainWidget.setBounding(p);var g=we(n);if(g&&this._mainWidget.setBounding(n),we(this._yAxisWidget)){this._yAxisWidget.setBounding(p);var m=this._axis;m.position==="left"?we(i)&&this._yAxisWidget.setBounding(Ye(Ye({},i),{left:0})):we(o)&&(this._yAxisWidget.setBounding(o),g&&this._yAxisWidget.setBounding({left:((s=n.left)!==null&&s!==void 0?s:0)+((u=n.width)!==null&&u!==void 0?u:0)+((c=n.right)!==null&&c!==void 0?c:0)-((h=o.width)!==null&&h!==void 0?h:0)}))}return this},t.prototype.getMainWidget=function(){return this._mainWidget},t.prototype.getYAxisWidget=function(){return this._yAxisWidget},t.prototype.updateImp=function(r){var n;this._mainWidget.update(r),(n=this._yAxisWidget)===null||n===void 0||n.update(r)},t.prototype.destroy=function(){var r;this._mainWidget.destroy(),(r=this._yAxisWidget)===null||r===void 0||r.destroy()},t.prototype.getImage=function(r){var n=this.getBounding(),i=n.width,o=n.height,s=zs("canvas",{width:"".concat(i,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),u=s.getContext("2d"),c=Dl(s);s.width=i*c,s.height=o*c,u.scale(c,c);var h=this._mainWidget.getBounding();if(u.drawImage(this._mainWidget.getImage(r),h.left,0,h.width,h.height),this._yAxisWidget!==null){var p=this._yAxisWidget.getBounding();u.drawImage(this._yAxisWidget.getImage(r),p.left,0,p.width,p.height)}return s},t.prototype.createYAxisWidget=function(r){return null},t})(w2),_2=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(r){var n=Xb(r??"default");return new n(this)},t.prototype.createMainWidget=function(r){return new g2(r,this)},t.prototype.createYAxisWidget=function(r){return new Wb(r,this)},t})(C2),Yb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createMainWidget=function(r){return new zb(r,this)},t})(_2),Zb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(r){return r.xAxis},t.prototype.createAxisLine=function(r){return{coordinates:[{x:0,y:0},{x:r.width,y:0}]}},t.prototype.createTickLines=function(r,n,i){var o=i.tickLine,s=i.axisLine.size;return r.map(function(u){return{coordinates:[{x:u.coord,y:0},{x:u.coord,y:s+o.length}]}})},t.prototype.createTickTexts=function(r,n,i){var o=i.tickText,s=i.axisLine.size,u=i.tickLine.length;return r.map(function(c){return{x:c.coord,y:s+u+o.marginStart,text:c.text,align:"center",baseline:"top"}})},t})(m2),Kb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.coordinateToPointValueFlag=function(){return!1},t.prototype.getCompleteOverlays=function(){return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()},t.prototype.getProgressOverlay=function(){var r,n;return(n=(r=this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo())===null||r===void 0?void 0:r.overlay)!==null&&n!==void 0?n:null},t.prototype.getDefaultFigures=function(r,n){var i,o=[],s=this.getWidget(),u=s.getPane(),c=u.getChart().getChartStore(),h=c.getClickOverlayInfo();if(r.needDefaultXAxisFigure&&r.id===((i=h.overlay)===null||i===void 0?void 0:i.id)){var p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;n.forEach(function(m,b){p=Math.min(p,m.x),g=Math.max(g,m.x);var x=r.points[b];if(ht(x.timestamp)){var C=c.getInnerFormatter().formatDate(x.timestamp,"YYYY-MM-DD HH:mm","crosshair");o.push({type:"text",attrs:{x:m.x,y:0,text:C,align:"center"},ignoreEvent:!0})}}),n.length>1&&o.unshift({type:"rect",attrs:{x:p,y:0,width:g-p,height:s.getBounding().height},ignoreEvent:!0})}return o},t.prototype.getFigures=function(r,n){var i,o,s=this.getWidget(),u=s.getPane(),c=u.getChart(),h=u.getAxisComponent(),p=c.getXAxisPane().getAxisComponent(),g=s.getBounding();return(o=(i=r.createXAxisFigures)===null||i===void 0?void 0:i.call(r,{chart:c,overlay:r,coordinates:n,bounding:g,xAxis:p,yAxis:h}))!==null&&o!==void 0?o:[]},t})(y2),qb=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(r){return we(r.timestamp)},t.prototype.getDirectionStyles=function(r){return r.vertical},t.prototype.getText=function(r,n){var i,o,s=r.timestamp;return n.getInnerFormatter().formatDate(s,v2[(o=(i=n.getPeriod())===null||i===void 0?void 0:i.type)!==null&&o!==void 0?o:"day"],"crosshair")},t.prototype.getTextAttrs=function(r,n,i,o,s,u){var c=i.realX,h=0,p="center";return c-n/2-u.paddingLeft<0?(h=0,p="left"):c+n/2+u.paddingRight>o.width?(h=o.width,p="right"):h=c,{x:h,y:0,text:r,align:p,baseline:"top"}},t})(b2),Qb=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._xAxisView=new Zb(i),i._overlayXAxisView=new Kb(i),i._crosshairVerticalLabelView=new qb(i),i.setCursor("ew-resize"),i.addChild(i._overlayXAxisView),i}return t.prototype.getName=function(){return Wt.X_AXIS},t.prototype.updateMain=function(r){this._xAxisView.draw(r)},t.prototype.updateOverlay=function(r){this._overlayXAxisView.draw(r),this._crosshairVerticalLabelView.draw(r)},t})(rv),Gb=(function(e){At(t,e);function t(r,n){var i=e.call(this,r)||this;return i.override(n),i}return t.prototype.override=function(r){var n=r.name,i=r.scrollZoomEnabled,o=r.createTicks;ur(this.name)||(this.name=n),this.scrollZoomEnabled=i??this.scrollZoomEnabled,this.createTicks=o??this.createTicks},t.prototype.createRangeImp=function(){var r=this.getParent().getChart().getChartStore(),n=r.getVisibleRange(),i=n.realFrom,o=n.realTo,s=i,u=o,c=o-i+1,h={from:s,to:u,range:c,realFrom:s,realTo:u,realRange:c,displayFrom:s,displayTo:u,displayRange:c};return h},t.prototype.createTicksImp=function(){var r,n=this.getRange(),i=n.realFrom,o=n.realTo,s=n.from,u=this.getParent().getChart().getChartStore(),c=u.getInnerFormatter().formatDate,h=u.getPeriod(),p=[],g=u.getBarSpace().bar,m=u.getStyles().xAxis.tickText,b=Math.max(aa("YYYY-MM-DD HH:mm:ss",m.size,m.weight,m.family),this.getBounding().width/8),x=Math.ceil(b/g);x%2!==0&&(x+=1);for(var C=Math.max(0,Math.floor(i/x)*x),_=C;_<o;_+=x)if(_>=s){var k=u.dataIndexToTimestamp(_);ht(k)&&p.push({coord:this.convertToPixel(_),value:k,text:c(k,Ab[(r=h==null?void 0:h.type)!==null&&r!==void 0?r:"day"],"xAxis")})}return vi(this.createTicks)?this.createTicks({range:this.getRange(),bounding:this.getBounding(),defaultTicks:p}):p},t.prototype.getAutoSize=function(){var r=this.getParent().getChart().getStyles(),n=r.xAxis,i=n.size;if(i!=="auto")return i;var o=r.crosshair,s=0;n.show&&(n.axisLine.show&&(s+=n.axisLine.size),n.tickLine.show&&(s+=n.tickLine.length),n.tickText.show&&(s+=n.tickText.marginStart+n.tickText.marginEnd+n.tickText.size));var u=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(u+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+o.vertical.text.borderSize*2+o.vertical.text.size),Math.max(s,u)},t.prototype.getBounding=function(){return this.getParent().getMainWidget().getBounding()},t.prototype.convertTimestampFromPixel=function(r){var n=this.getParent().getChart().getChartStore(),i=n.coordinateToDataIndex(r);return n.dataIndexToTimestamp(i)},t.prototype.convertTimestampToPixel=function(r){var n=this.getParent().getChart().getChartStore(),i=n.timestampToDataIndex(r);return n.dataIndexToCoordinate(i)},t.prototype.convertFromPixel=function(r){return this.getParent().getChart().getChartStore().coordinateToDataIndex(r)},t.prototype.convertToPixel=function(r){return this.getParent().getChart().getChartStore().dataIndexToCoordinate(r)},t.extend=function(r){var n=(function(i){At(o,i);function o(s){return i.call(this,s,r)||this}return o})(t);return n},t})(x2),Jb={name:"normal"},Am={normal:Gb.extend(Jb)};function e4(e){var t;return(t=Am[e])!==null&&t!==void 0?t:Am.normal}var t4=(function(e){At(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(r){var n=e4(r);return new n(this)},t.prototype.createMainWidget=function(r){return new Qb(r,this)},t})(C2);function r4(e,t){var r=0;return function(){var n=Date.now();n-r>t&&(e.apply(this,arguments),r=n)}}var n4=(function(e){At(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._dragFlag=!1,i._dragStartY=0,i._topPaneHeight=0,i._bottomPaneHeight=0,i._topPane=null,i._bottomPane=null,i._pressedMouseMoveEvent=r4(i._pressedTouchMouseMoveEvent,20),i.registerEvent("touchStartEvent",i._mouseDownEvent.bind(i)).registerEvent("touchMoveEvent",i._pressedMouseMoveEvent.bind(i)).registerEvent("touchEndEvent",i._mouseUpEvent.bind(i)).registerEvent("mouseDownEvent",i._mouseDownEvent.bind(i)).registerEvent("mouseUpEvent",i._mouseUpEvent.bind(i)).registerEvent("pressedMouseMoveEvent",i._pressedMouseMoveEvent.bind(i)).registerEvent("mouseEnterEvent",i._mouseEnterEvent.bind(i)).registerEvent("mouseLeaveEvent",i._mouseLeaveEvent.bind(i)),i}return t.prototype.getName=function(){return Wt.SEPARATOR},t.prototype._mouseDownEvent=function(r){var n=this;this._dragFlag=!0,this._dragStartY=r.pageY;var i=this.getPane(),o=i.getChart();this._topPane=i.getTopPane(),this._bottomPane=i.getBottomPane();var s=o.getDrawPanes();if(this._topPane.getOptions().state==="minimize")for(var u=s.findIndex(function(g){var m;return g.getId()===((m=n._topPane)===null||m===void 0?void 0:m.getId())}),c=u-1;c>-1;c--){var h=s[c];if(h.getOptions().state!=="minimize"){this._topPane=h;break}}if(this._bottomPane.getOptions().state==="minimize")for(var u=s.findIndex(function(b){var x;return b.getId()===((x=n._bottomPane)===null||x===void 0?void 0:x.getId())}),c=u+1;c<s.length;c++){var p=s[c];if(p.getOptions().state!=="minimize"){this._bottomPane=p;break}}return this._topPaneHeight=this._topPane.getBounding().height,this._bottomPaneHeight=this._bottomPane.getBounding().height,!0},t.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._topPane=null,this._bottomPane=null,this._topPaneHeight=0,this._bottomPaneHeight=0,this._mouseLeaveEvent()},t.prototype._pressedTouchMouseMoveEvent=function(r){var n=r.pageY-this._dragStartY,i=n<0;if(we(this._topPane)&&we(this._bottomPane)){var o=this._bottomPane.getOptions();if(this._topPane.getOptions().state!=="minimize"&&o.state!=="minimize"&&o.dragEnabled){var s=null,u=null,c=0,h=0;i?(s=this._topPane,u=this._bottomPane,c=this._topPaneHeight,h=this._bottomPaneHeight):(s=this._bottomPane,u=this._topPane,c=this._bottomPaneHeight,h=this._topPaneHeight);var p=s.getOptions().minHeight;if(c>p){var g=Math.max(c-Math.abs(n),p),m=c-g;s.setBounding({height:g}),u.setBounding({height:h+m});var b=this.getPane(),x=b.getChart();x.getChartStore().executeAction("onPaneDrag",{paneId:b.getId()}),x.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}}}return!0},t.prototype._mouseEnterEvent=function(){var r=this.getPane(),n=r.getBottomPane();if(n.getOptions().dragEnabled){var i=r.getChart(),o=i.getStyles().separator;return this.getContainer().style.background=o.activeBackgroundColor,!0}return!1},t.prototype._mouseLeaveEvent=function(){return this._dragFlag?!1:(this.getContainer().style.background="transparent",!0)},t.prototype.createContainer=function(){return zs("div",{width:"100%",height:"".concat(R0,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},t.prototype.updateImp=function(r,n,i){if(i===4||i===2){var o=this.getPane().getChart().getStyles().separator;r.style.top="".concat(-Math.floor((R0-o.size)/2),"px"),r.style.height="".concat(R0,"px")}},t})(i2),i4=(function(e){At(t,e);function t(r,n,i,o){var s=e.call(this,r,n)||this;return s.getContainer().style.overflow="",s._topPane=i,s._bottomPane=o,s._separatorWidget=new n4(s.getContainer(),s),s}return t.prototype.setBounding=function(r){return yn(this.getBounding(),r),this},t.prototype.getTopPane=function(){return this._topPane},t.prototype.setTopPane=function(r){return this._topPane=r,this},t.prototype.getBottomPane=function(){return this._bottomPane},t.prototype.setBottomPane=function(r){return this._bottomPane=r,this},t.prototype.getWidget=function(){return this._separatorWidget},t.prototype.getImage=function(r){var n=this.getBounding(),i=n.width,o=n.height,s=this.getChart().getStyles().separator,u=zs("canvas",{width:"".concat(i,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),c=u.getContext("2d"),h=Dl(u);return u.width=i*h,u.height=o*h,c.scale(h,h),c.fillStyle=s.color,c.fillRect(0,0,i,o),u},t.prototype.updateImp=function(r,n,i){if(r===4||r===2){var o=this.getChart().getStyles().separator;n.style.backgroundColor=o.color,n.style.height="".concat(i.height,"px"),n.style.marginLeft="".concat(i.left,"px"),n.style.width="".concat(i.width,"px"),this._separatorWidget.update(r)}},t})(w2);function Dm(){return typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("firefox")}function ig(){return typeof window>"u"?!1:/iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)}var sp={ResetClick:500,LongTap:500,PreventFiresTouchEvents:500},Sd={CancelClick:5,CancelTap:5,DoubleClick:5,DoubleTap:30},_0={Left:0,Middle:1,Right:2},o4=10,a4=(function(){function e(t,r,n){var i=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!ig(),this._onFirefoxOutsideMouseUp=function(o){i._mouseUpHandler(o)},this._onMobileSafariDoubleClick=function(o){if(i._firesTouchEvents(o)){if(++i._tapCount,i._tapTimeoutId!==null&&i._tapCount>1){var s=i._mouseTouchMoveWithDownInfo(i._getCoordinate(o),i._tapCoordinate).manhattanDistance;s<Sd.DoubleTap&&!i._cancelTap&&i._processEvent(i._makeCompatEvent(o),i._handler.doubleTapEvent),i._resetTapTimeout()}}else if(++i._clickCount,i._clickTimeoutId!==null&&i._clickCount>1){var s=i._mouseTouchMoveWithDownInfo(i._getCoordinate(o),i._clickCoordinate).manhattanDistance;s<Sd.DoubleClick&&!i._cancelClick&&i._processEvent(i._makeCompatEvent(o),i._handler.mouseDoubleClickEvent),i._resetClickTimeout()}},this._target=t,this._handler=r,this._options=n,this._init()}return e.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},e.prototype._mouseEnterHandler=function(t){var r=this,n,i,o;(n=this._unsubscribeMousemove)===null||n===void 0||n.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(o=this._unsubscribeContextMenu)===null||o===void 0||o.call(this);var s=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){r._target.removeEventListener("mousemove",s)},this._target.addEventListener("mousemove",s);var u=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){r._target.removeEventListener("wheel",u)},this._target.addEventListener("wheel",u,{passive:!1});var c=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){r._target.removeEventListener("contextmenu",c)},this._target.addEventListener("contextmenu",c,{passive:!1}),!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},e.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._mouseMoveHandler=function(t){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},e.prototype._mouseWheelHandler=function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){if(!we(this._handler.mouseWheelHortEvent)||(this._preventDefault(t),Math.abs(t.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(t),-t.deltaX)}else{if(!we(this._handler.mouseWheelVertEvent))return;var r=-(t.deltaY/100);if(r===0)return;switch(this._preventDefault(t),t.deltaMode){case t.DOM_DELTA_PAGE:{r*=120;break}case t.DOM_DELTA_LINE:{r*=32;break}}if(r!==0){var n=Math.sign(r)*Math.min(1,Math.abs(r));this._handler.mouseWheelVertEvent(this._makeCompatEvent(t),n)}}},e.prototype._contextMenuHandler=function(t){this._preventDefault(t)},e.prototype._touchMoveHandler=function(t){var r=this._touchWithId(t.changedTouches,this._activeTouchId);if(r!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(r),this._touchMoveStartCoordinate),i=n.xOffset,o=n.yOffset,s=n.manhattanDistance;if(!(!this._touchMoveExceededManhattanDistance&&s<Sd.CancelTap)){if(!this._touchMoveExceededManhattanDistance){var u=i*.5,c=o>=u&&!this._options.treatVertDragAsPageScroll(),h=u>o&&!this._options.treatHorzDragAsPageScroll();!c&&!h&&(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(t,r),this._handler.touchMoveEvent)}}},e.prototype._mouseMoveWithDownHandler=function(t){if(t.button===_0.Left){var r=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._mouseMoveStartCoordinate),n=r.manhattanDistance;n>=Sd.CancelClick&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(t),this._handler.pressedMouseMoveEvent)}},e.prototype._mouseTouchMoveWithDownInfo=function(t,r){var n=Math.abs(r.x-t.x),i=Math.abs(r.y-t.y),o=n+i;return{xOffset:n,yOffset:i,manhattanDistance:o}},e.prototype._touchEndHandler=function(t){var r=this._touchWithId(t.changedTouches,this._activeTouchId);if(r===null&&t.touches.length===0&&(r=t.changedTouches[0]),r!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var n=this._makeCompatEvent(t,r);if(this._processEvent(n,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1){var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(r),this._tapCoordinate).manhattanDistance;i<Sd.DoubleTap&&!this._cancelTap&&this._processEvent(n,this._handler.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processEvent(n,this._handler.tapEvent),we(this._handler.tapEvent)&&this._preventDefault(t));this._tapCount===0&&this._preventDefault(t),t.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(t))}},e.prototype._mouseUpHandler=function(t){if(t.button===_0.Left){var r=this._makeCompatEvent(t);if(this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),Dm()){var n=this._target.ownerDocument.documentElement;n.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(t))if(this._processEvent(r,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1){var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._clickCoordinate).manhattanDistance;i<Sd.DoubleClick&&!this._cancelClick&&this._processEvent(r,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processEvent(r,this._handler.mouseClickEvent)}},e.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},e.prototype._touchStartHandler=function(t){if(this._activeTouchId===null){var r=t.changedTouches[0];this._activeTouchId=r.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(t);var n=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(r),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{var i=this._touchMoveHandler.bind(this),o=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){n.removeEventListener("touchmove",i),n.removeEventListener("touchend",o)},n.addEventListener("touchmove",i,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),sp.LongTap)}this._processEvent(this._makeCompatEvent(t,r),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),sp.ResetClick),this._tapCoordinate=this._getCoordinate(r))}},e.prototype._mouseDownHandler=function(t){if(t.button===_0.Right){this._preventDefault(t),this._processEvent(this._makeCompatEvent(t),this._handler.mouseRightClickEvent);return}if(t.button===_0.Left){var r=this._target.ownerDocument.documentElement;Dm()&&r.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{var n=this._mouseMoveWithDownHandler.bind(this),i=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){r.removeEventListener("mousemove",n),r.removeEventListener("mouseup",i)},r.addEventListener("mousemove",n),r.addEventListener("mouseup",i)}this._mousePressed=!0,!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),sp.ResetClick),this._clickCoordinate=this._getCoordinate(t)))}},e.prototype._init=function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));{var r=this._target.ownerDocument,n=function(i){t._handler.mouseDownOutsideEvent!=null&&(i.composed&&t._target.contains(i.composedPath()[0])||i.target!==null&&t._target.contains(i.target)||t._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){r.removeEventListener("touchstart",n)},this._unsubscribeOutsideMouseEvents=function(){r.removeEventListener("mousedown",n)},r.addEventListener("mousedown",n),r.addEventListener("touchstart",n,{passive:!0})}ig()&&(this._unsubscribeMobileSafariEvents=function(){t._target.removeEventListener("dblclick",t._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(i){if(i.button===_0.Middle)return i.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},e.prototype._initPinch=function(){var t=this;!we(this._handler.pinchStartEvent)&&!we(this._handler.pinchEvent)&&!we(this._handler.pinchEndEvent)||(this._target.addEventListener("touchstart",function(r){t._checkPinchState(r.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(r){if(!(r.touches.length!==2||t._startPinchMiddleCoordinate===null)&&we(t._handler.pinchEvent)){var n=t._getTouchDistance(r.touches[0],r.touches[1]),i=n/t._startPinchDistance;t._handler.pinchEvent(Ye(Ye({},t._startPinchMiddleCoordinate),{pageX:0,pageY:0}),i),t._preventDefault(r)}},{passive:!1}),this._target.addEventListener("touchend",function(r){t._checkPinchState(r.touches)}))},e.prototype._checkPinchState=function(t){t.length===1&&(this._pinchPrevented=!1),t.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)},e.prototype._startPinch=function(t){var r=this._target.getBoundingClientRect();this._startPinchMiddleCoordinate={x:(t[0].clientX-r.left+(t[1].clientX-r.left))/2,y:(t[0].clientY-r.top+(t[1].clientY-r.top))/2},this._startPinchDistance=this._getTouchDistance(t[0],t[1]),we(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},e.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,we(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},e.prototype._mouseLeaveHandler=function(t){var r,n,i;(r=this._unsubscribeMousemove)===null||r===void 0||r.call(this),(n=this._unsubscribeMouseWheel)===null||n===void 0||n.call(this),(i=this._unsubscribeContextMenu)===null||i===void 0||i.call(this),!this._firesTouchEvents(t)&&this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!ig())},e.prototype._longTapHandler=function(t){var r=this._touchWithId(t.touches,this._activeTouchId);r!==null&&(this._processEvent(this._makeCompatEvent(t,r),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},e.prototype._firesTouchEvents=function(t){var r;return we((r=t.sourceCapabilities)===null||r===void 0?void 0:r.firesTouchEvents)?t.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(t)<this._lastTouchEventTimeStamp+sp.PreventFiresTouchEvents},e.prototype._processEvent=function(t,r){r==null||r.call(this._handler,t)},e.prototype._makeCompatEvent=function(t,r){var n=this,i=r??t,o=this._target.getBoundingClientRect();return{x:i.clientX-o.left,y:i.clientY-o.top,pageX:i.pageX,pageY:i.pageY,isTouch:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click"&&t.type!=="wheel",preventDefault:function(){t.type!=="touchstart"&&n._preventDefault(t)}}},e.prototype._getTouchDistance=function(t,r){var n=t.clientX-r.clientX,i=t.clientY-r.clientY;return Math.sqrt(n*n+i*i)},e.prototype._preventDefault=function(t){t.cancelable&&t.preventDefault()},e.prototype._getCoordinate=function(t){return{x:t.pageX,y:t.pageY}},e.prototype._eventTimeStamp=function(t){var r;return(r=t.timeStamp)!==null&&r!==void 0?r:performance.now()},e.prototype._touchWithId=function(t,r){for(var n=0;n<t.length;++n)if(t[n].identifier===r)return t[n];return null},e})(),s4=(function(){function e(t,r){var n=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(i){if(i.shiftKey)switch(i.code){case"Equal":{n._chart.getChartStore().zoom(.5);break}case"Minus":{n._chart.getChartStore().zoom(-.5);break}case"ArrowLeft":{var o=n._chart.getChartStore();o.startScroll(),o.scroll(-3*o.getBarSpace().bar);break}case"ArrowRight":{var o=n._chart.getChartStore();o.startScroll(),o.scroll(3*o.getBarSpace().bar);break}}},this._container=t,this._chart=r,this._event=new a4(t,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),t.addEventListener("keydown",this._boundKeyBoardDownEvent)}return e.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},e.prototype.pinchEvent=function(t,r){var n=this._findWidgetByEvent(t),i=n.pane,o=n.widget;if((i==null?void 0:i.getId())!==Vt.X_AXIS&&(o==null?void 0:o.getName())===Wt.MAIN){var s=this._makeWidgetEvent(t,o),u=(r-this._pinchScale)*5;return this._pinchScale=r,this._chart.getChartStore().zoom(u,{x:s.x,y:s.y}),!0}return!1},e.prototype.mouseWheelHortEvent=function(t,r){var n=this._chart.getChartStore();return n.startScroll(),n.scroll(r),!0},e.prototype.mouseWheelVertEvent=function(t,r){var n=this._findWidgetByEvent(t).widget,i=this._makeWidgetEvent(t,n),o=n==null?void 0:n.getName();return o===Wt.MAIN?(this._chart.getChartStore().zoom(r,{x:i.x,y:i.y}),!0):!1},e.prototype.mouseDownEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget;if(this._mouseDownWidget=i,i!==null){var o=this._makeWidgetEvent(t,i),s=i.getName();switch(s){case Wt.SEPARATOR:return i.dispatchEvent("mouseDownEvent",o);case Wt.MAIN:{var u=n.getAxisComponent();if(!u.getAutoCalcTickFlag()){var c=u.getRange();this._prevYAxisRange=Ye({},c)}return this._startScrollCoordinate={x:o.x,y:o.y},this._chart.getChartStore().startScroll(),i.dispatchEvent("mouseDownEvent",o)}case Wt.X_AXIS:return this._processXAxisScrollStartEvent(i,o);case Wt.Y_AXIS:return this._processYAxisScaleStartEvent(i,o)}}return!1},e.prototype.mouseMoveEvent=function(t){var r,n,i,o=this._findWidgetByEvent(t),s=o.pane,u=o.widget,c=this._makeWidgetEvent(t,u);if((((r=this._mouseMoveTriggerWidgetInfo.pane)===null||r===void 0?void 0:r.getId())!==(s==null?void 0:s.getId())||((n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0?void 0:n.getName())!==(u==null?void 0:u.getName()))&&(u==null||u.dispatchEvent("mouseEnterEvent",c),(i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0||i.dispatchEvent("mouseLeaveEvent",c),this._mouseMoveTriggerWidgetInfo={pane:s,widget:u}),u!==null){var h=u.getName();switch(h){case Wt.MAIN:{var p=u.dispatchEvent("mouseMoveEvent",c),g={x:c.x,y:c.y,paneId:s==null?void 0:s.getId()};return p?(u.getForceCursor()!=="pointer"&&(g=void 0),u.setCursor("pointer")):u.setCursor("crosshair"),this._chart.getChartStore().setCrosshair(g),p}case Wt.SEPARATOR:case Wt.X_AXIS:case Wt.Y_AXIS:{var p=u.dispatchEvent("mouseMoveEvent",c);return this._chart.getChartStore().setCrosshair(),p}}}return!1},e.prototype.pressedMouseMoveEvent=function(t){var r,n;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===Wt.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",t);var i=this._findWidgetByEvent(t),o=i.pane,s=i.widget;if(s!==null&&((r=this._mouseDownWidget)===null||r===void 0?void 0:r.getPane().getId())===(o==null?void 0:o.getId())&&((n=this._mouseDownWidget)===null||n===void 0?void 0:n.getName())===s.getName()){var u=this._makeWidgetEvent(t,s),c=s.getName();switch(c){case Wt.MAIN:{var h=void 0,p=s.dispatchEvent("pressedMouseMoveEvent",u);return p||this._processMainScrollingEvent(s,u),(!p||s.getForceCursor()==="pointer")&&(h={x:u.x,y:u.y,paneId:o==null?void 0:o.getId()}),this._chart.getChartStore().setCrosshair(h,{forceInvalidate:!0}),p}case Wt.X_AXIS:return this._processXAxisScrollingEvent(s,u);case Wt.Y_AXIS:return this._processYAxisScalingEvent(s,u)}}return!1},e.prototype.mouseUpEvent=function(t){var r=this._findWidgetByEvent(t).widget,n=!1;if(r!==null){var i=this._makeWidgetEvent(t,r),o=r.getName();switch(o){case Wt.MAIN:case Wt.SEPARATOR:case Wt.X_AXIS:case Wt.Y_AXIS:{n=r.dispatchEvent("mouseUpEvent",i);break}}n&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,n},e.prototype.mouseClickEvent=function(t){var r=this._findWidgetByEvent(t).widget;if(r!==null){var n=this._makeWidgetEvent(t,r);return r.dispatchEvent("mouseClickEvent",n)}return!1},e.prototype.mouseRightClickEvent=function(t){var r=this._findWidgetByEvent(t).widget,n=!1;if(r!==null){var i=this._makeWidgetEvent(t,r),o=r.getName();switch(o){case Wt.MAIN:case Wt.X_AXIS:case Wt.Y_AXIS:{n=r.dispatchEvent("mouseRightClickEvent",i);break}}n&&this._chart.updatePane(1)}return!1},e.prototype.mouseDoubleClickEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget;if(i!==null){var o=i.getName();switch(o){case Wt.MAIN:{var s=this._makeWidgetEvent(t,i);return i.dispatchEvent("mouseDoubleClickEvent",s)}case Wt.Y_AXIS:{var u=n.getAxisComponent();if(!u.getAutoCalcTickFlag())return u.setAutoCalcTickFlag(!0),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0}),!0;break}}}return!1},e.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().setCrosshair(),!0},e.prototype.touchStartEvent=function(t){var r,n=this._findWidgetByEvent(t),i=n.pane,o=n.widget;if(o!==null){var s=this._makeWidgetEvent(t,o);(r=s.preventDefault)===null||r===void 0||r.call(s);var u=o.getName();switch(u){case Wt.MAIN:{var c=this._chart.getChartStore();if(o.dispatchEvent("mouseDownEvent",s))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,c.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0;this._flingScrollRequestId!==null&&(mm(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime();var h=i.getAxisComponent();if(!h.getAutoCalcTickFlag()){var p=h.getRange();this._prevYAxisRange=Ye({},p)}if(this._startScrollCoordinate={x:s.x,y:s.y},c.startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var g=s.x-this._touchCoordinate.x,m=s.y-this._touchCoordinate.y,b=Math.sqrt(g*g+m*m);b<o4?(this._touchCoordinate={x:s.x,y:s.y},c.setCrosshair({x:s.x,y:s.y,paneId:i==null?void 0:i.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,c.setCrosshair())}return!0}case Wt.X_AXIS:return this._processXAxisScrollStartEvent(o,s);case Wt.Y_AXIS:return this._processYAxisScaleStartEvent(o,s)}}return!1},e.prototype.touchMoveEvent=function(t){var r,n=this._findWidgetByEvent(t),i=n.pane,o=n.widget;if(o!==null){var s=this._makeWidgetEvent(t,o);(r=s.preventDefault)===null||r===void 0||r.call(s);var u=o.getName(),c=this._chart.getChartStore();switch(u){case Wt.MAIN:return o.dispatchEvent("pressedMouseMoveEvent",s)?(c.setCrosshair(void 0,{notInvalidate:!0}),this._chart.updatePane(1),!0):(this._touchCoordinate!==null?c.setCrosshair({x:s.x,y:s.y,paneId:i==null?void 0:i.getId()}):this._processMainScrollingEvent(o,s),!0);case Wt.X_AXIS:return this._processXAxisScrollingEvent(o,s);case Wt.Y_AXIS:return this._processYAxisScalingEvent(o,s)}}return!1},e.prototype.touchEndEvent=function(t){var r=this,n=this._findWidgetByEvent(t).widget;if(n!==null){var i=this._makeWidgetEvent(t,n),o=n.getName();switch(o){case Wt.MAIN:{if(n.dispatchEvent("mouseUpEvent",i),this._startScrollCoordinate!==null){var s=new Date().getTime()-this._flingStartTime,u=i.x-this._startScrollCoordinate.x,c=u/(s>0?s:1)*20;if(s<200&&Math.abs(c)>0){var h=this._chart.getChartStore(),p=function(){r._flingScrollRequestId=Pp(function(){h.startScroll(),h.scroll(c),c=c*(1-.025),Math.abs(c)<1?r._flingScrollRequestId!==null&&(mm(r._flingScrollRequestId),r._flingScrollRequestId=null):p()})};p()}}return!0}case Wt.X_AXIS:case Wt.Y_AXIS:{var g=n.dispatchEvent("mouseUpEvent",i);g&&this._chart.updatePane(1)}}this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0}return!1},e.prototype.tapEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget,o=!1;if(i!==null){var s=this._makeWidgetEvent(t,i),u=i.dispatchEvent("mouseClickEvent",s);if(i.getName()===Wt.MAIN){var c=this._makeWidgetEvent(t,i),h=this._chart.getChartStore();u?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,h.setCrosshair(void 0,{notInvalidate:!0}),o=!0):(!this._touchCancelCrosshair&&!this._touchZoomed&&(this._touchCoordinate={x:c.x,y:c.y},h.setCrosshair({x:c.x,y:c.y,paneId:n==null?void 0:n.getId()},{notInvalidate:!0}),o=!0),this._touchCancelCrosshair=!1)}(o||u)&&this._chart.updatePane(1)}return o},e.prototype.doubleTapEvent=function(t){return this.mouseDoubleClickEvent(t)},e.prototype.longTapEvent=function(t){var r=this._findWidgetByEvent(t),n=r.pane,i=r.widget;if(i!==null&&i.getName()===Wt.MAIN){var o=this._makeWidgetEvent(t,i);return this._touchCoordinate={x:o.x,y:o.y},this._chart.getChartStore().setCrosshair({x:o.x,y:o.y,paneId:n==null?void 0:n.getId()}),!0}return!1},e.prototype._processMainScrollingEvent=function(t,r){if(this._startScrollCoordinate!==null){var n=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&!n.getAutoCalcTickFlag()&&n.scrollZoomEnabled){var i=this._prevYAxisRange,o=i.from,s=i.to,u=i.range,c=0;n.reverse?c=this._startScrollCoordinate.y-r.y:c=r.y-this._startScrollCoordinate.y;var h=t.getBounding(),p=c/h.height,g=u*p,m=o+g,b=s+g,x=n.valueToRealValue(m,{range:this._prevYAxisRange}),C=n.valueToRealValue(b,{range:this._prevYAxisRange}),_=n.realValueToDisplayValue(x,{range:this._prevYAxisRange}),k=n.realValueToDisplayValue(C,{range:this._prevYAxisRange});n.setRange({from:m,to:b,range:b-m,realFrom:x,realTo:C,realRange:C-x,displayFrom:_,displayTo:k,displayRange:k-_})}var M=r.x-this._startScrollCoordinate.x;this._chart.getChartStore().scroll(M)}},e.prototype._processXAxisScrollStartEvent=function(t,r){var n=t.dispatchEvent("mouseDownEvent",r);return n&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:r.x,y:r.y},this._xAxisStartScaleDistance=r.pageX,n},e.prototype._processXAxisScrollingEvent=function(t,r){var n,i=t.dispatchEvent("pressedMouseMoveEvent",r);if(i)this._chart.updatePane(1);else{var o=t.getPane().getAxisComponent();if(o.scrollZoomEnabled&&this._xAxisStartScaleDistance!==0){var s=this._xAxisStartScaleDistance/r.pageX;if(Number.isFinite(s)){var u=(s-this._xAxisScale)*10;this._xAxisScale=s,this._chart.getChartStore().zoom(u,(n=this._xAxisStartScaleCoordinate)!==null&&n!==void 0?n:void 0)}}}return i},e.prototype._processYAxisScaleStartEvent=function(t,r){var n=t.dispatchEvent("mouseDownEvent",r);n&&this._chart.updatePane(1);var i=t.getPane().getAxisComponent().getRange();return this._prevYAxisRange=Ye({},i),this._yAxisStartScaleDistance=r.pageY,n},e.prototype._processYAxisScalingEvent=function(t,r){var n=t.dispatchEvent("pressedMouseMoveEvent",r);if(n)this._chart.updatePane(1);else{var i=t.getPane().getAxisComponent();if(this._prevYAxisRange!==null&&i.scrollZoomEnabled&&this._yAxisStartScaleDistance!==0){var o=this._prevYAxisRange,s=o.from,u=o.to,c=o.range,h=r.pageY/this._yAxisStartScaleDistance,p=c*h,g=(p-c)/2,m=s-g,b=u+g,x=i.valueToRealValue(m,{range:this._prevYAxisRange}),C=i.valueToRealValue(b,{range:this._prevYAxisRange}),_=i.realValueToDisplayValue(x,{range:this._prevYAxisRange}),k=i.realValueToDisplayValue(C,{range:this._prevYAxisRange});i.setRange({from:m,to:b,range:p,realFrom:x,realTo:C,realRange:C-x,displayFrom:_,displayTo:k,displayRange:k-_}),this._chart.layout({measureWidth:!0,update:!0,buildYAxisTick:!0})}}return n},e.prototype._findWidgetByEvent=function(t){var r,n,i,o,s=t.x,u=t.y,c=this._chart.getSeparatorPanes(),h=this._chart.getStyles().separator.size;try{for(var p=ca(c),g=p.next();!g.done;g=p.next()){var m=g.value,b=m[1],x=b.getBounding(),C=x.top-Math.round((R0-h)/2);if(s>=x.left&&s<=x.left+x.width&&u>=C&&u<=C+R0)return{pane:b,widget:b.getWidget()}}}catch(B){r={error:B}}finally{try{g&&!g.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}var _=this._chart.getDrawPanes(),k=null;try{for(var M=ca(_),L=M.next();!L.done;L=M.next()){var D=L.value,x=D.getBounding();if(s>=x.left&&s<=x.left+x.width&&u>=x.top&&u<=x.top+x.height){k=D;break}}}catch(B){i={error:B}}finally{try{L&&!L.done&&(o=M.return)&&o.call(M)}finally{if(i)throw i.error}}var P=null;if(k!==null){if(!we(P)){var $=k.getMainWidget(),A=$.getBounding();s>=A.left&&s<=A.left+A.width&&u>=A.top&&u<=A.top+A.height&&(P=$)}if(!we(P)){var N=k.getYAxisWidget();if(N!==null){var z=N.getBounding();s>=z.left&&s<=z.left+z.width&&u>=z.top&&u<=z.top+z.height&&(P=N)}}}return{pane:k,widget:P}},e.prototype._makeWidgetEvent=function(t,r){var n,i,o,s=(n=r==null?void 0:r.getBounding())!==null&&n!==void 0?n:null;return Ye(Ye({},t),{x:t.x-((i=s==null?void 0:s.left)!==null&&i!==void 0?i:0),y:t.y-((o=s==null?void 0:s.top)!==null&&o!==void 0?o:0)})},e.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},e})(),l4=(function(){function e(t,r){this._chartBounding=Lp(),this._drawPanes=[],this._separatorPanes=new Map,this._layoutOptions={sort:!0,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1},this._layoutPending=!1,this._cacheYAxisWidth={left:0,right:0},this._initContainer(t),this._chartEvent=new s4(this._chartContainer,this),this._chartStore=new sb(this,r),this._initPanes(r),this._layout()}return e.prototype._initContainer=function(t){this._container=t,this._chartContainer=zs("div",{position:"relative",width:"100%",height:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",overflow:"hidden",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer),this._cacheChartBounding()},e.prototype._cacheChartBounding=function(){this._chartBounding.width=Math.floor(this._chartContainer.clientWidth),this._chartBounding.height=Math.floor(this._chartContainer.clientHeight)},e.prototype._initPanes=function(t){var r=this,n,i=(n=t==null?void 0:t.layout)!==null&&n!==void 0?n:[{type:"candle"}],o=function(u){var c,h;if(!we(r._candlePane)){var p=(c=u.options)!==null&&c!==void 0?c:{};yn(p,{id:Vt.CANDLE}),r._candlePane=r._createPane(Yb,Vt.CANDLE,p);var g=(h=u.content)!==null&&h!==void 0?h:[];g.forEach(function(m){r.createIndicator(m,!0,p)})}},s=function(u){if(!we(r._xAxisPane)){var c=r._createPane(t4,Vt.X_AXIS,u??{});r._xAxisPane=c}};i.forEach(function(u){var c,h,p;switch(u.type){case"candle":{o(u);break}case"indicator":{var g=(c=u.content)!==null&&c!==void 0?c:[];if(g.length>0){var m=(p=(h=u.options)===null||h===void 0?void 0:h.id)!==null&&p!==void 0?p:null;we(m)&&(m=bp(Vt.INDICATOR));var b=Ye(Ye({},u.options),{id:m});g.forEach(function(x){r.createIndicator(x,!0,b)})}break}case"xAxis":{s(u.options);break}}}),o({}),s({order:Number.MAX_SAFE_INTEGER})},e.prototype._createPane=function(t,r,n){var i=new t(this,r,n??{});return this._drawPanes.push(i),i},e.prototype._recalculatePaneHeight=function(t,r,n){if(n===0)return!1;var i=this._drawPanes.filter(function(g){var m=g.getId();return g.getOptions().state==="normal"&&m!==t.getId()&&m!==Vt.X_AXIS}),o=i.length;if(o===0)return!1;if(t.getId()!==Vt.CANDLE&&we(this._candlePane)&&this._candlePane.getOptions().state==="normal"){var s=this._candlePane.getBounding().height;if(s>0){var u=this._candlePane.getOptions().minHeight,c=s+n;c<u&&(c=u,r-=s+n-c),this._candlePane.setBounding({height:c})}}else{var h=n,p=Math.floor(n/o);i.forEach(function(g,m){var b=g.getBounding().height,x=0;m===o-1?x=b+h:x=b+p,x<g.getOptions().minHeight&&(x=g.getOptions().minHeight),g.setBounding({height:x}),h-=x-b}),Math.abs(h)>0&&(r-=h)}return t.setBounding({height:r}),!0},e.prototype.getDrawPaneById=function(t){if(t===Vt.CANDLE)return this._candlePane;if(t===Vt.X_AXIS)return this._xAxisPane;var r=this._drawPanes.find(function(n){return n.getId()===t});return r??null},e.prototype.getContainer=function(){return this._container},e.prototype.getChartStore=function(){return this._chartStore},e.prototype.getXAxisPane=function(){return this._xAxisPane},e.prototype.getDrawPanes=function(){return this._drawPanes},e.prototype.getSeparatorPanes=function(){return this._separatorPanes},e.prototype.layout=function(t){var r=this,n,i,o,s,u,c,h;(n=t.sort)!==null&&n!==void 0&&n&&(this._layoutOptions.sort=t.sort),(i=t.measureHeight)!==null&&i!==void 0&&i&&(this._layoutOptions.measureHeight=t.measureHeight),(o=t.measureWidth)!==null&&o!==void 0&&o&&(this._layoutOptions.measureWidth=t.measureWidth),(s=t.update)!==null&&s!==void 0&&s&&(this._layoutOptions.update=t.update),(u=t.buildYAxisTick)!==null&&u!==void 0&&u&&(this._layoutOptions.buildYAxisTick=t.buildYAxisTick),(c=t.cacheYAxisWidth)!==null&&c!==void 0&&c&&(this._layoutOptions.cacheYAxisWidth=t.cacheYAxisWidth),(h=t.buildYAxisTick)!==null&&h!==void 0&&h&&(this._layoutOptions.forceBuildYAxisTick=t.forceBuildYAxisTick),this._layoutPending||(this._layoutPending=!0,Promise.resolve().then(function(p){r._layout(),r._layoutPending=!1}).catch(function(p){}))},e.prototype._layout=function(){var t=this,r=this._layoutOptions,n=r.sort,i=r.measureHeight,o=r.measureWidth,s=r.update,u=r.buildYAxisTick,c=r.cacheYAxisWidth,h=r.forceBuildYAxisTick;if(n){for(;we(this._chartContainer.firstChild);)this._chartContainer.removeChild(this._chartContainer.firstChild);this._separatorPanes.clear(),this._drawPanes.sort(function(le,ae){return le.getOptions().order-ae.getOptions().order});var p=null;this._drawPanes.forEach(function(le){if(le.getId()!==Vt.X_AXIS){if(we(p)){var ae=new i4(t,"",p,le);t._chartContainer.appendChild(ae.getContainer()),t._separatorPanes.set(le,ae)}p=le}t._chartContainer.appendChild(le.getContainer())})}if(i){var g=this._chartBounding.height,m=this.getStyles().separator.size,b=this._xAxisPane.getAxisComponent().getAutoSize(),x=g-b;x<0&&(x=0),this._drawPanes.forEach(function(le){var ae=le.getId();if(we(t._separatorPanes.get(le))&&(x-=m),ae!==Vt.X_AXIS&&ae!==Vt.CANDLE&&le.getVisible()){var te=le.getBounding().height;te>x?(te=x,x=0):x-=te,le.setBounding({height:te})}}),this._candlePane.setBounding({height:Math.max(x,0)}),this._xAxisPane.setBounding({height:b});var C=0;this._drawPanes.forEach(function(le){var ae=t._separatorPanes.get(le);we(ae)&&(ae.setBounding({height:m,top:C}),C+=m),le.setBounding({top:C}),C+=le.getBounding().height})}var _=o;if((u||h)&&this._drawPanes.forEach(function(le){var ae=le.getAxisComponent().buildTicks(h);_||(_=ae)}),_){var k=this._chartBounding.width,M=this.getStyles(),L=0,D=!0,P=0,$=!0;this._drawPanes.forEach(function(le){if(le.getId()!==Vt.X_AXIS){var ae=le.getAxisComponent(),te=ae.inside,ve=ae.getAutoSize();ae.position==="left"?(L=Math.max(L,ve),te&&(D=!1)):(P=Math.max(P,ve),te&&($=!1))}}),c&&(L=Math.max(this._cacheYAxisWidth.left,L),P=Math.max(this._cacheYAxisWidth.right,P)),this._cacheYAxisWidth.left=L,this._cacheYAxisWidth.right=P;var A=k,N=0,z=0;D&&(A-=L,N=L),$&&(A-=P,z=P),this._chartStore.setTotalBarSpace(A);var B={width:k},Q={width:A,left:N,right:z},ne={width:L},Z={width:P},J=M.separator.fill,ue={};J?ue=B:ue=Q,this._drawPanes.forEach(function(le){var ae;(ae=t._separatorPanes.get(le))===null||ae===void 0||ae.setBounding(ue),le.setBounding(B,Q,ne,Z)})}s&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4)),this._layoutOptions={sort:!1,measureHeight:!1,measureWidth:!1,update:!1,buildYAxisTick:!1,cacheYAxisWidth:!1,forceBuildYAxisTick:!1}},e.prototype.updatePane=function(t,r){var n=this;if(we(r)){var i=this.getDrawPaneById(r);i==null||i.update(t)}else this._drawPanes.forEach(function(o){var s;o.update(t),(s=n._separatorPanes.get(o))===null||s===void 0||s.update(t)})},e.prototype.getDom=function(t,r){var n,i;if(we(t)){var o=this.getDrawPaneById(t);if(we(o)){var s=r??"root";switch(s){case"root":return o.getContainer();case"main":return o.getMainWidget().getContainer();case"yAxis":return(i=(n=o.getYAxisWidget())===null||n===void 0?void 0:n.getContainer())!==null&&i!==void 0?i:null}}}else return this._chartContainer;return null},e.prototype.getSize=function(t,r){var n,i;if(we(t)){var o=this.getDrawPaneById(t);if(we(o)){var s=r??"root";switch(s){case"root":return o.getBounding();case"main":return o.getMainWidget().getBounding();case"yAxis":return(i=(n=o.getYAxisWidget())===null||n===void 0?void 0:n.getBounding())!==null&&i!==void 0?i:null}}}else return this._chartBounding;return null},e.prototype.setSymbol=function(t){this._chartStore.setSymbol(t)},e.prototype.getSymbol=function(){return this._chartStore.getSymbol()},e.prototype.setPeriod=function(t){this._chartStore.setPeriod(t)},e.prototype.getPeriod=function(){return this._chartStore.getPeriod()},e.prototype.setStyles=function(t){var r=this;this._setOptions(function(){r._chartStore.setStyles(t)})},e.prototype.getStyles=function(){return this._chartStore.getStyles()},e.prototype.setFormatter=function(t){var r=this;this._setOptions(function(){r._chartStore.setFormatter(t)})},e.prototype.getFormatter=function(){return this._chartStore.getFormatter()},e.prototype.setLocale=function(t){var r=this;this._setOptions(function(){r._chartStore.setLocale(t)})},e.prototype.getLocale=function(){return this._chartStore.getLocale()},e.prototype.setTimezone=function(t){var r=this;this._setOptions(function(){r._chartStore.setTimezone(t)})},e.prototype.getTimezone=function(){return this._chartStore.getTimezone()},e.prototype.setThousandsSeparator=function(t){var r=this;this._setOptions(function(){r._chartStore.setThousandsSeparator(t)})},e.prototype.getThousandsSeparator=function(){return this._chartStore.getThousandsSeparator()},e.prototype.setDecimalFold=function(t){var r=this;this._setOptions(function(){r._chartStore.setDecimalFold(t)})},e.prototype.getDecimalFold=function(){return this._chartStore.getDecimalFold()},e.prototype._setOptions=function(t){t(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},e.prototype.setOffsetRightDistance=function(t){this._chartStore.setOffsetRightDistance(t,!0)},e.prototype.getOffsetRightDistance=function(){return this._chartStore.getOffsetRightDistance()},e.prototype.setMaxOffsetLeftDistance=function(t){t<0||this._chartStore.setMaxOffsetLeftDistance(t)},e.prototype.setMaxOffsetRightDistance=function(t){t<0||this._chartStore.setMaxOffsetRightDistance(t)},e.prototype.setLeftMinVisibleBarCount=function(t){t<0||this._chartStore.setLeftMinVisibleBarCount(Math.ceil(t))},e.prototype.setRightMinVisibleBarCount=function(t){t<0||this._chartStore.setRightMinVisibleBarCount(Math.ceil(t))},e.prototype.setBarSpace=function(t){this._chartStore.setBarSpace(t)},e.prototype.getBarSpace=function(){return this._chartStore.getBarSpace()},e.prototype.getVisibleRange=function(){return this._chartStore.getVisibleRange()},e.prototype.resetData=function(){this._chartStore.resetData()},e.prototype.getDataList=function(){return this._chartStore.getDataList()},e.prototype.setDataLoader=function(t){this._chartStore.setDataLoader(t)},e.prototype.createIndicator=function(t,r,n){var i,o=ur(t)?{name:t}:t;if(Gy(o.name)===null)return null;var s=n??{};ur(s.id)||(s.id=bp(Vt.INDICATOR)),ur(o.id)||(o.id=bp(o.name));var u=this._chartStore.addIndicator(o,s.id,r??!1);if(u){var c=!1;return we(this.getDrawPaneById(s.id))||(this._createPane(_2,s.id,s),(i=s.height)!==null&&i!==void 0||(s.height=n2),c=!0),this.setPaneOptions(s),this.layout({sort:c,measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0}),o.id}return null},e.prototype.overrideIndicator=function(t){return this._chartStore.overrideIndicator(t)},e.prototype.getIndicators=function(t){return this._chartStore.getIndicatorsByFilter(t??{})},e.prototype.removeIndicator=function(t){var r=this,n=this._chartStore.removeIndicator(t??{});if(n){var i=!1,o=[];this._drawPanes.forEach(function(s){var u=s.getId();u!==Vt.CANDLE&&u!==Vt.X_AXIS&&o.push(u)}),o.forEach(function(s){if(!r._chartStore.hasIndicators(s)){var u=r._drawPanes.findIndex(function(h){return h.getId()===s}),c=r._drawPanes[u];we(c)&&(i=!0,r._recalculatePaneHeight(c,0,c.getBounding().height),r._drawPanes.splice(u,1),c.destroy())}}),this._drawPanes.length===2&&(this._candlePane.setVisible(!0),this._candlePane.setBounding({height:this._chartBounding.height-this._xAxisPane.getBounding().height})),this.layout({sort:i,measureHeight:i,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})}return n},e.prototype.createOverlay=function(t){var r=this,n=[],i=[],o=function(u){!we(u.paneId)||r.getDrawPaneById(u.paneId)===null?(u.paneId=Vt.CANDLE,i.push(!1)):i.push(!0),n.push(u)};ur(t)?o({name:t}):Wa(t)?t.forEach(function(u){var c=null;ur(u)?c={name:u}:c=u,o(c)}):o(t);var s=this._chartStore.addOverlays(n,i);return Wa(t)?s:s[0]},e.prototype.getOverlays=function(t){return this._chartStore.getOverlaysByFilter(t??{})},e.prototype.overrideOverlay=function(t){return this._chartStore.overrideOverlay(t)},e.prototype.removeOverlay=function(t){return this._chartStore.removeOverlay(t??{})},e.prototype.setPaneOptions=function(t){var r,n,i=this,o,s=!1,u=!1,c=we(t.id),h=function(C){var _=C.getId();if(c&&t.id===_||!c){if(_!==Vt.X_AXIS){if(ht(t.height)&&t.height>0){var k=Math.max((o=t.minHeight)!==null&&o!==void 0?o:C.getOptions().minHeight,0),M=Math.max(k,t.height);u=!0,s=!0,C.setOriginalBounding({height:M}),p._recalculatePaneHeight(C,M,-M)}if(we(t.state)&&C.getOptions().state!==t.state){s=!0,u=!0;var L=t.state;switch(L){case"maximize":{var D=p._drawPanes.find(function(z){var B=z.getId();return z.getOptions().state==="maximize"&&B!==Vt.X_AXIS});if(!we(D)){C.getOptions().state==="normal"&&C.setOriginalBounding({height:C.getBounding().height}),C.setOptions({state:L});var P=p._chartBounding.height;C.setBounding({height:P-p._xAxisPane.getBounding().height}),p._drawPanes.forEach(function(z){var B;z.getId()!==Vt.X_AXIS&&z.getId()!==_&&(z.setBounding({height:z.getOriginalBounding().height}),z.setVisible(!1),(B=i._separatorPanes.get(z))===null||B===void 0||B.setVisible(!1))})}break}case"minimize":{var M=C.getBounding().height,$=C.getOptions().state,A=M-xp;$==="maximize"&&(A=C.getOriginalBounding().height-xp),p._recalculatePaneHeight(C,xp,A)&&($==="normal"&&C.setOriginalBounding({height:M}),C.setOptions({state:L})),p._drawPanes.forEach(function(B){var Q;B.getId()!==Vt.X_AXIS&&(B.setVisible(!0),(Q=i._separatorPanes.get(B))===null||Q===void 0||Q.setVisible(!0))});break}default:{var M=C.getOriginalBounding().height;p._recalculatePaneHeight(C,M,C.getBounding().height-M)&&C.setOptions({state:L}),p._drawPanes.forEach(function(B){var Q;B.getId()!==Vt.X_AXIS&&(B.setVisible(!0),(Q=i._separatorPanes.get(B))===null||Q===void 0||Q.setVisible(!0))});break}}}}we(t.axis)&&(u=!0);var N=Ye({},t);if(delete N.state,C.setOptions(N),_===t.id)return"break"}},p=this;try{for(var g=ca(this._drawPanes),m=g.next();!m.done;m=g.next()){var b=m.value,x=h(b);if(x==="break")break}}catch(C){r={error:C}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}u&&this.layout({measureHeight:s,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},e.prototype.getPaneOptions=function(t){var r;if(we(t)){var n=this.getDrawPaneById(t);return(r=n==null?void 0:n.getOptions())!==null&&r!==void 0?r:null}return this._drawPanes.map(function(i){return i.getOptions()})},e.prototype.setZoomEnabled=function(t){this._chartStore.setZoomEnabled(t)},e.prototype.isZoomEnabled=function(){return this._chartStore.isZoomEnabled()},e.prototype.setScrollEnabled=function(t){this._chartStore.setScrollEnabled(t)},e.prototype.isScrollEnabled=function(){return this._chartStore.isScrollEnabled()},e.prototype.scrollByDistance=function(t,r){var n=this,i=ht(r)&&r>0?r:0;if(this._chartStore.startScroll(),i>0){var o=new Pg({duration:i});o.doFrame(function(s){var u=t*(s/i);n._chartStore.scroll(u)}),o.start()}else this._chartStore.scroll(t)},e.prototype.scrollToRealTime=function(t){var r=this._chartStore.getBarSpace().bar,n=this._chartStore.getLastBarRightSideDiffBarCount()-this._chartStore.getInitialOffsetRightDistance()/r,i=n*r;this.scrollByDistance(i,t)},e.prototype.scrollToDataIndex=function(t,r){var n=(this._chartStore.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-t))*this._chartStore.getBarSpace().bar;this.scrollByDistance(n,r)},e.prototype.scrollToTimestamp=function(t,r){var n=Ag(this.getDataList(),"timestamp",t);this.scrollToDataIndex(n,r)},e.prototype.zoomAtCoordinate=function(t,r,n){var i=this,o=ht(n)&&n>0?n:0,s=this._chartStore.getBarSpace().bar,u=s*t,c=u-s;if(o>0){var h=0,p=new Pg({duration:o});p.doFrame(function(g){var m=c*(g/o),b=(m-h)/i._chartStore.getBarSpace().bar*Dg;i._chartStore.zoom(b,r),h=m}),p.start()}else this._chartStore.zoom(c/s*Dg,r)},e.prototype.zoomAtDataIndex=function(t,r,n){var i=this._chartStore.dataIndexToCoordinate(r);this.zoomAtCoordinate(t,{x:i,y:0},n)},e.prototype.zoomAtTimestamp=function(t,r,n){var i=Ag(this.getDataList(),"timestamp",r);this.zoomAtDataIndex(t,i,n)},e.prototype.convertToPixel=function(t,r){var n=this,i,o=r??{},s=o.paneId,u=s===void 0?Vt.CANDLE:s,c=o.absolute,h=c===void 0?!1:c,p=[];if(u!==Vt.X_AXIS){var g=this.getDrawPaneById(u);if(g!==null){var m=g.getBounding(),b=[].concat(t),x=this._xAxisPane.getAxisComponent(),C=g.getAxisComponent();p=b.map(function(_){var k={},M=_.dataIndex;if(ht(_.timestamp)&&(M=n._chartStore.timestampToDataIndex(_.timestamp)),ht(M)&&(k.x=x.convertToPixel(M)),ht(_.value)){var L=C.convertToPixel(_.value);k.y=h?m.top+L:L}return k})}}return Wa(t)?p:(i=p[0])!==null&&i!==void 0?i:{}},e.prototype.convertFromPixel=function(t,r){var n=this,i,o=r??{},s=o.paneId,u=s===void 0?Vt.CANDLE:s,c=o.absolute,h=c===void 0?!1:c,p=[];if(u!==Vt.X_AXIS){var g=this.getDrawPaneById(u);if(g!==null){var m=g.getBounding(),b=[].concat(t),x=this._xAxisPane.getAxisComponent(),C=g.getAxisComponent();p=b.map(function(_){var k,M={};if(ht(_.x)){var L=x.convertFromPixel(_.x);M.dataIndex=L,M.timestamp=(k=n._chartStore.dataIndexToTimestamp(L))!==null&&k!==void 0?k:void 0}if(ht(_.y)){var D=h?_.y-m.top:_.y;M.value=C.convertFromPixel(D)}return M})}}return Wa(t)?p:(i=p[0])!==null&&i!==void 0?i:{}},e.prototype.executeAction=function(t,r){var n;switch(t){case"onCrosshairChange":{var i=Ye({},r);(n=i.paneId)!==null&&n!==void 0||(i.paneId=Vt.CANDLE),this._chartStore.setCrosshair(i,{notExecuteAction:!0});break}}},e.prototype.subscribeAction=function(t,r){this._chartStore.subscribeAction(t,r)},e.prototype.unsubscribeAction=function(t,r){this._chartStore.unsubscribeAction(t,r)},e.prototype.getConvertPictureUrl=function(t,r,n){var i=this,o=this._chartBounding,s=o.width,u=o.height,c=zs("canvas",{width:"".concat(s,"px"),height:"".concat(u,"px"),boxSizing:"border-box"}),h=c.getContext("2d"),p=Dl(c);c.width=s*p,c.height=u*p,h.scale(p,p),h.fillStyle=n??"#FFFFFF",h.fillRect(0,0,s,u);var g=t??!1;return this._drawPanes.forEach(function(m){var b=i._separatorPanes.get(m);if(we(b)){var x=b.getBounding();h.drawImage(b.getImage(g),x.left,x.top,x.width,x.height)}var C=m.getBounding();h.drawImage(m.getImage(g),0,C.top,s,C.height)}),c.toDataURL("image/".concat(r??"jpeg"))},e.prototype.resize=function(){this._cacheChartBounding(),this.layout({measureHeight:!0,measureWidth:!0,update:!0,buildYAxisTick:!0,forceBuildYAxisTick:!0})},e.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(t){t.destroy()}),this._drawPanes=[],this._separatorPanes.clear(),this._chartStore.destroy(),this._container.removeChild(this._chartContainer)},e})(),Fm=new Map,c4=1;function u4(e,t){var r=null;if(ur(e)?r=document.getElementById(e):r=e,r===null)return null;var n=Fm.get(r.id);if(we(n))return n;var i="k_line_chart_".concat(c4++);return n=new l4(r,t),n.id=i,r.setAttribute("k-line-chart-id",i),Fm.set(i,n),n}var vn={clone:Hd,merge:yn,isString:ur,isNumber:ht,isValid:we,isObject:oa,isArray:Wa,isFunction:vi,isBoolean:N0,formatValue:In,formatPrecision:ei,formatBigNumber:Xy,formatDate:jy,formatThousands:Yy,formatFoldDecimal:Zy,calcTextWidth:aa,getLinearSlopeIntercept:Xp,getLinearYFromSlopeIntercept:ev,getLinearYFromCoordinates:z0,checkCoordinateOnArc:u2,checkCoordinateOnCircle:o2,checkCoordinateOnLine:e2,checkCoordinateOnPolygon:a2,checkCoordinateOnRect:nv,checkCoordinateOnText:c2};const d4="指标",h4="主图指标",p4="副图指标",f4="自选",g4="设置",v4="重播",m4="菜单",y4="时区",b4="截屏",x4="全屏",w4="退出全屏",C4="保存",_4="确定",S4="取消",k4="MA(移动平均线)",M4="EMA(指数平滑移动平均线)",E4="SMA",T4="BOLL(布林线)",I4="BBI(多空指数)",L4="SAR(停损点指向指标)",P4="VOL(成交量)",A4="MACD(指数平滑异同移动平均线)",D4="KDJ(随机指标)",F4="RSI(相对强弱指标)",R4="BIAS(乖离率)",O4="BRAR(情绪指标)",N4="CCI(顺势指标)",z4="DMI(动向指标)",V4="CR(能量指标)",B4="PSY(心理线)",$4="DMA(平行线差指标)",W4="TRIX(三重指数平滑平均线)",H4="OBV(能量潮指标)",U4="VR(成交量变异率)",j4="WR(威廉指标)",X4="MTM(动量指标)",Y4="EMV(简易波动指标)",Z4="ROC(变动率指标)",K4="PVT(价量趋势指标)",q4="AO(动量震荡指标)",Q4="世界统一时间",G4="(UTC-10) 檀香山",J4="(UTC-8) 朱诺",e7="(UTC-7) 洛杉矶",t7="(UTC-5) 芝加哥",r7="(UTC-4) 多伦多",n7="(UTC-3) 圣保罗",i7="(UTC+1) 伦敦",o7="(UTC+2) 柏林",a7="(UTC+3) 巴林",s7="(UTC+4) 迪拜",l7="(UTC+5) 阿什哈巴德",c7="(UTC+6) 阿拉木图",u7="(UTC+7) 曼谷",d7="(UTC+8) 上海",h7="(UTC+9) 东京",p7="(UTC+10) 悉尼",f7="(UTC+12) 诺福克岛",g7="日",v7="周",m7="月",y7="年",b7="水平直线",x7="水平射线",w7="水平线段",C7="垂直直线",_7="垂直射线",S7="垂直线段",k7="直线",M7="射线",E7="线段",T7="箭头",I7="价格线",L7="价格通道线",P7="平行直线",A7="斐波那契回调直线",D7="斐波那契回调线段",F7="斐波那契圆环",R7="斐波那契螺旋",O7="斐波那契速度阻力扇",N7="斐波那契趋势扩展",z7="江恩箱",V7="矩形",B7="平行四边形",$7="圆",W7="三角形",H7="三浪",U7="五浪",j7="八浪",X7="任意浪",Y7="ABCD形态",Z7="XABCD形态",K7="弱磁模式",q7="强磁模式",Q7="商品搜索",G7="商品代码",J7="参数1",ex="参数2",tx="参数3",rx="参数4",nx="参数5",ix="周期",ox="标准差",ax="蜡烛图类型",sx="全实心",lx="全空心",cx="涨空心",ux="跌空心",dx="OHLC",hx="面积图",px="平金志",fx="最新价显示",gx="最高价显示",vx="最低价显示",mx="指标最新值显示",yx="价格轴类型",bx="线性轴",xx="百分比轴",wx="对数轴",Cx="倒置坐标",_x="网格线显示",Sx="恢复默认",kx="成交量",Mx="成交明细",Ex="时间",Tx="价格",Ix="数量",Lx="金额",Px="方向",Ax="买入",Dx="卖出",Fx="暂无成交数据",Rx="加载成交数据中...",Ox="成交数据加载失败",Nx="12小时制",zx="24小时制",Vx="最新成交",Bx={indicator:d4,main_indicator:h4,sub_indicator:p4,favourites:f4,setting:g4,replay:v4,menu:m4,timezone:y4,screenshot:b4,full_screen:x4,exit_full_screen:w4,save:C4,confirm:_4,cancel:S4,ma:k4,ema:M4,sma:E4,boll:T4,bbi:I4,sar:L4,vol:P4,macd:A4,kdj:D4,rsi:F4,bias:R4,brar:O4,cci:N4,dmi:z4,cr:V4,psy:B4,dma:$4,trix:W4,obv:H4,vr:U4,wr:j4,mtm:X4,emv:Y4,roc:Z4,pvt:K4,ao:q4,utc:Q4,honolulu:G4,juneau:J4,los_angeles:e7,chicago:t7,toronto:r7,sao_paulo:n7,london:i7,berlin:o7,bahrain:a7,dubai:s7,ashkhabad:l7,almaty:c7,bangkok:u7,shanghai:d7,tokyo:h7,sydney:p7,norfolk:f7,D:g7,"5D":"5日",W:v7,M:m7,"3M":"3月","6M":"6月",Y:y7,"5Y":"5年","Light Theme 1":"浅色主题1","Light Theme 2":"浅色主题2","Midnight Theme":"午夜主题","Dark Theme":"深色主题","Dark Gray Theme":"深灰色主题","Blue Theme":"蓝色主题","Red Theme":"红色主题","Green Theme":"绿色主题","Yellow Theme":"黄色主题","Pink Theme":"粉色主题",horizontal_straight_line:b7,horizontal_ray_line:x7,horizontal_segment:w7,vertical_straight_line:C7,vertical_ray_line:_7,vertical_segment:S7,straight_line:k7,ray_line:M7,segment:E7,arrow:T7,price_line:I7,price_channel_line:L7,parallel_straight_line:P7,fibonacci_line:A7,fibonacci_segment:D7,fibonacci_circle:F7,fibonacci_spiral:R7,fibonacci_speed_resistance_fan:O7,fibonacci_extension:N7,gann_box:z7,rect:V7,parallelogram:B7,circle:$7,triangle:W7,three_waves:H7,five_waves:U7,eight_waves:j7,any_waves:X7,abcd:Y7,xabcd:Z7,weak_magnet:K7,strong_magnet:q7,symbol_search:Q7,symbol_code:G7,params_1:J7,params_2:ex,params_3:tx,params_4:rx,params_5:nx,period:ix,standard_deviation:ox,candle_type:ax,candle_solid:sx,candle_stroke:lx,candle_up_stroke:cx,candle_down_stroke:ux,ohlc:dx,area:hx,heikin_ashi:px,last_price_show:fx,high_price_show:gx,low_price_show:vx,indicator_last_value_show:mx,price_axis_type:yx,normal:bx,percentage:xx,log:wx,reverse_coordinate:Cx,grid_show:_x,restore_default:Sx,volumeBars:kx,trades:Mx,trade_time:Ex,trade_price:Tx,trade_quantity:Ix,trade_amount:Lx,trade_side:Px,buy:Ax,sell:Dx,no_trades_available:Fx,loading_trades:Rx,trades_error:Ox,time_format_12h:Nx,time_format_24h:zx,latest_trades:Vx},$x="Indicator",Wx="Indicators",Hx="Main Indicator",Ux="Sub Indicator",jx="Favourites",Xx="Setting",Yx="Replay",Zx="Menu",Kx="Timezone",qx="Screenshot",Qx="Full Screen",Gx="Exit",Jx="Save",ew="Confirm",tw="Cancel",rw="MA - Moving Average",nw="EMA - Exponential Moving Average",iw="SMA - Simple Moving Average",ow="BOLL - Bolinger Bands",aw="BBI - Bull And Bearlndex",sw="SAR - Stop and Reverse",lw="VOL - Volume (sub)",cw="MACD - Moving Average Convergence / Divergence",uw="KDJ - KDJ Index",dw="RSI - Relative Strength Index",hw="BIAS - Bias Ratio",pw="BRAR - Emotional Index",fw="CCI - Commodity Channel Index",gw="DMI - Directional Movement Index (PDI, MDI, ADX, ADXR)",vw="PDI - Plus Directional Indicator",mw="MDI - Minus Directional Indicator",yw="ADX - Average Directional Index",bw="ADXR - Average Directional Index Rating",xw="CR - Energy Index",ww="PSY - Psychological Line",Cw="DMA - Different of Moving Average",_w="TRIX - Triple Exponentially Smoothed Moving Average",Sw="OBV - On Balance Volume",kw="VR - Volatility Volume Ratio",Mw="WR - Williams %R",Ew="MTM - Momentum Index",Tw="EMV - Ease of Movement Value",Iw="ROC - Price Rate of Change",Lw="PVT - Price and Volume Trend",Pw="AO - Awesome Oscillator",Aw="ADL - Accumulation/Distribution Line",Dw="MFI - Money Flow Index",Fw="VOL - Volume",Rw="WMA - Weighted Moving Average",Ow="WEM - Weighted Exponential Moving Average",Nw="QS - Qstick",zw="AROON - Aroon",Vw="ATR - Average True Range",Bw="TR - True Range",$w="WS - Wilder's Smoothing",Ww="UTC",Hw="(UTC-10) Honolulu",Uw="(UTC-8) Juneau",jw="(UTC-7) Los Angeles",Xw="(UTC-5) Chicago",Yw="(UTC-4) Toronto",Zw="(UTC-3) Sao Paulo",Kw="(UTC+1) London",qw="(UTC+2) Berlin",Qw="(UTC+3) Bahrain",Gw="(UTC+4) Dubai",Jw="(UTC+5) Ashkhabad",eC="(UTC+6) Almaty",tC="(UTC+7) Bangkok",rC="(UTC+8) Shanghai",nC="(UTC+9) Tokyo",iC="(UTC+10) Sydney",oC="(UTC+12) Norfolk",aC="D",sC="W",lC="M",cC="Y",uC="Horizontal Line",dC="Horizontal Ray",hC="Horizontal Segment",pC="Vertical Line",fC="Vertical Ray",gC="Vertical Segment",vC="Trend Line",mC="Ray",yC="Segment",bC="Arrow",xC="Price Line",wC="Price Channel Line",CC="Parallel Line",_C="Fibonacci Line",SC="Fibonacci Segment",kC="Fibonacci Circle",MC="Fibonacci Spiral",EC="Fibonacci Sector",TC="Fibonacci Extension",IC="Gann Box",LC="Rect",PC="Parallelogram",AC="Circle",DC="Triangle",FC="Three Waves",RC="Five Waves",OC="Eight Waves",NC="Any Waves",zC="ABCD Pattern",VC="XABCD Pattern",BC="Weak Magnet",$C="Strong Magnet",WC="Symbol Search",HC="Symbol Code",UC="Parameter 1",jC="Parameter 2",XC="Parameter 3",YC="Parameter 4",ZC="Parameter 5",KC="Period",qC="Standard Deviation",QC="Charts",GC="Object Tree",JC="Chart Properties",e_="Main Indicators",t_="Sub Indicators",r_="Drawings & Overlays",n_="No chart data available",i_="Symbol",o_="Exchange",a_="Type",s_="Candle Type",l_="Candle Solid",c_="Candle Stroke",u_="Candle Up Stroke",d_="Candle Down Stroke",h_="OHLC",p_="Area",f_="Heikin Ashi",g_="Renko",v_="Brick Size",m_="Show Last Price",y_="Show Highest Price",b_="Show Lowest Price",x_="Show indicator's last value",w_="Restore Defaults",C_="Standard",__="Current Open",S_="Previous Close",k_="Close",M_="Open",E_="High",T_="Low",I_="Auto",L_="Right",P_="Left",A_="Normal",D_="Percentage",F_="Log",R_="Show Grids",O_="Show Horizontal Grids",N_="Horizontal Grid Size",z_="Horizontal Grid Color",V_="Show Vertical Grids",B_="Vertical Grid Size",$_="Vertical Grid Color",W_="Grid Horizontal Style",H_="Grid Horizontal Dashed Value",U_="Grid Vertical Style",j_="Grid Vertical Dashed Value",X_="Pane Options",Y_="Fill Stroke",Z_="Always",K_="Stroke",q_="Stroke Fill",Q_="Ruler",G_="RR",J_="Enable Crosshair Sync",eS="Enable Time Sync",tS="Enable Symbol Sync",rS="Enable Interval Sync",nS="Enable Drawing Sync",iS="Multichart",oS="Paper Trading",aS="Balance",sS="Trade",lS="Positions",cS="Orders",uS="Trades",dS="Cash",hS="Market",pS="Limit",fS="Buy",gS="Sell",vS="Quantity",mS="Price",yS="Estimated Total",bS="No open positions",xS="Avg Price",wS="Current Price",CS="P&L",_S="Close Position",SS="No pending orders",kS="Status",MS="Cancel Order",ES="No trades executed",TS="Your trade history will appear here",IS="Clear All Trades",LS="Are you sure you want to clear all {count} trades? This action cannot be undone.",PS="Symbol/Side",AS="Qty",DS="Total",FS="Date/Time",RS="Cash Amount",OS="Operation",NS="Add Cash",zS="Remove Cash",VS="Pending buy orders",BS="Balance after removal",$S="Max safe removal",WS="⚠️ Insufficient funds for pending orders!",HS="Add",US="Remove",jS="🔄 Reset Trading Account",XS=`⚠️ RESET TRADING ACCOUNT ⚠️

This will permanently delete:
• {orders} pending orders
• {positions} open positions
• {trades} trade records
• Reset balance to $10,000

This action cannot be undone!

Are you sure you want to continue?`,YS=`✅ Trading account has been reset successfully!

• Balance: $10,000
• All orders, positions, and trades cleared`,ZS="Pending Orders Summary",KS="Pending Buy Orders",qS="Pending Sell Orders",QS="Available Cash",GS="Max Cash Removal",JS="Order Book",ek="Size",tk="Price",rk="Amount",nk="Bids",ik="Asks",ok="Select a symbol to view order book",ak="Loading order book...",sk="Amount",lk="Individual order quantities",ck="Cumulative",uk="Cumulative market depth",dk="Time",hk="Price",pk="Quantity",fk="Amount",gk="Side",vk="No trades available",mk="Loading trades...",yk="Error loading trades",bk="12-hour format",xk="24-hour format",wk="Latest Trades",Ck={indicator:$x,indicators:Wx,main_indicator:Hx,sub_indicator:Ux,favourites:jx,setting:Xx,replay:Yx,menu:Zx,timezone:Kx,screenshot:qx,full_screen:Qx,exit_full_screen:Gx,save:Jx,confirm:ew,cancel:tw,ma:rw,ema:nw,sma:iw,boll:ow,bbi:aw,sar:sw,vol:lw,macd:cw,kdj:uw,rsi:dw,bias:hw,brar:pw,cci:fw,dmi:gw,pdi:vw,mdi:mw,adx:yw,adxr:bw,cr:xw,psy:ww,dma:Cw,trix:_w,obv:Sw,vr:kw,wr:Mw,mtm:Ew,emv:Tw,roc:Iw,pvt:Lw,ao:Pw,adl:Aw,"force index":"FI - Force Index",mfi:Dw,"volume weighted average price":"VWAP - Volume Weighted Average Price",volumebars:Fw,"volume profile fixed range":"Volume Profile - Fixed Range",wma:Rw,wema:Ow,"chandelier exit":"CE -  Chandelier Exit","keltner channels":"KC - Keltner Channels","ichimoku cloud":"IC - Ichimoku Cloud","chaikin oscillator":"CO - Chaikin Oscillator","percentage price oscillator":"PPO - Percentage Price Oscillator","percentage volume oscillator":"PVO - Percentage Volume Oscillator",qstick:Nw,"absolute price oscillator":"APO - Absolute Price Oscillator","balance of power":"BOP - Balance of Power",aroon:zw,"double exponential moving average":"DEMA - Double Exponential Moving Average",atr:Vw,tr:Bw,"envelope (sma)":"ENV (SMA) - Envelope (SMA)","envelope (ema)":"ENV (EMA) - Envelope (EMA)",ws:$w,"volume price trend":"VPT - Volume Price Trend","negative volume index":"NVI - Negative Volume Index","money flow volume":"MFV - Money Flow Volume","money flow multiplier":"MFM - Money Flow Multiplier","average price":"AVP - Average Price","moving linear regression":"MLR - Moving Linear Regression","moving least square":"MLS - Moving Least Square",utc:Ww,honolulu:Hw,juneau:Uw,los_angeles:jw,chicago:Xw,toronto:Yw,sao_paulo:Zw,london:Kw,berlin:qw,bahrain:Qw,dubai:Gw,ashkhabad:Jw,almaty:eC,bangkok:tC,shanghai:rC,tokyo:nC,sydney:iC,norfolk:oC,D:aC,"5D":"5D",W:sC,M:lC,"3M":"3M","6M":"6M",Y:cC,"5Y":"5Y","Light Theme 1":"Light Theme 1","Light Theme 2":"Light Theme 2","Midnight Theme":"Midnight Theme","Dark Theme":"Dark Theme","Dark Gray Theme":"Dark Gray Theme","Blue Theme":"Blue Theme","Red Theme":"Red Theme","Green Theme":"Green Theme","Yellow Theme":"Yellow Theme","Pink Theme":"Pink Theme",horizontal_straight_line:uC,horizontal_ray_line:dC,horizontal_segment:hC,vertical_straight_line:pC,vertical_ray_line:fC,vertical_segment:gC,straight_line:vC,ray_line:mC,segment:yC,arrow:bC,price_line:xC,price_channel_line:wC,parallel_straight_line:CC,fibonacci_line:_C,fibonacci_segment:SC,fibonacci_circle:kC,fibonacci_spiral:MC,fibonacci_speed_resistance_fan:EC,fibonacci_extension:TC,gann_box:IC,rect:LC,parallelogram:PC,circle:AC,triangle:DC,three_waves:FC,five_waves:RC,eight_waves:OC,any_waves:NC,abcd:zC,xabcd:VC,weak_magnet:BC,strong_magnet:$C,symbol_search:WC,symbol_code:HC,params_1:UC,params_2:jC,params_3:XC,params_4:YC,params_5:ZC,period:KC,standard_deviation:qC,charts:QC,object_tree:GC,chart_properties:JC,main_indicators:e_,sub_indicators:t_,drawings_overlays:r_,no_chart_data_available:n_,symbol:i_,exchange:o_,type:a_,candle_type:s_,candle_solid:l_,candle_stroke:c_,candle_up_stroke:u_,candle_down_stroke:d_,ohlc:h_,area:p_,heikin_ashi:f_,renko:g_,brick_size:v_,last_price_show:m_,high_price_show:y_,low_price_show:b_,indicator_last_value_show:x_,restore_default:w_,standard:C_,"candle.bar.compareRule":"Candle Compare Rule","candle.bar.upColor":"Candle Up Color","candle.bar.downColor":"Candle Down Color","candle.bar.noChangeColor":"Candle No Change Color","candle.bar.upBorderColor":"Candle Up Border Color","candle.bar.downBorderColor":"Candle Down Border Color","candle.bar.noChangeBorderColor":"Candle No Change Border Color","candle.bar.upWickColor":"Candle Up Wick Color","candle.bar.downWickColor":"Candle Down Wick Color","candle.bar.noChangeWickColor":"Candle No Change Wick Color","candle.priceMark.show":"Show Price Mark","candle.priceMark.high.show":"Show High Price Mark","candle.priceMark.high.color":"High Price Mark Color","candle.priceMark.high.textOffset":"High Price Mark Text Offset","candle.priceMark.high.textSize":"High Price Mark Text Size","candle.priceMark.high.textFamily":"High Price Mark Text Family","candle.priceMark.high.textWeight":"High Price Mark Text Weight","candle.priceMark.low.show":"Show Low Price Mark","candle.priceMark.low.color":"Low Price Mark Color","candle.priceMark.low.textOffset":"Low Price Mark Text Offset","candle.priceMark.low.textSize":"Low Price Mark Text Size","candle.priceMark.low.textFamily":"Low Price Mark Text Family","candle.priceMark.low.textWeight":"Low Price Mark Text Weight","candle.priceMark.last.show":"Show Last Price Mark","candle.priceMark.last.compareRule":"Last Price Mark Compare Rule","candle.priceMark.last.upColor":"Last Price Mark Up Color","candle.priceMark.last.downColor":"Last Price Mark Down Color","candle.priceMark.last.noChangeColor":"Last Price Mark No Change Color","candle.priceMark.last.line.show":"Show Last Price Mark Line","candle.priceMark.last.line.style":"Last Price Mark Line Style","candle.priceMark.last.line.size":"Last Price Mark Line Size","candle.priceMark.last.line.dashedValue":"Last Price Mark Line Dashed Value","candle.priceMark.last.text.show":"Show Last Price Mark Text","candle.priceMark.last.text.style":"Last Price Mark Text Style","candle.priceMark.last.text.size":"Last Price Mark Text Size","candle.priceMark.last.text.color":"Last Price Mark Text Color",current_open:__,previous_close:S_,"candle.area.lineSize":"Area Line Size","candle.area.lineColor":"Area Line Color","candle.area.value":"Area Value","candle.area.smooth":"Area Smooth",close:k_,open:M_,high:E_,low:T_,"candle.area.point.show":"Show Area Point","candle.area.point.color":"Area Point Color","candle.area.point.radius":"Area Point Radius","candle.area.point.rippleColor":"Area Point Ripple Color","candle.area.point.rippleRadius":"Area Point Ripple Radius","candle.area.point.animation":"Area Point Animation","candle.renko.brick.size":"Renko Brick Size",auto:I_,"xAxis.size":"X-Axis Size","xAxis.tickText.family":"X-Axis Tick Text Family","xAxis.tickText.marginStart":"X-Axis Tick Text Margin Start","xAxis.tickText.marginEnd":"X-Axis Tick Text Margin End",right:L_,left:P_,normal:A_,percentage:D_,log:F_,"candle.tooltip.showRule":"Candle Tooltip","candle.tooltip.showType":"Candle Tooltip Type","candle.tooltip.rect.position":"Candle Tooltip Rect Position","candle.tooltip.rect.color":"Candle Tooltip Rect Color","candle.tooltip.rect.borderColor":"Candle Tooltip Rect Border Color","candle.tooltip.text.size":"Candle Tooltip Text Size","candle.tooltip.text.weight":"Candle Tooltip Text Weight","candle.tooltip.text.color":"Candle Tooltip Text Color","indicator.lastValueMark.show":"Show Last Value Mark","indicator.lastValueMark.text.show":"Show Last Value Mark Text","indicator.lastValueMark.text.style":"Last Value Mark Text Style","indicator.lastValueMark.text.size":"Last Value Mark Text Size","indicator.lastValueMark.text.weight":"Last Value Mark Text Weight","indicator.lastValueMark.text.color":"Last Value Mark Text Color","indicator.lastValueMark.text.borderStyle":"Last Value Mark Text Border Style","indicator.lastValueMark.text.borderColor":"Last Value Mark Text Border Color","indicator.lastValueMark.text.borderSize":"Last Value Mark Text Border Size","indicator.lastValueMark.text.borderDashedValue":"Last Value Mark Text Border Border Dashed Value","indicator.lastValueMark.text.paddingLeft":"Last Value Mark Text Border Padding Left","indicator.lastValueMark.text.paddingTop":"Last Value Mark Text Border Style Padding Top","indicator.lastValueMark.text.paddingRight":"Last Value Mark Text Border Padding Right","indicator.lastValueMark.text.paddingBottom":"Last Value Mark Text Border Padding Bottom","indicator.lastValueMark.text.borderRadius":"Last Value Mark Text Border Border Radius","indicator.tooltip.showRule":"Show Tooltip Rule","indicator.tooltip.showType":"Show Tooltip Type","indicator.tooltip.title.show":"Show Tooltip","indicator.tooltip.title.showName":"Show Tooltip Name","indicator.tooltip.title.showParams":"Show Tooltip Params","indicator.tooltip.title.size":"Tooltip Title Size","indicator.tooltip.title.weight":"Tooltip Title Weight","indicator.tooltip.title.color":"Tooltip Title Color","indicator.tooltip.title.marginLeft":"Tooltip Title Margin Left","indicator.tooltip.title.marginTop":"Tooltip Title Margin Top","indicator.tooltip.title.marginRight":"Tooltip Title Margin Right","indicator.tooltip.title.marginBottom":"Tooltip Title Margin Bottom","indicator.tooltip.offsetTop":"Tooltip Offset Top","indicator.tooltip.offsetLeft":"Tooltip Offset Left","indicator.tooltip.offsetBottom":"Tooltip Offset Right","indicator.tooltip.offsetRight":"Tooltip Offset Bottom","indicator.tooltip.text.size":"Tooltip Text Size","indicator.tooltip.text.weight":"Tooltip Text Weight","indicator.tooltip.text.color":"Tooltip Text Color","indicator.tooltip.text.marginLeft":"Tooltip Text Margin Left","indicator.tooltip.text.marginTop":"Tooltip Text Margin Top","indicator.tooltip.text.marginRight":"Tooltip Text Margin Right","indicator.tooltip.text.marginBottom":"Tooltip Text Margin Bottom","indicator.bars.style":"Indicator Bars Style","indicator.bars.borderStyle":"Indicator Bars Border Style","indicator.bars.borderSize":"Indicator Bars Border Size","indicator.bars.borderColor":"Indicator Bars Border Color","indicator.bars.borderDashedValue":"Indicator Bars Border Dashed Value","indicator.ohlc.upColor":"Indicator OHLC Up Color","indicator.ohlc.downColor":"Indicator OHLC Down Color","indicator.ohlc.noChangeColor":"Indicator OHLC No Change Color","indicator.lines.style":"Indicator Lines Style","indicator.lines.size":"Indicator Lines Size","indicator.lines.color":"Indicator Lines Color","indicator.lines.dashedValue":"Indicator Lines Dashed Value",grid_show:R_,grid_horizontal_show:O_,grid_horizontal_size:N_,grid_horizontal_color:z_,grid_vertical_show:V_,grid_vertical_size:B_,grid_vertical_color:$_,grid_horizontal_style:W_,grid_horizontal_dashedValue:H_,grid_vertical_style:U_,grid_vertical_dashedValue:j_,"xAxis.show":"Show X Axis","xAxis.axisLine.show":"Show X Axis Line","xAxis.axisLine.color":"X Axis Line Color","xAxis.axisLine.size":"X Axis Line Size","xAxis.tickText.show":"Show X Axis Tick Text","xAxis.tickText.size":"X Axis Tick Text Size","xAxis.tickText.weight":"X Axis Tick Text Weight","xAxis.tickText.color":"X Axis Tick Text Color","xAxis.tickLine.show":"Show X Axis Tick Line","xAxis.tickLine.size":"X Axis Tick Line Size","xAxis.tickLine.length":"X Axis Tick Line Length","xAxis.tickLine.color":"X Axis Tick Line Color","yAxis.size":"Y-Axis Size","yAxis.tickText.family":"Y-Axis Tick Text Family","yAxis.show":"Show Y Axis","yAxis.position":"Y Axis Position","yAxis.type":"Y Axis Type","yAxis.inside":"Y Axis Inside","yAxis.reverse":"Y Axis Reverse","yAxis.axisLine.show":"Show Y Axis Line","yAxis.axisLine.size":"Y Axis Line Size","yAxis.axisLine.color":"Y Axis Line Color","yAxis.tickText.show":"Show Y Axis Tick Text","yAxis.tickText.color":"Y Axis Tick Text Color","yAxis.tickText.size":"Y Axis Tick Text Size","yAxis.tickText.weight":"Y Axis Tick Text Weight","yAxis.tickText.marginStart":"Y Axis Tick Text Margin Start","yAxis.tickText.marginEnd":"Y Axis Tick Text Margin End","yAxis.tickLine.show":"Show Y Axis Tick Line","yAxis.tickLine.color":"Y Axis Tick Line Color","yAxis.tickLine.size":"Y Axis Tick Line Size","yAxis.tickLine.length":"Y Axis Tick Line Length","separator.size":"Sub Indicator Separator Size","separator.fill":"Sub Indicator Separator Fill","separator.activeBackgroundColor":"Sub Indicator Separator Color","crosshair.show":"Show Crosshair","crosshair.horizontal.show":"Show Horizontal Crosshair","crosshair.horizontal.line.show":"Show Horizontal Crosshair Line","crosshair.horizontal.line.style":"Horizontal Crosshair Line Style","crosshair.horizontal.line.size":"Horizontal Crosshair Line Size","crosshair.horizontal.line.color":"Horizontal Crosshair Line Color","crosshair.horizontal.line.dashedValue":"Horizontal Crosshair Line Dashed Value","crosshair.horizontal.text.show":"Show Horizontal Crosshair Text","crosshair.horizontal.text.style":"Horizontal Crosshair Text Style","crosshair.horizontal.text.size":"Horizontal Crosshair Text Size","crosshair.horizontal.text.weight":"Horizontal Crosshair Text Weight","crosshair.horizontal.text.color":"Horizontal Crosshair Text Color","crosshair.horizontal.text.backgroundColor":"Horizontal Crosshair Text Bg Color","crosshair.vertical.show":"Show Vertical Crosshair","crosshair.vertical.line.show":"Show Vertical Crosshair Line","crosshair.vertical.line.style":"Vertical Crosshair Line Style","crosshair.vertical.line.size":"Vertical Crosshair Line Size","crosshair.vertical.line.color":"Vertical Crosshair Line Color","crosshair.vertical.line.dashedValue":"Vertical Crosshair Line Dashed Value","pane.axis.name":"Axis Name","pane.axis.name.normal":"Normal","pane.axis.name.percentage":"Percentage","pane.axis.name.log":"Log","pane.axis.position":"Axis Position","pane.axis.inside":"Axis Inside","pane.axis.reverse":"Axis Reverse","pane.axis.scrollZoomEnabled":"Axis Scroll Zoom Enabled","pane.axis.gap.top":"Axis Gap Top","pane.axis.gap.bottom":"Axis Gap Bottom","pane.height":"Pane Height","pane.minHeight":"Pane Min Height","pane.dragEnabled":"Pane Drag Enabled","pane.state":"Pane State","pane.state.normal":"Normal","pane.state.maximize":"Maximize","pane.state.minimize":"Minimize",pane_options:X_,"crosshair.vertical.text.show":"Show Vertical Crosshair Text","crosshair.vertical.text.style":"Vertical Crosshair Text Style","crosshair.vertical.text.size":"Vertical Crosshair Text Size","crosshair.vertical.text.weight":"Vertical Crosshair Text Weight","crosshair.vertical.text.color":"Vertical Crosshair Text Color","crosshair.vertical.text.backgroundColor":"Vertical Crosshair Text Bg Color","overlay.point.color":"Point Color","overlay.point.borderColor":"Point Border Color","overlay.point.borderSize":"Point Border Size","overlay.point.activeColor":"Point Active Color","overlay.point.activeBorderColor":"Point Active Border Color","overlay.point.activeBorderSize":"Point Active Border Size","overlay.point.activeRadius":"Point Active Radius","overlay.point.radius":"Point Radius","overlay.line.style":"Line Style","overlay.line.smooth":"Line Smooth","overlay.line.size":"Line Size","overlay.line.color":"Line Color","overlay.line.dashedValue":"Line Dashed Value","overlay.rect.style":"Rect Style","sidebar.expand":"Expand sidebar","sidebar.collapse":"Collapse sidebar","overlay.rect.color":"Rect Color","overlay.rect.borderColor":"Rect Border Color","overlay.rect.borderSize":"Rect Border Size","overlay.rect.borderRadius":"Rect Border Radius","overlay.rect.borderStyle":"Rect Border Style","overlay.polygon.style":"Polygon Style","overlay.polygon.color":"Polygon Color","overlay.polygon.borderColor":"Polygon Border Color","overlay.polygon.borderStyle":"Polygon Border Style","overlay.polygon.borderSize":"Polygon Border Size","overlay.circle.style":"Circle Style","overlay.circle.color":"Circle Color","overlay.circle.borderColor":"Circle Border Color","overlay.circle.borderStyle":"Circle Border Style","overlay.circle.borderSize":"Circle Border Size","overlay.arc.style":"Arc Style","overlay.arc.size":"Arc Size","overlay.arc.color":"Arc Color","overlay.text.style":"Text Style","overlay.text.size":"Text Size","overlay.text.family":"Text Family","overlay.text.weight":"Text Weight","overlay.text.color":"Text Color","overlay.text.backgroundColor":"Text Background Color","overlay.text.borderColor":"Text Border Color","overlay.text.borderSize":"Text Border Size","overlay.text.borderStyle":"Text Border Style","overlay.text.borderDashedValue":"Text Border Dashed Value","overlay.text.borderRadius":"Text Border Radius","overlay.text.paddingLeft":"Text Padding Left","overlay.text.paddingRight":"Text Padding Right","overlay.text.paddingTop":"Text Padding Top","overlay.text.paddingBottom":"Text Padding Bottom",fill_stroke:Y_,always:Z_,stroke:K_,stroke_fill:q_,ruler:Q_,rr:G_,enable_crosshair_sync:J_,enable_time_sync:eS,enable_symbol_sync:tS,enable_interval_sync:rS,enable_drawing_sync:nS,multichart:iS,paper_trading:oS,balance:aS,trade:sS,positions:lS,orders:cS,trades:uS,cash:dS,market:hS,limit:pS,buy:fS,sell:gS,quantity:vS,price:mS,estimated_total:yS,no_open_positions:bS,avg_price:xS,current_price:wS,pnl:CS,close_position:_S,no_pending_orders:SS,status:kS,cancel_order:MS,no_trades_executed:ES,your_trade_history_will_appear_here:TS,clear_all_trades:IS,are_you_sure_clear_trades:LS,symbol_side:PS,qty:AS,total:DS,date_time:FS,cash_amount:RS,operation:OS,add_cash:NS,remove_cash:zS,pending_buy_orders:VS,balance_after_removal:BS,max_safe_removal:$S,insufficient_funds_warning:WS,add:HS,remove:US,reset_trading_account:jS,reset_account_confirmation:XS,reset_account_success:YS,pending_orders_summary:ZS,pending_buy_orders_summary:KS,pending_sell_orders_summary:qS,available_cash:QS,max_cash_removal:GS,order_book:JS,order_book_size:ek,order_book_price:tk,order_book_amount:rk,order_book_bids:nk,order_book_asks:ik,order_book_select_symbol:ok,order_book_loading:ak,order_book_amount_mode:sk,order_book_amount_description:lk,order_book_cumulative_mode:ck,order_book_cumulative_description:uk,trade_time:dk,trade_price:hk,trade_quantity:pk,trade_amount:fk,trade_side:gk,no_trades_available:vk,loading_trades:mk,trades_error:yk,time_format_12h:bk,time_format_24h:xk,latest_trades:wk},_k={"zh-CN":Bx,"en-US":Ck},I=(e,t)=>{var r;return((r=_k[t])==null?void 0:r[e])??e};function O0(e,t,r){const n=(e.x-t.x)*Math.cos(r)-(e.y-t.y)*Math.sin(r)+t.x,i=(e.x-t.x)*Math.sin(r)+(e.y-t.y)*Math.cos(r)+t.y;return{x:n,y:i}}function Fg(e,t){if(e.length>1){let r;return e[0].x===e[1].x&&e[0].y!==e[1].y?e[0].y<e[1].y?r={x:e[0].x,y:t.height}:r={x:e[0].x,y:0}:e[0].x>e[1].x?r={x:0,y:vn.getLinearYFromCoordinates(e[0],e[1],{x:0,y:e[0].y})}:r={x:t.width,y:vn.getLinearYFromCoordinates(e[0],e[1],{x:t.width,y:e[0].y})},{coordinates:[e[0],r]}}return[]}function S2(e,t){const r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.sqrt(r*r+n*n)}const Sk={name:"arrow",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{if(e.length>1){const t=e[1].x>e[0].x?0:1,r=vn.getLinearSlopeIntercept(e[0],e[1]);let n;r!=null?n=Math.atan(r[0])+Math.PI*t:e[1].y>e[0].y?n=Math.PI/2:n=Math.PI/2*3;const i=O0({x:e[1].x-8,y:e[1].y+4},e[1],n),o=O0({x:e[1].x-8,y:e[1].y-4},e[1],n);return[{type:"line",attrs:{coordinates:e}},{type:"line",ignoreEvent:!0,attrs:{coordinates:[i,e[1],o]}}]}return[]}},kk={name:"circle",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{circle:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>{if(e.length>1){const t=S2(e[0],e[1]);return{type:"circle",attrs:{...e[0],r:t},styles:{style:"stroke_fill"}}}return[]}},Mk={name:"rect",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>e.length>1?[{type:"polygon",attrs:{coordinates:[e[0],{x:e[1].x,y:e[0].y},e[1],{x:e[0].x,y:e[1].y}]},styles:{style:"stroke_fill"}}]:[]},Ek={name:"parallelogram",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>{if(e.length===2)return[{type:"line",ignoreEvent:!0,attrs:{coordinates:e}}];if(e.length===3){const t={x:e[0].x+(e[2].x-e[1].x),y:e[2].y};return[{type:"polygon",attrs:{coordinates:[e[0],e[1],e[2],t]},styles:{style:"stroke_fill"}}]}return[]},performEventPressedMove:({points:e,performPointIndex:t,performPoint:r})=>{t<2&&(e[0].price=r.price,e[1].price=r.price)},performEventMoveForDrawing:({currentStep:e,points:t,performPoint:r})=>{e===2&&(t[0].price=r.price)}},Tk={name:"triangle",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>[{type:"polygon",attrs:{coordinates:e},styles:{style:"stroke_fill"}}]},Ik={name:"fibonacciCircle",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{if(e.length>1){const t=Math.abs(e[0].x-e[1].x),r=Math.abs(e[0].y-e[1].y),n=Math.sqrt(t*t+r*r),i=[.236,.382,.5,.618,.786,1],o=[],s=[];return i.forEach(u=>{const c=n*u;o.push({...e[0],r:c}),s.push({x:e[0].x,y:e[0].y+c+6,text:`${(u*100).toFixed(1)}%`})}),[{type:"circle",attrs:o,styles:{style:"stroke"}},{type:"text",ignoreEvent:!0,attrs:s}]}return[]}},Lk={name:"fibonacciSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({chart:e,coordinates:t,overlay:r})=>{const n=[],i=[];if(t.length>1){const o=t[1].x>t[0].x?t[0].x:t[1].x,s=[1,.786,.618,.5,.382,.236,0],u=t[0].y-t[1].y,c=r.points,h=c[0].value-c[1].value;s.forEach(p=>{const g=t[1].y+u*p,m=(c[1].value+h*p).toFixed(e.getPrecision().price);n.push({coordinates:[{x:t[0].x,y:g},{x:t[1].x,y:g}]}),i.push({x:o,y:g,text:`${m} (${(p*100).toFixed(1)}%)`,baseline:"bottom"})})}return[{type:"line",attrs:n},{type:"text",ignoreEvent:!0,attrs:i}]}},Pk={name:"fibonacciSpiral",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e,bounding:t})=>{if(e.length>1){const r=S2(e[0],e[1])/Math.sqrt(24),n=e[1].x>e[0].x?0:1,i=vn.getLinearSlopeIntercept(e[0],e[1]);let o;i!=null?o=Math.atan(i[0])+Math.PI*n:e[1].y>e[0].y?o=Math.PI/2:o=Math.PI/2*3;const s=O0({x:e[0].x-r,y:e[0].y},e[0],o),u=O0({x:e[0].x-r,y:e[0].y-r},e[0],o),c=[{...s,r,startAngle:o,endAngle:o+Math.PI/2},{...u,r:r*2,startAngle:o+Math.PI/2,endAngle:o+Math.PI}];let h=e[0].x-r,p=e[0].y-r;for(let g=2;g<9;g++){const m=c[g-2].r+c[g-1].r;let b=0;switch(g%4){case 0:{b=o,h-=c[g-2].r;break}case 1:{b=o+Math.PI/2,p-=c[g-2].r;break}case 2:{b=o+Math.PI,h+=c[g-2].r;break}case 3:{b=o+Math.PI/2*3,p+=c[g-2].r;break}}const x=b+Math.PI/2,C=O0({x:h,y:p},e[0],o);c.push({...C,r:m,startAngle:b,endAngle:x})}return[{type:"arc",attrs:c},{type:"line",attrs:Fg(e,t)}]}return[]}},Ak={name:"fibonacciSpeedResistanceFan",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e,bounding:t})=>{const r=[];let n=[];const i=[];if(e.length>1){const o=e[1].x>e[0].x?-38:4,s=e[1].y>e[0].y?-2:20,u=e[1].x-e[0].x,c=e[1].y-e[0].y;[1,.75,.618,.5,.382,.25,0].forEach(h=>{const p=e[1].x-u*h,g=e[1].y-c*h;r.push({coordinates:[{x:p,y:e[0].y},{x:p,y:e[1].y}]}),r.push({coordinates:[{x:e[0].x,y:g},{x:e[1].x,y:g}]}),n=n.concat(Fg([e[0],{x:p,y:e[1].y}],t)),n=n.concat(Fg([e[0],{x:e[1].x,y:g}],t)),i.unshift({x:e[0].x+o,y:g+10,text:`${h.toFixed(3)}`}),i.unshift({x:p-18,y:e[0].y+s,text:`${h.toFixed(3)}`})})}return[{type:"line",attrs:r},{type:"line",attrs:n},{type:"text",ignoreEvent:!0,attrs:i}]}},Dk={name:"fibonacciExtension",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({chart:e,coordinates:t,overlay:r})=>{const n=[],i=[];if(t.length>2){const o=r.points,s=o[1].value-o[0].value,u=t[1].y-t[0].y,c=[0,.236,.382,.5,.618,.786,1],h=t[2].x>t[1].x?t[1].x:t[2].x;c.forEach(p=>{const g=t[2].y+u*p,m=(o[2].value+s*p).toFixed(e.getPrecision().price);n.push({coordinates:[{x:t[1].x,y:g},{x:t[2].x,y:g}]}),i.push({x:h,y:g,text:`${m} (${(p*100).toFixed(1)}%)`,baseline:"bottom"})})}return[{type:"line",attrs:{coordinates:t},styles:{style:"dashed"}},{type:"line",attrs:n},{type:"text",ignoreEvent:!0,attrs:i}]}},Fk={name:"gannBox",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e})=>{if(e.length>1){const t=(e[1].y-e[0].y)/4,r=e[1].x-e[0].x,n=[{coordinates:[e[0],{x:e[1].x,y:e[1].y-t}]},{coordinates:[e[0],{x:e[1].x,y:e[1].y-t*2}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[1].x,y:e[0].y+t}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[1].x,y:e[0].y+t*2}]},{coordinates:[{...e[0]},{x:e[0].x+r*.236,y:e[1].y}]},{coordinates:[{...e[0]},{x:e[0].x+r*.5,y:e[1].y}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[0].x+r*.236,y:e[0].y}]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[0].x+r*.5,y:e[0].y}]}],i=[{coordinates:[e[0],e[1]]},{coordinates:[{x:e[0].x,y:e[1].y},{x:e[1].x,y:e[0].y}]}];return[{type:"line",attrs:[{coordinates:[e[0],{x:e[1].x,y:e[0].y}]},{coordinates:[{x:e[1].x,y:e[0].y},e[1]]},{coordinates:[e[1],{x:e[0].x,y:e[1].y}]},{coordinates:[{x:e[0].x,y:e[1].y},e[0]]}]},{type:"polygon",ignoreEvent:!0,attrs:{coordinates:[e[0],{x:e[1].x,y:e[0].y},e[1],{x:e[0].x,y:e[1].y}]},styles:{style:"fill"}},{type:"line",attrs:n,styles:{style:"dashed"}},{type:"line",attrs:i}]}return[]}},Rk={name:"threeWaves",totalStep:5,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},Ok={name:"fiveWaves",totalStep:7,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},Nk={name:"eightWaves",totalStep:10,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},zk={name:"anyWaves",totalStep:Number.MAX_SAFE_INTEGER,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{const t=e.map((r,n)=>({...r,text:`(${n})`,baseline:"bottom"}));return[{type:"line",attrs:{coordinates:e}},{type:"text",ignoreEvent:!0,attrs:t}]}},Vk={name:"abcd",totalStep:5,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:({coordinates:e})=>{let t=[],r=[];const n=["A","B","C","D"],i=e.map((o,s)=>({...o,baseline:"bottom",text:`(${n[s]})`}));return e.length>2&&(t=[e[0],e[2]],e.length>3&&(r=[e[1],e[3]])),[{type:"line",attrs:{coordinates:e}},{type:"line",attrs:[{coordinates:t},{coordinates:r}],styles:{style:"dashed"}},{type:"text",ignoreEvent:!0,attrs:i}]}},Bk={name:"xabcd",totalStep:6,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{polygon:{color:"rgba(22, 119, 255, 0.15)"}},createPointFigures:({coordinates:e,overlay:t})=>{const r=[],n=[],i=["X","A","B","C","D"],o=e.map((s,u)=>({...s,baseline:"bottom",text:`(${i[u]})`}));return e.length>2&&(r.push({coordinates:[e[0],e[2]]}),n.push({coordinates:[e[0],e[1],e[2]]}),e.length>3&&(r.push({coordinates:[e[1],e[3]]}),e.length>4&&(r.push({coordinates:[e[2],e[4]]}),n.push({coordinates:[e[2],e[3],e[4]]})))),[{type:"line",attrs:{coordinates:e}},{type:"line",attrs:r,styles:{style:"dashed"}},{type:"polygon",ignoreEvent:!0,attrs:n},{type:"text",ignoreEvent:!0,attrs:o}]}},$k={name:"ruler",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,styles:{backgroundColor:"rgba(22, 119, 255, 0.25)",tipBackgroundColor:"#1677FF",lineColor:"#1677FF"},extendData:e=>{if(e.length<2)return[];const[t,r]=e,n=r.dataIndex-t.dataIndex,i=r.value-t.value,o=i/t.value*100,s=r.timestamp-t.timestamp,u=Math.floor(s/(1440*60*1e3)),c=Math.floor(s%(1440*60*1e3)/(3600*1e3)),h=Math.floor(s%(3600*1e3)/(60*1e3));let p="";return u>0?(p=`${u} day${u>1?"s":""}`,c>0&&(p+=`, ${c} hour${c>1?"s":""}`)):c>0?(p=`${c} hour${c>1?"s":""}`,h>0&&(p+=`, ${h} minute${h>1?"s":""}`)):p=`${h} minute${h>1?"s":""}`,[`${i.toFixed(2)} (${o.toFixed(2)}%)`,`Bars: ${n}, d: ${p}`]},createPointFigures:({coordinates:e,overlay:t,bounding:r})=>{var n,i,o,s;if(e.length>1){const u=e[0].x<e[1].x,c=e[0].y<e[1].y,h={x:Math.round((e[0].x+e[1].x)/2),y:Math.round((e[0].y+e[1].y)/2)},p=(n=t.styles)==null?void 0:n.backgroundColor,g=(i=t.styles)==null?void 0:i.tipBackgroundColor,m=(o=t.styles)==null?void 0:o.lineColor,b=((s=t.extendData)==null?void 0:s.call(t,t.points))??[],x=[{type:"polygon",attrs:{coordinates:[e[0],{x:e[1].x,y:e[0].y},e[1],{x:e[0].x,y:e[1].y}]},styles:{color:p}},{type:"line",attrs:{coordinates:[{x:e[0].x,y:h.y},{x:e[1].x,y:h.y}]},styles:{color:m}},{type:"line",attrs:{coordinates:[{x:h.x,y:e[0].y},{x:h.x,y:e[1].y}]},styles:{color:m}}];u?x.push({type:"line",attrs:{coordinates:[{x:e[1].x-6,y:h.y-4},{x:e[1].x,y:h.y},{x:e[1].x-6,y:h.y+4}]}}):x.push({type:"line",attrs:{coordinates:[{x:e[1].x+6,y:h.y-4},{x:e[1].x,y:h.y},{x:e[1].x+6,y:h.y+4}]}}),c?x.push({type:"line",attrs:{coordinates:[{x:h.x-4,y:e[1].y-6},{x:h.x,y:e[1].y},{x:h.x+4,y:e[1].y-6}]},styles:{color:m}}):x.push({type:"line",attrs:{coordinates:[{x:h.x-4,y:e[1].y+6},{x:h.x,y:e[1].y},{x:h.x+4,y:e[1].y+6}]},styles:{color:m}});const C=b.length;if(C>0){let _,k=0;const M=C*12+(C-1)*4+16;b.forEach(D=>{k=Math.max(vn.calcTextWidth(D),k)}),k+=24,c?e[1].y+8+M>r.height?_=r.height-M:_=e[1].y+8:e[1].y-8-M<0?_=0:_=e[1].y-8-M,x.push({type:"rect",attrs:{x:h.x-k/2,y:_,width:k,height:M},styles:{borderRadius:4,color:g}});let L=_+8;b.forEach(D=>{x.push({type:"text",attrs:{x:h.x,y:L,text:D,align:"center"},styles:{paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,backgroundColor:"none"}}),L+=16})}return x}return[]}};var As=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ap={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ap.exports;(function(e,t){(function(){var r,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",g=1,m=2,b=4,x=1,C=2,_=1,k=2,M=4,L=8,D=16,P=32,$=64,A=128,N=256,z=512,B=30,Q="...",ne=800,Z=16,J=1,ue=2,le=3,ae=1/0,te=9007199254740991,ve=17976931348623157e292,pe=NaN,j=4294967295,H=j-1,de=j>>>1,U=[["ary",A],["bind",_],["bindKey",k],["curry",L],["curryRight",D],["flip",z],["partial",P],["partialRight",$],["rearg",N]],fe="[object Arguments]",ce="[object Array]",Oe="[object AsyncFunction]",Ee="[object Boolean]",Fe="[object Date]",Ce="[object DOMException]",Te="[object Error]",et="[object Function]",Qe="[object GeneratorFunction]",it="[object Map]",He="[object Number]",ct="[object Null]",ut="[object Object]",Qt="[object Promise]",Gt="[object Proxy]",Mt="[object RegExp]",gt="[object Set]",Yt="[object String]",cn="[object Symbol]",xn="[object Undefined]",dr="[object WeakMap]",Rt="[object WeakSet]",Zt="[object ArrayBuffer]",nr="[object DataView]",Kr="[object Float32Array]",hr="[object Float64Array]",Br="[object Int8Array]",Et="[object Int16Array]",We="[object Int32Array]",_t="[object Uint8Array]",wt="[object Uint8ClampedArray]",St="[object Uint16Array]",Ct="[object Uint32Array]",Ut=/\b__p \+= '';/g,Kt=/\b(__p \+=) '' \+/g,mr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pr=/&(?:amp|lt|gt|quot|#39);/g,cr=/[&<>"']/g,ti=RegExp(pr.source),Hr=RegExp(cr.source),Ur=/<%-([\s\S]+?)%>/g,ri=/<%([\s\S]+?)%>/g,Pt=/<%=([\s\S]+?)%>/g,Pr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/,Ar=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wr=/[\\^$.*+?()[\]{}|]/g,fr=RegExp(wr.source),rn=/^\s+/,jr=/\s/,nn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wn=/\{\n\/\* \[wrapped with (.+)\] \*/,An=/,? & /,ji=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uo=/[()=,{}\[\]\/\s]/,Ya=/\\(\\)?/g,mi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,da=/\w*$/,$s=/^[-+]0x[0-9a-f]+$/i,ha=/^0b[01]+$/i,Za=/^\[object .+?Constructor\]$/,Ka=/^0o[0-7]+$/i,$l=/^(?:0|[1-9]\d*)$/,Wl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qa=/($^)/,Jc=/['\n\r\u2028\u2029\\]/g,yr="\\ud800-\\udfff",eu="\\u0300-\\u036f",Ws="\\ufe20-\\ufe2f",Hl="\\u20d0-\\u20ff",pa=eu+Ws+Hl,tu="\\u2700-\\u27bf",Hs="a-z\\xdf-\\xf6\\xf8-\\xff",Qa="\\xac\\xb1\\xd7\\xf7",ze="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ru="\\u2000-\\u206f",ni=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ul="A-Z\\xc0-\\xd6\\xd8-\\xde",jl="\\ufe0e\\ufe0f",Xl=Qa+ze+ru+ni,zo="['’]",Ga="["+yr+"]",Vo="["+Xl+"]",ho="["+pa+"]",Yl="\\d+",nu="["+tu+"]",Ja="["+Hs+"]",Us="[^"+yr+Xl+Yl+tu+Hs+Ul+"]",fa="\\ud83c[\\udffb-\\udfff]",ga="(?:"+ho+"|"+fa+")",Zl="[^"+yr+"]",va="(?:\\ud83c[\\udde6-\\uddff]){2}",qt="[\\ud800-\\udbff][\\udc00-\\udfff]",po="["+Ul+"]",js="\\u200d",es="(?:"+Ja+"|"+Us+")",Kl="(?:"+po+"|"+Us+")",Xs="(?:"+zo+"(?:d|ll|m|re|s|t|ve))?",Ys="(?:"+zo+"(?:D|LL|M|RE|S|T|VE))?",ts=ga+"?",ma="["+jl+"]?",Xi="(?:"+js+"(?:"+[Zl,va,qt].join("|")+")"+ma+ts+")*",Yi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Zi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bo=ma+ts+Xi,ya="(?:"+[nu,va,qt].join("|")+")"+Bo,Ki="(?:"+[Zl+ho+"?",ho,va,qt,Ga].join("|")+")",iu=RegExp(zo,"g"),ql=RegExp(ho,"g"),fo=RegExp(fa+"(?="+fa+")|"+Ki+Bo,"g"),ou=RegExp([po+"?"+Ja+"+"+Xs+"(?="+[Vo,po,"$"].join("|")+")",Kl+"+"+Ys+"(?="+[Vo,po+es,"$"].join("|")+")",po+"?"+es+"+"+Xs,po+"+"+Ys,Zi,Yi,Yl,ya].join("|"),"g"),Ql=RegExp("["+js+yr+pa+jl+"]"),rs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],au=-1,ir={};ir[Kr]=ir[hr]=ir[Br]=ir[Et]=ir[We]=ir[_t]=ir[wt]=ir[St]=ir[Ct]=!0,ir[fe]=ir[ce]=ir[Zt]=ir[Ee]=ir[nr]=ir[Fe]=ir[Te]=ir[et]=ir[it]=ir[He]=ir[ut]=ir[Mt]=ir[gt]=ir[Yt]=ir[dr]=!1;var Jt={};Jt[fe]=Jt[ce]=Jt[Zt]=Jt[nr]=Jt[Ee]=Jt[Fe]=Jt[Kr]=Jt[hr]=Jt[Br]=Jt[Et]=Jt[We]=Jt[it]=Jt[He]=Jt[ut]=Jt[Mt]=Jt[gt]=Jt[Yt]=Jt[cn]=Jt[_t]=Jt[wt]=Jt[St]=Jt[Ct]=!0,Jt[Te]=Jt[et]=Jt[dr]=!1;var Zs={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},su={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},of={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},af={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ah=parseFloat,lu=parseInt,cu=typeof As=="object"&&As&&As.Object===Object&&As,Y0=typeof self=="object"&&self&&self.Object===Object&&self,Dr=cu||Y0||Function("return this")(),Jl=t&&!t.nodeType&&t,go=Jl&&!0&&e&&!e.nodeType&&e,sh=go&&go.exports===Jl,Ks=sh&&cu.process,Un=(function(){try{var oe=go&&go.require&&go.require("util").types;return oe||Ks&&Ks.binding&&Ks.binding("util")}catch{}})(),lh=Un&&Un.isArrayBuffer,ii=Un&&Un.isDate,ns=Un&&Un.isMap,uu=Un&&Un.isRegExp,qs=Un&&Un.isSet,Z0=Un&&Un.isTypedArray;function jn(oe,_e,ye){switch(ye.length){case 0:return oe.call(_e);case 1:return oe.call(_e,ye[0]);case 2:return oe.call(_e,ye[0],ye[1]);case 3:return oe.call(_e,ye[0],ye[1],ye[2])}return oe.apply(_e,ye)}function ch(oe,_e,ye,je){for(var xt=-1,or=oe==null?0:oe.length;++xt<or;){var qr=oe[xt];_e(je,qr,ye(qr),oe)}return je}function Dn(oe,_e){for(var ye=-1,je=oe==null?0:oe.length;++ye<je&&_e(oe[ye],ye,oe)!==!1;);return oe}function du(oe,_e){for(var ye=oe==null?0:oe.length;ye--&&_e(oe[ye],ye,oe)!==!1;);return oe}function uh(oe,_e){for(var ye=-1,je=oe==null?0:oe.length;++ye<je;)if(!_e(oe[ye],ye,oe))return!1;return!0}function ba(oe,_e){for(var ye=-1,je=oe==null?0:oe.length,xt=0,or=[];++ye<je;){var qr=oe[ye];_e(qr,ye,oe)&&(or[xt++]=qr)}return or}function hu(oe,_e){var ye=oe==null?0:oe.length;return!!ye&&Qs(oe,_e,0)>-1}function dh(oe,_e,ye){for(var je=-1,xt=oe==null?0:oe.length;++je<xt;)if(ye(_e,oe[je]))return!0;return!1}function Cr(oe,_e){for(var ye=-1,je=oe==null?0:oe.length,xt=Array(je);++ye<je;)xt[ye]=_e(oe[ye],ye,oe);return xt}function xa(oe,_e){for(var ye=-1,je=_e.length,xt=oe.length;++ye<je;)oe[xt+ye]=_e[ye];return oe}function hh(oe,_e,ye,je){var xt=-1,or=oe==null?0:oe.length;for(je&&or&&(ye=oe[++xt]);++xt<or;)ye=_e(ye,oe[xt],xt,oe);return ye}function sf(oe,_e,ye,je){var xt=oe==null?0:oe.length;for(je&&xt&&(ye=oe[--xt]);xt--;)ye=_e(ye,oe[xt],xt,oe);return ye}function ph(oe,_e){for(var ye=-1,je=oe==null?0:oe.length;++ye<je;)if(_e(oe[ye],ye,oe))return!0;return!1}var lf=gh("length");function K0(oe){return oe.split("")}function cf(oe){return oe.match(ji)||[]}function q0(oe,_e,ye){var je;return ye(oe,function(xt,or,qr){if(_e(xt,or,qr))return je=or,!1}),je}function pu(oe,_e,ye,je){for(var xt=oe.length,or=ye+(je?1:-1);je?or--:++or<xt;)if(_e(oe[or],or,oe))return or;return-1}function Qs(oe,_e,ye){return _e===_e?vu(oe,_e,ye):pu(oe,Q0,ye)}function fh(oe,_e,ye,je){for(var xt=ye-1,or=oe.length;++xt<or;)if(je(oe[xt],_e))return xt;return-1}function Q0(oe){return oe!==oe}function G0(oe,_e){var ye=oe==null?0:oe.length;return ye?vh(oe,_e)/ye:pe}function gh(oe){return function(_e){return _e==null?r:_e[oe]}}function fu(oe){return function(_e){return oe==null?r:oe[_e]}}function J0(oe,_e,ye,je,xt){return xt(oe,function(or,qr,gr){ye=je?(je=!1,or):_e(ye,or,qr,gr)}),ye}function uf(oe,_e){var ye=oe.length;for(oe.sort(_e);ye--;)oe[ye]=oe[ye].value;return oe}function vh(oe,_e){for(var ye,je=-1,xt=oe.length;++je<xt;){var or=_e(oe[je]);or!==r&&(ye=ye===r?or:ye+or)}return ye}function mh(oe,_e){for(var ye=-1,je=Array(oe);++ye<oe;)je[ye]=_e(ye);return je}function df(oe,_e){return Cr(_e,function(ye){return[ye,oe[ye]]})}function e1(oe){return oe&&oe.slice(0,mu(oe)+1).replace(rn,"")}function yi(oe){return function(_e){return oe(_e)}}function ec(oe,_e){return Cr(_e,function(ye){return oe[ye]})}function $o(oe,_e){return oe.has(_e)}function t1(oe,_e){for(var ye=-1,je=oe.length;++ye<je&&Qs(_e,oe[ye],0)>-1;);return ye}function yh(oe,_e){for(var ye=oe.length;ye--&&Qs(_e,oe[ye],0)>-1;);return ye}function r1(oe,_e){for(var ye=oe.length,je=0;ye--;)oe[ye]===_e&&++je;return je}var n1=fu(Zs),i1=fu(su);function o1(oe){return"\\"+af[oe]}function Gs(oe,_e){return oe==null?r:oe[_e]}function Js(oe){return Ql.test(oe)}function hf(oe){return rs.test(oe)}function pf(oe){for(var _e,ye=[];!(_e=oe.next()).done;)ye.push(_e.value);return ye}function gu(oe){var _e=-1,ye=Array(oe.size);return oe.forEach(function(je,xt){ye[++_e]=[xt,je]}),ye}function bh(oe,_e){return function(ye){return oe(_e(ye))}}function Ti(oe,_e){for(var ye=-1,je=oe.length,xt=0,or=[];++ye<je;){var qr=oe[ye];(qr===_e||qr===p)&&(oe[ye]=p,or[xt++]=ye)}return or}function wa(oe){var _e=-1,ye=Array(oe.size);return oe.forEach(function(je){ye[++_e]=je}),ye}function ff(oe){var _e=-1,ye=Array(oe.size);return oe.forEach(function(je){ye[++_e]=[je,je]}),ye}function vu(oe,_e,ye){for(var je=ye-1,xt=oe.length;++je<xt;)if(oe[je]===_e)return je;return-1}function gf(oe,_e,ye){for(var je=ye+1;je--;)if(oe[je]===_e)return je;return je}function is(oe){return Js(oe)?s1(oe):lf(oe)}function bi(oe){return Js(oe)?l1(oe):K0(oe)}function mu(oe){for(var _e=oe.length;_e--&&jr.test(oe.charAt(_e)););return _e}var a1=fu(of);function s1(oe){for(var _e=fo.lastIndex=0;fo.test(oe);)++_e;return _e}function l1(oe){return oe.match(fo)||[]}function vf(oe){return oe.match(ou)||[]}var mf=function oe(_e){_e=_e==null?Dr:el.defaults(Dr.Object(),_e,el.pick(Dr,Gl));var ye=_e.Array,je=_e.Date,xt=_e.Error,or=_e.Function,qr=_e.Math,gr=_e.Object,tc=_e.RegExp,yf=_e.String,Ii=_e.TypeError,Wo=ye.prototype,xh=or.prototype,vo=gr.prototype,tl=_e["__core-js_shared__"],rc=xh.toString,ar=vo.hasOwnProperty,rl=0,yu=(function(){var d=/[^.]+$/.exec(tl&&tl.keys&&tl.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""})(),nc=vo.toString,bu=rc.call(gr),c1=Dr._,u1=tc("^"+rc.call(ar).replace(wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ic=sh?_e.Buffer:r,Ho=_e.Symbol,oc=_e.Uint8Array,wh=ic?ic.allocUnsafe:r,qi=bh(gr.getPrototypeOf,gr),xu=gr.create,wu=vo.propertyIsEnumerable,Cu=Wo.splice,d1=Ho?Ho.isConcatSpreadable:r,Uo=Ho?Ho.iterator:r,os=Ho?Ho.toStringTag:r,ac=(function(){try{var d=Aa(gr,"defineProperty");return d({},"",{}),d}catch{}})(),h1=_e.clearTimeout!==Dr.clearTimeout&&_e.clearTimeout,Mr=je&&je.now!==Dr.Date.now&&je.now,Ch=_e.setTimeout!==Dr.setTimeout&&_e.setTimeout,as=qr.ceil,Ca=qr.floor,_u=gr.getOwnPropertySymbols,_h=ic?ic.isBuffer:r,nl=_e.isFinite,Su=Wo.join,il=bh(gr.keys,gr),Qr=qr.max,Fn=qr.min,bf=je.now,p1=_e.parseInt,sc=qr.random,ku=Wo.reverse,lc=Aa(_e,"DataView"),ss=Aa(_e,"Map"),cc=Aa(_e,"Promise"),_a=Aa(_e,"Set"),uc=Aa(_e,"WeakMap"),ol=Aa(gr,"create"),Mu=uc&&new uc,al={},Sh=Da(lc),Sa=Da(ss),f1=Da(cc),sl=Da(_a),mo=Da(uc),ka=Ho?Ho.prototype:r,xi=ka?ka.valueOf:r,Eu=ka?ka.toString:r;function V(d){if(Jr(d)&&!It(d)&&!(d instanceof Tt)){if(d instanceof Rn)return d;if(ar.call(d,"__wrapped__"))return W1(d)}return new Rn(d)}var ll=(function(){function d(){}return function(f){if(!Zr(f))return{};if(xu)return xu(f);d.prototype=f;var w=new d;return d.prototype=r,w}})();function yo(){}function Rn(d,f){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=r}V.templateSettings={escape:Ur,evaluate:ri,interpolate:Pt,variable:"",imports:{_:V}},V.prototype=yo.prototype,V.prototype.constructor=V,Rn.prototype=ll(yo.prototype),Rn.prototype.constructor=Rn;function Tt(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function Tu(){var d=new Tt(this.__wrapped__);return d.__actions__=Yn(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Yn(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Yn(this.__views__),d}function kh(){if(this.__filtered__){var d=new Tt(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function cl(){var d=this.__wrapped__.value(),f=this.__dir__,w=It(d),T=f<0,R=w?d.length:0,W=Jh(0,R,this.__views__),G=W.start,re=W.end,se=re-G,ke=T?re:G-1,Me=this.__iteratees__,Re=Me.length,Ue=0,at=Fn(se,this.__takeCount__);if(!w||!T&&R==se&&at==se)return ml(d,this.__actions__);var yt=[];e:for(;se--&&Ue<at;){ke+=f;for(var zt=-1,bt=d[ke];++zt<Re;){var jt=Me[zt],tr=jt.iteratee,ao=jt.type,ki=tr(bt);if(ao==ue)bt=ki;else if(!ki){if(ao==J)continue e;break e}}yt[Ue++]=bt}return yt}Tt.prototype=ll(yo.prototype),Tt.prototype.constructor=Tt;function oi(d){var f=-1,w=d==null?0:d.length;for(this.clear();++f<w;){var T=d[f];this.set(T[0],T[1])}}function Er(){this.__data__=ol?ol(null):{},this.size=0}function _r(d){var f=this.has(d)&&delete this.__data__[d];return this.size-=f?1:0,f}function Ma(d){var f=this.__data__;if(ol){var w=f[d];return w===c?r:w}return ar.call(f,d)?f[d]:r}function On(d){var f=this.__data__;return ol?f[d]!==r:ar.call(f,d)}function ai(d,f){var w=this.__data__;return this.size+=this.has(d)?0:1,w[d]=ol&&f===r?c:f,this}oi.prototype.clear=Er,oi.prototype.delete=_r,oi.prototype.get=Ma,oi.prototype.has=On,oi.prototype.set=ai;function Xn(d){var f=-1,w=d==null?0:d.length;for(this.clear();++f<w;){var T=d[f];this.set(T[0],T[1])}}function ul(){this.__data__=[],this.size=0}function si(d){var f=this.__data__,w=zn(f,d);if(w<0)return!1;var T=f.length-1;return w==T?f.pop():Cu.call(f,w,1),--this.size,!0}function Iu(d){var f=this.__data__,w=zn(f,d);return w<0?r:f[w][1]}function g1(d){return zn(this.__data__,d)>-1}function v1(d,f){var w=this.__data__,T=zn(w,d);return T<0?(++this.size,w.push([d,f])):w[T][1]=f,this}Xn.prototype.clear=ul,Xn.prototype.delete=si,Xn.prototype.get=Iu,Xn.prototype.has=g1,Xn.prototype.set=v1;function Li(d){var f=-1,w=d==null?0:d.length;for(this.clear();++f<w;){var T=d[f];this.set(T[0],T[1])}}function m1(){this.size=0,this.__data__={hash:new oi,map:new(ss||Xn),string:new oi}}function jo(d){var f=Mc(this,d).delete(d);return this.size-=f?1:0,f}function Lu(d){return Mc(this,d).get(d)}function Mh(d){return Mc(this,d).has(d)}function y1(d,f){var w=Mc(this,d),T=w.size;return w.set(d,f),this.size+=w.size==T?0:1,this}Li.prototype.clear=m1,Li.prototype.delete=jo,Li.prototype.get=Lu,Li.prototype.has=Mh,Li.prototype.set=y1;function ls(d){var f=-1,w=d==null?0:d.length;for(this.__data__=new Li;++f<w;)this.add(d[f])}function Ea(d){return this.__data__.set(d,c),this}function dl(d){return this.__data__.has(d)}ls.prototype.add=ls.prototype.push=Ea,ls.prototype.has=dl;function Nn(d){var f=this.__data__=new Xn(d);this.size=f.size}function Pu(){this.__data__=new Xn,this.size=0}function Au(d){var f=this.__data__,w=f.delete(d);return this.size=f.size,w}function Pi(d){return this.__data__.get(d)}function Ai(d){return this.__data__.has(d)}function cs(d,f){var w=this.__data__;if(w instanceof Xn){var T=w.__data__;if(!ss||T.length<i-1)return T.push([d,f]),this.size=++w.size,this;w=this.__data__=new Li(T)}return w.set(d,f),this.size=w.size,this}Nn.prototype.clear=Pu,Nn.prototype.delete=Au,Nn.prototype.get=Pi,Nn.prototype.has=Ai,Nn.prototype.set=cs;function bo(d,f){var w=It(d),T=!w&&zc(d),R=!w&&!T&&El(d),W=!w&&!T&&!R&&wd(d),G=w||T||R||W,re=G?mh(d.length,yf):[],se=re.length;for(var ke in d)(f||ar.call(d,ke))&&!(G&&(ke=="length"||R&&(ke=="offset"||ke=="parent")||W&&(ke=="buffer"||ke=="byteLength"||ke=="byteOffset")||Rr(ke,se)))&&re.push(ke);return re}function xo(d){var f=d.length;return f?d[gl(0,f-1)]:r}function us(d,f){return id(Yn(d),Xo(f,0,d.length))}function b1(d){return id(Yn(d))}function dc(d,f,w){(w!==r&&!ra(d[f],w)||w===r&&!(f in d))&&wo(d,f,w)}function ds(d,f,w){var T=d[f];(!(ar.call(d,f)&&ra(T,w))||w===r&&!(f in d))&&wo(d,f,w)}function zn(d,f){for(var w=d.length;w--;)if(ra(d[w][0],f))return w;return-1}function wi(d,f,w,T){return _o(d,function(R,W,G){f(T,R,w(R),G)}),T}function Tr(d,f){return d&&Gi(f,$n(f),d)}function Qi(d,f){return d&&Gi(f,$i(f),d)}function wo(d,f,w){f=="__proto__"&&ac?ac(d,f,{configurable:!0,enumerable:!0,value:w,writable:!0}):d[f]=w}function Du(d,f){for(var w=-1,T=f.length,R=ye(T),W=d==null;++w<T;)R[w]=W?r:Hf(d,f[w]);return R}function Xo(d,f,w){return d===d&&(w!==r&&(d=d<=w?d:w),f!==r&&(d=d>=f?d:f)),d}function li(d,f,w,T,R,W){var G,re=f&g,se=f&m,ke=f&b;if(w&&(G=R?w(d,T,R,W):w(d)),G!==r)return G;if(!Zr(d))return d;var Me=It(d);if(Me){if(G=Tc(d),!re)return Yn(d,G)}else{var Re=Sn(d),Ue=Re==et||Re==Qe;if(El(d))return $h(d,re);if(Re==ut||Re==fe||Ue&&!R){if(G=se||Ue?{}:kn(d),!re)return se?wf(d,Qi(G,d)):Xu(d,Tr(G,d))}else{if(!Jt[Re])return R?d:{};G=Cf(d,Re,re)}}W||(W=new Nn);var at=W.get(d);if(at)return at;W.set(d,G),jv(d)?d.forEach(function(bt){G.add(li(bt,f,w,bt,d,W))}):Hv(d)&&d.forEach(function(bt,jt){G.set(jt,li(bt,f,w,jt,d,W))});var yt=ke?se?kc:Sc:se?$i:$n,zt=Me?r:yt(d);return Dn(zt||d,function(bt,jt){zt&&(jt=bt,bt=d[jt]),ds(G,jt,li(bt,f,w,jt,d,W))}),G}function x1(d){var f=$n(d);return function(w){return hc(w,d,f)}}function hc(d,f,w){var T=w.length;if(d==null)return!T;for(d=gr(d);T--;){var R=w[T],W=f[R],G=d[R];if(G===r&&!(R in d)||!W(G))return!1}return!0}function Eh(d,f,w){if(typeof d!="function")throw new Ii(s);return Sl(function(){d.apply(r,w)},f)}function Co(d,f,w,T){var R=-1,W=hu,G=!0,re=d.length,se=[],ke=f.length;if(!re)return se;w&&(f=Cr(f,yi(w))),T?(W=dh,G=!1):f.length>=i&&(W=$o,G=!1,f=new ls(f));e:for(;++R<re;){var Me=d[R],Re=w==null?Me:w(Me);if(Me=T||Me!==0?Me:0,G&&Re===Re){for(var Ue=ke;Ue--;)if(f[Ue]===Re)continue e;se.push(Me)}else W(f,Re,T)||se.push(Me)}return se}var _o=Ni(Ci),w1=Ni(Ta,!0);function pc(d,f){var w=!0;return _o(d,function(T,R,W){return w=!!f(T,R,W),w}),w}function hs(d,f,w){for(var T=-1,R=d.length;++T<R;){var W=d[T],G=f(W);if(G!=null&&(re===r?G===G&&!oo(G):w(G,re)))var re=G,se=W}return se}function C1(d,f,w,T){var R=d.length;for(w=Nt(w),w<0&&(w=-w>R?0:R+w),T=T===r||T>R?R:Nt(T),T<0&&(T+=R),T=w>T?0:Yv(T);w<T;)d[w++]=f;return d}function Th(d,f){var w=[];return _o(d,function(T,R,W){f(T,R,W)&&w.push(T)}),w}function $r(d,f,w,T,R){var W=-1,G=d.length;for(w||(w=td),R||(R=[]);++W<G;){var re=d[W];f>0&&w(re)?f>1?$r(re,f-1,w,T,R):xa(R,re):T||(R[R.length]=re)}return R}var Fu=Zu(),fc=Zu(!0);function Ci(d,f){return d&&Fu(d,f,$n)}function Ta(d,f){return d&&fc(d,f,$n)}function hl(d,f){return ba(f,function(w){return ks(d[w])})}function Yo(d,f){f=Mo(f,d);for(var w=0,T=f.length;d!=null&&w<T;)d=d[ro(f[w++])];return w&&w==T?d:r}function Ru(d,f,w){var T=f(d);return It(d)?T:xa(T,w(d))}function Cn(d){return d==null?d===r?xn:ct:os&&os in gr(d)?ed(d):t0(d)}function Ia(d,f){return d>f}function Di(d,f){return d!=null&&ar.call(d,f)}function ps(d,f){return d!=null&&f in gr(d)}function Ih(d,f,w){return d>=Fn(f,w)&&d<Qr(f,w)}function Ou(d,f,w){for(var T=w?dh:hu,R=d[0].length,W=d.length,G=W,re=ye(W),se=1/0,ke=[];G--;){var Me=d[G];G&&f&&(Me=Cr(Me,yi(f))),se=Fn(Me.length,se),re[G]=!w&&(f||R>=120&&Me.length>=120)?new ls(G&&Me):r}Me=d[0];var Re=-1,Ue=re[0];e:for(;++Re<R&&ke.length<se;){var at=Me[Re],yt=f?f(at):at;if(at=w||at!==0?at:0,!(Ue?$o(Ue,yt):T(ke,yt,w))){for(G=W;--G;){var zt=re[G];if(!(zt?$o(zt,yt):T(d[G],yt,w)))continue e}Ue&&Ue.push(yt),ke.push(at)}}return ke}function Zo(d,f,w,T){return Ci(d,function(R,W,G){f(T,w(R),W,G)}),T}function Fi(d,f,w){f=Mo(f,d),d=un(d,f);var T=d==null?d:d[ro(qn(f))];return T==null?r:jn(T,d,w)}function Nu(d){return Jr(d)&&Cn(d)==fe}function _1(d){return Jr(d)&&Cn(d)==Zt}function Ko(d){return Jr(d)&&Cn(d)==Fe}function Ri(d,f,w,T,R){return d===f?!0:d==null||f==null||!Jr(d)&&!Jr(f)?d!==d&&f!==f:zu(d,f,w,T,Ri,R)}function zu(d,f,w,T,R,W){var G=It(d),re=It(f),se=G?ce:Sn(d),ke=re?ce:Sn(f);se=se==fe?ut:se,ke=ke==fe?ut:ke;var Me=se==ut,Re=ke==ut,Ue=se==ke;if(Ue&&El(d)){if(!El(f))return!1;G=!0,Me=!1}if(Ue&&!Me)return W||(W=new Nn),G||wd(d)?Qh(d,f,w,T,R,W):Gh(d,f,se,w,T,R,W);if(!(w&x)){var at=Me&&ar.call(d,"__wrapped__"),yt=Re&&ar.call(f,"__wrapped__");if(at||yt){var zt=at?d.value():d,bt=yt?f.value():f;return W||(W=new Nn),R(zt,bt,w,T,W)}}return Ue?(W||(W=new Nn),F1(d,f,w,T,R,W)):!1}function S1(d){return Jr(d)&&Sn(d)==it}function pl(d,f,w,T){var R=w.length,W=R,G=!T;if(d==null)return!W;for(d=gr(d);R--;){var re=w[R];if(G&&re[2]?re[1]!==d[re[0]]:!(re[0]in d))return!1}for(;++R<W;){re=w[R];var se=re[0],ke=d[se],Me=re[1];if(G&&re[2]){if(ke===r&&!(se in d))return!1}else{var Re=new Nn;if(T)var Ue=T(ke,Me,se,d,f,Re);if(!(Ue===r?Ri(Me,ke,x|C,T,Re):Ue))return!1}}return!0}function Lh(d){if(!Zr(d)||N1(d))return!1;var f=ks(d)?u1:Za;return f.test(Da(d))}function gc(d){return Jr(d)&&Cn(d)==Mt}function So(d){return Jr(d)&&Sn(d)==gt}function vc(d){return Jr(d)&&rp(d.length)&&!!ir[Cn(d)]}function fl(d){return typeof d=="function"?d:d==null?Wi:typeof d=="object"?It(d)?Fr(d[0],d[1]):Vu(d):im(d)}function qo(d){if(!ea(d))return il(d);var f=[];for(var w in gr(d))ar.call(d,w)&&w!="constructor"&&f.push(w);return f}function Ph(d){if(!Zr(d))return B1(d);var f=ea(d),w=[];for(var T in d)T=="constructor"&&(f||!ar.call(d,T))||w.push(T);return w}function La(d,f){return d<f}function Ah(d,f){var w=-1,T=Bi(d)?ye(d.length):[];return _o(d,function(R,W,G){T[++w]=f(R,W,G)}),T}function Vu(d){var f=Ec(d);return f.length==1&&f[0][2]?rd(f[0][0],f[0][1]):function(w){return w===d||pl(w,d,f)}}function Fr(d,f){return Ke(d)&&Lc(f)?rd(ro(d),f):function(w){var T=Hf(w,d);return T===r&&T===f?Uf(w,d):Ri(f,T,x|C)}}function fs(d,f,w,T,R){d!==f&&Fu(f,function(W,G){if(R||(R=new Nn),Zr(W))Dh(d,f,G,w,fs,T,R);else{var re=T?T(Io(d,G),W,G+"",d,f,R):r;re===r&&(re=W),dc(d,G,re)}},$i)}function Dh(d,f,w,T,R,W,G){var re=Io(d,w),se=Io(f,w),ke=G.get(se);if(ke){dc(d,w,ke);return}var Me=W?W(re,se,w+"",d,f,G):r,Re=Me===r;if(Re){var Ue=It(se),at=!Ue&&El(se),yt=!Ue&&!at&&wd(se);Me=se,Ue||at||yt?It(re)?Me=re:sn(re)?Me=Yn(re):at?(Re=!1,Me=$h(se,!0)):yt?(Re=!1,Me=I1(se,!0)):Me=[]:b0(se)||zc(se)?(Me=re,zc(re)?Me=Zv(re):(!Zr(re)||ks(re))&&(Me=kn(se))):Re=!1}Re&&(G.set(se,Me),R(Me,se,T,W,G),G.delete(se)),dc(d,w,Me)}function Bu(d,f){var w=d.length;if(w)return f+=f<0?w:0,Rr(f,w)?d[f]:r}function mc(d,f,w){f.length?f=Cr(f,function(W){return It(W)?function(G){return Yo(G,W.length===1?W[0]:W)}:W}):f=[Wi];var T=-1;f=Cr(f,yi(pt()));var R=Ah(d,function(W,G,re){var se=Cr(f,function(ke){return ke(W)});return{criteria:se,index:++T,value:W}});return uf(R,function(W,G){return xf(W,G,w)})}function Fh(d,f){return Pa(d,f,function(w,T){return Uf(d,T)})}function Pa(d,f,w){for(var T=-1,R=f.length,W={};++T<R;){var G=f[T],re=Yo(d,G);w(re,G)&&vs(W,Mo(G,d),re)}return W}function zr(d){return function(f){return Yo(f,d)}}function Xr(d,f,w,T){var R=T?fh:Qs,W=-1,G=f.length,re=d;for(d===f&&(f=Yn(f)),w&&(re=Cr(d,yi(w)));++W<G;)for(var se=0,ke=f[W],Me=w?w(ke):ke;(se=R(re,Me,se,T))>-1;)re!==d&&Cu.call(re,se,1),Cu.call(d,se,1);return d}function on(d,f){for(var w=d?f.length:0,T=w-1;w--;){var R=f[w];if(w==T||R!==W){var W=R;Rr(R)?Cu.call(d,R,1):Hu(d,R)}}return d}function gl(d,f){return d+Ca(sc()*(f-d+1))}function yc(d,f,w,T){for(var R=-1,W=Qr(as((f-d)/(w||1)),0),G=ye(W);W--;)G[T?W:++R]=d,d+=w;return G}function gs(d,f){var w="";if(!d||f<1||f>te)return w;do f%2&&(w+=d),f=Ca(f/2),f&&(d+=d);while(f);return w}function Ot(d,f){return _i(nd(d,f,Wi),d+"")}function Vn(d){return xo(Cd(d))}function Rh(d,f){var w=Cd(d);return id(w,Xo(f,0,w.length))}function vs(d,f,w,T){if(!Zr(d))return d;f=Mo(f,d);for(var R=-1,W=f.length,G=W-1,re=d;re!=null&&++R<W;){var se=ro(f[R]),ke=w;if(se==="__proto__"||se==="constructor"||se==="prototype")return d;if(R!=G){var Me=re[se];ke=T?T(Me,se,re):r,ke===r&&(ke=Zr(Me)?Me:Rr(f[R+1])?[]:{})}ds(re,se,ke),re=re[se]}return d}var $u=Mu?function(d,f){return Mu.set(d,f),d}:Wi,ko=ac?function(d,f){return ac(d,"toString",{configurable:!0,enumerable:!1,value:Xf(f),writable:!0})}:Wi;function Oi(d){return id(Cd(d))}function Bn(d,f,w){var T=-1,R=d.length;f<0&&(f=-f>R?0:R+f),w=w>R?R:w,w<0&&(w+=R),R=f>w?0:w-f>>>0,f>>>=0;for(var W=ye(R);++T<R;)W[T]=d[T+f];return W}function Oh(d,f){var w;return _o(d,function(T,R,W){return w=f(T,R,W),!w}),!!w}function vl(d,f,w){var T=0,R=d==null?T:d.length;if(typeof f=="number"&&f===f&&R<=de){for(;T<R;){var W=T+R>>>1,G=d[W];G!==null&&!oo(G)&&(w?G<=f:G<f)?T=W+1:R=W}return R}return Wu(d,f,Wi,w)}function Wu(d,f,w,T){var R=0,W=d==null?0:d.length;if(W===0)return 0;f=w(f);for(var G=f!==f,re=f===null,se=oo(f),ke=f===r;R<W;){var Me=Ca((R+W)/2),Re=w(d[Me]),Ue=Re!==r,at=Re===null,yt=Re===Re,zt=oo(Re);if(G)var bt=T||yt;else ke?bt=yt&&(T||Ue):re?bt=yt&&Ue&&(T||!at):se?bt=yt&&Ue&&!at&&(T||!zt):at||zt?bt=!1:bt=T?Re<=f:Re<f;bt?R=Me+1:W=Me}return Fn(W,H)}function Nh(d,f){for(var w=-1,T=d.length,R=0,W=[];++w<T;){var G=d[w],re=f?f(G):G;if(!w||!ra(re,se)){var se=re;W[R++]=G===0?0:G}}return W}function zh(d){return typeof d=="number"?d:oo(d)?pe:+d}function ci(d){if(typeof d=="string")return d;if(It(d))return Cr(d,ci)+"";if(oo(d))return Eu?Eu.call(d):"";var f=d+"";return f=="0"&&1/d==-ae?"-0":f}function Qo(d,f,w){var T=-1,R=hu,W=d.length,G=!0,re=[],se=re;if(w)G=!1,R=dh;else if(W>=i){var ke=f?null:D1(d);if(ke)return wa(ke);G=!1,R=$o,se=new ls}else se=f?[]:re;e:for(;++T<W;){var Me=d[T],Re=f?f(Me):Me;if(Me=w||Me!==0?Me:0,G&&Re===Re){for(var Ue=se.length;Ue--;)if(se[Ue]===Re)continue e;f&&se.push(Re),re.push(Me)}else R(se,Re,w)||(se!==re&&se.push(Re),re.push(Me))}return re}function Hu(d,f){return f=Mo(f,d),d=un(d,f),d==null||delete d[ro(qn(f))]}function Vh(d,f,w,T){return vs(d,f,w(Yo(d,f)),T)}function bc(d,f,w,T){for(var R=d.length,W=T?R:-1;(T?W--:++W<R)&&f(d[W],W,d););return w?Bn(d,T?0:W,T?W+1:R):Bn(d,T?W+1:0,T?R:W)}function ml(d,f){var w=d;return w instanceof Tt&&(w=w.value()),hh(f,function(T,R){return R.func.apply(R.thisArg,xa([T],R.args))},w)}function Uu(d,f,w){var T=d.length;if(T<2)return T?Qo(d[0]):[];for(var R=-1,W=ye(T);++R<T;)for(var G=d[R],re=-1;++re<T;)re!=R&&(W[R]=Co(W[R]||G,d[re],f,w));return Qo($r(W,1),f,w)}function xc(d,f,w){for(var T=-1,R=d.length,W=f.length,G={};++T<R;){var re=T<W?f[T]:r;w(G,d[T],re)}return G}function yl(d){return sn(d)?d:[]}function ju(d){return typeof d=="function"?d:Wi}function Mo(d,f){return It(d)?d:Ke(d,f)?[d]:i0(vr(d))}var k1=Ot;function Go(d,f,w){var T=d.length;return w=w===r?T:w,!f&&w>=T?d:Bn(d,f,w)}var Bh=h1||function(d){return Dr.clearTimeout(d)};function $h(d,f){if(f)return d.slice();var w=d.length,T=wh?wh(w):new d.constructor(w);return d.copy(T),T}function wc(d){var f=new d.constructor(d.byteLength);return new oc(f).set(new oc(d)),f}function M1(d,f){var w=f?wc(d.buffer):d.buffer;return new d.constructor(w,d.byteOffset,d.byteLength)}function E1(d){var f=new d.constructor(d.source,da.exec(d));return f.lastIndex=d.lastIndex,f}function T1(d){return xi?gr(xi.call(d)):{}}function I1(d,f){var w=f?wc(d.buffer):d.buffer;return new d.constructor(w,d.byteOffset,d.length)}function Wh(d,f){if(d!==f){var w=d!==r,T=d===null,R=d===d,W=oo(d),G=f!==r,re=f===null,se=f===f,ke=oo(f);if(!re&&!ke&&!W&&d>f||W&&G&&se&&!re&&!ke||T&&G&&se||!w&&se||!R)return 1;if(!T&&!W&&!ke&&d<f||ke&&w&&R&&!T&&!W||re&&w&&R||!G&&R||!se)return-1}return 0}function xf(d,f,w){for(var T=-1,R=d.criteria,W=f.criteria,G=R.length,re=w.length;++T<G;){var se=Wh(R[T],W[T]);if(se){if(T>=re)return se;var ke=w[T];return se*(ke=="desc"?-1:1)}}return d.index-f.index}function L1(d,f,w,T){for(var R=-1,W=d.length,G=w.length,re=-1,se=f.length,ke=Qr(W-G,0),Me=ye(se+ke),Re=!T;++re<se;)Me[re]=f[re];for(;++R<G;)(Re||R<W)&&(Me[w[R]]=d[R]);for(;ke--;)Me[re++]=d[R++];return Me}function Hh(d,f,w,T){for(var R=-1,W=d.length,G=-1,re=w.length,se=-1,ke=f.length,Me=Qr(W-re,0),Re=ye(Me+ke),Ue=!T;++R<Me;)Re[R]=d[R];for(var at=R;++se<ke;)Re[at+se]=f[se];for(;++G<re;)(Ue||R<W)&&(Re[at+w[G]]=d[R++]);return Re}function Yn(d,f){var w=-1,T=d.length;for(f||(f=ye(T));++w<T;)f[w]=d[w];return f}function Gi(d,f,w,T){var R=!w;w||(w={});for(var W=-1,G=f.length;++W<G;){var re=f[W],se=T?T(w[re],d[re],re,w,d):r;se===r&&(se=d[re]),R?wo(w,re,se):ds(w,re,se)}return w}function Xu(d,f){return Gi(d,Ji(d),f)}function wf(d,f){return Gi(d,R1(d),f)}function Yu(d,f){return function(w,T){var R=It(w)?ch:wi,W=f?f():{};return R(w,d,pt(T,2),W)}}function bl(d){return Ot(function(f,w){var T=-1,R=w.length,W=R>1?w[R-1]:r,G=R>2?w[2]:r;for(W=d.length>3&&typeof W=="function"?(R--,W):r,G&&Kn(w[0],w[1],G)&&(W=R<3?r:W,R=1),f=gr(f);++T<R;){var re=w[T];re&&d(f,re,T,W)}return f})}function Ni(d,f){return function(w,T){if(w==null)return w;if(!Bi(w))return d(w,T);for(var R=w.length,W=f?R:-1,G=gr(w);(f?W--:++W<R)&&T(G[W],W,G)!==!1;);return w}}function Zu(d){return function(f,w,T){for(var R=-1,W=gr(f),G=T(f),re=G.length;re--;){var se=G[d?re:++R];if(w(W[se],se,W)===!1)break}return f}}function Ku(d,f,w){var T=f&_,R=xl(d);function W(){var G=this&&this!==Dr&&this instanceof W?R:d;return G.apply(T?w:this,arguments)}return W}function Uh(d){return function(f){f=vr(f);var w=Js(f)?bi(f):r,T=w?w[0]:f.charAt(0),R=w?Go(w,1).join(""):f.slice(1);return T[d]()+R}}function ms(d){return function(f){return hh(rm(tm(f).replace(iu,"")),d,"")}}function xl(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var w=ll(d.prototype),T=d.apply(w,f);return Zr(T)?T:w}}function jh(d,f,w){var T=xl(d);function R(){for(var W=arguments.length,G=ye(W),re=W,se=Jo(R);re--;)G[re]=arguments[re];var ke=W<3&&G[0]!==se&&G[W-1]!==se?[]:Ti(G,se);if(W-=ke.length,W<w)return Zn(d,f,wl,R.placeholder,r,G,ke,r,r,w-W);var Me=this&&this!==Dr&&this instanceof R?T:d;return jn(Me,this,G)}return R}function ys(d){return function(f,w,T){var R=gr(f);if(!Bi(f)){var W=pt(w,3);f=$n(f),w=function(re){return W(R[re],re,R)}}var G=d(f,w,T);return G>-1?R[W?f[G]:G]:r}}function qu(d){return To(function(f){var w=f.length,T=w,R=Rn.prototype.thru;for(d&&f.reverse();T--;){var W=f[T];if(typeof W!="function")throw new Ii(s);if(R&&!G&&Cl(W)=="wrapper")var G=new Rn([],!0)}for(T=G?T:w;++T<w;){W=f[T];var re=Cl(W),se=re=="wrapper"?Ju(W):r;se&&Ic(se[0])&&se[1]==(A|L|P|N)&&!se[4].length&&se[9]==1?G=G[Cl(se[0])].apply(G,se[3]):G=W.length==1&&Ic(W)?G[re]():G.thru(W)}return function(){var ke=arguments,Me=ke[0];if(G&&ke.length==1&&It(Me))return G.plant(Me).value();for(var Re=0,Ue=w?f[Re].apply(this,ke):Me;++Re<w;)Ue=f[Re].call(this,Ue);return Ue}})}function wl(d,f,w,T,R,W,G,re,se,ke){var Me=f&A,Re=f&_,Ue=f&k,at=f&(L|D),yt=f&z,zt=Ue?r:xl(d);function bt(){for(var jt=arguments.length,tr=ye(jt),ao=jt;ao--;)tr[ao]=arguments[ao];if(at)var ki=Jo(bt),so=r1(tr,ki);if(T&&(tr=L1(tr,T,R,at)),W&&(tr=Hh(tr,W,G,at)),jt-=so,at&&jt<ke){var ln=Ti(tr,ki);return Zn(d,f,wl,bt.placeholder,w,tr,ln,re,se,ke-jt)}var na=Re?w:this,Es=Ue?na[d]:d;return jt=tr.length,re?tr=eo(tr,re):yt&&jt>1&&tr.reverse(),Me&&se<jt&&(tr.length=se),this&&this!==Dr&&this instanceof bt&&(Es=zt||xl(Es)),Es.apply(na,tr)}return bt}function P1(d,f){return function(w,T){return Zo(w,d,f(T),{})}}function Cc(d,f){return function(w,T){var R;if(w===r&&T===r)return f;if(w!==r&&(R=w),T!==r){if(R===r)return T;typeof w=="string"||typeof T=="string"?(w=ci(w),T=ci(T)):(w=zh(w),T=zh(T)),R=d(w,T)}return R}}function Qu(d){return To(function(f){return f=Cr(f,yi(pt())),Ot(function(w){var T=this;return d(f,function(R){return jn(R,T,w)})})})}function _c(d,f){f=f===r?" ":ci(f);var w=f.length;if(w<2)return w?gs(f,d):f;var T=gs(f,as(d/is(f)));return Js(f)?Go(bi(T),0,d).join(""):T.slice(0,d)}function A1(d,f,w,T){var R=f&_,W=xl(d);function G(){for(var re=-1,se=arguments.length,ke=-1,Me=T.length,Re=ye(Me+se),Ue=this&&this!==Dr&&this instanceof G?W:d;++ke<Me;)Re[ke]=T[ke];for(;se--;)Re[ke++]=arguments[++re];return jn(Ue,R?w:this,Re)}return G}function Xh(d){return function(f,w,T){return T&&typeof T!="number"&&Kn(f,w,T)&&(w=T=r),f=Ms(f),w===r?(w=f,f=0):w=Ms(w),T=T===r?f<w?1:-1:Ms(T),yc(f,w,T,d)}}function Gu(d){return function(f,w){return typeof f=="string"&&typeof w=="string"||(f=Lo(f),w=Lo(w)),d(f,w)}}function Zn(d,f,w,T,R,W,G,re,se,ke){var Me=f&L,Re=Me?G:r,Ue=Me?r:G,at=Me?W:r,yt=Me?r:W;f|=Me?P:$,f&=~(Me?$:P),f&M||(f&=-4);var zt=[d,f,R,at,Re,yt,Ue,re,se,ke],bt=w.apply(r,zt);return Ic(d)&&r0(bt,zt),bt.placeholder=T,n0(bt,d,f)}function _n(d){var f=qr[d];return function(w,T){if(w=Lo(w),T=T==null?0:Fn(Nt(T),292),T&&nl(w)){var R=(vr(w)+"e").split("e"),W=f(R[0]+"e"+(+R[1]+T));return R=(vr(W)+"e").split("e"),+(R[0]+"e"+(+R[1]-T))}return f(w)}}var D1=_a&&1/wa(new _a([,-0]))[1]==ae?function(d){return new _a(d)}:Kf;function Yh(d){return function(f){var w=Sn(f);return w==it?gu(f):w==gt?ff(f):df(f,d(f))}}function Eo(d,f,w,T,R,W,G,re){var se=f&k;if(!se&&typeof d!="function")throw new Ii(s);var ke=T?T.length:0;if(ke||(f&=-97,T=R=r),G=G===r?G:Qr(Nt(G),0),re=re===r?re:Nt(re),ke-=R?R.length:0,f&$){var Me=T,Re=R;T=R=r}var Ue=se?r:Ju(d),at=[d,f,w,T,R,Me,Re,W,G,re];if(Ue&&V1(at,Ue),d=at[0],f=at[1],w=at[2],T=at[3],R=at[4],re=at[9]=at[9]===r?se?0:d.length:Qr(at[9]-ke,0),!re&&f&(L|D)&&(f&=-25),!f||f==_)var yt=Ku(d,f,w);else f==L||f==D?yt=jh(d,f,re):(f==P||f==(_|P))&&!R.length?yt=A1(d,f,w,T):yt=wl.apply(r,at);var zt=Ue?$u:r0;return n0(zt(yt,at),d,f)}function Zh(d,f,w,T){return d===r||ra(d,vo[w])&&!ar.call(T,w)?f:d}function Kh(d,f,w,T,R,W){return Zr(d)&&Zr(f)&&(W.set(f,d),fs(d,f,r,Kh,W),W.delete(f)),d}function qh(d){return b0(d)?r:d}function Qh(d,f,w,T,R,W){var G=w&x,re=d.length,se=f.length;if(re!=se&&!(G&&se>re))return!1;var ke=W.get(d),Me=W.get(f);if(ke&&Me)return ke==f&&Me==d;var Re=-1,Ue=!0,at=w&C?new ls:r;for(W.set(d,f),W.set(f,d);++Re<re;){var yt=d[Re],zt=f[Re];if(T)var bt=G?T(zt,yt,Re,f,d,W):T(yt,zt,Re,d,f,W);if(bt!==r){if(bt)continue;Ue=!1;break}if(at){if(!ph(f,function(jt,tr){if(!$o(at,tr)&&(yt===jt||R(yt,jt,w,T,W)))return at.push(tr)})){Ue=!1;break}}else if(!(yt===zt||R(yt,zt,w,T,W))){Ue=!1;break}}return W.delete(d),W.delete(f),Ue}function Gh(d,f,w,T,R,W,G){switch(w){case nr:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case Zt:return!(d.byteLength!=f.byteLength||!W(new oc(d),new oc(f)));case Ee:case Fe:case He:return ra(+d,+f);case Te:return d.name==f.name&&d.message==f.message;case Mt:case Yt:return d==f+"";case it:var re=gu;case gt:var se=T&x;if(re||(re=wa),d.size!=f.size&&!se)return!1;var ke=G.get(d);if(ke)return ke==f;T|=C,G.set(d,f);var Me=Qh(re(d),re(f),T,R,W,G);return G.delete(d),Me;case cn:if(xi)return xi.call(d)==xi.call(f)}return!1}function F1(d,f,w,T,R,W){var G=w&x,re=Sc(d),se=re.length,ke=Sc(f),Me=ke.length;if(se!=Me&&!G)return!1;for(var Re=se;Re--;){var Ue=re[Re];if(!(G?Ue in f:ar.call(f,Ue)))return!1}var at=W.get(d),yt=W.get(f);if(at&&yt)return at==f&&yt==d;var zt=!0;W.set(d,f),W.set(f,d);for(var bt=G;++Re<se;){Ue=re[Re];var jt=d[Ue],tr=f[Ue];if(T)var ao=G?T(tr,jt,Ue,f,d,W):T(jt,tr,Ue,d,f,W);if(!(ao===r?jt===tr||R(jt,tr,w,T,W):ao)){zt=!1;break}bt||(bt=Ue=="constructor")}if(zt&&!bt){var ki=d.constructor,so=f.constructor;ki!=so&&"constructor"in d&&"constructor"in f&&!(typeof ki=="function"&&ki instanceof ki&&typeof so=="function"&&so instanceof so)&&(zt=!1)}return W.delete(d),W.delete(f),zt}function To(d){return _i(nd(d,r,ad),d+"")}function Sc(d){return Ru(d,$n,Ji)}function kc(d){return Ru(d,$i,R1)}var Ju=Mu?function(d){return Mu.get(d)}:Kf;function Cl(d){for(var f=d.name+"",w=al[f],T=ar.call(al,f)?w.length:0;T--;){var R=w[T],W=R.func;if(W==null||W==d)return R.name}return f}function Jo(d){var f=ar.call(V,"placeholder")?V:d;return f.placeholder}function pt(){var d=V.iteratee||Yf;return d=d===Yf?fl:d,arguments.length?d(arguments[0],arguments[1]):d}function Mc(d,f){var w=d.__data__;return _l(f)?w[typeof f=="string"?"string":"hash"]:w.map}function Ec(d){for(var f=$n(d),w=f.length;w--;){var T=f[w],R=d[T];f[w]=[T,R,Lc(R)]}return f}function Aa(d,f){var w=Gs(d,f);return Lh(w)?w:r}function ed(d){var f=ar.call(d,os),w=d[os];try{d[os]=r;var T=!0}catch{}var R=nc.call(d);return T&&(f?d[os]=w:delete d[os]),R}var Ji=_u?function(d){return d==null?[]:(d=gr(d),ba(_u(d),function(f){return wu.call(d,f)}))}:qf,R1=_u?function(d){for(var f=[];d;)xa(f,Ji(d)),d=qi(d);return f}:qf,Sn=Cn;(lc&&Sn(new lc(new ArrayBuffer(1)))!=nr||ss&&Sn(new ss)!=it||cc&&Sn(cc.resolve())!=Qt||_a&&Sn(new _a)!=gt||uc&&Sn(new uc)!=dr)&&(Sn=function(d){var f=Cn(d),w=f==ut?d.constructor:r,T=w?Da(w):"";if(T)switch(T){case Sh:return nr;case Sa:return it;case f1:return Qt;case sl:return gt;case mo:return dr}return f});function Jh(d,f,w){for(var T=-1,R=w.length;++T<R;){var W=w[T],G=W.size;switch(W.type){case"drop":d+=G;break;case"dropRight":f-=G;break;case"take":f=Fn(f,d+G);break;case"takeRight":d=Qr(d,f-G);break}}return{start:d,end:f}}function O1(d){var f=d.match(wn);return f?f[1].split(An):[]}function e0(d,f,w){f=Mo(f,d);for(var T=-1,R=f.length,W=!1;++T<R;){var G=ro(f[T]);if(!(W=d!=null&&w(d,G)))break;d=d[G]}return W||++T!=R?W:(R=d==null?0:d.length,!!R&&rp(R)&&Rr(G,R)&&(It(d)||zc(d)))}function Tc(d){var f=d.length,w=new d.constructor(f);return f&&typeof d[0]=="string"&&ar.call(d,"index")&&(w.index=d.index,w.input=d.input),w}function kn(d){return typeof d.constructor=="function"&&!ea(d)?ll(qi(d)):{}}function Cf(d,f,w){var T=d.constructor;switch(f){case Zt:return wc(d);case Ee:case Fe:return new T(+d);case nr:return M1(d,w);case Kr:case hr:case Br:case Et:case We:case _t:case wt:case St:case Ct:return I1(d,w);case it:return new T;case He:case Yt:return new T(d);case Mt:return E1(d);case gt:return new T;case cn:return T1(d)}}function _f(d,f){var w=f.length;if(!w)return d;var T=w-1;return f[T]=(w>1?"& ":"")+f[T],f=f.join(w>2?", ":" "),d.replace(nn,`{
/* [wrapped with `+f+`] */
`)}function td(d){return It(d)||zc(d)||!!(d1&&d&&d[d1])}function Rr(d,f){var w=typeof d;return f=f??te,!!f&&(w=="number"||w!="symbol"&&$l.test(d))&&d>-1&&d%1==0&&d<f}function Kn(d,f,w){if(!Zr(w))return!1;var T=typeof f;return(T=="number"?Bi(w)&&Rr(f,w.length):T=="string"&&f in w)?ra(w[f],d):!1}function Ke(d,f){if(It(d))return!1;var w=typeof d;return w=="number"||w=="symbol"||w=="boolean"||d==null||oo(d)?!0:kt.test(d)||!Pr.test(d)||f!=null&&d in gr(f)}function _l(d){var f=typeof d;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?d!=="__proto__":d===null}function Ic(d){var f=Cl(d),w=V[f];if(typeof w!="function"||!(f in Tt.prototype))return!1;if(d===w)return!0;var T=Ju(w);return!!T&&d===T[0]}function N1(d){return!!yu&&yu in d}var Sf=tl?ks:Qf;function ea(d){var f=d&&d.constructor,w=typeof f=="function"&&f.prototype||vo;return d===w}function Lc(d){return d===d&&!Zr(d)}function rd(d,f){return function(w){return w==null?!1:w[d]===f&&(f!==r||d in gr(w))}}function z1(d){var f=ge(d,function(T){return w.size===h&&w.clear(),T}),w=f.cache;return f}function V1(d,f){var w=d[1],T=f[1],R=w|T,W=R<(_|k|A),G=T==A&&w==L||T==A&&w==N&&d[7].length<=f[8]||T==(A|N)&&f[7].length<=f[8]&&w==L;if(!(W||G))return d;T&_&&(d[2]=f[2],R|=w&_?0:M);var re=f[3];if(re){var se=d[3];d[3]=se?L1(se,re,f[4]):re,d[4]=se?Ti(d[3],p):f[4]}return re=f[5],re&&(se=d[5],d[5]=se?Hh(se,re,f[6]):re,d[6]=se?Ti(d[5],p):f[6]),re=f[7],re&&(d[7]=re),T&A&&(d[8]=d[8]==null?f[8]:Fn(d[8],f[8])),d[9]==null&&(d[9]=f[9]),d[0]=f[0],d[1]=R,d}function B1(d){var f=[];if(d!=null)for(var w in gr(d))f.push(w);return f}function t0(d){return nc.call(d)}function nd(d,f,w){return f=Qr(f===r?d.length-1:f,0),function(){for(var T=arguments,R=-1,W=Qr(T.length-f,0),G=ye(W);++R<W;)G[R]=T[f+R];R=-1;for(var re=ye(f+1);++R<f;)re[R]=T[R];return re[f]=w(G),jn(d,this,re)}}function un(d,f){return f.length<2?d:Yo(d,Bn(f,0,-1))}function eo(d,f){for(var w=d.length,T=Fn(f.length,w),R=Yn(d);T--;){var W=f[T];d[T]=Rr(W,w)?R[W]:r}return d}function Io(d,f){if(!(f==="constructor"&&typeof d[f]=="function")&&f!="__proto__")return d[f]}var r0=to($u),Sl=Ch||function(d,f){return Dr.setTimeout(d,f)},_i=to(ko);function n0(d,f,w){var T=f+"";return _i(d,_f(T,$1(O1(T),w)))}function to(d){var f=0,w=0;return function(){var T=bf(),R=Z-(T-w);if(w=T,R>0){if(++f>=ne)return arguments[0]}else f=0;return d.apply(r,arguments)}}function id(d,f){var w=-1,T=d.length,R=T-1;for(f=f===r?T:f;++w<f;){var W=gl(w,R),G=d[W];d[W]=d[w],d[w]=G}return d.length=f,d}var i0=z1(function(d){var f=[];return d.charCodeAt(0)===46&&f.push(""),d.replace(Ar,function(w,T,R,W){f.push(R?W.replace(Ya,"$1"):T||w)}),f});function ro(d){if(typeof d=="string"||oo(d))return d;var f=d+"";return f=="0"&&1/d==-ae?"-0":f}function Da(d){if(d!=null){try{return rc.call(d)}catch{}try{return d+""}catch{}}return""}function $1(d,f){return Dn(U,function(w){var T="_."+w[0];f&w[1]&&!hu(d,T)&&d.push(T)}),d.sort()}function W1(d){if(d instanceof Tt)return d.clone();var f=new Rn(d.__wrapped__,d.__chain__);return f.__actions__=Yn(d.__actions__),f.__index__=d.__index__,f.__values__=d.__values__,f}function od(d,f,w){(w?Kn(d,f,w):f===r)?f=1:f=Qr(Nt(f),0);var T=d==null?0:d.length;if(!T||f<1)return[];for(var R=0,W=0,G=ye(as(T/f));R<T;)G[W++]=Bn(d,R,R+=f);return G}function o0(d){for(var f=-1,w=d==null?0:d.length,T=0,R=[];++f<w;){var W=d[f];W&&(R[T++]=W)}return R}function zi(){var d=arguments.length;if(!d)return[];for(var f=ye(d-1),w=arguments[0],T=d;T--;)f[T-1]=arguments[T];return xa(It(w)?Yn(w):[w],$r(f,1))}var er=Ot(function(d,f){return sn(d)?Co(d,$r(f,1,sn,!0)):[]}),dn=Ot(function(d,f){var w=qn(f);return sn(w)&&(w=r),sn(d)?Co(d,$r(f,1,sn,!0),pt(w,2)):[]}),Gr=Ot(function(d,f){var w=qn(f);return sn(w)&&(w=r),sn(d)?Co(d,$r(f,1,sn,!0),r,w):[]});function Mn(d,f,w){var T=d==null?0:d.length;return T?(f=w||f===r?1:Nt(f),Bn(d,f<0?0:f,T)):[]}function Si(d,f,w){var T=d==null?0:d.length;return T?(f=w||f===r?1:Nt(f),f=T-f,Bn(d,0,f<0?0:f)):[]}function kl(d,f){return d&&d.length?bc(d,pt(f,3),!0,!0):[]}function an(d,f){return d&&d.length?bc(d,pt(f,3),!0):[]}function Pc(d,f,w,T){var R=d==null?0:d.length;return R?(w&&typeof w!="number"&&Kn(d,f,w)&&(w=0,T=R),C1(d,f,w,T)):[]}function Fa(d,f,w){var T=d==null?0:d.length;if(!T)return-1;var R=w==null?0:Nt(w);return R<0&&(R=Qr(T+R,0)),pu(d,pt(f,3),R)}function Ac(d,f,w){var T=d==null?0:d.length;if(!T)return-1;var R=T-1;return w!==r&&(R=Nt(w),R=w<0?Qr(T+R,0):Fn(R,T-1)),pu(d,pt(f,3),R,!0)}function ad(d){var f=d==null?0:d.length;return f?$r(d,1):[]}function Dc(d){var f=d==null?0:d.length;return f?$r(d,ae):[]}function ui(d,f){var w=d==null?0:d.length;return w?(f=f===r?1:Nt(f),$r(d,f)):[]}function a0(d){for(var f=-1,w=d==null?0:d.length,T={};++f<w;){var R=d[f];T[R[0]]=R[1]}return T}function bs(d){return d&&d.length?d[0]:r}function ta(d,f,w){var T=d==null?0:d.length;if(!T)return-1;var R=w==null?0:Nt(w);return R<0&&(R=Qr(T+R,0)),Qs(d,f,R)}function sd(d){var f=d==null?0:d.length;return f?Bn(d,0,-1):[]}var s0=Ot(function(d){var f=Cr(d,yl);return f.length&&f[0]===d[0]?Ou(f):[]}),Ra=Ot(function(d){var f=qn(d),w=Cr(d,yl);return f===qn(w)?f=r:w.pop(),w.length&&w[0]===d[0]?Ou(w,pt(f,2)):[]}),ld=Ot(function(d){var f=qn(d),w=Cr(d,yl);return f=typeof f=="function"?f:r,f&&w.pop(),w.length&&w[0]===d[0]?Ou(w,r,f):[]});function Oa(d,f){return d==null?"":Su.call(d,f)}function qn(d){var f=d==null?0:d.length;return f?d[f-1]:r}function Fc(d,f,w){var T=d==null?0:d.length;if(!T)return-1;var R=T;return w!==r&&(R=Nt(w),R=R<0?Qr(T+R,0):Fn(R,T-1)),f===f?gf(d,f,R):pu(d,Q0,R,!0)}function l0(d,f){return d&&d.length?Bu(d,Nt(f)):r}var cd=Ot(Rc);function Rc(d,f){return d&&d.length&&f&&f.length?Xr(d,f):d}function Qn(d,f,w){return d&&d.length&&f&&f.length?Xr(d,f,pt(w,2)):d}function Na(d,f,w){return d&&d.length&&f&&f.length?Xr(d,f,r,w):d}var no=To(function(d,f){var w=d==null?0:d.length,T=Du(d,f);return on(d,Cr(f,function(R){return Rr(R,w)?+R:R}).sort(Wh)),T});function di(d,f){var w=[];if(!(d&&d.length))return w;var T=-1,R=[],W=d.length;for(f=pt(f,3);++T<W;){var G=d[T];f(G,T,d)&&(w.push(G),R.push(T))}return on(d,R),w}function ud(d){return d==null?d:ku.call(d)}function c0(d,f,w){var T=d==null?0:d.length;return T?(w&&typeof w!="number"&&Kn(d,f,w)?(f=0,w=T):(f=f==null?0:Nt(f),w=w===r?T:Nt(w)),Bn(d,f,w)):[]}function u0(d,f){return vl(d,f)}function kf(d,f,w){return Wu(d,f,pt(w,2))}function za(d,f){var w=d==null?0:d.length;if(w){var T=vl(d,f);if(T<w&&ra(d[T],f))return T}return-1}function H1(d,f){return vl(d,f,!0)}function d0(d,f,w){return Wu(d,f,pt(w,2),!0)}function xs(d,f){var w=d==null?0:d.length;if(w){var T=vl(d,f,!0)-1;if(ra(d[T],f))return T}return-1}function h0(d){return d&&d.length?Nh(d):[]}function ws(d,f){return d&&d.length?Nh(d,pt(f,2)):[]}function U1(d){var f=d==null?0:d.length;return f?Bn(d,1,f):[]}function j1(d,f,w){return d&&d.length?(f=w||f===r?1:Nt(f),Bn(d,0,f<0?0:f)):[]}function p0(d,f,w){var T=d==null?0:d.length;return T?(f=w||f===r?1:Nt(f),f=T-f,Bn(d,f<0?0:f,T)):[]}function dd(d,f){return d&&d.length?bc(d,pt(f,3),!1,!0):[]}function Mf(d,f){return d&&d.length?bc(d,pt(f,3)):[]}var Ef=Ot(function(d){return Qo($r(d,1,sn,!0))}),X1=Ot(function(d){var f=qn(d);return sn(f)&&(f=r),Qo($r(d,1,sn,!0),pt(f,2))}),Y1=Ot(function(d){var f=qn(d);return f=typeof f=="function"?f:r,Qo($r(d,1,sn,!0),r,f)});function Cs(d){return d&&d.length?Qo(d):[]}function Tf(d,f){return d&&d.length?Qo(d,pt(f,2)):[]}function Ml(d,f){return f=typeof f=="function"?f:r,d&&d.length?Qo(d,r,f):[]}function hd(d){if(!(d&&d.length))return[];var f=0;return d=ba(d,function(w){if(sn(w))return f=Qr(w.length,f),!0}),mh(f,function(w){return Cr(d,gh(w))})}function Vr(d,f){if(!(d&&d.length))return[];var w=hd(d);return f==null?w:Cr(w,function(T){return jn(f,r,T)})}var If=Ot(function(d,f){return sn(d)?Co(d,f):[]}),Z1=Ot(function(d){return Uu(ba(d,sn))}),Lf=Ot(function(d){var f=qn(d);return sn(f)&&(f=r),Uu(ba(d,sn),pt(f,2))}),Pf=Ot(function(d){var f=qn(d);return f=typeof f=="function"?f:r,Uu(ba(d,sn),r,f)}),K1=Ot(hd);function q1(d,f){return xc(d||[],f||[],ds)}function Af(d,f){return xc(d||[],f||[],vs)}var Vi=Ot(function(d){var f=d.length,w=f>1?d[f-1]:r;return w=typeof w=="function"?(d.pop(),w):r,Vr(d,w)});function pd(d){var f=V(d);return f.__chain__=!0,f}function Df(d,f){return f(d),d}function io(d,f){return f(d)}var fd=To(function(d){var f=d.length,w=f?d[0]:0,T=this.__wrapped__,R=function(W){return Du(W,d)};return f>1||this.__actions__.length||!(T instanceof Tt)||!Rr(w)?this.thru(R):(T=T.slice(w,+w+(f?1:0)),T.__actions__.push({func:io,args:[R],thisArg:r}),new Rn(T,this.__chain__).thru(function(W){return f&&!W.length&&W.push(r),W}))});function _s(){return pd(this)}function gd(){return new Rn(this.value(),this.__chain__)}function f0(){this.__values__===r&&(this.__values__=Xv(this.value()));var d=this.__index__>=this.__values__.length,f=d?r:this.__values__[this.__index__++];return{done:d,value:f}}function g0(){return this}function Ff(d){for(var f,w=this;w instanceof yo;){var T=W1(w);T.__index__=0,T.__values__=r,f?R.__wrapped__=T:f=T;var R=T;w=w.__wrapped__}return R.__wrapped__=d,f}function v0(){var d=this.__wrapped__;if(d instanceof Tt){var f=d;return this.__actions__.length&&(f=new Tt(this)),f=f.reverse(),f.__actions__.push({func:io,args:[ud],thisArg:r}),new Rn(f,this.__chain__)}return this.thru(ud)}function Rf(){return ml(this.__wrapped__,this.__actions__)}var Q1=Yu(function(d,f,w){ar.call(d,w)?++d[w]:wo(d,w,1)});function G1(d,f,w){var T=It(d)?uh:pc;return w&&Kn(d,f,w)&&(f=r),T(d,pt(f,3))}function vd(d,f){var w=It(d)?ba:Th;return w(d,pt(f,3))}var md=ys(Fa),J1=ys(Ac);function m0(d,f){return $r(Ss(d,f),1)}function Of(d,f){return $r(Ss(d,f),ae)}function ep(d,f,w){return w=w===r?1:Nt(w),$r(Ss(d,f),w)}function yd(d,f){var w=It(d)?Dn:_o;return w(d,pt(f,3))}function Oc(d,f){var w=It(d)?du:w1;return w(d,pt(f,3))}var y0=Yu(function(d,f,w){ar.call(d,w)?d[w].push(f):wo(d,w,[f])});function bd(d,f,w,T){d=Bi(d)?d:Cd(d),w=w&&!T?Nt(w):0;var R=d.length;return w<0&&(w=Qr(R+w,0)),np(d)?w<=R&&d.indexOf(f,w)>-1:!!R&&Qs(d,f,w)>-1}var tp=Ot(function(d,f,w){var T=-1,R=typeof f=="function",W=Bi(d)?ye(d.length):[];return _o(d,function(G){W[++T]=R?jn(f,G,w):Fi(G,f,w)}),W}),Nf=Yu(function(d,f,w){wo(d,w,f)});function Ss(d,f){var w=It(d)?Cr:Ah;return w(d,pt(f,3))}function zf(d,f,w,T){return d==null?[]:(It(f)||(f=f==null?[]:[f]),w=T?r:w,It(w)||(w=w==null?[]:[w]),mc(d,f,w))}var Nc=Yu(function(d,f,w){d[w?0:1].push(f)},function(){return[[],[]]});function Vf(d,f,w){var T=It(d)?hh:J0,R=arguments.length<3;return T(d,pt(f,4),w,R,_o)}function xd(d,f,w){var T=It(d)?sf:J0,R=arguments.length<3;return T(d,pt(f,4),w,R,w1)}function a(d,f){var w=It(d)?ba:Th;return w(d,Ve(pt(f,3)))}function l(d){var f=It(d)?xo:Vn;return f(d)}function v(d,f,w){(w?Kn(d,f,w):f===r)?f=1:f=Nt(f);var T=It(d)?us:Rh;return T(d,f)}function y(d){var f=It(d)?b1:Oi;return f(d)}function S(d){if(d==null)return 0;if(Bi(d))return np(d)?is(d):d.length;var f=Sn(d);return f==it||f==gt?d.size:qo(d).length}function E(d,f,w){var T=It(d)?ph:Oh;return w&&Kn(d,f,w)&&(f=r),T(d,pt(f,3))}var O=Ot(function(d,f){if(d==null)return[];var w=f.length;return w>1&&Kn(d,f[0],f[1])?f=[]:w>2&&Kn(f[0],f[1],f[2])&&(f=[f[0]]),mc(d,$r(f,1),[])}),q=Mr||function(){return Dr.Date.now()};function ee(d,f){if(typeof f!="function")throw new Ii(s);return d=Nt(d),function(){if(--d<1)return f.apply(this,arguments)}}function xe(d,f,w){return f=w?r:f,f=d&&f==null?d.length:f,Eo(d,A,r,r,r,r,f)}function De(d,f){var w;if(typeof f!="function")throw new Ii(s);return d=Nt(d),function(){return--d>0&&(w=f.apply(this,arguments)),d<=1&&(f=r),w}}var Ne=Ot(function(d,f,w){var T=_;if(w.length){var R=Ti(w,Jo(Ne));T|=P}return Eo(d,T,f,w,R)}),Ie=Ot(function(d,f,w){var T=_|k;if(w.length){var R=Ti(w,Jo(Ie));T|=P}return Eo(f,T,d,w,R)});function Xe(d,f,w){f=w?r:f;var T=Eo(d,L,r,r,r,r,r,f);return T.placeholder=Xe.placeholder,T}function Je(d,f,w){f=w?r:f;var T=Eo(d,D,r,r,r,r,r,f);return T.placeholder=Je.placeholder,T}function rt(d,f,w){var T,R,W,G,re,se,ke=0,Me=!1,Re=!1,Ue=!0;if(typeof d!="function")throw new Ii(s);f=Lo(f)||0,Zr(w)&&(Me=!!w.leading,Re="maxWait"in w,W=Re?Qr(Lo(w.maxWait)||0,f):W,Ue="trailing"in w?!!w.trailing:Ue);function at(ln){var na=T,Es=R;return T=R=r,ke=ln,G=d.apply(Es,na),G}function yt(ln){return ke=ln,re=Sl(jt,f),Me?at(ln):G}function zt(ln){var na=ln-se,Es=ln-ke,om=f-na;return Re?Fn(om,W-Es):om}function bt(ln){var na=ln-se,Es=ln-ke;return se===r||na>=f||na<0||Re&&Es>=W}function jt(){var ln=q();if(bt(ln))return tr(ln);re=Sl(jt,zt(ln))}function tr(ln){return re=r,Ue&&T?at(ln):(T=R=r,G)}function ao(){re!==r&&Bh(re),ke=0,T=se=R=re=r}function ki(){return re===r?G:tr(q())}function so(){var ln=q(),na=bt(ln);if(T=arguments,R=this,se=ln,na){if(re===r)return yt(se);if(Re)return Bh(re),re=Sl(jt,f),at(se)}return re===r&&(re=Sl(jt,f)),G}return so.cancel=ao,so.flush=ki,so}var Yr=Ot(function(d,f){return Eh(d,1,f)}),he=Ot(function(d,f,w){return Eh(d,Lo(f)||0,w)});function ie(d){return Eo(d,z)}function ge(d,f){if(typeof d!="function"||f!=null&&typeof f!="function")throw new Ii(s);var w=function(){var T=arguments,R=f?f.apply(this,T):T[0],W=w.cache;if(W.has(R))return W.get(R);var G=d.apply(this,T);return w.cache=W.set(R,G)||W,G};return w.cache=new(ge.Cache||Li),w}ge.Cache=Li;function Ve(d){if(typeof d!="function")throw new Ii(s);return function(){var f=arguments;switch(f.length){case 0:return!d.call(this);case 1:return!d.call(this,f[0]);case 2:return!d.call(this,f[0],f[1]);case 3:return!d.call(this,f[0],f[1],f[2])}return!d.apply(this,f)}}function ot(d){return De(2,d)}var dt=k1(function(d,f){f=f.length==1&&It(f[0])?Cr(f[0],yi(pt())):Cr($r(f,1),yi(pt()));var w=f.length;return Ot(function(T){for(var R=-1,W=Fn(T.length,w);++R<W;)T[R]=f[R].call(this,T[R]);return jn(d,this,T)})}),lt=Ot(function(d,f){var w=Ti(f,Jo(lt));return Eo(d,P,r,f,w)}),mt=Ot(function(d,f){var w=Ti(f,Jo(mt));return Eo(d,$,r,f,w)}),hn=To(function(d,f){return Eo(d,N,r,r,r,f)});function sr(d,f){if(typeof d!="function")throw new Ii(s);return f=f===r?f:Nt(f),Ot(d,f)}function Va(d,f){if(typeof d!="function")throw new Ii(s);return f=f==null?0:Qr(Nt(f),0),Ot(function(w){var T=w[f],R=Go(w,0,f);return T&&xa(R,T),jn(d,this,R)})}function Bf(d,f,w){var T=!0,R=!0;if(typeof d!="function")throw new Ii(s);return Zr(w)&&(T="leading"in w?!!w.leading:T,R="trailing"in w?!!w.trailing:R),rt(d,f,{leading:T,maxWait:f,trailing:R})}function l9(d){return xe(d,1)}function c9(d,f){return lt(ju(f),d)}function u9(){if(!arguments.length)return[];var d=arguments[0];return It(d)?d:[d]}function d9(d){return li(d,b)}function h9(d,f){return f=typeof f=="function"?f:r,li(d,b,f)}function p9(d){return li(d,g|b)}function f9(d,f){return f=typeof f=="function"?f:r,li(d,g|b,f)}function g9(d,f){return f==null||hc(d,f,$n(f))}function ra(d,f){return d===f||d!==d&&f!==f}var v9=Gu(Ia),m9=Gu(function(d,f){return d>=f}),zc=Nu((function(){return arguments})())?Nu:function(d){return Jr(d)&&ar.call(d,"callee")&&!wu.call(d,"callee")},It=ye.isArray,y9=lh?yi(lh):_1;function Bi(d){return d!=null&&rp(d.length)&&!ks(d)}function sn(d){return Jr(d)&&Bi(d)}function b9(d){return d===!0||d===!1||Jr(d)&&Cn(d)==Ee}var El=_h||Qf,x9=ii?yi(ii):Ko;function w9(d){return Jr(d)&&d.nodeType===1&&!b0(d)}function C9(d){if(d==null)return!0;if(Bi(d)&&(It(d)||typeof d=="string"||typeof d.splice=="function"||El(d)||wd(d)||zc(d)))return!d.length;var f=Sn(d);if(f==it||f==gt)return!d.size;if(ea(d))return!qo(d).length;for(var w in d)if(ar.call(d,w))return!1;return!0}function _9(d,f){return Ri(d,f)}function S9(d,f,w){w=typeof w=="function"?w:r;var T=w?w(d,f):r;return T===r?Ri(d,f,r,w):!!T}function $f(d){if(!Jr(d))return!1;var f=Cn(d);return f==Te||f==Ce||typeof d.message=="string"&&typeof d.name=="string"&&!b0(d)}function k9(d){return typeof d=="number"&&nl(d)}function ks(d){if(!Zr(d))return!1;var f=Cn(d);return f==et||f==Qe||f==Oe||f==Gt}function Wv(d){return typeof d=="number"&&d==Nt(d)}function rp(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=te}function Zr(d){var f=typeof d;return d!=null&&(f=="object"||f=="function")}function Jr(d){return d!=null&&typeof d=="object"}var Hv=ns?yi(ns):S1;function M9(d,f){return d===f||pl(d,f,Ec(f))}function E9(d,f,w){return w=typeof w=="function"?w:r,pl(d,f,Ec(f),w)}function T9(d){return Uv(d)&&d!=+d}function I9(d){if(Sf(d))throw new xt(o);return Lh(d)}function L9(d){return d===null}function P9(d){return d==null}function Uv(d){return typeof d=="number"||Jr(d)&&Cn(d)==He}function b0(d){if(!Jr(d)||Cn(d)!=ut)return!1;var f=qi(d);if(f===null)return!0;var w=ar.call(f,"constructor")&&f.constructor;return typeof w=="function"&&w instanceof w&&rc.call(w)==bu}var Wf=uu?yi(uu):gc;function A9(d){return Wv(d)&&d>=-te&&d<=te}var jv=qs?yi(qs):So;function np(d){return typeof d=="string"||!It(d)&&Jr(d)&&Cn(d)==Yt}function oo(d){return typeof d=="symbol"||Jr(d)&&Cn(d)==cn}var wd=Z0?yi(Z0):vc;function D9(d){return d===r}function F9(d){return Jr(d)&&Sn(d)==dr}function R9(d){return Jr(d)&&Cn(d)==Rt}var O9=Gu(La),N9=Gu(function(d,f){return d<=f});function Xv(d){if(!d)return[];if(Bi(d))return np(d)?bi(d):Yn(d);if(Uo&&d[Uo])return pf(d[Uo]());var f=Sn(d),w=f==it?gu:f==gt?wa:Cd;return w(d)}function Ms(d){if(!d)return d===0?d:0;if(d=Lo(d),d===ae||d===-ae){var f=d<0?-1:1;return f*ve}return d===d?d:0}function Nt(d){var f=Ms(d),w=f%1;return f===f?w?f-w:f:0}function Yv(d){return d?Xo(Nt(d),0,j):0}function Lo(d){if(typeof d=="number")return d;if(oo(d))return pe;if(Zr(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=Zr(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=e1(d);var w=ha.test(d);return w||Ka.test(d)?lu(d.slice(2),w?2:8):$s.test(d)?pe:+d}function Zv(d){return Gi(d,$i(d))}function z9(d){return d?Xo(Nt(d),-te,te):d===0?d:0}function vr(d){return d==null?"":ci(d)}var V9=bl(function(d,f){if(ea(f)||Bi(f)){Gi(f,$n(f),d);return}for(var w in f)ar.call(f,w)&&ds(d,w,f[w])}),Kv=bl(function(d,f){Gi(f,$i(f),d)}),ip=bl(function(d,f,w,T){Gi(f,$i(f),d,T)}),B9=bl(function(d,f,w,T){Gi(f,$n(f),d,T)}),$9=To(Du);function W9(d,f){var w=ll(d);return f==null?w:Tr(w,f)}var H9=Ot(function(d,f){d=gr(d);var w=-1,T=f.length,R=T>2?f[2]:r;for(R&&Kn(f[0],f[1],R)&&(T=1);++w<T;)for(var W=f[w],G=$i(W),re=-1,se=G.length;++re<se;){var ke=G[re],Me=d[ke];(Me===r||ra(Me,vo[ke])&&!ar.call(d,ke))&&(d[ke]=W[ke])}return d}),U9=Ot(function(d){return d.push(r,Kh),jn(qv,r,d)});function j9(d,f){return q0(d,pt(f,3),Ci)}function X9(d,f){return q0(d,pt(f,3),Ta)}function Y9(d,f){return d==null?d:Fu(d,pt(f,3),$i)}function Z9(d,f){return d==null?d:fc(d,pt(f,3),$i)}function K9(d,f){return d&&Ci(d,pt(f,3))}function q9(d,f){return d&&Ta(d,pt(f,3))}function Q9(d){return d==null?[]:hl(d,$n(d))}function G9(d){return d==null?[]:hl(d,$i(d))}function Hf(d,f,w){var T=d==null?r:Yo(d,f);return T===r?w:T}function J9(d,f){return d!=null&&e0(d,f,Di)}function Uf(d,f){return d!=null&&e0(d,f,ps)}var e3=P1(function(d,f,w){f!=null&&typeof f.toString!="function"&&(f=nc.call(f)),d[f]=w},Xf(Wi)),t3=P1(function(d,f,w){f!=null&&typeof f.toString!="function"&&(f=nc.call(f)),ar.call(d,f)?d[f].push(w):d[f]=[w]},pt),r3=Ot(Fi);function $n(d){return Bi(d)?bo(d):qo(d)}function $i(d){return Bi(d)?bo(d,!0):Ph(d)}function n3(d,f){var w={};return f=pt(f,3),Ci(d,function(T,R,W){wo(w,f(T,R,W),T)}),w}function i3(d,f){var w={};return f=pt(f,3),Ci(d,function(T,R,W){wo(w,R,f(T,R,W))}),w}var o3=bl(function(d,f,w){fs(d,f,w)}),qv=bl(function(d,f,w,T){fs(d,f,w,T)}),a3=To(function(d,f){var w={};if(d==null)return w;var T=!1;f=Cr(f,function(W){return W=Mo(W,d),T||(T=W.length>1),W}),Gi(d,kc(d),w),T&&(w=li(w,g|m|b,qh));for(var R=f.length;R--;)Hu(w,f[R]);return w});function s3(d,f){return Qv(d,Ve(pt(f)))}var l3=To(function(d,f){return d==null?{}:Fh(d,f)});function Qv(d,f){if(d==null)return{};var w=Cr(kc(d),function(T){return[T]});return f=pt(f),Pa(d,w,function(T,R){return f(T,R[0])})}function c3(d,f,w){f=Mo(f,d);var T=-1,R=f.length;for(R||(R=1,d=r);++T<R;){var W=d==null?r:d[ro(f[T])];W===r&&(T=R,W=w),d=ks(W)?W.call(d):W}return d}function u3(d,f,w){return d==null?d:vs(d,f,w)}function d3(d,f,w,T){return T=typeof T=="function"?T:r,d==null?d:vs(d,f,w,T)}var Gv=Yh($n),Jv=Yh($i);function h3(d,f,w){var T=It(d),R=T||El(d)||wd(d);if(f=pt(f,4),w==null){var W=d&&d.constructor;R?w=T?new W:[]:Zr(d)?w=ks(W)?ll(qi(d)):{}:w={}}return(R?Dn:Ci)(d,function(G,re,se){return f(w,G,re,se)}),w}function p3(d,f){return d==null?!0:Hu(d,f)}function f3(d,f,w){return d==null?d:Vh(d,f,ju(w))}function g3(d,f,w,T){return T=typeof T=="function"?T:r,d==null?d:Vh(d,f,ju(w),T)}function Cd(d){return d==null?[]:ec(d,$n(d))}function v3(d){return d==null?[]:ec(d,$i(d))}function m3(d,f,w){return w===r&&(w=f,f=r),w!==r&&(w=Lo(w),w=w===w?w:0),f!==r&&(f=Lo(f),f=f===f?f:0),Xo(Lo(d),f,w)}function y3(d,f,w){return f=Ms(f),w===r?(w=f,f=0):w=Ms(w),d=Lo(d),Ih(d,f,w)}function b3(d,f,w){if(w&&typeof w!="boolean"&&Kn(d,f,w)&&(f=w=r),w===r&&(typeof f=="boolean"?(w=f,f=r):typeof d=="boolean"&&(w=d,d=r)),d===r&&f===r?(d=0,f=1):(d=Ms(d),f===r?(f=d,d=0):f=Ms(f)),d>f){var T=d;d=f,f=T}if(w||d%1||f%1){var R=sc();return Fn(d+R*(f-d+ah("1e-"+((R+"").length-1))),f)}return gl(d,f)}var x3=ms(function(d,f,w){return f=f.toLowerCase(),d+(w?em(f):f)});function em(d){return jf(vr(d).toLowerCase())}function tm(d){return d=vr(d),d&&d.replace(Wl,n1).replace(ql,"")}function w3(d,f,w){d=vr(d),f=ci(f);var T=d.length;w=w===r?T:Xo(Nt(w),0,T);var R=w;return w-=f.length,w>=0&&d.slice(w,R)==f}function C3(d){return d=vr(d),d&&Hr.test(d)?d.replace(cr,i1):d}function _3(d){return d=vr(d),d&&fr.test(d)?d.replace(wr,"\\$&"):d}var S3=ms(function(d,f,w){return d+(w?"-":"")+f.toLowerCase()}),k3=ms(function(d,f,w){return d+(w?" ":"")+f.toLowerCase()}),M3=Uh("toLowerCase");function E3(d,f,w){d=vr(d),f=Nt(f);var T=f?is(d):0;if(!f||T>=f)return d;var R=(f-T)/2;return _c(Ca(R),w)+d+_c(as(R),w)}function T3(d,f,w){d=vr(d),f=Nt(f);var T=f?is(d):0;return f&&T<f?d+_c(f-T,w):d}function I3(d,f,w){d=vr(d),f=Nt(f);var T=f?is(d):0;return f&&T<f?_c(f-T,w)+d:d}function L3(d,f,w){return w||f==null?f=0:f&&(f=+f),p1(vr(d).replace(rn,""),f||0)}function P3(d,f,w){return(w?Kn(d,f,w):f===r)?f=1:f=Nt(f),gs(vr(d),f)}function A3(){var d=arguments,f=vr(d[0]);return d.length<3?f:f.replace(d[1],d[2])}var D3=ms(function(d,f,w){return d+(w?"_":"")+f.toLowerCase()});function F3(d,f,w){return w&&typeof w!="number"&&Kn(d,f,w)&&(f=w=r),w=w===r?j:w>>>0,w?(d=vr(d),d&&(typeof f=="string"||f!=null&&!Wf(f))&&(f=ci(f),!f&&Js(d))?Go(bi(d),0,w):d.split(f,w)):[]}var R3=ms(function(d,f,w){return d+(w?" ":"")+jf(f)});function O3(d,f,w){return d=vr(d),w=w==null?0:Xo(Nt(w),0,d.length),f=ci(f),d.slice(w,w+f.length)==f}function N3(d,f,w){var T=V.templateSettings;w&&Kn(d,f,w)&&(f=r),d=vr(d),f=ip({},f,T,Zh);var R=ip({},f.imports,T.imports,Zh),W=$n(R),G=ec(R,W),re,se,ke=0,Me=f.interpolate||qa,Re="__p += '",Ue=tc((f.escape||qa).source+"|"+Me.source+"|"+(Me===Pt?mi:qa).source+"|"+(f.evaluate||qa).source+"|$","g"),at="//# sourceURL="+(ar.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++au+"]")+`
`;d.replace(Ue,function(bt,jt,tr,ao,ki,so){return tr||(tr=ao),Re+=d.slice(ke,so).replace(Jc,o1),jt&&(re=!0,Re+=`' +
__e(`+jt+`) +
'`),ki&&(se=!0,Re+=`';
`+ki+`;
__p += '`),tr&&(Re+=`' +
((__t = (`+tr+`)) == null ? '' : __t) +
'`),ke=so+bt.length,bt}),Re+=`';
`;var yt=ar.call(f,"variable")&&f.variable;if(!yt)Re=`with (obj) {
`+Re+`
}
`;else if(uo.test(yt))throw new xt(u);Re=(se?Re.replace(Ut,""):Re).replace(Kt,"$1").replace(mr,"$1;"),Re="function("+(yt||"obj")+`) {
`+(yt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(re?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Re+`return __p
}`;var zt=nm(function(){return or(W,at+"return "+Re).apply(r,G)});if(zt.source=Re,$f(zt))throw zt;return zt}function z3(d){return vr(d).toLowerCase()}function V3(d){return vr(d).toUpperCase()}function B3(d,f,w){if(d=vr(d),d&&(w||f===r))return e1(d);if(!d||!(f=ci(f)))return d;var T=bi(d),R=bi(f),W=t1(T,R),G=yh(T,R)+1;return Go(T,W,G).join("")}function $3(d,f,w){if(d=vr(d),d&&(w||f===r))return d.slice(0,mu(d)+1);if(!d||!(f=ci(f)))return d;var T=bi(d),R=yh(T,bi(f))+1;return Go(T,0,R).join("")}function W3(d,f,w){if(d=vr(d),d&&(w||f===r))return d.replace(rn,"");if(!d||!(f=ci(f)))return d;var T=bi(d),R=t1(T,bi(f));return Go(T,R).join("")}function H3(d,f){var w=B,T=Q;if(Zr(f)){var R="separator"in f?f.separator:R;w="length"in f?Nt(f.length):w,T="omission"in f?ci(f.omission):T}d=vr(d);var W=d.length;if(Js(d)){var G=bi(d);W=G.length}if(w>=W)return d;var re=w-is(T);if(re<1)return T;var se=G?Go(G,0,re).join(""):d.slice(0,re);if(R===r)return se+T;if(G&&(re+=se.length-re),Wf(R)){if(d.slice(re).search(R)){var ke,Me=se;for(R.global||(R=tc(R.source,vr(da.exec(R))+"g")),R.lastIndex=0;ke=R.exec(Me);)var Re=ke.index;se=se.slice(0,Re===r?re:Re)}}else if(d.indexOf(ci(R),re)!=re){var Ue=se.lastIndexOf(R);Ue>-1&&(se=se.slice(0,Ue))}return se+T}function U3(d){return d=vr(d),d&&ti.test(d)?d.replace(pr,a1):d}var j3=ms(function(d,f,w){return d+(w?" ":"")+f.toUpperCase()}),jf=Uh("toUpperCase");function rm(d,f,w){return d=vr(d),f=w?r:f,f===r?hf(d)?vf(d):cf(d):d.match(f)||[]}var nm=Ot(function(d,f){try{return jn(d,r,f)}catch(w){return $f(w)?w:new xt(w)}}),X3=To(function(d,f){return Dn(f,function(w){w=ro(w),wo(d,w,Ne(d[w],d))}),d});function Y3(d){var f=d==null?0:d.length,w=pt();return d=f?Cr(d,function(T){if(typeof T[1]!="function")throw new Ii(s);return[w(T[0]),T[1]]}):[],Ot(function(T){for(var R=-1;++R<f;){var W=d[R];if(jn(W[0],this,T))return jn(W[1],this,T)}})}function Z3(d){return x1(li(d,g))}function Xf(d){return function(){return d}}function K3(d,f){return d==null||d!==d?f:d}var q3=qu(),Q3=qu(!0);function Wi(d){return d}function Yf(d){return fl(typeof d=="function"?d:li(d,g))}function G3(d){return Vu(li(d,g))}function J3(d,f){return Fr(d,li(f,g))}var e6=Ot(function(d,f){return function(w){return Fi(w,d,f)}}),t6=Ot(function(d,f){return function(w){return Fi(d,w,f)}});function Zf(d,f,w){var T=$n(f),R=hl(f,T);w==null&&!(Zr(f)&&(R.length||!T.length))&&(w=f,f=d,d=this,R=hl(f,$n(f)));var W=!(Zr(w)&&"chain"in w)||!!w.chain,G=ks(d);return Dn(R,function(re){var se=f[re];d[re]=se,G&&(d.prototype[re]=function(){var ke=this.__chain__;if(W||ke){var Me=d(this.__wrapped__),Re=Me.__actions__=Yn(this.__actions__);return Re.push({func:se,args:arguments,thisArg:d}),Me.__chain__=ke,Me}return se.apply(d,xa([this.value()],arguments))})}),d}function r6(){return Dr._===this&&(Dr._=c1),this}function Kf(){}function n6(d){return d=Nt(d),Ot(function(f){return Bu(f,d)})}var i6=Qu(Cr),o6=Qu(uh),a6=Qu(ph);function im(d){return Ke(d)?gh(ro(d)):zr(d)}function s6(d){return function(f){return d==null?r:Yo(d,f)}}var l6=Xh(),c6=Xh(!0);function qf(){return[]}function Qf(){return!1}function u6(){return{}}function d6(){return""}function h6(){return!0}function p6(d,f){if(d=Nt(d),d<1||d>te)return[];var w=j,T=Fn(d,j);f=pt(f),d-=j;for(var R=mh(T,f);++w<d;)f(w);return R}function f6(d){return It(d)?Cr(d,ro):oo(d)?[d]:Yn(i0(vr(d)))}function g6(d){var f=++rl;return vr(d)+f}var v6=Cc(function(d,f){return d+f},0),m6=_n("ceil"),y6=Cc(function(d,f){return d/f},1),b6=_n("floor");function x6(d){return d&&d.length?hs(d,Wi,Ia):r}function w6(d,f){return d&&d.length?hs(d,pt(f,2),Ia):r}function C6(d){return G0(d,Wi)}function _6(d,f){return G0(d,pt(f,2))}function S6(d){return d&&d.length?hs(d,Wi,La):r}function k6(d,f){return d&&d.length?hs(d,pt(f,2),La):r}var M6=Cc(function(d,f){return d*f},1),E6=_n("round"),T6=Cc(function(d,f){return d-f},0);function I6(d){return d&&d.length?vh(d,Wi):0}function L6(d,f){return d&&d.length?vh(d,pt(f,2)):0}return V.after=ee,V.ary=xe,V.assign=V9,V.assignIn=Kv,V.assignInWith=ip,V.assignWith=B9,V.at=$9,V.before=De,V.bind=Ne,V.bindAll=X3,V.bindKey=Ie,V.castArray=u9,V.chain=pd,V.chunk=od,V.compact=o0,V.concat=zi,V.cond=Y3,V.conforms=Z3,V.constant=Xf,V.countBy=Q1,V.create=W9,V.curry=Xe,V.curryRight=Je,V.debounce=rt,V.defaults=H9,V.defaultsDeep=U9,V.defer=Yr,V.delay=he,V.difference=er,V.differenceBy=dn,V.differenceWith=Gr,V.drop=Mn,V.dropRight=Si,V.dropRightWhile=kl,V.dropWhile=an,V.fill=Pc,V.filter=vd,V.flatMap=m0,V.flatMapDeep=Of,V.flatMapDepth=ep,V.flatten=ad,V.flattenDeep=Dc,V.flattenDepth=ui,V.flip=ie,V.flow=q3,V.flowRight=Q3,V.fromPairs=a0,V.functions=Q9,V.functionsIn=G9,V.groupBy=y0,V.initial=sd,V.intersection=s0,V.intersectionBy=Ra,V.intersectionWith=ld,V.invert=e3,V.invertBy=t3,V.invokeMap=tp,V.iteratee=Yf,V.keyBy=Nf,V.keys=$n,V.keysIn=$i,V.map=Ss,V.mapKeys=n3,V.mapValues=i3,V.matches=G3,V.matchesProperty=J3,V.memoize=ge,V.merge=o3,V.mergeWith=qv,V.method=e6,V.methodOf=t6,V.mixin=Zf,V.negate=Ve,V.nthArg=n6,V.omit=a3,V.omitBy=s3,V.once=ot,V.orderBy=zf,V.over=i6,V.overArgs=dt,V.overEvery=o6,V.overSome=a6,V.partial=lt,V.partialRight=mt,V.partition=Nc,V.pick=l3,V.pickBy=Qv,V.property=im,V.propertyOf=s6,V.pull=cd,V.pullAll=Rc,V.pullAllBy=Qn,V.pullAllWith=Na,V.pullAt=no,V.range=l6,V.rangeRight=c6,V.rearg=hn,V.reject=a,V.remove=di,V.rest=sr,V.reverse=ud,V.sampleSize=v,V.set=u3,V.setWith=d3,V.shuffle=y,V.slice=c0,V.sortBy=O,V.sortedUniq=h0,V.sortedUniqBy=ws,V.split=F3,V.spread=Va,V.tail=U1,V.take=j1,V.takeRight=p0,V.takeRightWhile=dd,V.takeWhile=Mf,V.tap=Df,V.throttle=Bf,V.thru=io,V.toArray=Xv,V.toPairs=Gv,V.toPairsIn=Jv,V.toPath=f6,V.toPlainObject=Zv,V.transform=h3,V.unary=l9,V.union=Ef,V.unionBy=X1,V.unionWith=Y1,V.uniq=Cs,V.uniqBy=Tf,V.uniqWith=Ml,V.unset=p3,V.unzip=hd,V.unzipWith=Vr,V.update=f3,V.updateWith=g3,V.values=Cd,V.valuesIn=v3,V.without=If,V.words=rm,V.wrap=c9,V.xor=Z1,V.xorBy=Lf,V.xorWith=Pf,V.zip=K1,V.zipObject=q1,V.zipObjectDeep=Af,V.zipWith=Vi,V.entries=Gv,V.entriesIn=Jv,V.extend=Kv,V.extendWith=ip,Zf(V,V),V.add=v6,V.attempt=nm,V.camelCase=x3,V.capitalize=em,V.ceil=m6,V.clamp=m3,V.clone=d9,V.cloneDeep=p9,V.cloneDeepWith=f9,V.cloneWith=h9,V.conformsTo=g9,V.deburr=tm,V.defaultTo=K3,V.divide=y6,V.endsWith=w3,V.eq=ra,V.escape=C3,V.escapeRegExp=_3,V.every=G1,V.find=md,V.findIndex=Fa,V.findKey=j9,V.findLast=J1,V.findLastIndex=Ac,V.findLastKey=X9,V.floor=b6,V.forEach=yd,V.forEachRight=Oc,V.forIn=Y9,V.forInRight=Z9,V.forOwn=K9,V.forOwnRight=q9,V.get=Hf,V.gt=v9,V.gte=m9,V.has=J9,V.hasIn=Uf,V.head=bs,V.identity=Wi,V.includes=bd,V.indexOf=ta,V.inRange=y3,V.invoke=r3,V.isArguments=zc,V.isArray=It,V.isArrayBuffer=y9,V.isArrayLike=Bi,V.isArrayLikeObject=sn,V.isBoolean=b9,V.isBuffer=El,V.isDate=x9,V.isElement=w9,V.isEmpty=C9,V.isEqual=_9,V.isEqualWith=S9,V.isError=$f,V.isFinite=k9,V.isFunction=ks,V.isInteger=Wv,V.isLength=rp,V.isMap=Hv,V.isMatch=M9,V.isMatchWith=E9,V.isNaN=T9,V.isNative=I9,V.isNil=P9,V.isNull=L9,V.isNumber=Uv,V.isObject=Zr,V.isObjectLike=Jr,V.isPlainObject=b0,V.isRegExp=Wf,V.isSafeInteger=A9,V.isSet=jv,V.isString=np,V.isSymbol=oo,V.isTypedArray=wd,V.isUndefined=D9,V.isWeakMap=F9,V.isWeakSet=R9,V.join=Oa,V.kebabCase=S3,V.last=qn,V.lastIndexOf=Fc,V.lowerCase=k3,V.lowerFirst=M3,V.lt=O9,V.lte=N9,V.max=x6,V.maxBy=w6,V.mean=C6,V.meanBy=_6,V.min=S6,V.minBy=k6,V.stubArray=qf,V.stubFalse=Qf,V.stubObject=u6,V.stubString=d6,V.stubTrue=h6,V.multiply=M6,V.nth=l0,V.noConflict=r6,V.noop=Kf,V.now=q,V.pad=E3,V.padEnd=T3,V.padStart=I3,V.parseInt=L3,V.random=b3,V.reduce=Vf,V.reduceRight=xd,V.repeat=P3,V.replace=A3,V.result=c3,V.round=E6,V.runInContext=oe,V.sample=l,V.size=S,V.snakeCase=D3,V.some=E,V.sortedIndex=u0,V.sortedIndexBy=kf,V.sortedIndexOf=za,V.sortedLastIndex=H1,V.sortedLastIndexBy=d0,V.sortedLastIndexOf=xs,V.startCase=R3,V.startsWith=O3,V.subtract=T6,V.sum=I6,V.sumBy=L6,V.template=N3,V.times=p6,V.toFinite=Ms,V.toInteger=Nt,V.toLength=Yv,V.toLower=z3,V.toNumber=Lo,V.toSafeInteger=z9,V.toString=vr,V.toUpper=V3,V.trim=B3,V.trimEnd=$3,V.trimStart=W3,V.truncate=H3,V.unescape=U3,V.uniqueId=g6,V.upperCase=j3,V.upperFirst=jf,V.each=yd,V.eachRight=Oc,V.first=bs,Zf(V,(function(){var d={};return Ci(V,function(f,w){ar.call(V.prototype,w)||(d[w]=f)}),d})(),{chain:!1}),V.VERSION=n,Dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){V[d].placeholder=V}),Dn(["drop","take"],function(d,f){Tt.prototype[d]=function(w){w=w===r?1:Qr(Nt(w),0);var T=this.__filtered__&&!f?new Tt(this):this.clone();return T.__filtered__?T.__takeCount__=Fn(w,T.__takeCount__):T.__views__.push({size:Fn(w,j),type:d+(T.__dir__<0?"Right":"")}),T},Tt.prototype[d+"Right"]=function(w){return this.reverse()[d](w).reverse()}}),Dn(["filter","map","takeWhile"],function(d,f){var w=f+1,T=w==J||w==le;Tt.prototype[d]=function(R){var W=this.clone();return W.__iteratees__.push({iteratee:pt(R,3),type:w}),W.__filtered__=W.__filtered__||T,W}}),Dn(["head","last"],function(d,f){var w="take"+(f?"Right":"");Tt.prototype[d]=function(){return this[w](1).value()[0]}}),Dn(["initial","tail"],function(d,f){var w="drop"+(f?"":"Right");Tt.prototype[d]=function(){return this.__filtered__?new Tt(this):this[w](1)}}),Tt.prototype.compact=function(){return this.filter(Wi)},Tt.prototype.find=function(d){return this.filter(d).head()},Tt.prototype.findLast=function(d){return this.reverse().find(d)},Tt.prototype.invokeMap=Ot(function(d,f){return typeof d=="function"?new Tt(this):this.map(function(w){return Fi(w,d,f)})}),Tt.prototype.reject=function(d){return this.filter(Ve(pt(d)))},Tt.prototype.slice=function(d,f){d=Nt(d);var w=this;return w.__filtered__&&(d>0||f<0)?new Tt(w):(d<0?w=w.takeRight(-d):d&&(w=w.drop(d)),f!==r&&(f=Nt(f),w=f<0?w.dropRight(-f):w.take(f-d)),w)},Tt.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Tt.prototype.toArray=function(){return this.take(j)},Ci(Tt.prototype,function(d,f){var w=/^(?:filter|find|map|reject)|While$/.test(f),T=/^(?:head|last)$/.test(f),R=V[T?"take"+(f=="last"?"Right":""):f],W=T||/^find/.test(f);R&&(V.prototype[f]=function(){var G=this.__wrapped__,re=T?[1]:arguments,se=G instanceof Tt,ke=re[0],Me=se||It(G),Re=function(jt){var tr=R.apply(V,xa([jt],re));return T&&Ue?tr[0]:tr};Me&&w&&typeof ke=="function"&&ke.length!=1&&(se=Me=!1);var Ue=this.__chain__,at=!!this.__actions__.length,yt=W&&!Ue,zt=se&&!at;if(!W&&Me){G=zt?G:new Tt(this);var bt=d.apply(G,re);return bt.__actions__.push({func:io,args:[Re],thisArg:r}),new Rn(bt,Ue)}return yt&&zt?d.apply(this,re):(bt=this.thru(Re),yt?T?bt.value()[0]:bt.value():bt)})}),Dn(["pop","push","shift","sort","splice","unshift"],function(d){var f=Wo[d],w=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",T=/^(?:pop|shift)$/.test(d);V.prototype[d]=function(){var R=arguments;if(T&&!this.__chain__){var W=this.value();return f.apply(It(W)?W:[],R)}return this[w](function(G){return f.apply(It(G)?G:[],R)})}}),Ci(Tt.prototype,function(d,f){var w=V[f];if(w){var T=w.name+"";ar.call(al,T)||(al[T]=[]),al[T].push({name:f,func:w})}}),al[wl(r,k).name]=[{name:"wrapper",func:r}],Tt.prototype.clone=Tu,Tt.prototype.reverse=kh,Tt.prototype.value=cl,V.prototype.at=fd,V.prototype.chain=_s,V.prototype.commit=gd,V.prototype.next=f0,V.prototype.plant=Ff,V.prototype.reverse=v0,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=Rf,V.prototype.first=V.prototype.head,Uo&&(V.prototype[Uo]=g0),V},el=mf();go?((go.exports=el)._=el,Jl._=el):Dr._=el}).call(As)})(Ap,Ap.exports);var nt=Ap.exports;function M2(e,t,r){const n=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],i=e.length;let o=0;for(;o<i;){const s=e[o];n[0]=Math.max(s[t]??Number.MIN_SAFE_INTEGER,n[0]),n[1]=Math.min(s[r]??Number.MAX_SAFE_INTEGER,n[1]),++o}return n}const Wk=/\\(\\)?/g,Hk=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function en(e,t,r){if(Sr(e)){const n=[];t.replace(Hk,(u,...c)=>{let h=u;return Sr(c[1])?h=c[2].replace(Wk,"$1"):Sr(c[0])&&(h=c[0].trim()),n.push(h),""});let i=e,o=0;const s=n.length;for(;Sr(i)&&o<s;)i=i==null?void 0:i[n[o++]];return Sr(i)?i:r??"--"}return r??"--"}function Sr(e){return e!=null}function Rm(e,t,r,n){const i=new Path2D;if(t.length>1){i.moveTo(t[0],n);for(let o=0;o<t.length;o++)i.lineTo(t[o],r[o]);i.lineTo(t[t.length-1],n)}return i}function Fl(e,t,r,n,i){if(t.length===0)return;const o=e.canvas;e.save(),e.fillStyle=i,e.clip(Rm(e,t,r,o.height)),e.fill(Rm(e,t,n,0)),e.restore()}function co(e,t){const r=[],n=2/(t+1);let i=0;for(let o=0;o<t;o++)i+=e[o];i/=t,r[t-1]=i;for(let o=t;o<e.length;o++){const s=(e[o]-r[o-1])*n+r[o-1];r[o]=s}for(let o=0;o<t-1;o++)r[o]=r[t-1];return r}function E2(e,t){const r=[];for(let n=0;n<e.length;n++){if(n<t-1){r[n]=0;continue}let i=0;for(let o=0;o<t;o++)i+=e[n-o];r[n]=i/t}return r}function Rl(e){if(e.startsWith("rgb(")){const o=e.match(/\d+/g);if(o&&o.length===3)return{r:parseInt(o[0]),g:parseInt(o[1]),b:parseInt(o[2])}}let t=e.replace(/^#/,"");if(!/^[0-9A-Fa-f]{6}$/.test(t))return{r:233,g:30,b:99};const r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return{r,g:n,b:i}}function Uk(){return{target:{color:"#279d8233"},loss:{color:"#f2385a33"},midLine:{color:"#76808F80",size:1},targetText:{backgroundColor:"#279d82"},lossText:{backgroundColor:"#f2385a"}}}function Ba(e,t,r){if(r==="top"){if(!nt.isNumber(e.value)||!nt.isNumber(t.value))return;e.value<t.value&&(e.value=t.value)}else if(r==="bottom"){if(!nt.isNumber(e.value)||!nt.isNumber(t.value))return;e.value>t.value&&(e.value=t.value)}else r==="vertical"?(e.timestamp=t.timestamp,e.dataIndex=t.dataIndex):e.value=t.value}function Om(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}}function jk(e){return({coordinates:t,overlay:r,yAxis:n,xAxis:i})=>{var o,s,u,c,h;if(!Sr(n)||!Sr(i))return[];if(t.length<2)return[];const p=[];return p.push({type:"rect",attrs:Om(t[0],t[1]),styles:e?(o=r.styles)==null?void 0:o.target:(s=r.styles)==null?void 0:s.loss}),p.push({type:"line",attrs:{coordinates:[{x:t[0].x,y:t[1].y},t[1]]},styles:(u=r.styles)==null?void 0:u.midLine}),Sr(t[2])&&p.push({type:"rect",attrs:Om(t[1],t[2]),styles:e?(c=r.styles)==null?void 0:c.loss:(h=r.styles)==null?void 0:h.target}),p}}function Xk(e){return({chart:t,coordinates:r,overlay:n,yAxis:i,xAxis:o})=>{var s,u,c,h,p,g;if(!Sr(i)||!Sr(o))return[];if(r.length<3)return[];if(n.currentStep!==-1)return[];const m=n.extendData;if(!m.hovered&&!m.selected)return[];const b=t.getLocale(),x=n.points;if(!nt.isNumber(x[0].value)||!nt.isNumber(x[1].value)||!nt.isNumber(x[2].value)||!nt.isNumber(x[0].timestamp)||!nt.isNumber(x[1].timestamp)||!nt.isNumber(x[2].timestamp))return[];let C=0;i.isInCandle()?C=((s=t.getSymbol())==null?void 0:s.pricePrecision)??2:t.getIndicators({paneId:n.paneId}).forEach(B=>{C=Math.max(C,B.precision)});const _=[],k=(o.convertTimestampToPixel(x[0].timestamp)+o.convertTimestampToPixel(x[1].timestamp))/2,M=t.getDecimalFold().format(t.getThousandsSeparator().format((x[0].value-x[1].value).toFixed(C))),L=100*(x[0].value/x[1].value-1),D=I(e?"target":"loss",b);_.push({type:"text",attrs:{x:k,y:r[0].y,text:`${D}${M} (${L.toFixed(2)}%)`,baseline:"bottom",align:"center"},styles:e?(u=n.styles)==null?void 0:u.targetText:(c=n.styles)==null?void 0:c.lossText});const P=t.getDecimalFold().format(t.getThousandsSeparator().format((x[1].value-x[2].value).toFixed(C))),$=-100*(x[2].value/x[1].value-1),A=I(e?"loss":"target",b);_.push({type:"text",attrs:{x:k,y:r[2].y,text:`${A}${P} (${$.toFixed(2)}%)`,baseline:"top",align:"center"},styles:e?(h=n.styles)==null?void 0:h.lossText:(p=n.styles)==null?void 0:p.targetText});const N=e?L/$:$/L;if(!nt.isNumber(N)||N<=0)return _;const z=I("riskReward",b);return _.push({type:"text",attrs:{x:k,y:r[1].y,text:`${z}${N.toFixed(2)}`,baseline:"middle",align:"center"},styles:(g=n.styles)==null?void 0:g.targetText}),_}}function T2(e){return t=>{const r=jk(e)(t),n=Xk(e)(t);return[...r,...n]}}const I2={styles:Uk(),totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,extendData:{hovered:!1,selected:!1},onMouseEnter:({overlay:e})=>{const t=e.extendData;return t.hovered=!0,!0},onMouseLeave:({overlay:e})=>{const t=e.extendData;return t.hovered=!1,!0},onSelected:({overlay:e})=>{const t=e.extendData;return t.selected=!0,!0},onDeselected:({overlay:e})=>{const t=e.extendData;return t.selected=!1,!0},performEventPressedMove:({points:e,performPoint:t,performPointIndex:r})=>{r===0?(Ba(t,e[1],"top"),Ba(e[2],t,"vertical")):r===1?(Ba(t,e[0],"bottom"),Ba(t,e[2],"top")):r===2&&(Ba(t,e[1],"bottom"),Ba(e[0],t,"vertical"))},performEventMoveForDrawing:({points:e,performPoint:t,currentStep:r})=>{r===2?Ba(t,e[0],"bottom"):r===3&&(Ba(t,e[1],"bottom"),e[1].timestamp===t.timestamp?Ba(t,e[0],"vertical"):Ba(e[0],t,"vertical"))}},Yk={name:"longPosition",createPointFigures:T2(!0),...I2},Zk={name:"shortPosition",createPointFigures:T2(!1),...I2},Kk=[Sk,kk,Mk,Tk,Ek,Ik,Lk,Pk,Ak,Dk,Fk,Rk,Ok,Nk,zk,Vk,Bk,$k,Yk,Zk],L2={isMainIndicator:!0,isSubIndicator:!1,name:"volumeBars",shortName:"Volume",zLevel:-1,figures:[],styles:{bars:[{upColor:"rgba(0, 252, 0, 0.8)",downColor:"rgba(252, 0, 0, 0.8)",noChangeColor:"rgba(128, 128, 128, 0.8)"}],custom:[{opacity:.3}]},calc:e=>e.map(t=>({volume:t.volume,close:t.close,open:t.open})),draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i})=>{const{realFrom:o,realTo:s}=t.getVisibleRange(),{gapBar:u,halfGapBar:c}=t.getBarSpace(),{result:h}=r;let p=0;for(let b=o;b<s;b++){const x=h[b];x&&(p=Math.max(p,x.volume))}const g=n.height*.4,m=jd("rect");for(let b=o;b<s;b++){const x=h[b];if(x){const C=Math.round(x.volume/p*g),_=qk(x.open<x.close?r.styles.bars[0].upColor:x.open>x.close?r.styles.bars[0].downColor:r.styles.bars[0].noChangeColor,r.styles.custom[0].opacity);new m({name:"rect",attrs:{x:i.convertToPixel(b)-c,y:n.height-C,width:u,height:C},styles:{color:_}}).draw(e)}}return!0}};function qk(e,t){return e.replace(/rgba\((\d+), (\d+), (\d+), (.+)\)/,`rgba($1, $2, $3, ${t})`)}const P2={isMainIndicator:!0,isSubIndicator:!1,name:"Volume Profile Fixed Range",shortName:"Vol Profile",zLevel:-1,figures:[],calcParams:[{name:"Value Area Percentage",type:"number",value:.7,min:0,max:1}],styles:{lines:[{color:"#87CEFA",size:1,style:"dashed"},{color:"#ff0000",size:3},{color:"#87CEFA",size:1,style:"dashed"}],bars:[{upColor:"rgb(255,127,80)",downColor:"rgba(0, 128, 0, 0.8)"}]},calc:(e,t)=>e,createTooltipDataSource:({chart:e,indicator:t,crosshair:r})=>{var n,i,o;const s=t.result[r.dataIndex];return console.log(r.realX),s?{legends:[{title:"POC",value:{text:s.pocPrice.toFixed(2),color:"blue"}},{title:"Value Area Low",value:{text:s.valueAreaLowPrice.toFixed(2),color:"green"}},{title:"Value Area High",value:{text:s.valueAreaHighPrice.toFixed(2),color:((o=(i=(n=t==null?void 0:t.styles)==null?void 0:n.lines)==null?void 0:i[0])==null?void 0:o.color)??"white"}}]}:{}},draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s,u,c,h,p,g,m,b,x,C,_,k,M,L,D,P,$,A,N,z,B,Q,ne,Z,J,ue,le,ae,te,ve,pe,j,H,de;const{realFrom:U,realTo:fe}=t.getVisibleRange(),{gapBar:ce,halfGapBar:Oe}=t.getBarSpace(),Ee=Object.values(r.result).slice(U,fe);let Fe=Math.max(40,Math.min(200,Math.floor(Ee.length/5)*2));n.height/Fe<ce+2&&(Fe=Math.floor(n.height/(ce+1)));const Ce=new Array(Fe).fill(0),Te=Math.min(...Ee.map(Rt=>Rt.low)),et=(Math.max(...Ee.map(Rt=>Rt.high))-Te)/Fe,Qe=jd("line"),it=jd("rect");Ee.forEach(Rt=>{if(Rt.volume===void 0)return;const Zt=Math.max(0,Math.min(Fe-1,Math.floor((Rt.low-Te)/et))),nr=Math.max(0,Math.min(Fe-1,Math.floor((Rt.high-Te)/et))),Kr=Rt.high-Rt.low;for(let hr=Zt;hr<=nr;hr++){const Br=Te+hr*et,Et=Br+et,We=Math.max(Rt.low,Br),_t=Math.min(Rt.high,Et)-We;if(_t>0){const wt=_t/Kr;Ce[hr]+=Rt.volume*wt}}});const He=Ce.indexOf(Math.max(...Ce)),ct=Te+(He+.5)*et,ut=Ce.reduce((Rt,Zt)=>Rt+Zt,0),Qt=typeof((s=r.calcParams)==null?void 0:s[0])=="object"&&r.calcParams[0]!==null&&"value"in r.calcParams[0]?Number(r.calcParams[0].value):.7,Gt=ut*Qt;let Mt=0,gt=0,Yt=Ce.length-1;for(let Rt=He;Rt>=0;Rt--)if(Mt+=Ce[Rt],Mt>Gt/2){gt=Rt;break}Mt=0;for(let Rt=He;Rt<Ce.length;Rt++)if(Mt+=Ce[Rt],Mt>Gt/2){Yt=Rt;break}const cn=Te+gt*et,xn=Te+(Yt+1)*et,dr={volumeProfile:Ce,pocPrice:ct,valueAreaLowPrice:cn,valueAreaHighPrice:xn};if(dr.volumeProfile=Ce,dr.pocPrice=ct,dr.valueAreaHighPrice=xn,dr.valueAreaLowPrice=cn,dr.volumeProfile[0]!==void 0){new Qe({name:"line",styles:{style:(h=(c=(u=r==null?void 0:r.styles)==null?void 0:u.lines)==null?void 0:c[1])==null?void 0:h.style,color:(m=(g=(p=r==null?void 0:r.styles)==null?void 0:p.lines)==null?void 0:g[1])==null?void 0:m.color,size:(C=(x=(b=r==null?void 0:r.styles)==null?void 0:b.lines)==null?void 0:x[1])==null?void 0:C.size},attrs:{coordinates:[{x:i.convertToPixel(U),y:o.convertToPixel(dr.pocPrice)},{x:i.convertToPixel(fe),y:o.convertToPixel(dr.pocPrice)}]}}).draw(e),new Qe({name:"line",styles:{style:(M=(k=(_=r==null?void 0:r.styles)==null?void 0:_.lines)==null?void 0:k[0])==null?void 0:M.style,color:(P=(D=(L=r==null?void 0:r.styles)==null?void 0:L.lines)==null?void 0:D[0])==null?void 0:P.color,size:(N=(A=($=r==null?void 0:r.styles)==null?void 0:$.lines)==null?void 0:A[0])==null?void 0:N.size},attrs:{coordinates:[{x:i.convertToPixel(U),y:o.convertToPixel(dr.valueAreaLowPrice)},{x:i.convertToPixel(fe),y:o.convertToPixel(dr.valueAreaLowPrice)}]}}).draw(e),new Qe({name:"line",styles:{style:(Q=(B=(z=r==null?void 0:r.styles)==null?void 0:z.lines)==null?void 0:B[2])==null?void 0:Q.style,color:(J=(Z=(ne=r==null?void 0:r.styles)==null?void 0:ne.lines)==null?void 0:Z[2])==null?void 0:J.color,size:(ae=(le=(ue=r==null?void 0:r.styles)==null?void 0:ue.lines)==null?void 0:le[2])==null?void 0:ae.size},attrs:{coordinates:[{x:i.convertToPixel(U),y:o.convertToPixel(dr.valueAreaHighPrice)},{x:i.convertToPixel(fe),y:o.convertToPixel(dr.valueAreaHighPrice)}]}}).draw(e);let Rt=0;const Zt=n.height*.4;for(let nr=0;nr<dr.volumeProfile.length;nr++)Rt=Math.max(Rt,dr.volumeProfile[nr]);for(let nr=0;nr<Ce.length;nr++){const Kr=Math.round(Ce[nr]/Rt*Zt),hr=o.convertToPixel(Te+nr*et),Br=nr>=gt&&nr<=Yt?((pe=(ve=(te=r==null?void 0:r.styles)==null?void 0:te.bars)==null?void 0:ve[0])==null?void 0:pe.upColor)??"rgb(255,127,80)":((de=(H=(j=r==null?void 0:r.styles)==null?void 0:j.bars)==null?void 0:H[0])==null?void 0:de.downColor)??"rgba(0, 128, 0, 0.8)";new it({name:"rect",attrs:{x:n.width-Kr,y:hr-Oe,width:Kr,height:Math.min(17,ce)},styles:{color:Br}}).draw(e)}}return!0}},Qk={isMainIndicator:!1,isSubIndicator:!0,name:"WR",shortName:"WR",calcParams:[{name:"period1",type:"number",value:6},{name:"period2",type:"number",value:10},{name:"period3",type:"number",value:14}],styles:{lines:[{color:"#A020F0",size:1},{color:"#FFD700",size:1},{color:"#FF6E6E",size:1}]},figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`wr${r+1}`,title:`WR${r+1}: `,type:"line"})),calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r;return e.reduce((o,s,u)=>{const c={},h=s.close;return i.forEach((p,g)=>{const m=p.value-1;if(u>=m){const b=M2(e.slice(u-m,u+1),"high","low"),x=b[0],C=b[1],_=x-C,k=n[g].key;c[k]=_===0?0:(h-x)/_*100}}),Object.keys(c).length>0&&(o[s.timestamp]=c),o},{})}},Gk={isMainIndicator:!1,isSubIndicator:!0,name:"TRIX",shortName:"TRIX",calcParams:[{name:"period",type:"number",value:12},{name:"maPeriod",type:"number",value:9}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,c=0,h=0;const p={};return e.reduce((g,m,b)=>{var x;const C=m.close;if(n+=C,b>=r[0].value-1&&(b>r[0].value-1?i=(2*C+(r[0].value-1)*i)/(r[0].value+1):i=n/r[0].value,u+=i,b>=r[0].value*2-2&&(b>r[0].value*2-2?o=(2*i+(r[0].value-1)*o)/(r[0].value+1):o=u/r[0].value,c+=o,b>=r[0].value*3-3))){let _=0,k=0;b>r[0].value*3-3?(_=(2*o+(r[0].value-1)*s)/(r[0].value+1),k=(_-s)/s*100):_=c/r[0].value,s=_,p[m.timestamp]=k,h+=k;const M={trix:k};if(b>=r[0].value*3+r[1].value-4){M.maTrix=h/r[1].value;const L=(x=e[b-(r[1].value-1)])==null?void 0:x.timestamp;h-=p[L]??0}g[m.timestamp]=M}return g},{})}};function Nm(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&n&&(n.close>n.open?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.close<n.open&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}}const Jk={isMainIndicator:!1,isSubIndicator:!0,name:"VOL",shortName:"VOL",series:"volume",calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},Nm()],regenerateFigures:e=>{const t=e.map((r,n)=>({key:`ma${n+1}`,title:`MA${r}: `,type:"line"}));return t.push(Nm()),t},calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r,o=[];return e.reduce((s,u,c)=>{const h=u.volume??0,p={volume:h,open:u.open,close:u.close};return i.forEach((g,m)=>{if(o[m]=(o[m]??0)+h,c>=g-1){const b=n[m].key;p[b]=o[m]/g,o[m]-=e[c-(g-1)].volume??0}}),s[u.timestamp]=p,s},{})}},eM={isMainIndicator:!1,isSubIndicator:!0,name:"VR",shortName:"VR",calcParams:[{name:"params_1",type:"number",value:26},{name:"params_2",type:"number",value:6}],styles:{lines:[{color:"#FF6E6E",size:2},{color:"#FFD700",size:4}]},figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0;return e.reduce((u,c,h)=>{var p;const g={},m=c.close,b=(e[h-1]??c).close,x=c.volume??0;if(m>b?n+=x:m<b?i+=x:o+=x,h>=r[0].value-1){const C=o/2;i+C===0?g.vr=0:g.vr=(n+C)/(i+C)*100,s+=g.vr,h>=r[0].value+r[1].value-2&&(g.maVr=s/r[1].value,s-=((p=u[e[h-(r[1].value-1)].timestamp])==null?void 0:p.vr)??0);const _=e[h-(r[0].value-1)],k=e[h-r[0].value]??_,M=_.close,L=_.volume??0;M>k.close?n-=L:M<k.close?i-=L:o-=L,u[c.timestamp]=g}return u},{})}},tM={isMainIndicator:!1,isSubIndicator:!0,name:"KDJ",shortName:"KDJ",calcParams:[{name:"period",type:"number",value:9},{name:"dPeriod",type:"number",value:3},{name:"jPeriod",type:"number",value:3}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n={};return e.reduce((i,o,s)=>{var u;const c=o.close;if(s>=r[0].value-1){const h=M2(e.slice(s-(r[0].value-1),s+1),"high","low"),p=h[0],g=h[1],m=p-g,b=(c-g)/(m===0?1:m)*100,x=(u=e[s-1])==null?void 0:u.timestamp,C=x?n[x]:void 0,_=((r[1].value-1)*((C==null?void 0:C.k)??50)+b)/r[1].value,k=((r[2].value-1)*((C==null?void 0:C.d)??50)+_)/r[2].value,M=3*_-2*k,L={k:_,d:k,j:M};n[o.timestamp]=L,i[o.timestamp]=L}return i},{})}},rM={isMainIndicator:!0,isSubIndicator:!1,name:"SAR",shortName:"SAR",series:"price",calcParams:[{name:"startAf",type:"number",value:2},{name:"step",type:"number",value:2},{name:"maxAf",type:"number",value:20}],precision:2,shouldOhlc:!0,styles:{circles:[{upColor:"#FF7F50",downColor:"#A020F0",noChangeColor:"#A8A8A8"}]},figures:[{key:"sar",title:"SAR: ",type:"circle",styles:({data:e,indicator:t,defaultStyles:r})=>{const{current:n}=e,i=(n==null?void 0:n.sar)??Number.MIN_SAFE_INTEGER,o=(((n==null?void 0:n.high)??0)+((n==null?void 0:n.low)??0))/2;return{color:i<o?en(t.styles,"circles[0].upColor",r.circles[0].upColor):en(t.styles,"circles[0].downColor",r.circles[0].downColor)}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value/100,i=r[1].value/100,o=r[2].value/100;let s=n,u=-100,c=!1,h=0;return e.reduce((p,g,m)=>{const b=h,x=g.high,C=g.low;if(c){(u===-100||u<x)&&(u=x,s=Math.min(s+i,o)),h=b+s*(u-b);const _=Math.min(e[Math.max(1,m)-1].low,C);h>g.low?(h=u,s=n,u=-100,c=!c):h>_&&(h=_)}else{(u===-100||u>C)&&(u=C,s=Math.min(s+i,o)),h=b+s*(u-b);const _=Math.max(e[Math.max(1,m)-1].high,x);h<g.high?(h=u,s=0,u=-100,c=!c):h<_&&(h=_)}return p[g.timestamp]={high:x,low:C,sar:h},p},{})}},nM={isMainIndicator:!1,isSubIndicator:!0,name:"ROC",shortName:"ROC",calcParams:[{name:"period",type:"number",value:12},{name:"maPeriod",type:"number",value:6}],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0;const i={};return e.reduce((o,s,u)=>{var c;if(u>=r[0].value-1){const h=s.close,p=(e[u-r[0].value]??e[u-(r[0].value-1)]).close;let g=0;p!==0&&(g=(h-p)/p*100),i[s.timestamp]=g,n+=g;const m={roc:g};if(u>=r[0].value-1+r[1].value-1){m.maRoc=n/r[1].value;const b=(c=e[u-(r[1].value-1)])==null?void 0:c.timestamp;n-=i[b]??0}o[s.timestamp]=m}return o},{})}},iM={isMainIndicator:!1,isSubIndicator:!0,name:"RSI",shortName:"RSI",calcParams:[{name:"period1",type:"number",value:6},{name:"period2",type:"number",value:12},{name:"period3",type:"number",value:24}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#ff0000",size:1}]},figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>{const n=r+1;return{key:`rsi${n}`,title:`RSI${n}: `,type:"line"}}),calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r,o=[],s=[];return e.reduce((u,c,h)=>{const p={},g=(e[h-1]??c).close,m=c.close-g;return i.forEach((b,x)=>{if(m>0?o[x]=(o[x]??0)+m:s[x]=(s[x]??0)+Math.abs(m),h>=b.value-1){const C=n[x].key;s[x]!==0?p[C]=100-100/(1+o[x]/s[x]):p[C]=0;const _=e[h-(b.value-1)],k=e[h-b.value]??_,M=_.close-k.close;M>0?o[x]-=M:s[x]-=Math.abs(M)}}),Object.keys(p).length>0&&(u[c.timestamp]=p),u},{})}},oM={isMainIndicator:!0,isSubIndicator:!1,name:"SMA",shortName:"SMA",series:"price",calcParams:[{name:"period1",type:"number",value:12},{name:"period2",type:"number",value:2}],precision:2,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:(e,t)=>{const r=t.calcParams;let n=0,i=0;return e.reduce((o,s,u)=>{const c=s.close;return n+=c,u>=r[0].value-1&&(u>r[0].value-1?i=(c*r[1].value+i*(r[0].value-r[1].value+1))/(r[0].value+1):i=n/r[0].value,o[s.timestamp]={sma:i}),o},{})}},aM={isMainIndicator:!1,isSubIndicator:!0,name:"PVT",shortName:"PVT",precision:2,styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:e=>{let t=0;return e.reduce((r,n,i)=>{const o=n.close,s=n.volume??0;if(!o||o<=0)return r;if(i===0)return t=0,r[n.timestamp]={pvt:0},r;const u=e[i-1].close;if(!u||u<=0)return r;const c=(o-u)/u*s;return t+=c,r[n.timestamp]={pvt:Number(t.toFixed(2))},r},{})}},sM={isMainIndicator:!1,isSubIndicator:!0,name:"PSY",shortName:"PSY",calcParams:[{name:"params_1",type:"number",value:12},{name:"params_2",type:"number",value:6}],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0;const o=[],s=[];return e.reduce((u,c,h)=>{const p={},g=(e[h-1]??c).close,m=c.close-g>0?1:0;return o.push(m),n+=m,h>=r[0].value-1&&(p.psy=n/r[0].value*100,i+=p.psy,h>=r[0].value+r[1].value-2&&(p.maPsy=i/r[1].value,i-=s[h-(r[1].value-1)].psy??0),n-=o[h-(r[0].value-1)]),s.push(p),u[c.timestamp]=p,u},{})}},lM={isMainIndicator:!0,isSubIndicator:!1,name:"MA",shortName:"MA",series:"price",calcParams:[{name:"ma1",type:"number",value:5},{name:"ma2",type:"number",value:10},{name:"ma3",type:"number",value:30},{name:"ma4",type:"number",value:60}],precision:2,shouldOhlc:!0,styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA30: ",type:"line"},{key:"ma4",title:"MA60: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`ma${r+1}`,title:`MA${t.value}: `,type:"line"})),calc:(e,t)=>{const r=t.calcParams,n=[];return e.reduce((i,o,s)=>{const u={},c=o.close;return r.forEach((h,p)=>{if(n[p]=(n[p]??0)+c,s>=h.value-1){const g=t.figures[p].key;u[g]=n[p]/h.value,n[p]-=e[s-(h.value-1)].close}}),Object.keys(u).length>0&&(i[o.timestamp]=u),i},{})}},cM={isMainIndicator:!1,isSubIndicator:!0,name:"MTM",shortName:"MTM",calcParams:[{name:"params_1",type:"number",value:12},{name:"params_2",type:"number",value:6}],styles:{lines:[{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0;const i={};return e.reduce((o,s,u)=>{var c;if(u>=r[0].value){const h=s.close,p=e[u-r[0].value].close,g=h-p;i[s.timestamp]=g,n+=g;const m={mtm:g};if(u>=r[0].value+r[1].value-1){m.maMtm=n/r[1].value;const b=(c=e[u-(r[1].value-1)])==null?void 0:c.timestamp;n-=i[b]??0}o[s.timestamp]=m}return o},{})}},uM={isMainIndicator:!1,isSubIndicator:!0,name:"DMI",shortName:"DMI",calcParams:[{name:"period",type:"number",value:14},{name:"adxrPeriod",type:"number",value:6}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,c=0,h=0,p=0;const g={};return e.reduce((m,b,x)=>{var C;const _=e[x-1]??b,k=_.close,M=b.high,L=b.low,D=M-L,P=Math.abs(M-k),$=Math.abs(k-L),A=M-_.high,N=_.low-L,z=Math.max(Math.max(D,P),$),B=A>0&&A>N?A:0,Q=N>0&&N>A?N:0;if(n+=z,i+=B,o+=Q,x>=r[0].value-1){x>r[0].value-1?(s=s-s/r[0].value+z,u=u-u/r[0].value+B,c=c-c/r[0].value+Q):(s=n,u=i,c=o);let ne=0,Z=0;s!==0&&(ne=u*100/s,Z=c*100/s);let J=0;if(Z+ne!==0&&(J=Math.abs(Z-ne)/(Z+ne)*100),h+=J,x>=r[0].value*2-2){x>r[0].value*2-2?p=(p*(r[0].value-1)+J)/r[0].value:p=h/r[0].value,g[b.timestamp]=p;const ue={pdi:ne,mdi:Z,adx:p};if(x>=r[0].value*2+r[1].value-3){const le=(C=e[x-(r[1].value-1)])==null?void 0:C.timestamp,ae=g[le]??0;ue.adxr=(ae+p)/2}m[b.timestamp]=ue}else m[b.timestamp]={pdi:ne,mdi:Z}}return m},{})}},dM={isMainIndicator:!1,isSubIndicator:!0,name:"EMV",shortName:"EMV",calcParams:[{name:"params_1",type:"number",value:14},{name:"params_2",type:"number",value:9}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0;const i=[],o={};return e.reduce((s,u,c)=>{if(c>0){const h=e[c-1],p=u.high,g=u.low,m=u.volume??0,b=(p+g)/2-(h.high+h.low)/2;let x;if(m===0||p-g===0)x=0;else{const _=m/1e8/(p-g);x=b/_}o[u.timestamp]=x,n+=x,i.push(x);const C={emv:x};c>=r[0].value&&(C.maEmv=n/r[0].value,n-=i[c-r[0].value]),s[u.timestamp]=C}return s},{})}},hM={isMainIndicator:!0,isSubIndicator:!1,name:"EMA",shortName:"EMA",series:"price",calcParams:[{name:"period1",type:"number",value:6},{name:"period2",type:"number",value:12},{name:"period3",type:"number",value:20}],styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`ema${r+1}`,title:`EMA${t.value}: `,type:"line"})),calc:(e,t)=>{const r=t.calcParams;let n=0;const i=[];return e.reduce((o,s,u)=>{const c={},h=s.close;return n+=h,r.forEach((p,g)=>{if(u>=p.value-1){u>p.value-1?i[g]=(2*h+(p.value-1)*i[g])/(p.value+1):i[g]=n/p.value;const m=t.figures[g].key;c[m]=i[g]}}),Object.keys(c).length>0&&(o[s.timestamp]=c),o},{})}},pM={isMainIndicator:!1,isSubIndicator:!0,name:"CR",shortName:"CR",calcParams:[{name:"cr",type:"number",value:26},{name:"ma1",type:"number",value:10},{name:"ma2",type:"number",value:20},{name:"ma3",type:"number",value:40},{name:"ma4",type:"number",value:60}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#FFFF00",size:1},{color:"#007FFF",size:1},{color:"#ff0000",size:1}]},figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=Math.ceil(r[1].value/2.5+1),i=Math.ceil(r[2].value/2.5+1),o=Math.ceil(r[3].value/2.5+1),s=Math.ceil(r[4].value/2.5+1);let u=0;const c=[];let h=0;const p=[];let g=0;const m=[];let b=0;const x=[],C={};return e.reduce((_,k,M)=>{var L,D,P,$;const A=e[M-1]??k,N=(A.high+A.close+A.low+A.open)/4,z=Math.max(0,k.high-N),B=Math.max(0,N-k.low);if(M>=r[0].value-1){let Q;B!==0?Q=z/B*100:Q=0,C[k.timestamp]=Q,u+=Q,h+=Q,g+=Q,b+=Q;const ne={cr:Q};if(M>=r[0].value+r[1].value-2){c.push(u/r[1].value),M>=r[0].value+r[1].value+n-3&&(ne.ma1=c[c.length-1-n]);const Z=(L=e[M-(r[1].value-1)])==null?void 0:L.timestamp;u-=C[Z]??0}if(M>=r[0].value+r[2].value-2){p.push(h/r[2].value),M>=r[0].value+r[2].value+i-3&&(ne.ma2=p[p.length-1-i]);const Z=(D=e[M-(r[2].value-1)])==null?void 0:D.timestamp;h-=C[Z]??0}if(M>=r[0].value+r[3].value-2){m.push(g/r[3].value),M>=r[0].value+r[3].value+o-3&&(ne.ma3=m[m.length-1-o]);const Z=(P=e[M-(r[3].value-1)])==null?void 0:P.timestamp;g-=C[Z]??0}if(M>=r[0].value+r[4].value-2){x.push(b/r[4].value),M>=r[0].value+r[4].value+s-3&&(ne.ma4=x[x.length-1-s]);const Z=($=e[M-(r[4].value-1)])==null?void 0:$.timestamp;b-=C[Z]??0}_[k.timestamp]=ne}return _},{})}},fM={isMainIndicator:!1,isSubIndicator:!0,name:"DMA",shortName:"DMA",calcParams:[{name:"params_1",type:"number",value:10},{name:"params_2",type:"number",value:50},{name:"params_3",type:"number",value:10}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=Math.max(r[0].value,r[1].value);let i=0,o=0,s=0;const u={};return e.reduce((c,h,p)=>{var g;const m=h.close;i+=m,o+=m;let b=0,x=0;if(p>=r[0].value-1&&(b=i/r[0].value,i-=e[p-(r[0].value-1)].close),p>=r[1].value-1&&(x=o/r[1].value,o-=e[p-(r[1].value-1)].close),p>=n-1){const C=b-x;u[h.timestamp]=C,s+=C;const _={dma:C};if(p>=n+r[2].value-2){_.ama=s/r[2].value;const k=(g=e[p-(r[2].value-1)])==null?void 0:g.timestamp;s-=u[k]??0}c[h.timestamp]=_}return c},{})}},gM={isMainIndicator:!0,isSubIndicator:!1,name:"BBI",shortName:"BBI",series:"price",precision:2,calcParams:[{name:"period1",type:"number",value:3},{name:"period2",type:"number",value:6},{name:"period3",type:"number",value:12},{name:"period4",type:"number",value:24}],shouldOhlc:!0,styles:{lines:[{color:"#A020F0"}]},figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams.map(s=>s.value),n=Math.max(...r),i=[],o=[];return e.reduce((s,u,c)=>{const h=u.close;if(r.forEach((p,g)=>{i[g]=(i[g]??0)+h,c>=p-1&&(o[g]=i[g]/p,i[g]-=e[c-(p-1)].close)}),c>=n-1){let p=0;o.forEach(m=>{p+=m});const g={bbi:p/4};s[u.timestamp]=g}return s},{})}},vM={isMainIndicator:!1,isSubIndicator:!0,name:"CCI",shortName:"CCI",calcParams:[{name:"period",type:"number",value:20}],styles:{lines:[{color:"#007FFF",size:1}]},figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value-1;let i=0;const o=[];return e.reduce((s,u,c)=>{const h={},p=(u.high+u.low+u.close)/3;if(i+=p,o.push(p),c>=n){const g=i/r[0].value,m=o.slice(c-n,c+1);let b=0;m.forEach(_=>{b+=Math.abs(_-g)});const x=b/r[0].value;h.cci=x!==0?(p-g)/x/.015:0;const C=(e[c-n].high+e[c-n].low+e[c-n].close)/3;i-=C,s[u.timestamp]=h}return s},{})}},mM={isMainIndicator:!1,isSubIndicator:!0,name:"BIAS",shortName:"BIAS",calcParams:[{name:"bias1",type:"number",value:6},{name:"bias2",type:"number",value:12},{name:"bias3",type:"number",value:24}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#ff0000",size:1}]},figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:e=>e.map((t,r)=>({key:`bias${r+1}`,title:`BIAS${t.value}: `,type:"line"})),calc:(e,t)=>{const{calcParams:r,figures:n}=t,i=r,o=[];return e.reduce((s,u,c)=>{const h={},p=u.close;return i.forEach((g,m)=>{if(o[m]=(o[m]??0)+p,c>=g.value-1){const b=o[m]/g.value,x=n[m].key;h[x]=(p-b)/b*100,o[m]-=e[c-(g.value-1)].close}}),Object.keys(h).length>0&&(s[u.timestamp]=h),s},{})}};function yM(e,t){const r=e.length;let n=0;return e.forEach(i=>{const o=i.close-t;n+=o*o}),n=Math.abs(n),Math.sqrt(n/r)}const bM={isMainIndicator:!0,isSubIndicator:!1,name:"BOLL",shortName:"BOLL",series:"price",calcParams:[{name:"period",type:"number",value:20},{name:"standard_deviation",type:"number",value:2}],precision:2,shouldOhlc:!0,styles:{lines:[{color:"#FF6E6E",size:1},{color:"#FFD700",size:1},{color:"#00CD00",size:1}]},figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value-1;let i=0;return e.reduce((o,s,u)=>{const c=s.close,h={};if(i+=c,u>=n){h.mid=i/r[0].value;const p=yM(e.slice(u-n,u+1),h.mid);h.up=h.mid+r[1].value*p,h.dn=h.mid-r[1].value*p,i-=e[u-n].close,o[s.timestamp]=h}return o},{})}},xM={isMainIndicator:!1,isSubIndicator:!0,name:"BRAR",shortName:"BRAR",calcParams:[{name:"brar",type:"number",value:26}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1}]},figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0].value;let n=0,i=0,o=0,s=0;return e.reduce((u,c,h)=>{const p={},g=c.high,m=c.low,b=c.open,x=(e[h-1]??c).close;if(o+=g-b,s+=b-m,n+=g-x,i+=x-m,h>=r-1){s!==0?p.ar=o/s*100:p.ar=0,i!==0?p.br=n/i*100:p.br=0;const C=e[h-(r-1)],_=C.high,k=C.low,M=C.open,L=(e[h-r]??e[h-(r-1)]).close;n-=_-L,i-=L-k,o-=_-M,s-=M-k}return u[c.timestamp]=p,u},{})}},wM={isMainIndicator:!0,isSubIndicator:!1,name:"Average Price",shortName:"AVP",series:"price",precision:2,styles:{lines:[{color:"#A020F0",size:1}]},figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:e=>e.reduce((t,r)=>{const n={};if((r.volume??0)!==0){const i=(r.high+r.low+r.close)/3;n.avp=i,t[r.timestamp]=n}return t},{})},CM={isMainIndicator:!1,isSubIndicator:!0,name:"AO",shortName:"AO",calcParams:[{name:"shortPeriod",type:"number",value:5},{name:"longPeriod",type:"number",value:34}],styles:{bars:[{upColor:"rgba(0, 252, 0, 0.8)",downColor:"rgba(252, 0, 0, 0.8)"}]},figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const{prev:n,current:i}=e,o=(n==null?void 0:n.ao)??Number.MIN_SAFE_INTEGER,s=(i==null?void 0:i.ao)??Number.MIN_SAFE_INTEGER;let u="";s>o?t.styles&&(u=en(t.styles,"bars[0].upColor",t.styles.bars[0].upColor)):t.styles&&(u=en(t.styles,"bars[0].downColor",t.styles.bars[0].downColor));const c=s>o?"stroke":"fill";return{color:u,style:c,borderColor:u}}}],calc:(e,t)=>{const r=t.calcParams,n=Math.max(r[0].value,r[1].value);let i=0,o=0,s=0,u=0;return e.reduce((c,h,p)=>{const g={},m=(h.low+h.high)/2;if(i+=m,o+=m,p>=r[0].value-1){s=i/r[0].value;const b=e[p-(r[0].value-1)];i-=(b.low+b.high)/2}if(p>=r[1].value-1){u=o/r[1].value;const b=e[p-(r[1].value-1)];o-=(b.low+b.high)/2}return p>=n-1&&(g.ao=s-u,c[h.timestamp]=g),c},{})}},_M={isMainIndicator:!0,isSubIndicator:!1,name:"WEMA",shortName:"WEMA",zLevel:0,series:"price",calcParams:[{name:"period",type:"number",value:14}],precision:2,figures:[{key:"WEMA",title:"WEMA: ",type:"line"}],styles:{lines:[{style:"solid",color:"yellow",size:1}]},shouldOhlc:!0,calc:(e,t)=>{const r=t.calcParams[0].value,n=1/r;let i=0,o=0;return e.reduce((s,u,c)=>{const h=u.close;return c<r?(o+=h,c===r-1&&(i=o/r,s[u.timestamp]={wema:i})):(i=(h-i)*n+i,s[u.timestamp]={wema:i}),s},{})},draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s;const{realFrom:u,realTo:c}=t.getVisibleRange(),{result:h}=r,p=jd("line");for(let g=u;g<c;g++){const m=h[g];m&&new p({name:"line",styles:{style:r.styles.lines[0].style,color:r.styles.lines[0].color,size:r.styles.lines[0].size},attrs:{coordinates:[{x:i.convertToPixel(g),y:o.convertToPixel(m.wema)},{x:i.convertToPixel(g+1),y:o.convertToPixel((s=h[g+1])==null?void 0:s.wema)}]}}).draw(e)}return!0}},SM={name:"Volume Weighted Average Price",shortName:"VWAP",series:"price",calcParams:[{name:"anchorPeriod",type:"select",value:"Monthly",options:[{value:"None",label:"None"},{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarter",label:"Quarter"},{value:"Year",label:"Year"}]},{name:"source",type:"select",value:"HLC3",options:[{value:"Close",label:"Close"},{value:"HLC3",label:"HLC3"},{value:"HLC2",label:"HLC2"},{value:"Weighted",label:"Weighted"},{value:"Median",label:"Median"},{value:"Open",label:"Open"},{value:"High",label:"High"},{value:"OHLC4",label:"OHLC4"},{value:"HLCC4",label:"HLCC4"}]},{name:"offset",type:"number",value:0,min:-100,max:100},{name:"bandsMode",type:"select",value:"Standard Deviation",options:[{value:"Standard Deviation",label:"Standard Deviation"},{value:"Percentage",label:"Percentage"},{value:"Fixed",label:"Fixed"}]},{name:"bandsMultiplier",type:"select",value:"2",options:[{value:"0.5",label:"0.5"},{value:"1",label:"1.0"},{value:"1.5",label:"1.5"},{value:"2",label:"2.0"},{value:"2.5",label:"2.5"},{value:"3",label:"3.0"}]},{name:"showBands",type:"boolean",value:!0},{name:"showShading",type:"boolean",value:!0}],precision:2,isMainIndicator:!0,isSubIndicator:!1,styles:{lines:[{style:"solid",color:"#FF7F50",size:1},{style:"dashed",color:"#4CAF50",size:1},{style:"dashed",color:"#F44336",size:1}]},figures:[{key:"vwap",title:"VWAP: ",type:"line"},{key:"upperBand",title:"Upper: ",type:"line"},{key:"lowerBand",title:"Lower: ",type:"line"}],calc:(e,t)=>{var r,n,i,o,s;const u=[],c=t.calcParams,h=((r=c.find(L=>L.name==="anchorPeriod"))==null?void 0:r.value)??"None",p=((n=c.find(L=>L.name==="source"))==null?void 0:n.value)??"Close",g=((i=c.find(L=>L.name==="offset"))==null?void 0:i.value)??0,m=((o=c.find(L=>L.name==="bandsMode"))==null?void 0:o.value)??"Standard Deviation",b=Number(((s=c.find(L=>L.name==="bandsMultiplier"))==null?void 0:s.value)??"2"),x=[],C=[];let _=0,k=0;const M=14;for(let L=0;L<e.length;L++){const D=e[L];if(D.close===void 0||D.volume===void 0){u[L]={vwap:0};continue}let P;switch(p){case"Open":P=D.open;break;case"High":P=D.high;break;case"Close":P=D.close;break;case"HLC3":P=(D.high+D.low+D.close)/3;break;case"HLC2":P=(D.high+D.low)/2;break;case"OHLC4":P=(D.open+D.high+D.low+D.close)/4;break;case"HLCC4":P=(D.high+D.low+D.close+D.close)/4;break;case"Volume":P=D.volume;break;default:P=D.close}if(h!=="None"){const N=D.timestamp;let z=!1;switch(h){case"Daily":z=Math.floor(N/(1440*60*1e3))!==Math.floor(k/(1440*60*1e3));break;case"Weekly":z=Math.floor(N/(10080*60*1e3))!==Math.floor(k/(10080*60*1e3));break;case"Monthly":const B=new Date(N),Q=new Date(k);z=B.getMonth()!==Q.getMonth()||B.getFullYear()!==Q.getFullYear();break;case"Quarter":const ne=new Date(N),Z=new Date(k),J=Math.floor(ne.getMonth()/3),ue=Math.floor(Z.getMonth()/3);z=J!==ue||ne.getFullYear()!==Z.getFullYear();break;case"Year":const le=new Date(N),ae=new Date(k);z=le.getFullYear()!==ae.getFullYear();break}z&&(_=L,k=N)}const $=P*D.volume;x[L]=$,C[L]=D.volume;const A=h!=="None"?L-_+1:M;if(L>=(h!=="None"?_:M-1)){let N=0,z=0,B=0;for(let ue=0;ue<A;ue++)N+=x[L-ue],z+=C[L-ue];const Q=z!==0?Number((N/z).toFixed(2)):0;u[L]={vwap:Q};for(let ue=0;ue<A;ue++){const le=e[L-ue];if(le.volume===void 0)continue;let ae;switch(p){case"Open":ae=le.open;break;case"High":ae=le.high;break;case"Close":ae=le.close;break;case"HLC3":ae=(le.high+le.low+le.close)/3;break;case"HLC2":ae=(le.high+le.low)/2;break;case"OHLC4":ae=(le.open+le.high+le.low+le.close)/4;break;case"HLCC4":ae=(le.high+le.low+le.close+le.close)/4;break;default:ae=le.close}const te=ae-Q;B+=te*te*le.volume,z+=le.volume}const ne=Math.sqrt(B/z);let Z=Q,J=Q;switch(m){case"Standard Deviation":Z=Q+ne*b,J=Q-ne*b;break;case"Percentage":const ue=b/100;Z=Q*(1+ue),J=Q*(1-ue);break;case"Fixed":Z=Q+b,J=Q-b;break}if(g!==0){const ue=L+g;if(ue>=0&&ue<u.length&&(u[ue]={vwap:Q,upperBand:Z,lowerBand:J},g>0))for(let le=L+1;le<ue;le++)le<u.length&&(u[le]={vwap:Q,upperBand:Z,lowerBand:J})}else u[L]={vwap:Q,upperBand:Z,lowerBand:J}}else u[L]={vwap:0}}return u},shouldOhlc:!0,draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s,u,c,h,p;const{realFrom:g,realTo:m}=t.getVisibleRange(),{result:b}=r,x=jd("line"),C=r.calcParams,_=((s=C.find(M=>M.name==="showBands"))==null?void 0:s.value)??!0,k=((u=C.find(M=>M.name==="showShading"))==null?void 0:u.value)??!1;for(let M=g;M<m;M++){const L=b[M];L&&L.vwap!==0&&new x({name:"line",styles:{style:r.styles.lines[0].style,color:r.styles.lines[0].color,size:r.styles.lines[0].size},attrs:{coordinates:[{x:i.convertToPixel(M),y:o.convertToPixel(L.vwap)},{x:i.convertToPixel(M+1),y:o.convertToPixel((c=b[M+1])==null?void 0:c.vwap)}]}}).draw(e)}if(_){const M=[],L=[],D=[];for(let P=g;P<=m;P++){const $=b[P];$&&$.upperBand!==void 0&&$.lowerBand!==void 0&&(M.push(i.convertToPixel(P)),L.push(o.convertToPixel($.upperBand)),D.push(o.convertToPixel($.lowerBand)))}if(k&&M.length>0){const P=[];for(let N=g;N<=m;N++){const z=b[N];z&&z.vwap!==0&&P.push(o.convertToPixel(z.vwap))}const $=Rl(r.styles.lines[1].color??"#4CAF50");Fl(e,M,L,P,`rgba(${$.r}, ${$.g}, ${$.b}, 0.1)`);const A=Rl(r.styles.lines[2].color??"#F44336");Fl(e,M,P,D,`rgba(${A.r}, ${A.g}, ${A.b}, 0.1)`)}for(let P=g;P<m;P++){const $=b[P];$&&$.vwap!==0&&$.upperBand!==void 0&&$.lowerBand!==void 0&&(new x({name:"line",styles:{style:r.styles.lines[1].style,color:r.styles.lines[1].color,size:r.styles.lines[1].size},attrs:{coordinates:[{x:i.convertToPixel(P),y:o.convertToPixel($.upperBand)},{x:i.convertToPixel(P+1),y:o.convertToPixel(((h=b[P+1])==null?void 0:h.upperBand)??$.upperBand)}]}}).draw(e),new x({name:"line",styles:{style:r.styles.lines[2].style,color:r.styles.lines[2].color,size:r.styles.lines[2].size},attrs:{coordinates:[{x:i.convertToPixel(P),y:o.convertToPixel($.lowerBand)},{x:i.convertToPixel(P+1),y:o.convertToPixel(((p=b[P+1])==null?void 0:p.lowerBand)??$.lowerBand)}]}}).draw(e))}}return!0}},kM={isMainIndicator:!1,isSubIndicator:!0,name:"ADL",shortName:"ADL",calcParams:[],styles:{lines:[{color:"#FF7F50",size:1}]},figures:[{key:"adl",title:"ADL: ",type:"line"}],calc:(e,t)=>{let r=0;return e.reduce((n,i,o)=>{const{high:s=0,low:u=0,close:c=0,volume:h=0}=i;if(!s||!u||!c||!h)return n[i.timestamp]={adl:r},n;let p=0;s!==u&&(p=(c-u-(s-c))/(s-u),p=Math.max(-1,Math.min(1,p)));const g=p*h;return r+=g,n[i.timestamp]={adl:Math.round(r)},n},{})}},MM={isMainIndicator:!1,isSubIndicator:!0,name:"Force Index",shortName:"FI",calcParams:[{name:"period",type:"number",value:13}],styles:{lines:[{color:"#5D69B1",size:1}]},figures:[{key:"fi",title:"FI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0];let n=0,i=2/(r.value+1);return e.reduce((o,s,u)=>{const{close:c=0,volume:h=0}=s,p=u>0?e[u-1].close:c,g=(c-p)*h;return u===0?n=g:n=(g-n)*i+n,o[s.timestamp]={fi:Math.round(n)},o},{})}},EM={isMainIndicator:!1,isSubIndicator:!0,name:"MFI",shortName:"MFI",calcParams:[{name:"period",type:"number",value:14}],precision:2,styles:{lines:[{style:"solid",color:"#FF7F50",size:1}]},figures:[{key:"mfi",title:"MFI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0].value,n=[];let i;return e.reduce((o,s,u)=>{const{high:c=0,low:h=0,close:p=0,volume:g=0}=s;if(!c||!h||!p||!g)return o;const m=(c+h+p)/3,b=m*g;if(i===void 0)return i=m,o;let x=0,C=0;if(m>i?x=b:m<i&&(C=b),n.push({positive:x,negative:C}),n.length>r&&n.shift(),n.length===r){const _=n.reduce((L,D)=>L+D.positive,0),k=n.reduce((L,D)=>L+D.negative,0);let M=50;k===0&&_>0?M=100:_===0&&k>0?M=0:k>0&&(M=100-100/(1+_/k)),o[s.timestamp]={mfi:Number(M.toFixed(t.precision))}}return i=m,o},{})}},TM={isMainIndicator:!1,isSubIndicator:!0,name:"OBV",shortName:"OBV",calcParams:[{name:"period",type:"number",value:30}],styles:{lines:[{color:"#A020F0",size:1},{color:"#007FFF",size:1}]},figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0;return e.reduce((o,s,u)=>{var c;const h=e[u-1]??s;s.close<h.close?i-=s.volume??0:s.close>h.close&&(i+=s.volume??0);const p={obv:i};return n+=i,u>=r[0].value-1&&(p.maObv=n/r[0].value,n-=((c=o[e[u-(r[0].value-1)].timestamp])==null?void 0:c.obv)??0),o[s.timestamp]=p,o},{})}},IM={isMainIndicator:!0,isSubIndicator:!1,name:"Chandelier Exit",shortName:"CE",series:"price",calcParams:[{name:"period",type:"number",value:22},{name:"multiplier",type:"number",value:3}],precision:2,shouldOhlc:!0,styles:{lines:[{style:"solid",color:"#26A69A",size:1},{style:"solid",color:"#EF5350",size:1}]},figures:[{key:"exitLong",title:"Long Exit: ",type:"line"},{key:"exitShort",title:"Short Exit: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value;let o=-1/0,s=1/0,u=0,c=e[0].close;return e.reduce((h,p,g)=>{const m=p,{high:b,low:x,close:C}=m,_=Math.max(b-x,Math.abs(b-c),Math.abs(x-c));if(u+=_,o=Math.max(o,b),s=Math.min(s,x),g>=n-1){const k=u/n,M=o-k*i,L=s+k*i;h[p.timestamp]={exitLong:M,exitShort:L};const D=g-(n-1),P=e[D],$=Math.max(P.high-P.low,Math.abs(P.high-(D>0?e[D-1].close:P.close)),Math.abs(P.low-(D>0?e[D-1].close:P.close)));u-=$,o=b,s=x;for(let A=0;A<n;A++){const N=e[g-A];o=Math.max(o,N.high),s=Math.min(s,N.low)}}return c=C,h},{})}},LM={isMainIndicator:!0,isSubIndicator:!1,name:"Keltner Channels",shortName:"KC",series:"price",calcParams:[{name:"maPeriod",type:"number",value:20},{name:"atrPeriod",type:"number",value:10},{name:"multiplier",type:"number",value:1},{name:"useSMA",type:"boolean",value:!1}],precision:2,shouldOhlc:!0,styles:{lines:[{style:"solid",color:"#FF0000",size:1},{style:"solid",color:"#4DB6AC",size:1},{style:"solid",color:"#4DB6AC",size:1}]},figures:[{key:"middle",title:"Middle: ",type:"line"},{key:"upper",title:"Upper: ",type:"line"},{key:"lower",title:"Lower: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=r[3].value,u=[];let c=0,h=0;const p=2/(n+1);let g=0,m=e[0].close;return e.reduce((b,x,C)=>{const _=x,{high:k,low:M,close:L}=_,D=Math.max(k-M,Math.abs(k-m),Math.abs(M-m));if(g+=D,c+=L,s?(u.push(L),u.length>n&&(c-=u[u.length-n-1])):C===0?h=L:h=(L-h)*p+h,C>=Math.max(n-1,i-1)){const P=s?c/Math.min(u.length,n):h,$=g/i;if(b[x.timestamp]={middle:P,upper:P+o*$,lower:P-o*$},C>=i){const A=C-i,N=e[A],z=Math.max(N.high-N.low,Math.abs(N.high-(A>0?e[A-1].close:N.close)),Math.abs(N.low-(A>0?e[A-1].close:N.close)));g-=z}}return m=L,b},{})}},PM={isMainIndicator:!0,isSubIndicator:!1,name:"WMA",shortName:"WMA",series:"price",calcParams:[{name:"period",type:"number",value:12}],precision:2,styles:{lines:[{color:"#B464EB"}]},figures:[{key:"wma",title:"WMA: ",type:"line"}],shouldOhlc:!0,calc:(e,t)=>{const r=t.calcParams[0].value,n=r*(r+1)/2;return e.reduce((i,o,s)=>{if(s>=r-1){let u=0;for(let c=0;c<r;c++)u+=e[s-c].close*(r-c);i[o.timestamp]={wma:u/n}}return i},{})}},AM={isMainIndicator:!0,isSubIndicator:!1,name:"Ichimoku Cloud",shortName:"IC",calcParams:[{name:"conversionPeriod",type:"number",value:9},{name:"basePeriod",type:"number",value:26},{name:"spanPeriod",type:"number",value:52},{name:"displacement",type:"number",value:26},{name:"showShading",type:"boolean",value:!0}],styles:{lines:[{color:"#FF7F50",size:1},{color:"#A020F0",size:1},{color:"#32CD32",size:1},{color:"#FF4500",size:1},{color:"#1E90FF",size:1}]},figures:[{key:"conversion",title:"Conversion: ",type:"line"},{key:"base",title:"Base: ",type:"line"},{key:"spanA",title:"Span A: ",type:"line"},{key:"spanB",title:"Span B: ",type:"line"},{key:"laggingSpan",title:"Chikou: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=r[3].value,u=(p,g,m)=>{let b=-1/0,x=1/0;for(let C=Math.max(0,g-m+1);C<=g;C++)b=Math.max(b,p[C].high),x=Math.min(x,p[C].low);return{high:b,low:x}},c=[],h=[];return e.reduce((p,g,m)=>{const b={};if(m>=n-1){const{high:k,low:M}=u(e,m,n);b.conversion=(k+M)/2,c[m]=b.conversion}if(m>=i-1){const{high:k,low:M}=u(e,m,i);b.base=(k+M)/2,h[m]=b.base}const x=m-s;x>=0&&x>=Math.max(n,i)-1&&c[x]&&h[x]&&(b.spanA=(c[x]+h[x])/2);const C=m-s;if(C>=0&&C>=o-1){const{high:k,low:M}=u(e,C,o);b.spanB=(k+M)/2}const _=m+s;return _<e.length&&(b.laggingSpan=e[_].close),Object.keys(b).length>0&&(p[g.timestamp]=b),p},{})},draw:({ctx:e,indicator:t,xAxis:r,yAxis:n,chart:i})=>{var o,s,u,c,h,p,g;const m=t.result;if(!m)return!1;const{from:b,to:x}=i.getVisibleRange(),C=i.getDataList(),_=[],k=[],M=[];for(let L=b;L<x;L++)if(L<C.length){const D=C[L],P=m[D.timestamp];P!=null&&(_.push(r.convertToPixel(L)),P.spanA!=null&&k.push(n.convertToPixel(P.spanA)),P.spanB!=null&&M.push(n.convertToPixel(P.spanB)))}if((((o=t.calcParams.find(L=>L.name==="showShading"))==null?void 0:o.value)??!0)&&_.length>0&&k.length>0&&M.length>0){const L=Rl(((c=(u=(s=t.styles)==null?void 0:s.lines)==null?void 0:u[2])==null?void 0:c.color)??"#32CD32");Fl(e,_,k,M,`rgba(${L.r}, ${L.g}, ${L.b}, 0.1)`);const D=Rl(((g=(p=(h=t.styles)==null?void 0:h.lines)==null?void 0:p[3])==null?void 0:g.color)??"#FF4500");Fl(e,_,M,k,`rgba(${D.r}, ${D.g}, ${D.b}, 0.1)`)}return!1}},DM={isMainIndicator:!1,isSubIndicator:!0,name:"ATR",shortName:"ATR",series:"volume",calcParams:[{name:"period",type:"number",value:14}],precision:2,shouldOhlc:!1,styles:{lines:[{style:"solid",color:"#FF7F50",size:1}]},figures:[{key:"atr",title:"ATR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=e[0].close,i=0;const o=2/(r[0].value+1);let s=[];return e.reduce((u,c,h)=>{const{high:p,low:g,close:m}=c,b=Math.max(p-g,Math.abs(p-n),Math.abs(g-n));return s.push(b),h>=r[0].value-1&&(h===r[0].value-1?i=s.reduce((x,C)=>x+C,0)/r[0].value:i=(b-i)*o+i,u[c.timestamp]={atr:i}),n=m,u},{})}},FM={isMainIndicator:!1,isSubIndicator:!0,name:"ADXR",shortName:"ADXR",series:"volume",calcParams:[{name:"period",type:"number",value:14},{name:"adxrPeriod",type:"number",value:6}],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"adxr",title:"ADXR: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,c=0,h=0,p=0;const g={};return e.reduce((m,b,x)=>{var C;const _=e[x-1]??b,k=_.close,M=b.high,L=b.low,D=M-L,P=Math.abs(M-k),$=Math.abs(k-L),A=M-_.high,N=_.low-L,z=Math.max(Math.max(D,P),$),B=A>0&&A>N?A:0,Q=N>0&&N>A?N:0;if(n+=z,i+=B,o+=Q,x>=r[0].value-1){x>r[0].value-1?(s=s-s/r[0].value+z,u=u-u/r[0].value+B,c=c-c/r[0].value+Q):(s=n,u=i,c=o);let ne=0,Z=0;s!==0&&(ne=u*100/s,Z=c*100/s);let J=0;if(Z+ne!==0&&(J=Math.abs(Z-ne)/(Z+ne)*100),h+=J,x>=r[0].value*2-2&&(x>r[0].value*2-2?p=(p*(r[0].value-1)+J)/r[0].value:p=h/r[0].value,g[b.timestamp]=p,x>=r[0].value*2+r[1].value-3)){const ue=(C=e[x-(r[1].value-1)])==null?void 0:C.timestamp,le=((g[ue]??0)+p)/2;m[b.timestamp]={adxr:le}}}return m},{})}},RM={isMainIndicator:!1,isSubIndicator:!0,name:"PDI",shortName:"PDI",series:"volume",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#00ff00",size:1}]},figures:[{key:"pdi",title:"PDI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0;return e.reduce((u,c,h)=>{const p=e[h-1]??c,g=p.close,m=c.high,b=c.low,x=m-b,C=Math.abs(m-g),_=Math.abs(g-b),k=m-p.high,M=p.low-b,L=Math.max(Math.max(x,C),_),D=k>0&&k>M?k:0;if(n+=L,i+=D,h>=r[0].value-1&&(h>r[0].value-1?(o=o-o/r[0].value+L,s=s-s/r[0].value+D):(o=n,s=i),o!==0)){const P=s*100/o;u[c.timestamp]={pdi:P}}return u},{})}},OM={isMainIndicator:!1,isSubIndicator:!0,name:"MDI",shortName:"MDI",series:"volume",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"mdi",title:"MDI: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0;return e.reduce((u,c,h)=>{const p=e[h-1]??c,g=p.close,m=c.high,b=c.low,x=m-b,C=Math.abs(m-g),_=Math.abs(g-b),k=m-p.high,M=p.low-b,L=Math.max(Math.max(x,C),_),D=M>0&&M>k?M:0;if(n+=L,i+=D,h>=r[0].value-1&&(h>r[0].value-1?(o=o-o/r[0].value+L,s=s-s/r[0].value+D):(o=n,s=i),o!==0)){const P=s*100/o;u[c.timestamp]={mdi:P}}return u},{})}},NM={isMainIndicator:!1,isSubIndicator:!0,name:"ADX",shortName:"ADX",series:"volume",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#007FFF",size:1}]},figures:[{key:"adx",title:"ADX: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,c=0,h=0,p=0;return e.reduce((g,m,b)=>{const x=e[b-1]??m,C=x.close,_=m.high,k=m.low,M=_-k,L=Math.abs(_-C),D=Math.abs(C-k),P=_-x.high,$=x.low-k,A=Math.max(Math.max(M,L),D),N=P>0&&P>$?P:0,z=$>0&&$>P?$:0;if(n+=A,i+=N,o+=z,b>=r[0].value-1){b>r[0].value-1?(s=s-s/r[0].value+A,u=u-u/r[0].value+N,c=c-c/r[0].value+z):(s=n,u=i,c=o);let B=0,Q=0;s!==0&&(B=u*100/s,Q=c*100/s);let ne=0;Q+B!==0&&(ne=Math.abs(Q-B)/(Q+B)*100),h+=ne,b>=r[0].value*2-2&&(b>r[0].value*2-2?p=(p*(r[0].value-1)+ne)/r[0].value:p=h/r[0].value,g[m.timestamp]={adx:p})}return g},{})}},zM={isMainIndicator:!1,isSubIndicator:!0,name:"TR",shortName:"TR",series:"volume",calcParams:[],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"tr",title:"TR: ",type:"line"}],calc:e=>{let t;return e.reduce((r,n)=>{const i=n.high,o=n.low,s=n.close;let u;return t===void 0?(t=s,u=i-o):(u=Math.max(i-o,Math.abs(i-t),Math.abs(o-t)),t=s),r[n.timestamp]={tr:u},r},{})}},VM={isMainIndicator:!0,isSubIndicator:!1,name:"WS",shortName:"WS",series:"volume",calcParams:[14],styles:{lines:[{color:"#ff0000",size:1}]},figures:[{key:"ws",title:"WS: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0];let n=0,i=1,o=0;return e.reduce((s,u)=>{const c=u.close;let h;return i<r?(i++,n+=c,h=n/i):i===r?(i++,n+=c,o=n/r,h=o):(o=(o*(r-1)+c)/r,h=o),s[u.timestamp]={ws:h},s},{})}},BM={isMainIndicator:!1,isSubIndicator:!0,name:"Chaikin Oscillator",shortName:"CO",series:"volume",calcParams:[{name:"shortPeriod",type:"number",value:3},{name:"longPeriod",type:"number",value:10}],styles:{lines:[{color:"#FF9800",size:1}]},figures:[{key:"co",title:"CO: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value;let o=0;const s=[];e.forEach(h=>{const p=h.high,g=h.low,m=h.close,b=h.volume??0;let x=0;p!==g&&(x=(m-g-(p-m))/(p-g));const C=x*b;o+=C,s.push(o)});const u=co(s,n),c=co(s,i);return e.reduce((h,p,g)=>(g>=i-1&&(h[p.timestamp]={co:u[g]-c[g]}),h),{})}},$M={isMainIndicator:!1,isSubIndicator:!0,name:"Percentage Price Oscillator",shortName:"PPO",series:"volume",calcParams:[{name:"fastPeriod",type:"number",value:12},{name:"slowPeriod",type:"number",value:26},{name:"signalPeriod",type:"number",value:9}],styles:{lines:[{color:"#FF9800",size:1},{color:"#4CAF50",size:1}],bars:[{upColor:"#2196F3",downColor:"#FF5252"}]},figures:[{key:"ppo",title:"PPO: ",type:"line"},{key:"signal",title:"Signal: ",type:"line"},{key:"histogram",title:"Histogram: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.histogram&&n.histogram>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.histogram&&n.histogram<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=e.map(g=>g.close),u=co(s,n),c=co(s,i),h=[];e.forEach((g,m)=>{if(m>=i-1){const b=(u[m]-c[m])/c[m]*100;h.push(b)}});const p=co(h,o);return e.reduce((g,m,b)=>{if(b>=i-1){const x=(u[b]-c[b])/c[b]*100,C={ppo:x};b>=i+o-1&&(C.signal=p[b-(i-1)],C.histogram=x-C.signal),g[m.timestamp]=C}return g},{})}},WM={isMainIndicator:!1,isSubIndicator:!0,name:"Percentage Volume Oscillator",shortName:"PVO",series:"volume",calcParams:[{name:"shortPeriod",type:"number",value:12},{name:"longPeriod",type:"number",value:26},{name:"signalPeriod",type:"number",value:9}],styles:{lines:[{color:"#FF9800",size:1},{color:"#4CAF50",size:1}],bars:[{upColor:"#2196F3",downColor:"#FF5252"}]},figures:[{key:"pvo",title:"PVO: ",type:"line"},{key:"signal",title:"Signal: ",type:"line"},{key:"histogram",title:"Histogram: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.histogram&&n.histogram>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.histogram&&n.histogram<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=r[2].value,s=[],u=e.map(m=>m.volume),c=co(u,n),h=co(u,i),p=[];e.forEach((m,b)=>{if(b>=i-1){const x=(c[b]-h[b])/h[b]*100;p.push(x),s[b]={pvo:x}}else s[b]={}});const g=co(p,o);return e.forEach((m,b)=>{b>=i+o-1&&(s[b].signal=g[b-(i-1)],s[b].pvo!==void 0&&(s[b].histogram=s[b].pvo-s[b].signal))}),s}},HM={isMainIndicator:!1,isSubIndicator:!0,name:"Qstick",shortName:"QS",series:"price",calcParams:[{name:"period",type:"number",value:20}],styles:{lines:[{color:"#2196F3",size:1}],bars:[{upColor:"#4CAF50",downColor:"#FF5252"}]},figures:[{key:"qstick",title:"Qstick: ",type:"line"},{key:"qstick",title:"Qstick: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.qstick&&n.qstick>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.qstick&&n.qstick<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams[0].value,n=e.map(o=>o.close-o.open),i=E2(n,r);return e.reduce((o,s,u)=>(u>=r-1&&(o[s.timestamp]={qstick:i[u-(r-1)]}),o),{})}},UM={isMainIndicator:!1,isSubIndicator:!0,name:"Absolute Price Oscillator",shortName:"APO",series:"price",calcParams:[{name:"fastPeriod",type:"number",value:14},{name:"slowPeriod",type:"number",value:30}],styles:{lines:[{color:"#2196F3",size:1}],bars:[{upColor:"#4CAF50",downColor:"#FF5252"}]},figures:[{key:"apo",title:"APO: ",type:"line"},{key:"apo",title:"APO: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const n=e.current;let i=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return Sr(n)&&(n.apo&&n.apo>0?i=en(t.styles,"bars[0].upColor",r.bars[0].upColor):n.apo&&n.apo<0&&(i=en(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:i}}}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=e.map(c=>c.close),s=co(o,n),u=co(o,i);return e.reduce((c,h,p)=>{if(p>=i-1){const g={apo:s[p]-u[p]};c[h.timestamp]=g}return c},{})}},jM={isMainIndicator:!1,isSubIndicator:!0,name:"Aroon",shortName:"AROON",series:"price",calcParams:[{name:"Length",type:"number",value:14}],styles:{lines:[{color:"#4CAF50",size:1},{color:"#FF5252",size:1}]},figures:[{key:"up",title:"Aroon Up: ",type:"line"},{key:"down",title:"Aroon Down: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams[0].value;return e.reduce((n,i,o)=>{if(o>=r-1){const s=e.slice(o-r+1,o+1),u=Math.max(...s.map(b=>b.high)),c=Math.min(...s.map(b=>b.low));let h=0,p=0;for(let b=r-1;b>=0;b--)if(s[b].high===u){h=b;break}for(let b=r-1;b>=0;b--)if(s[b].low===c){p=b;break}const g=Math.round((r-p)/r*100),m=Math.round((r-h)/r*100);n[i.timestamp]={up:g,down:m}}return n},{})}},XM={isMainIndicator:!1,isSubIndicator:!0,name:"Balance of Power",shortName:"BOP",series:"price",calcParams:[],styles:{lines:[{color:"#2196F3",size:1}]},figures:[{key:"value",title:"BOP: ",type:"line"}],calc:(e,t)=>e.reduce((r,n)=>{if(Sr(n.open)&&Sr(n.high)&&Sr(n.low)&&Sr(n.close)){const i=n.high-n.low;if(i!==0){const o=(n.close-n.open)/i;r[n.timestamp]={value:o}}else r[n.timestamp]={value:0}}return r},{})},YM={isMainIndicator:!0,isSubIndicator:!1,name:"Double Exponential Moving Average",shortName:"DEMA",series:"price",calcParams:[{name:"ema1Period",type:"number",value:10},{name:"ema2Period",type:"number",value:16}],styles:{lines:[{color:"#2196F3",size:1}]},figures:[{key:"value",title:"DEMA: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=e.map(c=>c.close),s=co(o,n),u=co(s,i);return e.reduce((c,h,p)=>{if(p>=n+i-2){const g=2*s[p]-u[p];c[h.timestamp]={value:g}}return c},{})}},ZM={isMainIndicator:!0,isSubIndicator:!1,name:"Envelope (SMA)",shortName:"ENV",series:"price",calcParams:[{name:"period",type:"number",value:20},{name:"percentage",type:"number",value:10},{name:"showShading",type:"boolean",value:!0}],styles:{lines:[{color:"#FF5252",size:1},{color:"#2196F3",size:1},{color:"#4CAF50",size:1}]},figures:[{key:"upper",title:"Upper: ",type:"line"},{key:"middle",title:"Middle: ",type:"line"},{key:"lower",title:"Lower: ",type:"line"}],calc:(e,t)=>{const r=t.calcParams,n=r[0].value,i=r[1].value,o=e.map(u=>u.close),s=E2(o,n);return e.reduce((u,c,h)=>{if(h>=n-1){const p=s[h],g=s[h],m=s[h],b=p*(1+i/100),x=m*(1-i/100);u[c.timestamp]={upper:b,middle:g,lower:x}}return u},{})},draw:({ctx:e,indicator:t,xAxis:r,yAxis:n,chart:i})=>{var o,s,u,c,h,p;const g=t.result;if(!g)return!1;const{from:m,to:b}=i.getVisibleRange(),x=[],C=[],_=[],k=[];for(let M=m;M<b;M++){const L=g[M];L!=null&&(x.push(r.convertToPixel(M)),L.upper!=null&&C.push(n.convertToPixel(L.upper)),L.middle!=null&&_.push(n.convertToPixel(L.middle)),L.lower!=null&&k.push(n.convertToPixel(L.lower)))}if(t.calcParams[2].value){const M=Rl(((u=(s=(o=t.styles)==null?void 0:o.lines)==null?void 0:s[0])==null?void 0:u.color)??"#E91E63");Fl(e,x,C,_,`rgba(${M.r}, ${M.g}, ${M.b}, 0.1)`);const L=Rl(((p=(h=(c=t.styles)==null?void 0:c.lines)==null?void 0:h[2])==null?void 0:p.color)??"#673AB7");Fl(e,x,_,k,`rgba(${L.r}, ${L.g}, ${L.b}, 0.1)`)}return!1}},KM={isMainIndicator:!0,isSubIndicator:!1,name:"Envelope (EMA)",shortName:"ENV-EMA",series:"price",calcParams:[{name:"period",type:"number",value:20,min:1,max:100},{name:"percentage",type:"number",value:20,min:0,max:100},{name:"showShading",type:"boolean",value:!0}],styles:{lines:[{color:"#E91E63",size:1},{color:"#9C27B0",size:1},{color:"#673AB7",size:1}]},figures:[{key:"upper",title:"Upper: ",type:"line"},{key:"middle",title:"Middle: ",type:"line"},{key:"lower",title:"Lower: ",type:"line"}],calc:(e,t)=>{var r,n;const i=t.calcParams,o=((r=i.find(h=>h.name==="period"))==null?void 0:r.value)??20,s=((n=i.find(h=>h.name==="percentage"))==null?void 0:n.value)??20,u=e.map(h=>h.close),c=co(u,o);return e.reduce((h,p,g)=>{if(g>=o-1){const m=c[g],b=c[g],x=c[g],C=m*(1+s/100),_=x*(1-s/100);h[p.timestamp]={upper:C,middle:b,lower:_}}return h},{})},draw:({ctx:e,indicator:t,xAxis:r,yAxis:n,chart:i})=>{var o,s,u,c,h,p,g;const m=t.result;if(!m)return!1;const{from:b,to:x}=i.getVisibleRange(),C=[],_=[],k=[],M=[];for(let L=b;L<x;L++){const D=m[L];D!=null&&(C.push(r.convertToPixel(L)),D.upper!=null&&_.push(n.convertToPixel(D.upper)),D.middle!=null&&k.push(n.convertToPixel(D.middle)),D.lower!=null&&M.push(n.convertToPixel(D.lower)))}if(((o=t.calcParams.find(L=>L.name==="showShading"))==null?void 0:o.value)??!0){const L=Rl(((c=(u=(s=t.styles)==null?void 0:s.lines)==null?void 0:u[0])==null?void 0:c.color)??"#E91E63");Fl(e,C,_,k,`rgba(${L.r}, ${L.g}, ${L.b}, 0.1)`);const D=Rl(((g=(p=(h=t.styles)==null?void 0:h.lines)==null?void 0:p[2])==null?void 0:g.color)??"#673AB7");Fl(e,C,k,M,`rgba(${D.r}, ${D.g}, ${D.b}, 0.1)`)}return!1}},qM={name:"Volume Price Trend",shortName:"VPT",series:"volume",calcParams:[],precision:2,isMainIndicator:!1,isSubIndicator:!0,styles:{lines:[{style:"solid",color:"#FF7F50",size:1}]},figures:[{key:"vpt",title:"VPT: ",type:"line"}],calc:(e,t)=>{let r=0;return e.reduce((n,i,o)=>{if(i.close===void 0||i.volume===void 0)return n[i.timestamp]={vpt:0},n;if(o===0)return n[i.timestamp]={vpt:0},n;const s=e[o-1].close,u=e[o-1].volume;if(s===void 0||s===0||u===void 0)return n[i.timestamp]={vpt:r},n;const c=(i.close-s)/s,h=r+u*c;return r=h,n[i.timestamp]={vpt:h},n},{})},shouldOhlc:!0,draw:({ctx:e,chart:t,indicator:r,bounding:n,xAxis:i,yAxis:o})=>{var s;const{realFrom:u,realTo:c}=t.getVisibleRange(),{result:h}=r,p=jd("line");for(let g=u;g<c;g++){const m=h[g];m&&m.vpt!==0&&new p({name:"line",styles:{style:r.styles.lines[0].style,color:r.styles.lines[0].color,size:r.styles.lines[0].size},attrs:{coordinates:[{x:i.convertToPixel(g),y:o.convertToPixel(m.vpt)},{x:i.convertToPixel(g+1),y:o.convertToPixel((s=h[g+1])==null?void 0:s.vpt)}]}}).draw(e)}return!0}},QM={name:"Negative Volume Index",shortName:"NVI",series:"price",calcParams:[{name:"Length",type:"number",value:5,min:1,max:1e4}],precision:2,isMainIndicator:!1,isSubIndicator:!0,styles:{lines:[{style:"solid",color:"#2196F3",size:1}]},figures:[{key:"nvi",title:"NVI: ",type:"line"}],calc:(e,t)=>{var r;const n=((r=t.calcParams.find(o=>o.name==="Length"))==null?void 0:r.value)??1e3;let i=n;return e.reduce((o,s,u)=>{if(s.close===void 0||s.volume===void 0)return o[s.timestamp]={nvi:0},o;if(u===0)return o[s.timestamp]={nvi:n},o;const c=e[u-1].close,h=e[u-1].volume;if(c===void 0||c===0||h===void 0)return o[s.timestamp]={nvi:i},o;const p=(s.close-c)/c;let g=i;return s.volume<=h&&(g=i+p*i),i=g,o[s.timestamp]={nvi:g},o},{})}},GM={isMainIndicator:!1,isSubIndicator:!0,name:"Money Flow Volume",shortName:"MFV",series:"volume",calcParams:[],styles:{lines:[{color:"#2196F3",size:1}]},figures:[{key:"mfv",title:"MFV: ",type:"line"}],calc:(e,t)=>{const r=[];return e.forEach((n,i)=>{if(!Sr(n.high)||!Sr(n.low)||!Sr(n.close)||!Sr(n.volume)){r[i]={};return}const o=n.high-n.low;if(o===0){r[i]={mfv:0};return}const s=(n.close-n.low-(n.high-n.close))/o*n.volume;r[i]={mfv:s}}),r}},JM={isMainIndicator:!1,isSubIndicator:!0,name:"Money Flow Multiplier",shortName:"MFM",series:"price",calcParams:[],styles:{lines:[{color:"#FF9800",size:1}]},figures:[{key:"mfm",title:"MFM: ",type:"line"}],calc:(e,t)=>e.reduce((r,n,i)=>{if(!Sr(n.high)||!Sr(n.low)||!Sr(n.close))return r;const o=n.high-n.low;if(o===0)return r[n.timestamp]={mfm:0},r;const s=(n.close-n.low-(n.high-n.close))/o;return r[n.timestamp]={mfm:s},r},{})},eE={isMainIndicator:!0,isSubIndicator:!1,name:"Moving Linear Regression",shortName:"MLR",series:"price",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#2196F3",size:1.5}]},figures:[{key:"value",title:"MLR: ",type:"line"}],calc:(e,t)=>{const{calcParams:r}=t,n=r[0].value;return e.length<n?{}:e.reduce((i,o,s)=>{if(s<n-1)return i;const u=e.slice(s-(n-1),s+1);if(!u.every(k=>Sr(k.close)))return i;const c=Array.from({length:n},(k,M)=>M+1),h=u.map(k=>k.close),p=c.reduce((k,M)=>k+M,0)/n,g=h.reduce((k,M)=>k+M,0)/n;let m=0,b=0;for(let k=0;k<n;k++){const M=c[k]-p;m+=M*(h[k]-g),b+=M*M}const x=b!==0?m/b:0,C=g-x*p,_=x*n+C;return i[o.timestamp]={value:_},i},{})}},tE={isMainIndicator:!1,isSubIndicator:!0,name:"Moving Least Square",shortName:"MLS",series:"price",calcParams:[{name:"period",type:"number",value:14}],styles:{lines:[{color:"#FF9800",size:1.5},{color:"#4CAF50",size:1},{color:"#F44336",size:1}]},figures:[{key:"line",title:"MLS: ",type:"line"},{key:"slope",title:"Slope: ",type:"line"},{key:"intercept",title:"Intercept: ",type:"line"}],calc:(e,t)=>{const{calcParams:r}=t,n=r[0].value;return e.length<n?{}:e.reduce((i,o,s)=>{if(s<n-1)return i;const u=e.slice(s-(n-1),s+1);if(!u.every(M=>Sr(M.close)))return i;const c=Array.from({length:n},(M,L)=>L+1),h=u.map(M=>M.close);let p=0,g=0,m=0,b=0;for(let M=0;M<n;M++)p+=c[M],g+=h[M],m+=c[M]*h[M],b+=c[M]*c[M];const x=n*b-p*p,C=x!==0?(n*m-p*g)/x:0,_=(g-C*p)/n,k=C*n+_;return i[o.timestamp]={slope:C,intercept:_,line:k},i},{})}},rE={isMainIndicator:!1,isSubIndicator:!0,name:"MACD",shortName:"MACD",calcParams:[{name:"fastPeriod",type:"number",value:12},{name:"slowPeriod",type:"number",value:26},{name:"signalPeriod",type:"number",value:9}],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:({data:e,indicator:t,defaultStyles:r})=>{const{prev:n,current:i}=e,o=(n==null?void 0:n.macd)??Number.MIN_SAFE_INTEGER,s=(i==null?void 0:i.macd)??Number.MIN_SAFE_INTEGER;let u="";return s>0?u=en(t.styles,"bars[0].upColor",r.bars[0].upColor):s<0?u=en(t.styles,"bars[0].downColor",r.bars[0].downColor):u=en(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor),{style:o<s?"stroke":"fill",color:u,borderColor:u}}}],calc:(e,t)=>{const r=t.calcParams;let n=0,i=0,o=0,s=0,u=0,c=0;const h=Math.max(r[0].value,r[1].value);return e.reduce((p,g,m)=>{const b=g.close;if(n+=b,m>=r[0].value-1&&(m>r[0].value-1?i=(2*b+(r[0].value-1)*i)/(r[0].value+1):i=n/r[0].value),m>=r[1].value-1&&(m>r[1].value-1?o=(2*b+(r[1].value-1)*o)/(r[1].value+1):o=n/r[1].value),m>=h-1){s=i-o,u+=s;const x={dif:s};m>=h+r[2].value-2&&(m>h+r[2].value-2?c=(s*2+c*(r[2].value-1))/(r[2].value+1):c=u/r[2].value,x.macd=(s-c)*2,x.dea=c),p[g.timestamp]=x}return p},{})}},ov=[Qk,Gk,Jk,eM,tM,rM,nM,iM,oM,aM,sM,lM,cM,uM,dM,hM,pM,fM,gM,vM,mM,bM,xM,wM,CM,L2,P2,_M,SM,kM,MM,EM,TM,IM,LM,PM,AM,DM,NM,FM,RM,OM,zM,VM,BM,$M,WM,HM,UM,jM,XM,YM,ZM,KM,qM,QM,GM,JM,eE,tE,rE],nE=[L2,P2],Dp=[],V0=[],iE=[...ov];iE.forEach(e=>{e.isMainIndicator?sE(e.name):e.isSubIndicator?lE(e.name):console.warn("Unknown indicator type during initialization: ",e.name),Qy(e)});function oE(e){const t=[];return Dp.forEach(r=>{e.forEach(n=>{r===n&&t.push(n)})}),t}function aE(e){const t=[];return V0.forEach(r=>{e.forEach(n=>{r===n&&t.push(n)})}),t}function sE(e){Dp.includes(e)||Dp.push(e)}function lE(e){V0.includes(e)||V0.push(e)}function zm(){return[...ov]}var br=(e=>(e.STOCKS="stocks",e.CRYPTO="crypto",e.FOREX="forex",e.FUTURES="futures",e))(br||{});const qe={ONE_MIN:"1m",THREE_MIN:"3m",FIVE_MIN:"5m",FIFTEEN_MIN:"15m",THIRTY_MIN:"30m",ONE_HOUR:"1H",TWO_HOUR:"2H",FOUR_HOUR:"4H",SIX_HOUR:"6H",EIGHT_HOUR:"8H",TWELVE_HOUR:"12h",ONE_DAY:"D",THREE_DAY:"3D",FIVE_DAY:"5D",ONE_WEEK:"W",ONE_MONTH:"M",THREE_MONTH:"3M",SIX_MONTH:"6M",ONE_YEAR:"Y",FIVE_YEAR:"5Y",DEFAULT:"default"},Tn={MINUTE:"minute",HOUR:"hour",DAY:"day",WEEK:"week",MONTH:"month"};var X0=(e=>(e.RENKO="renko",e))(X0||{});const Vm={[qe.ONE_MIN]:"1m",[qe.THREE_MIN]:"3m",[qe.FIVE_MIN]:"5m",[qe.FIFTEEN_MIN]:"15m",[qe.THIRTY_MIN]:"30m",[qe.ONE_HOUR]:"1h",[qe.TWO_HOUR]:"2h",[qe.FOUR_HOUR]:"4h",[qe.SIX_HOUR]:"6h",[qe.EIGHT_HOUR]:"8h",[qe.TWELVE_HOUR]:"12h",[qe.ONE_DAY]:"1d",[qe.THREE_DAY]:"3d",[qe.FIVE_DAY]:"5d",[qe.ONE_WEEK]:"1w",[qe.ONE_MONTH]:"1M",[qe.THREE_MONTH]:"3M",[qe.SIX_MONTH]:"6M",[qe.ONE_YEAR]:"1y",[qe.FIVE_YEAR]:"5y",[qe.DEFAULT]:"15m"};function Yc(e,t){return Vm[t.text]||Vm[qe.DEFAULT]}class Vd{static createBaseIconConfig(t){return{position:"middle",marginRight:0,marginBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,borderRadius:0,type:"icon_font",size:16,color:t,activeColor:t,backgroundColor:"transparent",activeBackgroundColor:"rgba(22, 119, 255, 0.15)"}}static createArrowDownIcon(t){const r=this.createArrowIcon(!1);return{...this.createBaseIconConfig(t),id:"arrow_down",position:"left",...r}}static createVisibleIcon(t){return{...this.createBaseIconConfig(t),id:"visible",marginLeft:8,marginTop:7,content:{code:"",family:"icomoon"}}}static createInvisibleIcon(t){return{...this.createBaseIconConfig(t),id:"invisible",marginLeft:8,marginTop:7,content:{code:"",family:"icomoon"}}}static createSettingIcon(t){return{...this.createBaseIconConfig(t),id:"setting",marginLeft:6,marginTop:7,content:{code:"",family:"icomoon"}}}static createCloseIcon(t){return{...this.createBaseIconConfig(t),id:"close",marginLeft:6,marginTop:7,content:{code:"",family:"icomoon"}}}static createIndicatorTooltipIcons(t){return[this.createVisibleIcon(t),this.createInvisibleIcon(t),this.createSettingIcon(t),this.createCloseIcon(t),this.createArrowDownIcon(t)]}static createCandleTooltipIcons(t){return[this.createArrowDownIcon(t)]}static getRightArrowCode(){return"›"}static getDownArrowCode(){return"⌄"}static createArrowIcon(t){return{marginTop:t?-3:-10,marginLeft:10,size:25,content:{code:t?this.getRightArrowCode():this.getDownArrowCode(),family:"Arial, sans-serif"}}}}class cE{static createDefaultIcons(t){return Vd.createIndicatorTooltipIcons(t)}static createTooltipConfig(t){const r=t==="dark"?"#929AA5":"#76808F";return{features:this.createDefaultIcons(r)}}}class uE{static createDefaultCandleIcons(t){const r=t==="dark"?"#929AA5":"#76808F";return Vd.createCandleTooltipIcons(r)}static createCandleTooltipConfig(t){return{features:this.createDefaultCandleIcons(t),offsetLeft:8,offsetTop:8,offsetRight:8,offsetBottom:8}}}const dE=(e,t)=>e===t,ja=Symbol("solid-proxy"),hE=typeof Proxy=="function",Rg=Symbol("solid-track"),Fp={equals:dE};let A2=V2;const Vs=1,Rp=2,D2={owned:null,cleanups:null,context:null,owner:null},og={};var lr=null;let ag=null,xr=null,gi=null,Rs=null,Yp=0;function Bd(e,t){const r=xr,n=lr,i=e.length===0,o=t===void 0?n:t,s=i?D2:{owned:null,cleanups:null,context:o?o.context:null,owner:o},u=i?e:()=>e(()=>Ze(()=>B0(s)));lr=s,xr=null;try{return Xa(u,!0)}finally{xr=r,lr=n}}function me(e,t){t=t?Object.assign({},Fp,t):Fp;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(r.value)),z2(r,i));return[N2.bind(r),n]}function pE(e,t,r){const n=Zp(e,t,!0,Vs);qd(n)}function Ae(e,t,r){const n=Zp(e,t,!1,Vs);qd(n)}function tt(e,t,r){A2=CE;const n=Zp(e,t,!1,Vs);(!r||!r.render)&&(n.user=!0),Rs?Rs.push(n):qd(n)}function Bt(e,t,r){r=r?Object.assign({},Fp,r):Fp;const n=Zp(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,qd(n),N2.bind(n)}function fE(e){return e&&typeof e=="object"&&"then"in e}function gE(e,t,r){let n,i,o;typeof t=="function"?(n=e,i=t,o={}):(n=!0,i=e,o=t||{});let s=null,u=og,c=!1,h="initialValue"in o,p=typeof n=="function"&&Bt(n);const g=new Set,[m,b]=(o.storage||me)(o.initialValue),[x,C]=me(void 0),[_,k]=me(void 0,{equals:!1}),[M,L]=me(h?"ready":"unresolved");function D(z,B,Q,ne){return s===z&&(s=null,ne!==void 0&&(h=!0),(z===u||B===u)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(ne,{value:B})),u=og,P(B,Q)),B}function P(z,B){Xa(()=>{B===void 0&&b(()=>z),L(B!==void 0?"errored":h?"ready":"unresolved"),C(B);for(const Q of g.keys())Q.decrement();g.clear()},!1)}function $(){const z=bE,B=m(),Q=x();if(Q!==void 0&&!s)throw Q;return xr&&xr.user,B}function A(z=!0){if(z!==!1&&c)return;c=!1;const B=p?p():n;if(B==null||B===!1){D(s,Ze(m));return}let Q;const ne=u!==og?u:Ze(()=>{try{return i(B,{value:m(),refetching:z})}catch(Z){Q=Z}});if(Q!==void 0){D(s,void 0,Cp(Q),B);return}else if(!fE(ne))return D(s,ne,void 0,B),ne;return s=ne,"v"in ne?(ne.s===1?D(s,ne.v,void 0,B):D(s,void 0,Cp(ne.v),B),ne):(c=!0,queueMicrotask(()=>c=!1),Xa(()=>{L(h?"refreshing":"pending"),k()},!1),ne.then(Z=>D(ne,Z,void 0,B),Z=>D(ne,void 0,Cp(Z),B)))}Object.defineProperties($,{state:{get:()=>M()},error:{get:()=>x()},loading:{get(){const z=M();return z==="pending"||z==="refreshing"}},latest:{get(){if(!h)return $();const z=x();if(z&&!s)throw z;return m()}}});let N=lr;return p?pE(()=>(N=lr,A(!1))):A(!1),[$,{refetch:z=>F2(N,()=>A(z)),mutate:b}]}function $a(e){return Xa(e,!1)}function Ze(e){if(xr===null)return e();const t=xr;xr=null;try{return e()}finally{xr=t}}function av(e,t,r){const n=Array.isArray(e);let i;return o=>{let s;if(n){s=Array(e.length);for(let c=0;c<e.length;c++)s[c]=e[c]()}else s=e();const u=Ze(()=>t(s,i,o));return i=s,u}}function Ei(e){tt(()=>Ze(e))}function Nr(e){return lr===null||(lr.cleanups===null?lr.cleanups=[e]:lr.cleanups.push(e)),e}function Og(){return xr}function vE(){return lr}function F2(e,t){const r=lr,n=xr;lr=e,xr=null;try{return Xa(t,!0)}catch(i){sv(i)}finally{lr=r,xr=n}}function mE(e){const t=xr,r=lr;return Promise.resolve().then(()=>{xr=t,lr=r;let n;return Xa(e,!1),xr=lr=null,n?n.done:void 0})}function R2(e,t){const r=Symbol("context");return{id:r,Provider:_E(r),defaultValue:e}}function O2(e){let t;return lr&&lr.context&&(t=lr.context[e.id])!==void 0?t:e.defaultValue}function yE(e){const t=Bt(e),r=Bt(()=>Ng(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let bE;function N2(){if(this.sources&&this.state)if(this.state===Vs)qd(this);else{const e=gi;gi=null,Xa(()=>Np(this),!1),gi=e}if(xr){const e=this.observers?this.observers.length:0;xr.sources?(xr.sources.push(this),xr.sourceSlots.push(e)):(xr.sources=[this],xr.sourceSlots=[e]),this.observers?(this.observers.push(xr),this.observerSlots.push(xr.sources.length-1)):(this.observers=[xr],this.observerSlots=[xr.sources.length-1])}return this.value}function z2(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Xa(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],s=ag&&ag.running;s&&ag.disposed.has(o),(s?!o.tState:!o.state)&&(o.pure?gi.push(o):Rs.push(o),o.observers&&B2(o)),s||(o.state=Vs)}if(gi.length>1e6)throw gi=[],new Error},!1)),t}function qd(e){if(!e.fn)return;B0(e);const t=Yp;xE(e,e.value,t)}function xE(e,t,r){let n;const i=lr,o=xr;xr=lr=e;try{n=e.fn(t)}catch(s){return e.pure&&(e.state=Vs,e.owned&&e.owned.forEach(B0),e.owned=null),e.updatedAt=r+1,sv(s)}finally{xr=o,lr=i}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?z2(e,n):e.value=n,e.updatedAt=r)}function Zp(e,t,r,n=Vs,i){const o={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:lr,context:lr?lr.context:null,pure:r};return lr===null||lr!==D2&&(lr.owned?lr.owned.push(o):lr.owned=[o]),o}function Op(e){if(e.state===0)return;if(e.state===Rp)return Np(e);if(e.suspense&&Ze(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Yp);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===Vs)qd(e);else if(e.state===Rp){const n=gi;gi=null,Xa(()=>Np(e,t[0]),!1),gi=n}}function Xa(e,t){if(gi)return e();let r=!1;t||(gi=[]),Rs?r=!0:Rs=[],Yp++;try{const n=e();return wE(r),n}catch(n){r||(Rs=null),gi=null,sv(n)}}function wE(e){if(gi&&(V2(gi),gi=null),e)return;const t=Rs;Rs=null,t.length&&Xa(()=>A2(t),!1)}function V2(e){for(let t=0;t<e.length;t++)Op(e[t])}function CE(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:Op(n)}for(t=0;t<r;t++)Op(e[t])}function Np(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const i=n.state;i===Vs?n!==t&&(!n.updatedAt||n.updatedAt<Yp)&&Op(n):i===Rp&&Np(n,t)}}}function B2(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Rp,r.pure?gi.push(r):Rs.push(r),r.observers&&B2(r))}}function B0(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),i=r.observers;if(i&&i.length){const o=i.pop(),s=r.observerSlots.pop();n<i.length&&(o.sourceSlots[s]=n,i[n]=o,r.observerSlots[n]=s)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)B0(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)B0(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Cp(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function sv(e,t=lr){throw Cp(e)}function Ng(e){if(typeof e=="function"&&!e.length)return Ng(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Ng(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function _E(e,t){return function(r){let n;return Ae(()=>n=Ze(()=>(lr.context={...lr.context,[e]:r.value},yE(()=>r.children))),void 0),n}}const SE=Symbol("fallback");function Bm(e){for(let t=0;t<e.length;t++)e[t]()}function kE(e,t,r={}){let n=[],i=[],o=[],s=0,u=t.length>1?[]:null;return Nr(()=>Bm(o)),()=>{let c=e()||[],h=c.length,p,g;return c[Rg],Ze(()=>{let b,x,C,_,k,M,L,D,P;if(h===0)s!==0&&(Bm(o),o=[],n=[],i=[],s=0,u&&(u=[])),r.fallback&&(n=[SE],i[0]=Bd($=>(o[0]=$,r.fallback())),s=1);else if(s===0){for(i=new Array(h),g=0;g<h;g++)n[g]=c[g],i[g]=Bd(m);s=h}else{for(C=new Array(h),_=new Array(h),u&&(k=new Array(h)),M=0,L=Math.min(s,h);M<L&&n[M]===c[M];M++);for(L=s-1,D=h-1;L>=M&&D>=M&&n[L]===c[D];L--,D--)C[D]=i[L],_[D]=o[L],u&&(k[D]=u[L]);for(b=new Map,x=new Array(D+1),g=D;g>=M;g--)P=c[g],p=b.get(P),x[g]=p===void 0?-1:p,b.set(P,g);for(p=M;p<=L;p++)P=n[p],g=b.get(P),g!==void 0&&g!==-1?(C[g]=i[p],_[g]=o[p],u&&(k[g]=u[p]),g=x[g],b.set(P,g)):o[p]();for(g=M;g<h;g++)g in C?(i[g]=C[g],o[g]=_[g],u&&(u[g]=k[g],u[g](g))):i[g]=Bd(m);i=i.slice(0,s=h),n=c.slice(0)}return i});function m(b){if(o[g]=b,u){const[x,C]=me(g);return u[g]=C,t(c[g],x)}return t(c[g])}}}function Y(e,t){return Ze(()=>e(t||{}))}function lp(){return!0}const ME={get(e,t,r){return t===ja?r:e.get(t)},has(e,t){return t===ja?!0:e.has(t)},set:lp,deleteProperty:lp,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:lp,deleteProperty:lp}},ownKeys(e){return e.keys()}};function sg(e){return(e=typeof e=="function"?e():e)?e:{}}function EE(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function Kp(...e){let t=!1;for(let s=0;s<e.length;s++){const u=e[s];t=t||!!u&&ja in u,e[s]=typeof u=="function"?(t=!0,Bt(u)):u}if(hE&&t)return new Proxy({get(s){for(let u=e.length-1;u>=0;u--){const c=sg(e[u])[s];if(c!==void 0)return c}},has(s){for(let u=e.length-1;u>=0;u--)if(s in sg(e[u]))return!0;return!1},keys(){const s=[];for(let u=0;u<e.length;u++)s.push(...Object.keys(sg(e[u])));return[...new Set(s)]}},ME);const r={},n=Object.create(null);for(let s=e.length-1;s>=0;s--){const u=e[s];if(!u)continue;const c=Object.getOwnPropertyNames(u);for(let h=c.length-1;h>=0;h--){const p=c[h];if(p==="__proto__"||p==="constructor")continue;const g=Object.getOwnPropertyDescriptor(u,p);if(!n[p])n[p]=g.get?{enumerable:!0,configurable:!0,get:EE.bind(r[p]=[g.get.bind(u)])}:g.value!==void 0?g:void 0;else{const m=r[p];m&&(g.get?m.push(g.get.bind(u)):g.value!==void 0&&m.push(()=>g.value))}}}const i={},o=Object.keys(n);for(let s=o.length-1;s>=0;s--){const u=o[s],c=n[u];c&&c.get?Object.defineProperty(i,u,c):i[u]=c?c.value:void 0}return i}const TE=e=>`Stale read from <${e}>.`;function bn(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Bt(kE(()=>e.each,e.children,t||void 0))}function Pe(e){const t=e.keyed,r=Bt(()=>e.when,void 0,void 0),n=t?r:Bt(r,void 0,{equals:(i,o)=>!i==!o});return Bt(()=>{const i=n();if(i){const o=e.children;return typeof o=="function"&&o.length>0?Ze(()=>o(t?i:()=>{if(!Ze(n))throw TE("Show");return r()})):o}return e.fallback},void 0,void 0)}const Le=e=>Bt(()=>e());function IE(e,t,r){let n=r.length,i=t.length,o=n,s=0,u=0,c=t[i-1].nextSibling,h=null;for(;s<i||u<o;){if(t[s]===r[u]){s++,u++;continue}for(;t[i-1]===r[o-1];)i--,o--;if(i===s){const p=o<n?u?r[u-1].nextSibling:r[o-u]:c;for(;u<o;)e.insertBefore(r[u++],p)}else if(o===u)for(;s<i;)(!h||!h.has(t[s]))&&t[s].remove(),s++;else if(t[s]===r[o-1]&&r[u]===t[i-1]){const p=t[--i].nextSibling;e.insertBefore(r[u++],t[s++].nextSibling),e.insertBefore(r[--o],p),t[i]=r[o]}else{if(!h){h=new Map;let g=u;for(;g<o;)h.set(r[g],g++)}const p=h.get(t[s]);if(p!=null)if(u<p&&p<o){let g=s,m=1,b;for(;++g<i&&g<o&&!((b=h.get(t[g]))==null||b!==p+m);)m++;if(m>p-u){const x=t[s];for(;u<p;)e.insertBefore(r[u++],x)}else e.replaceChild(r[u++],t[s++])}else s++;else t[s++].remove()}}}const $m="_$DX_DELEGATE";function LE(e,t,r,n={}){let i;return Bd(o=>{i=o,t===document?e():F(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{i(),t.textContent=""}}function K(e,t,r,n){let i;const o=()=>{const u=document.createElement("template");return u.innerHTML=e,u.content.firstChild},s=()=>(i||(i=o())).cloneNode(!0);return s.cloneNode=s,s}function Dt(e,t=window.document){const r=t[$m]||(t[$m]=new Set);for(let n=0,i=e.length;n<i;n++){const o=e[n];r.has(o)||(r.add(o),t.addEventListener(o,PE))}}function Be(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Ge(e,t){t==null?e.removeAttribute("class"):e.className=t}function Hn(e,t,r,n){Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r}function mn(e,t,r){if(!t)return r?Be(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let i,o;for(o in r)t[o]==null&&n.removeProperty(o),delete r[o];for(o in t)i=t[o],i!==r[o]&&(n.setProperty(o,i),r[o]=i);return r}function tn(e,t,r){return Ze(()=>e(t,r))}function F(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return zp(e,t,n,r);Ae(i=>zp(e,t(),i,r),n)}function PE(e){let t=e.target;const r=`$$${e.type}`,n=e.target,i=e.currentTarget,o=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),s=()=>{const c=t[r];if(c&&!t.disabled){const h=t[`${r}Data`];if(h!==void 0?c.call(t,h,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},u=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const c=e.composedPath();o(c[0]);for(let h=0;h<c.length-2&&(t=c[h],!!s());h++){if(t._$host){t=t._$host,u();break}if(t.parentNode===i)break}}else u();o(n)}function zp(e,t,r,n,i){for(;typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,s=n!==void 0;if(e=s&&r[0]&&r[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===r))return r;if(s){let u=r[0];u&&u.nodeType===3?u.data!==t&&(u.data=t):u=document.createTextNode(t),r=kd(e,r,n,u)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||o==="boolean")r=kd(e,r,n);else{if(o==="function")return Ae(()=>{let u=t();for(;typeof u=="function";)u=u();r=zp(e,u,r,n)}),()=>r;if(Array.isArray(t)){const u=[],c=r&&Array.isArray(r);if(zg(u,t,r,i))return Ae(()=>r=zp(e,u,r,n,!0)),()=>r;if(u.length===0){if(r=kd(e,r,n),s)return r}else c?r.length===0?Wm(e,u,n):IE(e,r,u):(r&&kd(e),Wm(e,u));r=u}else if(t.nodeType){if(Array.isArray(r)){if(s)return r=kd(e,r,n,t);kd(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function zg(e,t,r,n){let i=!1;for(let o=0,s=t.length;o<s;o++){let u=t[o],c=r&&r[e.length],h;if(!(u==null||u===!0||u===!1))if((h=typeof u)=="object"&&u.nodeType)e.push(u);else if(Array.isArray(u))i=zg(e,u,c)||i;else if(h==="function")if(n){for(;typeof u=="function";)u=u();i=zg(e,Array.isArray(u)?u:[u],Array.isArray(c)?c:[c])||i}else e.push(u),i=!0;else{const p=String(u);c&&c.nodeType===3&&c.data===p?e.push(c):e.push(document.createTextNode(p))}}return i}function Wm(e,t,r=null){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],r)}function kd(e,t,r,n){if(r===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let o=!1;for(let s=t.length-1;s>=0;s--){const u=t[s];if(i!==u){const c=u.parentNode===e;!o&&!s?c?e.replaceChild(i,u):e.insertBefore(i,r):c&&u.remove()}else o=!0}}else e.insertBefore(i,r);return[i]}const AE="http://www.w3.org/2000/svg";function DE(e,t=!1){return t?document.createElementNS(AE,e):document.createElement(e)}function lv(e){const{useShadow:t}=e,r=document.createTextNode(""),n=()=>e.mount||document.body,i=vE();let o;return tt(()=>{o||(o=F2(i,()=>Bt(()=>e.children)));const s=n();if(s instanceof HTMLHeadElement){const[u,c]=me(!1),h=()=>c(!0);Bd(p=>F(s,()=>u()?p():o(),null)),Nr(h)}else{const u=DE(e.isSVG?"g":"div",e.isSVG),c=t&&u.attachShadow?u.attachShadow({mode:"open"}):u;Object.defineProperty(u,"_$host",{get(){return r.parentNode},configurable:!0}),F(c,o),s.appendChild(u),e.ref&&e.ref(u),Nr(()=>s.removeChild(u))}},void 0,{render:!0}),r}const Vg=Symbol("store-raw"),$d=Symbol("store-node"),Ls=Symbol("store-has"),$2=Symbol("store-self");function W2(e){let t=e[ja];if(!t&&(Object.defineProperty(e,ja,{value:t=new Proxy(e,OE)}),!Array.isArray(e))){const r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let i=0,o=r.length;i<o;i++){const s=r[i];n[s].get&&Object.defineProperty(e,s,{enumerable:n[s].enumerable,get:n[s].get.bind(t)})}}return t}function Ol(e){let t;return e!=null&&typeof e=="object"&&(e[ja]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Xd(e,t=new Set){let r,n,i,o;if(r=e!=null&&e[Vg])return r;if(!Ol(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,u=e.length;s<u;s++)i=e[s],(n=Xd(i,t))!==i&&(e[s]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),u=Object.getOwnPropertyDescriptors(e);for(let c=0,h=s.length;c<h;c++)o=s[c],!u[o].get&&(i=e[o],(n=Xd(i,t))!==i&&(e[o]=n))}return e}function Vp(e,t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function $0(e,t,r){if(e[t])return e[t];const[n,i]=me(r,{equals:!1,internal:!0});return n.$=i,e[t]=n}function FE(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===ja||t===$d||(delete r.value,delete r.writable,r.get=()=>e[ja][t]),r}function H2(e){Og()&&$0(Vp(e,$d),$2)()}function RE(e){return H2(e),Reflect.ownKeys(e)}const OE={get(e,t,r){if(t===Vg)return e;if(t===ja)return r;if(t===Rg)return H2(e),r;const n=Vp(e,$d),i=n[t];let o=i?i():e[t];if(t===$d||t===Ls||t==="__proto__")return o;if(!i){const s=Object.getOwnPropertyDescriptor(e,t);Og()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(s&&s.get)&&(o=$0(n,t,o)())}return Ol(o)?W2(o):o},has(e,t){return t===Vg||t===ja||t===Rg||t===$d||t===Ls||t==="__proto__"?!0:(Og()&&$0(Vp(e,Ls),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:RE,getOwnPropertyDescriptor:FE};function Do(e,t,r,n=!1){if(!n&&e[t]===r)return;const i=e[t],o=e.length;r===void 0?(delete e[t],e[Ls]&&e[Ls][t]&&i!==void 0&&e[Ls][t].$()):(e[t]=r,e[Ls]&&e[Ls][t]&&i===void 0&&e[Ls][t].$());let s=Vp(e,$d),u;if((u=$0(s,t,i))&&u.$(()=>r),Array.isArray(e)&&e.length!==o){for(let c=e.length;c<o;c++)(u=s[c])&&u.$();(u=$0(s,"length",o))&&u.$(e.length)}(u=s[$2])&&u.$()}function U2(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const i=r[n];Do(e,i,t[i])}}function NE(e,t){if(typeof t=="function"&&(t=t(e)),t=Xd(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const i=t[r];e[r]!==i&&Do(e,r,i)}Do(e,"length",n)}else U2(e,t)}function E0(e,t,r=[]){let n,i=e;if(t.length>1){n=t.shift();const s=typeof n,u=Array.isArray(e);if(Array.isArray(n)){for(let c=0;c<n.length;c++)E0(e,[n[c]].concat(t),r);return}else if(u&&s==="function"){for(let c=0;c<e.length;c++)n(e[c],c)&&E0(e,[c].concat(t),r);return}else if(u&&s==="object"){const{from:c=0,to:h=e.length-1,by:p=1}=n;for(let g=c;g<=h;g+=p)E0(e,[g].concat(t),r);return}else if(t.length>1){E0(e[n],t,[n].concat(r));return}i=e[n],r=[n].concat(r)}let o=t[0];typeof o=="function"&&(o=o(i,r),o===i)||n===void 0&&o==null||(o=Xd(o),n===void 0||Ol(i)&&Ol(o)&&!Array.isArray(o)?U2(i,o):Do(e,n,o))}function Nl(...[e,t]){const r=Xd(e||{}),n=Array.isArray(r),i=W2(r);function o(...s){$a(()=>{n&&s.length===1?NE(r,s[0]):E0(r,s)})}return[i,o]}const Bg=Symbol("store-root");function Ad(e,t,r,n,i){const o=t[r];if(e===o)return;const s=Array.isArray(e);if(r!==Bg&&(!Ol(e)||!Ol(o)||s!==Array.isArray(o)||i&&e[i]!==o[i])){Do(t,r,e);return}if(s){if(e.length&&o.length&&(!n||i&&e[0]&&e[0][i]!=null)){let h,p,g,m,b,x,C,_;for(g=0,m=Math.min(o.length,e.length);g<m&&(o[g]===e[g]||i&&o[g]&&e[g]&&o[g][i]===e[g][i]);g++)Ad(e[g],o,g,n,i);const k=new Array(e.length),M=new Map;for(m=o.length-1,b=e.length-1;m>=g&&b>=g&&(o[m]===e[b]||i&&o[m]&&e[b]&&o[m][i]===e[b][i]);m--,b--)k[b]=o[m];if(g>b||g>m){for(p=g;p<=b;p++)Do(o,p,e[p]);for(;p<e.length;p++)Do(o,p,k[p]),Ad(e[p],o,p,n,i);o.length>e.length&&Do(o,"length",e.length);return}for(C=new Array(b+1),p=b;p>=g;p--)x=e[p],_=i&&x?x[i]:x,h=M.get(_),C[p]=h===void 0?-1:h,M.set(_,p);for(h=g;h<=m;h++)x=o[h],_=i&&x?x[i]:x,p=M.get(_),p!==void 0&&p!==-1&&(k[p]=o[h],p=C[p],M.set(_,p));for(p=g;p<e.length;p++)p in k?(Do(o,p,k[p]),Ad(e[p],o,p,n,i)):Do(o,p,e[p])}else for(let h=0,p=e.length;h<p;h++)Ad(e[h],o,h,n,i);o.length>e.length&&Do(o,"length",e.length);return}const u=Object.keys(e);for(let h=0,p=u.length;h<p;h++)Ad(e[u[h]],o,u[h],n,i);const c=Object.keys(o);for(let h=0,p=c.length;h<p;h++)e[c[h]]===void 0&&Do(o,c[h],void 0)}function j2(e,t={}){const{merge:r,key:n="id"}=t,i=Xd(e);return o=>{if(!Ol(o)||!Ol(i))return i;const s=Ad(i,{[Bg]:o},Bg,r,n);return s===void 0?o:s}}function _p(e,t){switch(e){case"Etc/UTC":return I("utc",t);case"Pacific/Honolulu":return I("honolulu",t);case"America/Juneau":return I("juneau",t);case"America/Los_Angeles":return I("los_angeles",t);case"America/Chicago":return I("chicago",t);case"America/Toronto":return I("toronto",t);case"America/Sao_Paulo":return I("sao_paulo",t);case"Europe/London":return I("london",t);case"Europe/Berlin":return I("berlin",t);case"Asia/Bahrain":return I("bahrain",t);case"Asia/Dubai":return I("dubai",t);case"Asia/Ashkhabad":return I("ashkhabad",t);case"Asia/Almaty":return I("almaty",t);case"Asia/Bangkok":return I("bangkok",t);case"Asia/Shanghai":return I("shanghai",t);case"Asia/Tokyo":return I("tokyo",t);case"Australia/Sydney":return I("sydney",t);case"Pacific/Norfolk":return I("norfolk",t)}return e}function zE(e){return[{key:"Etc/UTC",text:I("utc",e)},{key:"Pacific/Honolulu",text:I("honolulu",e)},{key:"America/Juneau",text:I("juneau",e)},{key:"America/Los_Angeles",text:I("los_angeles",e)},{key:"America/Chicago",text:I("chicago",e)},{key:"America/Toronto",text:I("toronto",e)},{key:"America/Sao_Paulo",text:I("sao_paulo",e)},{key:"Europe/London",text:I("london",e)},{key:"Europe/Berlin",text:I("berlin",e)},{key:"Asia/Bahrain",text:I("bahrain",e)},{key:"Asia/Dubai",text:I("dubai",e)},{key:"Asia/Ashkhabad",text:I("ashkhabad",e)},{key:"Asia/Almaty",text:I("almaty",e)},{key:"Asia/Bangkok",text:I("bangkok",e)},{key:"Asia/Shanghai",text:I("shanghai",e)},{key:"Asia/Tokyo",text:I("tokyo",e)},{key:"Australia/Sydney",text:I("sydney",e)},{key:"Pacific/Norfolk",text:I("norfolk",e)}]}function VE(e,t,r,n){if(e&&e.length>0){r([]),n({});const i=e.map(c=>c.name),o=oE(i),s=aE(i);r(o);const u={};e.forEach(c=>{if(t!=null){const h={name:c.name,id:c.id,calcParams:c.calcParams,visible:c.visible,zLevel:c.zLevel,precision:c.precision,shortName:c.shortName,shouldOhlc:c.shouldOhlc,shouldFormatBigNumber:c.shouldFormatBigNumber,series:c.series,minValue:c.minValue,maxValue:c.maxValue,styles:c.styles,figures:c.figures};if(s.includes(c.name)){const p=t.getIndicators({name:c.name});if(p.length===0){const g=t.createIndicator(h,!0);g&&(u[c.name]=g)}else{const g=p[0];t.overrideIndicator({id:g.id,name:c.name,calcParams:c.calcParams,styles:c.styles,visible:c.visible,zLevel:c.zLevel,precision:c.precision,shortName:c.shortName,shouldOhlc:c.shouldOhlc,shouldFormatBigNumber:c.shouldFormatBigNumber,series:c.series,minValue:c.minValue,maxValue:c.maxValue,figures:c.figures}),u[c.name]=g.paneId}}else{const p=t.getIndicators({paneId:"candle_pane",name:c.name});p.length===0?t.createIndicator(h,!0,{id:"candle_pane"}):t.overrideIndicator({id:p[0].id,name:c.name,calcParams:c.calcParams,styles:c.styles,visible:c.visible,zLevel:c.zLevel,precision:c.precision,shortName:c.shortName,shouldOhlc:c.shouldOhlc,shouldFormatBigNumber:c.shouldFormatBigNumber,series:c.series,minValue:c.minValue,maxValue:c.maxValue,figures:c.figures})}}}),n(u)}}function BE(e,t){e.forEach(r=>{t!=null&&t.getIndicators({paneId:"candle_pane",name:r}).length===0&&Kg(t,r,!1,!0,{id:"candle_pane"})})}var $E=K("<button>");const X2=e=>(()=>{var t=$E();return Hn(t,"click",e.onClick),F(t,()=>e.children),Ae(r=>{var n=e.style,i=`chartspire-ui-button ${e.type??"confirm"} ${e.class??""}`;return r.e=mn(t,n,r.e),i!==r.t&&Ge(t,r.t=i),r},{e:void 0,t:void 0}),t})();Dt(["click"]);var WE=K('<svg viewBox="0 0 1024 1024"class=icon><path d="M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m-353.706667 567.04a42.496 42.496 0 0 1-60.16 0L243.626667 541.866667c-8.106667-8.106667-12.373333-18.773333-12.373334-29.866667s4.693333-22.186667 12.373334-29.866667a42.496 42.496 0 0 1 60.16 0L426.666667 604.586667l293.546666-293.546667a42.496 42.496 0 1 1 60.16 60.16l-323.413333 323.84z">'),HE=K('<svg viewBox="0 0 1024 1024"class=icon><path d="M245.333333 128h533.333334A117.333333 117.333333 0 0 1 896 245.333333v533.333334A117.333333 117.333333 0 0 1 778.666667 896H245.333333A117.333333 117.333333 0 0 1 128 778.666667V245.333333A117.333333 117.333333 0 0 1 245.333333 128z m0 64c-29.44 0-53.333333 23.893333-53.333333 53.333333v533.333334c0 29.44 23.893333 53.333333 53.333333 53.333333h533.333334c29.44 0 53.333333-23.893333 53.333333-53.333333V245.333333c0-29.44-23.893333-53.333333-53.333333-53.333333H245.333333z">'),UE=K("<div>"),jE=K("<span class=label>");const XE=()=>WE(),YE=()=>HE(),ZE=e=>{const[t,r]=me(e.checked??!1);return tt(()=>{"checked"in e&&r(e.checked)}),(()=>{var n=UE();return n.$$click=i=>{const o=!t();e.onChange!=null&&e.onChange(o),r(o)},F(n,(()=>{var i=Le(()=>!!e.label);return()=>i()&&(()=>{var o=jE();return F(o,()=>e.label),o})()})(),null),F(n,(()=>{var i=Le(()=>!!t());return()=>i()?Y(XE,{}):Y(YE,{})})(),null),Ae(i=>{var o=e.style,s=`chartspire-ui-checkbox ${t()&&"checked"||""} ${e.class||""}`;return i.e=mn(n,o,i.e),s!==i.t&&Ge(n,i.t=s),i},{e:void 0,t:void 0}),n})()};Dt(["click"]);var KE=K("<div class=chartspire-ui-loading><div class=loading-container><div class=spinner><div class=spinner-ring></div><div class=spinner-ring></div><div class=spinner-ring></div></div><div class=loading-text>Loading...");const Y2=()=>KE();var qE=K('<div class=chartspire-ui-empty><svg class=icon viewBox="0 0 1024 1024"><path d="M855.6 427.2H168.5c-12.7 0-24.4 6.9-30.6 18L4.4 684.7C1.5 689.9 0 695.8 0 701.8v287.1c0 19.4 15.7 35.1 35.1 35.1H989c19.4 0 35.1-15.7 35.1-35.1V701.8c0-6-1.5-11.8-4.4-17.1L886.2 445.2c-6.2-11.1-17.9-18-30.6-18zM673.4 695.6c-16.5 0-30.8 11.5-34.3 27.7-12.7 58.5-64.8 102.3-127.2 102.3s-114.5-43.8-127.2-102.3c-3.5-16.1-17.8-27.7-34.3-27.7H119c-26.4 0-43.3-28-31.1-51.4l81.7-155.8c6.1-11.6 18-18.8 31.1-18.8h622.4c13 0 25 7.2 31.1 18.8l81.7 155.8c12.2 23.4-4.7 51.4-31.1 51.4H673.4zM819.9 209.5c-1-1.8-2.1-3.7-3.2-5.5-9.8-16.6-31.1-22.2-47.8-12.6L648.5 261c-17 9.8-22.7 31.6-12.6 48.4 0.9 1.4 1.7 2.9 2.5 4.4 9.5 17 31.2 22.8 48 13L807 257.3c16.7-9.7 22.4-31 12.9-47.8zM375.4 261.1L255 191.6c-16.7-9.6-38-4-47.8 12.6-1.1 1.8-2.1 3.6-3.2 5.5-9.5 16.8-3.8 38.1 12.9 47.8L337.3 327c16.9 9.7 38.6 4 48-13.1 0.8-1.5 1.7-2.9 2.5-4.4 10.2-16.8 4.5-38.6-12.4-48.4zM512 239.3h2.5c19.5 0.3 35.5-15.5 35.5-35.1v-139c0-19.3-15.6-34.9-34.8-35.1h-6.4C489.6 30.3 474 46 474 65.2v139c0 19.5 15.9 35.4 35.5 35.1h2.5z">');const QE=()=>qE();var GE=K("<ul>"),JE=K("<li>");const Z2=e=>(()=>{var t=GE();return F(t,Y(Pe,{get when(){return e.loading},get children(){return Y(Y2,{})}}),null),F(t,Y(Pe,{get when(){var r;return!e.loading&&!e.children&&!((r=e.dataSource)!=null&&r.length)},get children(){return Y(QE,{})}}),null),F(t,Y(Pe,{get when(){return e.children},get children(){return e.children}}),null),F(t,Y(Pe,{get when(){return!e.children},get children(){var r;return(r=e.dataSource)==null?void 0:r.map(n=>{var i;return((i=e.renderItem)==null?void 0:i.call(e,n))??JE()})}}),null),Ae(r=>{var n=e.style,i=`chartspire-ui-list ${e.class??""}`;return r.e=mn(t,n,r.e),i!==r.t&&Ge(t,r.t=i),r},{e:void 0,t:void 0}),t})();var eT=K('<div><div class=inner><div class=title-container><svg class=close-icon viewBox="0 0 1024 1024"><path d="M934.184927 199.723787 622.457206 511.452531l311.727721 311.703161c14.334473 14.229073 23.069415 33.951253 23.069415 55.743582 0 43.430138-35.178197 78.660524-78.735226 78.660524-21.664416 0-41.361013-8.865925-55.642275-23.069415L511.149121 622.838388 199.420377 934.490384c-14.204513 14.20349-33.901111 23.069415-55.642275 23.069415-43.482327 0-78.737272-35.230386-78.737272-78.660524 0-21.792329 8.864902-41.513486 23.094998-55.743582l311.677579-311.703161L88.135828 199.723787c-14.230096-14.255679-23.094998-33.92567-23.094998-55.642275 0-43.430138 35.254945-78.762855 78.737272-78.762855 21.741163 0 41.437761 8.813736 55.642275 23.069415l311.727721 311.727721L822.876842 88.389096c14.281261-14.255679 33.977859-23.069415 55.642275-23.069415 43.557028 0 78.735226 35.332716 78.735226 78.762855C957.254342 165.798117 948.5194 185.468109 934.184927 199.723787"></path></svg></div><div class=content-container>'),tT=K("<div class=button-container>");const zl=e=>{const[t,r]=me(!1);return Ei(()=>{setTimeout(()=>{r(!0)},10)}),(()=>{var n=eT(),i=n.firstChild,o=i.firstChild,s=o.firstChild,u=o.nextSibling;return F(o,()=>e.title,s),Hn(s,"click",e.onClose),F(u,()=>e.children),F(i,(()=>{var c=Le(()=>e.buttons!=null&&e.buttons.length>0);return()=>c()&&(()=>{var h=tT();return F(h,()=>e.buttons.map(p=>Y(X2,Kp(p,{get children(){return p.children}})))),Ae(p=>(p=e.buttonContainerPadding??"15px 20px 15px")!=null?h.style.setProperty("padding",p):h.style.removeProperty("padding")),h})()})(),null),Ae(c=>{var h=`chartspire-ui-modal ${t()?"modal-show":""}`,p=`${e.width??400}px`,g=`${e.height??"80%"}`,m={...e.contentHeight!==void 0&&{height:typeof e.contentHeight=="string"?e.contentHeight:`${e.contentHeight}px`},padding:e.padding??"0 26px"};return h!==c.e&&Ge(n,c.e=h),p!==c.t&&((c.t=p)!=null?i.style.setProperty("width",p):i.style.removeProperty("width")),g!==c.a&&((c.a=g)!=null?i.style.setProperty("height",g):i.style.removeProperty("height")),c.o=mn(u,m,c.o),c},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()};Dt(["click"]);var rT=K("<div tabindex=0><div class=selector-container><span class=value></span><i class=arrow>"),nT=K("<div class=drop-down-container><ul>"),iT=K("<li>");const qp=e=>{const[t,r]=me(!1),[n,i]=me(e.value);return(()=>{var o=rT(),s=o.firstChild,u=s.firstChild;return o.addEventListener("blur",c=>{r(!1)}),o.$$click=c=>{r(h=>!h)},F(u,n),F(o,(()=>{var c=Le(()=>e.dataSource!=null&&e.dataSource.length>0);return()=>c()&&(()=>{var h=nT(),p=h.firstChild;return F(p,()=>e.dataSource.map(g=>{const m=g[e.valueKey??"text"]??g;return(()=>{var b=iT();return b.$$click=x=>{var C;x.stopPropagation(),n()!==m&&(i(m),(C=e.onSelected)==null||C.call(e,g)),r(!1)},F(b,m),b})()})),h})()})(),null),Ae(c=>{var h=e.style,p=`chartspire-ui-select ${e.class??""} ${t()?"chartspire-ui-select-show":""}`;return c.e=mn(o,h,c.e),p!==c.t&&Ge(o,c.t=p),c},{e:void 0,t:void 0}),o})()};Dt(["click"]);var oT=K("<span class=prefix>"),aT=K("<span class=suffix>"),sT=K("<div><input class=value>");const Ha=e=>{const t=Kp({min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER},e);let r;const[n,i]=me("normal");return(()=>{var o=sT(),s=o.firstChild;return o.$$click=()=>{r==null||r.focus()},F(o,Y(Pe,{get when(){return t.prefix},get children(){var u=oT();return F(u,()=>t.prefix),u}}),s),Hn(s,"input",t.onInput),s.addEventListener("change",u=>{var c,h;const p=u.target.value;if("precision"in t){let g;const m=Math.max(0,Math.floor(t.precision));m<=0?g=new RegExp(/^[1-9]\d*$/):g=new RegExp("^\\d+\\.?\\d{0,"+m+"}$"),(p===""||g.test(p)&&+p>=t.min&&+p<=t.max)&&((c=t.onChange)==null||c.call(t,p===""?p:+p))}else(h=t.onChange)==null||h.call(t,p)}),s.addEventListener("blur",()=>{i("normal")}),s.addEventListener("focus",()=>{i("focus")}),tn(u=>{r=u},s),F(o,Y(Pe,{get when(){return t.suffix},get children(){var u=aT();return F(u,()=>t.suffix),u}}),null),Ae(u=>{var c=t.style,h=`chartspire-ui-input ${t.class??""}`,p=n(),g=t.placeholder??"";return u.e=mn(o,c,u.e),h!==u.t&&Ge(o,u.t=h),p!==u.a&&Be(o,"data-status",u.a=p),g!==u.o&&Be(s,"placeholder",u.o=g),u},{e:void 0,t:void 0,a:void 0,o:void 0}),Ae(()=>s.value=t.value),o})()};Dt(["click","input"]);var lT=K("<div><i class=thumb>");const cT=e=>(()=>{var t=lT();return t.$$click=r=>{e.onChange&&e.onChange()},Ae(r=>{var n=e.style,i=`chartspire-ui-switch ${e.open?"turn-on":"turn-off"} ${e.class??""}`;return r.e=mn(t,n,r.e),i!==r.t&&Ge(t,r.t=i),r},{e:void 0,t:void 0}),t})();Dt(["click"]);var uT=K('<div class=chartspire-ui-modal-light><div><div class=title-container><div class=title-content><svg class=drag-handle viewBox="0 0 24 24"fill=currentColor><circle cx=8 cy=6 r=2></circle><circle cx=8 cy=12 r=2></circle><circle cx=8 cy=18 r=2></circle><circle cx=16 cy=6 r=2></circle><circle cx=16 cy=12 r=2></circle><circle cx=16 cy=18 r=2></circle></svg><span class=title-text></span></div><svg class=close-icon viewBox="0 0 1024 1024"><path d="M934.184927 199.723787 622.457206 511.452531l311.727721 311.703161c14.334473 14.229073 23.069415 33.951253 23.069415 55.743582 0 43.430138-35.178197 78.660524-78.735226 78.660524-21.664416 0-41.361013-8.865925-55.642275-23.069415L511.149121 622.838388 199.420377 934.490384c-14.204513 14.20349-33.901111 23.069415-55.642275 23.069415-43.482327 0-78.737272-35.230386-78.737272-78.660524 0-21.792329 8.864902-41.513486 23.094998-55.743582l311.677579-311.703161L88.135828 199.723787c-14.230096-14.255679-23.094998-33.92567-23.094998-55.642275 0-43.430138 35.254945-78.762855 78.737272-78.762855 21.741163 0 41.437761 8.813736 55.642275 23.069415l311.727721 311.727721L822.876842 88.389096c14.281261-14.255679 33.977859-23.069415 55.642275-23.069415 43.557028 0 78.735226 35.332716 78.735226 78.762855C957.254342 165.798117 948.5194 185.468109 934.184927 199.723787">'),dT=K("<div class=alert-content><div class=alert-message><p>"),hT=K("<div class=content-container>"),pT=K("<div class=button-container>");const fT=e=>{const[t,r]=me("chartspire-ui-modal-light"),n="Select starting candle by clicking on candle",[i,o]=me({x:0,y:0});let s,u,c=null;return tt(()=>{r(e.isPLaying()?"inner -transparent":"inner")}),Ei(()=>{let h=!1,p={x:0,y:0};const g=M=>"touches"in M&&M.touches.length>0?{clientX:M.touches[0].clientX,clientY:M.touches[0].clientY}:{clientX:M.clientX,clientY:M.clientY},m=M=>{if(!s||!u||M.target.closest(".close-icon"))return;h=!0;const L=g(M),D=s.getBoundingClientRect(),P=s.offsetParent,$=P?P.getBoundingClientRect():{left:0,top:0};p={x:L.clientX-(D.left-$.left),y:L.clientY-(D.top-$.top)},document.addEventListener("mousemove",b),document.addEventListener("mouseup",x),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",x),M.preventDefault()},b=M=>{if(!h||!s)return;const L=g(M),D=s.offsetParent,P=D?D.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight},$=L.clientX-P.left-p.x,A=L.clientY-P.top-p.y,N=s.offsetWidth,z=s.offsetHeight,B=P.width-N,Q=P.height-z,ne=Math.max(0,Math.min($,B)),Z=Math.max(0,Math.min(A,Q));o({x:ne,y:Z}),"touches"in M&&h&&M.preventDefault()},x=()=>{h=!1,C()},C=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",x)},_=()=>{u&&(u.removeEventListener("mousedown",m),u.removeEventListener("touchstart",m))},k=()=>{h=!1,C(),_()};return c=k,u&&(u.addEventListener("mousedown",m),u.addEventListener("touchstart",m,{passive:!1})),k}),Nr(()=>{c&&(console.log("onCleanup replay modal"),c())}),(()=>{var h=uT(),p=h.firstChild,g=p.firstChild,m=g.firstChild,b=m.firstChild,x=b.nextSibling,C=m.nextSibling,_=s;typeof _=="function"?tn(_,h):s=h;var k=u;return typeof k=="function"?tn(k,g):u=g,F(x,()=>e.title),Hn(C,"click",e.onClose),F(p,(()=>{var M=Le(()=>!!e.showAlert);return()=>M()&&(()=>{var L=dT(),D=L.firstChild,P=D.firstChild;return F(P,()=>e.alertMessage||n),L})()})(),null),F(p,(()=>{var M=Le(()=>!e.showAlert);return()=>M()&&[(()=>{var L=hT();return F(L,()=>e.children),L})(),Le(()=>Le(()=>e.buttons!=null&&e.buttons.length>0)()&&(()=>{var L=pT();return L.style.setProperty("padding","20px 30px 20px"),F(L,()=>e.buttons.map(D=>Y(X2,Kp(D,{get children(){return D.children}})))),L})())]})(),null),Ae(M=>{var L={...(i().x!==0||i().y!==0)&&{left:`${i().x}px`,top:`${i().y}px`,transform:"none"}},D=t();return M.e=mn(h,L,M.e),D!==M.t&&Ge(p,M.t=D),M},{e:void 0,t:void 0}),h})()};Dt(["click"]);var gT=K("<div class=chartspire-ui-filter-tags>"),vT=K('<svg viewBox="0 0 1024 1024"><path d="M945.066667 898.133333l-189.866667-189.866666c55.466667-64 87.466667-149.333333 87.466667-241.066667 0-204.8-168.533333-373.333333-373.333334-373.333333S96 264.533333 96 469.333333 264.533333 842.666667 469.333333 842.666667c91.733333 0 174.933333-34.133333 241.066667-87.466667l189.866667 189.866667c6.4 6.4 14.933333 8.533333 23.466666 8.533333s17.066667-2.133333 23.466667-8.533333c8.533333-12.8 8.533333-34.133333-2.133333-46.933334zM469.333333 778.666667C298.666667 778.666667 160 640 160 469.333333S298.666667 160 469.333333 160 778.666667 298.666667 778.666667 469.333333 640 778.666667 469.333333 778.666667z">'),mT=K("<span>"),yT=K("<img alt=symbol>"),bT=K("<li><div><span>");const K2=e=>{const[t,r]=me(e.enabledSymbolTypes[0]),n=Wr.getInstance().getDataFeed(),[i,o]=me(""),[s]=gE(()=>[i(),t()],async([c,h])=>{const p=h==="all"?"all":h;return n?await n.searchSymbols(c,p):(console.error("No datafeed found"),[])}),u=Bt(()=>Object.values(br).filter(c=>{var h;return(h=e.enabledSymbolTypes)==null?void 0:h.includes(c)}));return Y(zl,{get title(){return I("symbol_search",e.locale)},width:460,get onClose(){return e.onClose},get children(){return[Y(Ha,{class:"chartspire-ui-symbol-search-modal-input",get placeholder(){return I("symbol_code",e.locale)},get suffix(){return vT()},get value(){return i()},onChange:c=>{o(`${c}`)}}),(()=>{var c=gT();return F(c,()=>u().map(h=>(()=>{var p=mT();return p.$$click=()=>{r(h)},F(p,h),Ae(()=>Ge(p,`chartspire-ui-tag ${t()===h?"selected":""}`)),p})())),c})(),Y(Z2,{class:"chartspire-ui-symbol-search-modal-list",get loading(){return s.loading},get dataSource(){return s()??[]},renderItem:c=>(()=>{var h=bT(),p=h.firstChild,g=p.firstChild;return h.$$click=()=>{e.onSymbolSelected(c),e.onClose()},F(p,Y(Pe,{get when(){return c.logo},get children(){var m=yT();return Ae(()=>Be(m,"src",c.logo)),m}}),g),F(g,()=>c.shortName??c.symbol,null),F(g,()=>`${c.name!=null?`(${c.name})`:""}`,null),F(h,()=>c.exchange??"",null),Ae(()=>Be(g,"title",c.name??"")),h})()})]}})};Dt(["click"]);var xT=K("<div>"),Qp=class{constructor(e){be(this,"x"),be(this,"y"),be(this,"width"),be(this,"height"),this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},Wd=e=>{let t=new Qp(e.getBoundingClientRect());const{transform:r}=getComputedStyle(e);return r&&(t=wT(t,r)),t},wT=(e,t)=>{let r,n;if(t.startsWith("matrix3d(")){const i=t.slice(9,-1).split(/, /);r=+i[12],n=+i[13]}else if(t.startsWith("matrix(")){const i=t.slice(7,-1).split(/, /);r=+i[4],n=+i[5]}else r=0,n=0;return new Qp({...e,x:e.x-r,y:e.y-n})},sa=()=>({x:0,y:0}),cv=(e,t)=>e.x===t.x&&e.y===t.y,lg=(e,t)=>new Qp({...e,x:e.x+t.x,y:e.y+t.y}),CT=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),_T=(e,t)=>{const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom),s=i-n,u=o-r;if(n<i&&r<o){const c=e.width*e.height,h=t.width*t.height,p=s*u;return p/(c+h-p)}return 0},cg=(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,ST=(e,t,r)=>{const n=e.transformed.center,i={distance:1/0,droppable:null};for(const o of t){const s=CT(n,o.layout.center);s<i.distance?(i.distance=s,i.droppable=o):s===i.distance&&o.id===r.activeDroppableId&&(i.droppable=o)}return i.droppable},kT=(e,t,r)=>{const n=e.transformed,i={ratio:0,droppable:null};for(const o of t){const s=_T(n,o.layout);s>i.ratio?(i.ratio=s,i.droppable=o):s>0&&s===i.ratio&&o.id===r.activeDroppableId&&(i.droppable=o)}return i.droppable},q2=R2(),MT=e=>{const t=Kp({collisionDetector:kT},e),[r,n]=Nl({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return r.active.draggableId!==null?r.draggables[r.active.draggableId]:null},droppableId:null,get droppable(){return r.active.droppableId!==null?r.droppables[r.active.droppableId]:null},sensorId:null,get sensor(){return r.active.sensorId!==null?r.sensors[r.active.sensorId]:null},overlay:null}}),i=(Z,J,ue)=>{Z.substring(0,Z.length-1),Ze(()=>r[Z][J])&&n(Z,J,"transformers",ue.id,ue)},o=(Z,J,ue)=>{Z.substring(0,Z.length-1),Ze(()=>r[Z][J])&&Ze(()=>r[Z][J].transformers[ue])&&n(Z,J,"transformers",ue,void 0)},s=({id:Z,node:J,layout:ue,data:le})=>{const ae=r.draggables[Z],te={id:Z,node:J,layout:ue,data:le,_pendingCleanup:!1};let ve;if(!ae)Object.defineProperties(te,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(r.active.overlay)return sa();const pe=Object.values(r.draggables[Z].transformers);return pe.sort((j,H)=>j.order-H.order),pe.reduce((j,H)=>H.callback(j),sa())}},transformed:{enumerable:!0,configurable:!0,get:()=>lg(r.draggables[Z].layout,r.draggables[Z].transform)}});else if(r.active.draggableId===Z&&!r.active.overlay){const pe={x:ae.layout.x-ue.x,y:ae.layout.y-ue.y},j="addDraggable-existing-offset",H=ae.transformers[j],de=H?H.callback(pe):pe;ve={id:j,order:100,callback:U=>({x:U.x+de.x,y:U.y+de.y})},Q(()=>o("draggables",Z,j))}$a(()=>{n("draggables",Z,te),ve&&i("draggables",Z,ve)}),r.active.draggable&&D()},u=Z=>{Ze(()=>r.draggables[Z])&&(n("draggables",Z,"_pendingCleanup",!0),queueMicrotask(()=>c(Z)))},c=Z=>{var J;if((J=r.draggables[Z])!=null&&J._pendingCleanup){const ue=r.active.draggableId===Z;$a(()=>{ue&&n("active","draggableId",null),n("draggables",Z,void 0)})}},h=({id:Z,node:J,layout:ue,data:le})=>{const ae=r.droppables[Z],te={id:Z,node:J,layout:ue,data:le,_pendingCleanup:!1};ae||Object.defineProperties(te,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const ve=Object.values(r.droppables[Z].transformers);return ve.sort((pe,j)=>pe.order-j.order),ve.reduce((pe,j)=>j.callback(pe),sa())}},transformed:{enumerable:!0,configurable:!0,get:()=>lg(r.droppables[Z].layout,r.droppables[Z].transform)}}),n("droppables",Z,te),r.active.draggable&&D()},p=Z=>{Ze(()=>r.droppables[Z])&&(n("droppables",Z,"_pendingCleanup",!0),queueMicrotask(()=>g(Z)))},g=Z=>{var J;if((J=r.droppables[Z])!=null&&J._pendingCleanup){const ue=r.active.droppableId===Z;$a(()=>{ue&&n("active","droppableId",null),n("droppables",Z,void 0)})}},m=({id:Z,activators:J})=>{n("sensors",Z,{id:Z,activators:J,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:r.sensors[Z].coordinates.current.x-r.sensors[Z].coordinates.origin.x,y:r.sensors[Z].coordinates.current.y-r.sensors[Z].coordinates.origin.y}}}})},b=Z=>{if(!Ze(()=>r.sensors[Z]))return;const J=r.active.sensorId===Z;$a(()=>{J&&n("active","sensorId",null),n("sensors",Z,void 0)})},x=({node:Z,layout:J})=>{const ue=r.active.overlay,le={node:Z,layout:J};ue||Object.defineProperties(le,{id:{enumerable:!0,configurable:!0,get:()=>{var ae;return(ae=r.active.draggable)==null?void 0:ae.id}},data:{enumerable:!0,configurable:!0,get:()=>{var ae;return(ae=r.active.draggable)==null?void 0:ae.data}},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(r.active.draggable?r.active.draggable.transformers:{}).filter(([ae])=>ae!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const ae=Object.values(r.active.overlay?r.active.overlay.transformers:[]);return ae.sort((te,ve)=>te.order-ve.order),ae.reduce((te,ve)=>ve.callback(te),sa())}},transformed:{enumerable:!0,configurable:!0,get:()=>r.active.overlay?lg(r.active.overlay.layout,r.active.overlay.transform):new Qp({x:0,y:0,width:0,height:0})}}),n("active","overlay",le)},C=()=>n("active","overlay",null),_=(Z,J)=>{$a(()=>{n("sensors",Z,"coordinates",{origin:{...J},current:{...J}}),n("active","sensorId",Z)})},k=Z=>{const J=r.active.sensorId;J&&n("sensors",J,"coordinates","current",{...Z})},M=()=>n("active","sensorId",null),L=(Z,J)=>{const ue={};for(const ae of Object.values(r.sensors))if(ae)for(const[te,ve]of Object.entries(ae.activators))ue[te]??(ue[te]=[]),ue[te].push({sensor:ae,activator:ve});const le={};for(const ae in ue){let te=ae;J&&(te=`on${ae}`),le[te]=ve=>{for(const{activator:pe}of ue[ae]){if(r.active.sensor)break;pe(ve,Z)}}}return le},D=()=>{let Z=!1;const J=Object.values(r.draggables),ue=Object.values(r.droppables),le=r.active.overlay;return $a(()=>{const ae=new WeakMap;for(const te of J)if(te){const ve=te.layout;ae.has(te.node)||ae.set(te.node,Wd(te.node));const pe=ae.get(te.node);cg(ve,pe)||(n("draggables",te.id,"layout",pe),Z=!0)}for(const te of ue)if(te){const ve=te.layout;ae.has(te.node)||ae.set(te.node,Wd(te.node));const pe=ae.get(te.node);cg(ve,pe)||(n("droppables",te.id,"layout",pe),Z=!0)}if(le){const te=le.layout,ve=Wd(le.node);cg(te,ve)||(n("active","overlay","layout",ve),Z=!0)}}),Z},P=()=>{const Z=r.active.overlay??r.active.draggable;if(Z){const J=t.collisionDetector(Z,Object.values(r.droppables),{activeDroppableId:r.active.droppableId}),ue=J?J.id:null;r.active.droppableId!==ue&&n("active","droppableId",ue)}},$=Z=>{const J={id:"sensorMove",order:0,callback:ue=>r.active.sensor?{x:ue.x+r.active.sensor.coordinates.delta.x,y:ue.y+r.active.sensor.coordinates.delta.y}:ue};D(),$a(()=>{n("active","draggableId",Z),i("draggables",Z,J)}),P()},A=()=>{const Z=Ze(()=>r.active.draggableId);$a(()=>{Z!==null&&o("draggables",Z,"sensorMove"),n("active",["draggableId","droppableId"],null)}),D()},N=Z=>{tt(()=>{const J=r.active.draggable;J&&Ze(()=>Z({draggable:J}))})},z=Z=>{tt(()=>{const J=r.active.draggable;if(J){const ue=Ze(()=>r.active.overlay);Object.values(ue?ue.transform:J.transform),Ze(()=>Z({draggable:J,overlay:ue}))}})},B=Z=>{tt(()=>{const J=r.active.draggable,ue=r.active.droppable;J&&Ze(()=>Z({draggable:J,droppable:ue,overlay:r.active.overlay}))})},Q=Z=>{tt(({previousDraggable:J,previousDroppable:ue,previousOverlay:le})=>{const ae=r.active.draggable,te=ae?r.active.droppable:null,ve=ae?r.active.overlay:null;return!ae&&J&&Ze(()=>Z({draggable:J,droppable:ue,overlay:le})),{previousDraggable:ae,previousDroppable:te,previousOverlay:ve}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};z(()=>P()),t.onDragStart&&N(t.onDragStart),t.onDragMove&&z(t.onDragMove),t.onDragOver&&B(t.onDragOver),t.onDragEnd&&Q(t.onDragEnd);const ne=[r,{addTransformer:i,removeTransformer:o,addDraggable:s,removeDraggable:u,addDroppable:h,removeDroppable:p,addSensor:m,removeSensor:b,setOverlay:x,clearOverlay:C,recomputeLayouts:D,detectCollisions:P,draggableActivators:L,sensorStart:_,sensorMove:k,sensorEnd:M,dragStart:$,dragEnd:A,onDragStart:N,onDragMove:z,onDragOver:B,onDragEnd:Q}];return Y(q2.Provider,{value:ne,get children(){return t.children}})},Qd=()=>O2(q2)||null,ET=(e="pointer-sensor")=>{const[t,{addSensor:r,removeSensor:n,sensorStart:i,sensorMove:o,sensorEnd:s,dragStart:u,dragEnd:c}]=Qd(),h=250,p=10;Ei(()=>{r({id:e,activators:{pointerdown:C}})}),Nr(()=>{n(e)});const g=()=>t.active.sensorId===e,m={x:0,y:0};let b=null,x=null;const C=(P,$)=>{P.button===0&&(document.addEventListener("pointermove",M),document.addEventListener("pointerup",L),x=$,m.x=P.clientX,m.y=P.clientY,b=window.setTimeout(k,h))},_=()=>{b&&(clearTimeout(b),b=null),document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",L),document.removeEventListener("selectionchange",D)},k=()=>{t.active.sensor?g()||_():(i(e,m),u(x),D(),document.addEventListener("selectionchange",D))},M=P=>{const $={x:P.clientX,y:P.clientY};if(!t.active.sensor){const A={x:$.x-m.x,y:$.y-m.y};Math.sqrt(A.x**2+A.y**2)>p&&k()}g()&&(P.preventDefault(),o($))},L=P=>{_(),g()&&(P.preventDefault(),c(),s())},D=()=>{var P;(P=window.getSelection())==null||P.removeAllRanges()}},TT=e=>(ET(),Le(()=>e.children)),Gp=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),IT=(e,t={})=>{const[r,{addDraggable:n,removeDraggable:i,draggableActivators:o}]=Qd(),[s,u]=me(null);Ei(()=>{const p=s();p&&n({id:e,node:p,layout:Wd(p),data:t})}),Nr(()=>i(e));const c=()=>r.active.draggableId===e,h=()=>{var p;return((p=r.draggables[e])==null?void 0:p.transform)||sa()};return Object.defineProperties((p,g)=>{const m=g?g():{};tt(()=>{const b=s(),x=o(e);if(b)for(const C in x)b.addEventListener(C,x[C]);Nr(()=>{if(b)for(const C in x)b.removeEventListener(C,x[C])})}),u(p),m.skipTransform||tt(()=>{const b=h();if(cv(b,sa()))p.style.removeProperty("transform");else{const x=Gp(h());p.style.setProperty("transform",x.transform??null)}})},{ref:{enumerable:!0,value:u},isActiveDraggable:{enumerable:!0,get:c},dragActivators:{enumerable:!0,get:()=>o(e,!0)},transform:{enumerable:!0,get:h}})},LT=(e,t={})=>{const[r,{addDroppable:n,removeDroppable:i}]=Qd(),[o,s]=me(null);Ei(()=>{const h=o();h&&n({id:e,node:h,layout:Wd(h),data:t})}),Nr(()=>i(e));const u=()=>r.active.droppableId===e,c=()=>{var h;return((h=r.droppables[e])==null?void 0:h.transform)||sa()};return Object.defineProperties((h,p)=>{const g=p?p():{};s(h),g.skipTransform||tt(()=>{const m=c();if(cv(m,sa()))h.style.removeProperty("transform");else{const b=Gp(c());h.style.setProperty("transform",b.transform??null)}})},{ref:{enumerable:!0,value:s},isActiveDroppable:{enumerable:!0,get:u},transform:{enumerable:!0,get:c}})},PT=e=>{const[t,{onDragStart:r,onDragEnd:n,setOverlay:i,clearOverlay:o}]=Qd();let s;r(({draggable:c})=>{i({node:c.node,layout:c.layout}),queueMicrotask(()=>{if(s){const h=Wd(s),p={x:(c.layout.width-h.width)/2,y:(c.layout.height-h.height)/2};h.x+=p.x,h.y+=p.y,i({node:s,layout:h})}})}),n(()=>queueMicrotask(o));const u=()=>{const c=t.active.overlay,h=t.active.draggable;return!c||!h?{}:{position:"fixed",transition:"transform 0s",top:`${c.layout.top}px`,left:`${c.layout.left}px`,"min-width":`${h.layout.width}px`,"min-height":`${h.layout.height}px`,...Gp(c.transform),...e.style}};return Y(lv,{get mount(){return document.body},get children(){return Y(Pe,{get when(){return t.active.draggable},get children(){var c=xT(),h=s;return typeof h=="function"?tn(h,c):s=c,F(c,(()=>{var p=Le(()=>typeof e.children=="function");return()=>p()?e.children(t.active.draggable):e.children})()),Ae(p=>{var g=e.class,m=u();return g!==p.e&&Ge(c,p.e=g),p.t=mn(c,m,p.t),p},{e:void 0,t:void 0}),c}})}})},AT=(e,t,r)=>{const n=e.slice();return n.splice(r,0,...n.splice(t,1)),n},Q2=R2(),DT=e=>{const[t]=Qd(),[r,n]=Nl({initialIds:[],sortedIds:[]}),i=s=>s>=0&&s<r.initialIds.length;tt(()=>{n("initialIds",[...e.ids]),n("sortedIds",[...e.ids])}),tt(()=>{t.active.draggableId&&t.active.droppableId?Ze(()=>{const s=r.sortedIds.indexOf(t.active.draggableId),u=r.initialIds.indexOf(t.active.droppableId);if(!i(s)||!i(u))n("sortedIds",[...e.ids]);else if(s!==u){const c=AT(r.sortedIds,s,u);n("sortedIds",c)}}):n("sortedIds",[...e.ids])});const o=[r,{}];return Y(Q2.Provider,{value:o,get children(){return e.children}})},FT=()=>O2(Q2)||null,RT=(e,t)=>r=>{e(r),t(r)},OT=(e,t={})=>{const[r,{addTransformer:n,removeTransformer:i}]=Qd(),[o]=FT(),s=IT(e,t),u=LT(e,t),c=RT(s.ref,u.ref),h=()=>o.initialIds.indexOf(e),p=()=>o.sortedIds.indexOf(e),g=C=>{var _;return((_=r.droppables[C])==null?void 0:_.layout)||null},m=()=>{const C=sa(),_=h(),k=p();if(k!==_){const M=g(e),L=g(o.initialIds[k]);M&&L&&(C.x=L.x-M.x,C.y=L.y-M.y)}return C},b={id:"sortableOffset",order:100,callback:C=>{const _=m();return{x:C.x+_.x,y:C.y+_.y}}};Ei(()=>n("droppables",e,b)),Nr(()=>i("droppables",e,b.id));const x=()=>{var C,_;return(e===r.active.draggableId&&!r.active.overlay?(C=r.draggables[e])==null?void 0:C.transform:(_=r.droppables[e])==null?void 0:_.transform)||sa()};return Object.defineProperties(C=>{s(C,()=>({skipTransform:!0})),u(C,()=>({skipTransform:!0})),tt(()=>{const _=x();if(cv(_,sa()))C.style.removeProperty("transform");else{const k=Gp(x());C.style.setProperty("transform",k.transform??null)}})},{ref:{enumerable:!0,value:c},transform:{enumerable:!0,get:x},isActiveDraggable:{enumerable:!0,get:()=>s.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>s.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>u.isActiveDroppable}})};const NT=async()=>null;class zT{constructor(t){be(this,"useExternalStorage"),this.useExternalStorage=t}addToStorage(t){if(!this.useExternalStorage)try{localStorage.setItem("watchlist",JSON.stringify(t))}catch(r){console.error("Error saving watchlist to local storage:",r)}}async fetchWatchlist(){try{if(this.useExternalStorage)return await NT()||(console.error("Failed to fetch watchlist data from external."),null);{const t=localStorage.getItem("watchlist");return t?JSON.parse(t):(console.error("Failed to fetch watchlist data from local storage."),null)}}catch(t){return console.error("Error fetching watchlist data:",t),null}}}class VT{constructor(t){be(this,"config"),be(this,"subscriptions",new Map),be(this,"symbolData",{}),be(this,"previousPrices",{}),be(this,"currentWatchlist",null),this.config=t}getSymbolKey(t){return`${t.symbol}_${t.exchange}`}createSymbolCallback(t){return(r,n)=>{var i;if(!n)return;const o=this.getSymbolKey(n),s=(i=this.symbolData[o])==null?void 0:i.close;s!==void 0&&(this.previousPrices[o]=s),this.symbolData[o]=r;const u=this.subscriptions.get(o);u&&(u.lastPrice=r.close),t(o,r,s)}}subscribeSymbol(t,r){var n;const i=`${this.config.uuid}_${this.getSymbolKey(t)}`,o=this.createSymbolCallback(r);console.log(`WebSocketStrategy: Subscribing to ${t.symbol} from ${t.exchange} with ID ${i}`),this.config.dataFeed.subscribeSymbol(t,this.config.interval,o,i),this.subscriptions.set(this.getSymbolKey(t),{symbol:t,subscribed:!0,lastPrice:(n=this.symbolData[this.getSymbolKey(t)])==null?void 0:n.close})}unsubscribeSymbol(t){const r=`${this.config.uuid}_${this.getSymbolKey(t)}`;console.log(`WebSocketStrategy: Unsubscribing from ${t.symbol} from ${t.exchange} with ID ${r}`),this.config.dataFeed.unsubscribeSymbol(t,this.config.interval,r);const n=this.subscriptions.get(this.getSymbolKey(t));n&&(n.subscribed=!1)}subscribeToSymbols(t,r){console.log(`WebSocketStrategy: Subscribing to ${t.length} symbols using individual subscriptions`),t.forEach((n,i)=>{setTimeout(()=>{this.subscribeSymbol(n,r)},i*300)})}unsubscribeFromSymbols(t){console.log(`WebSocketStrategy: Unsubscribing from ${t.length} symbols using individual unsubscriptions`),t.forEach((r,n)=>{setTimeout(()=>{this.unsubscribeSymbol(r)},n*300)})}switchSymbols(t,r,n){console.log(`WebSocketStrategy: Switching from ${r.length} old symbols to ${t.length} new symbols`),this.unsubscribeFromSymbols(r),setTimeout(()=>{this.subscribeToSymbols(t,n)},500)}cleanup(){console.log("WebSocketStrategy: Cleaning up all subscriptions and data"),this.subscriptions.forEach((t,r)=>{t.subscribed&&(console.log(`WebSocketStrategy: Cleaning up subscription for ${r}`),this.unsubscribeSymbol(t.symbol))}),this.subscriptions.clear(),this.symbolData={},this.previousPrices={},this.currentWatchlist=null}getSubscriptionStatus(){if(this.subscriptions.size===0)return null;const t=Array.from(this.subscriptions.values()).filter(r=>r.subscribed).length;return{watchlistName:this.currentWatchlist||"WEBSOCKET_STREAMING",totalSymbols:this.subscriptions.size,subscribedSymbols:t,subscriptions:this.subscriptions}}getStrategyType(){return"WebSocket"}getPriceColor(t){var r;const n=(r=this.symbolData[this.getSymbolKey(t)])==null?void 0:r.close,i=this.previousPrices[this.getSymbolKey(t)];return n===void 0||i===void 0?"#FFFFFF":n>i?"#00FF00":n<i?"#FF0000":"#FFFFFF"}getSymbolData(){return this.symbolData}getPreviousPrices(){return this.previousPrices}}class BT{constructor(t,r){be(this,"dataFeed"),be(this,"config"),be(this,"symbolQueue",new Map),be(this,"pollingTimer",null),be(this,"isPolling",!1),be(this,"batchIndex",0),this.dataFeed=t,this.config=r,console.log(`HTTPPollingService: Initialized with interval=${r.interval}ms, batchSize=${r.batchSize}`)}addSymbol(t,r){const n=this.getSymbolKey(t);console.log(`HTTPPollingService: Adding symbol ${n} to polling queue`),this.symbolQueue.set(n,{symbol:t,callback:r,retryCount:0,lastFetchTime:0,isActive:!0}),this.isPolling||this.startPolling()}removeSymbol(t){const r=this.getSymbolKey(t);console.log(`HTTPPollingService: Removing symbol ${r} from polling queue`);const n=this.symbolQueue.get(r);n&&(n.isActive=!1,this.symbolQueue.delete(r)),this.symbolQueue.size===0&&this.stopPolling()}startPolling(){this.isPolling||(console.log("HTTPPollingService: Starting polling process"),this.isPolling=!0,this.scheduleNextPoll())}stopPolling(){console.log("HTTPPollingService: Stopping polling process"),this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null),this.isPolling=!1}scheduleNextPoll(){this.isPolling&&(this.pollingTimer=setTimeout(()=>{this.executePollCycle()},this.config.interval))}async executePollCycle(){if(this.symbolQueue.size===0){this.stopPolling();return}const t=Array.from(this.symbolQueue.values()).filter(s=>s.isActive).map(s=>s.symbol);if(t.length===0){this.stopPolling();return}const r=this.config.batchSize,n=this.batchIndex*r,i=Math.min(n+r,t.length),o=t.slice(n,i);console.log(`HTTPPollingService: Processing batch ${this.batchIndex+1} with ${o.length} symbols (${n+1}-${i} of ${t.length})`),await this.processBatch(o),this.batchIndex=i>=t.length?0:this.batchIndex+1,this.scheduleNextPoll()}async processBatch(t){const r=t.map(n=>this.fetchSymbolPrice(n));(await Promise.allSettled(r)).forEach((n,i)=>{n.status==="rejected"&&console.warn(`HTTPPollingService: Failed to fetch price for ${t[i].symbol}:`,n.reason)})}async fetchSymbolPrice(t){const r=this.getSymbolKey(t),n=this.symbolQueue.get(r);if(!(!n||!n.isActive))try{const i=Date.now(),o=await this.dataFeed.getPrice(t,t.type),s=Date.now()-i;o!==null&&typeof o=="number"&&!isNaN(o)?(n.retryCount=0,n.lastFetchTime=Date.now(),console.log(`HTTPPollingService: Fetched price for ${r}: ${o} (took ${s}ms)`),n.callback(o)):this.handleFetchError(r,new Error("No valid price data received"))}catch(i){this.handleFetchError(r,i)}}handleFetchError(t,r){const n=this.symbolQueue.get(t);n&&(n.retryCount++,this.config.retryEnabled&&n.retryCount<=this.config.maxRetries?console.warn(`HTTPPollingService: Retry ${n.retryCount}/${this.config.maxRetries} for ${t}: ${r.message}`):console.error(`HTTPPollingService: Max retries exceeded for ${t}: ${r.message}`))}cleanup(){console.log("HTTPPollingService: Cleaning up all resources"),this.stopPolling(),this.symbolQueue.clear(),this.batchIndex=0}getPollingStats(){const t=Array.from(this.symbolQueue.values()).filter(r=>r.isActive).length;return{totalSymbols:this.symbolQueue.size,activeSymbols:t,isPolling:this.isPolling,currentBatch:this.batchIndex,interval:this.config.interval}}getSymbolKey(t){return`${t.symbol}_${t.exchange||"default"}`}}class $T{constructor(t,r){be(this,"config"),be(this,"httpConfig"),be(this,"subscriptions",new Map),be(this,"symbolData",{}),be(this,"previousPrices",{}),be(this,"pollingService"),be(this,"updateCallback",null),this.config=t,this.httpConfig=r,this.pollingService=new BT(t.dataFeed,r),console.log(`HTTPStrategy: Initialized with interval=${r.interval}ms, batchSize=${r.batchSize}`)}getSymbolKey(t){return`${t.symbol}_${t.exchange||"default"}`}subscribeSymbol(t,r){this.updateCallback=r;const n=this.getSymbolKey(t);console.log(`HTTPStrategy: Subscribing to ${t.symbol} from ${t.exchange||"default"}`),this.pollingService.addSymbol(t,i=>{this.handlePriceUpdate(t,i,r)}),this.subscriptions.set(n,{symbol:t,subscribed:!0,lastPrice:void 0})}unsubscribeSymbol(t){const r=this.getSymbolKey(t);console.log(`HTTPStrategy: Unsubscribing from ${t.symbol} from ${t.exchange||"default"}`),this.pollingService.removeSymbol(t),this.subscriptions.delete(r),delete this.symbolData[r],delete this.previousPrices[r]}subscribeToSymbols(t,r){this.updateCallback=r,console.log(`HTTPStrategy: Subscribing to ${t.length} symbols using HTTP polling`),t.forEach((n,i)=>{setTimeout(()=>{this.subscribeSymbol(n,r)},i*100)})}unsubscribeFromSymbols(t){console.log(`HTTPStrategy: Unsubscribing from ${t.length} symbols`),t.forEach(r=>{this.unsubscribeSymbol(r)})}switchSymbols(t,r,n){console.log(`HTTPStrategy: Switching from ${r.length} old symbols to ${t.length} new symbols`),this.unsubscribeFromSymbols(r),setTimeout(()=>{this.subscribeToSymbols(t,n)},200)}cleanup(){console.log("HTTPStrategy: Cleaning up all resources"),this.pollingService.cleanup(),this.subscriptions.clear(),this.symbolData={},this.previousPrices={},this.updateCallback=null}getSubscriptionStatus(){if(this.subscriptions.size===0)return null;const t=Array.from(this.subscriptions.values()).filter(r=>r.subscribed).length;return{watchlistName:`HTTP_POLLING (${this.pollingService.getPollingStats().interval}ms)`,totalSymbols:this.subscriptions.size,subscribedSymbols:t,subscriptions:this.subscriptions}}getStrategyType(){return"HTTP"}handlePriceUpdate(t,r,n){var i;const o=this.getSymbolKey(t),s=(i=this.symbolData[o])==null?void 0:i.close,u={timestamp:Date.now(),open:r,high:r,low:r,close:r,volume:0,turnover:0};s!==void 0&&(this.previousPrices[o]=s),this.symbolData[o]=u;const c=this.subscriptions.get(o);c&&(c.lastPrice=r),n(o,u,s)}getPriceColor(t){var r;const n=(r=this.symbolData[this.getSymbolKey(t)])==null?void 0:r.close,i=this.previousPrices[this.getSymbolKey(t)];return n===void 0||i===void 0?"#FFFFFF":n>i?"#00FF00":n<i?"#FF0000":"#FFFFFF"}getSymbolData(){return this.symbolData}getPreviousPrices(){return this.previousPrices}getPollingStats(){return this.pollingService.getPollingStats()}}class Hm{static create(t,r){if(r.useHttp){const n={interval:Math.max(r.httpInterval||5e3,1e3),batchSize:Math.max(r.httpBatchSize||10,1),retryEnabled:r.httpRetryEnabled??!0,maxRetries:Math.max(r.httpMaxRetries||3,0)};return console.log("WatchlistStrategyFactory: Creating HTTP strategy with config:",n),new $T(t,n)}else return console.log("WatchlistStrategyFactory: Creating WebSocket strategy"),new VT(t)}static getDefaultHttpOptions(){return{httpInterval:5e3,httpBatchSize:10,httpRetryEnabled:!0,httpMaxRetries:3}}static validateOptions(t){const r=this.getDefaultHttpOptions();return{useHttp:t.useHttp||!1,httpInterval:Math.max(t.httpInterval||r.httpInterval,1e3),httpBatchSize:Math.max(t.httpBatchSize||r.httpBatchSize,1),httpRetryEnabled:t.httpRetryEnabled??r.httpRetryEnabled,httpMaxRetries:Math.max(t.httpMaxRetries||r.httpMaxRetries,0)}}static getStrategyDescription(t){return t.useHttp?`HTTP Polling (${t.httpInterval}ms interval, ${t.httpBatchSize} batch size)`:"WebSocket Streaming"}}class WT{constructor(t){be(this,"config"),be(this,"strategy"),be(this,"currentWatchlist",null),this.config=t;const r={interval:t.interval,uuid:t.uuid,dataFeed:t.dataFeed},n={useHttp:t.useHttp||!1,httpInterval:t.httpInterval,httpBatchSize:t.httpBatchSize,httpRetryEnabled:t.httpRetryEnabled,httpMaxRetries:t.httpMaxRetries};this.strategy=Hm.create(r,n),console.log(`WatchlistDataService: Initialized with ${Hm.getStrategyDescription(n)}`)}getSymbolKey(t){return`${t.symbol}_${t.exchange||"default"}`}subscribeToWatchlist(t,r){console.log(`WatchlistDataService: Subscribing to watchlist ${t} with ${r.length} symbols using ${this.strategy.getStrategyType()} strategy`),this.currentWatchlist=t,this.strategy.subscribeToSymbols(r,this.config.onSymbolUpdate)}unsubscribeFromWatchlist(t,r){console.log(`WatchlistDataService: Unsubscribing from watchlist ${t} with ${r.length} symbols using ${this.strategy.getStrategyType()} strategy`),this.strategy.unsubscribeFromSymbols(r),this.currentWatchlist===t&&(this.currentWatchlist=null)}subscribeToSingleSymbols(t){console.log(`WatchlistDataService: Adding symbol ${t.symbol} to current watchlist using ${this.strategy.getStrategyType()} strategy`),this.strategy.subscribeSymbol(t,this.config.onSymbolUpdate)}unsubscribeFromSingleSymbol(t){if(console.log(`WatchlistDataService: Removing symbol ${t.symbol} from current watchlist using ${this.strategy.getStrategyType()} strategy`),this.strategy.unsubscribeSymbol(t),this.config.onSymbolRemove){const r=this.getSymbolKey(t);this.config.onSymbolRemove(r)}}switchWatchlist(t,r,n,i){console.log(`WatchlistDataService: Switching from ${n||"none"} to ${t} using ${this.strategy.getStrategyType()} strategy`),this.strategy.switchSymbols(r,i||[],this.config.onSymbolUpdate),this.currentWatchlist=t}getSubscriptionStatus(){return this.strategy.getSubscriptionStatus()}getPriceColor(t){return typeof this.strategy.getPriceColor=="function"?this.strategy.getPriceColor(t):"#FFFFFF"}getSymbolData(){return typeof this.strategy.getSymbolData=="function"?this.strategy.getSymbolData():{}}getPreviousPrices(){return typeof this.strategy.getPreviousPrices=="function"?this.strategy.getPreviousPrices():{}}getStrategyInfo(){const t={type:this.strategy.getStrategyType(),status:this.strategy.getSubscriptionStatus()};return typeof this.strategy.getPollingStats=="function"&&(t.pollingStats=this.strategy.getPollingStats()),t}cleanup(){console.log(`WatchlistDataService: Cleaning up strategy (${this.strategy.getStrategyType()})`),this.strategy.cleanup(),this.currentWatchlist=null}}function HT(e,t,r,n){const[i,o]=me({}),[s,u]=me({}),c={interval:e,uuid:t,dataFeed:r,onSymbolUpdate:(p,g,m)=>{o(b=>({...b,[p]:g})),m!==void 0&&u(b=>({...b,[p]:m}))},onSymbolRemove:p=>{o(g=>{const m={...g};return delete m[p],m}),u(g=>{const m={...g};return delete m[p],m})},useHttp:n==null?void 0:n.useHttp,httpInterval:n==null?void 0:n.httpInterval,httpBatchSize:n==null?void 0:n.httpBatchSize,httpRetryEnabled:n==null?void 0:n.httpRetryEnabled,httpMaxRetries:n==null?void 0:n.httpMaxRetries},h=new WT(c);return Nr(()=>{h.cleanup()}),{symbolData:i,previousPrices:s,subscribeToWatchlist:(p,g)=>{h.subscribeToWatchlist(p,g)},unsubscribeFromWatchlist:(p,g)=>{h.unsubscribeFromWatchlist(p,g)},subscribeToSymbol:p=>{h.subscribeToSingleSymbols(p)},unsubscribeFromSymbol:p=>{h.unsubscribeFromSingleSymbol(p)},switchWatchlist:(p,g,m,b)=>{h.switchWatchlist(p,g,m,b)},getPriceColor:p=>h.getPriceColor(p),getSubscriptionStatus:()=>h.getSubscriptionStatus(),dataService:h}}class Vc{static generateDefaultName(t){return`WatchList ${t}`}static initializeWatchlists(t,r=null){const n={};if(r){const i=Object.keys(r);for(let s=0;s<Math.min(t,i.length);s++){const u=i[s];n[u]=r[u]||[]}const o=Object.keys(n).length;for(let s=o;s<t;s++){const u=this.generateDefaultName(s+1);n[u]=[]}}else for(let i=1;i<=t;i++){const o=this.generateDefaultName(i);n[o]=[]}return n}static renameWatchlist(t,r,n){if(r===n)return t;if(!t[r])return console.warn(`Watchlist '${r}' does not exist`),t;if(t[n])return console.warn(`Watchlist '${n}' already exists`),t;const i={};for(const[o,s]of Object.entries(t))o===r?i[n]=s:i[o]=s;return i}static validateWatchlistName(t,r){return!t||t.trim().length===0?{isValid:!1,error:"Watchlist name cannot be empty"}:t.trim().length>50?{isValid:!1,error:"Watchlist name cannot exceed 50 characters"}:r.includes(t.trim())?{isValid:!1,error:"Watchlist name already exists"}:/^[a-zA-Z0-9\s\-_]+$/.test(t.trim())?{isValid:!0}:{isValid:!1,error:"Watchlist name can only contain letters, numbers, spaces, hyphens, and underscores"}}static getOrderedNames(t){return Object.keys(t).sort((r,n)=>{const i=r.startsWith("WatchList "),o=n.startsWith("WatchList ");if(i&&o){const s=parseInt(r.split(" ")[1]),u=parseInt(n.split(" ")[1]);return s-u}else return i&&!o?1:!i&&o?-1:r.localeCompare(n)})}static migrateFromLegacyFormat(t,r){const n={};for(const[o,s]of Object.entries(t))s&&s.length>0&&(n[o]=s);const i=Object.keys(n).length;for(let o=i+1;o<=r;o++){const s=this.generateDefaultName(o);n[s]||(n[s]=[])}return n}}const Yd=(e,t)=>({x:e,y:t}),Sp=class Tl{constructor(){be(this,"activeCharts",new Map),be(this,"syncingOverlays",new Set)}static getInstance(){return Tl.instance}static setEnabled(t){Tl.enabled=t}static isEnabled(){return Tl.enabled}registerChart(t,r,n,i,o,s){this.activeCharts.set(t,{chart:r,symbol:n,type:i,interval:o,setOverlaySettingVisible:s==null?void 0:s.setOverlaySettingVisible,setOverlayStyles:s==null?void 0:s.setOverlayStyles,setOverlayMousePosition:s==null?void 0:s.setOverlayMousePosition})}unregisterChart(t){this.activeCharts.has(t)&&this.activeCharts.delete(t)}updateSymbol(t,r){const n=this.activeCharts.get(t);n&&(n.symbol=r.symbol,n.type=r.type,r.exchange!==void 0&&(n.exchange=r.exchange))}hasSameSymbol(t,r){const n=this.activeCharts.get(t),i=this.activeCharts.get(r);if(!n||!i||!n.symbol||!i.symbol)return!1;const o=n.symbol===i.symbol;return n.type===void 0&&i.type===void 0?o:o&&n.type===i.type}generateOverlayId(t){return{id:t.id}}onOverlayCreated(t,r){this.syncDrawing(t,r,"create")}onOverlayUpdated(t,r){this.syncDrawing(t,r,"update")}onOverlayRemoved(t,r){this.syncDrawing(t,r,"remove")}syncDrawing(t,r,n){if(!Tl.enabled||this.activeCharts.size<=1)return;const i=this.generateOverlayId(r);if(!this.syncingOverlays.has(i)){this.syncingOverlays.add(i);try{if(!this.activeCharts.get(t)){console.error("syncDrawing called - sourceChartData not found");return}this.activeCharts.forEach((o,s)=>{if(s.id!==t.id)try{if(!this.hasSameSymbol(t,s))return;const u=o.chart;switch(n){case"create":this.createOverlayOnChart(u,r,s);break;case"update":this.updateOverlayOnChart(u,r,s);break;case"remove":this.removeOverlayFromChart(u,r,s);break}}catch(u){console.error(`Error syncing drawing to chart ${s}:`,u)}})}finally{setTimeout(()=>{this.syncingOverlays.delete(i)},100)}}}createOverlayOnChart(t,r,n){try{const i=this.activeCharts.get(n),o=JSON.parse(JSON.stringify(r));if(i!=null&&i.setOverlaySettingVisible&&i!=null&&i.setOverlayStyles&&i!=null&&i.setOverlayMousePosition){o.onRightClick=function(u){var c;const h=u.x||0,p=u.y||0,g=Yd(h,p);return i.setOverlayMousePosition(g),i.setOverlaySettingVisible(!0),i.setOverlayStyles(u.overlay),(c=u.preventDefault)==null||c.call(u),!0},o.onDoubleClick=function(u){const c=u.x||0,h=u.y||0,p=Yd(c,h);return i.setOverlayMousePosition(p),i.setOverlaySettingVisible(!0),i.setOverlayStyles(u.overlay),!0};const s=this;o.onPressedMoving=function(u){return Tl.isEnabled()&&s.onOverlayUpdated(n,u.overlay),!1},o.onPressedMoveEnd=function(u){return Tl.isEnabled()&&s.onOverlayUpdated(n,u.overlay),!0},o.onRemove=function(u){return Tl.isEnabled()&&s.onOverlayRemoved(n,u.overlay),!0}}t.createOverlay(o)}catch(i){console.error(`Error creating overlay on chart ${n}:`,i)}}updateOverlayOnChart(t,r,n){try{const i=t.getOverlays(),o=[];i&&Array.isArray(i)&&i.forEach(s=>{s.id===r.id&&o.push(s)}),o.forEach(s=>{s.id&&t.removeOverlay({id:s.id})}),this.createOverlayOnChart(t,r,n)}catch(i){console.error(`Error updating overlay on chart ${n}:`,i)}}removeOverlayFromChart(t,r,n){try{const i=t.getOverlays(),o=[];i&&Array.isArray(i)&&i.forEach(s=>{s.id===r.id&&o.push(s)}),o.forEach(s=>{s.id&&t.removeOverlay({id:s.id})})}catch(i){console.error(`Error removing overlay from chart ${n}:`,i)}}getRegisteredChartIds(){return Array.from(this.activeCharts.keys())}getChartSymbol(t){const r=this.activeCharts.get(t);if(r)return{symbol:r.symbol,type:r.type,interval:r.interval}}};be(Sp,"instance",new Sp),be(Sp,"enabled",!1);let uv=Sp;const Os=()=>uv.getInstance(),UT=e=>{uv.setEnabled(e)},Nd=()=>uv.isEnabled(),$g=class Il{constructor(){be(this,"isProcessing",!1),be(this,"pendingUpdates",new Map),be(this,"chartSubscribedSymbols",null),be(this,"setChartSubscribedSymbols",null),be(this,"visibleChartIds",null),be(this,"activeChart",null),be(this,"setSymbolCallback",null)}static getInstance(){return Il.instance||(Il.instance=new Il),Il.instance}initialize(t,r,n,i,o){this.chartSubscribedSymbols=t,this.setChartSubscribedSymbols=r,this.visibleChartIds=n,this.activeChart=i,this.setSymbolCallback=o,console.log("SymbolSyncManager: Initialized with chart state accessors")}requestSymbolChange(t,r){if(console.log("SymbolSyncManager: Symbol change requested -",t.id,r),this.isProcessing){console.log("SymbolSyncManager: Currently processing, queuing update for",t.id),this.pendingUpdates.set(t.id,{chartId:t,symbol:r});return}this.processSymbolChange(t,r)}processSymbolChange(t,r){console.log("SymbolSyncManager: Processing symbol change -",t.id,r,"TIMESTAMP:",Date.now()),this.isProcessing=!0;try{if(this.isDuplicateCall(t,r)){console.log("SymbolSyncManager: Skipping duplicate symbol change for",t.id);return}Il.enabled?this.syncAllCharts(t,r):this.updateSingleChart(t,r)}catch(n){console.error("SymbolSyncManager: Error processing symbol change:",n)}finally{this.isProcessing=!1,this.processPendingUpdates()}}isDuplicateCall(t,r){if(!this.chartSubscribedSymbols)return console.log("SymbolSyncManager: isDuplicateCall - no chartSubscribedSymbols accessor"),!1;const n=this.chartSubscribedSymbols()[t.id];return(n==null?void 0:n.symbol)===(r==null?void 0:r.symbol)&&(n==null?void 0:n.exchange)===(r==null?void 0:r.exchange)&&(n==null?void 0:n.type)===(r==null?void 0:r.type)}syncAllCharts(t,r){if(!this.chartSubscribedSymbols||!this.setChartSubscribedSymbols||!this.visibleChartIds||!this.activeChart){console.error("SymbolSyncManager: Not properly initialized");return}console.log("SymbolSyncManager: Starting atomic sync operation");const n=this.captureCurrentStates();console.log("SymbolSyncManager: Captured current states:",n);const i=this.getChartsRequiringUpdate(t,r);console.log("SymbolSyncManager: Charts to update (before state update):",i.map(s=>s.id));const o=n.get(t.id);o&&(console.log("SymbolSyncManager: Setting previous symbol for source chart",t.id,o),Wr.getInstance().setPreviousSymbol(t,o)),i.forEach(s=>{const u=n.get(s.id);u&&(console.log("SymbolSyncManager: Setting previous symbol for",s.id,u),Wr.getInstance().setPreviousSymbol(s,u))}),this.setChartSubscribedSymbols(s=>({...s,[t.id]:r})),Os().updateSymbol(t,r),this.updateChartsAtomically(i,r)}updateSingleChart(t,r){var n,i;if(!this.setChartSubscribedSymbols||!this.setSymbolCallback){console.error("SymbolSyncManager: Not properly initialized for single chart update");return}console.log("SymbolSyncManager: Updating single chart:",t.id);const o=(i=(n=this.chartSubscribedSymbols)==null?void 0:n.call(this))==null?void 0:i[t.id];o&&Wr.getInstance().setPreviousSymbol(t,o),this.setChartSubscribedSymbols(s=>({...s,[t.id]:r})),Os().updateSymbol(t,r),this.setSymbolCallback(r,t,Wr.getInstance().getDataFeed()),qc({chartId:t,objectType:"force-refresh",objectOperation:"show"})}captureCurrentStates(){const t=new Map;if(this.chartSubscribedSymbols){const r=this.chartSubscribedSymbols();Object.entries(r).forEach(([n,i])=>{i&&t.set(n,{...i})})}return t}getChartsRequiringUpdate(t,r){return!this.visibleChartIds||!this.chartSubscribedSymbols?(console.log("SymbolSyncManager: getChartsRequiringUpdate - EARLY RETURN due to missing accessors:",{visibleChartIds:!!this.visibleChartIds,chartSubscribedSymbols:!!this.chartSubscribedSymbols}),[]):(console.log("SymbolSyncManager: getChartsRequiringUpdate - checking visible charts:",this.visibleChartIds().map(n=>n.id)),console.log("SymbolSyncManager: getChartsRequiringUpdate - current state:",this.chartSubscribedSymbols()),this.visibleChartIds().filter(n=>{if(n.id===t.id)return console.log("SymbolSyncManager: Skipping source chart:",n.id),!1;const i=this.chartSubscribedSymbols()[n.id];return console.log(`SymbolSyncManager: Checking chart ${n.id} - current:`,i,"new:",r),(i==null?void 0:i.symbol)===(r==null?void 0:r.symbol)&&(i==null?void 0:i.exchange)===(r==null?void 0:r.exchange)?(console.log(`SymbolSyncManager: Skipping chart ${n.id} - already has same symbol`),!1):(console.log(`SymbolSyncManager: Chart ${n.id} needs update`),!0)}))}updateChartsAtomically(t,r){if(!this.setSymbolCallback)return;console.log("SymbolSyncManager: Applying atomic updates to",t.length,"charts"),t.length>0&&this.setChartSubscribedSymbols(i=>{const o={...i};return t.forEach(s=>{o[s.id]=r}),o});const n=Os();t.forEach(i=>{n.updateSymbol(i,r),this.setSymbolCallback(r,i,Wr.getInstance().getDataFeed())})}processPendingUpdates(){if(this.pendingUpdates.size>0){console.log("SymbolSyncManager: Processing",this.pendingUpdates.size,"pending updates");const t=Array.from(this.pendingUpdates.values());this.pendingUpdates.clear();const r=new Map;t.forEach(n=>{r.set(n.chartId.id,n)}),r.forEach(n=>{this.processSymbolChange(n.chartId,n.symbol)})}}isCurrentlyProcessing(){return this.isProcessing}getPendingUpdatesCount(){return this.pendingUpdates.size}clearPendingUpdates(){this.pendingUpdates.clear(),console.log("SymbolSyncManager: Cleared all pending updates")}static setEnabled(t){Il.enabled=t}static isEnabled(){return Il.enabled}};be($g,"instance"),be($g,"enabled",!1);let dv=$g;const hv=()=>dv.getInstance(),jT=e=>{dv.setEnabled(e)},XT=()=>dv.isEnabled();class G2{constructor(t){be(this,"customOverrides",null),be(this,"isLightTheme"),this.customOverrides=t||null,this.isLightTheme=r=>r==="Light Theme 1"||r==="Light Theme 2"}hasCustomStyles(){return this.customOverrides!==null&&this.hasAnyCustomOverrides()}getStyledWithOverrides(t,r){if(!this.hasCustomStyles())return t;let n=nt.cloneDeep(t);const i=this.customOverrides;return i.global&&(n=nt.merge(n,i.global)),this.isLightTheme(r)&&i.light?n=nt.merge(n,i.light):!this.isLightTheme(r)&&i.dark&&(n=nt.merge(n,i.dark)),i.themes&&i.themes[r]&&(n=nt.merge(n,i.themes[r])),n}updateCustomOverrides(t){this.customOverrides=t}getCustomOverrides(){return this.customOverrides?nt.cloneDeep(this.customOverrides):null}clearCustomOverrides(){this.customOverrides=null}hasAnyCustomOverrides(){if(!this.customOverrides)return!1;const{global:t,light:r,dark:n,themes:i}=this.customOverrides;return!!(t&&Object.keys(t).length>0||r&&Object.keys(r).length>0||n&&Object.keys(n).length>0||i&&Object.keys(i).length>0)}}let kp=null;function YT(e){kp=new G2(e)}function T0(){return kp||(kp=new G2),kp}let st=Uy(),Wg=!1;const ZT=()=>({...st,candle:{...st.candle,tooltip:{...st.candle.tooltip,title:{...st.candle.tooltip.title,family:Ir,weight:Lr},legend:{...st.candle.tooltip.legend,family:Ir,weight:Lr,template:[{title:"T: ",value:"{time}"},{title:"O: ",value:"{open}"},{title:"H: ",value:"{high}"},{title:"L: ",value:"{low}"},{title:"C: ",value:"{close}"},{title:"V: ",value:"{volume}"}]}},priceMark:{...st.candle.priceMark,high:{...st.candle.priceMark.high,textFamily:Ir,textWeight:Lr},low:{...st.candle.priceMark.low,textFamily:Ir,textWeight:Lr},last:{...st.candle.priceMark.last,text:{...st.candle.priceMark.last.text,family:Ir,weight:Lr}}}},indicator:{...st.indicator,tooltip:{...st.indicator.tooltip,title:{...st.indicator.tooltip.title,family:Ir,weight:Lr},legend:{...st.indicator.tooltip.legend,family:Ir,weight:Lr}}},xAxis:{...st.xAxis,tickText:{...st.xAxis.tickText,family:Ir,weight:Lr}},yAxis:{...st.yAxis,tickText:{...st.yAxis.tickText,family:Ir,weight:Lr}},crosshair:{...st.crosshair,horizontal:{...st.crosshair.horizontal,text:{...st.crosshair.horizontal.text,family:Ir,weight:Lr}},vertical:{...st.crosshair.vertical,text:{...st.crosshair.vertical.text,family:Ir,weight:Lr}}},overlay:{...st.overlay,text:{...st.overlay.text,family:Ir,weight:Lr}},grid:{...st.grid,horizontal:{...st.grid.horizontal,color:"rgb(178, 181, 190)"},vertical:{...st.grid.vertical,color:"rgb(178, 181, 190)"}}}),KT=()=>({...st,candle:{...st.candle,tooltip:{...st.candle.tooltip,title:{...st.candle.tooltip.title,family:Ir,weight:Lr},legend:{...st.candle.tooltip.legend,family:Ir,weight:Lr,template:[{title:"T: ",value:"{time}"},{title:"O: ",value:"{open}"},{title:"H: ",value:"{high}"},{title:"L: ",value:"{low}"},{title:"C: ",value:"{close}"},{title:"V: ",value:"{volume}"}]}},priceMark:{...st.candle.priceMark,high:{...st.candle.priceMark.high,textFamily:Ir,textWeight:Lr},low:{...st.candle.priceMark.low,textFamily:Ir,textWeight:Lr},last:{...st.candle.priceMark.last,text:{...st.candle.priceMark.last.text,family:Ir,weight:Lr}}}},indicator:{...st.indicator,tooltip:{...st.indicator.tooltip,title:{...st.indicator.tooltip.title,family:Ir,weight:Lr},legend:{...st.indicator.tooltip.legend,family:Ir,weight:Lr}}},crosshair:{...st.crosshair,horizontal:{...st.crosshair.horizontal,text:{...st.crosshair.horizontal.text,family:Ir,weight:Lr}},vertical:{...st.crosshair.vertical,text:{...st.crosshair.vertical.text,family:Ir,weight:Lr}}},overlay:{...st.overlay,text:{...st.overlay.text,family:Ir,weight:Lr}},grid:{...st.grid,horizontal:{...st.grid.horizontal,color:"rgb(42, 46, 57)"},vertical:{...st.grid.vertical,color:"rgb(42, 46, 57)"}},xAxis:{...st.xAxis,axisLine:{...st.xAxis.axisLine,color:"rgb(42, 46, 57)"},tickText:{...st.xAxis.tickText,family:Ir,weight:Lr}},yAxis:{...st.yAxis,axisLine:{...st.yAxis.axisLine,color:"rgb(42, 46, 57)"},tickText:{...st.yAxis.tickText,family:Ir,weight:Lr}}});function qT(){return Wg}const QT=e=>e==="Light Theme 1"||e==="Light Theme 2"?(Wg=!1,ZT()):(Wg=!0,KT()),Ui=e=>{const t=QT(e);return T0().getStyledWithOverrides(t,e)},GT=e=>{st=nt.merge({},st,e)};var JT=K('<div class=left-section><select class=select></select><button class="button edit-btn"title="Rename watchlist"><svg width=14 height=14 viewBox="0 0 24 24"fill=currentColor><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z">'),Um=K('<button class="button add-btn"title="Add symbol">+'),eI=K('<div class=left-section><div class=rename-container><input type=text class=rename-input placeholder="Enter watchlist name..."maxlength=50 autofocus><button class="button save-btn"title=Save><svg width=14 height=14 viewBox="0 0 24 24"fill=currentColor><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg></button><button class="button cancel-btn"title=Cancel><svg width=14 height=14 viewBox="0 0 24 24"fill=currentColor><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z">'),tI=K("<div class=rename-error>"),rI=K("<div class=list>"),nI=K("<div class=chartspire-ui-watchlist><div class=header>"),iI=K("<option>"),oI=K(`<div class=ticker-item><div class=ticker-info><img class=ticker-logo><span class=ticker-name></span></div><span class=ticker-price>$</span><svg version=1.1 id=Capa_1 xmlns=http://www.w3.org/2000/svg viewBox="0 0 408.483 408.483"><g><g><path d="M87.748,388.784c0.461,11.01,9.521,19.699,20.539,19.699h191.911c11.018,0,20.078-8.689,20.539-19.699l13.705-289.316\r
															H74.043L87.748,388.784z M247.655,171.329c0-4.61,3.738-8.349,8.35-8.349h13.355c4.609,0,8.35,3.738,8.35,8.349v165.293\r
															c0,4.611-3.738,8.349-8.35,8.349h-13.355c-4.61,0-8.35-3.736-8.35-8.349V171.329z M189.216,171.329\r
															c0-4.61,3.738-8.349,8.349-8.349h13.355c4.609,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.737,8.349-8.349,8.349h-13.355\r
															c-4.61,0-8.349-3.736-8.349-8.349V171.329L189.216,171.329z M130.775,171.329c0-4.61,3.738-8.349,8.349-8.349h13.356\r
															c4.61,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.738,8.349-8.349,8.349h-13.356c-4.61,0-8.349-3.736-8.349-8.349V171.329z"></path><path d="M343.567,21.043h-88.535V4.305c0-2.377-1.927-4.305-4.305-4.305h-92.971c-2.377,0-4.304,1.928-4.304,4.305v16.737H64.916\r
															c-7.125,0-12.9,5.776-12.9,12.901V74.47h304.451V33.944C356.467,26.819,350.692,21.043,343.567,21.043z">`),aI=K("<div class=ticker-item><div class=ticker-info><img class=ticker-logo><span class=ticker-name></span></div><span class=ticker-price>$");const sI={multiplier:1,timespan:"minute",text:"1m"},lI=e=>({symbol:e.symbol,exchange:e.exchange,type:e.type}),cI=e=>{const t=new zT(e.useExternalWatchListStorage),r=`watchlist_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=Wr.getInstance().getDataFeed(),i=n?HT(sI,r,n,{useHttp:e.watchListHttp,httpInterval:e.watchListHttpInterval,httpBatchSize:e.watchListHttpBatchSize,httpRetryEnabled:e.watchListHttpRetryEnabled,httpMaxRetries:e.watchListHttpMaxRetries}):null;Ei(async()=>{try{const H=await b(),de={};for(const[fe,ce]of Object.entries(H))de[fe]=te(ce);_(de);const U=Vc.getOrderedNames(de);U.length>0&&(D(U[0]),await x(U[0],de)),M(!0),console.log("Dynamic watchlists initialized:",U)}catch(H){console.error("Error during watchlist initialization:",H)}});const[o,s]=me(!1),[u,c]=me(!1),[h,p]=me(""),[g,m]=me(""),b=async()=>{try{const H=await t.fetchWatchlist();return Vc.initializeWatchlists(e.watchListAmount,H)}catch(H){return console.error("Error initializing watchlists:",H),Vc.initializeWatchlists(e.watchListAmount,null)}},x=async(H,de)=>{const U=de[H]||[];U.length>0&&i&&i.subscribeToWatchlist(H,U)},[C,_]=me({}),[k,M]=me(!1),[L,D]=me(""),[P,$]=me(null);Nr(()=>{i&&i.dataService.cleanup()});const A=H=>{const de=L(),U=C()[de];if(e.enabledSymbolTypes&&e.enabledSymbolTypes.length>0&&!(te([H]).length>0)){console.warn(`Symbol ${H.symbol} type '${H.type}' is not allowed. Enabled types: ${e.enabledSymbolTypes.join(", ")}`);return}if(le(de)){console.warn(`Watchlist ${de} is full (limit: ${e.watchListLimit})`);return}if(ae(H)){console.warn(`Symbol ${H.symbol} from ${H.exchange} already exists in ${de}`);return}const fe=lI(H);_(ce=>({...ce,[de]:[...U,fe]})),i&&i.subscribeToSymbol(H),t.addToStorage({...C(),[de]:[...U,fe]})},N=(H,de=!1)=>{const U=L(),fe=C()[U].filter(ce=>!(ce.symbol===H.symbol&&ce.exchange===H.exchange));_(ce=>({...ce,[U]:fe})),i&&i.unsubscribeFromSymbol(H),t.addToStorage({...C(),[U]:fe})},z=({draggable:H})=>{const de=C()[L()].find(U=>U.symbol===H.id);$(de||null)},B=({draggable:H,droppable:de})=>{if(H&&de){const U=L(),fe=[...C()[U]],ce=fe.findIndex(Ee=>`${Ee.symbol}_${Ee.exchange}`===H.id),Oe=fe.findIndex(Ee=>`${Ee.symbol}_${Ee.exchange}`===de.id);if(ce!==-1&&Oe!==-1&&ce!==Oe){const[Ee]=fe.splice(ce,1);fe.splice(Oe,0,Ee),_(Fe=>({...Fe,[U]:fe})),t.addToStorage({...C(),[U]:fe})}}$(null)},Q=H=>{const de=L(),U=C()[de]||[],fe=C()[H]||[];i&&i.switchWatchlist(H,fe,de,U),D(H)},ne=()=>{p(L()),m(""),c(!0)},Z=()=>{c(!1),p(""),m("")},J=async()=>{const H=h().trim(),de=L(),U=Vc.getOrderedNames(C()).filter(ce=>ce!==de),fe=Vc.validateWatchlistName(H,U);if(!fe.isValid){m(fe.error||"Invalid name");return}try{const ce=Vc.renameWatchlist(C(),de,H);$a(()=>{_(ce),D(H),c(!1),p(""),m("")}),t.addToStorage(ce),console.log(`Watchlist renamed from "${de}" to "${H}"`)}catch(ce){console.error("Error renaming watchlist:",ce),m("Failed to rename watchlist")}},ue=H=>{H.key==="Enter"?J():H.key==="Escape"&&Z()},le=H=>C()[H].length>=e.watchListLimit;function ae(H){const de=L();return C()[de].some(U=>U.symbol===H.symbol&&U.exchange===H.exchange)}const te=H=>!e.enabledSymbolTypes||e.enabledSymbolTypes.length===0?H:H.filter(de=>{if(!de.type)return!1;const U=de.type.toLowerCase();return e.enabledSymbolTypes.some(fe=>fe.toLowerCase()===U)}),ve=H=>{hv().requestSymbolChange(lo(),H)},pe=H=>{const de=qT()?"#FFFFFF":"#000000";if(i){const U=`${H.symbol}_${H.exchange}`,fe=i.symbolData()[U],ce=i.previousPrices()[U];if(!(fe!=null&&fe.close)||ce===void 0)return de;const Oe=fe.close;return Oe>ce?"#00FF00":Oe<ce?"#FF0000":de}return de},j=H=>{var de;if(i){const U=`${H.symbol}_${H.exchange}`;return(de=i.symbolData()[U])==null?void 0:de.close}};return Y(Pe,{get when(){return k()},get children(){var H=nI(),de=H.firstChild;return F(de,Y(Pe,{get when(){return!u()},get children(){return[(()=>{var U=JT(),fe=U.firstChild,ce=fe.nextSibling;return fe.addEventListener("change",Oe=>{Q(Oe.currentTarget.value)}),F(fe,Y(bn,{get each(){return Vc.getOrderedNames(C())},children:Oe=>(()=>{var Ee=iI();return Ee.value=Oe,F(Ee,Oe),Ee})()})),ce.$$click=ne,Ae(()=>fe.value=L()),U})(),(()=>{var U=Um();return U.$$click=()=>s(fe=>!fe),U})()]}}),null),F(de,Y(Pe,{get when(){return u()},get children(){return[(()=>{var U=eI(),fe=U.firstChild,ce=fe.firstChild,Oe=ce.nextSibling,Ee=Oe.nextSibling;return ce.$$keydown=ue,ce.$$input=Fe=>p(Fe.currentTarget.value),Oe.$$click=()=>void J(),Ee.$$click=Z,Ae(()=>ce.value=h()),U})(),(()=>{var U=Um();return U.$$click=()=>s(fe=>!fe),U})()]}}),null),F(H,Y(Pe,{get when(){return Le(()=>!!u())()&&g()},get children(){var U=tI();return F(U,g),U}}),null),F(H,Y(Pe,{get when(){return o()},get children(){return Y(K2,{get locale(){return e.locale},onSymbolSelected:U=>{A(U)},onClose:()=>{s(!1)},get enabledSymbolTypes(){return e.enabledSymbolTypes}})}}),null),F(H,Y(MT,{onDragStart:z,onDragEnd:B,collisionDetector:ST,get children(){return[Y(TT,{}),Y(DT,{get ids(){return C()[L()].map(U=>`${U.symbol}_${U.exchange}`)},get children(){var U=rI();return F(U,()=>C()[L()].map(fe=>{const ce=OT(`${fe.symbol}_${fe.exchange}`);return(()=>{var Oe=oI(),Ee=Oe.firstChild,Fe=Ee.firstChild,Ce=Fe.nextSibling,Te=Ee.nextSibling;Te.firstChild;var et=Te.nextSibling;return Oe.$$click=()=>{ve(fe)},tn(ce,Oe,()=>ce),F(Ce,()=>fe.symbol),F(Te,()=>j(fe)||"Loading...",null),et.$$click=Qe=>{Qe.stopPropagation(),N(fe,!1)},Ae(Qe=>{var it=fe.logo?fe.logo:void 0,He=pe(fe);return it!==Qe.e&&Be(Fe,"src",Qe.e=it),He!==Qe.t&&((Qe.t=He)!=null?Te.style.setProperty("color",He):Te.style.removeProperty("color")),Qe},{e:void 0,t:void 0}),Oe})()})),U}}),Y(PT,{get children(){return Le(()=>!!P())()?(()=>{var U=aI(),fe=U.firstChild,ce=fe.firstChild,Oe=ce.nextSibling,Ee=fe.nextSibling;return Ee.firstChild,F(Oe,()=>{var Fe;return(Fe=P())==null?void 0:Fe.symbol}),F(Ee,()=>j(P())||"Loading...",null),Ae(Fe=>{var Ce,Te,et=(Ce=P())!=null&&Ce.logo?(Te=P())==null?void 0:Te.logo:void 0,Qe=pe(P());return et!==Fe.e&&Be(ce,"src",Fe.e=et),Qe!==Fe.t&&((Fe.t=Qe)!=null?Ee.style.setProperty("color",Qe):Ee.style.removeProperty("color")),Fe},{e:void 0,t:void 0}),U})():null}})]}}),null),H}})};Dt(["click","input","keydown"]);const{min:uI,max:dI}=Math,Zc=(e,t=0,r=1)=>uI(dI(t,e),r),pv=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=Zc(e[t],0,255)):t===3&&(e[t]=Zc(e[t],0,1));return e},J2={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])J2[`[object ${e}]`]=e.toLowerCase();function Ht(e){return J2[Object.prototype.toString.call(e)]||"object"}const Ft=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):Ht(e[0])=="object"&&t?t.split("").filter(r=>e[0][r]!==void 0).map(r=>e[0][r]):e[0].slice(0),Gd=e=>{if(e.length<2)return null;const t=e.length-1;return Ht(e[t])=="string"?e[t].toLowerCase():null},{PI:Jp,min:e5,max:t5}=Math,Ro=e=>Math.round(e*100)/100,Hg=e=>Math.round(e*100)/100,Ps=Jp*2,ug=Jp/3,hI=Jp/180,pI=180/Jp;function r5(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const Lt={format:{},autodetect:[]};class $e{constructor(...t){const r=this;if(Ht(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let n=Gd(t),i=!1;if(!n){i=!0,Lt.sorted||(Lt.autodetect=Lt.autodetect.sort((o,s)=>s.p-o.p),Lt.sorted=!0);for(let o of Lt.autodetect)if(n=o.test(...t),n)break}if(Lt.format[n]){const o=Lt.format[n].apply(null,i?t:t.slice(0,-1));r._rgb=pv(o)}else throw new Error("unknown format: "+t);r._rgb.length===3&&r._rgb.push(1)}toString(){return Ht(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}}const fI="3.1.2",Xt=(...e)=>new $e(...e);Xt.version=fI;const Zd={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},gI=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,vI=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,n5=e=>{if(e.match(gI)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16),r=t>>16,n=t>>8&255,i=t&255;return[r,n,i,1]}if(e.match(vI)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16),r=t>>24&255,n=t>>16&255,i=t>>8&255,o=Math.round((t&255)/255*100)/100;return[r,n,i,o]}throw new Error(`unknown hex color: ${e}`)},{round:cp}=Math,i5=(...e)=>{let[t,r,n,i]=Ft(e,"rgba"),o=Gd(e)||"auto";i===void 0&&(i=1),o==="auto"&&(o=i<1?"rgba":"rgb"),t=cp(t),r=cp(r),n=cp(n);let s="000000"+(t<<16|r<<8|n).toString(16);s=s.substr(s.length-6);let u="0"+cp(i*255).toString(16);switch(u=u.substr(u.length-2),o.toLowerCase()){case"rgba":return`#${s}${u}`;case"argb":return`#${u}${s}`;default:return`#${s}`}};$e.prototype.name=function(){const e=i5(this._rgb,"rgb");for(let t of Object.keys(Zd))if(Zd[t]===e)return t.toLowerCase();return e};Lt.format.named=e=>{if(e=e.toLowerCase(),Zd[e])return n5(Zd[e]);throw new Error("unknown color name: "+e)};Lt.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&Ht(e)==="string"&&Zd[e.toLowerCase()])return"named"}});$e.prototype.alpha=function(e,t=!1){return e!==void 0&&Ht(e)==="number"?t?(this._rgb[3]=e,this):new $e([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};$e.prototype.clipped=function(){return this._rgb._clipped||!1};const Ua={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},mI=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function Fs(e){const t=mI.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);Ua.labWhitePoint=e,Ua.Xn=t[0],Ua.Zn=t[1]}function W0(){return Ua.labWhitePoint}const fv=(...e)=>{e=Ft(e,"lab");const[t,r,n]=e,[i,o,s]=yI(t,r,n),[u,c,h]=o5(i,o,s);return[u,c,h,e.length>3?e[3]:1]},yI=(e,t,r)=>{const{kE:n,kK:i,kKE:o,Xn:s,Yn:u,Zn:c}=Ua,h=(e+16)/116,p=.002*t+h,g=h-.005*r,m=p*p*p,b=g*g*g,x=m>n?m:(116*p-16)/i,C=e>o?Math.pow((e+16)/116,3):e/i,_=b>n?b:(116*g-16)/i,k=x*s,M=C*u,L=_*c;return[k,M,L]},dg=e=>{const t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},o5=(e,t,r)=>{const{MtxAdaptMa:n,MtxAdaptMaI:i,MtxXYZ2RGB:o,RefWhiteRGB:s,Xn:u,Yn:c,Zn:h}=Ua,p=u*n.m00+c*n.m10+h*n.m20,g=u*n.m01+c*n.m11+h*n.m21,m=u*n.m02+c*n.m12+h*n.m22,b=s.X*n.m00+s.Y*n.m10+s.Z*n.m20,x=s.X*n.m01+s.Y*n.m11+s.Z*n.m21,C=s.X*n.m02+s.Y*n.m12+s.Z*n.m22,_=(e*n.m00+t*n.m10+r*n.m20)*(b/p),k=(e*n.m01+t*n.m11+r*n.m21)*(x/g),M=(e*n.m02+t*n.m12+r*n.m22)*(C/m),L=_*i.m00+k*i.m10+M*i.m20,D=_*i.m01+k*i.m11+M*i.m21,P=_*i.m02+k*i.m12+M*i.m22,$=dg(L*o.m00+D*o.m10+P*o.m20),A=dg(L*o.m01+D*o.m11+P*o.m21),N=dg(L*o.m02+D*o.m12+P*o.m22);return[$*255,A*255,N*255]},gv=(...e)=>{const[t,r,n,...i]=Ft(e,"rgb"),[o,s,u]=a5(t,r,n),[c,h,p]=bI(o,s,u);return[c,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]};function bI(e,t,r){const{Xn:n,Yn:i,Zn:o,kE:s,kK:u}=Ua,c=e/n,h=t/i,p=r/o,g=c>s?Math.pow(c,1/3):(u*c+16)/116,m=h>s?Math.pow(h,1/3):(u*h+16)/116,b=p>s?Math.pow(p,1/3):(u*p+16)/116;return[116*m-16,500*(g-m),200*(m-b)]}function hg(e){const t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const a5=(e,t,r)=>{e=hg(e/255),t=hg(t/255),r=hg(r/255);const{MtxRGB2XYZ:n,MtxAdaptMa:i,MtxAdaptMaI:o,Xn:s,Yn:u,Zn:c,As:h,Bs:p,Cs:g}=Ua;let m=e*n.m00+t*n.m10+r*n.m20,b=e*n.m01+t*n.m11+r*n.m21,x=e*n.m02+t*n.m12+r*n.m22;const C=s*i.m00+u*i.m10+c*i.m20,_=s*i.m01+u*i.m11+c*i.m21,k=s*i.m02+u*i.m12+c*i.m22;let M=m*i.m00+b*i.m10+x*i.m20,L=m*i.m01+b*i.m11+x*i.m21,D=m*i.m02+b*i.m12+x*i.m22;return M*=C/h,L*=_/p,D*=k/g,m=M*o.m00+L*o.m10+D*o.m20,b=M*o.m01+L*o.m11+D*o.m21,x=M*o.m02+L*o.m12+D*o.m22,[m,b,x]};$e.prototype.lab=function(){return gv(this._rgb)};const xI=(...e)=>new $e(...e,"lab");Object.assign(Xt,{lab:xI,getLabWhitePoint:W0,setLabWhitePoint:Fs});Lt.format.lab=fv;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Ft(e,"lab"),Ht(e)==="array"&&e.length===3)return"lab"}});$e.prototype.darken=function(e=1){const t=this,r=t.lab();return r[0]-=Ua.Kn*e,new $e(r,"lab").alpha(t.alpha(),!0)};$e.prototype.brighten=function(e=1){return this.darken(-e)};$e.prototype.darker=$e.prototype.darken;$e.prototype.brighter=$e.prototype.brighten;$e.prototype.get=function(e){const[t,r]=e.split("."),n=this[t]();if(r){const i=t.indexOf(r)-(t.substr(0,2)==="ok"?2:0);if(i>-1)return n[i];throw new Error(`unknown channel ${r} in mode ${t}`)}else return n};const{pow:wI}=Math,CI=1e-7,_I=20;$e.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&Ht(e)==="number"){if(e===0)return new $e([0,0,0,this._rgb[3]],"rgb");if(e===1)return new $e([255,255,255,this._rgb[3]],"rgb");let r=this.luminance(),n=_I;const i=(s,u)=>{const c=s.interpolate(u,.5,t),h=c.luminance();return Math.abs(e-h)<CI||!n--?c:h>e?i(s,c):i(c,u)},o=(r>e?i(new $e([0,0,0]),this):i(this,new $e([255,255,255]))).rgb();return new $e([...o,this._rgb[3]])}return SI(...this._rgb.slice(0,3))};const SI=(e,t,r)=>(e=pg(e),t=pg(t),r=pg(r),.2126*e+.7152*t+.0722*r),pg=e=>(e/=255,e<=.03928?e/12.92:wI((e+.055)/1.055,2.4)),fi={},Kd=(e,t,r=.5,...n)=>{let i=n[0]||"lrgb";if(!fi[i]&&!n.length&&(i=Object.keys(fi)[0]),!fi[i])throw new Error(`interpolation mode ${i} is not defined`);return Ht(e)!=="object"&&(e=new $e(e)),Ht(t)!=="object"&&(t=new $e(t)),fi[i](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))};$e.prototype.mix=$e.prototype.interpolate=function(e,t=.5,...r){return Kd(this,e,t,...r)};$e.prototype.premultiply=function(e=!1){const t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new $e([t[0]*r,t[1]*r,t[2]*r,r],"rgb")};const{sin:kI,cos:MI}=Math,s5=(...e)=>{let[t,r,n]=Ft(e,"lch");return isNaN(n)&&(n=0),n=n*hI,[t,MI(n)*r,kI(n)*r]},vv=(...e)=>{e=Ft(e,"lch");const[t,r,n]=e,[i,o,s]=s5(t,r,n),[u,c,h]=fv(i,o,s);return[u,c,h,e.length>3?e[3]:1]},EI=(...e)=>{const t=r5(Ft(e,"hcl"));return vv(...t)},{sqrt:TI,atan2:II,round:LI}=Math,l5=(...e)=>{const[t,r,n]=Ft(e,"lab"),i=TI(r*r+n*n);let o=(II(n,r)*pI+360)%360;return LI(i*1e4)===0&&(o=Number.NaN),[t,i,o]},mv=(...e)=>{const[t,r,n,...i]=Ft(e,"rgb"),[o,s,u]=gv(t,r,n),[c,h,p]=l5(o,s,u);return[c,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]};$e.prototype.lch=function(){return mv(this._rgb)};$e.prototype.hcl=function(){return r5(mv(this._rgb))};const PI=(...e)=>new $e(...e,"lch"),AI=(...e)=>new $e(...e,"hcl");Object.assign(Xt,{lch:PI,hcl:AI});Lt.format.lch=vv;Lt.format.hcl=EI;["lch","hcl"].forEach(e=>Lt.autodetect.push({p:2,test:(...t)=>{if(t=Ft(t,e),Ht(t)==="array"&&t.length===3)return e}}));$e.prototype.saturate=function(e=1){const t=this,r=t.lch();return r[1]+=Ua.Kn*e,r[1]<0&&(r[1]=0),new $e(r,"lch").alpha(t.alpha(),!0)};$e.prototype.desaturate=function(e=1){return this.saturate(-e)};$e.prototype.set=function(e,t,r=!1){const[n,i]=e.split("."),o=this[n]();if(i){const s=n.indexOf(i)-(n.substr(0,2)==="ok"?2:0);if(s>-1){if(Ht(t)=="string")switch(t.charAt(0)){case"+":o[s]+=+t;break;case"-":o[s]+=+t;break;case"*":o[s]*=+t.substr(1);break;case"/":o[s]/=+t.substr(1);break;default:o[s]=+t}else if(Ht(t)==="number")o[s]=t;else throw new Error("unsupported value for Color.set");const u=new $e(o,n);return r?(this._rgb=u._rgb,this):u}throw new Error(`unknown channel ${i} in mode ${n}`)}else return o};$e.prototype.tint=function(e=.5,...t){return Kd(this,"white",e,...t)};$e.prototype.shade=function(e=.5,...t){return Kd(this,"black",e,...t)};const DI=(e,t,r)=>{const n=e._rgb,i=t._rgb;return new $e(n[0]+r*(i[0]-n[0]),n[1]+r*(i[1]-n[1]),n[2]+r*(i[2]-n[2]),"rgb")};fi.rgb=DI;const{sqrt:fg,pow:Md}=Math,FI=(e,t,r)=>{const[n,i,o]=e._rgb,[s,u,c]=t._rgb;return new $e(fg(Md(n,2)*(1-r)+Md(s,2)*r),fg(Md(i,2)*(1-r)+Md(u,2)*r),fg(Md(o,2)*(1-r)+Md(c,2)*r),"rgb")};fi.lrgb=FI;const RI=(e,t,r)=>{const n=e.lab(),i=t.lab();return new $e(n[0]+r*(i[0]-n[0]),n[1]+r*(i[1]-n[1]),n[2]+r*(i[2]-n[2]),"lab")};fi.lab=RI;const Jd=(e,t,r,n)=>{let i,o;n==="hsl"?(i=e.hsl(),o=t.hsl()):n==="hsv"?(i=e.hsv(),o=t.hsv()):n==="hcg"?(i=e.hcg(),o=t.hcg()):n==="hsi"?(i=e.hsi(),o=t.hsi()):n==="lch"||n==="hcl"?(n="hcl",i=e.hcl(),o=t.hcl()):n==="oklch"&&(i=e.oklch().reverse(),o=t.oklch().reverse());let s,u,c,h,p,g;(n.substr(0,1)==="h"||n==="oklch")&&([s,c,p]=i,[u,h,g]=o);let m,b,x,C;return!isNaN(s)&&!isNaN(u)?(u>s&&u-s>180?C=u-(s+360):u<s&&s-u>180?C=u+360-s:C=u-s,b=s+r*C):isNaN(s)?isNaN(u)?b=Number.NaN:(b=u,(p==1||p==0)&&n!="hsv"&&(m=h)):(b=s,(g==1||g==0)&&n!="hsv"&&(m=c)),m===void 0&&(m=c+r*(h-c)),x=p+r*(g-p),n==="oklch"?new $e([x,m,b],n):new $e([b,m,x],n)},c5=(e,t,r)=>Jd(e,t,r,"lch");fi.lch=c5;fi.hcl=c5;const OI=e=>{if(Ht(e)=="number"&&e>=0&&e<=16777215){const t=e>>16,r=e>>8&255,n=e&255;return[t,r,n,1]}throw new Error("unknown num color: "+e)},NI=(...e)=>{const[t,r,n]=Ft(e,"rgb");return(t<<16)+(r<<8)+n};$e.prototype.num=function(){return NI(this._rgb)};const zI=(...e)=>new $e(...e,"num");Object.assign(Xt,{num:zI});Lt.format.num=OI;Lt.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&Ht(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});const VI=(e,t,r)=>{const n=e.num(),i=t.num();return new $e(n+r*(i-n),"num")};fi.num=VI;const{floor:BI}=Math,$I=(...e)=>{e=Ft(e,"hcg");let[t,r,n]=e,i,o,s;n=n*255;const u=r*255;if(r===0)i=o=s=n;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const c=BI(t),h=t-c,p=n*(1-r),g=p+u*(1-h),m=p+u*h,b=p+u;switch(c){case 0:[i,o,s]=[b,m,p];break;case 1:[i,o,s]=[g,b,p];break;case 2:[i,o,s]=[p,b,m];break;case 3:[i,o,s]=[p,g,b];break;case 4:[i,o,s]=[m,p,b];break;case 5:[i,o,s]=[b,p,g];break}}return[i,o,s,e.length>3?e[3]:1]},WI=(...e)=>{const[t,r,n]=Ft(e,"rgb"),i=e5(t,r,n),o=t5(t,r,n),s=o-i,u=s*100/255,c=i/(255-s)*100;let h;return s===0?h=Number.NaN:(t===o&&(h=(r-n)/s),r===o&&(h=2+(n-t)/s),n===o&&(h=4+(t-r)/s),h*=60,h<0&&(h+=360)),[h,u,c]};$e.prototype.hcg=function(){return WI(this._rgb)};const HI=(...e)=>new $e(...e,"hcg");Xt.hcg=HI;Lt.format.hcg=$I;Lt.autodetect.push({p:1,test:(...e)=>{if(e=Ft(e,"hcg"),Ht(e)==="array"&&e.length===3)return"hcg"}});const UI=(e,t,r)=>Jd(e,t,r,"hcg");fi.hcg=UI;const{cos:Ed}=Math,jI=(...e)=>{e=Ft(e,"hsi");let[t,r,n]=e,i,o,s;return isNaN(t)&&(t=0),isNaN(r)&&(r=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(s=(1-r)/3,i=(1+r*Ed(Ps*t)/Ed(ug-Ps*t))/3,o=1-(s+i)):t<2/3?(t-=1/3,i=(1-r)/3,o=(1+r*Ed(Ps*t)/Ed(ug-Ps*t))/3,s=1-(i+o)):(t-=2/3,o=(1-r)/3,s=(1+r*Ed(Ps*t)/Ed(ug-Ps*t))/3,i=1-(o+s)),i=Zc(n*i*3),o=Zc(n*o*3),s=Zc(n*s*3),[i*255,o*255,s*255,e.length>3?e[3]:1]},{min:XI,sqrt:YI,acos:ZI}=Math,KI=(...e)=>{let[t,r,n]=Ft(e,"rgb");t/=255,r/=255,n/=255;let i;const o=XI(t,r,n),s=(t+r+n)/3,u=s>0?1-o/s:0;return u===0?i=NaN:(i=(t-r+(t-n))/2,i/=YI((t-r)*(t-r)+(t-n)*(r-n)),i=ZI(i),n>r&&(i=Ps-i),i/=Ps),[i*360,u,s]};$e.prototype.hsi=function(){return KI(this._rgb)};const qI=(...e)=>new $e(...e,"hsi");Xt.hsi=qI;Lt.format.hsi=jI;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Ft(e,"hsi"),Ht(e)==="array"&&e.length===3)return"hsi"}});const QI=(e,t,r)=>Jd(e,t,r,"hsi");fi.hsi=QI;const Ug=(...e)=>{e=Ft(e,"hsl");const[t,r,n]=e;let i,o,s;if(r===0)i=o=s=n*255;else{const u=[0,0,0],c=[0,0,0],h=n<.5?n*(1+r):n+r-n*r,p=2*n-h,g=t/360;u[0]=g+1/3,u[1]=g,u[2]=g-1/3;for(let m=0;m<3;m++)u[m]<0&&(u[m]+=1),u[m]>1&&(u[m]-=1),6*u[m]<1?c[m]=p+(h-p)*6*u[m]:2*u[m]<1?c[m]=h:3*u[m]<2?c[m]=p+(h-p)*(2/3-u[m])*6:c[m]=p;[i,o,s]=[c[0]*255,c[1]*255,c[2]*255]}return e.length>3?[i,o,s,e[3]]:[i,o,s,1]},u5=(...e)=>{e=Ft(e,"rgba");let[t,r,n]=e;t/=255,r/=255,n/=255;const i=e5(t,r,n),o=t5(t,r,n),s=(o+i)/2;let u,c;return o===i?(u=0,c=Number.NaN):u=s<.5?(o-i)/(o+i):(o-i)/(2-o-i),t==o?c=(r-n)/(o-i):r==o?c=2+(n-t)/(o-i):n==o&&(c=4+(t-r)/(o-i)),c*=60,c<0&&(c+=360),e.length>3&&e[3]!==void 0?[c,u,s,e[3]]:[c,u,s]};$e.prototype.hsl=function(){return u5(this._rgb)};const GI=(...e)=>new $e(...e,"hsl");Xt.hsl=GI;Lt.format.hsl=Ug;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Ft(e,"hsl"),Ht(e)==="array"&&e.length===3)return"hsl"}});const JI=(e,t,r)=>Jd(e,t,r,"hsl");fi.hsl=JI;const{floor:eL}=Math,tL=(...e)=>{e=Ft(e,"hsv");let[t,r,n]=e,i,o,s;if(n*=255,r===0)i=o=s=n;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const u=eL(t),c=t-u,h=n*(1-r),p=n*(1-r*c),g=n*(1-r*(1-c));switch(u){case 0:[i,o,s]=[n,g,h];break;case 1:[i,o,s]=[p,n,h];break;case 2:[i,o,s]=[h,n,g];break;case 3:[i,o,s]=[h,p,n];break;case 4:[i,o,s]=[g,h,n];break;case 5:[i,o,s]=[n,h,p];break}}return[i,o,s,e.length>3?e[3]:1]},{min:rL,max:nL}=Math,iL=(...e)=>{e=Ft(e,"rgb");let[t,r,n]=e;const i=rL(t,r,n),o=nL(t,r,n),s=o-i;let u,c,h;return h=o/255,o===0?(u=Number.NaN,c=0):(c=s/o,t===o&&(u=(r-n)/s),r===o&&(u=2+(n-t)/s),n===o&&(u=4+(t-r)/s),u*=60,u<0&&(u+=360)),[u,c,h]};$e.prototype.hsv=function(){return iL(this._rgb)};const oL=(...e)=>new $e(...e,"hsv");Xt.hsv=oL;Lt.format.hsv=tL;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Ft(e,"hsv"),Ht(e)==="array"&&e.length===3)return"hsv"}});const aL=(e,t,r)=>Jd(e,t,r,"hsv");fi.hsv=aL;function Bp(e,t){let r=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(s=>[s]));let n=t[0].length,i=t[0].map((s,u)=>t.map(c=>c[u])),o=e.map(s=>i.map(u=>Array.isArray(s)?s.reduce((c,h,p)=>c+h*(u[p]||0),0):u.reduce((c,h)=>c+h*s,0)));return r===1&&(o=o[0]),n===1?o.map(s=>s[0]):o}const yv=(...e)=>{e=Ft(e,"lab");const[t,r,n,...i]=e,[o,s,u]=sL([t,r,n]),[c,h,p]=o5(o,s,u);return[c,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]};function sL(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],r=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],n=Bp(r,e);return Bp(t,n.map(i=>i**3))}const bv=(...e)=>{const[t,r,n,...i]=Ft(e,"rgb"),o=a5(t,r,n);return[...lL(o),...i.length>0&&i[0]<1?[i[0]]:[]]};function lL(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],r=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],n=Bp(t,e);return Bp(r,n.map(i=>Math.cbrt(i)))}$e.prototype.oklab=function(){return bv(this._rgb)};const cL=(...e)=>new $e(...e,"oklab");Object.assign(Xt,{oklab:cL});Lt.format.oklab=yv;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Ft(e,"oklab"),Ht(e)==="array"&&e.length===3)return"oklab"}});const uL=(e,t,r)=>{const n=e.oklab(),i=t.oklab();return new $e(n[0]+r*(i[0]-n[0]),n[1]+r*(i[1]-n[1]),n[2]+r*(i[2]-n[2]),"oklab")};fi.oklab=uL;const dL=(e,t,r)=>Jd(e,t,r,"oklch");fi.oklch=dL;const{pow:gg,sqrt:vg,PI:mg,cos:jm,sin:Xm,atan2:hL}=Math,pL=(e,t="lrgb",r=null)=>{const n=e.length;r||(r=Array.from(new Array(n)).map(()=>1));const i=n/r.reduce(function(g,m){return g+m});if(r.forEach((g,m)=>{r[m]*=i}),e=e.map(g=>new $e(g)),t==="lrgb")return fL(e,r);const o=e.shift(),s=o.get(t),u=[];let c=0,h=0;for(let g=0;g<s.length;g++)if(s[g]=(s[g]||0)*r[0],u.push(isNaN(s[g])?0:r[0]),t.charAt(g)==="h"&&!isNaN(s[g])){const m=s[g]/180*mg;c+=jm(m)*r[0],h+=Xm(m)*r[0]}let p=o.alpha()*r[0];e.forEach((g,m)=>{const b=g.get(t);p+=g.alpha()*r[m+1];for(let x=0;x<s.length;x++)if(!isNaN(b[x]))if(u[x]+=r[m+1],t.charAt(x)==="h"){const C=b[x]/180*mg;c+=jm(C)*r[m+1],h+=Xm(C)*r[m+1]}else s[x]+=b[x]*r[m+1]});for(let g=0;g<s.length;g++)if(t.charAt(g)==="h"){let m=hL(h/u[g],c/u[g])/mg*180;for(;m<0;)m+=360;for(;m>=360;)m-=360;s[g]=m}else s[g]=s[g]/u[g];return p/=n,new $e(s,t).alpha(p>.99999?1:p,!0)},fL=(e,t)=>{const r=e.length,n=[0,0,0,0];for(let i=0;i<e.length;i++){const o=e[i],s=t[i]/r,u=o._rgb;n[0]+=gg(u[0],2)*s,n[1]+=gg(u[1],2)*s,n[2]+=gg(u[2],2)*s,n[3]+=u[3]*s}return n[0]=vg(n[0]),n[1]=vg(n[1]),n[2]=vg(n[2]),n[3]>.9999999&&(n[3]=1),new $e(pv(n))},{pow:gL}=Math;function $p(e){let t="rgb",r=Xt("#ccc"),n=0,i=[0,1],o=[],s=[0,0],u=!1,c=[],h=!1,p=0,g=1,m=!1,b={},x=!0,C=1;const _=function(A){if(A=A||["#fff","#000"],A&&Ht(A)==="string"&&Xt.brewer&&Xt.brewer[A.toLowerCase()]&&(A=Xt.brewer[A.toLowerCase()]),Ht(A)==="array"){A.length===1&&(A=[A[0],A[0]]),A=A.slice(0);for(let N=0;N<A.length;N++)A[N]=Xt(A[N]);o.length=0;for(let N=0;N<A.length;N++)o.push(N/(A.length-1))}return P(),c=A},k=function(A){if(u!=null){const N=u.length-1;let z=0;for(;z<N&&A>=u[z];)z++;return z-1}return 0};let M=A=>A,L=A=>A;const D=function(A,N){let z,B;if(N==null&&(N=!1),isNaN(A)||A===null)return r;N?B=A:u&&u.length>2?B=k(A)/(u.length-2):g!==p?B=(A-p)/(g-p):B=1,B=L(B),N||(B=M(B)),C!==1&&(B=gL(B,C)),B=s[0]+B*(1-s[0]-s[1]),B=Zc(B,0,1);const Q=Math.floor(B*1e4);if(x&&b[Q])z=b[Q];else{if(Ht(c)==="array")for(let ne=0;ne<o.length;ne++){const Z=o[ne];if(B<=Z){z=c[ne];break}if(B>=Z&&ne===o.length-1){z=c[ne];break}if(B>Z&&B<o[ne+1]){B=(B-Z)/(o[ne+1]-Z),z=Xt.interpolate(c[ne],c[ne+1],B,t);break}}else Ht(c)==="function"&&(z=c(B));x&&(b[Q]=z)}return z};var P=()=>b={};_(e);const $=function(A){const N=Xt(D(A));return h&&N[h]?N[h]():N};return $.classes=function(A){if(A!=null){if(Ht(A)==="array")u=A,i=[A[0],A[A.length-1]];else{const N=Xt.analyze(i);A===0?u=[N.min,N.max]:u=Xt.limits(N,"e",A)}return $}return u},$.domain=function(A){if(!arguments.length)return i;p=A[0],g=A[A.length-1],o=[];const N=c.length;if(A.length===N&&p!==g)for(let z of Array.from(A))o.push((z-p)/(g-p));else{for(let z=0;z<N;z++)o.push(z/(N-1));if(A.length>2){const z=A.map((Q,ne)=>ne/(A.length-1)),B=A.map(Q=>(Q-p)/(g-p));B.every((Q,ne)=>z[ne]===Q)||(L=Q=>{if(Q<=0||Q>=1)return Q;let ne=0;for(;Q>=B[ne+1];)ne++;const Z=(Q-B[ne])/(B[ne+1]-B[ne]);return z[ne]+Z*(z[ne+1]-z[ne])})}}return i=[p,g],$},$.mode=function(A){return arguments.length?(t=A,P(),$):t},$.range=function(A,N){return _(A),$},$.out=function(A){return h=A,$},$.spread=function(A){return arguments.length?(n=A,$):n},$.correctLightness=function(A){return A==null&&(A=!0),m=A,P(),m?M=function(N){const z=D(0,!0).lab()[0],B=D(1,!0).lab()[0],Q=z>B;let ne=D(N,!0).lab()[0];const Z=z+(B-z)*N;let J=ne-Z,ue=0,le=1,ae=20;for(;Math.abs(J)>.01&&ae-- >0;)(function(){return Q&&(J*=-1),J<0?(ue=N,N+=(le-N)*.5):(le=N,N+=(ue-N)*.5),ne=D(N,!0).lab()[0],J=ne-Z})();return N}:M=N=>N,$},$.padding=function(A){return A!=null?(Ht(A)==="number"&&(A=[A,A]),s=A,$):s},$.colors=function(A,N){arguments.length<2&&(N="hex");let z=[];if(arguments.length===0)z=c.slice(0);else if(A===1)z=[$(.5)];else if(A>1){const B=i[0],Q=i[1]-B;z=vL(0,A).map(ne=>$(B+ne/(A-1)*Q))}else{e=[];let B=[];if(u&&u.length>2)for(let Q=1,ne=u.length,Z=1<=ne;Z?Q<ne:Q>ne;Z?Q++:Q--)B.push((u[Q-1]+u[Q])*.5);else B=i;z=B.map(Q=>$(Q))}return Xt[N]&&(z=z.map(B=>B[N]())),z},$.cache=function(A){return A!=null?(x=A,$):x},$.gamma=function(A){return A!=null?(C=A,$):C},$.nodata=function(A){return A!=null?(r=Xt(A),$):r},$}function vL(e,t,r){let n=[],i=e<t,o=t;for(let s=e;i?s<o:s>o;i?s++:s--)n.push(s);return n}const mL=function(e){let t=[1,1];for(let r=1;r<e;r++){let n=[1];for(let i=1;i<=t.length;i++)n[i]=(t[i]||0)+t[i-1];t=n}return t},yL=function(e){let t,r,n,i;if(e=e.map(o=>new $e(o)),e.length===2)[r,n]=e.map(o=>o.lab()),t=function(o){const s=[0,1,2].map(u=>r[u]+o*(n[u]-r[u]));return new $e(s,"lab")};else if(e.length===3)[r,n,i]=e.map(o=>o.lab()),t=function(o){const s=[0,1,2].map(u=>(1-o)*(1-o)*r[u]+2*(1-o)*o*n[u]+o*o*i[u]);return new $e(s,"lab")};else if(e.length===4){let o;[r,n,i,o]=e.map(s=>s.lab()),t=function(s){const u=[0,1,2].map(c=>(1-s)*(1-s)*(1-s)*r[c]+3*(1-s)*(1-s)*s*n[c]+3*(1-s)*s*s*i[c]+s*s*s*o[c]);return new $e(u,"lab")}}else if(e.length>=5){let o,s,u;o=e.map(c=>c.lab()),u=e.length-1,s=mL(u),t=function(c){const h=1-c,p=[0,1,2].map(g=>o.reduce((m,b,x)=>m+s[x]*h**(u-x)*c**x*b[g],0));return new $e(p,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},bL=e=>{const t=yL(e);return t.scale=()=>$p(t),t},{round:d5}=Math;$e.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(d5)};$e.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,r)=>r<3?e===!1?t:d5(t):t)};const xL=(...e)=>new $e(...e,"rgb");Object.assign(Xt,{rgb:xL});Lt.format.rgb=(...e)=>{const t=Ft(e,"rgba");return t[3]===void 0&&(t[3]=1),t};Lt.autodetect.push({p:3,test:(...e)=>{if(e=Ft(e,"rgba"),Ht(e)==="array"&&(e.length===3||e.length===4&&Ht(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});const ua=(e,t,r)=>{if(!ua[r])throw new Error("unknown blend mode "+r);return ua[r](e,t)},Vl=e=>(t,r)=>{const n=Xt(r).rgb(),i=Xt(t).rgb();return Xt.rgb(e(n,i))},Bl=e=>(t,r)=>{const n=[];return n[0]=e(t[0],r[0]),n[1]=e(t[1],r[1]),n[2]=e(t[2],r[2]),n},wL=e=>e,CL=(e,t)=>e*t/255,_L=(e,t)=>e>t?t:e,SL=(e,t)=>e>t?e:t,kL=(e,t)=>255*(1-(1-e/255)*(1-t/255)),ML=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),EL=(e,t)=>255*(1-(1-t/255)/(e/255)),TL=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);ua.normal=Vl(Bl(wL));ua.multiply=Vl(Bl(CL));ua.screen=Vl(Bl(kL));ua.overlay=Vl(Bl(ML));ua.darken=Vl(Bl(_L));ua.lighten=Vl(Bl(SL));ua.dodge=Vl(Bl(TL));ua.burn=Vl(Bl(EL));const{pow:IL,sin:LL,cos:PL}=Math;function AL(e=300,t=-1.5,r=1,n=1,i=[0,1]){let o=0,s;Ht(i)==="array"?s=i[1]-i[0]:(s=0,i=[i,i]);const u=function(c){const h=Ps*((e+120)/360+t*c),p=IL(i[0]+s*c,n),g=(o!==0?r[0]+c*o:r)*p*(1-p)/2,m=PL(h),b=LL(h),x=p+g*(-.14861*m+1.78277*b),C=p+g*(-.29227*m-.90649*b),_=p+g*(1.97294*m);return Xt(pv([x*255,C*255,_*255,1]))};return u.start=function(c){return c==null?e:(e=c,u)},u.rotations=function(c){return c==null?t:(t=c,u)},u.gamma=function(c){return c==null?n:(n=c,u)},u.hue=function(c){return c==null?r:(r=c,Ht(r)==="array"?(o=r[1]-r[0],o===0&&(r=r[1])):o=0,u)},u.lightness=function(c){return c==null?i:(Ht(c)==="array"?(i=c,s=c[1]-c[0]):(i=[c,c],s=0),u)},u.scale=()=>Xt.scale(u),u.hue(r),u}const DL="0123456789abcdef",{floor:FL,random:RL}=Math,OL=()=>{let e="#";for(let t=0;t<6;t++)e+=DL.charAt(FL(RL()*16));return new $e(e,"hex")},{log:Ym,pow:NL,floor:zL,abs:VL}=Math;function h5(e,t=null){const r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Ht(e)==="object"&&(e=Object.values(e)),e.forEach(n=>{t&&Ht(n)==="object"&&(n=n[t]),n!=null&&!isNaN(n)&&(r.values.push(n),r.sum+=n,n<r.min&&(r.min=n),n>r.max&&(r.max=n),r.count+=1)}),r.domain=[r.min,r.max],r.limits=(n,i)=>p5(r,n,i),r}function p5(e,t="equal",r=7){Ht(e)=="array"&&(e=h5(e));const{min:n,max:i}=e,o=e.values.sort((u,c)=>u-c);if(r===1)return[n,i];const s=[];if(t.substr(0,1)==="c"&&(s.push(n),s.push(i)),t.substr(0,1)==="e"){s.push(n);for(let u=1;u<r;u++)s.push(n+u/r*(i-n));s.push(i)}else if(t.substr(0,1)==="l"){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");const u=Math.LOG10E*Ym(n),c=Math.LOG10E*Ym(i);s.push(n);for(let h=1;h<r;h++)s.push(NL(10,u+h/r*(c-u)));s.push(i)}else if(t.substr(0,1)==="q"){s.push(n);for(let u=1;u<r;u++){const c=(o.length-1)*u/r,h=zL(c);if(h===c)s.push(o[h]);else{const p=c-h;s.push(o[h]*(1-p)+o[h+1]*p)}}s.push(i)}else if(t.substr(0,1)==="k"){let u;const c=o.length,h=new Array(c),p=new Array(r);let g=!0,m=0,b=null;b=[],b.push(n);for(let _=1;_<r;_++)b.push(n+_/r*(i-n));for(b.push(i);g;){for(let k=0;k<r;k++)p[k]=0;for(let k=0;k<c;k++){const M=o[k];let L=Number.MAX_VALUE,D;for(let P=0;P<r;P++){const $=VL(b[P]-M);$<L&&(L=$,D=P),p[D]++,h[k]=D}}const _=new Array(r);for(let k=0;k<r;k++)_[k]=null;for(let k=0;k<c;k++)u=h[k],_[u]===null?_[u]=o[k]:_[u]+=o[k];for(let k=0;k<r;k++)_[k]*=1/p[k];g=!1;for(let k=0;k<r;k++)if(_[k]!==b[k]){g=!0;break}b=_,m++,m>200&&(g=!1)}const x={};for(let _=0;_<r;_++)x[_]=[];for(let _=0;_<c;_++)u=h[_],x[u].push(o[_]);let C=[];for(let _=0;_<r;_++)C.push(x[_][0]),C.push(x[_][x[_].length-1]);C=C.sort((_,k)=>_-k),s.push(C[0]);for(let _=1;_<C.length;_+=2){const k=C[_];!isNaN(k)&&s.indexOf(k)===-1&&s.push(k)}}return s}const BL=(e,t)=>{e=new $e(e),t=new $e(t);const r=e.luminance(),n=t.luminance();return r>n?(r+.05)/(n+.05):(n+.05)/(r+.05)};/**
 * @license
 *
 * The APCA contrast prediction algorithm is based of the formulas published
 * in the APCA-1.0.98G specification by Myndex. The specification is available at:
 * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
 *
 * Note that the APCA implementation is still beta, so please update to
 * future versions of chroma.js when they become available.
 *
 * You can read more about the APCA Readability Criterion at
 * https://readtech.org/ARC/
 */const Zm=.027,$L=5e-4,WL=.1,Km=1.14,up=.022,qm=1.414,HL=(e,t)=>{e=new $e(e),t=new $e(t),e.alpha()<1&&(e=Kd(t,e,e.alpha(),"rgb"));const r=Qm(...e.rgb()),n=Qm(...t.rgb()),i=r>=up?r:r+Math.pow(up-r,qm),o=n>=up?n:n+Math.pow(up-n,qm),s=Math.pow(o,.56)-Math.pow(i,.57),u=Math.pow(o,.65)-Math.pow(i,.62),c=Math.abs(o-i)<$L?0:i<o?s*Km:u*Km;return(Math.abs(c)<WL?0:c>0?c-Zm:c+Zm)*100};function Qm(e,t,r){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(r/255,2.4)}const{sqrt:Ts,pow:pn,min:UL,max:jL,atan2:Gm,abs:Jm,cos:dp,sin:ey,exp:XL,PI:ty}=Math;function YL(e,t,r=1,n=1,i=1){var o=function(H){return 360*H/(2*ty)},s=function(H){return 2*ty*H/360};e=new $e(e),t=new $e(t);const[u,c,h]=Array.from(e.lab()),[p,g,m]=Array.from(t.lab()),b=(u+p)/2,x=Ts(pn(c,2)+pn(h,2)),C=Ts(pn(g,2)+pn(m,2)),_=(x+C)/2,k=.5*(1-Ts(pn(_,7)/(pn(_,7)+pn(25,7)))),M=c*(1+k),L=g*(1+k),D=Ts(pn(M,2)+pn(h,2)),P=Ts(pn(L,2)+pn(m,2)),$=(D+P)/2,A=o(Gm(h,M)),N=o(Gm(m,L)),z=A>=0?A:A+360,B=N>=0?N:N+360,Q=Jm(z-B)>180?(z+B+360)/2:(z+B)/2,ne=1-.17*dp(s(Q-30))+.24*dp(s(2*Q))+.32*dp(s(3*Q+6))-.2*dp(s(4*Q-63));let Z=B-z;Z=Jm(Z)<=180?Z:B<=z?Z+360:Z-360,Z=2*Ts(D*P)*ey(s(Z)/2);const J=p-u,ue=P-D,le=1+.015*pn(b-50,2)/Ts(20+pn(b-50,2)),ae=1+.045*$,te=1+.015*$*ne,ve=30*XL(-pn((Q-275)/25,2)),pe=-(2*Ts(pn($,7)/(pn($,7)+pn(25,7))))*ey(2*s(ve)),j=Ts(pn(J/(r*le),2)+pn(ue/(n*ae),2)+pn(Z/(i*te),2)+pe*(ue/(n*ae))*(Z/(i*te)));return jL(0,UL(100,j))}function ZL(e,t,r="lab"){e=new $e(e),t=new $e(t);const n=e.get(r),i=t.get(r);let o=0;for(let s in n){const u=(n[s]||0)-(i[s]||0);o+=u*u}return Math.sqrt(o)}const KL=(...e)=>{try{return new $e(...e),!0}catch{return!1}},qL={cool(){return $p([Xt.hsl(180,1,.9),Xt.hsl(250,.7,.4)])},hot(){return $p(["#000","#f00","#ff0","#fff"]).mode("rgb")}},jg={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},f5=Object.keys(jg),ry=new Map(f5.map(e=>[e.toLowerCase(),e])),QL=typeof Proxy=="function"?new Proxy(jg,{get(e,t){const r=t.toLowerCase();if(ry.has(r))return e[ry.get(r)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(f5)}}):jg,GL=(...e)=>{e=Ft(e,"cmyk");const[t,r,n,i]=e,o=e.length>4?e[4]:1;return i===1?[0,0,0,o]:[t>=1?0:255*(1-t)*(1-i),r>=1?0:255*(1-r)*(1-i),n>=1?0:255*(1-n)*(1-i),o]},{max:ny}=Math,JL=(...e)=>{let[t,r,n]=Ft(e,"rgb");t=t/255,r=r/255,n=n/255;const i=1-ny(t,ny(r,n)),o=i<1?1/(1-i):0,s=(1-t-i)*o,u=(1-r-i)*o,c=(1-n-i)*o;return[s,u,c,i]};$e.prototype.cmyk=function(){return JL(this._rgb)};const eP=(...e)=>new $e(...e,"cmyk");Object.assign(Xt,{cmyk:eP});Lt.format.cmyk=GL;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Ft(e,"cmyk"),Ht(e)==="array"&&e.length===4)return"cmyk"}});const tP=(...e)=>{const t=Ft(e,"hsla");let r=Gd(e)||"lsa";return t[0]=Ro(t[0]||0)+"deg",t[1]=Ro(t[1]*100)+"%",t[2]=Ro(t[2]*100)+"%",r==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),r="hsla"):t.length=3,`${r.substr(0,3)}(${t.join(" ")})`},rP=(...e)=>{const t=Ft(e,"lab");let r=Gd(e)||"lab";return t[0]=Ro(t[0])+"%",t[1]=Ro(t[1]),t[2]=Ro(t[2]),r==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},nP=(...e)=>{const t=Ft(e,"lch");let r=Gd(e)||"lab";return t[0]=Ro(t[0])+"%",t[1]=Ro(t[1]),t[2]=isNaN(t[2])?"none":Ro(t[2])+"deg",r==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},iP=(...e)=>{const t=Ft(e,"lab");return t[0]=Ro(t[0]*100)+"%",t[1]=Hg(t[1]),t[2]=Hg(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},g5=(...e)=>{const[t,r,n,...i]=Ft(e,"rgb"),[o,s,u]=bv(t,r,n),[c,h,p]=l5(o,s,u);return[c,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]},oP=(...e)=>{const t=Ft(e,"lch");return t[0]=Ro(t[0]*100)+"%",t[1]=Hg(t[1]),t[2]=isNaN(t[2])?"none":Ro(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:yg}=Math,aP=(...e)=>{const t=Ft(e,"rgba");let r=Gd(e)||"rgb";if(r.substr(0,3)==="hsl")return tP(u5(t),r);if(r.substr(0,3)==="lab"){const n=W0();Fs("d50");const i=rP(gv(t),r);return Fs(n),i}if(r.substr(0,3)==="lch"){const n=W0();Fs("d50");const i=nP(mv(t),r);return Fs(n),i}return r.substr(0,5)==="oklab"?iP(bv(t)):r.substr(0,5)==="oklch"?oP(g5(t)):(t[0]=yg(t[0]),t[1]=yg(t[1]),t[2]=yg(t[2]),(r==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),r="rgba"),`${r.substr(0,3)}(${t.slice(0,r==="rgb"?3:4).join(" ")})`)},v5=(...e)=>{e=Ft(e,"lch");const[t,r,n,...i]=e,[o,s,u]=s5(t,r,n),[c,h,p]=yv(o,s,u);return[c,h,p,...i.length>0&&i[0]<1?[i[0]]:[]]},Ns=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,la=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Wp=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,Oo=/\s*/.source,eh=/\s+/.source,xv=/\s*,\s*/.source,ef=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,th=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,m5=new RegExp("^rgba?\\("+Oo+[Ns,Ns,Ns].join(eh)+th+"\\)$"),y5=new RegExp("^rgb\\("+Oo+[Ns,Ns,Ns].join(xv)+Oo+"\\)$"),b5=new RegExp("^rgba\\("+Oo+[Ns,Ns,Ns,la].join(xv)+Oo+"\\)$"),x5=new RegExp("^hsla?\\("+Oo+[ef,Wp,Wp].join(eh)+th+"\\)$"),w5=new RegExp("^hsl?\\("+Oo+[ef,Wp,Wp].join(xv)+Oo+"\\)$"),C5=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,_5=new RegExp("^lab\\("+Oo+[la,la,la].join(eh)+th+"\\)$"),S5=new RegExp("^lch\\("+Oo+[la,la,ef].join(eh)+th+"\\)$"),k5=new RegExp("^oklab\\("+Oo+[la,la,la].join(eh)+th+"\\)$"),M5=new RegExp("^oklch\\("+Oo+[la,la,ef].join(eh)+th+"\\)$"),{round:E5}=Math,Td=e=>e.map((t,r)=>r<=2?Zc(E5(t),0,255):t),fn=(e,t=0,r=100,n=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,n?e=t+(e+1)*.5*(r-t):e=t+e*(r-t)),+e),Mi=(e,t)=>e==="none"?t:e,wv=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(Lt.format.named)try{return Lt.format.named(e)}catch{}if((t=e.match(m5))||(t=e.match(y5))){let r=t.slice(1,4);for(let i=0;i<3;i++)r[i]=+fn(Mi(r[i],0),0,255);r=Td(r);const n=t[4]!==void 0?+fn(t[4],0,1):1;return r[3]=n,r}if(t=e.match(b5)){const r=t.slice(1,5);for(let n=0;n<4;n++)r[n]=+fn(r[n],0,255);return r}if((t=e.match(x5))||(t=e.match(w5))){const r=t.slice(1,4);r[0]=+Mi(r[0].replace("deg",""),0),r[1]=+fn(Mi(r[1],0),0,100)*.01,r[2]=+fn(Mi(r[2],0),0,100)*.01;const n=Td(Ug(r)),i=t[4]!==void 0?+fn(t[4],0,1):1;return n[3]=i,n}if(t=e.match(C5)){const r=t.slice(1,4);r[1]*=.01,r[2]*=.01;const n=Ug(r);for(let i=0;i<3;i++)n[i]=E5(n[i]);return n[3]=+t[4],n}if(t=e.match(_5)){const r=t.slice(1,4);r[0]=fn(Mi(r[0],0),0,100),r[1]=fn(Mi(r[1],0),-125,125,!0),r[2]=fn(Mi(r[2],0),-125,125,!0);const n=W0();Fs("d50");const i=Td(fv(r));Fs(n);const o=t[4]!==void 0?+fn(t[4],0,1):1;return i[3]=o,i}if(t=e.match(S5)){const r=t.slice(1,4);r[0]=fn(r[0],0,100),r[1]=fn(Mi(r[1],0),0,150,!1),r[2]=+Mi(r[2].replace("deg",""),0);const n=W0();Fs("d50");const i=Td(vv(r));Fs(n);const o=t[4]!==void 0?+fn(t[4],0,1):1;return i[3]=o,i}if(t=e.match(k5)){const r=t.slice(1,4);r[0]=fn(Mi(r[0],0),0,1),r[1]=fn(Mi(r[1],0),-.4,.4,!0),r[2]=fn(Mi(r[2],0),-.4,.4,!0);const n=Td(yv(r)),i=t[4]!==void 0?+fn(t[4],0,1):1;return n[3]=i,n}if(t=e.match(M5)){const r=t.slice(1,4);r[0]=fn(Mi(r[0],0),0,1),r[1]=fn(Mi(r[1],0),0,.4,!1),r[2]=+Mi(r[2].replace("deg",""),0);const n=Td(v5(r)),i=t[4]!==void 0?+fn(t[4],0,1):1;return n[3]=i,n}};wv.test=e=>m5.test(e)||x5.test(e)||_5.test(e)||S5.test(e)||k5.test(e)||M5.test(e)||y5.test(e)||b5.test(e)||w5.test(e)||C5.test(e)||e==="transparent";$e.prototype.css=function(e){return aP(this._rgb,e)};const sP=(...e)=>new $e(...e,"css");Xt.css=sP;Lt.format.css=wv;Lt.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&Ht(e)==="string"&&wv.test(e))return"css"}});Lt.format.gl=(...e)=>{const t=Ft(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};const lP=(...e)=>new $e(...e,"gl");Xt.gl=lP;$e.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};$e.prototype.hex=function(e){return i5(this._rgb,e)};const cP=(...e)=>new $e(...e,"hex");Xt.hex=cP;Lt.format.hex=n5;Lt.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&Ht(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:hp}=Math,T5=e=>{const t=e/100;let r,n,i;return t<66?(r=255,n=t<6?0:-155.25485562709179-.44596950469579133*(n=t-2)+104.49216199393888*hp(n),i=t<20?0:-254.76935184120902+.8274096064007395*(i=t-10)+115.67994401066147*hp(i)):(r=351.97690566805693+.114206453784165*(r=t-55)-40.25366309332127*hp(r),n=325.4494125711974+.07943456536662342*(n=t-50)-28.0852963507957*hp(n),i=255),[r,n,i,1]},{round:uP}=Math,dP=(...e)=>{const t=Ft(e,"rgb"),r=t[0],n=t[2];let i=1e3,o=4e4;const s=.4;let u;for(;o-i>s;){u=(o+i)*.5;const c=T5(u);c[2]/c[0]>=n/r?o=u:i=u}return uP(u)};$e.prototype.temp=$e.prototype.kelvin=$e.prototype.temperature=function(){return dP(this._rgb)};const bg=(...e)=>new $e(...e,"temp");Object.assign(Xt,{temp:bg,kelvin:bg,temperature:bg});Lt.format.temp=Lt.format.kelvin=Lt.format.temperature=T5;$e.prototype.oklch=function(){return g5(this._rgb)};const hP=(...e)=>new $e(...e,"oklch");Object.assign(Xt,{oklch:hP});Lt.format.oklch=v5;Lt.autodetect.push({p:2,test:(...e)=>{if(e=Ft(e,"oklch"),Ht(e)==="array"&&e.length===3)return"oklch"}});Object.assign(Xt,{analyze:h5,average:pL,bezier:bL,blend:ua,brewer:QL,Color:$e,colors:Zd,contrast:BL,contrastAPCA:HL,cubehelix:AL,deltaE:YL,distance:ZL,input:Lt,interpolate:Kd,limits:p5,mix:Kd,random:OL,scale:$p,scales:qL,valid:KL});const pP=[["rgb(255, 255, 255)","rgb(178, 181, 190)","rgb(149, 152, 161)","rgb(120, 123, 134)","rgb(93, 96, 107)","rgb(42, 46, 57)","rgb(0, 0, 0)"],["rgb(242, 54, 69)","rgb(252, 203, 205)","rgb(250, 161, 164)","rgb(247, 124, 128)","rgb(247, 82, 95)","rgb(178, 40, 51)","rgb(128, 25, 34)"],["rgb(255, 152, 0)","rgb(255, 224, 178)","rgb(255, 204, 128)","rgb(255, 183, 77)","rgb(255, 167, 38)","rgb(245, 124, 0)","rgb(230, 81, 0)"],["rgb(255, 235, 59)","rgb(255, 249, 196)","rgb(255, 245, 157)","rgb(255, 241, 118)","rgb(255, 238, 88)","rgb(251, 192, 45)","rgb(245, 127, 23)"],["rgb(76, 175, 80)","rgb(200, 230, 201)","rgb(165, 214, 167)","rgb(129, 199, 132)","rgb(102, 187, 106)","rgb(56, 142, 60)","rgb(27, 94, 32)"],["rgb(8, 153, 129)","rgb(172, 229, 220)","rgb(112, 204, 189)","rgb(66, 189, 168)","rgb(34, 171, 148)","rgb(5, 102, 86)","rgb(0, 51, 42)"],["rgb(0, 188, 212)","rgb(178, 235, 242)","rgb(128, 222, 234)","rgb(77, 208, 225)","rgb(38, 198, 218)","rgb(0, 151, 167)","rgb(0, 96, 100)"],["rgb(41, 98, 255)","rgb(187, 217, 251)","rgb(144, 191, 249)","rgb(91, 156, 246)","rgb(49, 121, 245)","rgb(24, 72, 204)","rgb(12, 50, 153)"],["rgb(103, 58, 183)","rgb(209, 196, 233)","rgb(179, 157, 219)","rgb(149, 117, 205)","rgb(126, 87, 194)","rgb(81, 45, 168)","rgb(49, 27, 146)"],["rgb(156, 39, 176)","rgb(225, 190, 231)","rgb(206, 147, 216)","rgb(186, 104, 200)","rgb(171, 71, 188)","rgb(123, 31, 162)","rgb(74, 20, 140)"],["rgb(233, 30, 99)","rgb(248, 187, 208)","rgb(244, 143, 177)","rgb(240, 98, 146)","rgb(236, 64, 122)","rgb(194, 24, 91)","rgb(136, 14, 79)"],["#00698b","#fb7b50"]];var fP=K("<div class=split_line>"),gP=K("<div class=range_div><input class=range type=range min=1 max=100><p>%"),vP=K("<div tabindex=0><div class=selector-container><i class=arrow></i></div><div class=drop-down-container><div class=palette-content><div class=split_line></div><div class=submit><span class=cancel>Cancel</span><span>Ok"),mP=K("<div class=each_line>"),yP=K("<div>");const Cv=e=>{const t=C=>{if(!C)return 100;try{const _=String(C);return _.includes("rgba")?Math.round(Xt(_).alpha()*100):100}catch{return 100}},[r,n]=Nl({ui:{open:!1,rangeFocused:!1,isDragging:!1},color:{opacity:t(e.value),selectedColor:e.value,finalColor:e.value}}),i=Bt(()=>r.ui.rangeFocused||r.ui.isDragging),o=C=>{const _=C.currentTarget,k=C.relatedTarget;return!i()&&_&&!_.contains(k)},s=()=>{n("ui","open",!1)},u=()=>{var C;n("color",{selectedColor:e.value,finalColor:e.value,opacity:t(e.value)}),(C=e.onChange)==null||C.call(e,e.value),s()},c=(C,_)=>{try{const k=_/100;return Xt(C).alpha(k).css()}catch(k){return console.warn("Error applying opacity to color:",k),C}},h=()=>{var C;const _=c(r.color.selectedColor,r.color.opacity);n("color","finalColor",_),(e.reactiveChange??!0)&&((C=e.onChange)==null||C.call(e,_))},p=C=>{const _=parseInt(C.target.value);n("color","opacity",_),h()},g=()=>{n("ui",{rangeFocused:!0,isDragging:!0})},m=()=>{n("ui","isDragging",!1),setTimeout(()=>{n("ui","rangeFocused",!1)},100)},b=C=>{n("color","selectedColor",C),h()},x=()=>{r.ui.isDragging&&(n("ui","isDragging",!1),setTimeout(()=>{n("ui","rangeFocused",!1)},100))};return Ei(()=>{document.addEventListener("mouseup",x)}),Nr(()=>{document.removeEventListener("mouseup",x)}),(()=>{var C=vP(),_=C.firstChild,k=_.nextSibling,M=k.firstChild,L=M.firstChild,D=L.nextSibling,P=D.firstChild,$=P.nextSibling;return C.addEventListener("blur",A=>{o(A)&&s()}),_.$$click=A=>{A.stopPropagation(),n("ui","open",!r.ui.open)},k.$$click=A=>{A.target===A.currentTarget&&s()},M.$$click=A=>{A.stopPropagation()},F(M,()=>pP.map(A=>(()=>{var N=mP();return F(N,()=>A.map(z=>(()=>{var B=yP();return B.$$click=Q=>{Q.stopPropagation(),b(z)},Ae(Q=>{var ne=`each_color ${z==r.color.selectedColor?"selected":""}`,Z=`background-color: ${z}`;return ne!==Q.e&&Ge(B,Q.e=ne),Q.t=mn(B,Z,Q.t),Q},{e:void 0,t:void 0}),B})())),N})()),L),F(M,Y(Pe,{get when(){return e.opacityEnabled},get children(){return[fP(),(()=>{var A=gP(),N=A.firstChild,z=N.nextSibling,B=z.firstChild;return N.addEventListener("mouseleave",m),N.$$mouseup=m,N.$$mousedown=g,N.addEventListener("blur",m),N.addEventListener("focus",g),N.$$input=p,F(z,()=>r.color.opacity,B),Ae(Q=>mn(N,`background: linear-gradient(to right, transparent 0%, ${r.color.selectedColor} 100%); border: 1px solid ${r.color.selectedColor}`,Q)),Ae(()=>N.value=r.color.opacity),A})()]}}),L),P.$$click=u,$.$$click=()=>{var A;e.reactiveChange===!1&&((A=e.onChange)==null||A.call(e,r.color.finalColor)),s()},Ae(A=>{var N=`width: 120px; background-color: ${r.color.finalColor}; border-radius: 10px`,z=`chartspire-ui-color ${e.class??""} ${r.ui.open?"chartspire-ui-color-palette-show":""}`;return A.e=mn(C,N,A.e),z!==A.t&&Ge(C,A.t=z),A},{e:void 0,t:void 0}),C})()};Dt(["click","input","mousedown","mouseup"]);class I5{constructor(t){be(this,"trackedSymbols",new Map),be(this,"priceCallbacks",new Set),be(this,"currentPrices",new Map),be(this,"updateIntervals",new Map),be(this,"config"),this.config={updateInterval:3e4,enableLogging:!0,...t},this.log(`[PriceTrackingService] Initialized with ${this.config.updateInterval}ms update interval`)}log(t,...r){this.config.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.config.enableLogging&&console.warn(t,...r)}getDataFeed(){try{return Wr.getInstance().getDataFeed()}catch(t){return this.logWarn("[PriceTrackingService] Error getting data feed:",t),null}}trackSymbol(t){if(!this.getDataFeed()){this.logWarn("[PriceTrackingService] No DataFeed available, cannot track symbol:",t.symbol);return}const r=t.symbol;this.trackedSymbols.has(r)||(this.trackedSymbols.set(r,t),this.startPriceFetching(t),this.log(`[PriceTrackingService] Started tracking price for ${r} on ${t.exchange||"default"} exchange (${this.config.updateInterval}ms interval)`))}async startPriceFetching(t){const r=t.symbol;await this.fetchPrice(t);const n=setInterval(async()=>{await this.fetchPrice(t)},this.config.updateInterval);this.updateIntervals.set(r,n)}async fetchPrice(t){var r;const n=this.getDataFeed();if(!n){this.logWarn(`[PriceTrackingService] No DataFeed available for ${t.symbol} (${t.type})`);return}const i=t.symbol;try{this.logWarn(`[PriceTrackingService] Fetching price for ${i} on ${t.exchange||"default"} exchange...`);const o=await((r=n.getPrice)==null?void 0:r.call(n,t,t.type));if(o!=null){this.currentPrices.set(i,o);const s={symbol:i,price:o,timestamp:Date.now()};this.log(`[PriceTrackingService] Price update for ${i} on ${t.exchange||"default"}: $${o.toFixed(2)}`),this.priceCallbacks.forEach(u=>{try{u(s)}catch(c){console.error(`[PriceTrackingService] Error in price update callback for ${i}:`,c)}})}else this.logWarn(`[PriceTrackingService] No price data received for ${i} on ${t.exchange||"default"}`)}catch(o){console.error(`[PriceTrackingService] Error fetching price for ${i} on ${t.exchange||"default"}:`,o)}}untrackSymbol(t){if(!this.trackedSymbols.get(t))return;const r=this.updateIntervals.get(t);r&&(clearInterval(r),this.updateIntervals.delete(t)),this.trackedSymbols.delete(t),this.currentPrices.delete(t),this.log(`[PriceTrackingService] Stopped tracking price for ${t}`)}getCurrentPrice(t){return this.currentPrices.get(t)??null}getTrackedSymbols(){return Array.from(this.trackedSymbols.keys())}addPriceCallback(t){this.priceCallbacks.add(t)}removePriceCallback(t){this.priceCallbacks.delete(t)}updateTrackedSymbols(t,r){const n=new Set(this.trackedSymbols.keys()),i=new Set(t);for(const o of n)i.has(o)||this.untrackSymbol(o);for(const o of t)if(!n.has(o)){const s=r(o);s&&this.trackSymbol(s)}}cleanup(){for(const[t,r]of this.updateIntervals)clearInterval(r),this.log(`[PriceTrackingService] Cleared interval for ${t}`);this.updateIntervals.clear(),this.trackedSymbols.clear(),this.currentPrices.clear(),this.priceCallbacks.clear(),this.log("[PriceTrackingService] Cleanup completed")}isLoggingEnabled(){return this.config.enableLogging}updateConfig(t){const r=this.config.updateInterval;if(this.config={...this.config,...t},t.updateInterval&&t.updateInterval!==r){this.log(`[PriceTrackingService] Update interval changed from ${r}ms to ${this.config.updateInterval}ms`);const n=Array.from(this.trackedSymbols.values());this.cleanup(),n.forEach(i=>{this.trackSymbol(i)})}}getCurrentConfig(){return{...this.config}}}var gn=(e=>(e.MARKET="MARKET",e.LIMIT="LIMIT",e))(gn||{}),Gn=(e=>(e.PENDING="PENDING",e.FILLED="FILLED",e.CANCELLED="CANCELLED",e))(Gn||{});class _v{constructor(){be(this,"storageKey","chartspire-paper-trading")}save(t){try{localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(r){console.error("Error saving paper trading data to local storage:",r)}}load(){try{const t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):null}catch(t){return console.error("Error loading paper trading data from local storage:",t),null}}}class bP{constructor(t,r,n=!0){be(this,"storageProvider"),be(this,"tickerInfoCache"),be(this,"isInitialized",!1),be(this,"enableLogging"),this.storageProvider=t??new _v,this.tickerInfoCache=r??new Map,this.enableLogging=n}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}isExternalStorageProvider(t){return"loadAsync"in t}loadData(){const t=this.storageProvider.load();return t?(this.migrateDataIfNeeded(t),this.isInitialized=!0,t):(this.isInitialized=!0,{orders:[],positions:[],trades:[],balance:1e4})}async initializeAsync(){if(this.isExternalStorageProvider(this.storageProvider)){const t=await this.storageProvider.loadAsync();return t?(this.migrateDataIfNeeded(t),this.log("[DataStorageManager] Loaded data from external storage"),this.isInitialized=!0,t):(this.log("[DataStorageManager] No external data found, using default data"),this.isInitialized=!0,this.getDefaultData())}else return this.isInitialized=!0,this.loadData()}getDefaultData(){return{orders:[],positions:[],trades:[],balance:1e4}}saveData(t){if(!this.isInitialized){this.logWarn("[DataStorageManager] Attempted to save data before initialization completed, skipping...");return}this.log("[DataStorageManager] Saving data:",{ordersCount:t.orders.length,positionsCount:t.positions.length,tradesCount:t.trades.length,balance:t.balance}),this.storageProvider.save(t)}migrateDataIfNeeded(t){t.orders.forEach(i=>{if(!i.symbolType){const o=this.tickerInfoCache.get(i.symbol);o!=null&&o.type?(i.symbolType=o.type.toString(),this.log(`[DataStorageManager] Migration: Set ticker type for order ${i.symbol} from cache: ${i.symbolType}`)):(i.symbolType="Unknown",this.logWarn(`[DataStorageManager] Migration: Could not determine ticker type for order ${i.symbol}, set to 'Unknown'. Price tracking may not work correctly.`))}}),t.positions.forEach(i=>{if(!i.symbolType){const o=this.tickerInfoCache.get(i.symbol);o!=null&&o.type?(i.symbolType=o.type.toString(),this.log(`[DataStorageManager] Migration: Set ticker type for position ${i.symbol} from cache: ${i.symbolType}`)):(i.symbolType="Unknown",this.logWarn(`[DataStorageManager] Migration: Could not determine ticker type for position ${i.symbol}, set to 'Unknown'. Price tracking may not work correctly.`))}});const r=t.orders.length;t.orders=t.orders.filter(i=>i.status===Gn.PENDING);const n=r-t.orders.length;n>0&&this.log(`[DataStorageManager] Migration: Removed ${n} filled/cancelled orders from storage to keep it clean`)}isStorageInitialized(){return this.isInitialized}isUsingExternalStorage(){return this.isExternalStorageProvider(this.storageProvider)}setTickerInfoCache(t){this.tickerInfoCache=t}setLoggingEnabled(t){this.enableLogging=t}}class xP{constructor(t=!0){be(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}validateOrder(t,r,n){const{symbol:i,side:o,quantity:s,type:u,price:c,currentPrice:h,symbolType:p}=t;if(s<=0)throw new Error("Quantity must be greater than 0");if(u===gn.LIMIT&&c<=0)throw new Error("Limit price must be greater than 0");if(!p||p.trim()==="")throw new Error("Ticker type is required when placing orders");const g=(u===gn.MARKET?h:c)*s;if(o==="buy"&&g>r)throw new Error("Insufficient balance");if(o==="sell"){const m=n.find(x=>x.symbol===i&&x.side==="buy"),b=m?m.quantity:0;if(b<s)throw new Error(`Insufficient shares to sell. You own ${b} ${i} but trying to sell ${s}`)}}createOrder(t){const{symbol:r,side:n,quantity:i,type:o,price:s,currentPrice:u,symbolType:c,exchange:h}=t,p=o===gn.MARKET?u:s;return{id:this.generateId(),symbol:r,side:n,quantity:i,type:o,price:p,status:Gn.PENDING,timestamp:Date.now(),symbolType:c.trim(),exchange:h.trim()}}shouldExecuteLimitOrder(t,r){return t.type!==gn.LIMIT?!0:(this.log("[OrderManager] Checking limit order execution:",{orderId:t.id,symbol:t.symbol,side:t.side,limitPrice:t.price,marketPrice:r,shouldExecute:t.side==="buy"?r<=t.price:r>=t.price}),t.side==="buy"&&r>t.price?(this.log(`[OrderManager] Buy limit order NOT executed: market price ${r} > limit price ${t.price}`),!1):t.side==="sell"&&r<t.price?(this.log(`[OrderManager] Sell limit order NOT executed: market price ${r} < limit price ${t.price}`),!1):(this.log(`[OrderManager] Limit order EXECUTING: ${t.side} ${t.symbol} at market price ${r} (limit was ${t.price})`),!0))}fillOrder(t){t.status=Gn.FILLED,t.filledAt=Date.now(),this.log(`[OrderManager] Order ${t.id} filled and will be removed from storage to keep storage clean`)}cancelOrder(t){if(t.status!==Gn.PENDING)throw new Error("Order cannot be cancelled");t.status=Gn.CANCELLED,this.log(`[OrderManager] Order ${t.id} cancelled and will be removed from storage to keep storage clean`)}checkLimitOrdersForExecution(t,r,n){const i=t.filter(o=>o.symbol===r&&o.status===Gn.PENDING&&o.type===gn.LIMIT);return i.length>0&&this.log(`[OrderManager] Checking ${i.length} pending limit orders for ${r} at price $${n.toFixed(2)}`),i.filter(o=>this.shouldExecuteLimitOrder(o,n))}getPendingOrders(t){return t.filter(r=>r.status===Gn.PENDING)}getPendingLimitOrdersForSymbol(t,r){return t.filter(n=>n.symbol===r&&n.status===Gn.PENDING&&n.type===gn.LIMIT)}hasPendingLimitOrders(t){return t.some(r=>r.status===Gn.PENDING&&r.type===gn.LIMIT)}calculatePendingBuyOrdersValue(t){return t.filter(r=>r.status===Gn.PENDING&&r.side==="buy").reduce((r,n)=>r+n.price*n.quantity,0)}getPendingOrdersInfo(t){const r=t.filter(o=>o.status===Gn.PENDING&&o.side==="buy"),n=t.filter(o=>o.status===Gn.PENDING&&o.side==="sell"),i=this.calculatePendingBuyOrdersValue(t);return{pendingBuyOrders:r,pendingSellOrders:n,totalBuyOrdersValue:i}}setLoggingEnabled(t){this.enableLogging=t}}class wP{constructor(t=!0){be(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}updatePosition(t,r,n){let i=0;if(r.side==="buy"){const o=t.find(s=>s.symbol===r.symbol&&s.side==="buy");if(o){const s=o.quantity+r.quantity,u=o.averagePrice*o.quantity+n*r.quantity;o.quantity=s,o.averagePrice=u/s,o.symbolType=r.symbolType,o.exchange=r.exchange}else{const s={id:this.generateId(),symbol:r.symbol,side:"buy",quantity:r.quantity,averagePrice:n,unrealizedPnL:0,realizedPnL:0,timestamp:Date.now(),symbolType:r.symbolType,exchange:r.exchange};t.push(s)}}else{const o=t.find(s=>s.symbol===r.symbol&&s.side==="buy");if(o)if(r.quantity>=o.quantity){const s=r.quantity-o.quantity,u=(n-o.averagePrice)*o.quantity;i+=u;const c=t.findIndex(h=>h.id===o.id);if(t.splice(c,1),s>0){const h={id:this.generateId(),symbol:r.symbol,side:"sell",quantity:s,averagePrice:n,unrealizedPnL:0,realizedPnL:0,timestamp:Date.now(),symbolType:r.symbolType,exchange:r.exchange};t.push(h)}}else{const s=r.quantity,u=o.quantity-s,c=(n-o.averagePrice)*s;i+=c,o.quantity=u}else{const s=t.find(u=>u.symbol===r.symbol&&u.side==="sell");if(s){const u=s.quantity+r.quantity,c=s.averagePrice*s.quantity+n*r.quantity;s.quantity=u,s.averagePrice=c/u,s.symbolType=r.symbolType,s.exchange=r.exchange}else{const u={id:this.generateId(),symbol:r.symbol,side:"sell",quantity:r.quantity,averagePrice:n,unrealizedPnL:0,realizedPnL:0,timestamp:Date.now(),symbolType:r.symbolType,exchange:r.exchange};t.push(u)}}}return{updatedBalance:i}}updatePositionPnL(t,r,n){t.filter(i=>i.symbol===r).forEach(i=>{i.side==="buy"?i.unrealizedPnL=(n-i.averagePrice)*i.quantity:i.unrealizedPnL=(i.averagePrice-n)*i.quantity})}closePosition(t,r,n){const i=t.findIndex(h=>h.id===r);if(i===-1)throw new Error("Position not found");const o=t[i];if(!n||n<=0)throw new Error(`Invalid current price: ${n}. Cannot close position.`);this.log("[PositionManager] Closing position"),this.log("[PositionManager] Position details:",{symbol:o.symbol,side:o.side,quantity:o.quantity,averagePrice:o.averagePrice,currentPrice:n});let s=0;o.side==="buy"?s=(n-o.averagePrice)*o.quantity:s=(o.averagePrice-n)*o.quantity,this.log(`[PositionManager] Calculated realized P&L: $${s.toFixed(2)}`);const u=n*o.quantity;this.log(`[PositionManager] Total proceeds from sale: $${u.toFixed(2)}`),this.log(`[PositionManager] Original investment: $${(o.averagePrice*o.quantity).toFixed(2)}`),this.log(`[PositionManager] Net P&L from this position: $${s.toFixed(2)}`);const c={id:this.generateId(),orderId:`close-${o.id}`,symbol:o.symbol,side:o.side==="buy"?"sell":"buy",quantity:o.quantity,price:n,timestamp:Date.now()};return this.log(`[PositionManager] Closed position ${o.symbol} ${o.side} ${o.quantity} at $${n.toFixed(2)}, realized P&L: $${s.toFixed(2)}`),t.splice(i,1),{balanceChange:u,trade:c}}getPositionsForSymbol(t,r){return t.filter(n=>n.symbol===r)}getSymbolsWithPositions(t){const r=new Set;return t.forEach(n=>r.add(n.symbol)),Array.from(r)}hasOpenPositions(t){return t.length>0}getTotalUnrealizedPnL(t){return t.reduce((r,n)=>r+n.unrealizedPnL,0)}getTotalRealizedPnL(t){return t.reduce((r,n)=>r+n.realizedPnL,0)}setLoggingEnabled(t){this.enableLogging=t}}class CP{constructor(t=!0){be(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}calculatePendingBuyOrdersValue(t){return t.filter(r=>r.status==="PENDING"&&r.side==="buy").reduce((r,n)=>r+n.price*n.quantity,0)}addCash(t,r){if(r<=0)throw new Error("Amount must be greater than 0");const n=t+r;return this.log(`[BalanceManager] Added $${r.toFixed(2)} to account. New balance: $${n.toFixed(2)}`),n}removeCash(t,r,n){if(r<=0)throw new Error("Amount must be greater than 0");if(r>t)throw new Error(`Insufficient balance. Current balance: $${t.toFixed(2)}, trying to remove: $${r.toFixed(2)}`);const i=this.calculatePendingBuyOrdersValue(n),o=t-r;if(o<i)throw new Error(`Cannot remove $${r.toFixed(2)}. Pending buy orders require $${i.toFixed(2)} but new balance would be $${o.toFixed(2)}. Cancel some orders or remove less cash.`);return this.log(`[BalanceManager] Removed $${r.toFixed(2)} from account. New balance: $${o.toFixed(2)}`),o}setBalance(t,r){if(t<0)throw new Error("Balance cannot be negative");const n=this.calculatePendingBuyOrdersValue(r);if(t<n)throw new Error(`Cannot set balance to $${t.toFixed(2)}. Pending buy orders require $${n.toFixed(2)}. Cancel some orders first.`);return this.log(`[BalanceManager] Set balance to $${t.toFixed(2)}`),t}getPendingOrdersInfo(t,r){const n=r.filter(c=>c.status==="PENDING"&&c.side==="buy"),i=r.filter(c=>c.status==="PENDING"&&c.side==="sell"),o=this.calculatePendingBuyOrdersValue(r),s=t-o,u=Math.max(0,s);return{pendingBuyOrders:n,pendingSellOrders:i,totalBuyOrdersValue:o,availableCashAfterOrders:s,maxCashRemoval:u}}updateBalanceForOrderExecution(t,r,n){return r==="buy"?t-n:t+n}validateBalanceForOrder(t,r,n){return r==="buy"?t>=n:!0}setLoggingEnabled(t){this.enableLogging=t}}class _P{constructor(t=1e3,r=!0){be(this,"maxTrades"),be(this,"enableLogging"),this.maxTrades=Math.max(1,t),this.enableLogging=r}log(t,...r){this.enableLogging&&console.log(t,...r)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}createTrade(t,r,n,i,o){return{id:this.generateId(),orderId:t,symbol:r,side:n,quantity:i,price:o,timestamp:Date.now()}}addTrade(t,r){t.push(r),this.limitTrades(t)}limitTrades(t){if(t.length>this.maxTrades){t.sort((n,i)=>n.timestamp-i.timestamp);const r=t.length-this.maxTrades;t.splice(0,r),this.log(`[TradeManager] Limited trades to ${this.maxTrades}, removed ${r} oldest trades`)}}clearAllTrades(t){const r=t.length;return t.length=0,this.log(`[TradeManager] Cleared ${r} trades from history`),r}getTradesForSymbol(t,r){return t.filter(n=>n.symbol===r)}getTradesInDateRange(t,r,n){return t.filter(i=>i.timestamp>=r&&i.timestamp<=n)}getTradesForOrder(t,r){return t.filter(n=>n.orderId===r)}getTotalVolumeForSymbol(t,r){return t.filter(n=>n.symbol===r).reduce((n,i)=>n+i.quantity,0)}getTotalValueForSymbol(t,r){return t.filter(n=>n.symbol===r).reduce((n,i)=>n+i.quantity*i.price,0)}getTradeStatistics(t){const r=t.length,n=t.reduce((c,h)=>c+h.quantity,0),i=t.reduce((c,h)=>c+h.quantity*h.price,0),o=new Set(t.map(c=>c.symbol)).size,s=r>0?n/r:0,u=r>0?i/r:0;return{totalTrades:r,totalVolume:n,totalValue:i,uniqueSymbols:o,averageTradeSize:s,averageTradeValue:u}}getRecentTrades(t,r=10){return t.sort((n,i)=>i.timestamp-n.timestamp).slice(0,r)}setMaxTrades(t){this.maxTrades=Math.max(1,t)}getMaxTrades(){return this.maxTrades}setLoggingEnabled(t){this.enableLogging=t}}class SP{constructor(t,r,n,i,o=!0){be(this,"data"),be(this,"dataStorageManager"),be(this,"orderManager"),be(this,"positionManager"),be(this,"balanceManager"),be(this,"tradeManager"),be(this,"priceTrackingService"),be(this,"symbolInfoCache",new Map),be(this,"isUIVisible",!1),be(this,"enableLogging"),this.enableLogging=o,this.dataStorageManager=new bP(t??new _v,this.symbolInfoCache,o),this.orderManager=new xP(o),this.positionManager=new wP(o),this.balanceManager=new CP(o),this.tradeManager=new _P(i,o),this.priceTrackingService=r??new I5(n),this.dataStorageManager.isUsingExternalStorage()?(this.data=this.dataStorageManager.getDefaultData(),this.log("[PaperTradingService] Initialized with default data for external storage (async load will follow)")):(this.data=this.dataStorageManager.loadData(),this.log("[PaperTradingService] Initialized with local storage data")),this.setupPriceTracking()}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}async initializeAsync(){this.dataStorageManager.isUsingExternalStorage()&&(this.data=await this.dataStorageManager.initializeAsync(),this.log("[PaperTradingService] Async initialization completed"),this.updateTrackedSymbols())}saveData(){this.dataStorageManager.saveData(this.data)}setupPriceTracking(){this.priceTrackingService.addPriceCallback(t=>{this.log(`[PaperTradingService] Price update received: ${t.symbol} = $${t.price.toFixed(2)}`),this.checkLimitOrdersForSymbol(t.symbol,t.price),this.updatePositionPnLForSymbol(t.symbol,t.price)}),this.updateTrackedSymbols()}updateTrackedSymbols(){if(!this.isUIVisible)return;const t=new Set;for(const r of this.data.orders)r.status===Gn.PENDING&&r.type===gn.LIMIT&&t.add(r.symbol);for(const r of this.data.positions)t.add(r.symbol);this.priceTrackingService.updateTrackedSymbols(Array.from(t),r=>this.symbolInfoCache.get(r)??null)}createSymbolInfo(t,r){return this.symbolInfoCache.get(t)||(r?{symbol:t,type:r,name:t}:null)}checkLimitOrdersForSymbol(t,r){this.orderManager.checkLimitOrdersForExecution(this.data.orders,t,r).forEach(n=>{this.executeOrder(n.id,r)}),this.updateTrackedSymbols()}updatePositionPnLForSymbol(t,r){this.positionManager.updatePositionPnL(this.data.positions,t,r)}cacheSymbolInfo(t){this.symbolInfoCache.set(t.symbol,t)}updatePriceTrackingConfig(t){this.priceTrackingService.updateConfig(t)}setPriceTrackingInterval(t){if(t<1e3)throw new Error("Price tracking interval must be at least 1000ms (1 second)");this.priceTrackingService.updateConfig({updateInterval:t})}getCurrentConfig(){return this.priceTrackingService.getCurrentConfig()}setPriceTrackingLogging(t){this.priceTrackingService.updateConfig({enableLogging:t}),this.enableLogging=t,this.dataStorageManager.setLoggingEnabled(t),this.orderManager.setLoggingEnabled(t),this.positionManager.setLoggingEnabled(t),this.balanceManager.setLoggingEnabled(t),this.tradeManager.setLoggingEnabled(t)}getOrders(){return[...this.data.orders]}getPositions(){return[...this.data.positions]}getTrades(){return[...this.data.trades]}getBalance(){return this.data.balance}placeOrder(t){this.orderManager.validateOrder(t,this.data.balance,this.data.positions);const r=this.orderManager.createOrder(t);return this.data.orders.push(r),r.type===gn.MARKET?this.executeOrder(r.id,t.currentPrice):this.updateTrackedSymbols(),this.saveData(),r}executeOrder(t,r){const n=this.data.orders.find(c=>c.id===t);if(!n||n.status!==Gn.PENDING||!this.orderManager.shouldExecuteLimitOrder(n,r))return;const i=r*n.quantity;this.data.balance=this.balanceManager.updateBalanceForOrderExecution(this.data.balance,n.side,i);const o=this.positionManager.updatePosition(this.data.positions,n,r);this.data.balance+=o.updatedBalance;const s=this.tradeManager.createTrade(n.id,n.symbol,n.side,n.quantity,r);this.tradeManager.addTrade(this.data.trades,s),this.orderManager.fillOrder(n);const u=this.data.orders.findIndex(c=>c.id===t);u!==-1&&(this.data.orders.splice(u,1),this.log(`[PaperTradingService] Removed filled order ${t} from storage`)),this.updateTrackedSymbols(),this.saveData()}cancelOrder(t){const r=this.data.orders.find(i=>i.id===t);if(!r)throw new Error("Order not found");this.orderManager.cancelOrder(r);const n=this.data.orders.findIndex(i=>i.id===t);n!==-1&&(this.data.orders.splice(n,1),this.log(`[PaperTradingService] Removed cancelled order ${t} from storage`)),this.updateTrackedSymbols(),this.saveData()}updatePositionPnL(t,r){this.positionManager.updatePositionPnL(this.data.positions,t,r)}closePosition(t,r){const n=this.data.balance;this.log(`[PaperTradingService] Closing position - Initial balance: $${n.toFixed(2)}`);const i=this.positionManager.closePosition(this.data.positions,t,r);this.data.balance+=i.balanceChange,this.log(`[PaperTradingService] Updated balance: $${this.data.balance.toFixed(2)} (added proceeds: +$${i.balanceChange.toFixed(2)})`),this.tradeManager.addTrade(this.data.trades,i.trade),this.updateTrackedSymbols(),this.saveData(),this.log(`[PaperTradingService] Position close completed. Final balance: $${this.data.balance.toFixed(2)}`)}addCash(t){this.data.balance=this.balanceManager.addCash(this.data.balance,t),this.saveData()}removeCash(t){this.data.balance=this.balanceManager.removeCash(this.data.balance,t,this.data.orders),this.saveData()}setBalance(t){this.data.balance=this.balanceManager.setBalance(t,this.data.orders),this.saveData()}getPendingOrdersInfo(){return this.balanceManager.getPendingOrdersInfo(this.data.balance,this.data.orders)}clearAllTrades(){this.tradeManager.clearAllTrades(this.data.trades),this.saveData()}checkLimitOrders(t,r){this.checkLimitOrdersForSymbol(t,r)}reset(){this.data=this.dataStorageManager.getDefaultData(),this.updateTrackedSymbols(),this.saveData()}startPriceTrackingForPendingOrders(){this.isUIVisible=!0,this.log("[PaperTradingService] UI opened, starting price tracking for pending orders and positions...");const t=new Set;for(const i of this.data.orders)i.status===Gn.PENDING&&i.type===gn.LIMIT&&t.add(i.symbol);for(const i of this.data.positions)t.add(i.symbol);const r=this.data.orders.filter(i=>i.status===Gn.PENDING&&i.type===gn.LIMIT).map(i=>i.symbol),n=this.data.positions.map(i=>i.symbol);this.log(`[PaperTradingService] Found ${r.length} symbols with pending limit orders:`,r),this.log(`[PaperTradingService] Found ${n.length} symbols with open positions:`,n),this.log(`[PaperTradingService] Total ${t.size} unique symbols to track:`,Array.from(t));for(const i of t){let o=this.symbolInfoCache.get(i);if(!o){const s=this.data.orders.find(h=>h.symbol===i),u=this.data.positions.find(h=>h.symbol===i),c=(s==null?void 0:s.symbolType)||(u==null?void 0:u.symbolType);if(c){const h=this.createSymbolInfo(i,c);h&&(o=h,this.symbolInfoCache.set(i,o))}}o?(this.log(`[PaperTradingService] Starting tracking for ${i} (type: ${o.type})`),this.priceTrackingService.trackSymbol(o)):this.logWarn(`[PaperTradingService] No symbol info available for ${i} - cannot track price`)}t.size===0&&this.log("[PaperTradingService] No pending orders or positions found, no price tracking needed")}stopPriceTrackingForUI(){this.isUIVisible=!1,this.log("[PaperTradingService] UI closed, stopping all price tracking..."),this.priceTrackingService.cleanup()}hasPendingLimitOrders(){return this.orderManager.hasPendingLimitOrders(this.data.orders)}hasItemsNeedingPriceTracking(){const t=this.orderManager.hasPendingLimitOrders(this.data.orders),r=this.positionManager.hasOpenPositions(this.data.positions);return t||r}isUICurrentlyVisible(){return this.isUIVisible}cleanup(){this.isUIVisible=!1,this.priceTrackingService.cleanup()}}const kP=async()=>null;class MP{constructor(t=!0){be(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}save(t){this.log("[ExternalStorageProvider] Saving paper trading data via callback"),this.log("[ExternalStorageProvider] Data to save:",t),this.log("[ExternalStorageProvider] Data type:",typeof t),this.log("[ExternalStorageProvider] Data keys:",Object.keys(t||{})),this.logWarn("[ExternalStorageProvider] No save callback registered, data not saved")}load(){return this.log("[ExternalStorageProvider] Load called - use loadAsync() for external storage"),null}async loadAsync(){try{this.log("[ExternalStorageProvider] Loading paper trading data via callback");const t=await kP();return t?(this.log("[ExternalStorageProvider] Paper trading data loaded successfully"),t):(this.log("[ExternalStorageProvider] No paper trading data found"),null)}catch(t){return console.error("[ExternalStorageProvider] Error loading paper trading data:",t),null}}}var EP=K("<div class=form-group><label></label><input type=number min=0 step=0.01>"),TP=K("<div class=trade-form><div class=order-type-selector><button></button><button></button></div><div class=side-selector><button></button><button></button></div><div class=form-group><label></label><input type=number min=1 step=1></div><div class=order-summary><div class=summary-row><span>:</span><span></span></div></div><button> "),iy=K("<div class=empty-state>"),IP=K("<div class=positions-list>"),LP=K("<div class=orders-list>"),PP=K("<div class=empty-state><div class=empty-icon>📊</div><div class=empty-title></div><div class=empty-subtitle>"),AP=K("<div class=trades-header><button class=clear-trades-btn>🗑️ "),DP=K("<div class=trades-table-header><div class=header-symbol></div><div class=header-details><span class=header-qty></span><span class=header-price></span><span class=header-total></span></div><div class=header-time>"),FP=K("<div class=trades-list>"),RP=K("<div class=cash-warning>"),OP=K('<div class=cash-management><div class=cash-form><div class=form-group><label></label><input type=number min=0 step=100></div><div class=form-group><label></label><select><option value=add></option><option value=remove></option></select></div><button> </button><button class="cash-operation-btn remove"style=margin-top:15px;background:#dc3545;border-color:#dc3545;></button></div><div class=pending-orders-summary><h4>'),NP=K("<div class=paper-trading-container><div class=paper-trading-header><h3></h3><div class=balance>: </div></div><div class=current-ticker><div class=ticker-info><span class=symbol></span><span class=price></span></div></div><div class=tab-navigation><button></button><button> (<!>)</button><button> (<!>)</button><button> (<!>)</button><button></button></div><div class=tab-content>"),zP=K("<div class=position-item><div class=position-header><span class=symbol></span><span></span></div><div class=position-details><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div></div><button class=close-position-btn>"),VP=K("<div class=order-item><div class=order-header><span class=symbol></span><span></span><span class=type></span></div><div class=order-details><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div><div class=detail-row><span>:</span><span></span></div></div><button class=cancel-order-btn>"),BP=K('<div class="trade-item compact"><div class=trade-row><div class=trade-symbol><span class=symbol></span><span> </span></div><div class=trade-details><span class=quantity></span><span class=price></span><span class=total></span></div><div class=trade-time><br>'),$P=K("<div><div>: </div><div>: </div><div>: "),WP=K("<div class=error-text>"),HP=K("<div class=summary-details><div class=summary-row><span>:</span><span> (<!>)</span></div><div class=summary-row><span>:</span><span></span></div><div class=summary-row><span>:</span><span></span></div><div class=summary-row><span>:</span><span>");const UP=e=>{const[t,r]=me([]),[n,i]=me([]),[o,s]=me([]),[u,c]=me(1e4),[h,p]=me(gn.MARKET),[g,m]=me("buy"),[b,x]=me(1),[C,_]=me(e.currentPrice),[k,M]=me("trade"),[L,D]=me(""),[P,$]=me(0),[A,N]=me(1e3),[z,B]=me("add"),Q=new I5(e.priceTrackingConfig),ne=e.paperTradingUseExternalStorage?new MP(Q.isLoggingEnabled()):new _v,Z=new SP(ne,Q,e.priceTrackingConfig,e.paperTradingMaxTrades),J=(Ce,...Te)=>{Q.isLoggingEnabled()&&console.log(Ce,...Te)},ue=(Ce,...Te)=>{Q.isLoggingEnabled()&&console.warn(Ce,...Te)},le=()=>(P(),Fe(e.symbol.symbol)),ae=Ce=>{P();const Te=Q.getCurrentPrice(Ce.symbol);return Te&&Te>0?Ce.side==="buy"?(Te-Ce.averagePrice)*Ce.quantity:(Ce.averagePrice-Te)*Ce.quantity:Ce.unrealizedPnL};Q.addPriceCallback(Ce=>{$(Te=>Te+1),te()}),Ei(async()=>{J("[PaperTrading] Component mounted, setting up paper trading..."),e.paperTradingUseExternalStorage&&(J("[PaperTrading] Using external storage, initializing async..."),await Z.initializeAsync()),J("[PaperTrading] Using unified data feed from ChartDataProvider"),e.symbol.symbol&&(Z.cacheSymbolInfo(e.symbol),J("[PaperTrading] Cached ticker info for:",e.symbol.symbol)),te(),D(e.symbol.symbol),Z.startPriceTrackingForPendingOrders()}),Nr(()=>{J("[PaperTrading] Component unmounting, stopping price tracking..."),Z.stopPriceTrackingForUI()}),tt(()=>{if(e.symbol.symbol&&e.symbol.symbol!==L()){const Ce=le();_(Ce||e.currentPrice),D(e.symbol.symbol),Z.cacheSymbolInfo(e.symbol)}}),tt(()=>{e.symbol.symbol&&e.currentPrice>0&&(Z.updatePositionPnL(e.symbol.symbol,e.currentPrice),te())});const te=()=>{r(Z.getOrders()),i(Z.getPositions()),s(Z.getTrades()),c(Z.getBalance())},ve=()=>{var Ce;if(!e.symbol.symbol||b()<=0)return;const Te=le(),et=h()===gn.MARKET?Te:C();J("[PaperTrading] Placing order:",{symbol:e.symbol.symbol,side:g(),quantity:b(),type:h(),price:et,currentPrice:Te});try{const Qe=Z.placeOrder({symbol:e.symbol.symbol,side:g(),quantity:b(),type:h(),price:et,currentPrice:Te,symbolType:(Ce=e.symbol.type)==null?void 0:Ce.toString(),exchange:e.symbol.exchange||"default"});J("[PaperTrading] Order placed successfully:",Qe),te(),x(1),_(le())}catch(Qe){console.error("Error placing order:",Qe),alert(Qe instanceof Error?Qe.message:"Error placing order")}},pe=Ce=>{try{const Te=n().find(ut=>ut.id===Ce);if(!Te)throw new Error("Position not found");const et=u();J(`[PaperTrading] BEFORE closing position - Balance: $${et.toFixed(2)}`),J("[PaperTrading] Position to close:",Te);const Qe=Fe(Te.symbol);if(J(`[PaperTrading] Current price for ${Te.symbol}: $${Qe}`),!Qe||Qe<=0)throw new Error(`Cannot close position: No current price available for ${Te.symbol}. Please try again when price data is available.`);let it=0;Te.side==="buy"?it=(Qe-Te.averagePrice)*Te.quantity:it=(Te.averagePrice-Qe)*Te.quantity,J(`[PaperTrading] Expected P&L: $${it.toFixed(2)}`),J(`[PaperTrading] Expected new balance: $${(et+it).toFixed(2)}`),Z.closePosition(Ce,Qe),te();const He=u(),ct=He-et;J(`[PaperTrading] AFTER closing position - Balance: $${He.toFixed(2)}`),J(`[PaperTrading] Actual balance change: $${ct.toFixed(2)}`),J(`[PaperTrading] Expected vs Actual: Expected $${it.toFixed(2)}, Got $${ct.toFixed(2)}`)}catch(Te){console.error("Error closing position:",Te),alert(Te instanceof Error?Te.message:"Error closing position")}},j=Ce=>{try{Z.cancelOrder(Ce),te()}catch(Te){console.error("Error canceling order:",Te)}},H=()=>{try{Z.addCash(A()),te(),N(1e3)}catch(Ce){console.error("Error adding cash:",Ce),alert(Ce instanceof Error?Ce.message:"Error adding cash")}},de=()=>{try{Z.removeCash(A()),te(),N(1e3)}catch(Ce){console.error("Error removing cash:",Ce),alert(Ce instanceof Error?Ce.message:"Error removing cash")}},U=()=>{try{Z.reset(),te(),J("[PaperTrading] Account reset successfully")}catch(Ce){console.error("Error resetting account:",Ce),alert(Ce instanceof Error?Ce.message:"Error resetting account")}},fe=()=>Z.getPendingOrdersInfo(),ce=Ce=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Ce),Oe=(Ce,Te=2)=>Ce.toFixed(Te),Ee=Ce=>Ce>0?"#00C851":Ce<0?"#FF4444":"#666",Fe=Ce=>{P();const Te=Q.getCurrentPrice(Ce);return Te&&Te>0?(J(`[PaperTrading] Using API price for ${Ce}: $${Te.toFixed(2)}`),Te):Ce===e.symbol.symbol?(J(`[PaperTrading] Using chart price for ${Ce}: $${e.currentPrice.toFixed(2)} (API price not available)`),e.currentPrice):(ue(`[PaperTrading] No price available for ${Ce}`),0)};return(()=>{var Ce=NP(),Te=Ce.firstChild,et=Te.firstChild,Qe=et.nextSibling,it=Qe.firstChild,He=Te.nextSibling,ct=He.firstChild,ut=ct.firstChild,Qt=ut.nextSibling,Gt=He.nextSibling,Mt=Gt.firstChild,gt=Mt.nextSibling,Yt=gt.firstChild,cn=Yt.nextSibling;cn.nextSibling;var xn=gt.nextSibling,dr=xn.firstChild,Rt=dr.nextSibling;Rt.nextSibling;var Zt=xn.nextSibling,nr=Zt.firstChild,Kr=nr.nextSibling;Kr.nextSibling;var hr=Zt.nextSibling,Br=Gt.nextSibling;return F(et,()=>I("paper_trading",e.locale)),F(Qe,()=>I("balance",e.locale),it),F(Qe,()=>ce(u()),null),F(ut,()=>e.symbol.symbol),F(Qt,()=>ce(le())),Mt.$$click=()=>M("trade"),F(Mt,()=>I("trade",e.locale)),gt.$$click=()=>M("positions"),F(gt,()=>I("positions",e.locale),Yt),F(gt,()=>n().length,cn),xn.$$click=()=>M("orders"),F(xn,()=>I("orders",e.locale),dr),F(xn,()=>t().length,Rt),Zt.$$click=()=>M("trades"),F(Zt,()=>I("trades",e.locale),nr),F(Zt,()=>o().length,Kr),hr.$$click=()=>M("cash"),F(hr,()=>I("cash",e.locale)),F(Br,Y(Pe,{get when(){return k()==="trade"},get children(){var Et=TP(),We=Et.firstChild,_t=We.firstChild,wt=_t.nextSibling,St=We.nextSibling,Ct=St.firstChild,Ut=Ct.nextSibling,Kt=St.nextSibling,mr=Kt.firstChild,pr=mr.nextSibling,cr=Kt.nextSibling,ti=cr.firstChild,Hr=ti.firstChild,Ur=Hr.firstChild,ri=Hr.nextSibling,Pt=cr.nextSibling,Pr=Pt.firstChild;return _t.$$click=()=>p(gn.MARKET),F(_t,()=>I("market",e.locale)),wt.$$click=()=>{p(gn.LIMIT),_(le())},F(wt,()=>I("limit",e.locale)),Ct.$$click=()=>m("buy"),F(Ct,()=>I("buy",e.locale)),Ut.$$click=()=>m("sell"),F(Ut,()=>I("sell",e.locale)),F(mr,()=>I("quantity",e.locale)),pr.$$input=kt=>x(Number(kt.target.value)),F(Et,Y(Pe,{get when(){return h()===gn.LIMIT},get children(){var kt=EP(),Ar=kt.firstChild,wr=Ar.nextSibling;return F(Ar,()=>I("price",e.locale)),wr.$$input=fr=>_(Number(fr.target.value)),Ae(()=>wr.value=C()),kt}}),cr),F(Hr,()=>I("estimated_total",e.locale),Ur),F(ri,()=>ce((h()===gn.MARKET?le():C())*b())),Pt.$$click=ve,F(Pt,(()=>{var kt=Le(()=>g()==="buy");return()=>kt()?I("buy",e.locale):I("sell",e.locale)})(),Pr),F(Pt,()=>e.symbol.symbol,null),Ae(kt=>{var Ar=`order-type-btn ${h()===gn.MARKET?"active":""}`,wr=`order-type-btn ${h()===gn.LIMIT?"active":""}`,fr=`side-btn buy ${g()==="buy"?"active":""}`,rn=`side-btn sell ${g()==="sell"?"active":""}`,jr=`place-order-btn ${g()}`,nn=!e.symbol.symbol||b()<=0;return Ar!==kt.e&&Ge(_t,kt.e=Ar),wr!==kt.t&&Ge(wt,kt.t=wr),fr!==kt.a&&Ge(Ct,kt.a=fr),rn!==kt.o&&Ge(Ut,kt.o=rn),jr!==kt.i&&Ge(Pt,kt.i=jr),nn!==kt.n&&(Pt.disabled=kt.n=nn),kt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Ae(()=>pr.value=b()),Et}}),null),F(Br,Y(Pe,{get when(){return k()==="positions"},get children(){var Et=IP();return F(Et,Y(Pe,{get when(){return n().length===0},get children(){var We=iy();return F(We,()=>I("no_open_positions",e.locale)),We}}),null),F(Et,Y(bn,{get each(){return n()},children:We=>{const _t=()=>(P(),Fe(We.symbol));return(()=>{var wt=zP(),St=wt.firstChild,Ct=St.firstChild,Ut=Ct.nextSibling,Kt=St.nextSibling,mr=Kt.firstChild,pr=mr.firstChild,cr=pr.firstChild,ti=pr.nextSibling,Hr=mr.nextSibling,Ur=Hr.firstChild,ri=Ur.firstChild,Pt=Ur.nextSibling,Pr=Hr.nextSibling,kt=Pr.firstChild,Ar=kt.firstChild,wr=kt.nextSibling,fr=Pr.nextSibling,rn=fr.firstChild,jr=rn.firstChild,nn=rn.nextSibling,wn=Kt.nextSibling;return F(Ct,()=>We.symbol),F(Ut,()=>We.side.toUpperCase()),F(pr,()=>I("quantity",e.locale),cr),F(ti,()=>We.quantity),F(Ur,()=>I("avg_price",e.locale),ri),F(Pt,()=>ce(We.averagePrice)),F(kt,()=>I("current_price",e.locale),Ar),F(wr,()=>ce(_t())),F(rn,()=>I("pnl",e.locale),jr),F(nn,()=>ce(ae(We))),wn.$$click=()=>pe(We.id),F(wn,()=>I("close_position",e.locale)),Ae(An=>{var ji=`side ${We.side}`,uo=Ee(ae(We));return ji!==An.e&&Ge(Ut,An.e=ji),uo!==An.t&&((An.t=uo)!=null?nn.style.setProperty("color",uo):nn.style.removeProperty("color")),An},{e:void 0,t:void 0}),wt})()}}),null),Et}}),null),F(Br,Y(Pe,{get when(){return k()==="orders"},get children(){var Et=LP();return F(Et,Y(Pe,{get when(){return t().length===0},get children(){var We=iy();return F(We,()=>I("no_pending_orders",e.locale)),We}}),null),F(Et,Y(bn,{get each(){return t()},children:We=>(()=>{var _t=VP(),wt=_t.firstChild,St=wt.firstChild,Ct=St.nextSibling,Ut=Ct.nextSibling,Kt=wt.nextSibling,mr=Kt.firstChild,pr=mr.firstChild,cr=pr.firstChild,ti=pr.nextSibling,Hr=mr.nextSibling,Ur=Hr.firstChild,ri=Ur.firstChild,Pt=Ur.nextSibling,Pr=Hr.nextSibling,kt=Pr.firstChild,Ar=kt.firstChild,wr=kt.nextSibling,fr=Kt.nextSibling;return F(St,()=>We.symbol),F(Ct,()=>We.side.toUpperCase()),F(Ut,()=>We.type),F(pr,()=>I("quantity",e.locale),cr),F(ti,()=>We.quantity),F(Ur,()=>I("price",e.locale),ri),F(Pt,()=>ce(We.price)),F(kt,()=>I("status",e.locale),Ar),F(wr,()=>We.status),fr.$$click=()=>j(We.id),F(fr,()=>I("cancel_order",e.locale)),Ae(()=>Ge(Ct,`side ${We.side}`)),_t})()}),null),Et}}),null),F(Br,Y(Pe,{get when(){return k()==="trades"},get children(){var Et=FP();return F(Et,Y(Pe,{get when(){return o().length===0},get children(){var We=PP(),_t=We.firstChild,wt=_t.nextSibling,St=wt.nextSibling;return F(wt,()=>I("no_trades_executed",e.locale)),F(St,()=>I("your_trade_history_will_appear_here",e.locale)),We}}),null),F(Et,Y(Pe,{get when(){return o().length>0},get children(){return[(()=>{var We=AP(),_t=We.firstChild;return _t.firstChild,_t.$$click=()=>{const wt=I("are_you_sure_clear_trades",e.locale).replace("{count}",o().length.toString());confirm(wt)&&(Z.clearAllTrades(),te())},F(_t,()=>I("clear_all_trades",e.locale),null),We})(),(()=>{var We=DP(),_t=We.firstChild,wt=_t.nextSibling,St=wt.firstChild,Ct=St.nextSibling,Ut=Ct.nextSibling,Kt=wt.nextSibling;return F(_t,()=>I("symbol_side",e.locale)),F(St,()=>I("qty",e.locale)),F(Ct,()=>I("price",e.locale)),F(Ut,()=>I("total",e.locale)),F(Kt,()=>I("date_time",e.locale)),We})()]}}),null),F(Et,Y(bn,{get each(){return o().sort((We,_t)=>_t.timestamp-We.timestamp)},children:We=>(()=>{var _t=BP(),wt=_t.firstChild,St=wt.firstChild,Ct=St.firstChild,Ut=Ct.nextSibling,Kt=Ut.firstChild,mr=St.nextSibling,pr=mr.firstChild,cr=pr.nextSibling,ti=cr.nextSibling,Hr=mr.nextSibling,Ur=Hr.firstChild;return F(Ct,()=>We.symbol),F(Ut,()=>We.side==="buy"?"↗":"↘",Kt),F(Ut,()=>We.side.toUpperCase(),null),F(pr,()=>Oe(We.quantity,We.quantity<1?4:0)),F(cr,()=>ce(We.price)),F(ti,()=>ce(We.price*We.quantity)),F(Hr,()=>new Date(We.timestamp).toLocaleDateString([],{month:"short",day:"numeric"}),Ur),F(Hr,()=>new Date(We.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),null),Ae(()=>Ge(Ut,`side-badge ${We.side}`)),_t})()}),null),Et}}),null),F(Br,Y(Pe,{get when(){return k()==="cash"},get children(){var Et=OP(),We=Et.firstChild,_t=We.firstChild,wt=_t.firstChild,St=wt.nextSibling,Ct=_t.nextSibling,Ut=Ct.firstChild,Kt=Ut.nextSibling,mr=Kt.firstChild,pr=mr.nextSibling,cr=Ct.nextSibling,ti=cr.firstChild,Hr=cr.nextSibling,Ur=We.nextSibling,ri=Ur.firstChild;return F(wt,()=>I("cash_amount",e.locale)),St.$$input=Pt=>N(Number(Pt.target.value)),F(Ut,()=>I("operation",e.locale)),Kt.addEventListener("change",Pt=>B(Pt.target.value)),F(mr,()=>I("add_cash",e.locale)),F(pr,()=>I("remove_cash",e.locale)),F(We,Y(Pe,{get when(){return z()==="remove"},get children(){var Pt=RP();return F(Pt,()=>{const Pr=fe();if(Pr.totalBuyOrdersValue>0){const kt=u()-A(),Ar=kt<Pr.totalBuyOrdersValue;return(()=>{var wr=$P(),fr=wr.firstChild,rn=fr.firstChild,jr=fr.nextSibling,nn=jr.firstChild,wn=jr.nextSibling,An=wn.firstChild;return Ge(wr,`warning ${Ar?"error":"info"}`),F(fr,()=>I("pending_buy_orders",e.locale),rn),F(fr,()=>ce(Pr.totalBuyOrdersValue),null),F(jr,()=>I("balance_after_removal",e.locale),nn),F(jr,()=>ce(kt),null),F(wn,()=>I("max_safe_removal",e.locale),An),F(wn,()=>ce(Pr.maxCashRemoval),null),F(wr,Ar&&(()=>{var ji=WP();return F(ji,()=>I("insufficient_funds_warning",e.locale)),ji})(),null),wr})()}return null}),Pt}}),cr),Hn(cr,"click",z()==="add"?H:de),F(cr,(()=>{var Pt=Le(()=>z()==="add");return()=>Pt()?I("add",e.locale):I("remove",e.locale)})(),ti),F(cr,()=>ce(A()),null),Hr.$$click=()=>{const Pt=I("reset_account_confirmation",e.locale).replace("{orders}",t().length.toString()).replace("{positions}",n().length.toString()).replace("{trades}",o().length.toString());confirm(Pt)&&(U(),alert(I("reset_account_success",e.locale)))},F(Hr,()=>I("reset_trading_account",e.locale)),F(ri,()=>I("pending_orders_summary",e.locale)),F(Ur,()=>{const Pt=fe();return(()=>{var Pr=HP(),kt=Pr.firstChild,Ar=kt.firstChild,wr=Ar.firstChild,fr=Ar.nextSibling,rn=fr.firstChild,jr=rn.nextSibling;jr.nextSibling;var nn=kt.nextSibling,wn=nn.firstChild,An=wn.firstChild,ji=wn.nextSibling,uo=nn.nextSibling,Ya=uo.firstChild,mi=Ya.firstChild,da=Ya.nextSibling,$s=uo.nextSibling,ha=$s.firstChild,Za=ha.firstChild,Ka=ha.nextSibling;return F(Ar,()=>I("pending_buy_orders_summary",e.locale),wr),F(fr,()=>Pt.pendingBuyOrders.length,rn),F(fr,()=>ce(Pt.totalBuyOrdersValue),jr),F(wn,()=>I("pending_sell_orders_summary",e.locale),An),F(ji,()=>Pt.pendingSellOrders.length),F(Ya,()=>I("available_cash",e.locale),mi),F(da,()=>ce(Pt.availableCashAfterOrders)),F(ha,()=>I("max_cash_removal",e.locale),Za),F(Ka,()=>ce(Pt.maxCashRemoval)),Pr})()},null),Ae(Pt=>{var Pr=`cash-operation-btn ${z()}`,kt=A()<=0;return Pr!==Pt.e&&Ge(cr,Pt.e=Pr),kt!==Pt.t&&(cr.disabled=Pt.t=kt),Pt},{e:void 0,t:void 0}),Ae(()=>St.value=A()),Ae(()=>Kt.value=z()),Et}}),null),Ae(Et=>{var We=`tab ${k()==="trade"?"active":""}`,_t=`tab ${k()==="positions"?"active":""}`,wt=`tab ${k()==="orders"?"active":""}`,St=`tab ${k()==="trades"?"active":""}`,Ct=`tab ${k()==="cash"?"active":""}`;return We!==Et.e&&Ge(Mt,Et.e=We),_t!==Et.t&&Ge(gt,Et.t=_t),wt!==Et.a&&Ge(xn,Et.a=wt),St!==Et.o&&Ge(Zt,Et.o=St),Ct!==Et.i&&Ge(hr,Et.i=Ct),Et},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),Ce})()};Dt(["click","input"]);class jP{constructor(t,r,n){be(this,"currentSubscription",null),be(this,"uuid"),be(this,"setOrderBookData"),be(this,"setIsLoading"),be(this,"setError"),this.uuid=Math.random().toString(36).slice(2,11),this.setOrderBookData=t,this.setIsLoading=r,this.setError=n}subscribeToSymbol(t){const r={symbol:t.symbol,exchange:t.exchange,name:t.name,shortName:t.shortName,market:t.market,type:t.type};(!this.currentSubscription||this.currentSubscription.symbol!==r.symbol||this.currentSubscription.exchange!==r.exchange)&&(this.currentSubscription&&this.unsubscribeFromSymbol(this.currentSubscription),this.performSubscription(t),this.currentSubscription=r)}unsubscribeFromCurrent(){this.currentSubscription&&(this.unsubscribeFromSymbol(this.currentSubscription),this.currentSubscription=null)}performSubscription(t){this.setIsLoading(!0),this.setError(null);const r=Wr.getInstance().getDataFeed();if(r){const n=i=>{this.setOrderBookData(i),this.setIsLoading(!1)};r.subscribeOrderBookData(t,n,this.uuid)}else this.setError("Data feed not available for this symbol type"),this.setIsLoading(!1)}unsubscribeFromSymbol(t){const r=Wr.getInstance().getDataFeed();r&&r.unsubscribeOrderBookData(t,this.uuid)}getCurrentSubscription(){return this.currentSubscription}}const XP=()=>{const[e,t]=me(null),[r,n]=me(!1),[i,o]=me(null),s=new jP(t,n,o);return Nr(()=>{s.unsubscribeFromCurrent()}),{orderBookData:e,isLoading:r,error:i,state:()=>({isLoading:r(),error:i()}),subscribeToSymbol:u=>s.subscribeToSymbol(u),unsubscribeFromCurrent:()=>s.unsubscribeFromCurrent(),getCurrentSubscription:()=>s.getCurrentSubscription()}},pp=e=>{const t=parseFloat(e);return t>=1e3?t.toFixed(2).replace(/\.?0+$/,""):t>=100?t.toFixed(3).replace(/\.?0+$/,""):t>=1?t.toFixed(4).replace(/\.?0+$/,""):t>=.1?t.toFixed(5).replace(/\.?0+$/,""):t>=.01?t.toFixed(6).replace(/\.?0+$/,""):t.toFixed(8).replace(/\.?0+$/,"")},xg=e=>{const t=parseFloat(e);return t>=1e3?t.toFixed(2).replace(/\.?0+$/,""):t>=100?t.toFixed(3).replace(/\.?0+$/,""):t>=1?t.toFixed(4).replace(/\.?0+$/,""):t.toFixed(6).replace(/\.?0+$/,"")},wg=(e,t)=>{const r=parseFloat(e)*parseFloat(t);return r>=1e3?r.toFixed(2).replace(/\.?0+$/,""):r>=100?r.toFixed(3).replace(/\.?0+$/,""):r>=1?r.toFixed(4).replace(/\.?0+$/,""):r.toFixed(6).replace(/\.?0+$/,"")},YP=(e,t)=>{const r=[...e.map(([n,i])=>parseFloat(i)),...t.map(([n,i])=>parseFloat(i))];return Math.max(...r,0)},oy=(e,t)=>{if(t===0)return"0%";const r=parseFloat(e)/t*100;return`${Math.min(r,100)}%`},H0=(e,t)=>{const r=[...e].sort((i,o)=>{const s=parseFloat(i[0]),u=parseFloat(o[0]);return t==="bids"?u-s:s-u});let n=0;return r.map(([i,o])=>(n+=parseFloat(o),[i,o,n]))},ZP=(e,t)=>{const r=e.length>0?Math.max(...e.map(([i,o,s])=>s)):0,n=t.length>0?Math.max(...t.map(([i,o,s])=>s)):0;return Math.max(r,n,0)},KP=(e,t)=>parseFloat(t)-parseFloat(e),qP=(e,t)=>t<=0?e:Math.floor(e/t)*t,ay=(e,t,r)=>{if(t===.01)return e;const n=new Map;return t===100&&(console.log(`=== Aggregating ${r} with tick size ${t} ===`),console.log("First 5 original orders:",e.slice(0,5))),e.forEach(([i,o])=>{const s=parseFloat(i),u=parseFloat(o),c=qP(s,t).toString();if(n.has(c)){const h=n.get(c);n.set(c,{quantity:h.quantity+u,orderCount:h.orderCount+1})}else n.set(c,{quantity:u,orderCount:1})}),Array.from(n.entries()).map(([i,o])=>[i,o.quantity.toString()]).sort((i,o)=>{const s=parseFloat(i[0]),u=parseFloat(o[0]);return r==="bids"?u-s:s-u})},sy=e=>e>=1?e.toString():e.toFixed(2);var QP=K("<div class=orderbook-ticker>"),GP=K("<div class=orderbook-header><h3>");const JP=e=>(()=>{var t=GP(),r=t.firstChild;return F(r,()=>I("order_book",e.locale)),F(t,Y(Pe,{get when(){return e.currentSymbol},get children(){var n=QP();return F(n,()=>{var i;return(i=e.currentSymbol())==null?void 0:i.symbol}),n}}),null),t})();var eA=K("<div><div class=orderbook-quantity-bar></div><span class=orderbook-quantity></span><span></span><span class=orderbook-amount>");const Xg=e=>{const t=()=>e.depthVisualization==="cumulative"&&e.cumulativeQuantity!==void 0?oy(e.cumulativeQuantity.toString(),e.maxQuantity):oy(e.quantity,e.maxQuantity);return(()=>{var r=eA(),n=r.firstChild,i=n.nextSibling,o=i.nextSibling,s=o.nextSibling;return F(i,()=>e.formatQuantity(e.quantity)),F(o,()=>e.formatPrice(e.price)),F(s,()=>e.calculateAmount(e.price,e.quantity)),Ae(u=>{var c=`orderbook-order orderbook-${e.type} ${e.isSplitViewBid?"split-view-bid":""}`,h=t(),p=`orderbook-price ${e.type}-price`;return c!==u.e&&Ge(r,u.e=c),h!==u.t&&((u.t=h)!=null?n.style.setProperty("width",h):n.style.removeProperty("width")),p!==u.a&&Ge(o,u.a=p),u},{e:void 0,t:void 0,a:void 0}),r})()};var tA=K("<div><div class=orderbook-orders>");const ly=e=>{const t=Bt(()=>{const r=e.orderBookMaxRows,n=e.orders.slice(0,r);return e.depthVisualization==="cumulative"?H0(n,e.type):n.sort((i,o)=>parseFloat(o[0])-parseFloat(i[0])).map(([i,o])=>[i,o,0])});return(()=>{var r=tA(),n=r.firstChild;return F(n,Y(bn,{get each(){return t()},children:([i,o,s])=>Y(Xg,{price:i,quantity:o,get type(){return e.type==="bids"?"bid":"ask"},get maxQuantity(){return e.maxQuantity},cumulativeQuantity:s,get depthVisualization(){return e.depthVisualization},get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get calculateAmount(){return e.calculateAmount}})})),Ae(()=>Ge(r,`orderbook-${e.type}`)),r})()};var rA=K("<div class=spread-info><span class=spread-value>"),nA=K("<div class=orderbook-spread>");const iA=e=>(()=>{var t=nA();return F(t,Y(Pe,{get when(){return e.bestBid&&e.bestAsk},get children(){var r=rA(),n=r.firstChild;return F(n,()=>e.formatPrice(KP(e.bestBid,e.bestAsk).toString())),r}})),t})();var oA=K("<div class=spread-selector-dropdown>"),aA=K("<div class=spread-selector><div class=spread-selector-button><span class=spread-selector-value></span><span class=spread-selector-arrow>"),sA=K("<div>");const lA=e=>{const[t,r]=me(!1),[n,i]=me({top:0,left:0});let o;const s=[.01,.1,1,10,100],u=p=>{e.onTickSizeChange(p),r(!1)},c=()=>{if(o){const p=o.getBoundingClientRect();i({top:p.bottom+2,left:p.left})}},h=()=>{t()||c(),r(!t())};return tt(()=>{if(t()){const p=()=>c(),g=m=>{o&&!o.contains(m.target)&&r(!1)};window.addEventListener("scroll",p,!0),window.addEventListener("resize",p),document.addEventListener("click",g),Nr(()=>{window.removeEventListener("scroll",p,!0),window.removeEventListener("resize",p),document.removeEventListener("click",g)})}}),(()=>{var p=aA(),g=p.firstChild,m=g.firstChild,b=m.nextSibling;g.$$click=h;var x=o;return typeof x=="function"?tn(x,g):o=g,F(m,()=>sy(e.selectedTickSize())),F(b,()=>t()?"▲":"▼"),F(p,Y(Pe,{get when(){return t()},get children(){var C=oA();return F(C,Y(bn,{each:s,children:_=>(()=>{var k=sA();return k.$$click=()=>u(_),F(k,()=>sy(_)),Ae(()=>Ge(k,`spread-selector-option ${_===e.selectedTickSize()?"selected":""}`)),k})()})),Ae(_=>{var k=`${n().top}px`,M=`${n().left}px`;return k!==_.e&&((_.e=k)!=null?C.style.setProperty("top",k):C.style.removeProperty("top")),M!==_.t&&((_.t=M)!=null?C.style.setProperty("left",M):C.style.removeProperty("left")),_},{e:void 0,t:void 0}),C}}),null),p})()};Dt(["click"]);var cA=K('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=2 y=2 width=12 height=2 fill=#FF4444></rect><rect x=2 y=5 width=12 height=2 fill=#FF4444></rect><rect x=2 y=8 width=12 height=2 fill=#00C851></rect><rect x=2 y=11 width=12 height=2 fill=#00C851>'),uA=K('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=2 y=2 width=12 height=2 fill=#FF4444></rect><rect x=2 y=5 width=12 height=2 fill=#FF4444></rect><rect x=2 y=8 width=12 height=2 fill=#FF4444></rect><rect x=2 y=11 width=12 height=2 fill=#FF4444>'),dA=K('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=2 y=2 width=12 height=2 fill=#00C851></rect><rect x=2 y=5 width=12 height=2 fill=#00C851></rect><rect x=2 y=8 width=12 height=2 fill=#00C851></rect><rect x=2 y=11 width=12 height=2 fill=#00C851>'),hA=K('<svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=1 y=2 width=7.5 height=2 fill=#00C851></rect><rect x=1 y=5 width=7.5 height=2 fill=#00C851></rect><rect x=1 y=8 width=7.5 height=2 fill=#00C851></rect><rect x=1 y=11 width=7.5 height=2 fill=#00C851></rect><rect x=9.5 y=2 width=7.5 height=2 fill=#FF4444></rect><rect x=9.5 y=5 width=7.5 height=2 fill=#FF4444></rect><rect x=9.5 y=8 width=7.5 height=2 fill=#FF4444></rect><rect x=9.5 y=11 width=7.5 height=2 fill=#FF4444>'),pA=K('<div class=view-selector><div title="Combined View"></div><div title="Asks Only"></div><div title="Bids Only"></div><div title="Split View">');const fA=e=>{const t=n=>{e.onViewChange(n)},r=n=>{switch(n){case"combined":return cA();case"asks-only":return uA();case"bids-only":return dA();case"split-view":return hA()}};return(()=>{var n=pA(),i=n.firstChild,o=i.nextSibling,s=o.nextSibling,u=s.nextSibling;return i.$$click=()=>t("combined"),F(i,()=>r("combined")),o.$$click=()=>t("asks-only"),F(o,()=>r("asks-only")),s.$$click=()=>t("bids-only"),F(s,()=>r("bids-only")),u.$$click=()=>t("split-view"),F(u,()=>r("split-view")),Ae(c=>{var h=`view-selector-option ${e.selectedView()==="combined"?"active":""}`,p=`view-selector-option ${e.selectedView()==="asks-only"?"active":""}`,g=`view-selector-option ${e.selectedView()==="bids-only"?"active":""}`,m=`view-selector-option ${e.selectedView()==="split-view"?"active":""}`;return h!==c.e&&Ge(i,c.e=h),p!==c.t&&Ge(o,c.t=p),g!==c.a&&Ge(s,c.a=g),m!==c.o&&Ge(u,c.o=m),c},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()};Dt(["click"]);var gA=K("<div class=depth-viz-dropdown>"),vA=K('<div class=depth-visualization-selector><button class=depth-viz-dropdown-trigger type=button><span class=depth-viz-selected></span><svg width=12 height=12 viewBox="0 0 12 12"fill=none><path d="M3 4.5L6 7.5L9 4.5"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>'),mA=K("<div><div class=depth-viz-option-label></div><div class=depth-viz-option-description>");const yA=e=>{const[t,r]=me(!1),[n,i]=me({top:0,left:0});let o;const s=g=>{e.onDepthVisualizationChange(g),r(!1)},u=()=>{if(o){const g=o.getBoundingClientRect();i({top:g.bottom+4,left:g.left})}},c=()=>{t()||u(),r(!t())};tt(()=>{if(t()){const g=()=>u(),m=b=>{o&&!o.contains(b.target)&&r(!1)};window.addEventListener("scroll",g,!0),window.addEventListener("resize",g),document.addEventListener("click",m),Nr(()=>{window.removeEventListener("scroll",g,!0),window.removeEventListener("resize",g),document.removeEventListener("click",m)})}});const h=g=>{switch(g){case"amount":return I("order_book_amount_mode",e.locale);case"cumulative":return I("order_book_cumulative_mode",e.locale)}},p=[{value:"amount",label:I("order_book_amount_mode",e.locale),description:I("order_book_amount_description",e.locale)},{value:"cumulative",label:I("order_book_cumulative_mode",e.locale),description:I("order_book_cumulative_description",e.locale)}];return(()=>{var g=vA(),m=g.firstChild,b=m.firstChild,x=b.nextSibling;m.$$click=c;var C=o;return typeof C=="function"?tn(C,m):o=m,F(b,()=>h(e.selectedDepthVisualization())),F(g,Y(Pe,{get when(){return t()},get children(){var _=gA();return F(_,()=>p.map(k=>(()=>{var M=mA(),L=M.firstChild,D=L.nextSibling;return M.$$click=()=>s(k.value),F(L,()=>k.label),F(D,()=>k.description),Ae(()=>Ge(M,`depth-viz-option ${e.selectedDepthVisualization()===k.value?"selected":""}`)),M})())),Ae(k=>{var M=`${n().top}px`,L=`${n().left}px`;return M!==k.e&&((k.e=M)!=null?_.style.setProperty("top",M):_.style.removeProperty("top")),L!==k.t&&((k.t=L)!=null?_.style.setProperty("left",L):_.style.removeProperty("left")),k},{e:void 0,t:void 0}),_}}),null),Ae(()=>Be(x,"class",`depth-viz-arrow ${t()?"open":""}`)),g})()};Dt(["click"]);var bA=K('<div class=split-view-layout><div class="split-view-side split-view-bids"><div class=split-view-header><span class=split-view-title></span><div class=split-view-column-headers><span class=split-view-size-header></span><span class=split-view-price-header></span><span class=split-view-amount-header></span></div></div><div class=split-view-orders></div></div><div class=split-view-divider></div><div class="split-view-side split-view-asks"><div class=split-view-header><span class=split-view-title></span><div class=split-view-column-headers><span class=split-view-size-header></span><span class=split-view-price-header></span><span class=split-view-amount-header></span></div></div><div class=split-view-orders>');const xA=e=>{const t=Bt(()=>{const n=e.bidsOrders.slice(0,e.orderBookMaxRows);return e.depthVisualization==="cumulative"?H0(n,"bids"):n.sort((i,o)=>parseFloat(o[0])-parseFloat(i[0])).map(([i,o])=>[i,o,0])}),r=Bt(()=>{const n=e.asksOrders.slice(0,e.orderBookMaxRows);return e.depthVisualization==="cumulative"?H0(n,"asks"):n.sort((i,o)=>parseFloat(i[0])-parseFloat(o[0])).map(([i,o])=>[i,o,0])});return(()=>{var n=bA(),i=n.firstChild,o=i.firstChild,s=o.firstChild,u=s.nextSibling,c=u.firstChild,h=c.nextSibling,p=h.nextSibling,g=o.nextSibling,m=i.nextSibling,b=m.nextSibling,x=b.firstChild,C=x.firstChild,_=C.nextSibling,k=_.firstChild,M=k.nextSibling,L=M.nextSibling,D=x.nextSibling;return F(s,()=>I("order_book_bids",e.locale)),F(c,()=>I("order_book_size",e.locale)),F(h,()=>I("order_book_price",e.locale)),F(p,()=>I("order_book_amount",e.locale)),F(g,Y(bn,{get each(){return t()},children:([P,$,A])=>Y(Xg,{price:P,quantity:$,type:"bid",get maxQuantity(){return e.maxQuantity},cumulativeQuantity:A,get depthVisualization(){return e.depthVisualization},get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get calculateAmount(){return e.calculateAmount},isSplitViewBid:!0})})),F(C,()=>I("order_book_asks",e.locale)),F(k,()=>I("order_book_size",e.locale)),F(M,()=>I("order_book_price",e.locale)),F(L,()=>I("order_book_amount",e.locale)),F(D,Y(bn,{get each(){return r()},children:([P,$,A])=>Y(Xg,{price:P,quantity:$,type:"ask",get maxQuantity(){return e.maxQuantity},cumulativeQuantity:A,get depthVisualization(){return e.depthVisualization},get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get calculateAmount(){return e.calculateAmount}})})),n})()};var wA=K("<div class=orderbook-empty><p>"),CA=K("<div class=orderbook-loading><p>"),_A=K("<div class=orderbook-error><p>"),SA=K("<div class=orderbook-section-header><span class=orderbook-size-header></span><span class=orderbook-price-header></span><span class=orderbook-amount-header>");const kA=e=>(()=>{var t=wA(),r=t.firstChild;return F(r,()=>I("order_book_select_symbol",e.locale)),t})(),MA=e=>(()=>{var t=CA(),r=t.firstChild;return F(r,()=>I("order_book_loading",e.locale)),t})(),EA=e=>(()=>{var t=_A(),r=t.firstChild;return F(r,()=>e.error),t})(),TA=e=>(()=>{var t=SA(),r=t.firstChild,n=r.nextSibling,i=n.nextSibling;return F(r,()=>I("order_book_size",e.locale)),F(n,()=>I("order_book_price",e.locale)),F(i,()=>I("order_book_amount",e.locale)),t})();var IA=K("<div class=orderbook-controls><div class=orderbook-controls-left></div><div class=orderbook-controls-right>"),LA=K("<div class=orderbook-orderbook>"),PA=K("<div class=chartspire-ui-orderbook>");const AA=e=>{const{orderBookData:t,isLoading:r,error:n,subscribeToSymbol:i}=XP(),[o,s]=me(.01),[u,c]=me("combined"),[h,p]=me(e.orderBookDepthVisualization||"amount"),g=()=>{const C=h();return C!="amount"&&C!="cumulative"?(console.error("Invalid order book depth visualization mode: ",C," defaulting to amount"),"amount"):C};tt(()=>{const C=e.currentSymbol();C&&i(C)});const m=Bt(()=>{const C=t();if(!C)return null;const _=o();return{bids:ay(C.bids,_,"bids"),asks:ay(C.asks,_,"asks")}}),b=Bt(()=>{const C=m();if(!C)return 0;if(g()==="cumulative"){const _=H0(C.bids,"bids"),k=H0(C.asks,"asks");return ZP(_,k)}else return YP(C.bids,C.asks)}),x=Bt(()=>{var C,_;const k=m();return!k||!k.bids.length||!k.asks.length?{bestBid:void 0,bestAsk:void 0}:{bestBid:(C=k.bids[0])==null?void 0:C[0],bestAsk:(_=k.asks[0])==null?void 0:_[0]}});return(()=>{var C=PA();return F(C,Y(JP,{get currentSymbol(){return e.currentSymbol},get locale(){return e.locale}}),null),F(C,Y(Pe,{get when(){return e.currentSymbol()},get children(){return[(()=>{var _=IA(),k=_.firstChild,M=k.nextSibling;return F(k,Y(fA,{selectedView:u,onViewChange:c})),F(M,Y(lA,{selectedTickSize:o,onTickSizeChange:s}),null),F(M,Y(yA,{selectedDepthVisualization:h,onDepthVisualizationChange:p,get locale(){return e.locale}}),null),_})(),Y(TA,{get locale(){return e.locale}})]}}),null),F(C,Y(Pe,{get when(){return!e.currentSymbol},get children(){return Y(kA,{get locale(){return e.locale}})}}),null),F(C,Y(Pe,{get when(){return r()},get children(){return Y(MA,{get locale(){return e.locale}})}}),null),F(C,Y(Pe,{get when(){return n()},get children(){return Y(EA,{get error(){return n()}})}}),null),F(C,Y(Pe,{get when(){return!r()&&!n()&&m()&&e.currentSymbol},get children(){var _=LA();return F(_,Y(Pe,{get when(){return u()==="combined"||u()==="asks-only"||u()==="bids-only"},get children(){return[Y(Pe,{get when(){return u()==="combined"||u()==="asks-only"},get children(){return Y(ly,{get orders(){var k;return((k=m())==null?void 0:k.asks)||[]},type:"asks",get maxQuantity(){return b()},get orderBookMaxRows(){return e.orderBookMaxRows},get depthVisualization(){return g()},formatPrice:pp,formatQuantity:xg,calculateAmount:wg})}}),Y(Pe,{get when(){return u()==="combined"},get children(){return Y(iA,{get bestBid(){return x().bestBid},get bestAsk(){return x().bestAsk},formatPrice:pp})}}),Y(Pe,{get when(){return u()==="combined"||u()==="bids-only"},get children(){return Y(ly,{get orders(){var k;return((k=m())==null?void 0:k.bids)||[]},type:"bids",get maxQuantity(){return b()},get orderBookMaxRows(){return e.orderBookMaxRows},get depthVisualization(){return g()},formatPrice:pp,formatQuantity:xg,calculateAmount:wg})}})]}}),null),F(_,Y(Pe,{get when(){return u()==="split-view"},get children(){return Y(xA,{get bidsOrders(){var k;return((k=m())==null?void 0:k.bids)||[]},get asksOrders(){var k;return((k=m())==null?void 0:k.asks)||[]},get maxQuantity(){return b()},get orderBookMaxRows(){return e.orderBookMaxRows},get depthVisualization(){return g()},formatPrice:pp,formatQuantity:xg,calculateAmount:wg,get locale(){return e.locale}})}}),null),_}}),null),C})()};class DA{constructor(t,r,n,i){be(this,"currentSubscription",null),be(this,"uuid"),be(this,"setTradeData"),be(this,"setIsLoading"),be(this,"setError"),be(this,"getTradeData"),be(this,"maxTrades",100),this.uuid=Math.random().toString(36).slice(2,11),this.setTradeData=t,this.setIsLoading=r,this.setError=n,this.getTradeData=i}subscribeToSymbol(t){const r={symbol:t.symbol,exchange:t.exchange,name:t.name,shortName:t.shortName,market:t.market,type:t.type};(!this.currentSubscription||this.currentSubscription.symbol!==r.symbol||this.currentSubscription.exchange!==r.exchange)&&(this.currentSubscription&&this.unsubscribeFromSymbol(this.currentSubscription),this.setTradeData(null),this.performSubscription(t),this.currentSubscription=r)}unsubscribeFromCurrent(){this.currentSubscription&&(this.unsubscribeFromSymbol(this.currentSubscription),this.currentSubscription=null)}performSubscription(t){var r;this.setIsLoading(!0),this.setError(null);const n=Wr.getInstance().getDataFeed();if(n){const i=o=>{const s=this.getTradeData();if(s&&s.symbol===o.symbol){const u={trades:[...s.trades,...o.trades].sort((c,h)=>h.timestamp-c.timestamp).slice(0,this.maxTrades),symbol:o.symbol,exchange:o.exchange,lastUpdated:o.lastUpdated};this.setTradeData(u)}else this.setTradeData(o);this.setIsLoading(!1)};(r=n.subscribeTradeData)==null||r.call(n,t,i,this.uuid)}else this.setError("Data feed not available for this symbol type"),this.setIsLoading(!1)}unsubscribeFromSymbol(t){var r;const n=Wr.getInstance().getDataFeed();n&&((r=n.unsubscribeTradeData)==null||r.call(n,t,this.uuid))}getCurrentSubscription(){return this.currentSubscription}}const FA=()=>{const[e,t]=me(null),[r,n]=me(!1),[i,o]=me(null),s=new DA(t,n,o,e);return Nr(()=>{s.unsubscribeFromCurrent()}),{tradeData:e,isLoading:r,error:i,state:()=>({isLoading:r(),error:i()}),subscribeToSymbol:u=>s.subscribeToSymbol(u),unsubscribeFromCurrent:()=>s.unsubscribeFromCurrent(),getCurrentSubscription:()=>s.getCurrentSubscription()}},RA=(e,t="24h")=>{const r=new Date(e);return t==="12h"?r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},OA=(e,t=2)=>{const r=parseFloat(e);return isNaN(r)?e:r.toFixed(t)},NA=(e,t=4)=>{const r=parseFloat(e);return isNaN(r)?e:r<.001?r.toFixed(8):r<1?r.toFixed(6):r.toFixed(t)},zA=e=>e==="buy"?"trade-buy":"trade-sell";var VA=K("<div class=trades-ticker>"),BA=K("<div class=trades-header><h3>");const $A=e=>(()=>{var t=BA(),r=t.firstChild;return F(r,()=>I("trades",e.locale)),F(t,Y(Pe,{get when(){return e.currentSymbol},get children(){var n=VA();return F(n,()=>{var i;return(i=e.currentSymbol())==null?void 0:i.symbol}),n}}),null),t})();var WA=K("<div><div class=trade-amount-bar></div><div class=trade-time></div><div class=trade-price></div><div class=trade-quantity>");const HA=e=>{const t=()=>e.trade,r=()=>parseFloat(t().price)*parseFloat(t().quantity),n=()=>{const i=r();return`${Math.min(i/1e4*100,100)}%`};return(()=>{var i=WA(),o=i.firstChild,s=o.nextSibling,u=s.nextSibling,c=u.nextSibling;return F(s,()=>e.formatTime(t().timestamp)),F(u,()=>e.formatPrice(t().price)),F(c,()=>e.formatQuantity(t().quantity)),Ae(h=>{var p=`trade-row ${zA(t().side)}`,g=n();return p!==h.e&&Ge(i,h.e=p),g!==h.t&&((h.t=g)!=null?o.style.setProperty("width",g):o.style.removeProperty("width")),h},{e:void 0,t:void 0}),i})()};var UA=K("<div class=trades-list><div class=trades-list-header><div class=header-time></div><div class=header-price></div><div class=header-quantity></div></div><div class=trades-list-body>");const jA=e=>{const t=()=>[...e.trades||[]].sort((r,n)=>n.timestamp-r.timestamp).slice(0,e.maxRows);return(()=>{var r=UA(),n=r.firstChild,i=n.firstChild,o=i.nextSibling,s=o.nextSibling,u=n.nextSibling;return F(i,()=>I("trade_time",e.locale)),F(o,()=>I("trade_price",e.locale)),F(s,()=>I("trade_quantity",e.locale)),F(u,Y(bn,{get each(){return t()},children:c=>Y(HA,{trade:c,get formatPrice(){return e.formatPrice},get formatQuantity(){return e.formatQuantity},get formatTime(){return e.formatTime},get timeFormat(){return e.timeFormat}})})),r})()};var XA=K("<div class=time-format-selector><div class=format-toggle><button>24h</button><button>12h");const YA=e=>{const t=r=>{e.onTimeFormatChange(r)};return(()=>{var r=XA(),n=r.firstChild,i=n.firstChild,o=i.nextSibling;return i.$$click=()=>t("24h"),o.$$click=()=>t("12h"),Ae(s=>{var u=`format-option ${e.selectedTimeFormat()==="24h"?"active":""}`,c=I("time_format_24h",e.locale),h=`format-option ${e.selectedTimeFormat()==="12h"?"active":""}`,p=I("time_format_12h",e.locale);return u!==s.e&&Ge(i,s.e=u),c!==s.t&&Be(i,"title",s.t=c),h!==s.a&&Ge(o,s.a=h),p!==s.o&&Be(o,"title",s.o=p),s},{e:void 0,t:void 0,a:void 0,o:void 0}),r})()};Dt(["click"]);var ZA=K('<div class="trades-state-view empty-state"><div class=state-content><div class=state-icon>📊</div><div class=state-message>'),KA=K('<div class="trades-state-view loading-state"><div class=state-content><div class=loading-spinner></div><div class=state-message>'),qA=K('<div class="trades-state-view error-state"><div class=state-content><div class=state-icon>⚠️</div><div class=state-message></div><div class=state-detail>');const QA=e=>(()=>{var t=ZA(),r=t.firstChild,n=r.firstChild,i=n.nextSibling;return F(i,()=>I("no_trades_available",e.locale||"en-US")),t})(),GA=e=>(()=>{var t=KA(),r=t.firstChild,n=r.firstChild,i=n.nextSibling;return F(i,()=>I("loading_trades",e.locale||"en-US")),t})(),JA=e=>(()=>{var t=qA(),r=t.firstChild,n=r.firstChild,i=n.nextSibling,o=i.nextSibling;return F(i,()=>I("trades_error",e.locale||"en-US")),F(o,()=>e.error),t})();var eD=K("<div class=trades-controls><div class=trades-controls-right>"),tD=K("<div class=chartspire-ui-trades>");const rD=e=>{const{tradeData:t,isLoading:r,error:n,subscribeToSymbol:i}=FA(),[o,s]=me(e.timeFormat||"24h");tt(()=>{const p=e.currentSymbol();p&&i(p)});const u=Bt(()=>{const p=e.currentSymbol(),g=(p==null?void 0:p.pricePrecision)??2;return m=>OA(m,g)}),c=Bt(()=>{const p=e.currentSymbol(),g=(p==null?void 0:p.volumePrecision)??4;return m=>NA(m,g)}),h=Bt(()=>{const p=o();return g=>RA(g,p)});return(()=>{var p=tD();return F(p,Y($A,{get currentSymbol(){return e.currentSymbol},get locale(){return e.locale}}),null),F(p,Y(Pe,{get when(){return e.currentSymbol()},get children(){var g=eD(),m=g.firstChild;return F(m,Y(YA,{selectedTimeFormat:o,onTimeFormatChange:s,get locale(){return e.locale}})),g}}),null),F(p,Y(Pe,{get when(){return!e.currentSymbol()},get children(){return Y(QA,{get locale(){return e.locale}})}}),null),F(p,Y(Pe,{get when(){return r()},get children(){return Y(GA,{get locale(){return e.locale}})}}),null),F(p,Y(Pe,{get when(){return n()},get children(){return Y(JA,{get error(){return n()},get locale(){return e.locale}})}}),null),F(p,Y(Pe,{get when(){return Le(()=>!!(!r()&&!n()&&e.currentSymbol()))()&&t()},get children(){return Y(jA,{get trades(){var g;return((g=t())==null?void 0:g.trades)||[]},get maxRows(){return e.tradesMaxRows},get timeFormat(){return o()},get locale(){return e.locale},get formatPrice(){return u()},get formatQuantity(){return c()},get formatTime(){return h()}})}}),null),p})()};var nD=K('<button type=button><svg viewBox="0 0 24 24"width=20 height=20><path d="M15 18L9 12L15 6"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round fill=none>');const Sv=e=>{const t=e.startingDirection||"left",r=()=>t==="left"?e.isExpanded?"rotate(0deg)":"rotate(180deg)":e.isExpanded?"rotate(180deg)":"rotate(0deg)";return(()=>{var n=nD(),i=n.firstChild;return Hn(n,"click",e.onClick),i.style.setProperty("transition","transform 0.2s ease-in-out"),i.style.setProperty("min-width","20px"),i.style.setProperty("min-height","20px"),Ae(o=>{var s=e.className||"",u={background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex","align-items":"center","justify-content":"center",...typeof e.style=="object"?e.style:{}},c=e.ariaLabel||(e.isExpanded?"Collapse":"Expand"),h=`toggle-icon ${e.isExpanded?"":"collapsed"}`,p=r();return s!==o.e&&Ge(n,o.e=s),o.t=mn(n,u,o.t),c!==o.a&&Be(n,"aria-label",o.a=c),h!==o.o&&Be(i,"class",o.o=h),p!==o.i&&((o.i=p)!=null?i.style.setProperty("transform",p):i.style.removeProperty("transform")),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),n})()};Dt(["click"]);function iD(e){const[t,r]=me(0),n=()=>{r(i=>i+1)};return tt(()=>{if(!e.activeChart)return;const i=Vv(),o=e.activeChart().id;i&&i.chartId.id===o&&(i.objectType==="indicator"||i.objectType==="overlay"||i.objectType==="force-refresh")&&(i.objectType==="force-refresh"?setTimeout(()=>{r(s=>s+1)},500):r(s=>s+1))}),{refreshTrigger:t,forceRefresh:n}}function oD(e){const{chart:t,currentSymbol:r,locale:n,chartComponentApis:i,activeChart:o}=e,s=[];let u=t;if(i&&o){const c=o().id,h=i[c];u=(h==null?void 0:h.klineChart)||t}try{const c=lD(r(),n);s.push(c),aD(u).forEach(h=>{s.push(h)}),sD(u).forEach(h=>{s.push(h)})}catch(c){console.error("Error building Object Tree data:",c)}return s}function aD(e){const t=[];return!e||typeof e.getIndicators!="function"||(e.getIndicators()||[]).forEach((r,n)=>{t.push({id:`indicator-${r.id||n}`,label:r.name||`Indicator ${n+1}`,type:"indicator",visible:r.visible!==!1,data:r})}),t}function sD(e){const t=[];return!e||typeof e.getOverlays!="function"||(e.getOverlays()||[]).forEach((r,n)=>{t.push({id:`overlay-${r.id||n}`,label:r.name||r.type||`Drawing ${n+1}`,type:"overlay",visible:r.visible!==!1,data:r})}),t}function lD(e,t){return{id:"chart-properties",label:I("Chart Properties",t),type:"chart",visible:!0,children:[{id:"symbol",label:`${I("Symbol",t)}: ${(e==null?void 0:e.symbol)||"N/A"}`,type:"chart",visible:!0},{id:"exchange",label:`${I("Exchange",t)}: ${(e==null?void 0:e.exchange)||"default"}`,type:"chart",visible:!0},{id:"type",label:`${I("Type",t)}: ${(e==null?void 0:e.type)||"UNKNOWN"}`,type:"chart",visible:!0}]}}function cD(e){const[t,r]=me([]),[n,i]=me(null),{refreshTrigger:o,forceRefresh:s}=iD({currentSymbol:e.currentSymbol,chartComponentApis:e.chartComponentApis,activeChart:e.activeChart});return tt(()=>{const u=e.chart;e.currentSymbol(),o();const c=n();if(!u){r([]);return}u!==c&&i(u);const h=oD({chart:u,currentSymbol:e.currentSymbol,locale:e.locale,chartComponentApis:e.chartComponentApis,activeChart:e.activeChart});r(h)}),{treeData:t,forceRefresh:s}}function uD(){const[e,t]=me(new Set(["chart-properties"]));return{expandedNodes:e,toggleNode:r=>{const n=e(),i=new Set(n);n.has(r)?i.delete(r):i.add(r),t(i)},isNodeExpanded:r=>e().has(r),expandNode:r=>{const n=new Set(e());n.add(r),t(n)},collapseNode:r=>{const n=new Set(e());n.delete(r),t(n)},collapseAll:()=>{t(new Set)}}}function dD(e){const{chart:t,onRefresh:r}=e;return{toggleVisibility:n=>{if(t)try{n.type==="indicator"&&n.data?hD(n,t):n.type==="overlay"&&n.data&&pD(n,t),r&&r()}catch(i){console.error("Error toggling visibility:",i)}}}}function hD(e,t){const r=e.data,n=!e.visible;r&&t.overrideIndicator({id:r.id,name:r.name,visible:n,paneId:r.paneId})}function pD(e,t){const r=e.data,n=!e.visible;r&&t.overrideOverlay({id:r.id,visible:n})}function fD(e){const t=e.match(/k_line_chart_(\d+)/);if(!t)throw new Error(`Invalid kline chart ID format: ${e}. Expected format: k_line_chart_<number>`);return`chart${t[1]}`}function gD(e){const t=e.match(/chart(\d+)/);if(!t)throw new Error(`Invalid ChartSpire chart ID format: ${e}. Expected format: chart<number>`);return`k_line_chart_${t[1]}`}class Yg{static klineToChartSpire(t){return fD(t)}static chartSpireToKline(t){return gD(t)}static isValidKlineId(t){return/^k_line_chart_\d+$/.test(t)}static isValidChartSpireId(t){return/^chart\d+$/.test(t)}}function vD(e){const{chart:t,onRefresh:r}=e;return{closeItem:n=>{var i,o;if(t)try{if(n.type==="indicator"&&n.data?mD(n,t):n.type==="overlay"&&n.data&&yD(n,t),r&&r(),t.id&&n.data){const s=Yg.klineToChartSpire(t.id);qc({chartId:{id:s},objectType:n.type==="indicator"?"indicator":"overlay",objectOperation:"remove",indicatorName:(i=n.data)==null?void 0:i.name,overlayName:(o=n.data)==null?void 0:o.name})}}catch(s){console.error("Error closing item:",s)}}}}function mD(e,t){const r=e.data;r&&t.removeIndicator({name:r.name,paneId:r.paneId})}function yD(e,t){const r=e.data;r&&vt.getInstance(t).deleteOverlay(r)}function bD(e){const{chart:t,onRefresh:r}=e;return{toggleLock:n=>{if(t)try{n.type==="overlay"&&n.data&&xD(n,t),r&&r()}catch(i){console.error("Error toggling lock:",i)}}}}function xD(e,t){const r=e.data;if(!r){console.warn("Object Tree: Cannot toggle lock - overlay data missing");return}const n=!r.lock;t.overrideOverlay({id:r.id,lock:n})}var wD=K('<button><svg viewBox="0 0 16 16"width=12 height=12><path d="M6 4l4 4-4 4"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round>');const CD=e=>(()=>{var t=wD();return Hn(t,"click",e.onClick),Ae(r=>{var n=`expand-button ${e.isExpanded?"expanded":""}`,i=e.isExpanded?"Collapse":"Expand";return n!==r.e&&Ge(t,r.e=n),i!==r.t&&Be(t,"aria-label",r.t=i),r},{e:void 0,t:void 0}),t})();Dt(["click"]);var _D=K('<svg viewBox="0 0 16 16"width=14 height=14><path d="M8 2C11.5 2 14.5 5 15 8c-.5 3-3.5 6-7 6S1.5 11 1 8c.5-3 3.5-6 7-6z"fill=none stroke=currentColor stroke-width=1.5></path><circle cx=8 cy=8 r=2 fill=none stroke=currentColor stroke-width=1.5>'),SD=K('<svg viewBox="0 0 16 16"width=14 height=14><path d="M2 2l12 12M9.5 9.5A2 2 0 0 1 6.5 6.5M8 2C11.5 2 14.5 5 15 8a11.8 11.8 0 0 1-1.5 2.5M1 8c.5-3 3.5-6 7-6a7 7 0 0 1 2.5.5"fill=none stroke=currentColor stroke-width=1.5 stroke-linecap=round>'),kD=K("<button>");const MD=e=>(()=>{var t=kD();return Hn(t,"click",e.onClick),F(t,Y(Pe,{get when(){return e.visible},get children(){return _D()}}),null),F(t,Y(Pe,{get when(){return!e.visible},get children(){return SD()}}),null),Ae(r=>{var n=`visibility-button ${e.visible?"visible":"hidden"}`,i=e.visible?"Hide":"Show";return n!==r.e&&Ge(t,r.e=n),i!==r.t&&Be(t,"title",r.t=i),r},{e:void 0,t:void 0}),t})();Dt(["click"]);var ED=K('<button title=Remove aria-label="Remove indicator"><svg width=12 height=12 viewBox="0 0 12 12"fill=none xmlns=http://www.w3.org/2000/svg><path d="M9 3L3 9M3 3l6 6"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');const TD=e=>(()=>{var t=ED();return t.$$click=r=>{r.stopPropagation(),e.onClick()},Ae(()=>Ge(t,`close-button ${e.class||""}`)),t})();Dt(["click"]);var ID=K("<button>"),LD=K('<svg width=14 height=14 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path d="M6 10V8C6 5.79086 7.79086 4 10 4H14C16.2091 4 18 5.79086 18 8V10M6 10H18M6 10V18C6 19.1046 6.89543 20 8 20H16C17.1046 20 18 19.1046 18 18V10"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round>'),PD=K('<svg width=14 height=14 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path d="M6 10H18M6 10V18C6 19.1046 6.89543 20 8 20H16C17.1046 20 18 19.1046 18 18V10M6 10V8C6 5.79086 7.79086 4 10 4H14C16.2091 4 18 5.79086 18 8V9"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round>');const AD=e=>(()=>{var t=ID();return t.$$click=r=>{r.stopPropagation(),e.onClick()},F(t,(()=>{var r=Le(()=>!!e.locked);return()=>r()?LD():PD()})()),Ae(r=>{var n=`lock-button ${e.locked?"locked":"unlocked"} ${e.class||""}`,i=e.locked?"Unlock overlay":"Lock overlay",o=e.locked?"Unlock overlay":"Lock overlay";return n!==r.e&&Ge(t,r.e=n),i!==r.t&&Be(t,"title",r.t=i),o!==r.a&&Be(t,"aria-label",r.a=o),r},{e:void 0,t:void 0,a:void 0}),t})();Dt(["click"]);var DD=K("<div class=node-children>"),FD=K("<div><div class=node-content><span>");const L5=e=>{const t=()=>e.expandedNodes.has(e.node.id),r=()=>e.node.children&&e.node.children.length>0,n=()=>e.level||0;return(()=>{var i=FD(),o=i.firstChild,s=o.firstChild;return F(o,Y(Pe,{get when(){return r()},get children(){return Y(CD,{get isExpanded(){return t()},onClick:()=>e.onToggleNode(e.node.id)})}}),s),F(o,Y(Pe,{get when(){return e.node.type!=="chart"},get children(){return Y(MD,{get visible(){return e.node.visible},onClick:()=>e.onToggleVisibility(e.node)})}}),s),F(o,Y(Pe,{get when(){return e.node.data&&e.node.type==="overlay"},get children(){return Y(AD,{get locked(){return e.node.data.lock},onClick:()=>e.onToggleLock(e.node),class:"ml-1"})}}),s),F(o,Y(Pe,{get when(){return e.node.data&&(e.node.type==="indicator"||e.node.type==="overlay")},get children(){return Y(TD,{onClick:()=>e.onCloseItem(e.node),class:"ml-1"})}}),s),F(s,()=>e.node.label),F(i,Y(Pe,{get when(){return Le(()=>!!r())()&&t()},get children(){var u=DD();return F(u,Y(bn,{get each(){return e.node.children},children:c=>Y(L5,{node:c,get level(){return n()+1},get expandedNodes(){return e.expandedNodes},get onToggleNode(){return e.onToggleNode},get onToggleVisibility(){return e.onToggleVisibility},get onCloseItem(){return e.onCloseItem},get onToggleLock(){return e.onToggleLock}})})),u}}),null),Ae(u=>{var c=`object-tree-node level-${n()}`,h=`node-label ${e.node.type}`;return c!==u.e&&Ge(i,u.e=c),h!==u.t&&Ge(s,u.t=h),u},{e:void 0,t:void 0}),i})()};var RD=K("<div class=object-tree-header><h3>");const OD=e=>(()=>{var t=RD(),r=t.firstChild;return F(r,()=>I("Object Tree",e.locale)),t})();var ND=K("<div class=empty-state><p>");const zD=e=>(()=>{var t=ND(),r=t.firstChild;return F(r,()=>I("No chart data available",e.locale)),t})();var VD=K("<div class=object-tree-container><div class=object-tree-content>");const BD=e=>{const{treeData:t,forceRefresh:r}=cD({chart:e.chart,currentSymbol:e.currentSymbol,locale:e.locale,chartComponentApis:e.chartComponentApis,activeChart:e.activeChart}),{expandedNodes:n,toggleNode:i}=uD(),o=c=>{let h=e.chart;if(e.chartComponentApis&&e.activeChart){const p=e.activeChart().id,g=e.chartComponentApis[p];h=g==null?void 0:g.klineChart}dD({chart:h,onRefresh:r}).toggleVisibility(c)},s=c=>{let h=e.chart;if(e.chartComponentApis&&e.activeChart){const p=e.activeChart().id,g=e.chartComponentApis[p];h=g==null?void 0:g.klineChart}vD({chart:h,onRefresh:r}).closeItem(c)},u=c=>{let h=e.chart;if(e.chartComponentApis&&e.activeChart){const p=e.activeChart().id,g=e.chartComponentApis[p];h=g==null?void 0:g.klineChart}bD({chart:h,onRefresh:r}).toggleLock(c)};return(()=>{var c=VD(),h=c.firstChild;return F(c,Y(OD,{get locale(){return e.locale}}),h),F(h,Y(Pe,{get when(){return t().length===0},get children(){return Y(zD,{get locale(){return e.locale}})}}),null),F(h,Y(Pe,{get when(){return t().length>0},get children(){return Y(bn,{get each(){return t()},children:p=>Y(L5,{node:p,level:0,get expandedNodes(){return n()},onToggleNode:i,onToggleVisibility:o,onCloseItem:s,onToggleLock:u})})}}),null),c})()};var $D=K("<div>"),WD=K("<div class=dropdown-item-icon>"),HD=K("<span class=dropdown-item-checkmark>✓"),UD=K("<div><span class=dropdown-item-text>");const En={ITEM_HEIGHT:38,PADDING:8,DEFAULT_MIN_WIDTH:180,DEFAULT_MAX_HEIGHT:300,DEFAULT_OFFSET:4,VIEWPORT_MARGIN:16,FALLBACK_FONT:'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},rh=e=>{const t=()=>!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement),r=()=>{var c;if(t()){const h=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(h)return h}return((c=e.triggerRef)==null?void 0:c.closest(".chartspire-ui"))||document.querySelector(".chartspire-ui")},n=()=>{var c;const h=r(),p=(h==null?void 0:h.getBoundingClientRect())||{top:0,left:0,width:window.innerWidth,height:window.innerHeight},g=e.options.length*En.ITEM_HEIGHT+En.PADDING,m=Math.min(e.maxHeight||En.DEFAULT_MAX_HEIGHT,p.height-En.VIEWPORT_MARGIN*2),b=Math.min(g,m);console.log("Height calculation:",{optionsCount:e.options.length,contentHeight:g,propMaxHeight:e.maxHeight,constrainedMaxHeight:m,finalDropdownHeight:b});const x=h?getComputedStyle(h):null,C=((c=x==null?void 0:x.getPropertyValue("--chartspire-ui-font-family"))==null?void 0:c.trim())||En.FALLBACK_FONT;if(!e.triggerRef)return{position:{top:100,left:En.VIEWPORT_MARGIN},height:b,fontFamily:C};const _=e.triggerRef.getBoundingClientRect(),k=e.placement||"bottom",M=e.offset||En.DEFAULT_OFFSET,L=e.minWidth||En.DEFAULT_MIN_WIDTH,D=_.top-p.top,P=_.bottom-p.top,$=_.left-p.left,A=p.height-P,N=D;let z;k==="bottom"?(z=P+M,z+b>p.height-En.VIEWPORT_MARGIN&&N>=b+M+En.VIEWPORT_MARGIN&&(z=D-M-b)):N>=b+M+En.VIEWPORT_MARGIN?z=D-M-b:A>=b+M+En.VIEWPORT_MARGIN?z=P+M:z=En.VIEWPORT_MARGIN,z=Math.max(En.VIEWPORT_MARGIN,Math.min(z,p.height-b-En.VIEWPORT_MARGIN));let B=$;return B+L>p.width&&(B=Math.max(En.VIEWPORT_MARGIN,p.width-L-En.VIEWPORT_MARGIN)),{position:{top:z,left:B},height:b,fontFamily:C}},i=Bt(()=>e.isOpen?n():{position:{top:0,left:0},height:0,fontFamily:En.FALLBACK_FONT}),o=c=>{const h=c.target;if(e.triggerRef&&!e.triggerRef.contains(h)){const p=document.querySelector(".chartspire-dropdown-portal");(!p||!p.contains(h))&&e.onClose()}},s=c=>{e.onSelect(c),e.onClose()};Ei(()=>{document.addEventListener("pointerdown",o),window.addEventListener("resize",()=>i())}),Nr(()=>{document.removeEventListener("pointerdown",o),window.removeEventListener("resize",()=>i())});const u=e.minWidth||En.DEFAULT_MIN_WIDTH;return Y(Pe,{get when(){return e.isOpen},get children(){return Y(lv,{get mount(){return r()||document.body},get children(){var c=$D();return c.style.setProperty("position","absolute"),`${u}px`!=null?c.style.setProperty("min-width",`${u}px`):c.style.removeProperty("min-width"),c.style.setProperty("z-index","4"),F(c,Y(bn,{get each(){return e.options},children:h=>(()=>{var p=UD(),g=p.firstChild;return p.$$click=()=>s(h),F(p,Y(Pe,{get when(){return h.icon},get children(){var m=WD();return Ae(()=>m.innerHTML=h.icon),m}}),g),F(g,()=>h.text),F(p,Y(Pe,{get when(){return h.key===e.selectedKey},get children(){return HD()}}),null),Ae(()=>Ge(p,`dropdown-item ${h.key===e.selectedKey?"selected":""}`)),p})()})),Ae(h=>{var p=`chartspire-dropdown-portal ${e.className||""}`,g=`${i().position.top}px`,m=`${i().position.left}px`,b=`${i().height}px`,x=i().fontFamily;return p!==h.e&&Ge(c,h.e=p),g!==h.t&&((h.t=g)!=null?c.style.setProperty("top",g):c.style.removeProperty("top")),m!==h.a&&((h.a=m)!=null?c.style.setProperty("left",m):c.style.removeProperty("left")),b!==h.o&&((h.o=b)!=null?c.style.setProperty("max-height",b):c.style.removeProperty("max-height")),x!==h.i&&((h.i=x)!=null?c.style.setProperty("font-family",x):c.style.removeProperty("font-family")),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),c}})}})};Dt(["click"]);var pi=(e=>(e.ONE_X="1x",e.TWO_X="0.5x",e.THREE_X="0.3x",e.FIVE_X="0.2x",e.TEN_X="0.1x",e))(pi||{});function jD(e,t){switch(e){case pi.ONE_X:return I("1 upd per 1 sec",t);case pi.TWO_X:return I("1 upd per 2 sec",t);case pi.THREE_X:return I("1 upd per 3 sec",t);case pi.FIVE_X:return I("1 upd per 5 sec",t);case pi.TEN_X:return I("1 upd per 10 sec",t)}return e}function XD(e){return[{key:pi.ONE_X,text:I("1 upd per 1 sec",e)},{key:pi.TWO_X,text:I("1 upd per 2 sec",e)},{key:pi.THREE_X,text:I("1 upd per 3 sec",e)},{key:pi.FIVE_X,text:I("1 upd per 5 sec",e)},{key:pi.TEN_X,text:I("1 upd per 10 sec",e)}]}function YD(e){const t={[pi.ONE_X]:1e3,[pi.TWO_X]:2e3,[pi.THREE_X]:3e3,[pi.FIVE_X]:5e3,[pi.TEN_X]:1e4};return e in t?t[e]:(console.error(`Invalid replay speed key: ${e}`),0)}var ZD=K("<div class=chartspire-ui-alert-container><div class=alert><div class=messagebox><p>");function KD(e){const t="Select starting candle by clicking on candle";return(()=>{var r=ZD(),n=r.firstChild,i=n.firstChild,o=i.firstChild;return F(o,()=>e.message!==""?e.message:t),r})()}const qD=e=>{const[t,r]=me(e.replaySpeed),n=Bt(()=>XD(e.locale)),i=`Replay ${e.chartId}`,o=()=>{e.replayCandle!=null&&(e.onPause!=null&&e.onPause(!1),e.onPlay!=null&&(e.onPlay(!0),e.setReplaySpeed(t())))},s=()=>{e.onPause!=null&&e.onPause(!0),e.onPlay!=null&&e.onPlay(!1)},u=()=>{e.onClose!=null&&e.onClose(),console.warn("handle close: replay closed")},c=()=>{e.skipReplay!=null&&e.skipReplay(!0)};return tt(()=>{e.setReplaySpeed(t())}),Y(Pe,{get when(){return e.isActive},get children(){return Y(Pe,{get when(){return e.replayModalVisible},get children(){return[Y(Pe,{get when(){return e.isAlertVisible},get children(){return Y(KD,{get message(){return e.alertMessage}})}}),Y(fT,{title:i,width:380,onClose:u,get isPLaying(){return e.isPlaying},get buttons(){return[e.isPlaying()?{children:"Pause",onClick:()=>{s()}}:{children:"Play",onClick:()=>{o()}},{children:">>",onClick:()=>{c()}}]},get children(){return Y(qp,{style:{width:"100%"},get value(){return t().key},onSelected:h=>{r(h)},get dataSource(){return n()}})}})]}})}})};var QD=K('<svg viewBox="0 0 1024 1024"class=icon stroke-width=10><path d="M512 0L627.2 384H1024L748.8 640L864 1024L512 768L160 1024L275.2 640L0 384H396.8L512 0z">'),GD=K("<div class=indicator-item><li class=row>"),cy=K("<li class=title>");const JD=e=>(()=>{var t=QD();return Hn(t,"click",e.onClick),Ae(r=>{var n=e.selected?"yellow":"none",i=e.selected?"yellow":"#76808F";return n!==r.e&&Be(t,"fill",r.e=n),i!==r.t&&Be(t,"stroke",r.t=i),r},{e:void 0,t:void 0}),t})(),eF=e=>(()=>{var t=GD(),r=t.firstChild;return F(t,Y(JD,{get selected(){return e.isSelected},get onClick(){return e.onStarClick}}),r),Hn(r,"click",e.onClick),F(r,Y(ZE,{get checked(){return e.isChecked},get label(){return I(e.name.toLowerCase(),e.locale)}})),t})(),tF=e=>{const[t,r]=me(""),n=()=>{const g=t().toLowerCase();return[...zm().map(m=>m.name)].filter(m=>I(m.toLowerCase(),e.locale).toLowerCase().includes(g)).sort((m,b)=>{const x=I(m.toLowerCase(),e.locale).toLowerCase(),C=I(b.toLowerCase(),e.locale).toLowerCase();return x.localeCompare(C)})},i=localStorage.getItem("chartspire-favIndicators"),o=i?JSON.parse(i):[],[s,u]=me(o),c=()=>s().filter(g=>e.mainIndicators().includes(g)||g in e.subIndicators()||[...zm().map(m=>m.name)].includes(g)).sort((g,m)=>{const b=I(g.toLowerCase(),e.locale).toLowerCase(),x=I(m.toLowerCase(),e.locale).toLowerCase();return b.localeCompare(x)}),h=g=>{u(m=>{const b=m.includes(g),x=b?m.filter(C=>C!==g):[...m,g];return e.mainIndicators().includes(g)?e.onMainIndicatorChange({name:g,paneId:"candle_pane",added:!b}):g in e.subIndicators()&&(e.subIndicators()[g]||e.onSubIndicatorChange({name:g,paneId:e.subIndicators()[g]??"",added:!b})),localStorage.setItem("chartspire-favIndicators",JSON.stringify(x)),x})},p=g=>{const m=e.mainIndicators().includes(g),b=g in e.subIndicators(),x=m||b,C=c().includes(g);return Y(eF,{name:g,isSelected:C,isChecked:x,onClick:()=>{m?e.onMainIndicatorChange({name:g,paneId:"candle_pane",added:!x}):b?e.onSubIndicatorChange({name:g,paneId:e.subIndicators()[g]??"",added:!x}):Dp.includes(g)?e.onMainIndicatorChange({name:g,paneId:"candle_pane",added:!x}):V0.includes(g)&&e.onSubIndicatorChange({name:g,paneId:e.subIndicators()[g]??"",added:!x}),qc({chartId:{id:e.chartId},objectType:"indicator",objectOperation:"add",indicatorName:g}),console.log("chartUpdated",Vv())},onStarClick:()=>h(g),get locale(){return e.locale}})};return Y(zl,{get title(){return I("indicator",e.locale)},width:600,contentHeight:"90%",get onClose(){return e.onClose},get children(){return[Y(Ha,{style:{width:"100%"},get value(){return t()},onInput:g=>r(g.target.value)}),Y(Z2,{class:"chartspire-ui-indicator-modal-list",get children(){return[Le(()=>Le(()=>c().length>0)()&&(()=>{var g=cy();return F(g,()=>I("favourites",e.locale)),g})()),Le(()=>c().map(p)),(()=>{var g=cy();return F(g,()=>I("Indicators",e.locale)),g})(),Le(()=>n().map(p))]}})]}})};Dt(["click"]);const rF=e=>(e.chart==null&&console.error("widget is null"),Y(Pe,{get when(){return e.indicatorModalVisible},get children(){return Y(tF,{get chartId(){return e.chartId},get locale(){return e.locale},get mainIndicators(){return e.mainIndicators},get subIndicators(){return e.subIndicators},onClose:()=>{e.setIndicatorModalVisible(!1)},onMainIndicatorChange:t=>{var r;const n=[...e.mainIndicators()];t.added?(e.currentLayout!==vt.getInstance(e.chart).getDefaultLayout()&&Kg(e.chart,t.name,!0,!0,{id:"candle_pane"}),n.push(t.name)):((r=e.chart)==null||r.removeIndicator({paneId:"candle_pane",name:t.name}),n.splice(n.indexOf(t.name),1),e.currentLayout!==vt.getInstance(e.chart).getDefaultLayout()&&vt.getInstance(e.chart).saveIndicators()),e.setMainIndicators(n)},onSubIndicatorChange:t=>{var r;const n={...e.subIndicators()};if(t.added){const i=Kg(e.chart,t.name,!0);i&&(n[t.name]=i)}else e.subIndicators()[t.name]&&((r=e.chart)==null||r.removeIndicator({name:t.name})),delete n[t.name],e.currentLayout!==vt.getInstance(e.chart).getDefaultLayout()&&vt.getInstance(e.chart).saveIndicators();e.setSubIndicators(n)}})}}));var X=(e=>(e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.TWO_VERTICAL=21]="TWO_VERTICAL",e[e.THREE=3]="THREE",e[e.THREE_VERTICAL=31]="THREE_VERTICAL",e[e.THREE_MIXED=32]="THREE_MIXED",e[e.THREE_MIXED_REVERSE=33]="THREE_MIXED_REVERSE",e[e.THREE_MIXED_BOTTOM=34]="THREE_MIXED_BOTTOM",e[e.THREE_MIXED_TOP=35]="THREE_MIXED_TOP",e[e.FOUR=4]="FOUR",e[e.FOUR_VERTICAL=41]="FOUR_VERTICAL",e[e.FOUR_HORIZONTAL=42]="FOUR_HORIZONTAL",e[e.FOUR_MIXED=43]="FOUR_MIXED",e[e.FOUR_MIXED_REVERSE=44]="FOUR_MIXED_REVERSE",e[e.FOUR_MIXED_TOP=45]="FOUR_MIXED_TOP",e[e.FOUR_MIXED_BOTTOM=46]="FOUR_MIXED_BOTTOM",e[e.FIVE_VERTICAL=51]="FIVE_VERTICAL",e[e.FIVE_HORIZONTAL=52]="FIVE_HORIZONTAL",e[e.FIVE_MIXED=53]="FIVE_MIXED",e[e.FIVE_MIXED_REVERSE=54]="FIVE_MIXED_REVERSE",e[e.FIVE_MIXED_TOP=55]="FIVE_MIXED_TOP",e[e.SIX=6]="SIX",e[e.SIX_HORIZONTAL=62]="SIX_HORIZONTAL",e[e.SIX_VERTICAL=61]="SIX_VERTICAL",e[e.SIX_MIXED=63]="SIX_MIXED",e[e.SEVEN_VERTICAL=71]="SEVEN_VERTICAL",e[e.SEVEN_HORIZONTAL=72]="SEVEN_HORIZONTAL",e[e.EIGHT=8]="EIGHT",e[e.EIGHT_VERTICAL=81]="EIGHT_VERTICAL",e[e.EIGHT_HORIZONTAL=82]="EIGHT_HORIZONTAL",e[e.NINE=9]="NINE",e[e.NINE_VERTICAL=91]="NINE_VERTICAL",e[e.NINE_HORIZONTAL=92]="NINE_HORIZONTAL",e[e.TEN=10]="TEN",e[e.TEN_VERTICAL=101]="TEN_VERTICAL",e[e.TEN_HORIZONTAL=102]="TEN_HORIZONTAL",e[e.TWELVE=12]="TWELVE",e[e.TWELVE_VERTICAL=121]="TWELVE_VERTICAL",e[e.TWELVE_HORIZONTAL=122]="TWELVE_HORIZONTAL",e[e.TWELVE_GRID=123]="TWELVE_GRID",e[e.FOURTEEN=14]="FOURTEEN",e[e.SIXTEEN=16]="SIXTEEN",e[e.SIXTEEN_GRID=161]="SIXTEEN_GRID",e))(X||{});const Fo=new Set;let Jn=null;const kv=()=>{Fo.clear(),Fo.add(1)},P5=()=>{document.visibilityState==="visible"&&kv()};document.addEventListener("visibilitychange",P5);const nF=()=>{console.log("Cleaning up multiChart listeners"),document.removeEventListener("visibilitychange",P5),Jn&&(clearTimeout(Jn),Jn=null),Fo.clear()},iF=(e,t,r,n)=>{Jn&&(clearTimeout(Jn),Jn=null),Jn=setTimeout(()=>{Jn=null},(Math.abs(t-e)+1)*r+1e3);const i=o=>{if(e<t){if(o<=t){if(Fo.has(o)||(Fo.add(o),Up(o===t&&n&&n!==t?n:o)),o<t)setTimeout(()=>{i(o+1)},r);else if(Jn&&(clearTimeout(Jn),Jn=null),o===t){Fo.clear();for(let s=1;s<=t;s++)Fo.add(s)}}}else if(o>=t){if(Up(o===t&&n&&n!==t?n:o),o>t)setTimeout(()=>{i(o-1)},r);else if(Jn&&(clearTimeout(Jn),Jn=null),o===t){Fo.clear();for(let s=1;s<=t;s++)Fo.add(s)}}};i(e<t?e:e-1)},uy=e=>{switch(e){case 1:return 1;case 2:return 2;case 21:return 2;case 3:return 3;case 31:return 3;case 32:return 3;case 33:return 3;case 34:return 3;case 35:return 3;case 4:return 4;case 41:return 4;case 42:return 4;case 43:return 4;case 44:return 4;case 45:return 4;case 46:return 4;case 51:return 5;case 52:return 5;case 53:return 5;case 54:return 5;case 55:return 5;case 6:return 6;case 62:return 6;case 61:return 6;case 63:return 6;case 71:return 7;case 72:return 7;case 8:return 8;case 81:return 8;case 82:return 8;case 9:return 9;case 91:return 9;case 92:return 9;case 10:return 10;case 101:return 10;case 102:return 10;case 12:return 12;case 121:return 12;case 122:return 12;case 123:return 12;case 14:return 14;case 16:return 16;case 161:return 16;default:return e}},oF=(e,t)=>{console.warn("Initial delay",t);const r=Fd();if(Fo.has(2)&&r===1&&kv(),e===r)return;Jn&&(clearTimeout(Jn),Jn=null);const n=uy(r),i=uy(e);n===i?setTimeout(()=>{Up(e),Fo.clear();for(let o=1;o<=i;o++)Fo.add(o)},t):iF(n,i,t,e)},I0=class jc{constructor(){be(this,"activeCharts",new Map)}static getInstance(){return jc.instance}static setEnabled(t){jc.enabled=t}static isEnabled(){return jc.enabled}static setTimeSyncEnabled(t){jc.timeSyncEnabled=t}static isTimeSyncEnabled(){return jc.timeSyncEnabled}registerChart(t,r,n,i){this.activeCharts.set(t,{chart:r,symbol:n,type:i})}unregisterChart(t){this.activeCharts.has(t)&&this.activeCharts.delete(t)}updateChartSymbol(t,r,n){const i=this.activeCharts.get(t);i&&(i.symbol=r,i.type=n)}updateChartStyles(t,r){const n=this.activeCharts.get(t);n&&n.chart.setStyles(r)}hasSameSymbol(t,r){const n=this.activeCharts.get(t),i=this.activeCharts.get(r);if(!n||!i||!n.symbol||!i.symbol)return!1;const o=n.symbol===i.symbol;return n.type===void 0&&i.type===void 0?o:o&&n.type===i.type}configureCrosshair(t,r){var n;try{const i=t.getStyles(),o=JSON.parse(JSON.stringify(i));(n=o==null?void 0:o.crosshair)!=null&&n.vertical&&(r?(o.crosshair.horizontal.show=!0,o.crosshair.horizontal.line.show=!0):(o.crosshair.horizontal.show=!1,o.crosshair.horizontal.line.show=!1),t.setStyles(o))}catch(i){console.error("Error configuring crosshair:",i)}}resetCrosshairVisibility(t){try{const r=this.activeCharts.get(t);if(!r)return;const n={crosshair:{show:!0,horizontal:{show:!0,line:{show:!0}},vertical:{show:!0,line:{show:!0}}}};r.chart.setStyles(n);const i=r.chart.getStyles();if(i){const o=JSON.parse(JSON.stringify(i));o.crosshair&&(o.crosshair.show=!0,o.crosshair.vertical&&(o.crosshair.vertical.show=!0,o.crosshair.vertical.line.show=!0),o.crosshair.horizontal&&(o.crosshair.horizontal.show=!0,o.crosshair.horizontal.line.show=!0),r.chart.setStyles(o))}}catch(r){console.error("Error resetting crosshair visibility:",r)}}getSafeVisibleIndices(t,r){const n=typeof t.realFrom=="number"?t.realFrom:t.from,i=typeof t.realTo=="number"?t.realTo:t.to,o=Math.max(0,Math.min(n,r-1)),s=Math.max(0,Math.min(i,r-1));return{safeFromIndex:o,safeToIndex:s}}findVisibleTimestamp(t,r,n){try{const i=t.getDataList();if(!i||i.length===0)return null;const o=t.getVisibleRange();if(!o)return null;const{safeFromIndex:s,safeToIndex:u}=this.getSafeVisibleIndices(o,i.length);if(s>u)return null;const c=i[s].timestamp,h=i[u].timestamp;if(r<=c)return c;if(r>=h)return h;for(let x=s;x<=u;x++)if(i[x].timestamp===r)return i[x].timestamp;const p=h-c;if(p<=0)return c;const g=(r-c)/p,m=Math.floor(s+g*(u-s)),b=Math.max(s,Math.min(u,m));return i[b].timestamp}catch(i){return console.error("Error finding visible timestamp:",i),null}}checkTimestampStatus(t,r){try{const n=t.getDataList();if(!n||n.length===0)return{exists:!1,dataIndex:-1,isVisible:!1};const i=n.findIndex(h=>h.timestamp===r);if(i===-1)return{exists:!1,dataIndex:-1,isVisible:!1};const o=t.getVisibleRange();if(!o)return{exists:!0,dataIndex:i,isVisible:!1};const{safeFromIndex:s,safeToIndex:u}=this.getSafeVisibleIndices(o,n.length),c=i>=s&&i<=u;return{exists:!0,dataIndex:i,isVisible:c}}catch(n){return console.error("Error checking timestamp status:",n),{exists:!1,dataIndex:-1,isVisible:!1}}}clearCrosshair(t,r){try{t.executeAction("onCrosshairChange",{paneId:r,x:void 0,y:void 0})}catch(n){console.error("Error clearing crosshair:",n)}}extractPriceValue(t,r){var n,i;if(!(!r||!t.paneId)){if(t.y!==void 0)try{const o=r.convertFromPixel([{y:t.y}],{paneId:t.paneId});if(o&&Array.isArray(o)&&((n=o[0])==null?void 0:n.value)!==void 0)return o[0].value}catch(o){console.error("Error converting Y to price, trying fallback",o)}return(i=t.kLineData)==null?void 0:i.close}}showCrosshair(t,r,n,i,o,s){try{const u=t.getDom(n);if(!u)return!1;const c=u.getBoundingClientRect(),h=i!==void 0?t.convertToPixel({timestamp:r,value:i},{paneId:n}):t.convertToPixel({timestamp:r},{paneId:n});if(!h)return!1;const p=Array.isArray(h)?h[0]:h;if(typeof(p==null?void 0:p.x)!="number")return!1;let g;return typeof(p==null?void 0:p.y)=="number"?g=p.y:s!==void 0&&s>=0&&s<=1?g=Math.floor(c.height*s):o!==void 0?g=o:g=Math.floor(c.height/2),g=Math.max(0,Math.min(c.height,g)),t.executeAction("onCrosshairChange",{paneId:n,x:p.x,y:g}),!0}catch(u){return console.error("Error showing crosshair:",u),!1}}calculateYPercentage(t,r,n){if(n===void 0||!t)return;const i=t.getDom(r);if(!i)return;const o=i.getBoundingClientRect();return o.height>0?n/o.height:void 0}syncCrosshair(t,r){if(!jc.enabled||!r||!r.paneId||r.timestamp===void 0||this.activeCharts.size<=1)return;const n=r.timestamp,i=r.paneId,o=this.activeCharts.get(t);if(!o)return;const s=o.chart,u=this.extractPriceValue(r,s),c=this.calculateYPercentage(s,i,r.y);this.activeCharts.forEach((h,p)=>{if(p===t)return;const g=h.chart;try{const m=this.hasSameSymbol(t,p);this.configureCrosshair(g,m);const b=this.checkTimestampStatus(g,n);let x=!1;if(b.exists&&b.isVisible&&(x=this.showCrosshair(g,n,i,u,r.y,c)),!x){const C=this.findVisibleTimestamp(g,n,i);C&&(x=this.showCrosshair(g,C,i,u,r.y,c))}x||this.clearCrosshair(g,i)}catch(m){console.error(`Error syncing chart ${p}:`,m)}})}};be(I0,"instance",new I0),be(I0,"enabled",!1),be(I0,"timeSyncEnabled",!1);let Mv=I0;const A5=()=>Mv.getInstance(),aF=e=>{Mv.setEnabled(e)},sF=()=>Mv.isEnabled(),Mp=class L0{constructor(){be(this,"activeCharts",new Map)}static getInstance(){return L0.instance}static setEnabled(t){L0.enabled=t}static isEnabled(){return L0.enabled}registerChart(t,r,n,i){this.activeCharts.set(t,{chart:r,symbol:n,type:i})}unregisterChart(t){this.activeCharts.has(t)&&this.activeCharts.delete(t)}updateChartSymbol(t,r,n){const i=this.activeCharts.get(t);i&&(i.symbol=r,i.type=n)}findClosestTimestamp(t,r){try{const n=t.getDataList();if(!n||n.length===0)return null;let i=0,o=n.length-1,s=n[0].timestamp,u=Math.abs(n[0].timestamp-r);for(;i<=o;){const h=Math.floor((i+o)/2),p=n[h].timestamp,g=Math.abs(p-r);if(g<u&&(u=g,s=p),p===r)return p;p<r?i=h+1:o=h-1}const c=Math.round(u/(1e3*60));return s}catch(n){return console.error("Error finding closest timestamp:",n),null}}isTimestampVisible(t,r){try{const n=t.getVisibleRange();if(!n)return!1;const i=t.getDataList();if(!i||i.length===0)return!1;const o=Math.max(0,Math.min(n.from||0,i.length-1)),s=Math.max(0,Math.min(n.to||i.length-1,i.length-1));if(o>s)return!1;const u=i[o].timestamp,c=i[s].timestamp,h=r>=u&&r<=c;if(!h){const p=this.findClosestTimestamp(t,r);if(p)return p>=u&&p<=c}return h}catch(n){return console.error("Error checking timestamp visibility:",n),!1}}scrollToTimestamp(t,r){try{const n=t.getVisibleRange();if(!n)return t.scrollToTimestamp(r),!0;const i=t.getDataList();if(!i||i.length===0)return!1;const o=Math.max(0,Math.min(n.from||0,i.length-1)),s=Math.max(0,Math.min(n.to||i.length-1,i.length-1))-o+1;let u=i.findIndex(p=>p.timestamp===r);if(u===-1){let p=0,g=Math.abs(i[0].timestamp-r);for(let m=1;m<i.length;m++){const b=Math.abs(i[m].timestamp-r);b<g&&(g=b,p=m)}u=p}const c=Math.min(u+s-1,i.length-1),h=i[c].timestamp;return t.scrollToTimestamp(h),!0}catch(n){return console.error("Error scrolling to timestamp:",n),!1}}syncTime(t,r){!L0.enabled||this.activeCharts.size<=1||!this.activeCharts.get(t)||this.activeCharts.forEach((n,i)=>{if(i===t)return;const o=n.chart;try{const s=this.findClosestTimestamp(o,r);if(!s)return;if(s!==r){const c=Math.abs(s-r)}if(this.isTimestampVisible(o,s))return;const u=this.scrollToTimestamp(o,s)}catch(s){console.error(`Error syncing chart ${i}:`,s)}})}};be(Mp,"instance",new Mp),be(Mp,"enabled",!1);let Ev=Mp;const D5=()=>Ev.getInstance(),lF=e=>{Ev.setEnabled(e)},cF=()=>Ev.isEnabled(),F5=class Zg{static setEnabled(t){Zg.enabled=t}static isEnabled(){return Zg.enabled}};be(F5,"enabled",!1);let R5=F5;const uF=e=>{R5.setEnabled(e)},O5=()=>R5.isEnabled();var dF=K('<div class=chartspire-ui-svg-container><div class=chart-layouts><div class=item><span>1</span><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><rect width=41 height=40 fill=none stroke=currentColor rx=4 transform="translate(.5 .5)"></rect></svg></div><div class="item two-chart-row"><span>2</span><div class=two-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path></g></svg></div></div><div class="item three-chart-row"><span>3</span><div class=three-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M13 0v40"></path><path d="M28 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 13h41"></path><path d="M0 28h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M20.5 20h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M0 20h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M20.5 0v20"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M20.5 20v20"></path></g></svg></div></div><div class="item four-chart-row"><span>4</span><div class=four-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M20 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 10h41"></path><path d="M0 20h41"></path><path d="M0 30h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M10 0v40"></path><path d="M20 0v40"></path><path d="M30 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M20.5 13h20.5"></path><path d="M20.5 27h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M0 13h20.5"></path><path d="M0 27h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M13.5 20v20"></path><path d="M27 20v20"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M13.5 0v20"></path><path d="M27 0v20"></path></g></svg></div></div><div class="item five-chart-row"><span>5</span><div class=five-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 8h41"></path><path d="M0 16h41"></path><path d="M0 24h41"></path><path d="M0 32h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M8 0v40"></path><path d="M16 0v40"></path><path d="M24 0v40"></path><path d="M32 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M20.5 10h20.5"></path><path d="M20.5 20h20.5"></path><path d="M20.5 30h20.5"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M20.5 0v40"></path><path d="M0 10h20.5"></path><path d="M0 20h20.5"></path><path d="M0 30h20.5"></path></g></svg></div></div><div class="item six-chart-row"><span>6</span><div class=six-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M13 0v41M27 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M7 0v40"></path><path d="M14 0v40"></path><path d="M21 0v40"></path><path d="M28 0v40"></path><path d="M35 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 7h41"></path><path d="M0 14h41"></path><path d="M0 21h41"></path><path d="M0 28h41"></path><path d="M0 35h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 13h41"></path><path d="M0 27h41"></path><path d="M20 0v40"></path></g></svg></div></div><div class="item seven-chart-row"><span>7</span><div class=seven-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 5.7h41"></path><path d="M0 11.4h41"></path><path d="M0 17.1h41"></path><path d="M0 22.8h41"></path><path d="M0 28.5h41"></path><path d="M0 34.2h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M6 0v40"></path><path d="M12 0v40"></path><path d="M18 0v40"></path><path d="M24 0v40"></path><path d="M30 0v40"></path><path d="M36 0v40"></path></g></svg></div></div><div class="item eight-chart-row"><span>8</span><div class=eight-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M10 0v41M20 0v41M30 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 5h41"></path><path d="M0 10h41"></path><path d="M0 15h41"></path><path d="M0 20h41"></path><path d="M0 25h41"></path><path d="M0 30h41"></path><path d="M0 35h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M5 0v40"></path><path d="M10 0v40"></path><path d="M15 0v40"></path><path d="M20 0v40"></path><path d="M25 0v40"></path><path d="M30 0v40"></path><path d="M35 0v40"></path></g></svg></div></div><div class="item nine-chart-row"><span>9</span><div class=nine-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 13h41"></path><path d="M0 27h41"></path><path d="M13 0v40"></path><path d="M27 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 4.4h41"></path><path d="M0 8.8h41"></path><path d="M0 13.2h41"></path><path d="M0 17.6h41"></path><path d="M0 22h41"></path><path d="M0 26.4h41"></path><path d="M0 30.8h41"></path><path d="M0 35.2h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M4.5 0v40"></path><path d="M9 0v40"></path><path d="M13.5 0v40"></path><path d="M18 0v40"></path><path d="M22.5 0v40"></path><path d="M27 0v40"></path><path d="M31.5 0v40"></path><path d="M36 0v40"></path></g></svg></div></div><div class="item ten-chart-row"><span>10</span><div class=ten-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M8 0v41M16 0v41M24 0v41M32 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 4h41"></path><path d="M0 8h41"></path><path d="M0 12h41"></path><path d="M0 16h41"></path><path d="M0 20h41"></path><path d="M0 24h41"></path><path d="M0 28h41"></path><path d="M0 32h41"></path><path d="M0 36h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M4 0v40"></path><path d="M8 0v40"></path><path d="M12 0v40"></path><path d="M16 0v40"></path><path d="M20 0v40"></path><path d="M24 0v40"></path><path d="M28 0v40"></path><path d="M32 0v40"></path><path d="M36 0v40"></path></g></svg></div></div><div class="item twelve-chart-row"><span>12</span><div class=twelve-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 10h41"></path><path d="M0 20h41"></path><path d="M0 30h41"></path><path d="M13 0v40"></path><path d="M27 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 3.3h41"></path><path d="M0 6.6h41"></path><path d="M0 10h41"></path><path d="M0 13.3h41"></path><path d="M0 16.6h41"></path><path d="M0 20h41"></path><path d="M0 23.3h41"></path><path d="M0 26.6h41"></path><path d="M0 30h41"></path><path d="M0 33.3h41"></path><path d="M0 36.6h41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M3.4 0v40"></path><path d="M6.8 0v40"></path><path d="M10.2 0v40"></path><path d="M13.6 0v40"></path><path d="M17 0v40"></path><path d="M20.4 0v40"></path><path d="M23.8 0v40"></path><path d="M27.2 0v40"></path><path d="M30.6 0v40"></path><path d="M34 0v40"></path><path d="M37.4 0v40"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41"></path><path d="M6.8 0v40"></path><path d="M13.6 0v40"></path><path d="M20.4 0v40"></path><path d="M27.2 0v40"></path><path d="M34 0v40"></path></g></svg></div></div><div class=item><span>14</span><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M6 0v41M12 0v41M18 0v41M24 0v41M30 0v41M36 0v41"></path></g></svg></div><div class="item sixteen-chart-row"><span>16</span><div class=sixteen-chart-options><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 20h41M5 0v41M10 0v41M15 0v41M20 0v41M25 0v41M30 0v41M35 0v41"></path></g></svg><svg xmlns=http://www.w3.org/2000/svg width=42 height=41><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=41 height=40 rx=2></rect><path d="M0 10h41M0 20h41M0 30h41M10 0v40M20 0v40M30 0v40"></path></g></svg></div></div></div><div class=sync-controls><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark></span></label><label class=checkbox-container><span></span><input type=checkbox><span class=checkmark>');const hF=e=>{const[t,r]=me(sF()),[n,i]=me(cF()),[o,s]=me(XT()),[u,c]=me(O5()),[h,p]=me(Nd()),g=M=>{e.onConfirm!=null&&e.onConfirm(M,e9),e.onClose!=null&&e.onClose()},m=M=>(M===X.TWO_VERTICAL?2:M===X.THREE_VERTICAL||M===X.THREE_MIXED||M===X.THREE_MIXED_REVERSE||M===X.THREE_MIXED_BOTTOM||M===X.THREE_MIXED_TOP?3:M===X.FOUR_VERTICAL||M===X.FOUR_HORIZONTAL||M===X.FOUR_MIXED||M===X.FOUR_MIXED_REVERSE||M===X.FOUR_MIXED_TOP||M===X.FOUR_MIXED_BOTTOM?4:M===X.FIVE_VERTICAL||M===X.FIVE_HORIZONTAL||M===X.FIVE_MIXED||M===X.FIVE_MIXED_REVERSE||M===X.FIVE_MIXED_TOP?5:M===X.SIX_HORIZONTAL||M===X.SIX_VERTICAL||M===X.SIX_MIXED?6:M===X.SEVEN_HORIZONTAL||M===X.SEVEN_VERTICAL?7:M===X.EIGHT||M===X.EIGHT_VERTICAL||M===X.EIGHT_HORIZONTAL?8:M===X.NINE||M===X.NINE_VERTICAL||M===X.NINE_HORIZONTAL?9:M===X.TEN||M===X.TEN_VERTICAL||M===X.TEN_HORIZONTAL?10:M===X.TWELVE||M===X.TWELVE_VERTICAL||M===X.TWELVE_HORIZONTAL||M===X.TWELVE_GRID?12:M===X.SIXTEEN||M===X.SIXTEEN_GRID?16:M)<=e.maxMultiChart,b=M=>{const L=M.target.checked;r(L),aF(L)},x=M=>{const L=M.target.checked;i(L),lF(L)},C=M=>{const L=M.target.checked;s(L),jT(L)},_=M=>{const L=M.target.checked;c(L),uF(L)},k=M=>{const L=M.target.checked;p(L),UT(L)};return Y(zl,{get title(){return I("multichart",e.locale)},width:500,padding:"20px 35px",get onClose(){return e.onClose},get children(){var M=dF(),L=M.firstChild,D=L.firstChild,P=D.firstChild,$=P.nextSibling,A=D.nextSibling,N=A.firstChild,z=N.nextSibling,B=z.firstChild,Q=B.nextSibling,ne=A.nextSibling,Z=ne.firstChild,J=Z.nextSibling,ue=J.firstChild,le=ue.nextSibling,ae=le.nextSibling,te=ae.nextSibling,ve=te.nextSibling,pe=ve.nextSibling,j=ne.nextSibling,H=j.firstChild,de=H.nextSibling,U=de.firstChild,fe=U.nextSibling,ce=fe.nextSibling,Oe=ce.nextSibling,Ee=Oe.nextSibling,Fe=Ee.nextSibling,Ce=Fe.nextSibling,Te=j.nextSibling,et=Te.firstChild,Qe=et.nextSibling,it=Qe.firstChild,He=it.nextSibling,ct=He.nextSibling,ut=ct.nextSibling,Qt=Te.nextSibling,Gt=Qt.firstChild,Mt=Gt.nextSibling,gt=Mt.firstChild,Yt=gt.nextSibling,cn=Yt.nextSibling,xn=cn.nextSibling,dr=Qt.nextSibling,Rt=dr.firstChild,Zt=Rt.nextSibling,nr=Zt.firstChild,Kr=nr.nextSibling,hr=dr.nextSibling,Br=hr.firstChild,Et=Br.nextSibling,We=Et.firstChild,_t=We.nextSibling,wt=_t.nextSibling,St=hr.nextSibling,Ct=St.firstChild,Ut=Ct.nextSibling,Kt=Ut.firstChild,mr=Kt.nextSibling,pr=mr.nextSibling,cr=St.nextSibling,ti=cr.firstChild,Hr=ti.nextSibling,Ur=Hr.firstChild,ri=Ur.nextSibling,Pt=ri.nextSibling,Pr=cr.nextSibling,kt=Pr.firstChild,Ar=kt.nextSibling,wr=Ar.firstChild,fr=wr.nextSibling,rn=fr.nextSibling,jr=rn.nextSibling,nn=Pr.nextSibling,wn=nn.firstChild,An=wn.nextSibling,ji=nn.nextSibling,uo=ji.firstChild,Ya=uo.nextSibling,mi=Ya.firstChild,da=mi.nextSibling,$s=L.nextSibling,ha=$s.firstChild,Za=ha.firstChild,Ka=Za.nextSibling,$l=ha.nextSibling,Wl=$l.firstChild,qa=Wl.nextSibling,Jc=$l.nextSibling,yr=Jc.firstChild,eu=yr.nextSibling,Ws=Jc.nextSibling,Hl=Ws.firstChild,pa=Hl.nextSibling,tu=Ws.nextSibling,Hs=tu.firstChild,Qa=Hs.nextSibling;return $.$$click=()=>{g(X.ONE)},B.$$click=()=>{g(X.TWO)},Q.$$click=()=>{g(X.TWO_VERTICAL)},ue.$$click=()=>{g(X.THREE)},le.$$click=()=>{g(X.THREE_VERTICAL)},ae.$$click=()=>{g(X.THREE_MIXED)},te.$$click=()=>{g(X.THREE_MIXED_REVERSE)},ve.$$click=()=>{g(X.THREE_MIXED_BOTTOM)},pe.$$click=()=>{g(X.THREE_MIXED_TOP)},U.$$click=()=>{g(X.FOUR)},fe.$$click=()=>{g(X.FOUR_VERTICAL)},ce.$$click=()=>{g(X.FOUR_HORIZONTAL)},Oe.$$click=()=>{g(X.FOUR_MIXED)},Ee.$$click=()=>{g(X.FOUR_MIXED_REVERSE)},Fe.$$click=()=>{g(X.FOUR_MIXED_TOP)},Ce.$$click=()=>{g(X.FOUR_MIXED_BOTTOM)},it.$$click=()=>{g(X.FIVE_VERTICAL)},He.$$click=()=>{g(X.FIVE_HORIZONTAL)},ct.$$click=()=>{g(X.FIVE_MIXED)},ut.$$click=()=>{g(X.FIVE_MIXED_REVERSE)},gt.$$click=()=>{g(X.SIX)},Yt.$$click=()=>{g(X.SIX_HORIZONTAL)},cn.$$click=()=>{g(X.SIX_VERTICAL)},xn.$$click=()=>{g(X.SIX_MIXED)},nr.$$click=()=>{g(X.SEVEN_VERTICAL)},Kr.$$click=()=>{g(X.SEVEN_HORIZONTAL)},We.$$click=()=>{g(X.EIGHT)},_t.$$click=()=>{g(X.EIGHT_VERTICAL)},wt.$$click=()=>{g(X.EIGHT_HORIZONTAL)},Kt.$$click=()=>{g(X.NINE)},mr.$$click=()=>{g(X.NINE_VERTICAL)},pr.$$click=()=>{g(X.NINE_HORIZONTAL)},Ur.$$click=()=>{g(X.TEN)},ri.$$click=()=>{g(X.TEN_VERTICAL)},Pt.$$click=()=>{g(X.TEN_HORIZONTAL)},wr.$$click=()=>{g(X.TWELVE)},fr.$$click=()=>{g(X.TWELVE_VERTICAL)},rn.$$click=()=>{g(X.TWELVE_HORIZONTAL)},jr.$$click=()=>{g(X.TWELVE_GRID)},An.$$click=()=>{g(X.FOURTEEN)},mi.$$click=()=>{g(X.SIXTEEN)},da.$$click=()=>{g(X.SIXTEEN_GRID)},F(Za,()=>I("enable_crosshair_sync",e.locale)),Ka.addEventListener("change",b),F(Wl,()=>I("enable_time_sync",e.locale)),qa.addEventListener("change",x),F(yr,()=>I("enable_symbol_sync",e.locale)),eu.addEventListener("change",C),F(Hl,()=>I("enable_interval_sync",e.locale)),pa.addEventListener("change",_),F(Hs,()=>I("enable_drawing_sync",e.locale)),Qa.addEventListener("change",k),Ae(ze=>{var ru=m(X.ONE)?"active":"inactive",ni=m(X.TWO)?"active":"inactive",Ul=m(X.TWO_VERTICAL)?"active":"inactive",jl=m(X.THREE)?"active":"inactive",Xl=m(X.THREE_VERTICAL)?"active":"inactive",zo=m(X.THREE_MIXED)?"active":"inactive",Ga=m(X.THREE_MIXED_REVERSE)?"active":"inactive",Vo=m(X.THREE_MIXED_BOTTOM)?"active":"inactive",ho=m(X.THREE_MIXED_TOP)?"active":"inactive",Yl=m(X.FOUR)?"active":"inactive",nu=m(X.FOUR_VERTICAL)?"active":"inactive",Ja=m(X.FOUR_HORIZONTAL)?"active":"inactive",Us=m(X.FOUR_MIXED)?"active":"inactive",fa=m(X.FOUR_MIXED_REVERSE)?"active":"inactive",ga=m(X.FOUR_MIXED_TOP)?"active":"inactive",Zl=m(X.FOUR_MIXED_BOTTOM)?"active":"inactive",va=m(X.FIVE_VERTICAL)?"active":"inactive",qt=m(X.FIVE_HORIZONTAL)?"active":"inactive",po=m(X.FIVE_MIXED)?"active":"inactive",js=m(X.FIVE_MIXED_REVERSE)?"active":"inactive",es=m(X.SIX)?"active":"inactive",Kl=m(X.SIX_HORIZONTAL)?"active":"inactive",Xs=m(X.SIX_VERTICAL)?"active":"inactive",Ys=m(X.SIX_MIXED)?"active":"inactive",ts=m(X.SEVEN_VERTICAL)?"active":"inactive",ma=m(X.SEVEN_HORIZONTAL)?"active":"inactive",Xi=m(X.EIGHT)?"active":"inactive",Yi=m(X.EIGHT_VERTICAL)?"active":"inactive",Zi=m(X.EIGHT_HORIZONTAL)?"active":"inactive",Bo=m(X.NINE)?"active":"inactive",ya=m(X.NINE_VERTICAL)?"active":"inactive",Ki=m(X.NINE_HORIZONTAL)?"active":"inactive",iu=m(X.TEN)?"active":"inactive",ql=m(X.TEN_VERTICAL)?"active":"inactive",fo=m(X.TEN_HORIZONTAL)?"active":"inactive",ou=m(X.TWELVE)?"active":"inactive",Ql=m(X.TWELVE_VERTICAL)?"active":"inactive",rs=m(X.TWELVE_HORIZONTAL)?"active":"inactive",Gl=m(X.TWELVE_GRID)?"active":"inactive",au=m(X.FOURTEEN)?"active":"inactive",ir=m(X.SIXTEEN)?"active":"inactive",Jt=m(X.SIXTEEN_GRID)?"active":"inactive";return ru!==ze.e&&Be($,"class",ze.e=ru),ni!==ze.t&&Be(B,"class",ze.t=ni),Ul!==ze.a&&Be(Q,"class",ze.a=Ul),jl!==ze.o&&Be(ue,"class",ze.o=jl),Xl!==ze.i&&Be(le,"class",ze.i=Xl),zo!==ze.n&&Be(ae,"class",ze.n=zo),Ga!==ze.s&&Be(te,"class",ze.s=Ga),Vo!==ze.h&&Be(ve,"class",ze.h=Vo),ho!==ze.r&&Be(pe,"class",ze.r=ho),Yl!==ze.d&&Be(U,"class",ze.d=Yl),nu!==ze.l&&Be(fe,"class",ze.l=nu),Ja!==ze.u&&Be(ce,"class",ze.u=Ja),Us!==ze.c&&Be(Oe,"class",ze.c=Us),fa!==ze.w&&Be(Ee,"class",ze.w=fa),ga!==ze.m&&Be(Fe,"class",ze.m=ga),Zl!==ze.f&&Be(Ce,"class",ze.f=Zl),va!==ze.y&&Be(it,"class",ze.y=va),qt!==ze.g&&Be(He,"class",ze.g=qt),po!==ze.p&&Be(ct,"class",ze.p=po),js!==ze.b&&Be(ut,"class",ze.b=js),es!==ze.T&&Be(gt,"class",ze.T=es),Kl!==ze.A&&Be(Yt,"class",ze.A=Kl),Xs!==ze.O&&Be(cn,"class",ze.O=Xs),Ys!==ze.I&&Be(xn,"class",ze.I=Ys),ts!==ze.S&&Be(nr,"class",ze.S=ts),ma!==ze.W&&Be(Kr,"class",ze.W=ma),Xi!==ze.C&&Be(We,"class",ze.C=Xi),Yi!==ze.B&&Be(_t,"class",ze.B=Yi),Zi!==ze.v&&Be(wt,"class",ze.v=Zi),Bo!==ze.k&&Be(Kt,"class",ze.k=Bo),ya!==ze.x&&Be(mr,"class",ze.x=ya),Ki!==ze.j&&Be(pr,"class",ze.j=Ki),iu!==ze.q&&Be(Ur,"class",ze.q=iu),ql!==ze.z&&Be(ri,"class",ze.z=ql),fo!==ze.P&&Be(Pt,"class",ze.P=fo),ou!==ze.H&&Be(wr,"class",ze.H=ou),Ql!==ze.F&&Be(fr,"class",ze.F=Ql),rs!==ze.M&&Be(rn,"class",ze.M=rs),Gl!==ze.D&&Be(jr,"class",ze.D=Gl),au!==ze.R&&Be(An,"class",ze.R=au),ir!==ze.E&&Be(mi,"class",ze.E=ir),Jt!==ze.L&&Be(da,"class",ze.L=Jt),ze},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0,x:void 0,j:void 0,q:void 0,z:void 0,P:void 0,H:void 0,F:void 0,M:void 0,D:void 0,R:void 0,E:void 0,L:void 0}),Ae(()=>Ka.checked=t()),Ae(()=>qa.checked=n()),Ae(()=>eu.checked=o()),Ae(()=>pa.checked=u()),Ae(()=>Qa.checked=h()),M}})};Dt(["click"]);const pF=e=>Y(hF,{get multiChart(){return e.multiChart},get maxMultiChart(){return e.maxMultiCharts},get onConfirm(){return e.onMultiChartClick},onClose:()=>{e.setMultiChartModalVisible(!1)},get locale(){return e.locale}});var fF=typeof As=="object"&&As&&As.Object===Object&&As,gF=fF,vF=gF,mF=typeof self=="object"&&self&&self.Object===Object&&self,yF=vF||mF||Function("return this")(),Tv=yF,bF=Tv,xF=bF.Symbol,Iv=xF,dy=Iv,N5=Object.prototype,wF=N5.hasOwnProperty,CF=N5.toString,S0=dy?dy.toStringTag:void 0;function _F(e){var t=wF.call(e,S0),r=e[S0];try{e[S0]=void 0;var n=!0}catch{}var i=CF.call(e);return n&&(t?e[S0]=r:delete e[S0]),i}var SF=_F,kF=Object.prototype,MF=kF.toString;function EF(e){return MF.call(e)}var TF=EF,hy=Iv,IF=SF,LF=TF,PF="[object Null]",AF="[object Undefined]",py=hy?hy.toStringTag:void 0;function DF(e){return e==null?e===void 0?AF:PF:py&&py in Object(e)?IF(e):LF(e)}var z5=DF;function FF(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Lv=FF,RF=z5,OF=Lv,NF="[object AsyncFunction]",zF="[object Function]",VF="[object GeneratorFunction]",BF="[object Proxy]";function $F(e){if(!OF(e))return!1;var t=RF(e);return t==zF||t==VF||t==NF||t==BF}var WF=$F,HF=Tv,UF=HF["__core-js_shared__"],jF=UF,Cg=jF,fy=(function(){var e=/[^.]+$/.exec(Cg&&Cg.keys&&Cg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function XF(e){return!!fy&&fy in e}var YF=XF,ZF=Function.prototype,KF=ZF.toString;function qF(e){if(e!=null){try{return KF.call(e)}catch{}try{return e+""}catch{}}return""}var QF=qF,GF=WF,JF=YF,eR=Lv,tR=QF,rR=/[\\^$.*+?()[\]{}|]/g,nR=/^\[object .+?Constructor\]$/,iR=Function.prototype,oR=Object.prototype,aR=iR.toString,sR=oR.hasOwnProperty,lR=RegExp("^"+aR.call(sR).replace(rR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cR(e){if(!eR(e)||JF(e))return!1;var t=GF(e)?lR:nR;return t.test(tR(e))}var uR=cR;function dR(e,t){return e==null?void 0:e[t]}var hR=dR,pR=uR,fR=hR;function gR(e,t){var r=fR(e,t);return pR(r)?r:void 0}var Pv=gR,vR=Pv,mR=(function(){try{var e=vR(Object,"defineProperty");return e({},"",{}),e}catch{}})(),yR=mR,gy=yR;function bR(e,t,r){t=="__proto__"&&gy?gy(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var xR=bR;function wR(e,t){return e===t||e!==e&&t!==t}var V5=wR,CR=xR,_R=V5,SR=Object.prototype,kR=SR.hasOwnProperty;function MR(e,t,r){var n=e[t];(!(kR.call(e,t)&&_R(n,r))||r===void 0&&!(t in e))&&CR(e,t,r)}var ER=MR,TR=Array.isArray,Av=TR;function IR(e){return e!=null&&typeof e=="object"}var LR=IR,PR=z5,AR=LR,DR="[object Symbol]";function FR(e){return typeof e=="symbol"||AR(e)&&PR(e)==DR}var Dv=FR,RR=Av,OR=Dv,NR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zR=/^\w*$/;function VR(e,t){if(RR(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||OR(e)?!0:zR.test(e)||!NR.test(e)||t!=null&&e in Object(t)}var BR=VR,$R=Pv,WR=$R(Object,"create"),tf=WR,vy=tf;function HR(){this.__data__=vy?vy(null):{},this.size=0}var UR=HR;function jR(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var XR=jR,YR=tf,ZR="__lodash_hash_undefined__",KR=Object.prototype,qR=KR.hasOwnProperty;function QR(e){var t=this.__data__;if(YR){var r=t[e];return r===ZR?void 0:r}return qR.call(t,e)?t[e]:void 0}var GR=QR,JR=tf,eO=Object.prototype,tO=eO.hasOwnProperty;function rO(e){var t=this.__data__;return JR?t[e]!==void 0:tO.call(t,e)}var nO=rO,iO=tf,oO="__lodash_hash_undefined__";function aO(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=iO&&t===void 0?oO:t,this}var sO=aO,lO=UR,cO=XR,uO=GR,dO=nO,hO=sO;function nh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}nh.prototype.clear=lO;nh.prototype.delete=cO;nh.prototype.get=uO;nh.prototype.has=dO;nh.prototype.set=hO;var pO=nh;function fO(){this.__data__=[],this.size=0}var gO=fO,vO=V5;function mO(e,t){for(var r=e.length;r--;)if(vO(e[r][0],t))return r;return-1}var rf=mO,yO=rf,bO=Array.prototype,xO=bO.splice;function wO(e){var t=this.__data__,r=yO(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():xO.call(t,r,1),--this.size,!0}var CO=wO,_O=rf;function SO(e){var t=this.__data__,r=_O(t,e);return r<0?void 0:t[r][1]}var kO=SO,MO=rf;function EO(e){return MO(this.__data__,e)>-1}var TO=EO,IO=rf;function LO(e,t){var r=this.__data__,n=IO(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var PO=LO,AO=gO,DO=CO,FO=kO,RO=TO,OO=PO;function ih(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ih.prototype.clear=AO;ih.prototype.delete=DO;ih.prototype.get=FO;ih.prototype.has=RO;ih.prototype.set=OO;var NO=ih,zO=Pv,VO=Tv,BO=zO(VO,"Map"),$O=BO,my=pO,WO=NO,HO=$O;function UO(){this.size=0,this.__data__={hash:new my,map:new(HO||WO),string:new my}}var jO=UO;function XO(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var YO=XO,ZO=YO;function KO(e,t){var r=e.__data__;return ZO(t)?r[typeof t=="string"?"string":"hash"]:r.map}var nf=KO,qO=nf;function QO(e){var t=qO(this,e).delete(e);return this.size-=t?1:0,t}var GO=QO,JO=nf;function eN(e){return JO(this,e).get(e)}var tN=eN,rN=nf;function nN(e){return rN(this,e).has(e)}var iN=nN,oN=nf;function aN(e,t){var r=oN(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var sN=aN,lN=jO,cN=GO,uN=tN,dN=iN,hN=sN;function oh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}oh.prototype.clear=lN;oh.prototype.delete=cN;oh.prototype.get=uN;oh.prototype.has=dN;oh.prototype.set=hN;var pN=oh,B5=pN,fN="Expected a function";function Fv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(fN);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Fv.Cache||B5),r}Fv.Cache=B5;var gN=Fv,vN=gN,mN=500;function yN(e){var t=vN(e,function(n){return r.size===mN&&r.clear(),n}),r=t.cache;return t}var bN=yN,xN=bN,wN=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,CN=/\\(\\)?/g,_N=xN(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(wN,function(r,n,i,o){t.push(i?o.replace(CN,"$1"):n||r)}),t}),SN=_N;function kN(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var MN=kN,yy=Iv,EN=MN,TN=Av,IN=Dv,by=yy?yy.prototype:void 0,xy=by?by.toString:void 0;function $5(e){if(typeof e=="string")return e;if(TN(e))return EN(e,$5)+"";if(IN(e))return xy?xy.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var LN=$5,PN=LN;function AN(e){return e==null?"":PN(e)}var DN=AN,FN=Av,RN=BR,ON=SN,NN=DN;function zN(e,t){return FN(e)?e:RN(e,t)?[e]:ON(NN(e))}var W5=zN,VN=9007199254740991,BN=/^(?:0|[1-9]\d*)$/;function $N(e,t){var r=typeof e;return t=t??VN,!!t&&(r=="number"||r!="symbol"&&BN.test(e))&&e>-1&&e%1==0&&e<t}var WN=$N,HN=Dv;function UN(e){if(typeof e=="string"||HN(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var H5=UN,jN=ER,XN=W5,YN=WN,wy=Lv,ZN=H5;function KN(e,t,r,n){if(!wy(e))return e;t=XN(t,e);for(var i=-1,o=t.length,s=o-1,u=e;u!=null&&++i<o;){var c=ZN(t[i]),h=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(i!=s){var p=u[c];h=n?n(p,c,u):void 0,h===void 0&&(h=wy(p)?p:YN(t[i+1])?[]:{})}jN(u,c,h),u=u[c]}return e}var qN=KN,QN=qN;function GN(e,t,r){return e==null?e:QN(e,t,r)}var JN=GN;const P0=k2(JN);var ez=W5,tz=H5;function rz(e,t){t=ez(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[tz(t[r++])];return r&&r==n?e:void 0}var nz=rz,iz=nz;function oz(e,t,r){var n=e==null?void 0:iz(e,t);return n===void 0?r:n}var az=oz;const sz=k2(az),Bs=e=>{const t=[{key:"solid",text:I("solid",e)},{key:"dashed",text:I("dashed",e)}],r=[{key:"true",text:!0},{key:"false",text:!1}],n=[{key:1,text:1},{key:2,text:2},{key:3,text:3},{key:4,text:4},{key:5,text:5},{key:6,text:6},{key:7,text:7},{key:8,text:8},{key:9,text:9},{key:10,text:10}],i=[{key:"fill",text:I("fill",e)},{key:"stroke",text:I("stroke",e)},{key:"stroke_fill",text:I("stroke_fill",e)}],o=[{key:"none",text:I("none",e)},{key:"always",text:I("always",e)},{key:"follow_cross",text:I("follow_cross",e)}],s=[{key:10,text:10},{key:11,text:11},{key:12,text:12},{key:14,text:14},{key:16,text:16},{key:18,text:18},{key:20,text:20},{key:22,text:22},{key:24,text:24}],u=[{key:"normal",text:I("Normal",e)}],c=[{key:"Helvetica Neue",text:I("Helvetica Neue",e)}],h=[{key:"current_open",text:I("current_open",e)},{key:"previous_close",text:I("previous_close",e)}];return{solid_dashed:t,size:n,fill_stroke:i,font_family:c,font_size:s,font_weight:u,none_always_followCross:o,true_false:r,compare_rule:h,text_offset:[{key:1,text:1},{key:2,text:2},{key:3,text:3},{key:4,text:4},{key:5,text:5},{key:6,text:6},{key:7,text:7},{key:8,text:8},{key:9,text:9},{key:10,text:10}],dashed_values:[{key:[2,2],text:"[2, 2]"},{key:[4,4],text:"[4, 4]"},{key:[6,6],text:"[6, 6]"},{key:[8,8],text:"[8, 8]"},{key:[2,4],text:"[2, 4]"},{key:[4,2],text:"[4, 2]"}]}},U5=e=>{const{font_family:t,font_size:r,font_weight:n,size:i,solid_dashed:o,fill_stroke:s,none_always_followCross:u,compare_rule:c,text_offset:h,dashed_values:p}=Bs(e);return[{key:"candle.type",text:I("candle_type",e),component:"select",dataSource:[{key:"heikin_ashi",text:I("heikin_ashi",e)},{key:"candle_solid",text:I("candle_solid",e)},{key:"candle_stroke",text:I("candle_stroke",e)},{key:"candle_up_stroke",text:I("candle_up_stroke",e)},{key:"candle_down_stroke",text:I("candle_down_stroke",e)},{key:"ohlc",text:I("ohlc",e)},{key:"area",text:I("area",e)},{key:"renko",text:I("renko",e)}]},{key:"candle.bar.compareRule",text:I("candle.bar.compareRule",e),component:"select",dataSource:c},{key:"candle.bar.upColor",text:I("candle.bar.upColor",e),component:"color"},{key:"candle.bar.downColor",text:I("candle.bar.downColor",e),component:"color"},{key:"candle.bar.noChangeColor",text:I("candle.bar.noChangeColor",e),component:"color"},{key:"candle.bar.upBorderColor",text:I("candle.bar.upBorderColor",e),component:"color"},{key:"candle.bar.downBorderColor",text:I("candle.bar.downBorderColor",e),component:"color"},{key:"candle.bar.noChangeBorderColor",text:I("candle.bar.noChangeBorderColor",e),component:"color"},{key:"candle.bar.upWickColor",text:I("candle.bar.upWickColor",e),component:"color"},{key:"candle.bar.downWickColor",text:I("candle.bar.downWickColor",e),component:"color"},{key:"candle.bar.noChangeWickColor",text:I("candle.bar.noChangeWickColor",e),component:"color"},{key:"candle.area.lineSize",text:I("candle.area.lineSize",e),component:"select",dataSource:i},{key:"candle.area.lineColor",text:I("candle.area.lineColor",e),component:"color"},{key:"candle.area.value",text:I("candle.area.value",e),component:"select",dataSource:[{key:"close",text:I("close",e)},{key:"open",text:I("open",e)},{key:"high",text:I("high",e)},{key:"low",text:I("low",e)}]},{key:"candle.area.smooth",text:I("candle.area.smooth",e),component:"switch"},{key:"candle.area.point.show",text:I("candle.area.point.show",e),component:"switch"},{key:"candle.area.point.color",text:I("candle.area.point.color",e),component:"color"},{key:"candle.area.point.radius",text:I("candle.area.point.radius",e),component:"select",dataSource:i},{key:"candle.area.point.rippleColor",text:I("candle.area.point.rippleColor",e),component:"color"},{key:"candle.area.point.rippleRadius",text:I("candle.area.point.rippleRadius",e),component:"select",dataSource:i},{key:"candle.area.point.animation",text:I("candle.area.point.animation",e),component:"switch"},{key:"candle.renko.brick.size",text:I("candle.renko.brick.size",e),component:"select",dataSource:[{key:1,text:1},{key:2,text:2},{key:3,text:3},{key:4,text:4},{key:5,text:5},{key:10,text:10},{key:15,text:15},{key:20,text:20},{key:25,text:25},{key:50,text:50}]},{key:"candle.priceMark.show",text:I("candle.priceMark.show",e),component:"switch"},{key:"candle.priceMark.high.show",text:I("high_price_show",e),component:"switch"},{key:"candle.priceMark.high.color",text:I("candle.priceMark.high.color",e),component:"color"},{key:"candle.priceMark.high.textOffset",text:I("candle.priceMark.high.textOffset",e),component:"select",dataSource:h},{key:"candle.priceMark.high.textSize",text:I("candle.priceMark.high.textSize",e),component:"select",dataSource:r},{key:"candle.priceMark.high.textFamily",text:I("candle.priceMark.high.textFamily",e),component:"select",dataSource:t},{key:"candle.priceMark.high.textWeight",text:I("candle.priceMark.high.textWeight",e),component:"select",dataSource:n},{key:"candle.priceMark.low.show",text:I("low_price_show",e),component:"switch"},{key:"candle.priceMark.low.color",text:I("candle.priceMark.low.color",e),component:"color"},{key:"candle.priceMark.low.textOffset",text:I("candle.priceMark.low.textOffset",e),component:"select",dataSource:h},{key:"candle.priceMark.low.textSize",text:I("candle.priceMark.low.textSize",e),component:"select",dataSource:r},{key:"candle.priceMark.low.textFamily",text:I("candle.priceMark.low.textFamily",e),component:"select",dataSource:t},{key:"candle.priceMark.low.textWeight",text:I("candle.priceMark.low.textWeight",e),component:"select",dataSource:n},{key:"candle.priceMark.last.show",text:I("candle.priceMark.last.show",e),component:"switch"},{key:"candle.priceMark.last.compareRule",text:I("candle.priceMark.last.compareRule",e),component:"select",dataSource:c},{key:"candle.priceMark.last.upColor",text:I("candle.priceMark.last.upColor",e),component:"color"},{key:"candle.priceMark.last.downColor",text:I("candle.priceMark.last.downColor",e),component:"color"},{key:"candle.priceMark.last.noChangeColor",text:I("candle.priceMark.last.noChangeColor",e),component:"color"},{key:"candle.priceMark.last.line.show",text:I("candle.priceMark.last.line.show",e),component:"switch"},{key:"candle.priceMark.last.line.style",text:I("candle.priceMark.last.line.style",e),component:"select",dataSource:o},{key:"candle.priceMark.last.line.size",text:I("candle.priceMark.last.line.size",e),component:"select",dataSource:i},{key:"candle.priceMark.last.line.dashedValue",text:I("candle.priceMark.last.line.dashedValue",e),component:"select",dataSource:p},{key:"candle.priceMark.last.text.show",text:I("candle.priceMark.last.text.show",e),component:"switch"},{key:"candle.priceMark.last.text.style",text:I("candle.priceMark.last.text.style",e),component:"select",dataSource:s},{key:"candle.priceMark.last.text.size",text:I("candle.priceMark.last.text.size",e),component:"select",dataSource:r},{key:"candle.priceMark.last.text.color",text:I("candle.priceMark.last.text.color",e),component:"color"},{key:"candle.tooltip.showRule",text:I("candle.tooltip.showRule",e),component:"select",dataSource:u},{key:"candle.tooltip.showType",text:I("candle.tooltip.showType",e),component:"select",dataSource:[{key:"rect",text:I("Rect",e)},{key:"standard",text:I("Standard",e)}]},{key:"candle.tooltip.rect.position",text:I("candle.tooltip.rect.position",e),component:"select",dataSource:[{key:"fixed",text:I("Fixed",e)},{key:"pointer",text:I("Pointer",e)}]},{key:"candle.tooltip.rect.color",text:I("candle.tooltip.rect.color",e),component:"color"},{key:"candle.tooltip.rect.borderColor",text:I("candle.tooltip.rect.borderColor",e),component:"color"},{key:"candle.tooltip.text.size",text:I("candle.tooltip.text.size",e),component:"select",dataSource:r},{key:"candle.tooltip.text.weight",text:I("candle.tooltip.text.weight",e),component:"select",dataSource:n},{key:"candle.tooltip.text.color",text:I("candle.tooltip.text.color",e),component:"color"}]},lz=e=>{const{fill_stroke:t,font_size:r,font_weight:n,none_always_followCross:i,solid_dashed:o,size:s,dashed_values:u}=Bs(e);return[{key:"indicator.lastValueMark.show",text:I("indicator.lastValueMark.show",e),component:"switch"},{key:"indicator.lastValueMark.text.show",text:I("indicator.lastValueMark.text.show",e),component:"switch"},{key:"indicator.lastValueMark.text.style",text:I("indicator.lastValueMark.text.style",e),component:"select",dataSource:t},{key:"indicator.lastValueMark.text.size",text:I("indicator.lastValueMark.text.size",e),component:"select",dataSource:r},{key:"indicator.lastValueMark.text.weight",text:I("indicator.lastValueMark.text.weight",e),component:"select",dataSource:n},{key:"indicator.lastValueMark.text.color",text:I("indicator.lastValueMark.text.color",e),component:"color"},{key:"indicator.lastValueMark.text.borderStyle",text:I("indicator.lastValueMark.text.borderStyle",e),component:"select",dataSource:o},{key:"indicator.lastValueMark.text.borderColor",text:I("indicator.lastValueMark.text.borderColor",e),component:"color"},{key:"indicator.lastValueMark.text.borderSize",text:I("indicator.lastValueMark.text.borderSize",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.borderDashedValue",text:I("indicator.lastValueMark.text.borderDashedValue",e),component:"select",dataSource:u},{key:"indicator.lastValueMark.text.paddingLeft",text:I("indicator.lastValueMark.text.paddingLeft",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.paddingTop",text:I("indicator.lastValueMark.text.paddingTop",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.paddingRight",text:I("indicator.lastValueMark.text.paddingRight",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.paddingBottom",text:I("indicator.lastValueMark.text.paddingBottom",e),component:"select",dataSource:s},{key:"indicator.lastValueMark.text.borderRadius",text:I("indicator.lastValueMark.text.borderRadius",e),component:"select",dataSource:s},{key:"indicator.bars[0].style",text:I("indicator.bars.style",e),component:"select",dataSource:t},{key:"indicator.bars[0].borderStyle",text:I("indicator.bars.borderStyle",e),component:"select",dataSource:o},{key:"indicator.bars[0].borderSize",text:I("indicator.bars.borderSize",e),component:"select",dataSource:s},{key:"indicator.bars[0].borderColor",text:I("indicator.bars.borderColor",e),component:"color"},{key:"indicator.bars[0].borderDashedValue",text:I("indicator.bars.borderDashedValue",e),component:"select",dataSource:u},{key:"indicator.ohlc.upColor",text:I("indicator.ohlc.upColor",e),component:"color"},{key:"indicator.ohlc.downColor",text:I("indicator.ohlc.downColor",e),component:"color"},{key:"indicator.ohlc.noChangeColor",text:I("indicator.ohlc.noChangeColor",e),component:"color"},{key:"indicator.lines[0].style",text:I("indicator.lines.style",e),component:"select",dataSource:o},{key:"indicator.lines[0].size",text:I("indicator.lines.size",e),component:"select",dataSource:s},{key:"indicator.lines[0].color",text:I("indicator.lines.color",e),component:"color"},{key:"indicator.lines[0].dashedValue",text:I("indicator.lines.dashedValue",e),component:"select",dataSource:u},{key:"indicator.tooltip.showRule",text:I("indicator.tooltip.showRule",e),component:"select",dataSource:i},{key:"indicator.tooltip.showType",text:I("indicator.tooltip.showType",e),component:"select",dataSource:[{key:"standard",text:I("Standard",e)},{key:"rect",text:I("Rect",e)}]},{key:"indicator.tooltip.title.show",text:I("indicator.tooltip.title.show",e),component:"switch"},{key:"indicator.tooltip.title.showName",text:I("indicator.tooltip.title.showName",e),component:"switch"},{key:"indicator.tooltip.title.showParams",text:I("indicator.tooltip.title.showParams",e),component:"switch"},{key:"indicator.tooltip.title.size",text:I("indicator.tooltip.title.size",e),component:"select",dataSource:r},{key:"indicator.tooltip.title.weight",text:I("indicator.tooltip.title.weight",e),component:"select",dataSource:n},{key:"indicator.tooltip.title.color",text:I("indicator.tooltip.title.color",e),component:"color"},{key:"indicator.tooltip.title.marginLeft",text:I("indicator.tooltip.title.marginLeft",e),component:"select",dataSource:s},{key:"indicator.tooltip.title.marginTop",text:I("indicator.tooltip.title.marginTop",e),component:"select",dataSource:s},{key:"indicator.tooltip.title.marginRight",text:I("indicator.tooltip.title.marginRight",e),component:"select",dataSource:s},{key:"indicator.tooltip.title.marginBottom",text:I("indicator.tooltip.title.marginBottom",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetTop",text:I("indicator.tooltip.offsetTop",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetLeft",text:I("indicator.tooltip.offsetLeft",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetRight",text:I("indicator.tooltip.offsetRight",e),component:"select",dataSource:s},{key:"indicator.tooltip.offsetBottom",text:I("indicator.tooltip.offsetBottom",e),component:"select",dataSource:s}]},cz=e=>{const{font_size:t,size:r,font_weight:n,font_family:i}=Bs(e);return[{key:"xAxis.show",text:I("xAxis.show",e),component:"switch"},{key:"xAxis.size",text:I("xAxis.size",e),component:"select",dataSource:[{key:"auto",text:I("auto",e)},...r]},{key:"xAxis.axisLine.show",text:I("xAxis.axisLine.show",e),component:"switch"},{key:"xAxis.axisLine.color",text:I("xAxis.axisLine.color",e),component:"color"},{key:"xAxis.axisLine.size",text:I("xAxis.axisLine.size",e),component:"select",dataSource:r},{key:"xAxis.tickText.show",text:I("xAxis.tickText.show",e),component:"switch"},{key:"xAxis.tickText.size",text:I("xAxis.tickText.size",e),component:"select",dataSource:t},{key:"xAxis.tickText.weight",text:I("xAxis.tickText.weight",e),component:"select",dataSource:n},{key:"xAxis.tickText.family",text:I("xAxis.tickText.family",e),component:"select",dataSource:i},{key:"xAxis.tickText.color",text:I("xAxis.tickText.color",e),component:"color"},{key:"xAxis.tickText.marginStart",text:I("xAxis.tickText.marginStart",e),component:"select",dataSource:r},{key:"xAxis.tickText.marginEnd",text:I("xAxis.tickText.marginEnd",e),component:"select",dataSource:r},{key:"xAxis.tickLine.show",text:I("xAxis.tickLine.show",e),component:"switch"},{key:"xAxis.tickLine.size",text:I("xAxis.tickLine.size",e),component:"select",dataSource:r},{key:"xAxis.tickLine.length",text:I("xAxis.tickLine.length",e),component:"select",dataSource:r},{key:"xAxis.tickLine.color",text:I("xAxis.tickLine.color",e),component:"color"}]},uz=e=>{const{size:t,font_weight:r,font_size:n,font_family:i}=Bs(e);return[{key:"yAxis.show",text:I("yAxis.show",e),component:"switch"},{key:"yAxis.size",text:I("yAxis.size",e),component:"select",dataSource:[{key:"auto",text:I("auto",e)},...t]},{key:"yAxis.axisLine.show",text:I("yAxis.axisLine.show",e),component:"switch"},{key:"yAxis.axisLine.size",text:I("yAxis.axisLine.size",e),component:"select",dataSource:t},{key:"yAxis.axisLine.color",text:I("yAxis.axisLine.color",e),component:"color"},{key:"yAxis.tickText.show",text:I("yAxis.tickText.show",e),component:"switch"},{key:"yAxis.tickText.color",text:I("yAxis.tickText.color",e),component:"color"},{key:"yAxis.tickText.size",text:I("yAxis.tickText.size",e),component:"select",dataSource:n},{key:"yAxis.tickText.weight",text:I("yAxis.tickText.weight",e),component:"select",dataSource:r},{key:"yAxis.tickText.family",text:I("yAxis.tickText.family",e),component:"select",dataSource:i},{key:"yAxis.tickText.marginStart",text:I("yAxis.tickText.marginStart",e),component:"select",dataSource:t},{key:"yAxis.tickText.marginEnd",text:I("yAxis.tickText.marginEnd",e),component:"select",dataSource:t},{key:"yAxis.tickLine.show",text:I("yAxis.tickLine.show",e),component:"switch"},{key:"yAxis.tickLine.color",text:I("yAxis.tickLine.color",e),component:"color"},{key:"yAxis.tickLine.size",text:I("yAxis.tickLine.size",e),component:"select",dataSource:t},{key:"yAxis.tickLine.length",text:I("yAxis.tickLine.length",e),component:"select",dataSource:t}]},dz=e=>{const{size:t,solid_dashed:r,dashed_values:n}=Bs(e);return[{key:"grid.show",text:I("grid_show",e),component:"switch"},{key:"grid.horizontal.show",text:I("grid_horizontal_show",e),component:"switch"},{key:"grid.horizontal.size",text:I("grid_horizontal_size",e),component:"select",dataSource:t},{key:"grid.horizontal.color",text:I("grid_horizontal_color",e),component:"color"},{key:"grid.horizontal.style",text:I("grid_horizontal_style",e),component:"select",dataSource:r},{key:"grid.horizontal.dashedValue",text:I("grid_horizontal_dashedValue",e),component:"select",dataSource:n},{key:"grid.vertical.show",text:I("grid_vertical_show",e),component:"switch"},{key:"grid.vertical.size",text:I("grid_vertical_size",e),component:"select",dataSource:t},{key:"grid.vertical.color",text:I("grid_vertical_color",e),component:"color"},{key:"grid.vertical.style",text:I("grid_vertical_style",e),component:"select",dataSource:r},{key:"grid.vertical.dashedValue",text:I("grid_vertical_dashedValue",e),component:"select",dataSource:n}]},hz=e=>{const{solid_dashed:t,fill_stroke:r,size:n,font_size:i,font_weight:o,dashed_values:s}=Bs(e);return[{key:"crosshair.show",text:I("crosshair.show",e),component:"switch"},{key:"crosshair.horizontal.show",text:I("crosshair.horizontal.show",e),component:"switch"},{key:"crosshair.horizontal.line.show",text:I("crosshair.horizontal.line.show",e),component:"switch"},{key:"crosshair.horizontal.line.style",text:I("crosshair.horizontal.line.style",e),component:"select",dataSource:t},{key:"crosshair.horizontal.line.size",text:I("crosshair.horizontal.line.size",e),component:"select",dataSource:n},{key:"crosshair.horizontal.line.color",text:I("crosshair.horizontal.line.color",e),component:"color"},{key:"crosshair.horizontal.line.dashedValue",text:I("crosshair.horizontal.line.dashedValue",e),component:"select",dataSource:s},{key:"crosshair.horizontal.text.show",text:I("crosshair.horizontal.text.show",e),component:"switch"},{key:"crosshair.horizontal.text.style",text:I("crosshair.horizontal.text.style",e),component:"select",dataSource:r},{key:"crosshair.horizontal.text.size",text:I("crosshair.horizontal.text.size",e),component:"select",dataSource:i},{key:"crosshair.horizontal.text.weight",text:I("crosshair.horizontal.text.weight",e),component:"select",dataSource:o},{key:"crosshair.horizontal.text.color",text:I("crosshair.horizontal.text.color",e),component:"color"},{key:"crosshair.horizontal.text.backgroundColor",text:I("crosshair.horizontal.text.backgroundColor",e),component:"color"},{key:"crosshair.vertical.show",text:I("crosshair.vertical.show",e),component:"switch"},{key:"crosshair.vertical.line.show",text:I("crosshair.vertical.line.show",e),component:"switch"},{key:"crosshair.vertical.line.style",text:I("crosshair.vertical.line.style",e),component:"select",dataSource:t},{key:"crosshair.vertical.line.size",text:I("crosshair.vertical.line.size",e),component:"select",dataSource:n},{key:"crosshair.vertical.line.color",text:I("crosshair.vertical.line.color",e),component:"color"},{key:"crosshair.vertical.line.dashedValue",text:I("crosshair.vertical.line.dashedValue",e),component:"select",dataSource:s},{key:"crosshair.vertical.text.show",text:I("crosshair.vertical.text.show",e),component:"switch"},{key:"crosshair.vertical.text.style",text:I("crosshair.vertical.text.style",e),component:"select",dataSource:r},{key:"crosshair.vertical.text.size",text:I("crosshair.vertical.text.size",e),component:"select",dataSource:i},{key:"crosshair.vertical.text.weight",text:I("crosshair.vertical.text.weight",e),component:"select",dataSource:o},{key:"crosshair.vertical.text.color",text:I("crosshair.vertical.text.color",e),component:"color"},{key:"crosshair.vertical.text.backgroundColor",text:I("crosshair.vertical.text.backgroundColor",e),component:"color"}]},j5=e=>{const{solid_dashed:t,fill_stroke:r,size:n,font_size:i,font_weight:o,font_family:s,dashed_values:u}=Bs(e);return[{key:"overlay.point.color",text:I("overlay.point.color",e),component:"color"},{key:"overlay.point.borderColor",text:I("overlay.point.borderColor",e),component:"color"},{key:"overlay.point.borderSize",text:I("overlay.point.borderSize",e),component:"select",dataSource:n},{key:"overlay.point.activeColor",text:I("overlay.point.activeColor",e),component:"color"},{key:"overlay.point.activeBorderColor",text:I("overlay.point.activeBorderColor",e),component:"color"},{key:"overlay.point.activeBorderSize",text:I("overlay.point.activeBorderSize",e),component:"select",dataSource:n},{key:"overlay.point.activeRadius",text:I("overlay.point.activeRadius",e),component:"select",dataSource:n},{key:"overlay.point.radius",text:I("overlay.point.radius",e),component:"select",dataSource:n},{key:"overlay.line.style",text:I("overlay.line.style",e),component:"select",dataSource:t},{key:"overlay.line.smooth",text:I("overlay.line.smooth",e),component:"switch"},{key:"overlay.line.size",text:I("overlay.line.size",e),component:"select",dataSource:n},{key:"overlay.line.color",text:I("overlay.line.color",e),component:"color"},{key:"overlay.line.dashedValue",text:I("overlay.line.dashedValue",e),component:"select",dataSource:u},{key:"overlay.rect.style",text:I("overlay.rect.style",e),component:"select",dataSource:r},{key:"overlay.rect.color",text:I("overlay.rect.color",e),component:"color"},{key:"overlay.rect.borderColor",text:I("overlay.rect.borderColor",e),component:"color"},{key:"overlay.rect.borderSize",text:I("overlay.rect.borderSize",e),component:"select",dataSource:n},{key:"overlay.rect.borderRadius",text:I("overlay.rect.borderRadius",e),component:"select",dataSource:n},{key:"overlay.rect.borderStyle",text:I("overlay.rect.borderStyle",e),component:"select",dataSource:t},{key:"overlay.polygon.style",text:I("Polygon Style",e),component:"select",dataSource:r},{key:"overlay.polygon.color",text:I("overlay.polygon.color",e),component:"color"},{key:"overlay.polygon.borderColor",text:I("overlay.polygon.borderColor",e),component:"color"},{key:"overlay.polygon.borderStyle",text:I("overlay.polygon.borderStyle",e),component:"select",dataSource:t},{key:"overlay.polygon.borderSize",text:I("overlay.polygon.borderSize",e),component:"select",dataSource:n},{key:"overlay.circle.style",text:I("overlay.circle.style",e),component:"select",dataSource:r},{key:"overlay.circle.color",text:I("overlay.circle.color",e),component:"color"},{key:"overlay.circle.borderStyle",text:I("overlay.circle.borderStyle",e),component:"select",dataSource:t},{key:"overlay.circle.borderSize",text:I("overlay.circle.borderSize",e),component:"select",dataSource:n},{key:"overlay.circle.borderColor",text:I("overlay.circle.borderColor",e),component:"color"},{key:"overlay.arc.style",text:I("overlay.arc.style",e),component:"select",dataSource:t},{key:"overlay.arc.size",text:I("overlay.arc.size",e),component:"select",dataSource:n},{key:"overlay.arc.color",text:I("overlay.arc.color",e),component:"color"},{key:"overlay.text.size",text:I("overlay.text.size",e),component:"select",dataSource:i},{key:"overlay.text.weight",text:I("overlay.text.weight",e),component:"select",dataSource:o},{key:"overlay.text.color",text:I("overlay.text.color",e),component:"color"},{key:"overlay.text.style",text:I("overlay.text.style",e),component:"select",dataSource:r},{key:"overlay.text.size",text:I("overlay.text.size",e),component:"select",dataSource:i},{key:"overlay.text.family",text:I("overlay.text.family",e),component:"select",dataSource:s},{key:"overlay.text.weight",text:I("overlay.text.weight",e),component:"select",dataSource:o},{key:"overlay.text.color",text:I("overlay.text.color",e),component:"color"},{key:"overlay.text.backgroundColor",text:I("overlay.text.backgroundColor",e),component:"color"},{key:"overlay.text.borderColor",text:I("overlay.text.borderColor",e),component:"color"},{key:"overlay.text.borderSize",text:I("overlay.text.borderSize",e),component:"select",dataSource:n},{key:"overlay.text.borderStyle",text:I("overlay.text.borderStyle",e),component:"select",dataSource:t},{key:"overlay.text.borderDashedValue",text:I("overlay.text.borderDashedValue",e),component:"select",dataSource:u},{key:"overlay.text.borderRadius",text:I("overlay.text.borderRadius",e),component:"select",dataSource:n},{key:"overlay.text.paddingLeft",text:I("overlay.text.paddingLeft",e),component:"select",dataSource:n},{key:"overlay.text.paddingRight",text:I("overlay.text.paddingRight",e),component:"select",dataSource:n},{key:"overlay.text.paddingTop",text:I("overlay.text.paddingTop",e),component:"select",dataSource:n},{key:"overlay.text.paddingBottom",text:I("overlay.text.paddingBottom",e),component:"select",dataSource:n}]},pz=e=>{const t=j5(e),r={arc:[],circle:[],line:[],point:[],polygon:[],rect:[],text:[]};return t.forEach(n=>{const i=n.key.split(".")[1];r[i]||(r[i]=[]),r[i].push(n)}),r};function Cy(e){const{size:t}=Bs(e);return[...U5(e),...lz(e),...cz(e),...uz(e),...dz(e),...hz(e),...j5(e),{key:"separator.size",text:I("separator.size",e),component:"select",dataSource:t},{key:"separator.color",text:I("separator.color",e),component:"color"},{key:"separator.fill",text:I("separator.fill",e),component:"switch"},{key:"separator.activeBackgroundColor",text:I("separator.activeBackgroundColor",e),component:"color"}]}const _y=e=>(Bs(e),[{key:"axis.name",text:I("pane.axis.name",e),component:"select",dataSource:[{key:"normal",text:I("normal",e)},{key:"percentage",text:I("percentage",e)},{key:"logarithmic",text:I("logarithmic",e)}]},{key:"axis.position",text:I("pane.axis.position",e),component:"select",dataSource:[{key:"right",text:I("right",e)},{key:"left",text:I("left",e)}]},{key:"axis.inside",text:I("pane.axis.inside",e),component:"switch"},{key:"axis.reverse",text:I("pane.axis.reverse",e),component:"switch"},{key:"axis.scrollZoomEnabled",text:I("pane.axis.scrollZoomEnabled",e),component:"switch"},{key:"axis.gap.top",text:I("pane.axis.gap.top",e),component:"number",min:0,max:1,step:.1},{key:"axis.gap.bottom",text:I("pane.axis.gap.bottom",e),component:"number",min:0,max:1,step:.1},{key:"height",text:I("pane.height",e),component:"number",min:50,max:1e3,step:10},{key:"minHeight",text:I("pane.minHeight",e),component:"number",min:30,max:500,step:10},{key:"dragEnabled",text:I("pane.dragEnabled",e),component:"switch"},{key:"state",text:I("pane.state",e),component:"select",dataSource:[{key:"normal",text:I("pane.state.normal",e)},{key:"maximize",text:I("pane.state.maximize",e)},{key:"minimize",text:I("pane.state.minimize",e)}]}]);var fz=K("<div class=chartspire-ui-setting-modal-content><div><div class=sidebar-header></div></div><div>"),gz=K("<button>"),Sy=K("<div class=component><span>");const vz=e=>{const[t,r]=me(e.currentStyles),[n,i]=me(Cy(e.locale)),[o,s]=me(_y(e.locale)),u=()=>{const D=e.widget.getPaneOptions("candle_pane");return D===null?{}:Array.isArray(D)?D.length>0?D[0]:{}:D||{}},[c,h]=me(u()),[p,g]=me("candle"),[m,b]=me(!1),x=()=>{window.innerWidth<=768&&b(!0)};tt(()=>(x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x))),tt(()=>{i(Cy(e.locale)),s(_y(e.locale)),h(u())});const C=(D,P)=>{const $={};P0($,D.key,P);const A=vn.clone(t());P0(A,D.key,P),r(A),e.onChange($)},_=(D,P)=>{const $={id:"candle_pane"};P0($,D.key,P);const A=vn.clone(c());P0(A,D.key,P),h(A),e.widget.setPaneOptions($),e.onPaneOptionsChange()},k=()=>{e.onRestoreDefault(n()),e.onClose()},M=[{text:"Candle",key:"candle"},{text:"Indicator",key:"indicator"},{text:"Grid",key:"grid"},{text:"X-axis",key:"xAxis"},{text:"Y-axis",key:"yAxis"},{text:"Separator",key:"separator"},{text:"Crosshair",key:"crosshair"},{text:"Overlay",key:"overlay"},{text:"Pane Options",key:"paneOptions"}],L=(D,P,$=!1)=>{const A=$?_:C,N=typeof P=="function"?P():P;switch(D.component){case"select":return Y(qp,{style:{width:"120px"},get value(){return I(N,e.locale)},get dataSource(){return D.dataSource},onSelected:z=>{const B=z.key;A(D,B)}});case"switch":{const z=N==="--"?!1:!!N;return Y(cT,{open:z,onChange:()=>{A(D,!z)}})}case"color":return Y(Cv,{style:{width:"120px"},value:N,onChange:z=>{A(D,z)}});case"number":return Y(Ha,{style:{width:"120px"},get precision(){return Le(()=>!!D.step)()?Math.max(0,-Math.floor(Math.log10(D.step))):0},get min(){return D.min},get max(){return D.max},value:N||0,onChange:z=>{A(D,z)}})}};return Y(zl,{get title(){return I("setting",e.locale)},width:700,contentHeight:void 0,padding:"0 10px",get buttons(){return[{children:I("restore_default",e.locale),onClick:()=>{k()}}]},get onClose(){return e.onClose},get children(){var D=fz(),P=D.firstChild,$=P.firstChild,A=P.nextSibling;return F($,Y(Sv,{get isExpanded(){return!m()},onClick:()=>b(!m()),get ariaLabel(){return Le(()=>!!m())()?I("sidebar.expand",e.locale):I("sidebar.collapse",e.locale)},className:"sidebar-toggle",startingDirection:"left"})),F(P,()=>M.map(N=>(()=>{var z=gz();return z.$$click=()=>g(N.key),F(z,(()=>{var B=Le(()=>!!m());return()=>B()?N.text.charAt(0):N.text})()),Ae(B=>{var Q=`${p()===N.key?"selected":""}`,ne=m()?N.text:"";return Q!==B.e&&Ge(z,B.e=Q),ne!==B.t&&Be(z,"title",B.t=ne),B},{e:void 0,t:void 0}),z})()),null),F(A,(()=>{var N=Le(()=>p()!=="paneOptions");return()=>N()&&Y(bn,{get each(){return n().filter(z=>z.key.includes(p()))},children:z=>(()=>{var B=Sy(),Q=B.firstChild;return F(Q,()=>z.text),F(B,()=>L(z,()=>vn.formatValue(t(),z.key),!1),null),B})()})})(),null),F(A,(()=>{var N=Le(()=>p()==="paneOptions");return()=>N()&&Y(bn,{get each(){return o()},children:z=>(()=>{var B=Sy(),Q=B.firstChild;return F(Q,()=>z.text),F(B,()=>L(z,()=>sz(c(),z.key),!0),null),B})()})})(),null),Ae(N=>{var z=`sidebar ${m()?"collapsed":""}`,B=`content ${m()?"expanded":""}`;return z!==N.e&&Ge(P,N.e=z),B!==N.t&&Ge(A,N.t=B),N},{e:void 0,t:void 0}),D}})};Dt(["click"]);const mz=e=>Y(Pe,{get when(){return e.settingModalVisible()},get children(){return Y(vz,{get locale(){return e.locale},get currentStyles(){return e.widget.getStyles()},get widget(){return e.widget},onClose:()=>{e.setSettingModalVisible(!1)},onChange:t=>{var r;(r=e.widget)==null||r.setStyles(t),e.currentLayout!==vt.getInstance(e.widget).getDefaultLayout()&&vt.getInstance(e.widget).saveStyles()},onPaneOptionsChange:()=>{e.currentLayout!==vt.getInstance(e.widget).getDefaultLayout()&&vt.getInstance(e.widget).savePaneOptions()},onRestoreDefault:t=>{const r={};t.forEach(n=>{const i=n.key;P0(r,i,vn.formatValue(e.widgetDefaultStyles(),i))}),e.widget.setStyles(Ui(Or())),e.currentLayout!==vt.getInstance(e.widget).getDefaultLayout()&&vt.getInstance(e.widget).saveStyles()}})}});var yz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M12.41465,11L18.5,11C18.7761,11,19,11.22386,19,11.5C19,11.77614,18.7761,12,18.5,12L12.41465,12C12.20873,12.5826,11.65311,13,11,13C10.34689,13,9.79127,12.5826,9.58535,12L3.5,12C3.223857,12,3,11.77614,3,11.5C3,11.22386,3.223857,11,3.5,11L9.58535,11C9.79127,10.417404,10.34689,10,11,10C11.65311,10,12.20873,10.417404,12.41465,11Z stroke-opacity=0 stroke=none>');const bz=()=>yz();var xz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M6.91465,11L11.08535,11C11.29127,10.417404,11.84689,10,12.5,10C13.15311,10,13.70873,10.417404,13.91465,11L18.5,11C18.7761,11,19,11.22386,19,11.5C19,11.77614,18.7761,12,18.5,12L13.91465,12C13.70873,12.5826,13.15311,13,12.5,13C11.84689,13,11.29127,12.5826,11.08535,12L6.91465,12C6.70873,12.5826,6.15311,13,5.5,13C4.671573,13,4,12.32843,4,11.5C4,10.671573,4.671573,10,5.5,10C6.15311,10,6.70873,10.417404,6.91465,11Z stroke-opacity=0 stroke=none>');const wz=()=>xz();var Cz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M6.91465,12.5C6.70873,13.0826,6.15311,13.5,5.5,13.5C4.671573,13.5,4,12.82843,4,12C4,11.171573,4.671573,10.5,5.5,10.5C6.15311,10.5,6.70873,10.917404,6.91465,11.5L16.0853,11.5C16.2913,10.917404,16.846899999999998,10.5,17.5,10.5C18.328400000000002,10.5,19,11.171573,19,12C19,12.82843,18.328400000000002,13.5,17.5,13.5C16.846899999999998,13.5,16.2913,13.0826,16.0853,12.5L6.91465,12.5Z stroke-opacity=0 stroke=none>');const _z=()=>Cz();var Sz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11,12.41465L11,18.5C11,18.7761,11.22386,19,11.5,19C11.77614,19,12,18.7761,12,18.5L12,12.41465C12.5826,12.20873,13,11.65311,13,11C13,10.34689,12.5826,9.79127,12,9.58535L12,3.5C12,3.223857,11.77614,3,11.5,3C11.22386,3,11,3.223857,11,3.5L11,9.58535C10.417404,9.79127,10,10.34689,10,11C10,11.65311,10.417404,12.20873,11,12.41465Z stroke-opacity=0 stroke=none>');const kz=()=>Sz();var Mz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11.66558837890625,19C10.83716137890625,19,10.16558837890625,18.328400000000002,10.16558837890625,17.5C10.16558837890625,16.846899999999998,10.58298437890625,16.2913,11.16557337890625,16.0854L11.16557337890625,11.91464C10.58298437890625,11.70872,10.16558837890625,11.1531,10.16558837890625,10.5C10.16558837890625,9.8469,10.58298437890625,9.29128,11.16557337890625,9.08536L11.16557337890625,4.5C11.16557337890625,4.223857,11.38942837890625,4,11.66556837890625,4C11.94171837890625,4,12.16556837890625,4.223857,12.16556837890625,4.5L12.16556837890625,9.08535C12.74817837890625,9.291260000000001,13.16558837890625,9.846879999999999,13.16558837890625,10.5C13.16558837890625,11.153120000000001,12.74817837890625,11.708739999999999,12.16556837890625,11.91465L12.16556837890625,16.0854C12.74817837890625,16.2913,13.16558837890625,16.846899999999998,13.16558837890625,17.5C13.16558837890625,18.328400000000002,12.49401837890625,19,11.66558837890625,19Z stroke-opacity=0 stroke=none>');const Ez=()=>Mz();var Tz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11.165603637695312,6.91465C11.748203637695312,6.70873,12.165603637695312,6.15311,12.165603637695312,5.5C12.165603637695312,4.671573,11.494033637695313,4,10.665603637695312,4C9.837176637695313,4,9.165603637695312,4.671573,9.165603637695312,5.5C9.165603637695312,6.15311,9.583007637695312,6.70873,10.165603637695312,6.91465L10.165603637695312,16.0854C9.583007637695312,16.2913,9.165603637695312,16.846899999999998,9.165603637695312,17.5C9.165603637695312,18.328400000000002,9.837176637695313,19,10.665603637695312,19C11.494033637695313,19,12.165603637695312,18.328400000000002,12.165603637695312,17.5C12.165603637695312,16.846899999999998,11.748203637695312,16.2913,11.165603637695312,16.0854L11.165603637695312,6.91465Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Iz=()=>Tz();var Lz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M5.146447,15.753C4.9511845,15.9483,4.9511845,16.2649,5.146447,16.4602C5.341709,16.6554,5.658291,16.6554,5.853554,16.4602L8.156600000000001,14.15711C8.352409999999999,14.25082,8.57173,14.3033,8.8033,14.3033C9.631730000000001,14.3033,10.3033,13.63172,10.3033,12.80329C10.3033,12.57172,10.250820000000001,12.352409999999999,10.157119999999999,12.15659L12.156600000000001,10.15711C12.352409999999999,10.250820000000001,12.571729999999999,10.30329,12.8033,10.30329C13.63173,10.30329,14.3033,9.63172,14.3033,8.80329C14.3033,8.57172,14.25082,8.352409999999999,14.15712,8.15659L16.4602,5.853553C16.6554,5.658291,16.6554,5.341709,16.4602,5.146447C16.2649,4.9511843,15.9483,4.9511843,15.753,5.146447L13.45001,7.449479999999999C13.25419,7.35577,13.03487,7.3032900000000005,12.8033,7.3032900000000005C11.97487,7.3032900000000005,11.3033,7.97487,11.3033,8.80329C11.3033,9.03487,11.35578,9.254190000000001,11.44949,9.450009999999999L9.450009999999999,11.449480000000001C9.254190000000001,11.35577,9.03487,11.30329,8.8033,11.30329C7.97487,11.30329,7.3033,11.97487,7.3033,12.80329C7.3033,13.03487,7.35578,13.25419,7.44949,13.45001L5.146447,15.753Z stroke-opacity=0 stroke=none>');const Pz=()=>Lz();var Az=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M7.573332939453125,14.54567903564453C7.667042939453125,14.741499035644532,7.719512939453125,14.960809035644532,7.719512939453125,15.19239903564453C7.719512939453125,16.02079903564453,7.047942939453125,16.69239903564453,6.219512939453125,16.69239903564453C5.391085939453125,16.69239903564453,4.719512939453125,16.02079903564453,4.719512939453125,15.19239903564453C4.719512939453125,14.36394903564453,5.391085939453125,13.692379035644532,6.219512939453125,13.692379035644532C6.451092939453125,13.692379035644532,6.670412939453125,13.74485903564453,6.866232939453125,13.83856903564453L9.865702939453126,10.83909903564453C9.771992939453124,10.643279035644532,9.719512939453125,10.42395903564453,9.719512939453125,10.192379035644532C9.719512939453125,9.36394903564453,10.391082939453124,8.692379035644532,11.219512939453125,8.692379035644532C11.451092939453126,8.692379035644532,11.670412939453126,8.74485903564453,11.866232939453125,8.838569035644532L15.462112939453124,5.242645035644531C15.657412939453126,5.047383335644532,15.974012939453125,5.047383335644532,16.169212939453125,5.242645035644531C16.364512939453125,5.437907035644531,16.364512939453125,5.754489035644531,16.169212939453125,5.949752035644531L12.573332939453124,9.545679035644532C12.667042939453125,9.74149903564453,12.719512939453125,9.96080903564453,12.719512939453125,10.192379035644532C12.719512939453125,11.020809035644533,12.047942939453126,11.692379035644532,11.219512939453125,11.692379035644532C10.987942939453125,11.692379035644532,10.768632939453125,11.639909035644532,10.572812939453126,11.54619903564453L7.573332939453125,14.54567903564453Z stroke-opacity=0 stroke=none>');const Dz=()=>Az();var Fz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M15.719512939453125,8.461776733398438C16.547912939453127,8.461776733398438,17.219512939453125,7.7902067333984375,17.219512939453125,6.9617767333984375C17.219512939453125,6.133349733398438,16.547912939453127,5.4617767333984375,15.719512939453125,5.4617767333984375C14.891082939453124,5.4617767333984375,14.219512939453125,6.133349733398438,14.219512939453125,6.9617767333984375C14.219512939453125,7.193346733398437,14.271992939453124,7.412666733398438,14.365692939453124,7.608486733398438L7.366222939453126,14.607956733398437C7.170402939453125,14.514256733398437,6.951082939453125,14.461776733398438,6.719512939453125,14.461776733398438C5.891085939453125,14.461776733398438,5.219512939453125,15.133346733398437,5.219512939453125,15.961776733398438C5.219512939453125,16.79017673339844,5.891085939453125,17.461776733398438,6.719512939453125,17.461776733398438C7.547942939453125,17.461776733398438,8.219512939453125,16.79017673339844,8.219512939453125,15.961776733398438C8.219512939453125,15.730176733398437,8.167032939453126,15.510876733398437,8.073322939453124,15.315066733398437L15.072802939453124,8.315586733398437C15.268612939453124,8.409296733398438,15.487912939453125,8.461776733398438,15.719512939453125,8.461776733398438Z stroke-opacity=0 stroke=none>');const Rz=()=>Fz();var Oz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M17.0643,7.033864912109375L18,3.585784912109375L14.5078,4.509695912109375L15.3537,5.344934912109375L6.02026,14.560584912109375C5.87635,14.517484912109374,5.72366,14.494284912109375,5.5655,14.494284912109375C4.7009,14.494284912109375,4,15.186384912109375,4,16.040084912109375C4,16.893784912109375,4.7009,17.585784912109375,5.5655,17.585784912109375C6.43011,17.585784912109375,7.13101,16.893784912109375,7.13101,16.040084912109375C7.13101,15.722284912109375,7.03392,15.426984912109376,6.86744,15.181384912109374L16.0917,6.073604912109375L17.0643,7.033864912109375Z stroke-opacity=0 stroke=none>');const Nz=()=>Oz();var zz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M6.91465,13.00505L18.5,13.00505C18.7761,13.00505,19,13.228909999999999,19,13.50505C19,13.781189999999999,18.7761,14.00505,18.5,14.00505L6.91465,14.00505C6.70873,14.58765,6.15311,15.00505,5.5,15.00505C4.671573,15.00505,4,14.33348,4,13.50505C4,12.67662,4.671573,12.00505,5.5,12.00505C6.15311,12.00505,6.70873,12.422450000000001,6.91465,13.00505ZM7.81404,11.625L10.48591,11.625L10.48591,10.90625L9.65193,10.90625L9.65193,7.125L8.997630000000001,7.125C8.71443,7.306641,8.415600000000001,7.419922,7.96443,7.498047L7.96443,8.05078L8.77497,8.05078L8.77497,10.90625L7.81404,10.90625L7.81404,11.625ZM11.081620000000001,11.625L14.0562,11.625L14.0562,10.88281L13.09724,10.88281C12.8863,10.88281,12.59333,10.90625,12.36482,10.93555C13.17537,10.11328,13.84724,9.2207,13.84724,8.39062C13.84724,7.541016,13.28865,7,12.4488,7C11.84333,7,11.446850000000001,7.234375,11.03279,7.679688L11.52497,8.16797C11.747630000000001,7.914062,12.0113,7.697266,12.33552,7.697266C12.7613,7.697266,13.00154,7.982422,13.00154,8.43359C13.00154,9.14648,12.29255,10.00781,11.081620000000001,11.11523L11.081620000000001,11.625ZM15.9605,11.75C16.8121,11.75,17.526899999999998,11.2832,17.526899999999998,10.4375C17.526899999999998,9.82031,17.142200000000003,9.43945,16.6441,9.30078L16.6441,9.27148C17.1129,9.08594,17.3824,8.7207,17.3824,8.21289C17.3824,7.421875,16.8004,7,15.9429,7C15.4215,7,14.9957,7.210938,14.6109,7.541016L15.066,8.11133C15.3258,7.849609,15.5836,7.697266,15.9019,7.697266C16.2789,7.697266,16.4957,7.914062,16.4957,8.28125C16.4957,8.70898,16.2301,9,15.4215,9L15.4215,9.63672C16.3804,9.63672,16.6383,9.91992,16.6383,10.38086C16.6383,10.79688,16.3336,11.03125,15.8824,11.03125C15.4742,11.03125,15.1578,10.82227,14.8922,10.55078L14.4781,11.13281C14.7906,11.486329999999999,15.2652,11.75,15.9605,11.75Z stroke-opacity=0 stroke=none>');const Vz=()=>zz();var Bz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M3.146447,14.178126025390625C2.9511847,13.982826025390626,2.9511847,13.666226025390625,3.146447,13.470926025390625L7.39146,9.225966025390626C7.35417,9.095106025390624,7.33421,8.956946025390625,7.33421,8.814116025390625C7.33421,7.985696025390625,8.00578,7.314116025390625,8.834209999999999,7.314116025390625C8.97703,7.314116025390625,9.11519,7.334086025390625,9.24605,7.371366025390625L13.753,2.864373025390625C13.9483,2.669110325390625,14.2649,2.669110325390625,14.4602,2.864373025390625C14.6554,3.059635025390625,14.6554,3.376217025390625,14.4602,3.571479025390625L10.06916,7.962476025390625C10.23631,8.204386025390626,10.334209999999999,8.497826025390625,10.334209999999999,8.814116025390625C10.334209999999999,9.642546025390626,9.66264,10.314116025390625,8.834209999999999,10.314116025390625C8.51791,10.314116025390625,8.22448,10.216226025390625,7.98256,10.049076025390626L3.853554,14.178126025390625C3.658291,14.373326025390625,3.341709,14.373326025390625,3.146447,14.178126025390625ZM7.67736,19.188526025390626C7.4821,18.993226025390626,7.4821,18.676626025390625,7.67736,18.481426025390626L9.9804,16.178326025390625C9.88669,15.982526025390625,9.834209999999999,15.763226025390624,9.834209999999999,15.531626025390626C9.834209999999999,14.703226025390626,10.50578,14.031626025390626,11.33421,14.031626025390626C11.56579,14.031626025390626,11.78511,14.084126025390624,11.98093,14.177826025390624L13.9804,12.178356025390626C13.8867,11.982536025390624,13.8342,11.763216025390625,13.8342,11.531636025390625C13.8342,10.703206025390624,14.5058,10.031636025390625,15.3342,10.031636025390625C15.5658,10.031636025390625,15.7851,10.084116025390625,15.9809,10.177826025390626L18.284,7.874796025390625C18.4792,7.679536025390625,18.7958,7.679536025390625,18.9911,7.874796025390625C19.1863,8.070056025390624,19.1863,8.386636025390626,18.9911,8.581906025390625L16.688000000000002,10.884936025390624C16.7817,11.080756025390626,16.8342,11.300066025390626,16.8342,11.531636025390625C16.8342,12.360066025390624,16.162599999999998,13.031626025390626,15.3342,13.031626025390626C15.1026,13.031626025390626,14.8833,12.979126025390626,14.6875,12.885426025390625L12.68803,14.884926025390625C12.78174,15.080726025390625,12.83421,15.300026025390626,12.83421,15.531626025390626C12.83421,16.360026025390624,12.16264,17.031626025390626,11.33421,17.031626025390626C11.10264,17.031626025390626,10.88333,16.979126025390627,10.68751,16.885426025390625L8.38446,19.188526025390626C8.1892,19.383726025390626,7.87262,19.383726025390626,7.67736,19.188526025390626Z stroke-opacity=0 stroke=none>');const $z=()=>Bz();var Wz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M3.3367688759765626,12.63173C3.5320318759765623,12.82699,3.8486138759765627,12.82699,4.043876875976562,12.63173L11.822052875976562,4.853553C12.017312875976563,4.658291,12.017312875976563,4.341708,11.822052875976562,4.146446C11.626792875976562,3.9511843,11.310202875976563,3.9511843,11.114942875976563,4.146446L3.3367688759765626,11.92462C3.1415071759765625,12.11988,3.1415071759765625,12.43647,3.3367688759765626,12.63173ZM5.001492875976562,17.0351C4.806232875976562,16.8399,4.806232875976562,16.5233,5.001492875976562,16.328L7.304532875976562,14.025C7.210822875976563,13.82916,7.158352875976563,13.60984,7.158352875976563,13.37827C7.158352875976563,12.54984,7.829922875976562,11.87827,8.658352875976561,11.87827C8.889922875976563,11.87827,9.109232875976563,11.93075,9.305052875976562,12.02446L11.304532875976562,10.02498C11.210822875976563,9.82916,11.158352875976561,9.60984,11.158352875976561,9.37827C11.158352875976561,8.54984,11.829922875976562,7.8782700000000006,12.658352875976563,7.8782700000000006C12.889922875976563,7.8782700000000006,13.109232875976563,7.93075,13.305022875976562,8.024460000000001L15.608122875976562,5.72142C15.803322875976562,5.5261499999999995,16.119922875976563,5.5261499999999995,16.315222875976563,5.72142C16.510422875976563,5.9166799999999995,16.510422875976563,6.23326,16.315222875976563,6.42852L14.012122875976562,8.73156C14.105822875976562,8.92738,14.158322875976562,9.1467,14.158322875976562,9.37827C14.158322875976562,10.2067,13.486822875976562,10.87827,12.658352875976563,10.87827C12.426772875976562,10.87827,12.207452875976562,10.82579,12.011642875976563,10.73209L10.012162875976562,12.73156C10.105872875976562,12.92738,10.158352875976561,13.1467,10.158352875976561,13.37827C10.158352875976561,14.2067,9.486772875976563,14.8783,8.658352875976561,14.8783C8.426772875976562,14.8783,8.207452875976562,14.8258,8.011642875976563,14.7321L5.708602875976562,17.0351C5.513342875976562,17.2304,5.196752875976562,17.2304,5.001492875976562,17.0351ZM10.415712875976563,18.328C10.220452875976562,18.5233,9.903862875976563,18.5233,9.708602875976563,18.328C9.513342875976562,18.1328,9.513342875976562,17.816200000000002,9.708602875976563,17.6209L12.304532875976562,15.025C12.210822875976563,14.8292,12.158352875976563,14.6098,12.158352875976563,14.3783C12.158352875976563,13.54984,12.829922875976562,12.87827,13.658322875976562,12.87827C13.889922875976563,12.87827,14.109222875976563,12.93075,14.305022875976562,13.02446L17.486822875976564,9.84274C17.682022875976564,9.64747,17.99862287597656,9.64747,18.19392287597656,9.84274C18.38912287597656,10.038,18.38912287597656,10.35458,18.19392287597656,10.54984L15.012122875976562,13.73156C15.105822875976562,13.92738,15.158322875976562,14.1467,15.158322875976562,14.3783C15.158322875976562,15.2067,14.486822875976562,15.8783,13.658322875976562,15.8783C13.426822875976562,15.8783,13.207422875976562,15.8258,13.011642875976563,15.7321L10.415712875976563,18.328Z stroke-opacity=0 stroke=none>');const Hz=()=>Wz();var Uz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M13.1889,6C12.98303,6.582599999999999,12.42741,7,11.7743,7C11.12119,7,10.565570000000001,6.582599999999999,10.35965,6L3.5,6C3.223857,6,3,5.77614,3,5.5C3,5.22386,3.223857,5,3.5,5L10.35965,5C10.565570000000001,4.417404,11.12119,4,11.7743,4C12.42741,4,12.98303,4.417404,13.1889,5L18.5,5C18.7761,5,19,5.22386,19,5.5C19,5.77614,18.7761,6,18.5,6L13.1889,6ZM3,8.5C3,8.22386,3.223857,8,3.5,8L18.5,8C18.7761,8,19,8.22386,19,8.5C19,8.77614,18.7761,9,18.5,9L3.5,9C3.223857,9,3,8.77614,3,8.5ZM3.278549,11.5C3.278549,11.22386,3.502407,11,3.778549,11L18.7785,11C19.0547,11,19.2785,11.22386,19.2785,11.5C19.2785,11.77614,19.0547,12,18.7785,12L3.778549,12C3.502407,12,3.278549,11.77614,3.278549,11.5ZM3.139267,14.5C3.139267,14.2239,3.363124,14,3.6392670000000003,14L18.6393,14C18.915399999999998,14,19.1393,14.2239,19.1393,14.5C19.1393,14.7761,18.915399999999998,15,18.6393,15L3.6392670000000003,15C3.363124,15,3.139267,14.7761,3.139267,14.5ZM13.1889,18C12.98303,18.5826,12.42741,19,11.7743,19C11.12119,19,10.565570000000001,18.5826,10.35965,18L3.778549,18C3.502407,18,3.278549,17.7761,3.278549,17.5C3.278549,17.2239,3.502407,17,3.778549,17L10.35965,17C10.565570000000001,16.4174,11.12119,16,11.7743,16C12.42741,16,12.98303,16.4174,13.1889,17L18.7785,17C19.0547,17,19.2785,17.2239,19.2785,17.5C19.2785,17.7761,19.0547,18,18.7785,18L13.1889,18Z stroke-opacity=0 stroke=none>');const jz=()=>Uz();var Xz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M4.91465,6C4.70873,6.582599999999999,4.15311,7,3.5,7C2.671573,7,2,6.32843,2,5.5C2,4.671573,2.671573,4,3.5,4C4.15311,4,4.70873,4.417404,4.91465,5L18.2257,5C18.5018,5,18.7257,5.22386,18.7257,5.5C18.7257,5.77614,18.5018,6,18.2257,6L4.91465,6ZM2.7257,8.5C2.7257,8.22386,2.949558,8,3.2257,8L18.2257,8C18.5018,8,18.7257,8.22386,18.7257,8.5C18.7257,8.77614,18.5018,9,18.2257,9L3.2257,9C2.949558,9,2.7257,8.77614,2.7257,8.5ZM3.00425,11.5C3.00425,11.22386,3.22811,11,3.50425,11L18.5042,11C18.7804,11,19.0042,11.22386,19.0042,11.5C19.0042,11.77614,18.7804,12,18.5042,12L3.50425,12C3.22811,12,3.00425,11.77614,3.00425,11.5ZM2.864967,14.5C2.864967,14.2239,3.08882,14,3.36497,14L18.365,14C18.6411,14,18.865,14.2239,18.865,14.5C18.865,14.7761,18.6411,15,18.365,15L3.36497,15C3.08882,15,2.864967,14.7761,2.864967,14.5ZM20,17.5C20,18.328400000000002,19.3284,19,18.5,19C17.846899999999998,19,17.2913,18.5826,17.0854,18L3.50425,18C3.22811,18,3.00425,17.7761,3.00425,17.5C3.00425,17.2239,3.22811,17,3.50425,17L17.0854,17C17.2913,16.4174,17.846899999999998,16,18.5,16C19.3284,16,20,16.671599999999998,20,17.5Z stroke-opacity=0 stroke=none>');const Yz=()=>Xz();var Zz=K('<svg class=icon-overlay viewBox="0 0 22 22"><ellipse cx=10.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=17.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=10.5 cy=11.5 rx=7 ry=7 fill-opacity=0 stroke-opacity=1 fill=none stroke-width=1></ellipse><ellipse cx=10.5 cy=11.5 rx=5 ry=5 fill-opacity=0 stroke-opacity=1 fill=none stroke-width=1></ellipse><ellipse cx=10.5 cy=11.5 rx=3 ry=3 fill-opacity=0 stroke-opacity=1 fill=none stroke-width=1>');const Kz=()=>Zz();var qz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M3,7.32468C5.90649,3.3893050000000002,11.49833,2.81306,14.6674,6.31944C14.9056,6.1554199999999994,15.192,6.05979,15.5,6.05979C15.845,6.05979,16.1628,6.17974,16.4162,6.381349999999999L18.4509,4.23827L19,4.816615L16.8945,7.03429C16.962600000000002,7.21075,17,7.40319,17,7.60463C17,8.45782,16.328400000000002,9.14947,15.5,9.14947C14.6716,9.14947,14,8.45782,14,7.60463C14,7.36402,14.0534,7.13625,14.1487,6.93322C11.32695,3.748365,6.25159,4.253956,3.612785,7.82695L3,7.32468ZM14.09,15.4717C15.7427,13.78985,16.244500000000002,11.524740000000001,15.5633,9.30134L15.5618,9.30134L16.3012,9.0502C17.072400000000002,11.56646,16.497700000000002,14.158,14.6282,16.0599C12.28737,18.442,8.62386,18.6988,6.41348,16.4501C4.5526,14.5572,4.52076,11.19671,6.36766,9.3177C7.89069,7.76754,10.07544,7.706189999999999,11.56741,9.22363C11.95453,9.61742,12.24817,10.08363,12.43369,10.57677L14.1451,8.77421L14.6942,9.35256L12.64982,11.50582C12.65827,11.59712,12.66295,11.68839,12.66378,11.77936C12.87398,12.04523,13,12.38451,13,12.7541C13,13.60729,12.32843,14.2989,11.5,14.2989C10.67157,14.2989,10,13.60729,10,12.7541C10,11.90091,10.67157,11.20926,11.5,11.20926C11.60387,11.20926,11.70528,11.220130000000001,11.8032,11.240829999999999L11.81763,11.22564C11.69858,10.71874,11.42858,10.21929,11.0284,9.81179C9.844000000000001,8.60765,8.136890000000001,8.65592,6.90822,9.90586C5.37975,11.460930000000001,5.40693,14.288,6.95404,15.8619C8.84598,17.7867,12.03496,17.5626,14.09,15.4717Z stroke-opacity=0 stroke=none>');const Qz=()=>qz();var Gz=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M4,17.0854L4,3.5C4,3.223858,4.22386,3,4.5,3C4.77614,3,5,3.223858,5,3.5L5,10L7.57584,10L9.8127,4.46359C9.91614,4.20756,10.20756,4.08386,10.46359,4.1873000000000005C10.71963,4.29075,10.84333,4.58216,10.73988,4.8382000000000005L8.65438,10L11.08535,10C11.29127,9.4174,11.84689,9,12.5,9C12.65154,9,12.79784,9.02247,12.93573,9.06427L16.6464,5.35355C16.8417,5.15829,17.1583,5.15829,17.3536,5.35355C17.5488,5.54882,17.5488,5.8654,17.3536,6.06066L13.7475,9.66675C13.907,9.90508,14,10.19168,14,10.5C14,11.15311,13.5826,11.70873,13,11.91465L13,14.3638L18.3714,12.1936C18.6274,12.09015,18.918799999999997,12.21385,19.0222,12.46989C19.1257,12.72592,19.002,13.0173,18.746000000000002,13.1208L13,15.4423L13,18L19.5,18C19.7761,18,20,18.2239,20,18.5C20,18.7761,19.7761,19,19.5,19L5.91465,19C5.70873,19.5826,5.15311,20,4.5,20C3.671573,20,3,19.3284,3,18.5C3,17.846899999999998,3.417404,17.2913,4,17.0854ZM6.3729499999999994,17.0413L12,14.7678L12,11.91465C11.88136,11.87271,11.76956,11.81627,11.66675,11.74746L6.3729499999999994,17.0413ZM12,15.8463L6.6694700000000005,18L12,18L12,15.8463ZM6.38629,15.6137L8.250350000000001,11L11,11L6.38629,15.6137ZM5,11L7.17182,11L5,16.3754L5,11Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const Jz=()=>Gz();var eV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M17,4.5C17,5.32843,16.328400000000002,6,15.5,6C15.0931,6,14.7241,5.83802,14.4539,5.57503L5.98992,8.32515C5.99658,8.38251,6,8.440850000000001,6,8.5C6,9.15311,5.582599999999999,9.70873,5,9.91465L5,11.08535C5.42621,11.236,5.763999999999999,11.57379,5.91465,12L19.5,12C19.7761,12,20,12.22386,20,12.5C20,12.77614,19.7761,13,19.5,13L5.91465,13C5.70873,13.5826,5.15311,14,4.5,14C3.671573,14,3,13.3284,3,12.5C3,11.84689,3.417404,11.29127,4,11.08535L4,9.91465C3.417404,9.70873,3,9.15311,3,8.5C3,7.67157,3.671573,7,4.5,7C4.90411,7,5.2709,7.15981,5.5406200000000005,7.41967L14.0093,4.66802C14.0032,4.6128599999999995,14,4.5568,14,4.5C14,3.671573,14.6716,3,15.5,3C16.328400000000002,3,17,3.671573,17,4.5ZM4,15.5C4,15.2239,4.22386,15,4.5,15L19.5,15C19.7761,15,20,15.2239,20,15.5C20,15.7761,19.7761,16,19.5,16L4.5,16C4.22386,16,4,15.7761,4,15.5ZM4,18.5C4,18.2239,4.22386,18,4.5,18L19.5,18C19.7761,18,20,18.2239,20,18.5C20,18.7761,19.7761,19,19.5,19L4.5,19C4.22386,19,4,18.7761,4,18.5Z stroke-opacity=0 stroke=none>');const tV=()=>eV();var rV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M20,3.5C20,4.15311,19.5826,4.70873,19,4.91465L19,18.5C19,18.7761,18.7761,19,18.5,19L4.91465,19C4.70873,19.5826,4.15311,20,3.5,20C2.671573,20,2,19.3284,2,18.5C2,17.846899999999998,2.417404,17.2913,3,17.0854L3,3.5C3,3.22386,3.22386,3,3.5,3L17.0854,3C17.2913,2.417404,17.846899999999998,2,18.5,2C19.3284,2,20,2.671573,20,3.5ZM17.0854,4C17.236,4.42621,17.5738,4.763999999999999,18,4.91465L18,8L14,8L14,4L17.0854,4ZM13,4L13,8L9,8L9,4L13,4ZM13,9L9,9L9,13L13,13L13,9ZM13,14L9,14L9,18L13,18L13,14ZM14,18L14,14L18,14L18,18L14,18ZM18,13L14,13L14,9L18,9L18,13ZM4.91465,18C4.763999999999999,17.5738,4.42621,17.236,4,17.0854L4,14L8,14L8,18L4.91465,18ZM4,8L4,4L8,4L8,8L4,8ZM8,9L8,13L4,13L4,9L8,9Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const nV=()=>rV();var iV=K('<svg class=icon-overlay viewBox="0 0 22 22"><ellipse cx=10.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=17.5 cy=11.5 rx=1.5 ry=1.5 stroke-opacity=0 stroke=none></ellipse><ellipse cx=10.5 cy=11.5 rx=7 ry=7 fill-opacity=0 fill=none stroke-opacity=1 stroke-width=1>');const oV=()=>iV();var aV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11.57625,6.9981C11.55099,6.999359999999999,11.52557,7,11.5,7C11.34,7,11.18584,6.97495,11.04125,6.9285499999999995L5.55401,16.4327C5.713760000000001,16.5905,5.83826,16.7839,5.91465,17L16.0854,17C16.2187,16.622700000000002,16.4987,16.314700000000002,16.8569,16.1445L11.57625,6.9981ZM12.50759,6.611219999999999C12.81005,6.336790000000001,13,5.94058,13,5.5C13,4.671573,12.32843,4,11.5,4C10.67157,4,10,4.671573,10,5.5C10,5.80059,10.08841,6.08052,10.24066,6.31522L4.64514,16.0069C4.59738,16.002299999999998,4.54896,16,4.5,16C3.671573,16,3,16.671599999999998,3,17.5C3,18.328400000000002,3.671573,19,4.5,19C5.15311,19,5.70873,18.5826,5.91465,18L16.0854,18C16.2913,18.5826,16.846899999999998,19,17.5,19C18.328400000000002,19,19,18.328400000000002,19,17.5C19,16.8365,18.5691,16.2735,17.971899999999998,16.075699999999998L12.50759,6.611219999999999Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const sV=()=>aV();var lV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M19,4.5C19,5.15311,18.5826,5.70873,18,5.91465L18,18.5C18,18.7761,17.7761,19,17.5,19L5.91465,19C5.70873,19.5826,5.15311,20,4.5,20C3.671573,20,3,19.3284,3,18.5C3,17.846899999999998,3.417404,17.2913,4,17.0854L4,4.5C4,4.22386,4.22386,4,4.5,4L16.0854,4C16.2913,3.417404,16.846899999999998,3,17.5,3C18.328400000000002,3,19,3.671573,19,4.5ZM5,5L16.0854,5C16.236,5.42621,16.5738,5.763999999999999,17,5.91465L17,18L5.91465,18C5.763999999999999,17.5738,5.42621,17.236,5,17.0854L5,5Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const cV=()=>lV();var uV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M19.6401,7.99355C20.4028,7.92291,21,7.2811900000000005,21,6.5C21,5.671573,20.3284,5,19.5,5C18.8469,5,18.2913,5.417404,18.0854,6L7.62067,6C7.34453,6,7.12067,6.22386,7.12067,6.5C7.12067,6.5479,7.12741,6.59423,7.13999,6.63809L3.2294099999999997,15.0243C2.530138,15.1517,2,15.764,2,16.5C2,17.328400000000002,2.671573,18,3.5,18C4.15311,18,4.70873,17.5826,4.91465,17L14.5963,17C14.6456,17.076,14.7162,17.1396,14.8044,17.1807C15.0546,17.2974,15.3521,17.1891,15.4688,16.9388L19.6401,7.99355ZM14.7896,16.0293L18.6551,7.739599999999999C18.3942,7.56144,18.1925,7.30307,18.0854,7L8.0746,7L4.25044,15.2009C4.55701,15.3784,4.79493,15.6613,4.91465,16L14.6207,16C14.68,16,14.7368,16.0103,14.7896,16.0293Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const dV=()=>uV();var hV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M8.134443814697265,7.494615087890625L8.764323814697265,7.494615087890625L8.764323814697265,3.414215087890625L8.310223814697267,3.414215087890625L7.294603814697266,4.005035087890625L7.289713814697266,4.634915087890625L8.134443814697265,4.149892087890625L8.134443814697265,7.494615087890625ZM18.832003814697266,6.933095087890624Q19.004603814697266,6.635245087890625,19.004603814697266,6.2543850878906255Q19.004603814697266,5.884915087890625,18.845103814697264,5.593575087890625Q18.685503814697267,5.3006050878906255,18.399103814697266,5.136225087890625Q18.114303814697266,4.9702050878906245,17.754603814697266,4.9653250878906245L18.820603814697265,3.840647087890625L18.820603814697265,3.414215087890625L16.519203814697264,3.414215087890625L16.519203814697264,3.939931087890625L18.050803814697264,3.939931087890625L16.719403814697266,5.334785087890625L17.074203814697263,5.7205350878906245Q17.254903814697265,5.484525087890625,17.619503814697268,5.484525087890625Q17.980803814697268,5.484525087890625,18.187503814697266,5.689605087890625Q18.394203814697267,5.894685087890625,18.394203814697267,6.2543850878906255Q18.394203814697267,6.604315087890625,18.187503814697266,6.822415087890625Q17.980803814697268,7.0405150878906255,17.640603814697265,7.0405150878906255Q17.334603814697267,7.0405150878906255,17.124703814697266,6.890775087890625Q16.914703814697265,6.739415087890626,16.820303814697265,6.469225087890624L16.354803814697263,6.744295087890626Q16.480103814697266,7.125155087890625,16.821903814697265,7.341625087890625Q17.165403814697264,7.559725087890625,17.640603814697265,7.559725087890625Q18.039403814697266,7.559725087890625,18.348603814697267,7.393705087890625Q18.659503814697267,7.229315087890625,18.832003814697266,6.933095087890624ZM10.000003814697266,10.634915087890626C10.000003814697266,11.024655087890626,9.851363814697265,11.379685087890625,9.607683814697266,11.646395087890625L12.168903814697266,15.171615087890626C12.275403814697265,15.147615087890625,12.386203814697266,15.134915087890626,12.500003814697266,15.134915087890626C12.596503814697266,15.134915087890626,12.690803814697265,15.144015087890624,12.782303814697265,15.161415087890624L16.108803814697268,11.196955087890625C16.038703814697264,11.023375087890624,16.000003814697266,10.833655087890625,16.000003814697266,10.634915087890626C16.000003814697266,9.806495087890625,16.671603814697264,9.134915087890626,17.500003814697266,9.134915087890626C18.328403814697264,9.134915087890626,19.000003814697266,9.806495087890625,19.000003814697266,10.634915087890626C19.000003814697266,11.463345087890625,18.328403814697264,12.134915087890626,17.500003814697266,12.134915087890626C17.239503814697265,12.134915087890626,16.994503814697268,12.068495087890625,16.781003814697264,11.951675087890624L13.654703814697266,15.677415087890624C13.870303814697266,15.937215087890625,14.000003814697266,16.270915087890625,14.000003814697266,16.634915087890626C14.000003814697266,17.463315087890624,13.328403814697266,18.134915087890626,12.500003814697266,18.134915087890626C11.671573814697265,18.134915087890626,11.000003814697266,17.463315087890624,11.000003814697266,16.634915087890626C11.000003814697266,16.284415087890626,11.120193814697265,15.962015087890626,11.321603814697266,15.706715087890625L8.715393814697265,12.119565087890624C8.645053814697267,12.129685087890625,8.573143814697266,12.134915087890626,8.500003814697266,12.134915087890626C8.162103814697264,12.134915087890626,7.8503038146972655,12.023195087890626,7.599523814697266,11.834665087890626L4.505583814697266,15.521915087890624C4.809213814697266,15.796415087890624,5.000003814697266,16.193415087890624,5.000003814697266,16.634915087890626C5.000003814697266,17.463315087890624,4.328433814697266,18.134915087890626,3.5000038146972656,18.134915087890626C2.6715768146972656,18.134915087890626,2.0000038146972656,17.463315087890624,2.0000038146972656,16.634915087890626C2.0000038146972656,15.806515087890626,2.6715768146972656,15.134915087890626,3.5000038146972656,15.134915087890626C3.508253814697266,15.134915087890626,3.5164838146972657,15.135015087890626,3.524703814697266,15.135115087890625L7.033823814697266,10.953115087890625C7.011673814697265,10.850565087890626,7.000003814697266,10.744105087890624,7.000003814697266,10.634915087890626C7.000003814697266,9.806495087890625,7.671573814697266,9.134915087890626,8.500003814697266,9.134915087890626C9.328433814697267,9.134915087890626,10.000003814697266,9.806495087890625,10.000003814697266,10.634915087890626Z stroke-opacity=0 stroke=none>');const pV=()=>hV();var fV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M8.13444,7.494615087890625L8.76432,7.494615087890625L8.76432,3.414215087890625L8.310220000000001,3.414215087890625L7.2946,4.005035087890625L7.28971,4.634915087890625L8.13444,4.149892087890625L8.13444,7.494615087890625ZM18.832,6.929835087890625Q19.0046,6.635245087890625,19.0046,6.2543850878906255Q19.0046,5.889805087890625,18.8451,5.5952050878906245Q18.6855,5.3006050878906255,18.3975,5.132965087890625Q18.1094,4.9653250878906245,17.7399,4.9653250878906245Q17.435499999999998,4.9653250878906245,17.1556,5.149245087890625L17.2793,3.939931087890625L18.8304,3.939931087890625L18.8304,3.414215087890625L16.7406,3.414215087890625L16.5094,5.665195087890625L17.0156,5.795405087890625Q17.095399999999998,5.655425087890626,17.2516,5.570795087890625Q17.4095,5.484525087890625,17.6357,5.484525087890625Q17.9694,5.484525087890625,18.1842,5.697745087890625Q18.4007,5.909335087890625,18.4007,6.2543850878906255Q18.4007,6.604315087890625,18.1842,6.822415087890625Q17.9694,7.0405150878906255,17.6292,7.0405150878906255Q17.3298,7.0405150878906255,17.119799999999998,6.890775087890625Q16.9098,6.739415087890626,16.825200000000002,6.474115087890625L16.3597,6.749175087890626Q16.470399999999998,7.110505087890624,16.807299999999998,7.335115087890625Q17.144199999999998,7.559725087890625,17.6292,7.559725087890625Q18.0296,7.559725087890625,18.3438,7.392075087890625Q18.6595,7.224435087890625,18.832,6.929835087890625ZM10,10.634915087890626C10,11.024655087890626,9.85136,11.379685087890625,9.60768,11.646395087890625L12.1689,15.171615087890626C12.2754,15.147615087890625,12.3862,15.134915087890626,12.5,15.134915087890626C12.5965,15.134915087890626,12.6908,15.144015087890624,12.7823,15.161415087890624L16.108800000000002,11.196955087890625C16.0387,11.023375087890624,16,10.833655087890625,16,10.634915087890626C16,9.806495087890625,16.671599999999998,9.134915087890626,17.5,9.134915087890626C18.3284,9.134915087890626,19,9.806495087890625,19,10.634915087890626C19,11.463345087890625,18.3284,12.134915087890626,17.5,12.134915087890626C17.2395,12.134915087890626,16.994500000000002,12.068505087890625,16.781,11.951675087890624L13.6547,15.677415087890624C13.8703,15.937215087890625,14,16.270915087890625,14,16.634915087890626C14,17.463315087890624,13.3284,18.134915087890626,12.5,18.134915087890626C11.67157,18.134915087890626,11,17.463315087890624,11,16.634915087890626C11,16.284415087890626,11.12019,15.962015087890626,11.3216,15.706715087890625L8.71539,12.119565087890624C8.645050000000001,12.129685087890625,8.57314,12.134915087890626,8.5,12.134915087890626C8.162099999999999,12.134915087890626,7.8503,12.023195087890626,7.59952,11.834665087890626L4.50558,15.521915087890624C4.80921,15.796415087890624,5,16.193415087890624,5,16.634915087890626C5,17.463315087890624,4.32843,18.134915087890626,3.5,18.134915087890626C2.671573,18.134915087890626,2,17.463315087890624,2,16.634915087890626C2,15.806515087890626,2.671573,15.134915087890626,3.5,15.134915087890626C3.5082500000000003,15.134915087890626,3.51648,15.135015087890626,3.5247,15.135115087890625L7.03382,10.953115087890625C7.01167,10.850565087890626,7,10.744105087890624,7,10.634915087890626C7,9.806495087890625,7.67157,9.134915087890626,8.5,9.134915087890626C9.32843,9.134915087890626,10,9.806495087890625,10,10.634915087890626Z stroke-opacity=0 stroke=none>');const gV=()=>fV();var vV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M18.8532,7.020985087890625Q19.0257,6.734525087890625,19.0257,6.369945087890625Q19.0257,6.020005087890625,18.8499,5.754705087890625Q18.6758,5.489415087890626,18.3649,5.339675087890625Q18.5944,5.209465087890625,18.7214,4.994615087890625Q18.8499,4.779775087890625,18.8499,4.5193550878906255Q18.8499,4.2003480878906245,18.7002,3.951324087890625Q18.5505,3.700673087890625,18.277,3.557444087890625Q18.0052,3.414215087890625,17.6455,3.414215087890625Q17.285800000000002,3.414215087890625,17.0107,3.557444087890625Q16.7357,3.700673087890625,16.5843,3.951324087890625Q16.4346,4.2003480878906245,16.4346,4.5193550878906255Q16.4346,4.779775087890625,16.561500000000002,4.994615087890625Q16.6901,5.209465087890625,16.919600000000003,5.339675087890625Q16.6055,5.489415087890626,16.4297,5.757965087890625Q16.255499999999998,6.024895087890625,16.255499999999998,6.369945087890625Q16.255499999999998,6.734525087890625,16.4297,7.020985087890625Q16.6055,7.305815087890625,16.919600000000003,7.465325087890625Q17.2354,7.624825087890625,17.6455,7.624825087890625Q18.0557,7.624825087890625,18.3682,7.465325087890625Q18.6807,7.305815087890625,18.8532,7.020985087890625ZM8.76432,7.559725087890625L8.13444,7.559725087890625L8.13444,4.214996087890625L7.28971,4.700025087890625L7.2946,4.070139087890625L8.310220000000001,3.479319087890625L8.76432,3.479319087890625L8.76432,7.559725087890625ZM17.1816,4.955555087890625Q17.0042,4.784655087890625,17.0042,4.5095950878906255Q17.0042,4.229645087890625,17.18,4.057119087890625Q17.355800000000002,3.884592087890625,17.6455,3.884592087890625Q17.935200000000002,3.884592087890625,18.1077,4.057119087890625Q18.2803,4.229645087890625,18.2803,4.5095950878906255Q18.2803,4.784655087890625,18.1045,4.955555087890625Q17.930300000000003,5.124825087890625,17.6455,5.124825087890625Q17.3607,5.124825087890625,17.1816,4.955555087890625ZM18.2217,5.7953950878906255Q18.4398,6.005365087890625,18.4398,6.3552950878906245Q18.4398,6.705235087890625,18.2217,6.915195087890625Q18.0052,7.125155087890625,17.6455,7.125155087890625Q17.285800000000002,7.125155087890625,17.067700000000002,6.915195087890625Q16.849600000000002,6.705235087890625,16.849600000000002,6.3552950878906245Q16.849600000000002,6.005365087890625,17.064500000000002,5.7953950878906255Q17.2793,5.585435087890625,17.6455,5.585435087890625Q18.0052,5.585435087890625,18.2217,5.7953950878906255ZM9.60768,11.711495087890626C9.85136,11.444785087890626,10,11.089765087890626,10,10.700025087890625C10,9.871595087890626,9.32843,9.200025087890625,8.5,9.200025087890625C7.67157,9.200025087890625,7,9.871595087890626,7,10.700025087890625C7,10.809205087890625,7.01167,10.915665087890625,7.03382,11.018215087890624L3.5247,15.200215087890625C3.51648,15.200115087890625,3.5082500000000003,15.200015087890625,3.5,15.200015087890625C2.671573,15.200015087890625,2,15.871615087890625,2,16.700015087890627C2,17.528415087890625,2.671573,18.200015087890627,3.5,18.200015087890627C4.32843,18.200015087890627,5,17.528415087890625,5,16.700015087890627C5,16.258515087890625,4.80921,15.861515087890625,4.50558,15.587015087890626L7.59952,11.899765087890625C7.8503,12.088295087890625,8.162099999999999,12.200025087890625,8.5,12.200025087890625C8.57314,12.200025087890625,8.645050000000001,12.194785087890626,8.71539,12.184675087890625L11.3216,15.771815087890625C11.12019,16.027215087890625,11,16.349515087890623,11,16.700015087890627C11,17.528415087890625,11.67157,18.200015087890627,12.5,18.200015087890627C13.3284,18.200015087890627,14,17.528415087890625,14,16.700015087890627C14,16.336015087890623,13.8703,16.002315087890626,13.6547,15.742515087890625L16.781,12.016775087890625C16.994500000000002,12.133605087890626,17.2395,12.200025087890625,17.5,12.200025087890625C18.3284,12.200025087890625,19,11.528445087890624,19,10.700025087890625C19,9.871595087890626,18.3284,9.200025087890625,17.5,9.200025087890625C16.671599999999998,9.200025087890625,16,9.871595087890626,16,10.700025087890625C16,10.898765087890624,16.0387,11.088475087890625,16.108800000000002,11.262055087890625L12.7823,15.226515087890625C12.6908,15.209115087890625,12.5965,15.200015087890625,12.5,15.200015087890625C12.3862,15.200015087890625,12.2754,15.212715087890626,12.1689,15.236715087890625L9.60768,11.711495087890626Z stroke-opacity=0 stroke=none>');const mV=()=>vV();var yV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M9.474616630859375,7.494615087890625L8.844736630859375,7.494615087890625L8.844736630859375,4.149892087890625L8.000006630859374,4.634915087890625L8.004896630859374,4.005035087890625L9.020516630859376,3.414215087890625L9.474616630859375,3.414215087890625L9.474616630859375,7.494615087890625ZM18.529296630859378,4.8318550878906255Q18.307996630859375,5.028795087890625,18.122396630859377,5.385245087890625Q17.868496630859376,5.019035087890625,17.629196630859376,4.8269750878906255Q17.389996630859375,4.634915087890625,17.168596630859376,4.634915087890625Q16.794296630859375,4.634915087890625,16.522496630859376,4.976715087890625Q16.252296630859377,5.3168850878906255,16.252296630859377,5.7856350878906255Q16.252296630859377,6.218575087890625,16.502896630859375,6.521315087890625Q16.755196630859373,6.822415087890625,17.114896630859377,6.822415087890625Q17.368796630859375,6.822415087890625,17.588596630859374,6.625475087890624Q17.809896630859377,6.428535087890625,17.998696630859374,6.0688350878906245Q18.249396630859373,6.439935087890625,18.488596630859377,6.631985087890625Q18.727896630859377,6.822415087890625,18.952496630859375,6.822415087890625Q19.326796630859373,6.822415087890625,19.596996630859376,6.482245087890625Q19.868796630859375,6.140455087890626,19.868796630859375,5.671705087890626Q19.868796630859375,5.238755087890625,19.618196630859376,4.937655087890625Q19.367496630859375,4.634915087890625,19.006196630859375,4.634915087890625Q18.750696630859377,4.634915087890625,18.529296630859378,4.8318550878906255ZM18.337296630859377,5.674955087890625L18.278696630859375,5.596835087890625Q18.449596630859375,5.272935087890625,18.622096630859374,5.1101750878906245Q18.794596630859374,4.947415087890625,18.967096630859373,4.947415087890625Q19.194996630859375,4.947415087890625,19.346396630859374,5.1345950878906255Q19.497696630859377,5.320135087890625,19.497696630859377,5.598455087890625Q19.497696630859377,5.8914250878906245,19.360996630859376,6.096505087890625Q19.224296630859374,6.301585087890626,19.027396630859375,6.301585087890626Q18.915096630859374,6.301585087890626,18.742496630859375,6.146965087890624Q18.569996630859375,5.992335087890625,18.337296630859377,5.674955087890625ZM17.785496630859377,5.779125087890625L17.842496630859372,5.857245087890625Q17.668296630859373,6.186025087890625,17.495796630859374,6.348785087890625Q17.324896630859374,6.509915087890625,17.153996630859375,6.509915087890625Q16.926096630859377,6.509915087890625,16.774796630859377,6.324375087890624Q16.623396630859375,6.137195087890625,16.623396630859375,5.858875087890625Q16.623396630859375,5.565905087890625,16.761696630859376,5.360825087890625Q16.900096630859373,5.1557550878906255,17.095396630859376,5.1557550878906255Q17.228896630859374,5.1557550878906255,17.365596630859375,5.2778250878906245Q17.502296630859377,5.399895087890625,17.785496630859377,5.779125087890625ZM10.710296630859375,10.634915087890626C10.710296630859375,11.024655087890626,10.561656630859375,11.379685087890625,10.317976630859375,11.646395087890625L12.879196630859376,15.171615087890626C12.985696630859374,15.147615087890625,13.096496630859376,15.134915087890626,13.210296630859375,15.134915087890626C13.306796630859376,15.134915087890626,13.401096630859374,15.144015087890624,13.492596630859374,15.161415087890624L16.819096630859377,11.196955087890625C16.748996630859374,11.023375087890624,16.710296630859375,10.833655087890625,16.710296630859375,10.634915087890626C16.710296630859375,9.806495087890625,17.381896630859373,9.134915087890626,18.210296630859375,9.134915087890626C19.038696630859373,9.134915087890626,19.710296630859375,9.806495087890625,19.710296630859375,10.634915087890626C19.710296630859375,11.463345087890625,19.038696630859373,12.134915087890626,18.210296630859375,12.134915087890626C17.949796630859375,12.134915087890626,17.704796630859377,12.068505087890625,17.491296630859374,11.951675087890624L14.364996630859375,15.677415087890624C14.580596630859375,15.937215087890625,14.710296630859375,16.270915087890625,14.710296630859375,16.634915087890626C14.710296630859375,17.463315087890624,14.038696630859375,18.134915087890626,13.210296630859375,18.134915087890626C12.381866630859374,18.134915087890626,11.710296630859375,17.463315087890624,11.710296630859375,16.634915087890626C11.710296630859375,16.284415087890626,11.830486630859374,15.962015087890626,12.031896630859375,15.706715087890625L9.425686630859374,12.119565087890624C9.355346630859376,12.129685087890625,9.283436630859375,12.134915087890626,9.210296630859375,12.134915087890626C8.872396630859374,12.134915087890626,8.560596630859376,12.023195087890626,8.309816630859375,11.834665087890626L5.215876630859375,15.521915087890624C5.519506630859375,15.796415087890624,5.710296630859375,16.193415087890624,5.710296630859375,16.634915087890626C5.710296630859375,17.463315087890624,5.038726630859375,18.134915087890626,4.210296630859375,18.134915087890626C3.381869630859375,18.134915087890626,2.710296630859375,17.463315087890624,2.710296630859375,16.634915087890626C2.710296630859375,15.806515087890626,3.381869630859375,15.134915087890626,4.210296630859375,15.134915087890626C4.218546630859375,15.134915087890626,4.226776630859375,15.135015087890626,4.234996630859375,15.135115087890625L7.744116630859375,10.953115087890625C7.721966630859375,10.850565087890626,7.710296630859375,10.744105087890624,7.710296630859375,10.634915087890626C7.710296630859375,9.806495087890625,8.381866630859374,9.134915087890626,9.210296630859375,9.134915087890626C10.038726630859376,9.134915087890626,10.710296630859375,9.806495087890625,10.710296630859375,10.634915087890626Z stroke-opacity=0 stroke=none>');const bV=()=>yV();var xV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M21,5.5C21,6.32843,20.3284,7,19.5,7C19.4136,7,19.3289,6.99269,19.2465,6.97866L15.6257,15.5086C15.8587,15.7729,16,16.119999999999997,16,16.5C16,17.328400000000002,15.3284,18,14.5,18C13.8469,18,13.2913,17.5826,13.0854,17L3.91465,17C3.70873,17.5826,3.15311,18,2.5,18C1.671573,18,1,17.328400000000002,1,16.5C1,15.6716,1.671573,15,2.5,15C2.5840199999999998,15,2.66643,15.0069,2.74668,15.0202L6.36934,6.48574C6.13933,6.22213,6,5.87733,6,5.5C6,4.671573,6.67157,4,7.5,4C8.15311,4,8.70873,4.417404,8.91465,5L18.0854,5C18.2913,4.417404,18.8469,4,19.5,4C20.3284,4,21,4.671573,21,5.5ZM18.0854,6L8.91465,6C8.892579999999999,6.06243,8.8665,6.12296,8.83672,6.18128L13.9814,15.0921C14.143,15.0325,14.3177,15,14.5,15C14.584,15,14.6664,15.0069,14.7467,15.0202L18.3693,6.48574C18.2462,6.3446,18.149,6.1802,18.0854,6ZM13.2036,15.745L8.0861,6.8811800000000005C7.90605,6.95768,7.70797,7,7.5,7C7.41359,7,7.32888,6.99269,7.24647,6.97866L3.62571,15.5086C3.7512,15.651,3.8501,15.8174,3.91465,16L13.0854,16C13.1169,15.9108,13.1566,15.8255,13.2036,15.745Z stroke-opacity=0 stroke=none>');const wV=()=>xV();var CV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M5.92159,5.93994C6.04014,5.90529,6.152620000000001,5.85639,6.25704,5.79523L9.12729,9.89437C9.045449999999999,10.07959,9,10.28449,9,10.5C9,10.79522,9.08529,11.07053,9.232569999999999,11.30262L4.97573,16.7511L5.92159,5.93994ZM4.92259,5.8848400000000005C4.38078,5.658659999999999,4,5.1238,4,4.5C4,3.671573,4.67157,3,5.5,3C6.2157,3,6.81433,3.50124,6.96399,4.17183L15.1309,4.88634C15.3654,4.36387,15.8902,4,16.5,4C17.328400000000002,4,18,4.67157,18,5.5C18,6.08983,17.659599999999998,6.60015,17.1645,6.84518L18.4264,14.0018C18.4508,14.0006,18.4753,14,18.5,14C19.3284,14,20,14.6716,20,15.5C20,16.328400000000002,19.3284,17,18.5,17C17.932499999999997,17,17.4386,16.6849,17.183799999999998,16.22L5.99686,18.5979C5.946429999999999,19.3807,5.29554,20,4.5,20C3.671573,20,3,19.3284,3,18.5C3,17.869300000000003,3.389292,17.3295,3.94071,17.1077L4.92259,5.8848400000000005ZM5.72452,17.6334C5.69799,17.596,5.6698,17.5599,5.64004,17.525100000000002L10.01843,11.92103C10.16958,11.97223,10.33155,12,10.5,12C10.80059,12,11.08052,11.91158,11.31522,11.75934L17.0606,15.0765C17.0457,15.1271,17.0335,15.1789,17.023899999999998,15.2317L5.72452,17.6334ZM11.92855,10.95875L17.4349,14.1379L16.1699,6.96356C15.9874,6.92257,15.8174,6.8483,15.6667,6.74746L11.99771,10.4165C11.99923,10.44414,12,10.47198,12,10.5C12,10.66,11.97495,10.814160000000001,11.92855,10.95875ZM10.5,9C10.259830000000001,9,10.03285,9.05644,9.83159,9.15679L7.04919,5.1831L15.0493,5.88302C15.054,5.90072,15.059,5.91829,15.0643,5.9357299999999995L11.56066,9.43934C11.28921,9.16789,10.91421,9,10.5,9Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const _V=()=>CV();var SV=K('<svg viewBox="0 0 22 22"><path d=M4.727219638671875,8.007996215820313L9.973849638671876,2.7629472158203123C10.167279638671875,2.5696791158203123,10.480729638671875,2.5696791158203123,10.674169638671875,2.7629472158203123L13.223329638671874,5.311756215820313C13.416929638671874,5.505236215820313,13.416929638671874,5.8189862158203125,13.223329638671874,6.012466215820313L7.977129638671875,11.257906215820313C7.379859638671875,11.855176215820313,7.407609638671875,12.909396215820312,8.033809638671876,13.535596215820313C8.660409638671876,14.162596215820313,9.713849638671874,14.189996215820312,10.311129638671876,13.591896215820313L15.556929638671875,8.346066215820311C15.750429638671875,8.152526215820313,16.064229638671875,8.152526215820313,16.257629638671872,8.346066215820311L18.806529638671876,10.895266215820312C19.000029638671876,11.088746215820313,19.000029638671876,11.402496215820312,18.806529638671876,11.595976215820313L13.560629638671875,16.841796215820313C11.165619638671876,19.237196215820312,7.197149638671875,19.19919621582031,4.783499638671875,16.785496215820313C2.3698426386718747,14.371896215820312,2.331397638671875,10.403416215820313,4.727219638671875,8.007996215820313ZM12.172299638671875,5.662106215820312L10.323809638671875,3.8136162158203124L5.4287196386718755,8.709096215820313C3.422893638671875,10.714536215820312,3.4549956386718748,14.055196215820313,5.484999638671875,16.08479621582031C7.514609638671875,18.114796215820313,10.855289638671875,18.146496215820314,12.860719638671876,16.141096215820312L15.465629638671874,13.535796215820312L14.090929638671875,12.160756215820312L14.791629638671875,11.460436215820312L16.166229638671876,12.834996215820313L17.755829638671877,11.245226215820313L15.907729638671874,9.396736215820312L11.011839638671875,14.292596215820312C10.042809638671875,15.262396215820312,8.418249638671874,15.243796215820312,7.406019638671875,14.306496215820312L7.333099638671875,14.236296215820312C6.327599638671876,13.230796215820313,6.284009638671876,11.550396215820312,7.276419638671875,10.557586215820312L9.882199638671874,7.952026215820313L8.501079638671875,6.570906215820313L9.201789638671876,5.870186215820313L10.582939638671874,7.251336215820312L12.172299638671875,5.662106215820312Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const kV=e=>(()=>{var t=SV();return Be(t,"class",`icon-overlay ${e??""}`),t})();var MV=K('<svg viewBox="0 0 22 22"><defs><clipPath id=master_svg0_151_615><rect x=0 y=0 width=22 height=22 rx=0></rect></clipPath></defs><g clip-path=url(#master_svg0_151_615)><path d=M19.672,3.0673368C19.4417,2.9354008,19.1463,3.00292252,18.9994,3.2210900000000002L17.4588,5.50622L16.743299999999998,3.781253L13.9915,7.4662L13.9618,7.51108C13.8339,7.72862,13.8936,8.005659999999999,14.1004,8.15391L14.1462,8.183430000000001C14.3683,8.308720000000001,14.6511,8.25001,14.8022,8.047229999999999L16.4907,5.78571L17.246299999999998,7.60713L19.8374,3.7635389999999997L19.8651,3.717088C19.9871,3.484615,19.9023,3.199273,19.672,3.0673368ZM4.79974,8.462530000000001L10.117740000000001,3.252975C10.31381,3.0610145,10.63152,3.0610145,10.82759,3.252975L13.4115,5.78453C13.6076,5.976710000000001,13.6076,6.28833,13.4115,6.4805L8.093869999999999,11.69045C7.48847,12.28368,7.51659,13.3308,8.151309999999999,13.9528C8.786439999999999,14.5755,9.85421,14.6027,10.45961,14.0087L15.7768,8.79831C15.9729,8.60609,16.2909,8.60609,16.487099999999998,8.79831L19.0705,11.33026C19.2667,11.52244,19.2667,11.83406,19.0705,12.02623L13.7533,17.2366C11.32572,19.6158,7.30328,19.578,4.85679,17.1807C2.410298,14.7834,2.371331,10.84174,4.79974,8.462530000000001ZM12.3461,6.1325199999999995L10.47246,4.29654L5.51079,9.15889C3.477674,11.15076,3.510214,14.4688,5.56784,16.4847C7.62506,18.500999999999998,11.01117,18.5325,13.0439,16.540599999999998L15.6842,13.9529L14.2908,12.58718L15.0011,11.89161L16.394399999999997,13.2569L18.0056,11.67786L16.1323,9.84188L11.16985,14.7046C10.18764,15.6679,8.540980000000001,15.6494,7.51498,14.7184L7.44107,14.6487C6.4219,13.65,6.37771,11.98096,7.38362,10.994869999999999L10.02485,8.40693L8.624939999999999,7.03516L9.335180000000001,6.33919L10.73512,7.71099L12.3461,6.1325199999999995Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const EV=e=>(()=>{var t=MV();return Be(t,"class",`icon-overlay ${e??""}`),t})();var TV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M11,17C5.80945,17,3.667717,12.85,3.113386,11.575C2.9622047,11.2,2.9622047,10.8,3.113386,10.425C3.667717,9.15,5.80945,5,11,5C16.165399999999998,5,18.3323,9.15,18.8866,10.425C19.0378,10.8,19.0378,11.2,18.8866,11.575C18.3323,12.85,16.165399999999998,17,11,17ZM4.04567,10.8C3.995276,10.925,3.995276,11.05,4.04567,11.175C4.52441,12.325,6.43937,16,11,16C15.5606,16,17.4756,12.325,17.9543,11.2C18.0047,11.075,18.0047,10.95,17.9543,10.825C17.4756,9.675,15.5606,6,11,6C6.43937,6,4.52441,9.675,4.04567,10.8ZM11,13.5C9.61417,13.5,8.480319999999999,12.375,8.480319999999999,11C8.480319999999999,9.625,9.61417,8.5,11,8.5C12.38583,8.5,13.5197,9.625,13.5197,11C13.5197,12.375,12.38583,13.5,11,13.5ZM11,9.5C10.1685,9.5,9.48819,10.175,9.48819,11C9.48819,11.825,10.1685,12.5,11,12.5C11.8315,12.5,12.51181,11.825,12.51181,11C12.51181,10.175,11.8315,9.5,11,9.5Z stroke-opacity=0 fill-opacity=1>');const IV=()=>TV();var LV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M5.80417,14.9887L4.62563,16.167299999999997C4.43037,16.3625,4.43037,16.6791,4.62563,16.8744C4.82089,17.0696,5.13748,17.0696,5.332739999999999,16.8744L6.62638,15.5807C7.75595,16.290100000000002,9.19328,16.7929,11,16.7929C16.165399999999998,16.7929,18.3323,12.64289,18.8866,11.36789C19.0378,10.99289,19.0378,10.59289,18.8866,10.21789C18.5549,9.45486,17.6456,7.66212,15.8617,6.34545L17.3536,4.853553C17.5488,4.658291,17.5488,4.341709,17.3536,4.146447C17.1583,3.9511845,16.8417,3.9511845,16.6464,4.146447L15.0014,5.7915399999999995C13.9314,5.1969,12.61166,4.792893,11,4.792893C5.80945,4.792893,3.667717,8.94289,3.113386,10.21789C2.9622049,10.59289,2.9622049,10.99289,3.113386,11.36789C3.424435,12.08333,4.2353000000000005,13.70399,5.80417,14.9887ZM7.36012,14.847C8.32327,15.4074,9.52286,15.7929,11,15.7929C15.5606,15.7929,17.4756,12.11789,17.9543,10.99289C18.0047,10.86789,18.0047,10.74289,17.9543,10.61789C17.659,9.90846,16.8171,8.23812,15.1447,7.06241L12.96929,9.23782C13.3134,9.66543,13.5197,10.20642,13.5197,10.79289C13.5197,12.16789,12.38583,13.29289,11,13.29289C10.41596,13.29289,9.87667,13.09308,9.44815,12.75896L7.36012,14.847ZM8.794609999999999,11.99829L6.520099999999999,14.2728C5.06905,13.12119,4.32057,11.628250000000001,4.04567,10.96789C3.995275,10.84289,3.995275,10.71789,4.04567,10.59289C4.52441,9.46789,6.43937,5.79289,11,5.79289C12.28868,5.79289,13.3661,6.086320000000001,14.2596,6.53329L12.19759,8.5953C11.84086,8.40257,11.43271,8.29289,11,8.29289C9.61417,8.29289,8.480319999999999,9.41789,8.480319999999999,10.79289C8.480319999999999,11.22918,8.594470000000001,11.64029,8.794609999999999,11.99829ZM10.16528,12.04183C10.404869999999999,12.20032,10.692070000000001,12.29289,11,12.29289C11.8315,12.29289,12.51181,11.61789,12.51181,10.79289C12.51181,10.48318,12.41593,10.194600000000001,12.25216,9.95494L10.16528,12.04183ZM11.43602,9.35687L9.55616,11.236740000000001C9.512,11.09633,9.48819,10.94724,9.48819,10.79289C9.48819,9.96789,10.1685,9.29289,11,9.29289C11.15142,9.29289,11.29782,9.31528,11.43602,9.35687Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const PV=()=>LV();var AV=K('<svg class=icon-overlay viewBox="0 0 22 22"><defs><clipPath id=master_svg0_151_625><rect x=0 y=0 width=22 height=22 rx=0></rect></clipPath></defs><g clip-path=url(#master_svg0_151_625)><path d=M14.5385,9.76923L15.6538,9.76923C16.6538,9.76923,17.4615,10.576920000000001,17.4615,11.576920000000001L17.4615,17.1923C17.4615,18.1923,16.6538,19,15.6538,19L5.80769,19C4.807692,19,4,18.1923,4,17.1923L4,11.576920000000001C4,10.576920000000001,4.807692,9.76923,5.80769,9.76923L7.23077,9.76923L7.23077,7.576919999999999C7.23077,5.61538,8.88462,4,10.88462,4C12.88462,4,14.5385,5.61538,14.5385,7.576919999999999L14.5385,9.76923ZM10.88461,5.15385C9.5,5.15385,8.38461,6.23077,8.38461,7.576919999999999L8.38461,9.76923L13.38462,9.76923L13.38462,7.576919999999999C13.38462,6.23077,12.26923,5.15385,10.88461,5.15385ZM15.6538,17.8462C16,17.8462,16.3077,17.5385,16.3077,17.1923L16.3077,11.576920000000001C16.3077,11.23077,16,10.923079999999999,15.6538,10.923079999999999L5.80769,10.923079999999999C5.46154,10.923079999999999,5.15385,11.23077,5.15385,11.576920000000001L5.15385,17.1923C5.15385,17.5385,5.46154,17.8462,5.80769,17.8462L15.6538,17.8462ZM10.153839999999999,12.65385C10.153839999999999,12.34615,10.42307,12.07692,10.73076,12.07692C11.038450000000001,12.07692,11.307680000000001,12.34615,11.307680000000001,12.65385L11.307680000000001,14.5769C11.307680000000001,14.8846,11.038450000000001,15.1538,10.73076,15.1538C10.42307,15.1538,10.153839999999999,14.8846,10.153839999999999,14.5769L10.153839999999999,12.65385Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const DV=()=>AV();var FV=K('<svg class=icon-overlay viewBox="0 0 22 22"><defs><clipPath id=master_svg0_151_620><rect x=0 y=0 width=22 height=22 rx=0></rect></clipPath></defs><g clip-path=url(#master_svg0_151_620)><path d=M8.38461,9.76923L15.6538,9.76923C16.6538,9.76923,17.4615,10.576920000000001,17.4615,11.576920000000001L17.4615,17.1923C17.4615,18.1923,16.6538,19,15.6538,19L5.80769,19C4.807692,19,4,18.1923,4,17.1923L4,11.576920000000001C4,10.576920000000001,4.807693,9.76923,5.80769,9.76923L7.23077,9.76923L7.23077,7.576919999999999C7.23077,5.61538,8.88462,4,10.88462,4C12.46154,4,13.84615,4.961539,14.3462,6.423080000000001C14.4615,6.73077,14.3077,7.038460000000001,14,7.15385C13.69231,7.26923,13.38461,7.11538,13.26923,6.80769C12.92308,5.80769,11.96154,5.15385,10.88462,5.15385C9.5,5.15385,8.38461,6.23077,8.38461,7.576919999999999L8.38461,9.76923ZM15.6538,17.8462C16,17.8462,16.3077,17.5385,16.3077,17.1923L16.3077,11.576920000000001C16.3077,11.23077,16,10.923079999999999,15.6538,10.923079999999999L5.80769,10.923079999999999C5.46154,10.923079999999999,5.15385,11.23077,5.15385,11.576920000000001L5.15385,17.1923C5.15385,17.5385,5.46154,17.8462,5.80769,17.8462L15.6538,17.8462ZM10.153839999999999,12.65385C10.153839999999999,12.34615,10.42307,12.07692,10.73076,12.07692C11.03846,12.07692,11.307690000000001,12.34615,11.307690000000001,12.65385L11.307690000000001,14.5769C11.307690000000001,14.8846,11.03846,15.1538,10.73076,15.1538C10.42307,15.1538,10.153839999999999,14.8846,10.153839999999999,14.5769L10.153839999999999,12.65385Z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const RV=()=>FV();var OV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=M16.966900000000003,8.67144C16.6669,8.67144,16.4247,8.91558,16.4247,9.21802L16.4247,16.631500000000003C16.4247,17.322,16.007199999999997,17.9068,15.5139,17.9068L13.93072,17.9068L13.93072,9.2162C13.93072,8.91741,13.68675,8.67144,13.38855,8.67144C13.09036,8.67144,12.84639,8.91741,12.84639,9.21802L12.84639,17.9068L10.151810000000001,17.9068L10.151810000000001,9.21802C10.151810000000001,8.91741,9.90783,8.67144,9.609639999999999,8.67144C9.31145,8.67144,9.06747,8.91741,9.06747,9.219850000000001L9.06747,17.9068L7.48614,17.9068C6.99277,17.9068,6.5753,17.322,6.5753,16.631500000000003L6.5753,9.21802C6.5753,8.91558,6.333130000000001,8.67144,6.03313,8.67144C5.73313,8.67144,5.49096,8.91558,5.49096,9.21802L5.49096,16.631500000000003C5.49096,17.9378,6.385540000000001,19,7.48614,19L15.512,19C16.6127,19,17.509,17.9378,17.509,16.631500000000003L17.509,9.21802C17.509,8.91558,17.2669,8.67144,16.966900000000003,8.67144ZM18.4578,6.21183L4.542169,6.21183C4.243976,6.21183,4,6.45779,4,6.75841C4,7.05903,4.243976,7.30499,4.542169,7.30499L18.4578,7.30499C18.756,7.30499,19,7.05903,19,6.75841C19,6.45779,18.756,6.21183,18.4578,6.21183ZM8.68072,5.10045L14.3193,5.10045C14.6175,5.10045,14.8614,4.852666,14.8614,4.550225C14.8614,4.247783,14.6175,4,14.3193,4L8.68072,4C8.38253,4,8.13855,4.247783,8.13855,4.550225C8.13855,4.852666,8.38253,5.10045,8.68072,5.10045Z stroke-opacity=0 fill-opacity=1>');const NV=()=>OV();var zV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d=m15.57,0.2l-15.37,15.37l6.33,6.33l15.37,-15.37l-6.33,-6.33zm-13.56,15.37l0.89,-0.89l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.92,-0.92l0.9,0.9l0.9,-0.9l-0.9,-0.9l0.9,-0.9l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.89,-0.89l0.9,0.9l0.9,-0.9l-0.9,-0.9l0.9,-0.9l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.92,-0.92l0.9,0.9l0.9,-0.9l-0.9,-0.9l0.9,-0.9l1.81,1.81l0.9,-0.9l-1.81,-1.81l0.91,-0.91l4.52,4.52l-13.56,13.56l-4.52,-4.52z stroke-opacity=0 fill-rule=evenodd fill-opacity=1>');const VV=()=>zV();var BV=K('<svg width=30 height=40 fill=currentColor stroke=currentColor stroke-width=0.06 stroke-linecap=round fill-rule=evenodd clip-rule=evenodd shape-rendering=geometricPrecision text-rendering=geometricPrecision viewBox="0 0 1.45 1.63"><circle transform="matrix(-1.01724 -0.370788 0.370788 -1.01724 0.140283 1.49275)"r=0.13></circle><line fill=transparent x1=0.15 y1=1.49 x2=1.31 y2=1.49></line><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.140293 0.140278)"r=0.13></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.140293 0.945028)"r=0.13></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 1.3066 0.945028)"r=0.13></circle><line fill=transparent x1=1.31 y1=0.14 x2=0.15 y2=0.14></line><line fill=transparent x1=1.31 y1=0.95 x2=0.15 y2=0.95></line><line fill=transparent x1=0.65 y1=1.11 x2=0.65 y2=0.53></line><path fill=transparent d="M0.8 0.42l-0.11 -0.17c-0.02,-0.03 -0.05,-0.03 -0.08,0l-0.11 0.17c-0.02,0.04 -0.02,0.09 0,0.13 0.15,0 0.15,0 0.3,0 0.02,-0.04 0.02,-0.09 0,-0.13z"></path><path fill=transparent d="M0.8 1.21l-0.11 0.17c-0.02,0.04 -0.05,0.03 -0.08,0l-0.11 -0.17c-0.02,-0.04 -0.02,-0.09 0,-0.13 0.15,0 0.15,0 0.3,0 0.02,0.04 0.02,0.09 0,0.13z">');const $V=()=>BV();var WV=K('<svg width=30 height=40 fill=currentColor stroke=currentColor stroke-width=0.06 stroke-linecap=round fill-rule=evenodd clip-rule=evenodd shape-rendering=geometricPrecision text-rendering=geometricPrecision viewBox="0 0 1.71 1.93"><circle transform="matrix(-1.01724 -0.370788 0.370788 -1.01724 0.165745 1.76369)"r=0.15></circle><line fill=none x1=0.18 y1=1.76 x2=1.54 y2=1.76></line><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.165756 0.165739)"r=0.15></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 0.165756 0.788812)"r=0.15></circle><circle transform="matrix(1.01724 0.370788 -0.370788 1.01724 1.54375 0.788812)"r=0.15></circle><line fill=none x1=1.54 y1=0.17 x2=0.18 y2=0.17></line><line fill=none x1=1.54 y1=0.79 x2=0.18 y2=0.79></line><line fill=none x1=0.77 y1=1.31 x2=0.77 y2=0.63></line><path fill=transparent d="M0.95 0.5l-0.13 -0.2c-0.03,-0.04 -0.07,-0.04 -0.09,0l-0.13 0.2c-0.03,0.04 -0.03,0.11 0,0.15 0.16,0 0.17,0 0.35,0 0.02,-0.04 0.02,-0.11 0,-0.15z"></path><path fill=transparent d="M0.95 1.43l-0.13 0.2c-0.03,0.04 -0.07,0.04 -0.09,0l-0.13 -0.2c-0.03,-0.04 -0.03,-0.11 0,-0.15 0.16,0 0.17,0 0.35,0 0.02,0.04 0.02,0.11 0,0.15z">');const HV=()=>WV();var UV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d="M6 4V18M4 18H8M10 7V4H2V7M17 4V18M17 4L14 7M17 4L20 7M17 18L14 15M17 18L20 15"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');const jV=()=>UV();var XV=K('<svg class=icon-overlay viewBox="0 0 22 22"><path d="M11 2V11M8 11H14M19 5V2H3V5M3 17H19M3 17L6 20M3 17L6 14M19 17L16 20M19 17L16 14"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round>');const YV=()=>XV(),ZV={horizontalStraightLine:bz,horizontalRayLine:wz,horizontalSegment:_z,verticalStraightLine:kz,verticalRayLine:Ez,verticalSegment:Iz,straightLine:Pz,rayLine:Dz,segment:Rz,arrow:Nz,priceLine:Vz,priceChannelLine:$z,parallelStraightLine:Hz,fibonacciLine:jz,fibonacciSegment:Yz,fibonacciCircle:Kz,fibonacciSpiral:Qz,fibonacciSpeedResistanceFan:Jz,fibonacciExtension:tV,gannBox:nV,circle:oV,triangle:sV,rect:cV,parallelogram:dV,threeWaves:pV,fiveWaves:gV,eightWaves:mV,anyWaves:bV,abcd:wV,xabcd:_V,weak_magnet:kV,strong_magnet:EV,lock:DV,unlock:RV,visible:IV,invisible:PV,remove:NV,ruler:VV,longPosition:$V,shortPosition:HV,simpleAnnotation:jV,simpleTag:YV};function KV(e){return[{key:"horizontalStraightLine",text:I("horizontal_straight_line",e)},{key:"horizontalRayLine",text:I("horizontal_ray_line",e)},{key:"horizontalSegment",text:I("horizontal_segment",e)},{key:"verticalStraightLine",text:I("vertical_straight_line",e)},{key:"verticalRayLine",text:I("vertical_ray_line",e)},{key:"verticalSegment",text:I("vertical_segment",e)},{key:"straightLine",text:I("straight_line",e)},{key:"rayLine",text:I("ray_line",e)},{key:"segment",text:I("segment",e)},{key:"arrow",text:I("arrow",e)},{key:"priceLine",text:I("price_line",e)}]}function qV(e){return[{key:"priceChannelLine",text:I("price_channel_line",e)},{key:"parallelStraightLine",text:I("parallel_straight_line",e)}]}function QV(e){return[{key:"circle",text:I("circle",e)},{key:"rect",text:I("rect",e)},{key:"parallelogram",text:I("parallelogram",e)},{key:"triangle",text:I("triangle",e)}]}function GV(e){return[{key:"fibonacciLine",text:I("fibonacci_line",e)},{key:"fibonacciSegment",text:I("fibonacci_segment",e)},{key:"fibonacciCircle",text:I("fibonacci_circle",e)},{key:"fibonacciSpiral",text:I("fibonacci_spiral",e)},{key:"fibonacciSpeedResistanceFan",text:I("fibonacci_speed_resistance_fan",e)},{key:"fibonacciExtension",text:I("fibonacci_extension",e)},{key:"gannBox",text:I("gann_box",e)}]}function JV(e){return[{key:"xabcd",text:I("xabcd",e)},{key:"abcd",text:I("abcd",e)},{key:"threeWaves",text:I("three_waves",e)},{key:"fiveWaves",text:I("five_waves",e)},{key:"eightWaves",text:I("eight_waves",e)},{key:"anyWaves",text:I("any_waves",e)}]}function eB(e){return[{key:"weak_magnet",text:I("weak_magnet",e)},{key:"strong_magnet",text:I("strong_magnet",e)}]}function tB(e){return[{key:"ruler",text:I("ruler",e)}]}function rB(e){return[{key:"longPosition",text:I("long_position",e)},{key:"shortPosition",text:I("short_position",e)}]}function nB(e){return[{key:"simpleAnnotation",text:I("simpleAnnotation",e)},{key:"simpleTag",text:I("simpleTag",e)}]}const Po=e=>ZV[e.name](e.class);var _g=K("<span class=split-line>"),iB=K('<div class=item tabindex=0><span style=width:32px;height:32px></span><div class=icon-arrow><svg viewBox="0 0 4 6"><path d=M1.07298,0.159458C0.827521,-0.0531526,0.429553,-0.0531526,0.184094,0.159458C-0.0613648,0.372068,-0.0613648,0.716778,0.184094,0.929388L2.61275,3.03303L0.260362,5.07061C0.0149035,5.28322,0.0149035,5.62793,0.260362,5.84054C0.505822,6.05315,0.903789,6.05315,1.14925,5.84054L3.81591,3.53075C4.01812,3.3556,4.05374,3.0908,3.92279,2.88406C3.93219,2.73496,3.87113,2.58315,3.73964,2.46925L1.07298,0.159458Z stroke=none stroke-opacity=0>'),Sg=K("<div class=item><span style=width:32px;height:32px>"),oB=K("<div class=chartspire-ui-drawing-bar><div class=toggle-container>"),ky=K("<div class=item tabindex=0><span style=width:32px;height:32px>"),My=K('<div class=icon-arrow><svg viewBox="0 0 4 6"><path d=M1.07298,0.159458C0.827521,-0.0531526,0.429553,-0.0531526,0.184094,0.159458C-0.0613648,0.372068,-0.0613648,0.716778,0.184094,0.929388L2.61275,3.03303L0.260362,5.07061C0.0149035,5.28322,0.0149035,5.62793,0.260362,5.84054C0.505822,6.05315,0.903789,6.05315,1.14925,5.84054L3.81591,3.53075C4.01812,3.3556,4.05374,3.0908,3.92279,2.88406C3.93219,2.73496,3.87113,2.58315,3.73964,2.46925L1.07298,0.159458Z stroke=none stroke-opacity=0>'),aB=K("<div class=chartspire-ui-drawing-bar-dropdowns><div class=dropdown-list>"),sB=K('<li style="cursor:pointer;display:flex;align-items:center;padding:8px 12px;user-select:none;"><div class=icon-overlay style=pointer-events:none;></div><span style=pointer-events:none;>');const kg="drawing_tools",lB=e=>{const[t,r]=me("horizontalStraightLine"),[n,i]=me("priceChannelLine"),[o,s]=me("circle"),[u,c]=me("fibonacciLine"),[h,p]=me("xabcd"),[g,m]=me("ruler"),[b,x]=me("longPosition"),[C,_]=me("simpleAnnotation"),[k,M]=me("weak_magnet"),[L,D]=me("normal"),[P,$]=me(!1),[A,N]=me(!0),[z,B]=me(""),[Q,ne]=me({top:0,item:null});let Z={};const J=Bt(()=>[{key:"singleLine",icon:t(),list:KV(e.locale),setter:r},{key:"moreLine",icon:n(),list:qV(e.locale),setter:i},{key:"polygon",icon:o(),list:QV(e.locale),setter:s},{key:"fibonacci",icon:u(),list:GV(e.locale),setter:c},{key:"wave",icon:h(),list:JV(e.locale),setter:p},{key:"ruler",icon:g(),list:tB(e.locale),setter:m}]),ue=Bt(()=>[{key:"simpleAnnotation",icon:C(),list:nB(e.locale),setter:_},{key:"longPosition",icon:b(),list:rB(e.locale),setter:x}]),le=Bt(()=>eB(e.locale)),ae=Bt(()=>{const pe=z();return pe?pe==="mode"?{key:"mode",list:le(),setter:M}:[...J(),...ue()].find(j=>j.key===pe):null}),te=pe=>{var j;const H=Z[pe];if(!H)return;const de=H.getBoundingClientRect(),U=(j=H.closest(".chartspire-ui-drawing-bar"))==null?void 0:j.getBoundingClientRect();if(U){const fe=de.top-U.top;ne({top:fe,item:ae()})}};tt(()=>{const pe=z();pe&&Z[pe]&&te(pe)});const ve=pe=>{pe===z()?B(""):(B(pe),setTimeout(()=>te(pe),10))};return[(()=>{var pe=oB(),j=pe.firstChild;return F(pe,Y(Pe,{get when(){return!e.drawingBarCollapsed},get children(){return[Le(()=>J().map(H=>(()=>{var de=ky(),U=de.firstChild;return de.addEventListener("blur",()=>{B("")}),tn(fe=>Z[H.key]=fe,de),U.$$click=()=>{e.onDrawingItemClick({groupId:kg,name:H.icon,visible:A(),lock:P(),mode:L()})},F(U,Y(Po,{get name(){return H.icon}})),F(de,(()=>{var fe=Le(()=>H.list.length>1);return()=>fe()&&(()=>{var ce=My(),Oe=ce.firstChild;return ce.$$click=()=>ve(H.key),Ae(()=>Be(Oe,"class",H.key===z()?"rotate":"")),ce})()})(),null),de})())),_g(),Le(()=>ue().map(H=>(()=>{var de=ky(),U=de.firstChild;return de.addEventListener("blur",()=>{B("")}),tn(fe=>Z[H.key]=fe,de),U.$$click=()=>{e.onDrawingItemClick({groupId:kg,name:H.icon,visible:A(),lock:P(),mode:L()})},F(U,Y(Po,{get name(){return H.icon}})),F(de,(()=>{var fe=Le(()=>H.list.length>1);return()=>fe()&&(()=>{var ce=My(),Oe=ce.firstChild;return ce.$$click=()=>ve(H.key),Ae(()=>Be(Oe,"class",H.key===z()?"rotate":"")),ce})()})(),null),de})())),_g(),(()=>{var H=iB(),de=H.firstChild,U=de.nextSibling,fe=U.firstChild;return H.addEventListener("blur",()=>{B("")}),tn(ce=>Z.mode=ce,H),de.$$click=()=>{let ce=k();L()!=="normal"&&(ce="normal"),D(ce),e.onModeChange(ce)},F(de,(()=>{var ce=Le(()=>k()==="weak_magnet");return()=>ce()?Le(()=>L()==="weak_magnet")()?Y(Po,{name:"weak_magnet",class:"selected"}):Y(Po,{name:"weak_magnet"}):Le(()=>L()==="strong_magnet")()?Y(Po,{name:"strong_magnet",class:"selected"}):Y(Po,{name:"strong_magnet"})})()),U.$$click=()=>ve("mode"),Ae(()=>Be(fe,"class",z()==="mode"?"rotate":"")),H})(),(()=>{var H=Sg(),de=H.firstChild;return de.$$click=()=>{const U=!P();$(U),e.onLockChange(U)},F(de,(()=>{var U=Le(()=>!!P());return()=>U()?Y(Po,{name:"lock"}):Y(Po,{name:"unlock"})})()),H})(),(()=>{var H=Sg(),de=H.firstChild;return de.$$click=()=>{const U=!A();N(U),e.onVisibleChange(U)},F(de,(()=>{var U=Le(()=>!!A());return()=>U()?Y(Po,{name:"visible"}):Y(Po,{name:"invisible"})})()),H})(),_g(),(()=>{var H=Sg(),de=H.firstChild;return de.$$click=()=>{e.onRemoveClick(kg)},F(de,Y(Po,{name:"remove"})),H})()]}}),j),F(j,Y(Sv,{get isExpanded(){return!e.drawingBarCollapsed},onClick:()=>{e.setDrawingBarCollapsed(!e.drawingBarCollapsed)},get ariaLabel(){return e.drawingBarCollapsed?"Expand drawing bar":"Collapse drawing bar"},className:"toggle-button",startingDirection:"left"})),Ae(()=>Be(pe,"data-collapsed",e.drawingBarCollapsed.toString())),pe})(),Le(()=>Le(()=>!!(z()&&ae()))()&&(()=>{var pe=aB(),j=pe.firstChild;return j.$$click=H=>{H.stopPropagation()},F(j,()=>{var H;return(H=ae())==null?void 0:H.list.map((de,U)=>(()=>{var fe=sB(),ce=fe.firstChild,Oe=ce.nextSibling;return fe.$$mousedown=Ee=>{var Fe;Ee.preventDefault(),Ee.stopPropagation(),z()==="mode"?(M(de.key),D(de.key),e.onModeChange(de.key)):((Fe=ae())==null||Fe.setter(de.key),e.onDrawingItemClick({name:de.key,lock:P(),mode:L()})),B("")},F(ce,Y(Po,{get name(){return de.key}})),F(Oe,()=>de.text),fe})())}),Ae(H=>mn(j,`top: ${Q().top}px`,H)),pe})())]};Dt(["click","mousedown"]);var cB=K("<img style=width:500px;margin-top:20px>");const uB=e=>Y(zl,{get title(){return I("screenshot",e.locale)},width:540,get buttons(){return[{type:"confirm",children:I("save",e.locale),onClick:()=>{const t=document.createElement("a");t.download="screenshot",t.href=e.url,document.body.appendChild(t),t.click(),t.remove()}}]},get onClose(){return e.onClose},get children(){var t=cB();return Ae(()=>Be(t,"src",e.url)),t}}),dB={AO:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:5},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:34}],BIAS:[{paramNameKey:"BIAS1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"BIAS2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"BIAS3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"BIAS4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"BIAS5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],BOLL:[{paramNameKey:"period",type:"number",precision:0,min:1,default:20},{paramNameKey:"standard_deviation",type:"number",precision:2,min:1,default:2}],BRAR:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:26}],BBI:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:3},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_4",type:"number",precision:0,min:1,default:24}],CCI:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:20}],CR:[{paramNameKey:"cr",type:"number",precision:0,min:1,default:26},{paramNameKey:"ma1",type:"number",precision:0,min:1,default:10},{paramNameKey:"ma2",type:"number",precision:0,min:1,default:20},{paramNameKey:"ma3",type:"number",precision:0,min:1,default:40},{paramNameKey:"ma4",type:"number",precision:0,min:1,default:60}],EMV:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:10},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:50},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:10}],DMI:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:14},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],DMA:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:10},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:50},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:10}],EMA:[{paramNameKey:"EMA1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"EMA2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"EMA3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"EMA4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"EMA5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],MTM:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],MA:[{paramNameKey:"MA1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"MA2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"MA3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"MA4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"MA5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],MACD:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:26},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:9}],OBV:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:30}],PVT:[],PSY:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],ROC:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],RSI:[{paramNameKey:"RSI1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"RSI2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"RSI3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"RSI4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"RSI5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],SMA:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:2}],KDJ:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:9},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:3},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:3}],SAR:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:2,upColor:"#FF7F50",downColor:"#A020F0"},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:2,upColor:"#FF7F50",downColor:"#A020F0"},{paramNameKey:"Params_3",type:"number",precision:0,min:1,default:20,upColor:"#FF7F50",downColor:"#A020F0"}],TRIX:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:12},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:9}],VOL:[{paramNameKey:"MA1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"MA2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"MA3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"MA4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"MA5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],VR:[{paramNameKey:"Params_1",type:"number",precision:0,min:1,default:26},{paramNameKey:"Params_2",type:"number",precision:0,min:1,default:6}],WR:[{paramNameKey:"WR1",type:"number",precision:0,min:1,styleKey:"lines[0].color-palette"},{paramNameKey:"WR2",type:"number",precision:0,min:1,styleKey:"lines[1].color-palette"},{paramNameKey:"WR3",type:"number",precision:0,min:1,styleKey:"lines[2].color-palette"},{paramNameKey:"WR4",type:"number",precision:0,min:1,styleKey:"lines[3].color-palette"},{paramNameKey:"WR5",type:"number",precision:0,min:1,styleKey:"lines[4].color-palette"}],WEMA:[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}],"Volume Profile Fixed Range":[{paramNameKey:"Value area (range 0-1)",type:"number",precision:0,min:0,max:1,default:.7}],"Force Index":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:13}],"Ichimoku Cloud":[{paramNameKey:"Conversion Period",type:"number",precision:0,min:1,default:9},{paramNameKey:"Base Period",type:"number",precision:0,min:1,default:26},{paramNameKey:"Span Period",type:"number",precision:0,min:1,default:52},{paramNameKey:"Displacement",type:"number",precision:0,min:1,default:26},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],ATR:[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}],ADX:[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14},{paramNameKey:"Adxr Period",type:"number",precision:0,min:1,default:6}],ADXR:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],PDI:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],MDI:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],TR:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],WS:[{paramNameKey:"Param",type:"number",precision:0,min:1,default:14}],"Chaikin Oscillator":[{paramNameKey:"Short Period",type:"number",precision:0,min:1,default:3},{paramNameKey:"Long Period",type:"number",precision:0,min:1,default:10}],"Percentage Price Oscillator":[{paramNameKey:"Fast Period",type:"number",precision:0,min:1,default:12},{paramNameKey:"Slow Period",type:"number",precision:0,min:1,default:26},{paramNameKey:"Signal Period",type:"number",precision:0,min:1,default:9}],"Percentage Volume Oscillator":[{paramNameKey:"Short Period",type:"number",precision:0,min:1,default:12},{paramNameKey:"Long Period",type:"number",precision:0,min:1,default:26},{paramNameKey:"Signal Period",type:"number",precision:0,min:1,default:9}],Qstick:[{paramNameKey:"period",type:"number",precision:0,min:1,default:20}],"Absolute Price Oscillator":[{paramNameKey:"Fast Period",type:"number",precision:0,min:1,default:14},{paramNameKey:"Slow Period",type:"number",precision:0,min:1,default:30}],Aroon:[{paramNameKey:"Length",type:"number",precision:0,min:1,default:14}],"Balance of Power":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:20}],"Double Exponential Moving Average":[{paramNameKey:"EMA1 Period",type:"number",precision:0,min:1,default:10},{paramNameKey:"EMA2 Period",type:"number",precision:0,min:1,default:16}],"Envelope (EMA)":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:20},{paramNameKey:"Percentage",type:"number",precision:0,min:0,max:100,default:20},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],"Envelope (SMA)":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:20},{paramNameKey:"Percentage",type:"number",precision:0,min:1,default:20},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],"Volume Weighted Average Price":[{paramNameKey:"Anchor Period",type:"select",precision:0,options:[{value:"None",label:"None"},{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarter",label:"Quarter"},{value:"Year",label:"Year"}],default:"None"},{paramNameKey:"Source",type:"select",precision:0,options:[{value:"Open",label:"Open"},{value:"High",label:"High"},{value:"Close",label:"Close"},{value:"HLC3",label:"HLC3"},{value:"HLC2",label:"HLC2"},{value:"OHLC4",label:"OHLC4"},{value:"HLCC4",label:"HLCC4"}],default:"Close"},{paramNameKey:"Offset",type:"number",precision:0,min:-100,max:100,default:0},{paramNameKey:"Bands Mode",type:"select",precision:0,options:[{value:"Standard Deviation",label:"Standard Deviation"},{value:"Percentage",label:"Percentage"},{value:"Fixed",label:"Fixed"}],default:"Standard Deviation"},{paramNameKey:"Bands Multiplier",type:"select",precision:0,options:[{value:"0.5",label:"0.5"},{value:"1",label:"1.0"},{value:"1.5",label:"1.5"},{value:"2",label:"2.0"},{value:"2.5",label:"2.5"},{value:"3",label:"3.0"}],default:"2"},{paramNameKey:"Show Bands",type:"boolean",precision:0,default:!0},{paramNameKey:"Show Shading",type:"boolean",precision:0,default:!0}],"Negative Volume Index":[{paramNameKey:"Length",type:"number",precision:0,min:1,default:5}],"Money Flow Volume":[],"Money Flow Multiplier":[],"Moving Linear Regression":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}],"Moving Least Square":[{paramNameKey:"Period",type:"number",precision:0,min:1,default:14}]};var hB=K("<div class=chartspire-ui-indicator-setting-input><span>");const X5=e=>(()=>{var t=hB(),r=t.firstChild;return F(r,()=>e.label),F(t,Y(Ha,{style:{width:"120px"},get value(){return e.value},get onChange(){return e.onChange}}),null),t})();var pB=K("<div class=chartspire-ui-indicator-setting-select><span>");const Hp=e=>(()=>{var t=pB(),r=t.firstChild;return F(r,()=>e.label),F(t,Y(qp,{style:{width:"120px"},get value(){return e.value},get dataSource(){return e.dataSource},get onSelected(){return e.onSelected}}),null),t})();var fB=K("<div class=chartspire-ui-indicator-setting-styles><span>");const Bc=e=>(()=>{var t=fB(),r=t.firstChild;return F(r,()=>e.label),F(t,Y(Cv,{style:{width:"120px"},get value(){return e.value},get onChange(){return e.onChange}}),null),t})();var gB=K("<div class=styles-container>");const fp=({index:e,locale:t,styles:r,setStyles:n,type:i})=>{const o=vn.clone(r());return(()=>{var s=gB();return F(s,(()=>{var u=Le(()=>i===A0.line);return()=>u()?[Y(Bc,{get label(){return`${I("Color",t)} ${e+1}`},get value(){var c,h,p;return((p=(h=(c=r())==null?void 0:c.lines)==null?void 0:h[e])==null?void 0:p.color)??"#000000"},onChange:c=>{var h,p,g;(((p=(h=o==null?void 0:o.lines)==null?void 0:h[e])==null?void 0:p.color)!==void 0||((g=o==null?void 0:o.lines)==null?void 0:g[e])!==void 0)&&(o.lines[e].color=c),n({...o})}}),Y(Hp,{get label(){return`${I("Size",t)} ${e+1}`},get value(){var c,h,p;return String(((p=(h=(c=r())==null?void 0:c.lines)==null?void 0:h[e])==null?void 0:p.size)??1)},dataSource:[{key:"1",text:"1"},{key:"2",text:"2"},{key:"3",text:"3"},{key:"4",text:"4"},{key:"5",text:"5"},{key:"6",text:"6"},{key:"7",text:"7"},{key:"8",text:"8"},{key:"9",text:"9"},{key:"10",text:"10"}],onSelected:c=>{var h,p,g;(((p=(h=o==null?void 0:o.lines)==null?void 0:h[e])==null?void 0:p.size)!==void 0||((g=o==null?void 0:o.lines)==null?void 0:g[e])!==void 0)&&(o.lines[e].size=Number(c.key)),n({...o})}}),Y(Hp,{get label(){return I("LineType",t)},get value(){var c,h,p;return((p=(h=(c=r())==null?void 0:c.lines)==null?void 0:h[e])==null?void 0:p.style)??"solid"},dataSource:[{key:"solid",text:"Solid"},{key:"dashed",text:"Dashed"}],onSelected:c=>{var h,p,g;(((p=(h=o==null?void 0:o.lines)==null?void 0:h[e])==null?void 0:p.style)!==void 0||((g=o==null?void 0:o.lines)==null?void 0:g[e])!==void 0)&&(o.lines[e].style=c.key),n({...o})}})]:Le(()=>i===A0.circle)()?[Le(()=>Le(()=>{var c,h,p;return((p=(h=(c=r())==null?void 0:c.circles)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0})()&&Y(Bc,{get label(){return`${I("upColor",t)} ${e+1}`},get value(){var c,h,p;return((p=(h=(c=r())==null?void 0:c.circles)==null?void 0:h[e])==null?void 0:p.upColor)??"#000000"},onChange:c=>{var h,p,g;(((p=(h=o==null?void 0:o.circles)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0||((g=o==null?void 0:o.circles)==null?void 0:g[e])!==void 0)&&(o.circles[e].upColor=c),n({...o})}})),Le(()=>Le(()=>{var c,h,p;return((p=(h=(c=r())==null?void 0:c.circles)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0})()&&Y(Bc,{get label(){return`${I("downColor",t)} ${e+1}`},get value(){var c,h,p;return((p=(h=(c=r())==null?void 0:c.circles)==null?void 0:h[e])==null?void 0:p.downColor)??"#000000"},onChange:c=>{var h,p,g;(((p=(h=o==null?void 0:o.circles)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0||((g=o==null?void 0:o.circles)==null?void 0:g[e])!==void 0)&&(o.circles[e].downColor=c),n({...o})}})),Le(()=>Le(()=>{var c,h,p;return((p=(h=(c=r())==null?void 0:c.circles)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0})()&&Y(Bc,{get label(){return`${I("noChangeColor",t)} ${e+1}`},get value(){var c,h,p;return((p=(h=(c=r())==null?void 0:c.circles)==null?void 0:h[e])==null?void 0:p.noChangeColor)??"#000000"},onChange:c=>{var h,p,g;(((p=(h=o==null?void 0:o.circles)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0||((g=o==null?void 0:o.circles)==null?void 0:g[e])!==void 0)&&(o.circles[e].noChangeColor=c),n({...o})}}))]:Le(()=>i===A0.bar)()?[Le(()=>Le(()=>{var c,h,p;return((p=(h=(c=r())==null?void 0:c.bars)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0})()&&Y(Bc,{get label(){return`${I("upColor",t)} ${e+1}`},get value(){var c,h,p;return((p=(h=(c=r())==null?void 0:c.bars)==null?void 0:h[e])==null?void 0:p.upColor)??"#000000"},onChange:c=>{var h,p,g;(((p=(h=o==null?void 0:o.bars)==null?void 0:h[e])==null?void 0:p.upColor)!==void 0||((g=o==null?void 0:o.bars)==null?void 0:g[e])!==void 0)&&(o.bars[e].upColor=c),n({...o})}})),Le(()=>Le(()=>{var c,h,p;return((p=(h=(c=r())==null?void 0:c.bars)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0})()&&Y(Bc,{get label(){return`${I("downColor",t)} ${e+1}`},get value(){var c,h,p;return((p=(h=(c=r())==null?void 0:c.bars)==null?void 0:h[e])==null?void 0:p.downColor)??"#000000"},onChange:c=>{var h,p,g;(((p=(h=o==null?void 0:o.bars)==null?void 0:h[e])==null?void 0:p.downColor)!==void 0||((g=o==null?void 0:o.bars)==null?void 0:g[e])!==void 0)&&(o.bars[e].downColor=c),n({...o})}})),Le(()=>Le(()=>{var c,h,p;return((p=(h=(c=r())==null?void 0:c.bars)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0})()&&Y(Bc,{get label(){return`${I("noChangeColor",t)} ${e+1}`},get value(){var c,h,p;return((p=(h=(c=r())==null?void 0:c.bars)==null?void 0:h[e])==null?void 0:p.noChangeColor)??"#000000"},onChange:c=>{var h,p,g;(((p=(h=o==null?void 0:o.bars)==null?void 0:h[e])==null?void 0:p.noChangeColor)!==void 0||((g=o==null?void 0:o.bars)==null?void 0:g[e])!==void 0)&&(o.bars[e].noChangeColor=c),n({...o})}}))]:Le(()=>i===A0.custom)()?Le(()=>Le(()=>{var c,h,p;return((p=(h=(c=r())==null?void 0:c.custom)==null?void 0:h[e])==null?void 0:p.opacity)!==void 0})()&&Y(X5,{get label(){return`${I("opacity",t)} ${e+1}`},get value(){var c,h,p;return((p=(h=(c=r())==null?void 0:c.custom)==null?void 0:h[e])==null?void 0:p.opacity)??.3},onChange:c=>{var h,p,g;(((p=(h=o==null?void 0:o.custom)==null?void 0:h[e])==null?void 0:p.opacity)!==void 0||((g=o==null?void 0:o.custom)==null?void 0:g[e])!==void 0)&&(o.custom[e].opacity=c),n({...o})}})):null})()),s})()};var vB=K("<div class=chartspire-ui-indicator-setting-modal-content>"),mB=K("<div class=chartspire-ui-indicator-setting-modal-content> <!> <!> "),yB=K("<div class=chartspire-ui-indicator-setting-modal-wrapper><div class=topbar>"),bB=K("<button>"),gp=K("<div class=styles-container>"),A0=(e=>(e.line="line",e.circle="circle",e.bar="bar",e.custom="custom",e))(A0||{});const xB=e=>{const[t,r]=me(vn.clone(e.params.calcParams)),[n,i]=me(vn.clone(e.params.styles)),[o,s]=me("params"),u=h=>dB[h],c=[{text:"Params",key:"params"},{text:"Style",key:"style"}];return Y(zl,{get title(){return e.params.indicatorName},width:360,contentHeight:"80%",buttonContainerPadding:"30px 30px 20px",get buttons(){return[{type:"confirm",children:I("confirm",e.locale),onClick:()=>{var h;const p=u(e.params.indicatorName),g=[];(h=vn.clone(t()))==null||h.forEach((m,b)=>{!vn.isValid(m)||m===""?"default"in p[b]&&g.push(p[b].default):g.push(m)}),e.onConfirm(g,n()),e.onClose()}}]},get onClose(){return e.onClose},get children(){var h=yB(),p=h.firstChild;return F(p,Y(bn,{each:c,children:g=>(()=>{var m=bB();return m.$$click=()=>s(g.key),F(m,()=>g.text),Ae(()=>Ge(m,`${o()===g.key?"selected":""}`)),m})()})),F(h,Y(Pe,{get when(){return o()==="params"},get children(){var g=vB();return F(g,()=>{var m;return(m=u(e.params.indicatorName))==null?void 0:m.map((b,x)=>b.type==="boolean"?Y(Hp,{get label(){return I(b.paramNameKey,e.locale)},get value(){var C;return(C=t()[x])!=null&&C.value?"true":"false"},dataSource:[{key:"true",text:"Yes"},{key:"false",text:"No"}],onSelected:C=>{const _=vn.clone(t());_[x]={..._[x],value:C.key==="true"},r(_)}}):b.type==="select"?Y(Hp,{get label(){return I(b.paramNameKey,e.locale)},get value(){var C;return((C=t()[x])==null?void 0:C.value)??b.default},get dataSource(){var C;return((C=b.options)==null?void 0:C.map(_=>({key:_.value,text:_.label})))??[]},onSelected:C=>{const _=vn.clone(t());_[x]={..._[x],value:C.key},r(_)}}):Y(X5,{key:x,get label(){return I(b.paramNameKey,e.locale)},get value(){var C;return((C=t()[x])==null?void 0:C.value)??""},get precision(){return b.precision},get min(){return b.min},onChange:C=>{const _=vn.clone(t());_[x]={..._[x],value:Number(C)},r(_)}}))}),g}}),null),F(h,Y(Pe,{get when(){return o()==="style"},get children(){var g=mB(),m=g.firstChild,b=m.nextSibling,x=b.nextSibling,C=x.nextSibling;return C.nextSibling,F(g,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.lines)==null?void 0:k.map((M,L)=>(()=>{var D=gp();return Be(D,"key",L),F(D,Y(fp,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"line"}})),D})())},m),F(g,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.circles)==null?void 0:k.map((M,L)=>(()=>{var D=gp();return Be(D,"key",L),F(D,Y(fp,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"circle"}})),D})())},b),F(g,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.bars)==null?void 0:k.map((M,L)=>(()=>{var D=gp();return Be(D,"key",L),F(D,Y(fp,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"bar"}})),D})())},C),F(g,()=>{var _,k;return(k=(_=e.params.styles)==null?void 0:_.custom)==null?void 0:k.map((M,L)=>(()=>{var D=gp();return Be(D,"key",L),F(D,Y(fp,{index:L,get locale(){return e.locale},styles:n,setStyles:i,get type(){return"custom"}})),D})())},null),g}}),null),h}})};Dt(["click"]);var wB=K('<svg viewBox="0 0 22 22"><rect x=2 y=2 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=9 y=2 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=16 y=2 width=4 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=2 y=9 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=9 y=9 width=5 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=16 y=9 width=4 height=5 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=2 y=16 width=5 height=4 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=9 y=16 width=5 height=4 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none></rect><rect x=16 y=16 width=4 height=4 stroke-width=1 stroke-linecap=round stroke-linejoin=round fill=none>');const CB=e=>(()=>{var t=wB();return Ae(()=>Be(t,"class",e.class||"icon-overlay")),t})();var _B=K('<svg viewBox="0 0 24 24"fill=none><path d="M5 2h14v20H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round></path><path d="M7 7h10M7 11h8M7 15h6"stroke=currentColor stroke-width=1.5 stroke-linecap=round>');const SB=e=>(()=>{var t=_B();return Ae(()=>Be(t,"class",e.class||"icon-overlay")),t})();var kB=K('<svg viewBox="0 0 22 22"fill=none xmlns=http://www.w3.org/2000/svg><path d="M4 6H18M4 10H16M4 14H18M4 18H14"stroke-width=1.5 stroke-linecap=round stroke-linejoin=round></path><circle cx=19 cy=5 r=2.5 stroke-width=1.5 fill=none></circle><path d="M19 4V5L19.5 5.5"stroke-width=1 stroke-linecap=round stroke-linejoin=round></path><circle cx=2 cy=6 r=1 fill=currentColor></circle><circle cx=2 cy=10 r=1 fill=currentColor></circle><circle cx=2 cy=14 r=1 fill=currentColor></circle><circle cx=2 cy=18 r=1 fill=currentColor>');const MB=e=>(()=>{var t=kB();return Ae(()=>Be(t,"class",e.class)),t})();var EB=K('<svg height=24 width=24 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12">');const TB=e=>(()=>{var t=EB();return Ae(()=>Be(t,"class",e.class)),t})();var IB=K('<div class="item object-tree-item"tabindex=0><span style=width:40px;height:40px>'),LB=K('<div class=item tabindex=0><span style=width:40px;height:40px><svg viewBox="0 0 22 22"><path d="M8 6.00067L21 6.00139M8 12.0007L21 12.0015M8 18.0007L21 18.0015M3.5 6H3.51M3.5 12H3.51M3.5 18H3.51M4 6C4 6.27614 3.77614 6.5 3.5 6.5C3.22386 6.5 3 6.27614 3 6C3 5.72386 3.22386 5.5 3.5 5.5C3.77614 5.5 4 5.72386 4 6ZM4 12C4 12.2761 3.77614 12.5 3.5 12.5C3.22386 12.5 3 12.2761 3 12C3 11.7239 3.22386 11.5 3.5 11.5C3.77614 11.5 4 11.7239 4 12ZM4 18C4 18.2761 3.77614 18.5 3.5 18.5C3.22386 18.5 3 18.2761 3 18C3 17.7239 3.22386 17.5 3.5 17.5C3.77614 17.5 4 17.7239 4 18Z"stroke-width=2 stroke-linecap=round stroke-linejoin=round>'),PB=K('<div class="item paper-trading-item"tabindex=0><span style=width:40px;height:40px>'),AB=K('<div class="item trades-item"tabindex=0><span style=width:40px;height:40px>'),DB=K('<div class="item orderbook-item"tabindex=0><span style=width:40px;height:40px>'),FB=K("<div class=chartspire-ui-right-bar><div class=toggle-container>");const RB=e=>(()=>{var t=FB(),r=t.firstChild;return F(t,Y(Pe,{get when(){return e.isObjectTreeEnabled&&!e.rightBarCollapsed},get children(){var n=IB(),i=n.firstChild;return n.$$click=()=>{console.log("Object Tree clicked"),e.setObjectTreeVisible!=null&&e.setObjectTreeVisible(o=>!o)},F(i,Y(TB,{get class(){return`icon-overlay ${e.objectTreeModalVisible?"selected":""}`}})),n}}),r),F(t,Y(Pe,{get when(){return e.isWatchListEnabled&&!e.rightBarCollapsed},get children(){var n=LB(),i=n.firstChild,o=i.firstChild;return n.$$click=()=>{console.log("Watchlist clicked"),e.setWatchListModalVisible!=null&&e.setWatchListModalVisible(s=>!s)},Ae(()=>Be(o,"class",`icon-overlay ${e.watchListModalVisible?"selected":""}`)),n}}),r),F(t,Y(Pe,{get when(){return e.isPaperTradingEnabled&&!e.rightBarCollapsed},get children(){var n=PB(),i=n.firstChild;return n.$$click=()=>{console.log("Paper Trading clicked"),e.setPaperTradingModalVisible!=null&&e.setPaperTradingModalVisible(o=>!o)},F(i,Y(CB,{get class(){return`icon-overlay ${e.paperTradingModalVisible?"selected":""}`}})),n}}),r),F(t,Y(Pe,{get when(){return e.isTradesEnabled&&!e.rightBarCollapsed},get children(){var n=AB(),i=n.firstChild;return n.$$click=()=>{console.log("Trades clicked"),e.setTradesVisible!=null&&e.setTradesVisible(o=>!o)},F(i,Y(MB,{get class(){return`icon-overlay ${e.tradesModalVisible?"selected":""}`}})),n}}),r),F(t,Y(Pe,{get when(){return e.isOrderBookEnabled&&!e.rightBarCollapsed},get children(){var n=DB(),i=n.firstChild;return n.$$click=()=>{console.log("Orderbook clicked"),e.setOrderBookVisible!=null&&e.setOrderBookVisible(o=>!o)},F(i,Y(SB,{get class(){return`icon-overlay ${e.orderBookModalVisible?"selected":""}`}})),n}}),r),F(r,Y(Sv,{get isExpanded(){return!e.rightBarCollapsed},onClick:()=>{e.setRightBarCollapsed(!e.rightBarCollapsed)},get ariaLabel(){return e.rightBarCollapsed?"Show sidebar":"Hide sidebar"},className:"toggle-button",startingDirection:"right"})),Ae(()=>Be(t,"data-collapsed",e.rightBarCollapsed.toString())),t})();Dt(["click"]);const OB=nE.map(e=>e.name),NB=e=>{const t=e.getDataList(),r=e.getIndicators(),n=new Set,i={};r.forEach(p=>{console.log(p.result),OB.includes(p.name)||Object.entries(p.result).forEach(([g,m])=>{const b=m;Object.keys(b).forEach(x=>{let C=!1;n.add(x),i[x]||(i[x]={}),i[x][g]||(i[x][g]=[]),b[x]!==void 0&&b[x]!==null&&(i[x][g].push(b[x]),C=!0),C||n.delete(x)})})});const o=["timestamp","open","high","low","close","volume",...n].join(","),s=t.map((p,g)=>{const m=Array.from(n).map(b=>i[b][g]??"").join(",");return`${p.timestamp},${p.open},${p.high},${p.low},${p.close},${p.volume??""},${m}`}).join(`
`),u=`${o}
${s}`,c=new Blob([u],{type:"text/csv"}),h=document.createElement("a");h.href=URL.createObjectURL(c),h.download="data.csv",document.body.appendChild(h),h.click(),document.body.removeChild(h)};var zB=K('<div class="item tools">'),VB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><rect width=15 height=14 fill=none stroke=currentColor rx=4 transform="translate(.5 .5)">'),BB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14">'),$B=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15">'),WB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M5 0v14"></path><path d="M10 0v14">'),HB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 4.5h15"></path><path d="M0 9.5h15">'),UB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M7.5 7h7.5">'),jB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M0 7h7.5">'),XB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M7.5 0v7">'),YB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M7.5 7v7">'),ZB=K('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7.5h15M7.5 0v14">'),KB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 3.5h15"></path><path d="M0 7h15"></path><path d="M0 10.5h15">'),qB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M3.75 0v14"></path><path d="M7.5 0v14"></path><path d="M11.25 0v14">'),QB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M7.5 4.5h7.5"></path><path d="M7.5 9.5h7.5">'),GB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M0 4.5h7.5"></path><path d="M0 9.5h7.5">'),JB=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M5 7v7"></path><path d="M10 7v7">'),e$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15"></path><path d="M5 0v7"></path><path d="M10 0v7">'),t$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 2.8h15"></path><path d="M0 5.6h15"></path><path d="M0 8.4h15"></path><path d="M0 11.2h15">'),r$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M3 0v14"></path><path d="M6 0v14"></path><path d="M9 0v14"></path><path d="M12 0v14">'),n$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M7.5 3.5h7.5"></path><path d="M7.5 7h7.5"></path><path d="M7.5 10.5h7.5">'),i$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M7.5 0v14"></path><path d="M0 3.5h7.5"></path><path d="M0 7h7.5"></path><path d="M0 10.5h7.5">'),o$=K('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M5 0v14"></path><path d="M10 0v14"></path><path d="M0 7.5h15M7.5">'),a$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M2.5 0v14"></path><path d="M5 0v14"></path><path d="M7.5 0v14"></path><path d="M10 0v14"></path><path d="M12.5 0v14">'),s$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 2.5h15"></path><path d="M0 5h15"></path><path d="M0 7.5h15"></path><path d="M0 10h15"></path><path d="M0 12.5h15">'),l$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 4.5h15"></path><path d="M0 9.5h15"></path><path d="M7.5 0v14">'),c$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 2h15"></path><path d="M0 4h15"></path><path d="M0 6h15"></path><path d="M0 8h15"></path><path d="M0 10h15"></path><path d="M0 12h15">'),u$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M2.14 0v14"></path><path d="M4.28 0v14"></path><path d="M6.42 0v14"></path><path d="M8.57 0v14"></path><path d="M10.71 0v14"></path><path d="M12.85 0v14">'),d$=K('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15M3.75 0v14M7.5 0v14M11.25 0v14">'),h$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.75h15"></path><path d="M0 3.5h15"></path><path d="M0 5.25h15"></path><path d="M0 7h15"></path><path d="M0 8.75h15"></path><path d="M0 10.5h15"></path><path d="M0 12.25h15">'),p$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.875 0v14"></path><path d="M3.75 0v14"></path><path d="M5.625 0v14"></path><path d="M7.5 0v14"></path><path d="M9.375 0v14"></path><path d="M11.25 0v14"></path><path d="M13.125 0v14">'),f$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 4.5h15"></path><path d="M0 9.5h15"></path><path d="M5 0v14"></path><path d="M10 0v14">'),g$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.5h15"></path><path d="M0 3h15"></path><path d="M0 4.5h15"></path><path d="M0 6h15"></path><path d="M0 7.5h15"></path><path d="M0 9h15"></path><path d="M0 10.5h15"></path><path d="M0 12h15">'),v$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.67 0v14"></path><path d="M3.33 0v14"></path><path d="M5 0v14"></path><path d="M6.67 0v14"></path><path d="M8.33 0v14"></path><path d="M10 0v14"></path><path d="M11.67 0v14"></path><path d="M13.33 0v14">'),m$=K('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M0 7h15M3 0v14M6 0v14M9 0v14M12 0v14">'),y$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.4h15"></path><path d="M0 2.8h15"></path><path d="M0 4.2h15"></path><path d="M0 5.6h15"></path><path d="M0 7h15"></path><path d="M0 8.4h15"></path><path d="M0 9.8h15"></path><path d="M0 11.2h15"></path><path d="M0 12.6h15">'),b$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.5 0v14"></path><path d="M3 0v14"></path><path d="M4.5 0v14"></path><path d="M6 0v14"></path><path d="M7.5 0v14"></path><path d="M9 0v14"></path><path d="M10.5 0v14"></path><path d="M12 0v14"></path><path d="M13.5 0v14">'),x$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 3.5h15"></path><path d="M0 7h15"></path><path d="M0 10.5h15"></path><path d="M5 0v14"></path><path d="M10 0v14">'),w$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 1.17h15"></path><path d="M0 2.33h15"></path><path d="M0 3.5h15"></path><path d="M0 4.67h15"></path><path d="M0 5.83h15"></path><path d="M0 7h15"></path><path d="M0 8.17h15"></path><path d="M0 9.33h15"></path><path d="M0 10.5h15"></path><path d="M0 11.67h15"></path><path d="M0 12.83h15">'),C$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M1.25 0v14"></path><path d="M2.5 0v14"></path><path d="M3.75 0v14"></path><path d="M5 0v14"></path><path d="M6.25 0v14"></path><path d="M7.5 0v14"></path><path d="M8.75 0v14"></path><path d="M10 0v14"></path><path d="M11.25 0v14"></path><path d="M12.5 0v14"></path><path d="M13.75 0v14">'),_$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 7h15"></path><path d="M2.5 0v14"></path><path d="M5 0v14"></path><path d="M7.5 0v14"></path><path d="M10 0v14"></path><path d="M12.5 0v14">'),Ey=K('<svg xmlns=http://www.w3.org/2000/svg width=20 height=15><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=4></rect><path d="M2 0v14"></path><path d="M5 0v14"></path><path d="M12 0v14"></path><path d="M0 7.5h15M9 0v14">'),S$=K('<svg xmlns=http://www.w3.org/2000/svg width=15 height=14><g fill=none stroke=currentColor transform="translate(.5 .5)"><rect width=15 height=14 rx=2></rect><path d="M0 3.5h15"></path><path d="M0 7h15"></path><path d="M0 10.5h15"></path><path d="M3.75 0v14"></path><path d="M7.5 0v14"></path><path d="M11.25 0v14">');const k$=e=>(()=>{var t=zB();return Hn(t,"click",e.onMultiChartClick),F(t,(()=>{var r=Le(()=>e.multiChart===X.ONE);return()=>r()&&VB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.TWO);return()=>r()&&BB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.TWO_VERTICAL);return()=>r()&&$B()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.THREE);return()=>r()&&WB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.THREE_VERTICAL);return()=>r()&&HB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.THREE_MIXED);return()=>r()&&UB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.THREE_MIXED_REVERSE);return()=>r()&&jB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.THREE_MIXED_BOTTOM);return()=>r()&&XB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.THREE_MIXED_TOP);return()=>r()&&YB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FOUR);return()=>r()&&ZB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FOUR_VERTICAL);return()=>r()&&KB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FOUR_HORIZONTAL);return()=>r()&&qB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FOUR_MIXED);return()=>r()&&QB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FOUR_MIXED_REVERSE);return()=>r()&&GB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FOUR_MIXED_TOP);return()=>r()&&JB()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FOUR_MIXED_BOTTOM);return()=>r()&&e$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FIVE_VERTICAL);return()=>r()&&t$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FIVE_HORIZONTAL);return()=>r()&&r$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FIVE_MIXED);return()=>r()&&n$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FIVE_MIXED_REVERSE);return()=>r()&&i$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.SIX);return()=>r()&&o$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.SIX_HORIZONTAL);return()=>r()&&a$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.SIX_VERTICAL);return()=>r()&&s$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.SIX_MIXED);return()=>r()&&l$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.SEVEN_VERTICAL);return()=>r()&&c$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.SEVEN_HORIZONTAL);return()=>r()&&u$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.EIGHT);return()=>r()&&d$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.EIGHT_VERTICAL);return()=>r()&&h$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.EIGHT_HORIZONTAL);return()=>r()&&p$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.NINE);return()=>r()&&f$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.NINE_VERTICAL);return()=>r()&&g$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.NINE_HORIZONTAL);return()=>r()&&v$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.TEN);return()=>r()&&m$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.TEN_VERTICAL);return()=>r()&&y$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.TEN_HORIZONTAL);return()=>r()&&b$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.TWELVE);return()=>r()&&x$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.TWELVE_VERTICAL);return()=>r()&&w$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.TWELVE_HORIZONTAL);return()=>r()&&C$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.TWELVE_GRID);return()=>r()&&_$()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.FOURTEEN);return()=>r()&&Ey()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.SIXTEEN);return()=>r()&&Ey()})(),null),F(t,(()=>{var r=Le(()=>e.multiChart===X.SIXTEEN_GRID);return()=>r()&&S$()})(),null),t})();Dt(["click"]);var M$=K("<div class=candle-type-dropdown><div class=candle-icon-container><div class=candle-icon></div><span class=candle-type-text></span><span class=dropdown-indicator>▼");const vp={candle_solid:'<svg width="20" height="20" stroke="currentColor" stroke-width="0.04" viewBox="0 0 0.63 0.99"><path fill="none" d="M.52.02v.95M.11.02v.95"></path><rect x=".02" y=".16" width=".19" height=".5" rx=".02" ry=".07" fill="currentColor"></rect><rect x=".42" y=".35" width=".19" height=".5" rx=".02" ry=".07" fill="currentColor"></rect></svg>',candle_stroke:'<svg viewBox="0 0 26 26" width="28" height="28" fill="currentColor"><g transform="translate(0.5, 0.5)"><path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1zM9 4v5H7v11h2v3h1v-3h2V9h-2V4H9zm6 3h3v10h-3V7zm-7 3h3v9H8v-9z"></path></g></svg>',candle_up_stroke:`<svg viewBox="0 0 26 26" width="25" height="25" fill="currentColor">
    <g transform="translate(0.5, 0.5)">
      <!-- Right candle (filled) -->
      <path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1z" fill="currentColor"/>
      <path d="M16 6h3v10h-3V6z" fill="currentColor"/>
      
      <!-- Left candle (hollow) -->
      <path d="M9 4v5h-2v11h2v3h1v-3h2V9h-2V4h-1z" stroke="currentColor" stroke-width="0.8" fill="none"/>
    </g>
  </svg>`,candle_down_stroke:`<svg viewBox="0 0 26 26" width="25" height="25" fill="currentColor">
    <g transform="translate(0.5, 0.5)">
      <!-- Right candle (hollow) -->
      <path d="M16 3v3h-2v12h2v5h1v-5h2V6h-2V3h-1z" stroke="currentColor" stroke-width="0.8" fill="none"/>
      
      <!-- Left candle (filled) -->
      <path d="M9 4v5h-2v11h2v3h1v-3h2V9h-2V4h-1z" fill="currentColor"/>
      <path d="M8 9v9h3V9h-3z" fill="currentColor"/>
    </g>
  </svg>`,ohlc:'<svg stroke="currentColor" stroke-width="0.04" stroke-linecap="round" stroke-linejoin="round" width="18" height="20" fill="none" viewBox="0 0 0.73 1.07"><path d="M.58.02v1.03M.15.02v1.03"></path><path d="M.02.26h.13M.15.7h.12M.58.97h.13M.46.36h.12"></path></svg>',area:'<svg fill="none" stroke="currentColor" stroke-width="0.12" stroke-linejoin="round" width="20" height="20" viewBox="0 0 2.28 1.65"><path d="M.03 1.62.36.78l.38.59.36-.7.36.25.36-.89.42.74v.85z"></path></svg>',heikin_ashi:'<svg width="20" height="20" stroke-width="0.03" stroke="currentColor" viewBox="0 0 0.63 0.99"><path fill="none" d="M.52.02v.96M.11.02v.96"></path><rect fill="currentColor" x=".02" y=".48" width=".19" height=".5" rx=".02" ry=".07"></rect><rect fill="currentColor" x=".42" y=".48" width=".19" height=".5" rx=".02" ry=".07"></rect></svg>',[X0.RENKO]:'<svg viewBox="0 0 26 26" width="25" height="25" fill="currentColor"><g transform="translate(0.5, 0.5)"><path d="M12 4v6h3V4h-3zm3 6v6h3v-6h-3zm3 6v6h3v-6h-3zm-6-6H9v6h3v-6zm-3 6H6v6h3v-6zm4-11h1v4h-1V5zm-3 6h1v4h-1v-4zm-3 6h1v4H7v-4z"></path></g></svg>'},E$=e=>{const t=U5(e).find(r=>r.key==="candle.type");return!t||!t.dataSource?[{value:"candle_solid",label:I("candle_solid",e),icon:vp.candle_solid},{value:"heikin_ashi",label:I("heikin_ashi",e),icon:vp.heikin_ashi}]:t.dataSource.map(r=>({value:r.key,label:r.text,icon:vp[r.key]||vp.candle_solid}))},T$=e=>{const t=E$(e.locale),[r,n]=me(!1);let i;const[o,s]=me(t.find(g=>g.value===e.currentCandleType)||t[0]);tt(()=>{const g=e.currentCandleType,m=t.find(b=>b.value===g);m&&s(m)});const u=Bt(()=>t.map(g=>({key:g.value,text:g.label,value:g,icon:g.icon}))),c=g=>{const m=g.value;s(m),e.onCandleTypeChange(m.value)},h=()=>{n(!r())},p=()=>{n(!1)};return[(()=>{var g=M$(),m=g.firstChild,b=m.firstChild,x=b.nextSibling,C=i;return typeof C=="function"?tn(C,g):i=g,m.$$click=h,F(x,()=>I("charts",e.locale)),Ae(()=>b.innerHTML=o().icon),g})(),Y(rh,{get options(){return u()},get selectedKey(){return o().value},onSelect:c,triggerRef:i,get isOpen(){return r()},onClose:p,placement:"bottom",className:"candle-dropdown",maxHeight:800})]};Dt(["click"]);var I$=K('<div class=interval-dropdown><div class=interval-selector><span class=interval-text></span><svg width=8 height=8 viewBox="0 0 8 8"><path d="M4 5.5L1.5 3h5L4 5.5z">');const L$=e=>{const[t,r]=me(!1);let n;const[i,o]=me(e.period||e.periods[0]);tt(()=>{const p=e.period;p&&o(p)});const s=Bt(()=>e.periods.map(p=>({key:p.text,text:p.text,value:p}))),u=p=>{const g=p.value;o(g),e.onPeriodChange(g)},c=()=>{r(!t())},h=()=>{r(!1)};return[(()=>{var p=I$(),g=p.firstChild,m=g.firstChild,b=m.nextSibling,x=n;return typeof x=="function"?tn(x,p):n=p,g.$$click=c,F(m,()=>i().text),Ae(()=>Be(b,"class",`dropdown-arrow ${t()?"open":""}`)),p})(),Y(rh,{get options(){return s()},get selectedKey(){return i().text},onSelect:u,triggerRef:n,get isOpen(){return t()},onClose:h,placement:"bottom",className:"interval-dropdown-portal",maxHeight:800,minWidth:40})]};Dt(["click"]);X0.RENKO;const Y5=10;function Ds(e){return e===X0.RENKO||String(e).toLowerCase()==="renko"}function Z5(e,t,r){var n,i,o,s;if(!e||e.length===0)return[];let u=[],c=e[0].open;for(let h=1;h<e.length;h++){const p=e[h].timestamp,g=e[h].close,m=Number((g-c).toFixed(r));if(m>0){let b=m;for(;b>=t;){const x=Number((c+t).toFixed(r)),C={open:c,high:x,low:c,close:x,timestamp:p};(u.length===0||x!==((n=u.at(-1))==null?void 0:n.open)&&x!==((i=u.at(-1))==null?void 0:i.close))&&u.push(C),c=x,b-=t}}else if(m<0){let b=Math.abs(m);for(;b>=t;){const x=Number((c-t).toFixed(r)),C={open:c,high:c,low:x,close:x,timestamp:p};(u.length===0||x!==((o=u.at(-1))==null?void 0:o.open)&&x!==((s=u.at(-1))==null?void 0:s.close))&&u.push(C),c=x,b-=t}}}return u}function P$(e,t,r,n){var i,o,s,u,c;if(t.length===0)return Z5([{open:e.open,high:e.high,low:e.low,close:e.close,timestamp:e.timestamp-6e4},e],r,n);let h=[...t],p=((i=h.at(-1))==null?void 0:i.close)||0;const g=e.timestamp;let m=e.close;const b=Number((m-p).toFixed(n));if(b>0&&b>=r){const C=Math.floor(b/r);for(let _=0;_<C;_++){const k=Number((p+r).toFixed(n)),M={open:p,high:k,low:p,close:k,timestamp:g};(h.length===0||k!==((o=h.at(-1))==null?void 0:o.open)&&k!==((s=h.at(-1))==null?void 0:s.close))&&h.push(M),p=k}}else if(b<0&&Math.abs(b)>=r){const C=Math.floor(Math.abs(b)/r);for(let _=0;_<C;_++){const k=Number((p-r).toFixed(n)),M={open:p,high:p,low:k,close:k,timestamp:g};(h.length===0||k!==((u=h.at(-1))==null?void 0:u.open)&&k!==((c=h.at(-1))==null?void 0:c.close))&&h.push(M),p=k}}const x=b-Math.floor(Math.abs(b)/r)*(b>=0?r:-r);if(x!==0&&h.length>0){const C=h.at(-1),_=Number((C.close+x).toFixed(n));C.shadowPrice=_}return h}function A$(e,t){if(e.length===0)return e;const r=[...e],n=r[r.length-1],i=t.close,o={...n,shadowPrice:i};return r[r.length-1]=o,r}function D$(e,t,r){var n;if(!t||t.length===0)return console.warn(`No data provided for Renko chart initialization (chart ${r})`),[];try{const i=((n=e.getStyles().candle.renko)==null?void 0:n.brick.size)||Y5;e.getStyles().candle.type="candle_solid";const o=[...t].sort((p,g)=>p.timestamp-g.timestamp),s=Z5(o,i,4);if(s.length===0)return console.warn(`Failed to generate Renko bricks for chart ${r} - using original data`),o;const u=o.at(-1),c=P$(u,s,i,4),h=A$(c,u);return h.length>0?h:t}catch(i){return console.error(`Error initializing Renko chart ${r}:`,i),t}}var F$=K('<div class="item tools"><svg viewBox="0 0 20 20"><circle cx=4 cy=10 r=1.5></circle><circle cx=10 cy=10 r=1.5></circle><circle cx=16 cy=10 r=1.5>');const R$=e=>{let t;const[r,n]=me(!1),i=Bt(()=>!e.menuPages||e.menuPages.length===0?[{key:"no-pages",text:"No pages available",value:null}]:e.menuPages.map((u,c)=>{const h=u.name.length>25?`${u.name.substring(0,25)}...`:u.name;return{key:`menu-${c}`,text:h,value:u}})),o=u=>{if(u.value&&e.menuPageClickCallback){const c=u.value;e.menuPageClickCallback(c),c.path&&(window.location.href=c.path)}},s=()=>{n(!r())};return[(()=>{var u=F$();u.$$click=s;var c=t;return typeof c=="function"?tn(c,u):t=u,u})(),Y(rh,{get options(){return i()},onSelect:o,triggerRef:t,get isOpen(){return r()},onClose:()=>n(!1),placement:"bottom",minWidth:200})]};Dt(["click"]);class $c{static isSupported(){return!!(document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen)}static isFullscreen(){const t=document;return!!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)}static getRequestFullscreenMethod(t){const r=t;return r.requestFullscreen??r.webkitRequestFullscreen??r.mozRequestFullScreen??r.msRequestFullscreen??null}static getExitFullscreenMethod(){const t=document;return t.exitFullscreen??t.webkitExitFullscreen??t.mozCancelFullScreen??t.msExitFullscreen??null}static async requestFullscreen(t){const r=this.getRequestFullscreenMethod(t);if(r)try{return await r.call(t),!0}catch(n){return console.error("Failed to enter fullscreen:",n),!1}return!1}static async exitFullscreen(){const t=this.getExitFullscreenMethod();if(t)try{return await t.call(document),!0}catch(r){return console.error("Failed to exit fullscreen:",r),!1}return!1}static copyThemeAttributes(t,r){const n=t.getAttribute("data-theme");n&&r.setAttribute("data-theme",n),t.classList.contains("chartspire-ui")&&!r.classList.contains("chartspire-ui")&&r.classList.add("chartspire-ui")}static removeThemeAttributes(t){t.classList.remove("chartspire-ui"),t.removeAttribute("data-theme")}static getFullscreenEventNames(){return["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"]}}class O${constructor(t,r,n={}){be(this,"rootContainer"),be(this,"chart"),be(this,"isFullscreen",!1),be(this,"eventListeners",new Map),be(this,"options"),this.rootContainer=t,this.chart=r,this.options={preserveTheme:!0,...n},this.bindEventListeners()}bindEventListeners(){const t=$c.getFullscreenEventNames(),r=this.handleFullscreenChange.bind(this);t.forEach(n=>{document.addEventListener(n,r),this.eventListeners.set(n,r)})}handleFullscreenChange(){const t=this.isFullscreen;this.isFullscreen=$c.isFullscreen(),t&&!this.isFullscreen&&this.options.preserveTheme&&this.cleanupTheme(),this.chart&&setTimeout(()=>{this.chart.resize()},100),this.isFullscreen&&this.options.onEnter?this.options.onEnter():!this.isFullscreen&&this.options.onExit&&this.options.onExit()}applyTheme(){if(!this.options.preserveTheme)return;const t=this.rootContainer.querySelector(".chartspire-ui");t&&$c.copyThemeAttributes(t,this.rootContainer)}cleanupTheme(){this.options.preserveTheme&&this.rootContainer.classList.contains("chartspire-ui")&&$c.removeThemeAttributes(this.rootContainer)}async enter(){if(!$c.isSupported())return console.warn("Fullscreen API is not supported by this browser"),!1;if(this.isFullscreen)return!0;this.applyTheme();const t=await $c.requestFullscreen(this.rootContainer);return t?this.isFullscreen=!0:this.cleanupTheme(),t}async exit(){if(!this.isFullscreen)return!0;const t=await $c.exitFullscreen();return t&&(this.isFullscreen=!1),t}async toggle(){return this.isFullscreen?await this.exit():await this.enter()}getIsFullscreen(){return this.isFullscreen}setChart(t){this.chart=t}setOptions(t){this.options={...this.options,...t}}destroy(){this.eventListeners.forEach((t,r)=>{document.removeEventListener(r,t)}),this.eventListeners.clear(),this.cleanupTheme()}}var N$=K("<img alt=symbol>"),z$=K("<div class=symbol><span>"),V$=K('<div class=chartspire-ui-top-bar><div class="item tools"><svg viewBox="0 0 20 20"><path d=M15.873,20L3.65079,20C1.5873,20,0,18.3871,0,16.2903L0,3.70968C-3.78442e-7,1.6129,1.5873,0,3.65079,0L15.873,0C17.9365,0,19.5238,1.6129,19.5238,3.70968C19.5238,4.35484,19.2063,4.51613,18.5714,4.51613C17.9365,4.51613,17.619,4.19355,17.619,3.70968C17.619,2.74194,16.8254,1.93548,15.873,1.93548L3.65079,1.93548C2.69841,1.93548,1.90476,2.74194,1.90476,3.70968L1.90476,16.2903C1.90476,17.2581,2.69841,18.0645,3.65079,18.0645L15.873,18.0645C16.8254,18.0645,17.619,17.2581,17.619,16.2903C17.619,15.8065,18.0952,15.3226,18.5714,15.3226C19.0476,15.3226,19.5238,15.8065,19.5238,16.2903C19.5238,18.2258,17.9365,20,15.873,20ZM14.9206,12.9032C14.7619,12.9032,14.4444,12.9032,14.2857,12.7419L11.2698,9.35484C10.9524,9.03226,10.9524,8.54839,11.2698,8.22581C11.5873,7.90323,12.0635,7.90323,12.381,8.22581L15.3968,11.6129C15.7143,11.9355,15.7143,12.4194,15.3968,12.7419C15.3968,12.9032,15.2381,12.9032,14.9206,12.9032ZM11.4286,13.2258C11.2698,13.2258,11.1111,13.2258,10.9524,13.0645C10.6349,12.7419,10.6349,12.4194,10.9524,12.0968L15.0794,7.74193C15.3968,7.41935,15.7143,7.41935,16.0317,7.74193C16.3492,8.06452,16.3492,8.3871,16.0317,8.70968L11.9048,13.0645C11.746,13.2258,11.5873,13.2258,11.4286,13.2258ZM10.3175,3.70968C10.6349,3.70968,11.4286,3.87097,11.4286,4.67742C11.4286,5.32258,10.4762,5.16129,10.1587,5.16129C8.73016,5.16129,8.25397,5.96774,8.09524,6.6129L7.77778,8.54839L9.36508,8.54839C9.68254,8.54839,10,8.87097,10,9.19355C10,9.51613,9.68254,9.83871,9.36508,9.83871L7.61905,9.83871L6.50794,14.8387Q6.34921,16.2903,5.39683,16.2903Q4.44444,16.2903,4.92064,14.8387L6.03175,10L4.60317,10C4.28571,10,3.96825,9.67742,3.96825,9.35484C3.96825,8.70968,4.28571,8.54839,4.60317,8.54839L6.34921,8.54839L6.8254,6.45161C7.14286,3.70968,9.52381,3.54839,10.3175,3.70968ZM18.4127,6.6129C18.5714,6.12903,18.8889,5.96774,19.3651,5.96774C19.8413,6.12903,20,6.45161,20,6.93548L18.4127,13.3871C18.254,13.871,17.9365,14.0323,17.4603,14.0323C16.9841,13.871,16.8254,13.5484,16.8254,13.0645L18.4127,6.6129Z></path></svg><span></span></div><div><svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd d="M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z M12,21 C16.9705627,21 21,16.9705627 21,12 C21,7.02943725 16.9705627,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 Z M8,17 L8,7 C8,6.21456446 8.86395093,5.73572169 9.52999894,6.1520017 L17.5299989,11.1520017 C18.156667,11.5436692 18.156667,12.4563308 17.5299989,12.8479983 L9.52999894,17.8479983 C8.86395093,18.2642783 8,17.7854355 8,17 Z M15.1132038,12 L10,8.80424764 L10,15.1957524 L15.1132038,12 Z"></path></svg><span></span></div><div></div><div class="item tools csv"><svg viewBox="0 50 500 400"><path d="M430.557,79.556H218.44c21.622,12.688,40.255,29.729,54.859,49.906h157.258 c7.196,0,13.063,5.863,13.063,13.06v238.662c0,7.199-5.866,13.064-13.063,13.064H191.894c-7.198,0-13.062-5.865-13.062-13.064 V222.173c-6.027-3.1-12.33-5.715-18.845-7.732c-3.818,11.764-12.105,21.787-23.508,27.781c-2.39,1.252-4.987,2.014-7.554,2.844 v136.119c0,34.717,28.25,62.971,62.968,62.971h238.663c34.718,0,62.969-28.254,62.969-62.971V142.522 C493.525,107.806,465.275,79.556,430.557,79.556z"></path><path id=XMLID_31_ d="M129.037,175.989c51.419,1.234,96.388,28.283,122.25,68.865c2.371,3.705,6.434,5.848,10.657,5.848 c1.152,0,2.322-0.162,3.46-0.486c5.377-1.545,9.114-6.418,9.179-12.006c0-0.504,0-1.01,0-1.51 c0-81.148-64.853-147.023-145.527-148.957V64.155c0-5.492-3.038-10.512-7.879-13.078c-2.16-1.139-4.533-1.707-6.889-1.707 c-2.94,0-5.848,0.88-8.35,2.584L5.751,120.526C2.162,122.98,0.018,127.041,0,131.394c-0.017,4.338,2.113,8.418,5.687,10.902 l100.17,69.451c2.518,1.753,5.459,2.631,8.414,2.631c2.355,0,4.696-0.553,6.857-1.676c4.855-2.549,7.909-7.6,7.909-13.092V175.989z "></path></svg></div><div class="item tools"><svg viewBox="0 0 20 20"><path d=M19.7361,12.542L18.1916,11.2919C18.2647,10.8678,18.3025,10.4347,18.3025,10.0017C18.3025,9.56861,18.2647,9.13555,18.1916,8.71142L19.7361,7.46135C19.9743,7.26938,20.0615,6.95686,19.9554,6.6756L19.9342,6.61756C19.5074,5.49026,18.8755,4.45449,18.0549,3.53926L18.0124,3.49238C17.8096,3.26692,17.4819,3.1821,17.1848,3.28032L15.2677,3.92544C14.5603,3.3763,13.7704,2.94324,12.9168,2.63966L12.5466,0.742229C12.49,0.449802,12.2472,0.222111,11.9383,0.168536L11.8746,0.157375C10.6461,-0.0524583,9.35391,-0.0524583,8.1254,0.157375L8.06174,0.168536C7.75284,0.222111,7.50997,0.449802,7.45338,0.742229L7.08082,2.64859C6.2343,2.95217,5.44909,3.383,4.74641,3.92991L2.81522,3.28032C2.52047,3.1821,2.19036,3.26469,1.98757,3.49238L1.94513,3.53926C1.12455,4.45672,0.492609,5.49249,0.0658141,6.61756L0.0445921,6.6756C-0.0615171,6.95463,0.0257283,7.26715,0.263885,7.46135L1.82723,8.72482C1.75413,9.14448,1.71876,9.57308,1.71876,9.99944C1.71876,10.428,1.75413,10.8566,1.82723,11.2741L0.263885,12.5375C0.025729,12.7295,-0.0615164,13.042,0.0445929,13.3233L0.0658148,13.3813C0.49261,14.5064,1.12455,15.5444,1.94513,16.4596L1.98757,16.5065C2.19036,16.732,2.51812,16.8168,2.81522,16.7186L4.74641,16.069C5.44909,16.6159,6.2343,17.0489,7.08082,17.3503L7.45338,19.2567C7.50997,19.5491,7.75284,19.7768,8.06174,19.8303L8.1254,19.8415C8.74084,19.9464,9.37042,20,10,20C10.6296,20,11.2615,19.9464,11.8746,19.8415L11.9383,19.8303C12.2472,19.7768,12.49,19.5491,12.5466,19.2567L12.9168,17.3592C13.7704,17.0556,14.5603,16.6248,15.2677,16.0734L17.1848,16.7186C17.4795,16.8168,17.8096,16.7342,18.0124,16.5065L18.0549,16.4596C18.8755,15.5422,19.5074,14.5064,19.9342,13.3813L19.9554,13.3233C20.0615,13.0487,19.9743,12.7362,19.7361,12.542ZM16.5175,8.97483C16.5764,9.3119,16.6071,9.65791,16.6071,10.0039C16.6071,10.3499,16.5764,10.6959,16.5175,11.033L16.3618,11.9281L18.1233,13.3545C17.8568,13.9372,17.5196,14.4863,17.1188,14.9975L14.9305,14.2631L14.1901,14.839C13.6266,15.2765,12.9994,15.6203,12.3203,15.8614L11.4219,16.1806L10.9998,18.3459C10.3372,18.4173,9.66045,18.4173,8.9955,18.3459L8.57342,16.1761L7.6821,15.8524C7.01008,15.6114,6.38521,15.2676,5.82637,14.8323L5.08596,14.2541L2.88361,14.9953C2.48275,14.4841,2.14791,13.9327,1.8791,13.3523L3.65938,11.9125L3.50611,11.0196C3.44952,10.687,3.41887,10.3432,3.41887,10.0039C3.41887,9.66237,3.44716,9.32083,3.50611,8.98822L3.65938,8.09531L1.8791,6.6555C2.14556,6.07288,2.48275,5.52374,2.88361,5.01255L5.08596,5.75367L5.82637,5.17551C6.38521,4.74022,7.01008,4.39645,7.6821,4.15536L8.57578,3.83615L8.99786,1.66638C9.66045,1.59495,10.3372,1.59495,11.0021,1.66638L11.4242,3.83168L12.3226,4.1509C12.9994,4.39198,13.6289,4.73575,14.1925,5.17328L14.9329,5.7492L17.1211,5.01479C17.522,5.52598,17.8568,6.07734,18.1256,6.65773L16.3642,8.08416L16.5175,8.97483ZM10.0024,5.85189C7.7104,5.85189,5.85231,7.61092,5.85231,9.78068C5.85231,11.9504,7.7104,13.7095,10.0024,13.7095C12.2943,13.7095,14.1524,11.9504,14.1524,9.78068C14.1524,7.61092,12.2943,5.85189,10.0024,5.85189ZM11.8699,11.5486C11.37,12.0196,10.7074,12.2808,10.0024,12.2808C9.29732,12.2808,8.63473,12.0196,8.13483,11.5486C7.6373,11.0754,7.36142,10.4481,7.36142,9.78068C7.36142,9.11323,7.6373,8.48596,8.13483,8.01272C8.63473,7.53948,9.29732,7.28054,10.0024,7.28054C10.7074,7.28054,11.37,7.53948,11.8699,8.01272C12.3674,8.48596,12.6433,9.11323,12.6433,9.78068C12.6433,10.4481,12.3674,11.0754,11.8699,11.5486Z></path></svg></div><div class="item tools"><svg viewBox="0 0 20 20"><path d=M6.50977,1L13.4902,1C13.6406,1,13.7695,1.1104910000000001,13.7969,1.2631700000000001L14.0273,2.52277C14.1387,3.13147,14.6543,3.57143,15.2559,3.57143L17.5,3.57143C18.8809,3.57143,20,4.72254,20,6.14286L20,16.4286C20,17.8489,18.8809,19,17.5,19L2.5,19C1.11914,19,0,17.8489,0,16.4286L0,6.14286C0,4.72254,1.11914,3.57143,2.5,3.57143L4.74414,3.57143C5.3457,3.57143,5.86133,3.13147,5.97266,2.52277L6.20312,1.2631700000000001C6.23047,1.1104910000000001,6.35937,1,6.50977,1ZM15.2559,4.857139999999999C14.0547,4.857139999999999,13.0215,3.97522,12.7988,2.75982L12.7129,2.28571L7.28711,2.28571L7.20117,2.75982C6.98047,3.97522,5.94727,4.857139999999999,4.74414,4.857139999999999L2.5,4.857139999999999C1.81055,4.857139999999999,1.25,5.43371,1.25,6.14286L1.25,16.4286C1.25,17.1377,1.81055,17.7143,2.5,17.7143L17.5,17.7143C18.1895,17.7143,18.75,17.1377,18.75,16.4286L18.75,6.14286C18.75,5.43371,18.1895,4.857139999999999,17.5,4.857139999999999L15.2559,4.857139999999999ZM4.375,6.78571L3.125,6.78571C2.7793,6.78571,2.5,6.49844,2.5,6.14286C2.5,5.78728,2.7793,5.5,3.125,5.5L4.375,5.5C4.7207,5.5,5,5.78728,5,6.14286C5,6.49844,4.7207,6.78571,4.375,6.78571ZM10,6.14286C7.06641,6.14286,4.6875,8.58973,4.6875,11.6071C4.6875,14.6246,7.06641,17.0714,10,17.0714C12.9336,17.0714,15.3125,14.6246,15.3125,11.6071C15.3125,8.58973,12.9336,6.14286,10,6.14286ZM10,7.42857C11.0859,7.42857,12.1055,7.8625,12.873,8.65201C13.6406,9.44152,14.0625,10.49018,14.0625,11.6071C14.0625,12.7241,13.6406,13.7728,12.873,14.5623C12.1055,15.3518,11.0859,15.7857,10,15.7857C8.91406,15.7857,7.89453,15.3518,7.12695,14.5623C6.35937,13.7728,5.9375,12.7241,5.9375,11.6071C5.9375,10.49018,6.35938,9.44152,7.12695,8.65201C7.89453,7.8625,8.91406,7.42857,10,7.42857ZM10,9.67857C8.96484,9.67857,8.125,10.54241,8.125,11.6071C8.125,12.6719,8.96484,13.5357,10,13.5357C11.0352,13.5357,11.875,12.6719,11.875,11.6071C11.875,10.54241,11.0352,9.67857,10,9.67857ZM10,10.96429C10.3438,10.96429,10.625,11.2536,10.625,11.6071C10.625,11.9607,10.3438,12.25,10,12.25C9.65625,12.25,9.375,11.9607,9.375,11.6071C9.375,11.2536,9.65625,10.96429,10,10.96429Z></path></svg></div><div class="item tools">'),B$=K('<svg viewBox="0 0 20 20"><path d=M1.08108,0L0,1.079L4.18919,5.27938L2.54826,6.91715L6.9112,6.91715L6.9112,2.56262L5.28957,4.18112L1.08108,0ZM15.8108,5.27938L20,1.079L18.9189,0L14.7104,4.18112L13.0888,2.56262L13.0888,6.91715L17.4517,6.91715L15.8108,5.27938ZM4.16988,14.7014L0.07722,18.8054L1.1583,20L5.27027,15.7996L6.9112,17.4374L6.9112,13.0829L2.54826,13.0829L4.16988,14.7014ZM17.4517,13.0829L13.0888,13.0829L13.0888,17.4374L14.7297,15.7996L18.8417,20L19.9228,18.8054L15.8301,14.7013L17.4517,13.0829Z>'),$$=K('<svg viewBox="0 0 20 20"><path d=M2.93444,1.76899L7.57544,6.40999L6.38918,7.59626L1.76899,2.93444L0,4.70343L0,0L4.70343,0L2.93444,1.76899ZM6.40999,12.4037L1.76899,17.0447L0,15.2758L0,19.9792L4.70343,19.9792L2.93444,18.2102L7.57544,13.5692L6.40999,12.4037ZM15.2758,0L17.0447,1.76899L12.4037,6.40999L13.59,7.59626L18.231,2.95526L20,4.72425L20,0L15.2758,0ZM13.5692,12.4037L12.3829,13.59L17.0239,18.231L15.2549,20L19.9792,20L19.9792,15.2758L18.2102,17.0447L13.5692,12.4037Z>');const W$=e=>{let t;const[r,n]=me(!1);return Ei(()=>{t=new O$(e.rootContainer,e.chart,{onEnter:()=>n(!0),onExit:()=>n(!1),preserveTheme:!0}),n(t.getIsFullscreen())}),Nr(()=>{t&&t.destroy()}),(()=>{var i=V$(),o=i.firstChild,s=o.firstChild,u=s.nextSibling,c=o.nextSibling,h=c.firstChild,p=h.nextSibling,g=c.nextSibling,m=g.nextSibling,b=m.nextSibling,x=b.nextSibling,C=x.nextSibling;return tn(_=>{},i),F(i,Y(Pe,{get when(){return e.symbol},get children(){var _=z$(),k=_.firstChild;return Hn(_,"click",e.onSymbolClick),F(_,Y(Pe,{get when(){return e.symbol.logo},get children(){var M=N$();return M.addEventListener("error",L=>L.currentTarget.style.display="none"),Ae(()=>Be(M,"src",e.symbol.logo)),M}}),k),F(k,()=>e.symbol.symbol??e.symbol.shortName??e.symbol.name),_}}),o),F(i,Y(L$,{get periods(){return e.periods},get period(){return e.period},get onPeriodChange(){return e.onPeriodChange}}),o),Hn(o,"click",e.onIndicatorClick),F(u,()=>I("indicator",e.locale)),F(i,Y(T$,{get locale(){return e.locale},get currentCandleType(){return e.currentCandleType},get onCandleTypeChange(){return e.onCandleTypeChange}}),c),Hn(c,"click",Ds(e.currentCandleType)?void 0:e.onReplayClick),F(p,()=>I("replay",e.locale)),g.style.setProperty("flex","1"),F(i,Y(k$,{get onMultiChartClick(){return e.onMultiChartClick},get multiChart(){return e.multiChart}}),m),m.$$click=()=>{NB(e.chart)},Hn(b,"click",e.onSettingClick),Hn(x,"click",e.onScreenshotClick),C.$$click=async()=>{t&&await t.toggle()},F(C,(()=>{var _=Le(()=>!!r());return()=>_()?B$():$$()})()),F(i,Y(Pe,{get when(){return e.menuPagesEnabled!==!1},get children(){return Y(R$,{get menuPages(){return e.menuPages},get menuPageClickCallback(){return e.menuPageClickCallback},get locale(){return e.locale}})}}),null),Ae(()=>Ge(c,`item tools ${Ds(e.currentCandleType)?"disabled":""}`)),i})()};Dt(["click"]);var H$=K("<div class=chartspire-ui-interval-container>"),U$=K("<span>");const j$=e=>{const[t,r]=me(qe.ONE_DAY),n=[qe.ONE_DAY,qe.FIVE_DAY,qe.ONE_MONTH,qe.THREE_MONTH,qe.SIX_MONTH,qe.ONE_YEAR,qe.FIVE_YEAR],i=()=>{var o;const s=(o=e.widget)==null?void 0:o.getSize();let u={[qe.ONE_DAY]:1440,[qe.FIVE_DAY]:1440,[qe.ONE_MONTH]:1440,[qe.THREE_MONTH]:1440,[qe.SIX_MONTH]:2016,[qe.ONE_YEAR]:365,[qe.FIVE_YEAR]:260}[t()];e.ticker.type===br.STOCKS&&(u={[qe.ONE_DAY]:390,[qe.FIVE_DAY]:390,[qe.ONE_MONTH]:273,[qe.THREE_MONTH]:390,[qe.SIX_MONTH]:390,[qe.ONE_YEAR]:252,[qe.FIVE_YEAR]:252}[t()]);const c=Math.min(Math.max(((s==null?void 0:s.width)??0)/u,1),50);e.widget.setBarSpace(c);let h={multiplier:u,timespan:Tn.DAY,text:qe.ONE_DAY};t()===qe.ONE_DAY?h={multiplier:1,timespan:Tn.MINUTE,text:qe.ONE_MIN}:t()===qe.FIVE_DAY?h={multiplier:5,timespan:Tn.MINUTE,text:qe.FIVE_MIN}:t()===qe.ONE_MONTH?h={multiplier:1,timespan:Tn.MINUTE,text:qe.THIRTY_MIN}:t()===qe.THREE_MONTH?h={multiplier:1,timespan:Tn.HOUR,text:qe.ONE_HOUR}:t()===qe.SIX_MONTH?h={multiplier:2,timespan:Tn.HOUR,text:qe.TWO_HOUR}:t()===qe.ONE_YEAR?h={multiplier:1,timespan:Tn.DAY,text:qe.ONE_DAY}:t()===qe.FIVE_YEAR&&(h={multiplier:1,timespan:Tn.WEEK,text:qe.ONE_WEEK}),e.widget.setOffsetRightDistance(0),e.setInterval(h)};return(()=>{var o=H$();return F(o,()=>n.map(s=>(()=>{var u=U$();return u.$$click=()=>{console.log("interval clicked",s),r(s),i()},F(u,s),Ae(()=>Ge(u,`interval-buttons ${s===t()?"selected":""}`)),u})())),o})()};Dt(["click"]);var X$=K('<div class=chartspire-ui-layout-selector><div class=layout-dropdown><div class=layout-selector><span class=layout-text></span><svg width=8 height=8 viewBox="0 0 8 8"><path d="M4 5.5L1.5 3h5L4 5.5z"></path></svg></div></div><span class=button>+</span><span class=button>-'),Y$=K('<div class=edit-layout><span class=edit-button><svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z">'),Z$=K('<div class=edit-layout-form><span class=confirm-button><svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg></span><span class=cancel-button>X');const K$=e=>{const[t,r]=me([]),[n,i]=me(null),[o,s]=me(""),[u,c]=me(!1);let h;tt(()=>{e.allLayouts&&r([...new Set(e.allLayouts)])});const p=Bt(()=>t().map(L=>({key:L,text:L,value:L}))),g=L=>{const D=L.value;e.layout===vt.getInstance(e.widget).getDefaultLayout()&&vt.getInstance(e.widget).removeAllOverlays(),x(D)},m=()=>{c(!u())},b=()=>{c(!1)},x=L=>{e.onLayoutChange(L)},C=()=>{if(t().length>=e.layoutLimit+1){alert("You can only have a maximum of "+e.layoutLimit.toString()+" layouts.");return}const L=`Layout${t().length+1}`;if(t().includes(L)){alert("A layout with this name already exists.");return}r([...t(),L]),e.setAllLayouts([...t(),L]),x(L)},_=()=>{if(e.layout===vt.getInstance(e.widget).getDefaultLayout()||!window.confirm("Are you sure you want to delete this layout?"))return;vt.getInstance(e.widget).removeStorage();const L=t().filter(D=>D!==e.layout);r(L),e.setAllLayouts(L),L.length>0?x(L[0]):x(""),i(null)},k=()=>{if(e.layout===vt.getInstance(e.widget).getDefaultLayout())return;const L=t().find(D=>D===e.layout);L&&(i(L),s(L))},M=async()=>{if(e.layout===vt.getInstance(e.widget).getDefaultLayout())return;const L=t().map(D=>D===n()?o():D);r(L),i(null),await vt.getInstance(e.widget).updateLayoutName(o()),e.setAllLayouts(L),x(o())};return[(()=>{var L=X$(),D=L.firstChild,P=D.firstChild,$=P.firstChild,A=$.nextSibling,N=D.nextSibling,z=N.nextSibling,B=h;return typeof B=="function"?tn(B,L):h=L,P.$$click=m,F($,()=>e.layout||"Select Layout"),N.$$click=C,z.$$click=_,F(L,(()=>{var Q=Le(()=>!!e.layout);return()=>Q()&&(()=>{var ne=Y$(),Z=ne.firstChild;return Z.$$click=k,F(ne,(()=>{var J=Le(()=>n()===e.layout);return()=>J()&&(()=>{var ue=Z$(),le=ue.firstChild,ae=le.nextSibling;return F(ue,Y(Ha,{class:"layout-input",get value(){return o()},onChange:te=>{s(te)}}),le),le.$$click=M,ae.$$click=()=>i(null),ue})()})(),null),ne})()})(),null),Ae(()=>Be(A,"class",`dropdown-arrow ${u()?"open":""}`)),L})(),Y(rh,{get options(){return p()},get selectedKey(){return e.layout},onSelect:g,triggerRef:h,get isOpen(){return u()},onClose:b,placement:"top",className:"layout-dropdown",maxHeight:800})]};Dt(["click"]);const q$={builtInThemes:["Light Theme 1","Light Theme 2","Midnight Theme","Dark Theme","Dark Gray Theme","Blue Theme","Red Theme","Green Theme","Yellow Theme","Pink Theme"],customThemes:[],allowCustomThemes:!0};class Q${constructor(){be(this,"storageKey","chartspire-custom-themes")}save(t){try{localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(r){console.warn("Failed to save custom themes to localStorage:",r)}}load(){try{const t=localStorage.getItem(this.storageKey);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load custom themes from localStorage:",t)}return null}}const G$=async()=>null;class J${constructor(t=!1){be(this,"enableLogging"),this.enableLogging=t}log(t,...r){this.enableLogging&&console.log(t,...r)}logWarn(t,...r){this.enableLogging&&console.warn(t,...r)}save(t){this.log("[ExternalThemeStorageProvider] Saving custom themes via callback"),this.log("[ExternalThemeStorageProvider] Themes to save:",t),this.log("[ExternalThemeStorageProvider] Themes count:",t.length),this.logWarn("[ExternalThemeStorageProvider] No save callback registered, themes not saved")}load(){return this.log("[ExternalThemeStorageProvider] Load called - use loadAsync() for external storage"),null}async loadAsync(){try{this.log("[ExternalThemeStorageProvider] Loading custom themes via callback");const t=await G$();return console.log("themes: ",t),t&&t.length>0?(this.log("[ExternalThemeStorageProvider] Custom themes loaded successfully"),t):(this.log("[ExternalThemeStorageProvider] No custom themes found"),[])}catch(t){return console.error("[ExternalThemeStorageProvider] Error loading custom themes:",t),null}}}const K5=class Dd{constructor(t=!1){be(this,"themeConfig"),be(this,"customStyleElement",null),be(this,"storageProvider"),be(this,"useExternalStorage"),this.themeConfig={...q$},this.useExternalStorage=t,this.storageProvider=t?new J$:new Q$,this.loadCustomThemes()}static getInstance(t=!1){return Dd.instance||(Dd.instance=new Dd(t)),Dd.instance}static async initializeAsync(t=!1){const r=Dd.getInstance(t);return t&&r.isExternalStorageProvider(r.storageProvider)&&await r.loadCustomThemesAsync(),r}isUsingExternalStorage(){return this.useExternalStorage}isExternalStorageProvider(t){return"loadAsync"in t&&typeof t.loadAsync=="function"}setThemeConfig(t){this.themeConfig={...this.themeConfig,...t},this.saveCustomThemes(),this.updateCustomThemeStyles()}addCustomTheme(t){const r=this.themeConfig.customThemes.findIndex(n=>n.name===t.name);r>=0?this.themeConfig.customThemes[r]=t:this.themeConfig.customThemes.push(t),this.saveCustomThemes(),this.updateCustomThemeStyles()}removeCustomTheme(t){this.themeConfig.customThemes=this.themeConfig.customThemes.filter(r=>r.name!==t),this.saveCustomThemes(),this.updateCustomThemeStyles()}getAllThemes(){const t=this.themeConfig.customThemes.map(r=>r.displayName);return[...this.themeConfig.builtInThemes,...t]}getCustomThemes(){return this.themeConfig.customThemes}areCustomThemesAllowed(){return this.themeConfig.allowCustomThemes}isCustomTheme(t){return this.themeConfig.customThemes.some(r=>r.displayName===t||r.name===t)}getCustomTheme(t){return this.themeConfig.customThemes.find(r=>r.displayName===t||r.name===t)}loadCustomThemes(){const t=this.storageProvider.load();t&&(this.themeConfig.customThemes=t,this.updateCustomThemeStyles())}async loadCustomThemesAsync(){if(this.isExternalStorageProvider(this.storageProvider)){const t=await this.storageProvider.loadAsync();t&&(this.themeConfig.customThemes=t,this.updateCustomThemeStyles())}}saveCustomThemes(){this.storageProvider.save(this.themeConfig.customThemes)}updateCustomThemeStyles(){if(this.customStyleElement&&this.customStyleElement.remove(),this.themeConfig.customThemes.length>0){this.customStyleElement=document.createElement("style"),this.customStyleElement.id="chartspire-custom-themes";let t="";for(const r of this.themeConfig.customThemes)t+=this.generateThemeCSS(r);this.customStyleElement.textContent=t,document.head.appendChild(this.customStyleElement)}}generateThemeCSS(t){const r=t.colors;return`
.chartspire-ui[data-theme="${t.name}"] {
	--chartspire-ui-primary-color: ${r.primaryColor};
	--chartspire-ui-selected-color: ${r.selectedColor};
	--chartspire-ui-hover-background-color: ${r.hoverBackgroundColor};
	--chartspire-ui-background-color: ${r.backgroundColor};
	--chartspire-ui-popover-background-color: ${r.popoverBackgroundColor};
	--chartspire-ui-text-color: ${r.textColor};
	--chartspire-ui-text-second-color: ${r.textSecondColor};
	--chartspire-ui-border-color: ${r.borderColor};
}
`}importThemes(t){try{const r=JSON.parse(t);for(const n of r)this.addCustomTheme(n)}catch{throw new Error("Invalid theme JSON format")}}exportThemes(){return JSON.stringify(this.themeConfig.customThemes,null,2)}};be(K5,"instance");let Ty=K5;var eW=K("<button class=custom-theme-toggle>+"),tW=K('<div class=chartspire-ui-theme-selector><div class=theme-selector-header><svg viewBox="2 2 20 20"><path d="M12 2.75C6.89321 2.75 2.75 6.90121 2.75 12.0261C2.75 16.7885 6.32861 20.7112 10.9326 21.2412C11.395 21.2944 11.89 21.1004 12.2858 20.7036C12.6473 20.3412 12.6473 19.7528 12.2858 19.3904C11.9739 19.0776 11.6611 18.6609 11.4899 18.1872C11.3146 17.702 11.2713 17.0933 11.627 16.5276C11.9499 16.014 12.4341 15.739 12.9421 15.6053C13.4313 15.4766 13.9734 15.4693 14.494 15.5009C14.978 15.5303 15.4991 15.5978 16.0045 15.6633C16.0471 15.6689 16.0896 15.6744 16.132 15.6798C16.6889 15.7517 17.2328 15.8188 17.7581 15.8439C18.8324 15.8954 19.6599 15.76 20.2254 15.2976C20.7667 14.8552 21.25 13.9568 21.25 12.0261C21.25 6.90121 17.1068 2.75 12 2.75ZM1.25 12.0261C1.25 6.07647 6.0611 1.25 12 1.25C17.9389 1.25 22.75 6.07647 22.75 12.0261C22.75 14.1713 22.2132 15.6101 21.1748 16.459C20.1608 17.2879 18.8495 17.398 17.6863 17.3422C17.0929 17.3138 16.4934 17.239 15.9399 17.1675C15.901 17.1625 15.8625 17.1575 15.8241 17.1525C15.3046 17.0853 14.8335 17.0243 14.4032 16.9982C13.937 16.9699 13.5828 16.9878 13.3239 17.0559C13.0837 17.1191 12.968 17.2127 12.8968 17.326C12.858 17.3877 12.8307 17.4837 12.9007 17.6775C12.9749 17.8829 13.1368 18.1195 13.3478 18.3311C14.2933 19.279 14.2933 20.815 13.3478 21.7629C12.6976 22.4148 11.7682 22.8473 10.761 22.7314C5.40565 22.1148 1.25 17.5562 1.25 12.0261ZM9.585 6.24977C9.17079 6.24977 8.835 6.58556 8.835 6.99977C8.835 7.41399 9.17079 7.74977 9.585 7.74977C9.99922 7.74977 10.335 7.41399 10.335 6.99977C10.335 6.58556 9.99922 6.24977 9.585 6.24977ZM7.335 6.99977C7.335 5.75713 8.34236 4.74977 9.585 4.74977C10.8276 4.74977 11.835 5.75713 11.835 6.99977C11.835 8.24241 10.8276 9.24977 9.585 9.24977C8.34236 9.24977 7.335 8.24241 7.335 6.99977ZM14.5 6.25C14.0858 6.25 13.75 6.58579 13.75 7C13.75 7.41421 14.0858 7.75 14.5 7.75C14.9142 7.75 15.25 7.41421 15.25 7C15.25 6.58579 14.9142 6.25 14.5 6.25ZM12.25 7C12.25 5.75736 13.2574 4.75 14.5 4.75C15.7426 4.75 16.75 5.75736 16.75 7C16.75 8.24264 15.7426 9.25 14.5 9.25C13.2574 9.25 12.25 8.24264 12.25 7ZM6.5 10.75C6.08579 10.75 5.75 11.0858 5.75 11.5C5.75 11.9142 6.08579 12.25 6.5 12.25C6.91421 12.25 7.25 11.9142 7.25 11.5C7.25 11.0858 6.91421 10.75 6.5 10.75ZM4.25 11.5C4.25 10.2574 5.25736 9.25 6.5 9.25C7.74264 9.25 8.75 10.2574 8.75 11.5C8.75 12.7426 7.74264 13.75 6.5 13.75C5.25736 13.75 4.25 12.7426 4.25 11.5ZM17.5 10.75C17.0858 10.75 16.75 11.0858 16.75 11.5C16.75 11.9142 17.0858 12.25 17.5 12.25C17.9142 12.25 18.25 11.9142 18.25 11.5C18.25 11.0858 17.9142 10.75 17.5 10.75ZM15.25 11.5C15.25 10.2574 16.2574 9.25 17.5 9.25C18.7426 9.25 19.75 10.2574 19.75 11.5C19.75 12.7426 18.7426 13.75 17.5 13.75C16.2574 13.75 15.25 12.7426 15.25 11.5Z"></path></svg><div class=theme-dropdown><div class=theme-selector><span class=theme-text></span><svg width=8 height=8 viewBox="0 0 8 8"><path d="M4 5.5L1.5 3h5L4 5.5z">'),rW=K("<div class=import-section><label></label><textarea rows=4></textarea><div class=import-buttons><button></button><button>"),nW=K("<div class=custom-themes-list><h5>"),iW=K("<div class=chartspire-ui><div class=custom-theme-creator><div class=creator-header><h4></h4><button class=close-btn>×</button></div><div class=theme-form><div class=form-group><label></label><input type=text></div><div class=color-inputs></div><div class=action-buttons><button class=create-btn></button><button class=import-btn></button><button class=export-btn>"),oW=K("<div class=form-group><label><span class=field-description></span></label><div class=color-input-group><input type=color><input type=text>"),aW=K("<div class=theme-item><span class=theme-name></span><div class=theme-actions><button class=edit-btn></button><button class=delete-btn>");let Mg=!1;const sW=e=>{const[t,r]=me([]),[n,i]=me([]),[o,s]=me(!1),[u,c]=me({left:0,top:0}),[h,p]=me(""),[g,m]=me(null),[b,x]=me({primaryColor:"#1677ff",selectedColor:"rgba(22, 119, 255, 0.15)",hoverBackgroundColor:"rgba(22, 119, 255, 0.15)",backgroundColor:"#ffffff",popoverBackgroundColor:"#ffffff",textColor:"#051441",textSecondColor:"#76808f",borderColor:"#ebedf1"}),[C,_]=me(!1),[k,M]=me(""),[L,D]=me(!1);let P;localStorage.getItem(zv);const $=Ty.getInstance(e.themeUseExternalStorage??!1),A=()=>{const j=$.getAllThemes(),H=$.getCustomThemes(),de=j.map(U=>$.isCustomTheme(U)?U:I(U,e.locale));r(de),i([...H])};Ei(async()=>{if(console.log("onMount: ",e.themeUseExternalStorage),A(),e.themeUseExternalStorage&&!Mg){Mg=!0,await new Promise(H=>setTimeout(H,1e3));try{await Ty.initializeAsync(!0),A()}catch(H){console.error("[ThemeSelector] Failed to initialize external theme storage: ",H),Mg=!1}}const j=()=>{if(o()){const H=document.querySelector(".custom-theme-toggle");if(H){const de=H.getBoundingClientRect(),U=window.innerWidth<=480?window.innerWidth-16:320,fe=600,ce=window.innerWidth<=480?8:16;let Oe=de.left;Oe+U>window.innerWidth-ce&&(Oe=window.innerWidth-U-ce),Oe<ce&&(Oe=ce);let Ee=de.top-fe-8;Ee<ce&&(Ee=de.bottom+8),Ee+fe>window.innerHeight-ce&&(Ee=window.innerHeight-fe-ce),c({left:Oe,top:Ee})}}};return window.addEventListener("resize",j),()=>{window.removeEventListener("resize",j)}});const N=Bt(()=>t().map(j=>({key:j,text:j+($.isCustomTheme(j)?" (Custom)":""),value:j}))),z=j=>{const H=j.value;ne(H)},B=()=>{D(!L())},Q=()=>{D(!1)},ne=j=>{console.log("[ThemeSelector] handleThemeChange called with:",j);let H=j;const de=["Light Theme 1","Light Theme 2","Midnight Theme","Dark Theme","Dark Gray Theme","Blue Theme","Red Theme","Green Theme","Yellow Theme","Pink Theme"];for(const U of de)if(I(U,e.locale)===j){H=U;break}if($.isCustomTheme(j)){const U=$.getCustomTheme(j);U&&(H=U.name)}console.log("[ThemeSelector] Setting theme to:",H),e.setTheme(H)},Z=[{key:"primaryColor",label:"Primary Color",description:"Main accent color for buttons and highlights"},{key:"selectedColor",label:"Selected Color",description:"Color for selected items and active states"},{key:"hoverBackgroundColor",label:"Hover Background",description:"Background color when hovering over elements"},{key:"backgroundColor",label:"Background Color",description:"Main background color of the interface"},{key:"popoverBackgroundColor",label:"Popover Background",description:"Background color for dropdowns and modals"},{key:"textColor",label:"Text Color",description:"Primary text color"},{key:"textSecondColor",label:"Secondary Text",description:"Color for secondary text and labels"},{key:"borderColor",label:"Border Color",description:"Color for borders and dividers"}],J=(j,H)=>{x(de=>({...de,[j]:H}))},ue=()=>{if(!h().trim()){alert(I("Please enter a theme name",e.locale));return}const j={name:h().trim(),displayName:h().trim(),colors:b()};try{$.addCustomTheme(j),A(),le();const H=g()?I("Theme updated successfully!",e.locale):I("Theme created successfully!",e.locale);alert(H),s(!1)}catch{const H=g()?I("Failed to update theme",e.locale):I("Failed to create theme",e.locale);alert(H)}},le=()=>{p(""),m(null),x({primaryColor:"#1677ff",selectedColor:"rgba(22, 119, 255, 0.15)",hoverBackgroundColor:"rgba(22, 119, 255, 0.15)",backgroundColor:"#ffffff",popoverBackgroundColor:"#ffffff",textColor:"#051441",textSecondColor:"#76808f",borderColor:"#ebedf1"})},ae=j=>{m(j),p(j.displayName),x(j.colors),s(!0)},te=()=>{try{$.importThemes(k()),M(""),_(!1),A(),alert(I("Themes imported successfully!",e.locale))}catch{alert(I("Invalid theme JSON format",e.locale))}},ve=()=>{const j=$.exportThemes();navigator.clipboard.writeText(j).then(()=>{alert(I("Themes exported to clipboard!",e.locale))}).catch(()=>{const H=document.createElement("textarea");H.value=j,document.body.appendChild(H),H.select(),document.execCommand("copy"),document.body.removeChild(H),alert(I("Themes exported to clipboard!",e.locale))})},pe=j=>{confirm(I(`Are you sure you want to delete the theme "${j}"?`,e.locale))&&($.removeCustomTheme(j),A(),alert(I("Theme deleted successfully!",e.locale)))};return[(()=>{var j=tW(),H=j.firstChild,de=H.firstChild,U=de.nextSibling,fe=U.firstChild,ce=fe.firstChild,Oe=ce.nextSibling,Ee=P;return typeof Ee=="function"?tn(Ee,H):P=H,fe.$$click=B,F(ce,(()=>{var Fe=Le(()=>!!e.theme);return()=>Fe()?Le(()=>!!$.isCustomTheme(e.theme))()?e.theme+" (Custom)":I(e.theme,e.locale):I("Light Theme 1",e.locale)})()),F(H,Y(Pe,{get when(){return e.themeGeneraterEnabled!==!1},get children(){var Fe=eW();return Fe.$$click=Ce=>{if(!o()){const Te=Ce.currentTarget.getBoundingClientRect(),et=window.innerWidth<=480?window.innerWidth-16:320,Qe=600,it=window.innerWidth<=480?8:16;let He=Te.left;He+et>window.innerWidth-it&&(He=window.innerWidth-et-it),He<it&&(He=it);let ct=Te.top-Qe-8;ct<it&&(ct=Te.bottom+8),ct+Qe>window.innerHeight-it&&(ct=window.innerHeight-Qe-it),c({left:He,top:ct})}s(!o())},Ae(()=>Be(Fe,"title",I("Create Custom Theme",e.locale))),Fe}}),null),Ae(()=>Be(Oe,"class",`dropdown-arrow ${L()?"open":""}`)),j})(),Y(rh,{get isOpen(){return L()},onClose:Q,onSelect:z,get options(){return N()},triggerRef:P,placement:"top",maxHeight:500,get selectedKey(){return e.theme}}),Y(Pe,{get when(){return o()},get children(){return Y(lv,{get children(){var j=iW(),H=j.firstChild,de=H.firstChild,U=de.firstChild,fe=U.nextSibling,ce=de.nextSibling,Oe=ce.firstChild,Ee=Oe.firstChild,Fe=Ee.nextSibling,Ce=Oe.nextSibling,Te=Ce.nextSibling,et=Te.firstChild,Qe=et.nextSibling,it=Qe.nextSibling;return F(U,(()=>{var He=Le(()=>!!g());return()=>He()?I("Edit Custom Theme",e.locale):I("Create Custom Theme",e.locale)})()),fe.$$click=()=>{le(),s(!1)},F(Ee,()=>I("Theme Name",e.locale)),Fe.$$input=He=>p(He.currentTarget.value),F(Ce,Y(bn,{each:Z,children:He=>(()=>{var ct=oW(),ut=ct.firstChild,Qt=ut.firstChild,Gt=ut.nextSibling,Mt=Gt.firstChild,gt=Mt.nextSibling;return F(ut,()=>I(He.label,e.locale),Qt),F(Qt,()=>I(He.description,e.locale)),Mt.$$input=Yt=>J(He.key,Yt.currentTarget.value),gt.$$input=Yt=>J(He.key,Yt.currentTarget.value),Ae(()=>Be(gt,"placeholder",I("Color value (hex, rgb, rgba)",e.locale))),Ae(()=>Mt.value=b()[He.key].startsWith("rgba")?"#1677ff":b()[He.key]),Ae(()=>gt.value=b()[He.key]),ct})()})),et.$$click=ue,F(et,(()=>{var He=Le(()=>!!g());return()=>He()?I("Update Theme",e.locale):I("Create Theme",e.locale)})()),Qe.$$click=()=>_(!C()),F(Qe,()=>I("Import",e.locale)),it.$$click=ve,F(it,()=>I("Export",e.locale)),F(ce,Y(Pe,{get when(){return C()},get children(){var He=rW(),ct=He.firstChild,ut=ct.nextSibling,Qt=ut.nextSibling,Gt=Qt.firstChild,Mt=Gt.nextSibling;return F(ct,()=>I("Paste Theme JSON",e.locale)),ut.$$input=gt=>M(gt.currentTarget.value),Gt.$$click=te,F(Gt,()=>I("Import",e.locale)),Mt.$$click=()=>_(!1),F(Mt,()=>I("Cancel",e.locale)),Ae(()=>Be(ut,"placeholder",I("Paste your theme JSON here...",e.locale))),Ae(()=>ut.value=k()),He}}),null),F(ce,Y(Pe,{get when(){return n().length>0},get children(){var He=nW(),ct=He.firstChild;return F(ct,()=>I("Custom Themes",e.locale)),F(He,Y(bn,{get each(){return n()},children:ut=>(()=>{var Qt=aW(),Gt=Qt.firstChild,Mt=Gt.nextSibling,gt=Mt.firstChild,Yt=gt.nextSibling;return F(Gt,()=>ut.displayName),gt.$$click=()=>ae(ut),F(gt,()=>I("Edit",e.locale)),Yt.$$click=()=>pe(ut.name),F(Yt,()=>I("Delete",e.locale)),Qt})()}),null),He}}),null),Ae(He=>{var ct=e.theme,ut=`${u().left}px`,Qt=`${u().top}px`,Gt=I("Enter theme name",e.locale);return ct!==He.e&&Be(j,"data-theme",He.e=ct),ut!==He.t&&((He.t=ut)!=null?H.style.setProperty("left",ut):H.style.removeProperty("left")),Qt!==He.a&&((He.a=Qt)!=null?H.style.setProperty("top",Qt):H.style.removeProperty("top")),Gt!==He.o&&Be(Fe,"placeholder",He.o=Gt),He},{e:void 0,t:void 0,a:void 0,o:void 0}),Ae(()=>Fe.value=h()),j}})}})]};Dt(["click","input"]);var lW=K("<div class=chartspire-ui-timezone-container><div class=timezone-display><div class=time-text></div><div class=timezone-text>");const cW=e=>{const[t,r]=me(""),[n,i]=me(!1);let o,s,u;const c=()=>{try{const b=new Date().toLocaleTimeString("en-US",{timeZone:e.timezone.key,hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});r(b)}catch{const b=new Date().toLocaleTimeString("en-US",{timeZone:"UTC",hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});r(b)}},h=Bt(()=>zE(e.locale).map(b=>({key:b.key,text:typeof b.text=="string"?b.text:String(b.text),value:b}))),p=b=>{const x=b.value;e.onTimezoneChange(x)},g=()=>{i(!n())},m=()=>{i(!1)};return Ei(()=>{c(),o=window.setInterval(c,1e3)}),Nr(()=>{o&&clearInterval(o)}),[(()=>{var b=lW(),x=b.firstChild,C=x.firstChild,_=C.nextSibling,k=s;typeof k=="function"?tn(k,b):s=b,x.$$click=g;var M=u;return typeof M=="function"?tn(M,x):u=x,F(C,t),F(_,(()=>{var L=Le(()=>typeof e.timezone.text=="string");return()=>L()&&e.timezone.text.split(" ")[0]||e.timezone.text})()),b})(),Y(rh,{get options(){return h()},get selectedKey(){return e.timezone.key},onSelect:p,triggerRef:u,get isOpen(){return n()},onClose:m,placement:"top",className:"timezone-dropdown",maxHeight:800})]};Dt(["click"]);var uW=K("<div class=chartspire-ui-bottom-bar>");const dW=e=>(()=>{var t=uW();return tn(r=>{},t),F(t,Y(Pe,{get when(){return e.intervalEnabled!==!1},get children(){return Y(j$,{get widget(){return e.widget},get ticker(){return e.ticker},get setInterval(){return e.setInterval}})}}),null),F(t,Y(Pe,{get when(){return e.layoutsEnabled!==!1},get children(){return Y(K$,{get widget(){return e.widget},get layout(){return e.layout},get allLayouts(){return e.allLayouts},get setAllLayouts(){return e.setAllLayouts},get onLayoutChange(){return e.onLayoutChange},get layoutLimit(){return e.layoutLimit}})}}),null),F(t,Y(Pe,{get when(){return e.themesEnabled!==!1},get children(){return Y(sW,{get widget(){return e.widget},get theme(){return e.theme},get setTheme(){return e.setTheme},get locale(){return e.locale},get themeUseExternalStorage(){return e.themeUseExternalStorage},get themeGeneraterEnabled(){return e.themeGeneraterEnabled}})}}),null),F(t,Y(Pe,{get when(){return e.timezoneEnabled!==!1},get children(){return Y(cW,{get timezone(){return e.timezone},get onTimezoneChange(){return e.onTimezoneChange},get locale(){return e.locale}})}}),null),t})(),rr={color:"#1677FF",borderColor:"rgba(22, 119, 255, 0.35)",borderSize:1,radius:5,activeColor:"#1677FF",activeBorderColor:"rgba(22, 119, 255, 0.35)",activeBorderSize:3,activeRadius:5},Ln={style:"fill",color:"#FFFFFF",size:12,family:"Helvetica Neue",weight:"normal",borderStyle:"solid",borderSize:0,borderRadius:2,borderColor:"#1677FF",paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:"rgba(22, 119, 255)"},Rv={style:"fill",color:"rgba(22, 119, 255, 0.25)",borderColor:"#1677FF",borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},Gc={style:"fill",color:"rgba(22, 119, 255)",borderColor:"#1677FF",borderSize:1,borderStyle:"solid",borderDashedValue:[2,2]},Pn={...Rv,borderRadius:2,color:"rgba(22, 119, 255, 0.1)",borderColor:"#1677FF",borderSize:1,borderStyle:"solid",borderDashedValue:[2,2],paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2},Ov={style:"solid",color:"#1677FF",size:1,dashedValue:[2,2]},kr={...Ov,smooth:!1};function hW(){return{point:rr}}function pW(){return{line:kr,point:rr}}function fW(){return{line:kr,point:rr}}function gW(){return{line:kr,point:rr}}function vW(){return{line:kr,point:rr}}function mW(){return{line:kr,point:rr}}function yW(){return{line:kr,point:rr}}function bW(){return{line:kr,point:rr}}function xW(){return{line:kr,point:rr}}function wW(){return{line:kr,point:rr}}function CW(){return{line:kr,text:Ln,point:rr}}function _W(){return{line:kr,point:rr}}function SW(){return{polygon:Gc,point:rr}}function kW(){return{polygon:Gc,point:rr}}function MW(){return{circle:Rv,point:rr}}function EW(){return{arc:Ov,point:rr}}function TW(){return{text:Ln}}function IW(){return{line:kr,rect:Pn,point:rr}}function LW(){return{line:kr,rect:Pn,point:rr}}function PW(){return{line:kr,text:Ln,polygon:Gc}}function AW(){return{text:Ln,line:kr,polygon:Gc}}function DW(){return{polygon:Gc,rect:Pn,point:rr}}function FW(){return{point:rr,rect:Pn,polygon:Gc}}function RW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function OW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function NW(){return{circle:Rv,rect:Pn,text:Ln,point:rr}}function zW(){return{line:kr,rect:Pn,text:Ln,arc:Ov,point:rr}}function VW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function BW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function $W(){return{line:kr,rect:Pn,text:Ln,point:rr}}function WW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function HW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function UW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function jW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function XW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function YW(){return{line:kr,rect:Pn,text:Ln,point:rr}}function ZW(){return{line:kr,rect:Pn,text:Ln,point:rr,polygon:Gc}}function KW(){return{rect:Pn,text:Ln,point:rr}}const Eg={pointStyle:()=>nt.cloneDeep(hW()),horizontalStraightLineStyle:()=>nt.cloneDeep(pW()),horizontalRayLineStyle:()=>nt.cloneDeep(gW()),horizontalSegmentStyle:()=>nt.cloneDeep(fW()),verticalStraightLineStyle:()=>nt.cloneDeep(yW()),verticalRayLineStyle:()=>nt.cloneDeep(vW()),verticalSegmentStyle:()=>nt.cloneDeep(mW()),straightLineStyle:()=>nt.cloneDeep(_W()),rayLineStyle:()=>nt.cloneDeep(bW()),segmentStyle:()=>nt.cloneDeep(xW()),arrowStyle:()=>nt.cloneDeep(wW()),priceLineStyle:()=>nt.cloneDeep(CW()),rectStyle:()=>nt.cloneDeep(SW()),polygonStyle:()=>nt.cloneDeep(kW()),circleStyle:()=>nt.cloneDeep(MW()),arcStyle:()=>nt.cloneDeep(EW()),textStyle:()=>nt.cloneDeep(TW()),priceChannelLineStyle:()=>nt.cloneDeep(IW()),simpleTagStyle:()=>nt.cloneDeep(PW()),simpleAnnotationStyle:()=>nt.cloneDeep(AW()),parallelStraightLineStyle:()=>nt.cloneDeep(LW()),parallelogramStyle:()=>nt.cloneDeep(DW()),triangleStyle:()=>nt.cloneDeep(FW()),fibonacciSpiralStyle:()=>nt.cloneDeep(zW()),fibonacciCircleStyle:()=>nt.cloneDeep(NW()),fibonacciExtensionStyle:()=>nt.cloneDeep(VW()),fibonacciLineStyle:()=>nt.cloneDeep(RW()),fibonacciSegmentStyle:()=>nt.cloneDeep(OW()),fibonacciSpeedResistanceFanStyle:()=>nt.cloneDeep(BW()),gannBoxStyle:()=>nt.cloneDeep($W()),abcdStyle:()=>nt.cloneDeep(HW()),anyWavesStyle:()=>nt.cloneDeep(YW()),eightWavesStyle:()=>nt.cloneDeep(XW()),fiveWavesStyle:()=>nt.cloneDeep(jW()),threeWavesStyle:()=>nt.cloneDeep(UW()),xabcdStyle:()=>nt.cloneDeep(WW()),rulerStyle:()=>nt.cloneDeep(ZW()),rrStyle:()=>nt.cloneDeep(KW())},Iy={createPointFigures:({bounding:e,coordinates:t})=>({type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:e.width,y:t[0].y}]},ignoreEvent:!1}),createYAxisFigures:({overlay:e,coordinates:t,bounding:r,yAxis:n})=>{var i;const o=(n==null?void 0:n.isFromZero())??!1;let s="left",u=0;o?(s="left",u=0):(s="right",u=r.width);let c="";return e.extendData!=null&&(typeof e.extendData!="function"?c=e.extendData??"":c=e.extendData(e)),c===""&&typeof((i=e.points[0])==null?void 0:i.value)=="number"&&(c=e.points[0].value.toString()),{type:"text",attrs:{x:u,y:t[0].y,text:c,align:s,baseline:"middle"}}}},qW={createPointFigures:({overlay:e,coordinates:t})=>{let r="";e.extendData&&(r=typeof e.extendData=="function"?e.extendData(e):e.extendData||"");const n=t[0].x,i=t[0].y-6,o=i-50,s=o-5;return[{type:"line",attrs:{coordinates:[{x:n,y:i},{x:n,y:o}]},ignoreEvent:!1},{type:"polygon",attrs:{coordinates:[{x:n,y:o},{x:n-4,y:s},{x:n+4,y:s}]},ignoreEvent:!1},{type:"text",attrs:{x:n,y:s,text:r,align:"center",baseline:"bottom"},ignoreEvent:!1}]}};function Nv(e){if(e.name==="simpleTag"||e.name==="simpleAnnotation"){e.createPointFigures||(e.name==="simpleTag"?(e.createPointFigures=Iy.createPointFigures,e.createYAxisFigures=Iy.createYAxisFigures):e.name==="simpleAnnotation"&&(e.createPointFigures=qW.createPointFigures));const t=e.createPointFigures;e.createPointFigures=r=>{if(t){const n=t(r);if(Array.isArray(n))return n.map(i=>({...i,ignoreEvent:!1}));if(n)return{...n,ignoreEvent:!1}}return[]}}}var QW=K("<div class=overlay-type>Text"),GW=K("<div class=component><span>Label Text"),JW=K("<div class=chartspire-ui-overlay-setting-modal-content><div class=content>"),eH=K("<div class=overlay-type>"),tH=K("<div>"),rH=K("<div class=component><span>");const q5=e=>{let t=e.overlay.styles?e.overlay.styles:Eg[`${e.overlay.name}Style`]();(e.overlay.name==="simpleTag"||e.overlay.name==="simpleAnnotation")&&(t=Eg[`${e.overlay.name}Style`]());const r=pz(e.locale);let n=[],i=[];t&&(n=Object.keys(r),i=Object.keys(t));const o=c=>{const[h,p,g]=c.split(".");if(t&&t[p]&&t&&t[p][g]!==void 0)return t[p][g];{const m=Eg[`${e.overlay.name}Style`]();if(m&&m[p]&&m[p][g]!==void 0)return m[p][g]}},s=(c,h,p)=>{const g=c.key.split(".")[2];t[p][g]=h,(m=>{const b=nt.cloneDeep(m),[x,C,_]=c.key.split("."),k=C?`${C}.${_}`:`${C}.${_}`;C?nt.set(b,k,h):nt.set(b,`${c.key}`,h);const M={id:e.overlay.id,styles:b};if(e.widget.overrideOverlay(M),vt.getInstance(e.widget).overrideOverlay(M),e.chartId){const L=Os(),D={...e.overlay,styles:b};L.onOverlayUpdated(e.chartId,D)}return b})(t)},u=c=>{const h=typeof c=="number"?String(c):c,p={id:e.overlay.id,extendData:h};if(e.widget.overrideOverlay(p),vt.getInstance(e.widget).overrideOverlay(p),e.chartId){const g=Os(),m={...e.overlay,extendData:h};g.onOverlayUpdated(e.chartId,m)}(e.overlay.name==="simpleTag"||e.overlay.name==="simpleAnnotation")&&Nv(e.overlay)};return Y(zl,{get title(){return`Style ${e.overlay.name}`},width:360,contentHeight:"90%",onClose:()=>{e.setOverlayVisible(!1),e.setShowOverlaySetting(!1)},get children(){var c=JW(),h=c.firstChild;return F(h,Y(Pe,{get when(){return e.overlay.name==="simpleTag"||e.overlay.name==="simpleAnnotation"},get children(){return[QW(),(()=>{var p=GW();return p.firstChild,F(p,Y(Ha,{style:{width:"120px"},get value(){return typeof e.overlay.extendData=="string"?e.overlay.extendData:""},onChange:g=>{u(g)}}),null),p})()]}}),null),F(h,Y(bn,{each:i,children:p=>{if(n.includes(p))return[(()=>{var g=eH();return F(g,p),g})(),Y(bn,{get each(){return r[p]},children:g=>{let m;const b=o(g.key);if(b!==void 0){switch(g.component){case"select":{m=Y(qp,{style:{width:"120px"},get value(){return I(b,e.locale)},get dataSource(){return g.dataSource},onSelected:x=>{const C=x.key;s(g,C,p)}});break}case"input":{m=[Y(Pe,{get when(){return nt.isArray(b)},get children(){var x=tH();return x.style.setProperty("width","120px"),x.style.setProperty("display","flex"),x.style.setProperty("flex-direction","row"),x.style.setProperty("align-items","center"),x.style.setProperty("vertical-align","middle"),F(x,Y(Ha,{style:{width:"50px","margin-right":"10px"},get value(){return b[0]??"4"},onChange:C=>{let _=o(g.key);_[0]=Number(C),s(g,_,p)}}),null),F(x,Y(Ha,{style:{width:"50px","margin-left":"10px"},get value(){return b[1]??"4"},onChange:C=>{let _=o(g.key);_[1]=Number(C),s(g,_,p)}}),null),x}}),Y(Pe,{get when(){return!nt.isArray(b)},get children(){return Y(Ha,{style:{width:"120px"},value:b??"4",onChange:x=>{let C=Number(x);s(g,C,p)}})}})];break}case"color":{m=Y(Cv,{style:{width:"120px"},value:b,opacityEnabled:!0,onChange:x=>{s(g,x,p)}});break}}if(m)return(()=>{var x=rH(),C=x.firstChild;return F(C,()=>g.text),F(x,m,null),x})()}}})]}}),null),c}})};var nH=K("<div class=chartspire-ui-popup-background><div class=popup><button>Settings</button><button>Remove</button><button>Close");const iH=e=>{const[t,r]=me(e.overlayMousePosition),[n,i]=me(!1),o=p=>{p.preventDefault()},s=()=>{const p=t();try{const g=e.widget.getDom("candle_pane");if(g){const m=g.getBoundingClientRect();return{x:m.left+p.x,y:m.top+p.y}}}catch(g){console.warn("Failed to get chart container bounds for popup positioning:",g)}return p},u=()=>{e.setShowOverlaySetting?(e.setShowOverlaySetting(!0),e.setOverlayVisible(!1)):(i(!0),e.setOverlayVisible(!1))},c=()=>{e.setOverlayVisible(!1)},h=()=>{e.currentLayout!==vt.getInstance(e.widget).getDefaultLayout()?vt.getInstance(e.widget).deleteOverlay(e.overlay):e.widget.removeOverlay(e.overlay),e.chartId&&Nd()&&Os().onOverlayRemoved(e.chartId,e.overlay),c()};return(()=>{var p=nH(),g=p.firstChild,m=g.firstChild,b=m.nextSibling,x=b.nextSibling;return p.$$contextmenu=o,g.style.setProperty("position","fixed"),g.style.setProperty("z-index","6"),m.$$click=u,b.$$click=h,x.$$click=c,F(p,Y(Pe,{get when(){return n()&&!e.setShowOverlaySetting},get children(){return Y(q5,{get widget(){return e.widget},get locale(){return e.locale},get overlay(){return e.overlay},get setOverlayVisible(){return e.setOverlayVisible},setShowOverlaySetting:i,get chartId(){return e.chartId},onConfirm:C=>{console.log("Selected color:",C),i(!1)}})}}),null),Ae(C=>{var _=`${s().y}px`,k=`${s().x}px`;return _!==C.e&&((C.e=_)!=null?g.style.setProperty("top",_):g.style.removeProperty("top")),k!==C.t&&((C.t=k)!=null?g.style.setProperty("left",k):g.style.removeProperty("left")),C},{e:void 0,t:void 0}),p})()};Dt(["contextmenu","click"]);const oH=e=>Y(Pe,{get when(){return e.screenshotUrl.length>0},get children(){return Y(uB,{get locale(){return e.locale},get url(){return e.screenshotUrl},onClose:()=>{e.setScreenshotUrl("")}})}}),aH=e=>Y(Pe,{get when(){return e.indicatorSettingModalParams.visible},get children(){return Y(xB,{get locale(){return e.locale},get params(){return e.indicatorSettingModalParams},onClose:()=>{e.setIndicatorSettingModalParams({visible:!1,indicatorName:"",paneId:"",calcParams:[],styles:{}})},onConfirm:(t,r)=>{const n=e.indicatorSettingModalParams;e.widget.overrideIndicator({name:n.indicatorName,calcParams:t,styles:r}),e.currentLayout!==vt.getInstance(e.widget).getDefaultLayout()&&vt.getInstance(e.widget).saveIndicators()}})}}),sH=e=>Y(Pe,{get when(){return e.isActive},get children(){return Y(W$,{get chart(){return e.widget},get rootContainer(){return e.rootContainer},get locale(){return e.locale},get symbol(){return e.symbols},get spread(){return e.drawingBarVisible},get period(){return e.period},get periods(){return e.periods},get multiChart(){return e.multiChart},get layout(){return e.layout},get allLayouts(){return e.allLayouts},get setAllLayouts(){return e.setAllLayouts},get currentCandleType(){return e.currentCandleType},get onCandleTypeChange(){return e.onCandleTypeChange},onMenuClick:async()=>{try{await mE(()=>e.setDrawingBarVisible(!e.drawingBarVisible)),e.widget.resize()}catch(t){console.error(t)}},onSymbolClick:()=>{e.setSymbolSearchModalVisible(!e.symbolSearchModalVisible)},get onPeriodChange(){return e.setPeriod},onIndicatorClick:()=>{e.setIndicatorModalVisible(!e.indicatorModalVisible)},onSettingClick:()=>{e.setSettingModalVisible(!e.settingModalVisible)},onScreenshotClick:()=>{if(e.widget!=null){const t=e.widget.getConvertPictureUrl(!0,"jpeg",e.theme==="dark"?"#151517":"#ffffff");e.setScreenshotUrl(t)}},onMultiChartClick:()=>{e.setMultiChartModalVisible(!e.multiChartModalVisible)},onReplayClick:()=>{e.setReplayModalVisible(!e.replayModalVisible)},get onLayoutChange(){return e.setLayout},get layoutLimit(){return e.layoutLimit},get menuPagesEnabled(){return e.menuPagesEnabled},get menuPages(){return e.menuPages},get menuPageClickCallback(){return e.menuPageClickCallback}})}}),lH=e=>{const t=Os();return Y(Pe,{get when(){return e.drawingBarVisible&&e.isActive},get children(){return Y(lB,{get locale(){return e.locale},get widget(){return e.widget},get currentLayout(){return e.currentLayout},get setOverlaySettingVisible(){return e.setOverlaySettingVisible},get setOverlayStyles(){return e.setOverlayStyles},get setOverlayMousePosition(){return e.setOverlayMousePosition},get drawingBarCollapsed(){return e.drawingBarCollapsed},get setDrawingBarCollapsed(){return e.setDrawingBarCollapsed},onDrawingItemClick:r=>{const n={...r,onDrawing:function(i){return e.chartIds&&Nd()&&t.onOverlayUpdated(e.chartIds,i.overlay),!1},onDrawEnd:function(i){return e.currentLayout!==vt.getInstance(e.widget).getDefaultLayout()&&vt.getInstance(i.chart).saveOverlay(i.overlay),(i.overlay.name==="simpleTag"||i.overlay.name==="simpleAnnotation")&&Nv(i.overlay),e.chartIds&&Nd()&&t.onOverlayCreated(e.chartIds,i.overlay),qc({chartId:e.chartIds,objectType:"overlay",objectOperation:"add",overlayName:i.overlay.name,overlayId:i.overlay.id}),!0},onRightClick:function(i){var o;const s=i.x||0,u=i.y||0,c=Yd(s,u);return e.setOverlayMousePosition(c),e.setOverlaySettingVisible(!0),e.setOverlayStyles(i.overlay),(o=i.preventDefault)==null||o.call(i),!0},onDoubleClick:function(i){const o=i.x||0,s=i.y||0,u=Yd(o,s);return e.setOverlayMousePosition(u),e.setOverlaySettingVisible(!0),e.setOverlayStyles(i.overlay),!0},onPressedMoving:function(i){return e.chartIds&&Nd()&&t.onOverlayUpdated(e.chartIds,i.overlay),!1},onPressedMoveEnd:function(i){return e.currentLayout!==vt.getInstance(e.widget).getDefaultLayout()&&setTimeout(()=>{vt.getInstance(i.chart).overrideOverlay(i.overlay)},0),e.chartIds&&Nd()&&t.onOverlayUpdated(e.chartIds,i.overlay),!0}};e.widget.createOverlay(n)},onModeChange:r=>{},onLockChange:r=>{const n=e.widget.getOverlays();n&&typeof n.forEach=="function"&&n.forEach(i=>{e.widget.overrideOverlay({id:i.id,lock:r})})},onVisibleChange:r=>{const n=e.widget.getOverlays();n&&typeof n.forEach=="function"&&n.forEach(i=>{e.widget.overrideOverlay({id:i.id,visible:r})})},onRemoveClick:r=>{const n=e.widget.getOverlays(),i=[];n&&typeof n.forEach=="function"&&n.forEach(o=>{i.push(o)}),e.currentLayout!==vt.getInstance(e.widget).getDefaultLayout()?vt.getInstance(e.widget).removeAllOverlays(!0):n&&typeof n.forEach=="function"&&n.forEach(o=>{e.widget.removeOverlay({id:o.id})}),e.chartIds&&i.forEach(o=>{t.onOverlayRemoved(e.chartIds,o)})}})}})},cH=(e,t)=>e===X.THREE_MIXED?t==="chart1"?"three-chart-mixed-large":"three-chart-mixed-small":e===X.THREE_MIXED_REVERSE?t==="chart3"?"three-chart-mixed-reverse-large":"three-chart-mixed-reverse-small":e===X.THREE_MIXED_BOTTOM?t==="chart3"?"three-chart-mixed-bottom-large":"three-chart-mixed-bottom-small":e===X.THREE_MIXED_TOP?t==="chart1"?"three-chart-mixed-top-large":"three-chart-mixed-top-small":e===X.FOUR_MIXED?t==="chart1"?"four-chart-mixed-large":"four-chart-mixed-small":e===X.FOUR_MIXED_REVERSE?t==="chart4"?"four-chart-mixed-reverse-large":"four-chart-mixed-reverse-small":e===X.FOUR_MIXED_TOP?t==="chart1"?"four-chart-mixed-top-large":"four-chart-mixed-top-small":e===X.FOUR_MIXED_BOTTOM?t==="chart4"?"four-chart-mixed-bottom-large":"four-chart-mixed-bottom-small":e===X.FIVE_MIXED?t==="chart1"?"five-chart-mixed-large":"five-chart-mixed-small":e===X.FIVE_MIXED_REVERSE?t==="chart5"?"five-chart-mixed-reverse-large":"five-chart-mixed-reverse-small":uH(e),uH=e=>{switch(e){case X.TWO:return"two-chart";case X.TWO_VERTICAL:return"two-chart-vertical";case X.THREE:return"three-chart";case X.THREE_VERTICAL:return"three-chart-vertical";case X.FOUR:return"four-chart";case X.FOUR_VERTICAL:return"four-chart-vertical";case X.FOUR_HORIZONTAL:return"four-chart-horizontal";case X.FIVE_VERTICAL:return"five-chart-vertical";case X.FIVE_HORIZONTAL:return"five-chart-horizontal";case X.SIX:return"six-chart";case X.SIX_HORIZONTAL:return"six-chart-horizontal";case X.SIX_VERTICAL:return"six-chart-vertical";case X.SIX_MIXED:return"six-chart-mixed";case X.SEVEN_VERTICAL:return"seven-chart-vertical";case X.SEVEN_HORIZONTAL:return"seven-chart-horizontal";case X.EIGHT:return"eight-chart";case X.EIGHT_VERTICAL:return"eight-chart-vertical";case X.EIGHT_HORIZONTAL:return"eight-chart-horizontal";case X.NINE:return"nine-chart";case X.NINE_VERTICAL:return"nine-chart-vertical";case X.NINE_HORIZONTAL:return"nine-chart-horizontal";case X.TEN:return"ten-chart";case X.TEN_VERTICAL:return"ten-chart-vertical";case X.TEN_HORIZONTAL:return"ten-chart-horizontal";case X.TWELVE:return"twelve-chart";case X.TWELVE_VERTICAL:return"twelve-chart-vertical";case X.TWELVE_HORIZONTAL:return"twelve-chart-horizontal";case X.TWELVE_GRID:return"twelve-chart-grid";case X.FOURTEEN:return"fourteen-chart";case X.SIXTEEN:return"sixteen-chart";case X.SIXTEEN_GRID:return"sixteen-chart-grid";case X.ONE:default:return"one-chart"}};var dH=K("<div><div>");const hH=e=>{const t=()=>{e.onClick!=null&&e.onClick()},r=()=>{e.onClick!=null&&e.onClick()};return(()=>{var n=dH(),i=n.firstChild;F(n,Y(Pe,{get when(){return e.loadingVisible},get children(){return Y(Y2,{})}}),i),i.$$touchend=r,i.$$click=t;var o=e.ref;return typeof o=="function"?tn(o,i):e.ref=i,Ae(s=>{var u=`chartspire-ui-content ${cH(e.multiChart,e.chartIds)}`,c=`
          chartspire-ui-widget
          ${e.chartIds}
          ${e.isActive&&e.multiChart>1?"active-chart":""}
          `,h=e.chartIds,p=e.drawingBarVisible,g=e.drawingBarCollapsed,m=String(e.multiChart),b=e.isActive;return u!==s.e&&Ge(n,s.e=u),c!==s.t&&Ge(i,s.t=c),h!==s.a&&Be(i,"data-chart-id",s.a=h),p!==s.o&&Be(i,"data-drawing-bar-visible",s.o=p),g!==s.i&&Be(i,"data-drawing-bar-collapsed",s.i=g),m!==s.n&&Be(i,"multichart-amount",s.n=m),b!==s.s&&Be(i,"is-active-chart",s.s=b),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),n})()};Dt(["click","touchend"]);const pH=e=>Y(Pe,{get when(){return e.symbolModalVisible},get children(){return Y(K2,{get locale(){return e.locale},get onSymbolSelected(){return e.setSymbol},onClose:()=>{e.setSymbolSearchModalVisible(!1)},get enabledSymbolTypes(){return e.enabledSymbolTypes??[]}})}});function fH(e,t,r){tt(()=>{e()&&(r(!0),qc({chartId:{id:Ze(lo).id},objectType:"force-refresh",objectOperation:"show"}))}),tt(()=>{t()||r(!1)})}function gH(e,t){tt(()=>{e()&&JU(t())})}function vH(e,t){tt(()=>{e()&&(t(),e()>1?zy(!0):zy(!1))})}const Q5=()=>({axis:{position:"right",inside:!1,reverse:!1,scrollZoomEnabled:!0,gap:{top:.2,bottom:.1}},dragEnabled:!0,state:"normal"});function mH(e,t,r,n,i,o,s,u,c,h,p,g){tt(async()=>{if(r()&&i()&&e()&&t!=null){if(o([]),s(j2({})),await vt.getInstance(Ze(t)).removeAllOverlays(),oj(Ze(t)),r()===vt.getInstance(Ze(t)).getDefaultLayout())return Ze(t).setStyles(Ui(Or())),bH(Ze(t)),g&&Ui(Or()).candle&&Ui(Or()).candle.type&&g(Ui(Or()).candle.type),null;Bv(r());const m=await vt.getInstance(Ze(t)).getLayoutFromStore()??Rd();if(Ze(t)!==null&&g){await yH(Ze(t),m,g),await xH(Ze(t),m),await wH(Ze(t),m,c,h,p,Ze(n));const b=await vt.getInstance(Ze(t)).getIndicators(m);u(b.indicators)}}})}async function yH(e,t,r){const n=await vt.getInstance(e).getStyles(t);n?(e.setStyles(n),r&&n.candle&&n.candle.type&&r(n.candle.type)):(e.setStyles(Ui(Or())),r&&Ui(Or()).candle&&Ui(Or()).candle.type&&r(Ui(Or()).candle.type))}function bH(e){e.setPaneOptions(Q5())}async function xH(e,t){const r=await vt.getInstance(e).getPaneOptionsFromStore(t);r&&r.paneOptions&&Object.keys(r.paneOptions).length>0&&e.setPaneOptions(r.paneOptions)}async function wH(e,t,r,n,i,o){const s=await vt.getInstance(e).getOverlays(t);nt.forEach(s,u=>{var c,h,p;(c=vt.getInstance(e))!=null&&c.isDefaultLayout()||o.symbol===((h=u==null?void 0:u.symbolInfo)==null?void 0:h.symbol)&&o.type===((p=u==null?void 0:u.symbolInfo)==null?void 0:p.type)&&(u.overlay.onDrawEnd=g=>(vt.getInstance(g.chart).saveOverlay(g.overlay),!0),u.overlay.onRightClick=g=>{var m;const b=Yd(g.x??0,g.y??0);return i(b),r(!0),n(g.overlay),(m=g.preventDefault)==null||m.call(g),!0},u.overlay.onDoubleClick=g=>{const m=Yd(g.x??0,g.y??0);return i(m),r(!0),n(g.overlay),!0},u.overlay.onPressedMoveEnd=g=>{var m;return(m=vt.getInstance(e))!=null&&m.isDefaultLayout()||setTimeout(()=>{vt.getInstance(g.chart).overrideOverlay(g.overlay)},0),!0},(u.overlay.name==="simpleTag"||u.overlay.name==="simpleAnnotation")&&Nv(u.overlay),e.createOverlay(u.overlay))})}function CH(e,t,r){tt(()=>{const n=t();n!=null&&n.priceCurrency?(r.innerHTML=n.priceCurrency.toLocaleUpperCase(),r.style.display="flex"):r.style.display="none"})}function _H(e,t){tt(()=>{e(),t()})}function SH(e,t){tt(()=>{e()&&t()})}function kH(e,t){tt(()=>{console.log("useLocaleEffect",t()),Ze(e).setLocale(t())})}let G5=new Intl.DateTimeFormat("en",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"America/Los_Angeles"});function MH(e){G5=new Intl.DateTimeFormat("en",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:e})}function EH(){return G5}function TH(e,t,r){tt(()=>{if(Ze(e)==null)return;const n=t().key;MH(n),r()})}function IH(e,t,r){tt(()=>{t()&&Ze(e)&&(Ze(e).setStyles(t()),r(Ze(e).getStyles()))})}function LH(e,t){$v.applyStylesToChart(e,t)}function PH(e,t){tt(()=>{Ze(e).setStyles(t),LH(Ze(e),t)})}const Wc=new Map;class U0{constructor(t,r,n){be(this,"chart"),be(this,"replayCandle"),be(this,"replaySpeed"),be(this,"hasReplaySpeedChanged",!1),be(this,"dataList",[]),be(this,"currentReplayData",[]),be(this,"isPaused",!1),be(this,"currentCallback",null),be(this,"currentRightList",[]),be(this,"selectedCandleIndex",null),be(this,"currentIndex",0),be(this,"intervalId",null),this.chart=t,this.replayCandle=r,this.replaySpeed=n}static getInstance(t,r,n,i){var o;if(!Wc.has(t)||((o=Wc.get(t))==null?void 0:o.chart)==null){const s=new U0(r,n,i);Wc.set(t,s)}return Wc.get(t)}static destroyInstance(t){Wc.has(t)&&Wc.delete(t)}static getInstancesMap(){return Wc}getCurrentReplayData(){return this.currentReplayData}setCurrentCallback(t){this.currentCallback=t}startReplayInterval(){if(this.currentRightList.length===0){console.warn("Replay: No data available for replay interval");return}if(!this.currentCallback){console.warn("Replay: No callback available for replay interval");return}this.clearCurrentInterval(),this.isPaused=!1;const t=this.validateReplaySpeed();this.createReplayInterval(this.currentRightList,this.currentCallback,t)}stopReplayInterval(){this.cleanupReplayState()}initializeReplayData(){var t;this.hasReplaySpeedChanged=!0,this.dataList=((t=this.chart)==null?void 0:t.getDataList())??[],this.selectedCandleIndex=this.replayCandle()}setupInitialChartState(t){var r;this.currentReplayData=[...t],(r=this.chart)==null||r.setDataLoader({getBars:({callback:n})=>{n(t)},subscribeBar:()=>{console.log("subscribeBar called during replay, returning",t.length,"data points")},unsubscribeBar:()=>{console.warn("unsubscribeBar called during replay")}})}getDataListToRightOfCandle(){try{if(!this.hasReplaySpeedChanged&&(this.initializeReplayData(),this.selectedCandleIndex!=null)){const t=this.selectedCandleIndex.dataIndex,r=this.dataList.slice(0,t+1);return this.dataList.slice(t+1)}if(this.selectedCandleIndex!==null)return this.dataList.slice(this.selectedCandleIndex.dataIndex+1)}catch(t){console.error("Error trying to get data to replay:",t)}return[]}isReplayPaused(){return this.isPaused&&this.currentIndex>0}isReplayActive(){return this.intervalId!==null}updateReplaySpeed(){try{if(!this.isReplayActive()||!this.currentCallback||this.currentRightList.length===0)return;const t=this.validateReplaySpeed();this.clearCurrentInterval(),this.createReplayInterval(this.currentRightList,this.currentCallback,t)}catch(t){console.error("Error updating replay speed:",t)}}validateReplaySpeed(){const t=Number(YD(this.replaySpeed().key));return isNaN(t)||t<=0?(console.warn("Invalid replay speed. Must be a positive number., Return set to 1x"),1e3):t}clearCurrentInterval(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}cleanupReplayState(){this.clearCurrentInterval(),this.currentCallback=null,this.currentRightList=[],this.isPaused=!1}createReplayInterval(t,r,n){this.intervalId=setInterval(()=>{try{if(this.currentIndex<t.length){const i=t[this.currentIndex];this.currentReplayData.push(i),r(i),this.currentIndex++}else this.cleanupReplayState()}catch(i){console.error("Error during replay interval:",i),this.clearCurrentInterval()}},n)}initializeFreshReplay(){if(this.currentIndex=0,this.isPaused=!1,this.selectedCandleIndex!=null){const t=this.selectedCandleIndex.dataIndex;this.currentReplayData=this.dataList.slice(0,t+1)}else this.currentReplayData=[]}prepareResumeReplay(){this.isPaused=!1}startReplay(t){try{if(!Array.isArray(t)||t.length===0){console.warn("Invalid data provided for replay");return}if(this.currentRightList=[...t],this.isReplayPaused())if(this.prepareResumeReplay(),this.currentCallback){const r=this.validateReplaySpeed();this.createReplayInterval(t,this.currentCallback,r)}else console.warn("No callback available for resume, this should not happen");else this.initializeFreshReplay(),console.log("Replay: Using ChartDataProvider to create replay data loader"),console.log("Replay: Ready for ChartDataProvider integration - call createDataLoader with isReplayMode=true")}catch(r){console.log("Error starting replay:",r)}}pauseReplay(){try{this.intervalId!==null&&(this.clearCurrentInterval(),this.isPaused=!0)}catch(t){console.log("Error while pausing replay:",t)}}skipReplay(){try{this.pauseReplay(),this.currentReplayData=[...this.dataList],this.currentIndex=this.dataList.length,this.isPaused=!1,console.log("Replay: Skipping to end and transitioning back to live mode"),console.log("Replay: Skip completed - caller should transition to live mode via ChartDataProvider")}catch(t){console.log("Error while skipping to end:",t)}}}const AH=(e,t,r)=>{const n=()=>({key:"1x",text:jD("1x",e)}),i=B=>U0.getInstance(r,Ze(o),()=>Ze(C),B||(()=>Ze(h))),[o,s]=me(t),[u,c]=me(!1),[h,p]=me(n()),[g,m]=me(!1),[b,x]=me(!1),[C,_]=me(null),[k,M]=me(!0),[L,D]=me(""),[P,$]=me(!1),[A,N]=me(!1);tt(()=>{const B=i();if(g()&&!b())if(Ze(C)!=null){B.startReplay(B.getDataListToRightOfCandle());const Q=Wr.getInstance(),ne=Q.getConfig(r);if(ne&&ne.symbol&&Ze(o)){console.log("useReplay: Creating replay data loader via ChartDataProvider");const Z=Q.createDataLoader(r,ne.symbol,ne.interval,ne.candleType||void 0,void 0,!1).unsubscribeBar;console.log("useReplay: Cleaning up existing live subscription before replay"),Z(),setTimeout(()=>{const J=Q.createDataLoader(r,ne.symbol,ne.interval,ne.candleType||void 0,void 0,!0);console.warn("useReplay: Setting replay data loader"),Ze(o).setDataLoader(J),N(!0),M(!1)},100)}else console.warn("useReplay: Missing config or widget for replay data loader"),M(!0)}else M(!0);else b()&&B.pauseReplay(),N(!1)}),tt(()=>{const B=h();A()&&i(()=>B).updateReplaySpeed()}),tt(()=>{u()?M(!0):(m(!1),x(!1))}),tt(()=>{P()&&(i().skipReplay(),z())});const z=()=>{const B=i();if(B){B.skipReplay();const Q=Wr.getInstance(),ne=Q.getConfig(r);if(ne&&ne.symbol&&Ze(o)){console.log("useReplay: Transitioning back to live mode on close");const Z=Q.createDataLoader(r,ne.symbol,ne.interval,ne.candleType||void 0,void 0,!1);console.log("useReplay: Setting live data loader on close"),Ze(o).setDataLoader(Z)}}_(null),c(!1),p(n()),m(!1),x(!0),M(!0),D(""),$(!1),U0.destroyInstance(r)};return{replayModalVisible:u,setReplayModalVisible:c,replaySpeed:h,setReplaySpeed:p,replayPlay:g,setReplayPlay:m,replayPaused:b,setReplayPaused:x,replayCandle:C,setReplayCandle:_,isAlertVisible:k,setIsAlertVisible:M,alertMessage:L,setAlertMessage:D,resetReplayState:z,setSkipToEnd:$,skipToEnd:P,isPlaying:A,setIsPlaying:N,setReplayWidget:s}};function DH(e){tt(()=>{e()})}function Ly(e,t,r,n,i){const o=Wr.getInstance(),s=o.getConfig(i);s&&o.setPreviousSymbol(i,s.symbol);const u=o.createDataLoader(i,t,r,n).unsubscribeBar;u(),setTimeout(()=>{const c=o.createDataLoader(i,t,r,n);e.setDataLoader(c)},100)}function FH(e,t,r,n,i,o,s,u,c){const[h,p]=me(null);return tt(()=>{const g=e();if(g){const m=g.getStyles();m&&m.candle&&m.candle.type&&n(m.candle.type)}}),tt(()=>{const g=e(),m=t(),b=r();if(g==null||m==null)return;const x=h();p(b);const C={...m,candle:{...m.candle,type:b}};g.setStyles(C),g.resize();const _=Ds(b)&&!Ds(x),k=!Ds(b)&&Ds(x);(_||k)&&i&&o&&c&&g&&Ly(g,Ze(i),Ze(o),b,c)}),tt(()=>{if(s()&&Ze(e)){const g=Ze(e),m=Ze(r),b=Ze(i),x=Ze(o);Ds(m)&&Ly(g,b,x,m,c),u(!1)}}),g=>{n(g);const m=e();if(m){const b=m.getStyles();b.candle.type=g,m.setStyles(b),vt.getInstance(m).saveStyles()}}}function RH(e){return e===X0.RENKO||String(e).toLowerCase()==="renko"}const OH=(e,t,r,n)=>{tt(()=>{const i=t();if(i&&RH(e())){const o=s=>{s.preventDefault(),n({x:s.clientX,y:s.clientY}),r(!0)};i.addEventListener("contextmenu",o),Nr(()=>{i.removeEventListener("contextmenu",o)})}})};function NH(e){tt(()=>{Or()==="Dark Theme"||Or()==="Midnight Theme"||Or()==="Dark Gray Theme"||Or()==="Blue Theme"||Or()==="Red Theme"||Or()==="Green Theme"||Or()==="Yellow Theme"||Or(),Ze(e).setStyles(Ui(Or()))})}function zH(e,t){tt(av(()=>{var r,n,i,o;return[(r=t())==null?void 0:r.symbol,(n=t())==null?void 0:n.exchange,(i=t())==null?void 0:i.pricePrecision,(o=t())==null?void 0:o.volumePrecision]},async()=>{var r;t()&&Ze(e)&&(await vt.getInstance(Ze(e)).removeAllOverlays(),(r=Ze(e))==null||r.setSymbol({ticker:t().symbol}))}))}function VH(e,t){const[r,n]=me(!1);return tt(()=>{const i=r()?"24px":"52px";document.documentElement.style.setProperty("--right-bar-width",i),setTimeout(()=>{t(o=>!o)},350)}),{rightBarCollapsed:r,setRightBarCollapsed:n}}const[Py,BH]=me(!1),k0=[];function $H(e){return e&&!k0.includes(e)&&k0.push(e),tt(()=>{const t=Py()?"24px":"50px";document.documentElement.style.setProperty("--drawing-bar-width",t),setTimeout(()=>{k0.forEach(r=>r())},350)}),{drawingBarCollapsed:Py,setDrawingBarCollapsed:BH,cleanUpDrawingBar:e?()=>{const t=k0.indexOf(e);t>-1&&k0.splice(t,1)}:void 0}}function WH(e,t,r,n,i){const[o,s]=me({timeRemaining:"",isActive:!1,nextCandleTimestamp:0});let u=null;const c=(x,C)=>{const _=new Date(x);switch(C.timespan){case"minute":const k=Math.floor(_.getUTCMinutes()/C.multiplier)*C.multiplier;_.setUTCMinutes(k+C.multiplier,0,0);break;case"hour":const M=Math.floor(_.getUTCHours()/C.multiplier)*C.multiplier;_.setUTCHours(M+C.multiplier,0,0,0);break;case"day":_.setUTCDate(_.getUTCDate()+C.multiplier),_.setUTCHours(0,0,0,0);break;case"week":const L=_.getUTCDay(),D=L===0?1:8-L;_.setUTCDate(_.getUTCDate()+D+(C.multiplier-1)*7),_.setUTCHours(0,0,0,0);break;case"month":_.setUTCMonth(_.getUTCMonth()+C.multiplier,1),_.setUTCHours(0,0,0,0);break;default:_.setUTCMinutes(_.getUTCMinutes()+1,0,0)}return _.getTime()},h=x=>{const C=Math.floor(x/1e3),_=Math.floor(C/86400),k=Math.floor(C%86400/3600),M=Math.floor(C%3600/60),L=C%60;return _>0?k>0?`${_}d ${k}h`:`${_}d`:k>0?k>=12?`${k}h ${M}m`:`${k.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`:`${M.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`},p=()=>{const x=Date.now(),C=t(),_=c(x,C),k=_-x;if(k<=0){const M=c(x,C),L=M-x;s({timeRemaining:h(L),isActive:!0,nextCandleTimestamp:M})}else s({timeRemaining:h(k),isActive:!0,nextCandleTimestamp:_})},g=()=>{u||(p(),u=setInterval(p,1e3))},m=()=>{u&&(clearInterval(u),u=null);const x=e();if(x)try{x.setStyles({candle:{priceMark:{last:{text:{extendTexts:[]}}}}})}catch(C){console.warn("Error clearing timer on stop:",C)}s({timeRemaining:"",isActive:!1,nextCandleTimestamp:0})},b=()=>{var x,C;const _=e(),k=o();if(_)try{if(!k.isActive||!r()){_.setStyles({candle:{priceMark:{last:{text:{extendTexts:[]}}}}});return}const M={show:!0,color:"#D0D0D0",size:13,family:i||"monospace",weight:"normal",style:"fill",borderStyle:"solid",borderDashedValue:[2,2],borderSize:0,borderColor:"transparent",paddingTop:2,paddingBottom:2,paddingLeft:4,paddingRight:4,position:"below_price",updateInterval:0,borderRadius:2},L=((C=(x=_.getStyles().candle)==null?void 0:x.priceMark)==null?void 0:C.last)||{},D=`${k.timeRemaining}`,P=_.getFormatter();_.setFormatter({...P,formatExtendText:({type:$,index:A})=>$==="last_price"&&A===0?D:""}),_.setStyles({candle:{priceMark:{last:{...L,show:!0,extendTexts:[M]}}}})}catch(M){console.warn("Error updating price mark timer:",M)}};return tt(()=>{const x=e(),C=r();t(),x&&C?g():m()}),tt(()=>{t(),r()&&(m(),setTimeout(()=>{r()&&g()},100))}),tt(()=>{n&&(n(),r()&&(m(),setTimeout(()=>{r()&&g()},200)))}),tt(()=>{b()}),Nr(()=>{m()}),{timerState:o,startTimer:g,stopTimer:m}}function HH(e,t,r){let n={...e()};tt(()=>{const i=e(),o=t();console.log("useSymbolPropsToState triggered with symbol:",i);const s=i.symbol!==n.symbol||i.exchange!==n.exchange,u=i.symbol!==o.symbol||i.exchange!==o.exchange;s&&u&&(console.log("useSymbolPropsToState: Syncing symbol change from",o,"to",i),r(i)),n={...i}})}function UH(e,t,r,n,i,o){tt(av(()=>{var s,u;return[(s=r())==null?void 0:s.multiplier,(u=r())==null?void 0:u.timespan]},()=>{const s=Ze(t),u=Ze(r),c=Ze(n);s&&u&&(Wr.getInstance().setPreviousSymbol(i,c),e?o({chartId:i,skipBroadcast:!1,interval:u}):e=!0,s.setPeriod({span:u.multiplier,type:u.timespan}))}))}function jH(e,t,r,n,i){tt(av(()=>[e().interval.timespan,e().interval.multiplier,e().interval.text,e().skipBroadcast],()=>{if(O5()&&e().chartId.id!==t.id){const o=e(),s=Ze(r),u=Ze(n);(s==null?void 0:s.text)!==o.interval.text&&(o.skipBroadcast||(Wr.getInstance().setPreviousSymbol(t,u),i(o.interval)))}}))}function XH(e,t,r,n,i,o){tt(()=>{const s=Vv();if(s&&s.chartId.id===e.id&&s.objectType==="indicator"&&s.indicatorName&&s.objectOperation==="remove"){if(r().includes(s.indicatorName))i(r().filter(u=>u!==s.indicatorName));else if(n()[s.indicatorName])o({...n,[s.indicatorName]:void 0});else return;vt.getInstance(Ze(t)).saveIndicators()}})}function YH({chartRef:e,period:t,setChart:r,timezone:n,documentResize:i}){window.addEventListener("resize",i);const o=ZH(e,t);n&&n.key&&(console.log("setting timezone",n.key),o.setTimezone(n.key)),r(o);const s=o.getDom("candle_pane","yAxis"),u=document.createElement("span");return u.className="chartspire-price-unit",s==null||s.appendChild(u),{chart:o,priceUnitDom:u}}function ZH(e,t){const r=u4(e,{formatter:{formatDate:n=>{const i=EH(),o=t();if(n.type==="xAxis"){const u=KH(o,n.template);return vn.formatDate(i,n.timestamp,u)}const s=qH(o);return vn.formatDate(i,n.timestamp,s)}}});if(!r)throw new Error("Failed to initialize chart");return r}function KH(e,t){switch(e.timespan){case"minute":return"HH:mm";case"hour":return"(DD) HH:mm";case"day":return e.multiplier===1?"MM-DD":"YYYY-MM-DD";case"week":return"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";default:return t}}function qH(e){switch(e.timespan){case"minute":return"MM-DD HH:mm";case"hour":return"YYYY-MM-DD HH:mm";case"day":case"week":return"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";default:return"YYYY-MM-DD HH:mm"}}async function QH({chart:e,layout:t,symbol:r,updateIndicators:n,addMainIndicatorsToChart:i}){const o=vt.getInstance(e),s=await GH(o,t);await JH(o,s,n,i);const u=await eU(o,s,e);return await tU(o,s,r,e),{savedStyles:u,layoutData:s}}async function GH(e,t){return t()===e.getDefaultLayout()?e.getDefaultLayoutData():await e.getLayoutFromStore()??e.getDefaultLayoutData()}async function JH(e,t,r,n){const i=await e.getIndicators(t);r(i.indicators),n()}async function eU(e,t,r){const n=await e.getStyles(t);return n!=null&&r.setStyles(n),n}async function tU(e,t,r,n){const i=await e.getOverlays(t);nt.forEach(i,o=>{var s;i!=null&&r().symbol===((s=o.symbolInfo)==null?void 0:s.symbol)&&r().type===o.symbolInfo.type&&n.createOverlay(o.overlay)})}function rU(e,t,r,n,i,o){r(e);const s=e.data.current.timestamp,u=new Date(s);n("Candle selected from date: "+u.toLocaleString()+" - Press play to start replay"),Bv(t),i(o)}function nU({chart:e,layout:t,mainIndicators:r,setMainIndicators:n,subIndicators:i,setSubIndicators:o,setReplayCandle:s,setAlertMessage:u,setReplayWidget:c,setIndicatorSettingModalParams:h}){const p=n9({chart:e,mainIndicators:r,setMainIndicators:n,subIndicators:i,setSubIndicators:o,setIndicatorSettingModalParams:h});e.subscribeAction("onIndicatorTooltipFeatureClick",p);const g=$v.createCandleTooltipIconClickHandler(e);e.subscribeAction("onCandleTooltipFeatureClick",g),e.subscribeAction("onCandleBarClick",m=>{rU(m,t,s,u,c,e)})}async function iU({chart:e,setAllLayouts:t,layoutLimit:r}){const n=await vt.getInstance(e).getNameOfAllLayouts();t(n.slice(0,r))}function oU({chart:e,chartIds:t,symbol:r,period:n,popupHandlers:i}){const o=A5(),s=D5(),u=Os(),c=r.symbol,h=r.type?String(r.type):void 0;return o.registerChart(t,e,c,h),s.registerChart(t,e,c,h),u.registerChart(t,e,c,h,n.timespan+n.multiplier,i),{syncManager:o,timeSyncManager:s,drawingSyncManager:u,initialSymbol:{symbol:c,type:h}}}function aU({chart:e,chartIds:t,isActiveChart:r,timeSyncManager:n}){let i=null,o=0,s={x:0,y:0},u={x:0,y:0};const c=e.getDom("candle_pane");if(!c)return()=>{};const h=(C,_)=>{if(r()){o=Date.now(),s={x:C,y:_};const k=c.getBoundingClientRect();u={x:C-k.left,y:_-k.top}}},p=(C,_)=>{var k;if(r()){const M=Date.now()-o,L=Math.sqrt(Math.pow(C-s.x,2)+Math.pow(_-s.y,2));if(M<300&&L<5){try{const D=e.convertFromPixel([u],{paneId:"candle_pane"});if(D&&Array.isArray(D)&&(k=D[0])!=null&&k.timestamp){const P=D[0].timestamp;n.syncTime(t,P)}}catch(D){console.error("[TimeSync] Error converting interaction position to timestamp:",D)}i&&clearTimeout(i),i=setTimeout(()=>{},150)}}},g=C=>{if(C.preventDefault(),C.touches.length===1){const _=C.touches[0];h(_.clientX,_.clientY)}},m=C=>{if(C.preventDefault(),C.changedTouches.length===1){const _=C.changedTouches[0];p(_.clientX,_.clientY)}},b=C=>{h(C.clientX,C.clientY)},x=C=>{p(C.clientX,C.clientY)};return c.addEventListener("mousedown",b),c.addEventListener("mouseup",x),c.addEventListener("touchstart",g,{passive:!1}),c.addEventListener("touchend",m,{passive:!1}),()=>{c.removeEventListener("mousedown",b),c.removeEventListener("mouseup",x),c.removeEventListener("touchstart",g),c.removeEventListener("touchend",m),i&&clearTimeout(i)}}function sU({chart:e,chartIds:t,isActiveChart:r,syncManager:n}){e.subscribeAction("onCrosshairChange",i=>{const o=i;if(o.paneId==="candle_pane"&&r()){if(!o.timestamp&&o.x!==void 0)try{const s=e.convertFromPixel([{x:o.x}],{paneId:o.paneId});if(s&&Array.isArray(s)&&s[0]){const u=s[0];if(u.timestamp&&(o.timestamp=u.timestamp),u.dataIndex!==void 0&&(o.dataIndex=u.dataIndex),u.dataIndex!==void 0){const c=e.getDataList();c&&c[u.dataIndex]&&(o.kLineData=c[u.dataIndex],!o.timestamp&&o.kLineData.timestamp&&(o.timestamp=o.kLineData.timestamp))}}}catch(s){console.error("Error converting x to timestamp:",s)}n.resetCrosshairVisibility(t),n.syncCrosshair(t,o)}})}async function lU(e,t,r,n,i,o,s,u,c,h,p,g,m,b,x,C,_,k,M,L,D){console.log("setupChart called",i());const{chart:P,priceUnitDom:$}=YH({chartRef:e,period:t,setChart:n,timezone:L(),documentResize:C});await QH({chart:P,layout:o,symbol:i,updateIndicators:_,addMainIndicatorsToChart:M}),console.log("[setupChart] Registering chart with sync managers for chartId:",k.chartIds);const A=oU({chart:P,chartIds:k.chartIds,symbol:i(),period:t(),popupHandlers:D});console.log("[setupChart] Setting up sync effects for chartId:",k.chartIds),console.log("[setupChart] Setting up crosshair and mouse event handlers for chartId:",k.chartIds),sU({chart:P,chartIds:k.chartIds,isActiveChart:()=>k.isActiveChart??!0,syncManager:A.syncManager}),aU({chart:P,chartIds:k.chartIds,isActiveChart:()=>k.isActiveChart??!0,timeSyncManager:A.timeSyncManager}),nU({chart:P,layout:o,mainIndicators:s,setMainIndicators:u,subIndicators:c,setSubIndicators:h,setReplayCandle:p,setAlertMessage:g,setReplayWidget:m,setIndicatorSettingModalParams:x}),await iU({chart:P,setAllLayouts:b,layoutLimit:k.layoutLimit}),CH(()=>P,i,$)}function Ay(e,t,r,n){console.log(`cleanUpMainUI: Starting cleanup for chart ${r.id}`);try{A5().unregisterChart(r),D5().unregisterChart(r),Os().unregisterChart(r),console.log(`[cleanUpMainUI] Successfully unregistered chart ${r.id} from sync managers`)}catch(o){console.error(`[cleanUpMainUI] Error unregistering chart ${r.id} from sync managers:`,o)}n&&n.getAttribute("data-chart-id"),window.removeEventListener("resize",e);const i=Wr.getInstance().getDataFeed();i&&(console.log(`cleanUpMainUI: Calling unsubscribeAllForChart for ${r.id}`),i.unsubscribeAllForChart(r.id),i.getActiveSubscriptions()===0&&hj()),console.log(`cleanUpMainUI: Cleanup completed for chart ${r.id}`)}function cU(e,t,r,n,i,o){if(!e){console.warn("initializeChartData: Chart not available");return}console.log(`initializeChartData [${n}]: Setting up chart for ${t.symbol} ${r.multiplier}${r.timespan}`);const s=Wr.getInstance().createDataLoader(n,t,r,o,i);e.setDataLoader(s),console.log(`initializeChartData [${n}]: Initialization complete`)}function uU(e){console.log(`cleanupChartData [${e}]: Cleaning up`),Wr.getInstance().cleanup(e)}const dU=e=>Y(Pe,{get when(){return e.isActive},get children(){return Y(dW,{get widget(){return e.widget},get ticker(){return e.symbol},get setInterval(){return e.setInterval},get layout(){return e.layout},get allLayouts(){return e.allLayouts},get setAllLayouts(){return e.setAllLayouts},get layoutLimit(){return e.layoutLimit},get onLayoutChange(){return e.onLayoutChange},get theme(){return e.theme},get setTheme(){return e.setTheme},get locale(){return e.locale},get themeUseExternalStorage(){return e.themeUseExternalStorage},get timezone(){return e.timezone},get onTimezoneChange(){return e.onTimezoneChange},get intervalEnabled(){return e.intervalEnabled},get layoutsEnabled(){return e.layoutsEnabled},get themesEnabled(){return e.themesEnabled},get themeGeneraterEnabled(){return e.themeGeneraterEnabled},get timezoneEnabled(){return e.timezoneEnabled}})}}),hU=e=>{const[t,r]=me(!1);return[Y(Pe,{get when(){return e.overlayOptionsVisible},get children(){return Y(iH,{get setOverlayVisible(){return e.setOverlayOptionsVisible},get overlay(){return e.overlayStyles},get widget(){return e.widget},get locale(){return e.locale},get currentLayout(){return e.currentLayout},get chartId(){return e.chartId},get overlayMousePosition(){return e.overlayMousePosition},setShowOverlaySetting:r})}}),Y(Pe,{get when(){return t()},get children(){return Y(q5,{get widget(){return e.widget},get locale(){return e.locale},get overlay(){return e.overlayStyles},get setOverlayVisible(){return e.setOverlayOptionsVisible},setShowOverlaySetting:r,get chartId(){return e.chartId},onConfirm:n=>{console.log("Selected color:",n),r(!1)}})}})]};var pU=K("<div class=chartspire-ui-renko-setting-modal-content><div class=content><div class=setting-item><span></span></div><div class=setting-footer><button class=cancel-button></button><button class=confirm-button>");const fU=e=>{var t,r;const n=((r=(t=e.widget.getStyles().candle.renko)==null?void 0:t.brick)==null?void 0:r.size)||Y5,[i,o]=me(n.toString()),s=()=>{const c=e.widget.getStyles();c.candle.renko||(c.candle.renko={brick:{size:10}}),c.candle.renko||(c.candle.renko={brick:{size:10}});const h=Number(i());!isNaN(h)&&h>0?(c.candle.renko&&(c.candle.renko={brick:{size:h}}),e.widget.setStyles(c),vt.getInstance(e.widget).saveStyles(),e.widget.resize(),e.setRenkoRefresh(!0),console.log(`Renko brick size updated to ${h}`)):console.error("Invalid brick size"),e.setShowRenkoSetting(!1),e.setRenkoPopupVisible(!1),e.onConfirm()},u=()=>{e.setShowRenkoSetting(!1)};return Y(zl,{get title(){return I("renko_settings",e.locale)||"Renko Settings"},contentHeight:"auto",onClose:u,get children(){var c=pU(),h=c.firstChild,p=h.firstChild,g=p.firstChild,m=p.nextSibling,b=m.firstChild,x=b.nextSibling;return F(g,()=>I("brick_size",e.locale)||"Brick Size"),F(p,Y(Ha,{style:{width:"120px"},get value(){return i()},onChange:C=>o(C),min:.1}),null),b.$$click=u,F(b,()=>I("cancel",e.locale)||"Cancel"),x.$$click=s,F(x,()=>I("save",e.locale)||"Save"),c}})};Dt(["click"]);var gU=K("<div class=chartspire-ui-popup-background><div class=popup><button>Brick Size Settings</button><button>Close");const vU=e=>{const[t,r]=me(!1),n=s=>{s.preventDefault()},i=()=>{r(!0)},o=()=>{e.setRenkoPopupVisible(!1)};return(()=>{var s=gU(),u=s.firstChild,c=u.firstChild,h=c.nextSibling;return s.$$contextmenu=n,c.$$click=i,h.$$click=o,F(s,Y(Pe,{get when(){return t()},get children(){return Y(fU,{get widget(){return e.widget},get locale(){return e.locale},get setRenkoPopupVisible(){return e.setRenkoPopupVisible},setShowRenkoSetting:r,get setRenkoRefresh(){return e.setRenkoRefresh},onConfirm:()=>{r(!1)}})}}),null),Ae(p=>{var g=`${e.renkoMousePosition.y}px`,m=`${e.renkoMousePosition.x}px`;return g!==p.e&&((p.e=g)!=null?u.style.setProperty("top",g):u.style.removeProperty("top")),m!==p.t&&((p.t=m)!=null?u.style.setProperty("left",m):u.style.removeProperty("left")),p},{e:void 0,t:void 0}),s})()};Dt(["contextmenu","click"]);const mU=()=>{const[e,t]=Nl({timezoneModalVisible:!1,multiChartModalVisible:!1,symbolSearchModalVisible:!1,indicatorModalVisible:!1,settingModalVisible:!1,overlaySettingVisible:!1,renkoPopupVisible:!1});return{modalState:e,setModalState:t,toggleModal:(r,n)=>{t(r,n??!e[r])},closeAllModals:()=>{t({timezoneModalVisible:!1,multiChartModalVisible:!1,symbolSearchModalVisible:!1,indicatorModalVisible:!1,settingModalVisible:!1,overlaySettingVisible:!1,renkoPopupVisible:!1})}}},yU=e=>{const[t,r]=Nl({chart:null,symbol:{...e.symbol},interval:{...e.interval},mainIndicators:[...e.mainIndicators],subIndicators:{},candleType:"candle_solid",layout:"default",hasLayoutChanged:!1});return{chartData:t,setChartData:r}},bU=e=>{const[t,r]=Nl({drawingBarVisible:!!e.drawingBarVisible,loadingVisible:!1,drawingBarCollapsed:!1,screenshotUrl:"",renkoRefresh:!1});return{uiState:t,setUIState:r}},xU=()=>{const[e,t]=Nl({overlayMousePosition:{x:0,y:0},renkoMousePosition:{x:0,y:0}});return{positions:e,setPositions:t}},wU=e=>{const[t,r]=Nl({styles:{...e.styles},chartStyles:void 0,overlay:null,indicatorSettingModalParams:{visible:!1,indicatorName:"",paneId:"",calcParams:[],styles:{}}});return{settings:t,setSettings:r}};var CU=K('<i class="icon-close chartspire-ui-load-icon">');const Tg=new Set,[Dy,Ig]=me([]),[mp,_U]=me("en-US"),[Id,yp]=me({key:"Etc/UTC",text:_p("Etc/UTC","en-US")}),SU=e=>{const t=e.chartIds;let r=!1;yp({key:e.timezone??"Etc/UTC",text:_p(e.timezone??"Etc/UTC","en-US")}),Tg.has(t)?console.warn(`Chart ${t.id} is being mounted again, this may cause issues`):(console.log(`Mounting chart ${t.id} for the first time`),Tg.add(t));let n;const[i,o]=me(!1),{modalState:s,setModalState:u}=mU(),{chartData:c,setChartData:h}=yU(e),{uiState:p,setUIState:g}=bU(e),{positions:m,setPositions:b}=xU(),{settings:x,setSettings:C}=wU(e),{drawingBarCollapsed:_,setDrawingBarCollapsed:k,cleanUpDrawingBar:M}=$H(()=>{var U;return(U=c.chart)==null?void 0:U.resize()});HH(()=>e.symbol,()=>c.symbol,U=>{console.log("useSymbolPropsToState triggered with symbol:",U),h("symbol",U)});const L=U=>{k(U),g("drawingBarCollapsed",U)},D=()=>{var U;(U=c.chart)==null||U.resize()},P=U=>{VE(U,c.chart,fe=>h("mainIndicators",fe),fe=>h("subIndicators",fe))},$=()=>{BE(c.mainIndicators,c.chart)};Ei(()=>{const U={destroy:()=>{console.log("MainUI destroy called for chart:",t.id),Ay(D,c.symbol,t,n)},setStyles:fe=>{setTimeout(()=>{var ce;(ce=c.chart)==null||ce.setStyles(fe),GT(fe)},50)},getStyles:()=>c.chart?c.chart.getStyles():{},setLocale:fe=>{var ce;_U(fe),(ce=c.chart)==null||ce.setLocale(fe),yp({key:Id().key,text:_p(Id().key,fe)})},getLocale:()=>mp(),setTimezone:fe=>{yp({key:fe,text:_p(fe,mp())})},getTimezone:()=>Id().key,setSymbol:fe=>{h("symbol",fe)},getSymbol:()=>c.symbol,setInterval:fe=>{h("interval",fe)},getInterval:()=>c.interval,getMultiCharts:()=>e.multiChartLimit,getUnderlyingChart:()=>c.chart};e.ref(U)});const{replayModalVisible:A,setReplayModalVisible:N,replaySpeed:z,setReplaySpeed:B,setReplayPlay:Q,setReplayPaused:ne,replayCandle:Z,setReplayCandle:J,isAlertVisible:ue,alertMessage:le,setAlertMessage:ae,resetReplayState:te,setSkipToEnd:ve,isPlaying:pe,setReplayWidget:j}=AH(e.locale,c.chart,t),H=FH(()=>c.chart,()=>x.chartStyles,()=>c.candleType,U=>h("candleType",U),()=>c.symbol,()=>c.interval,()=>p.renkoRefresh,U=>g("renkoRefresh",U),t);Ei(async()=>{h("layout",vt.getInstance(c.chart||{}).getDefaultLayout()),await lU(n,()=>c.interval,()=>c.chart,U=>{h("chart",U),U&&(Wr.getInstance().updateChartReference(t,U),cU(U,c.symbol,c.interval,t,fe=>g("loadingVisible",fe),c.candleType),o(!0))},()=>c.symbol,()=>c.layout,()=>c.mainIndicators,U=>h("mainIndicators",U),()=>c.subIndicators,U=>h("subIndicators",U),J,ae,j,Ig,U=>C("indicatorSettingModalParams",U),D,P,e,$,Id,{setOverlaySettingVisible:U=>u("overlaySettingVisible",U),setOverlayStyles:U=>C("overlay",U),setOverlayMousePosition:U=>b("overlayMousePosition",U)})}),Nr(()=>{Ay(D,c.symbol,t,n),uU(t),console.log(`Removing chart ${t.id} from mounted charts tracking`),Tg.delete(t),M&&M()}),PH(()=>c.chart,e.theme),kH(()=>c.chart,mp),TH(()=>c.chart,Id,D),IH(()=>c.chart,()=>x.styles,U=>C("chartStyles",U)),vH(()=>e.multiChartLimit,D),_H(()=>e.resizeChart,D),SH(()=>e.rightBarExpandedViewVisible,D),gH(()=>e.isActiveChart,()=>c.symbol),fH(()=>c.layout,()=>e.isActiveChart,U=>h("hasLayoutChanged",U)),mH(()=>e.isActiveChart,()=>c.chart,()=>c.layout,()=>c.symbol,()=>c.hasLayoutChanged,U=>h("mainIndicators",U),U=>h("subIndicators",U),P,U=>u("overlaySettingVisible",U),U=>C("overlay",U),U=>b("overlayMousePosition",U),U=>h("candleType",U)),DH($),OH(()=>c.candleType,()=>n,U=>u("renkoPopupVisible",U),U=>b("renkoMousePosition",U)),NH(()=>c.chart),zH(()=>c.chart,()=>c.symbol),WH(()=>c.chart,()=>c.interval,()=>e.candleCloseTimerEnabled??!1,()=>c.symbol,e.fontFamily),UH(r,()=>c.chart,()=>c.interval,()=>c.symbol,t,e.setCommonInterval),jH(e.commonInterval,t,()=>c.interval,()=>c.symbol,U=>h("interval",U)),XH(t,()=>c.chart,()=>c.mainIndicators,()=>c.subIndicators,U=>h("mainIndicators",U),U=>h("subIndicators",U));const de=U=>{n=U};return[CU(),Y(hU,{get overlayOptionsVisible(){return s.overlaySettingVisible},setOverlayOptionsVisible:U=>u("overlaySettingVisible",U),get overlayStyles(){return x.overlay},get widget(){return c.chart},get locale(){return e.locale},get currentLayout(){return c.layout},chartId:t,get overlayMousePosition(){return m.overlayMousePosition}}),Y(Pe,{get when(){return s.renkoPopupVisible},get children(){return Y(vU,{get widget(){return c.chart},setRenkoPopupVisible:U=>u("renkoPopupVisible",U),get locale(){return mp()},get renkoMousePosition(){return m.renkoMousePosition},setRenkoRefresh:U=>g("renkoRefresh",U)})}}),Y(pH,{get enabledSymbolTypes(){return e.enabledSymbolTypes},setSymbol:U=>{hv().requestSymbolChange(e.chartIds,U)},get symbolModalVisible(){return s.symbolSearchModalVisible},setSymbolSearchModalVisible:U=>u("symbolSearchModalVisible",U),get locale(){return e.locale}}),Y(rF,{mainIndicators:()=>c.mainIndicators,setMainIndicators:U=>h("mainIndicators",U),subIndicators:()=>c.subIndicators,setSubIndicators:U=>h("subIndicators",j2(U)),get indicatorModalVisible(){return s.indicatorModalVisible},setIndicatorModalVisible:U=>u("indicatorModalVisible",U),get chart(){return c.chart},get chartId(){return t.id},get locale(){return e.locale},get currentLayout(){return c.layout}}),Y(Pe,{get when(){return s.multiChartModalVisible},get children(){return Y(pF,{get multiChart(){return e.multiChartLimit},get maxMultiCharts(){return e.maxMultiCharts},get onMultiChartClick(){return e.onMultiChartClick},setMultiChartModalVisible:U=>u("multiChartModalVisible",U),get locale(){return e.locale}})}}),Y(qD,{get locale(){return e.locale},get replaySpeed(){return z()},setReplaySpeed:B,get replayCandle(){return Z()},onPlay:Q,onPause:ne,onClose:te,skipReplay:ve,isPlaying:pe,get chartId(){return t.id},get isAlertVisible(){return ue()},get alertMessage(){return le()},get replayModalVisible(){return A()},get isActive(){return e.isActiveChart}}),Y(mz,{settingModalVisible:()=>s.settingModalVisible,setSettingModalVisible:U=>u("settingModalVisible",U),get widget(){return c.chart},widgetDefaultStyles:()=>x.chartStyles,get locale(){return e.locale},get currentLayout(){return c.layout}}),Y(oH,{get screenshotUrl(){return p.screenshotUrl},setScreenshotUrl:U=>g("screenshotUrl",U),get locale(){return e.locale}}),Y(aH,{get locale(){return e.locale},get widget(){return c.chart},get currentLayout(){return c.layout},get indicatorSettingModalParams(){return x.indicatorSettingModalParams},setIndicatorSettingModalParams:U=>C("indicatorSettingModalParams",U)}),Y(sH,{get rootContainer(){return e.rootContainer},get locale(){return e.locale},get symbols(){return c.symbol},get spread(){return p.drawingBarVisible},get period(){return c.interval},setPeriod:U=>{h("interval",U),e.isActiveChart&&e.onIntervalChange&&e.onIntervalChange(U)},get periods(){return e.periods},get multiChart(){return e.multiChartLimit},get widget(){return c.chart},get theme(){return e.theme},get isActive(){return e.isActiveChart},setIndicatorModalVisible:U=>u("indicatorModalVisible",U),setMultiChartModalVisible:U=>u("multiChartModalVisible",U),get replayModalVisible(){return A()},setReplayModalVisible:N,setSettingModalVisible:U=>u("settingModalVisible",U),setScreenshotUrl:U=>g("screenshotUrl",U),setTimezoneModalVisible:U=>u("timezoneModalVisible",U),get symbolSearchModalVisible(){return s.symbolSearchModalVisible},setSymbolSearchModalVisible:U=>u("symbolSearchModalVisible",U),get drawingBarVisible(){return p.drawingBarVisible},setDrawingBarVisible:U=>g("drawingBarVisible",U),get layout(){return c.layout},setLayout:U=>h("layout",U),get allLayouts(){return Dy()},setAllLayouts:Ig,get layoutLimit(){return e.layoutLimit},get currentCandleType(){return c.candleType},onCandleTypeChange:H,get indicatorModalVisible(){return s.indicatorModalVisible},get settingModalVisible(){return s.settingModalVisible},get multiChartModalVisible(){return s.multiChartModalVisible},get menuPagesEnabled(){return e.menuPagesEnabled},get menuPages(){return e.menuPages},get menuPageClickCallback(){return e.menuPageClickCallback}}),Y(lH,{get isActive(){return e.isActiveChart},get locale(){return e.locale},get drawingBarVisible(){return p.drawingBarVisible},get widget(){return c.chart},get currentLayout(){return c.layout},setOverlaySettingVisible:U=>u("overlaySettingVisible",U),setOverlayStyles:U=>C("overlay",U),setOverlayMousePosition:U=>b("overlayMousePosition",U),chartIds:t,get drawingBarCollapsed(){return _()},setDrawingBarCollapsed:L}),Y(dU,{get isActive(){return e.isActiveChart},get widget(){return c.chart},get symbol(){return c.symbol},setInterval:U=>{h("interval",U),e.isActiveChart&&e.onIntervalChange&&e.onIntervalChange(U)},get layout(){return c.layout},get allLayouts(){return Dy()},setAllLayouts:Ig,get layoutLimit(){return e.layoutLimit},onLayoutChange:U=>h("layout",U),get theme(){return e.theme},get setTheme(){return e.setTheme},get locale(){return e.locale},get timezone(){return Id()},onTimezoneChange:U=>{yp(U)},get intervalEnabled(){return e.intervalEnabled??!0},get layoutsEnabled(){return e.layoutsEnabled??!0},get themesEnabled(){return e.themesEnabled??!0},get themeGeneraterEnabled(){return e.themeGeneraterEnabled??!0},get themeUseExternalStorage(){return e.themeUseExternalStorage??!1},get timezoneEnabled(){return e.timezoneEnabled??!0}}),Y(hH,{ref:de,get chartIds(){return t.id},get multiChart(){return e.multiChartLimit},get isActive(){return e.isActiveChart},get loadingVisible(){return p.loadingVisible},get drawingBarVisible(){return p.drawingBarVisible},get drawingBarCollapsed(){return _()},get onClick(){return e.onClick}})]};function kU(e,t,r){tt(()=>{const n=e.slice(0,t());r(n[0])})}function MU(e,t){tt(()=>{e==null||e.setAttribute("data-theme",t()),localStorage.setItem(zv,t())})}const Ld={MIN_POSITION_REGULAR:20,MAX_POSITION_REGULAR:80,MIN_POSITION_GRID:15,MAX_POSITION_GRID:85,DEFAULT_SPLIT_POSITION:50,DEFAULT_SECOND_SPLIT_POSITION:75},Hc={SINGLE:1,SPLIT:2,GRID:3},M0={WATCHLIST:"watchlist",PAPER_TRADING:"papertrading",ORDERBOOK:"orderbook",TRADES:"trades",OBJECT_TREE:"objecttree"},EU=1e3,Fy={DEFAULT_DOT_COUNT:6,DEFAULT_ANIMATED:!0},hi={CONTAINER:"chartspire-ui-right-bar-extended-view",MODAL_CONTAINER:"modal-container",MODAL_PANEL:"modal-panel",SPLIT_HANDLE:"split-handle",SPLIT_HANDLE_INDICATOR:"split-handle-indicator",RESIZABLE_HANDLE:"resizable-handle",SINGLE_VIEW:"single-view",SPLIT_VIEW:"split-view",GRID_VIEW:"grid-view",FIRST_SPLIT_HANDLE:"first-split-handle"};function TU(e){const t=Bt(()=>{const s=e(),u=[];return s.objectTreeModalVisible&&u.push(M0.OBJECT_TREE),s.watchListModalVisible&&u.push(M0.WATCHLIST),s.paperTradingModalVisible&&u.push(M0.PAPER_TRADING),s.tradesModalVisible&&u.push(M0.TRADES),s.orderbookModalVisible&&u.push(M0.ORDERBOOK),u}),r=Bt(()=>t().length),n=Bt(()=>r()===Hc.SINGLE),i=Bt(()=>r()===Hc.SPLIT),o=Bt(()=>r()===Hc.GRID);return{visiblePanels:t,visibleModalCount:r,isSingleView:n,isSplitView:i,isGridView:o,getPanelHeight:(s,u)=>{const c=t(),h=c.indexOf(s);return c.length===Hc.SINGLE?"100%":c.length===Hc.SPLIT?h===0?`${u}%`:`${100-u}%`:c.length===Hc.GRID?void 0:"100%"},getPanelWidth:s=>(t().length,Hc.GRID,"100%")}}function IU(){const[e,t]=me(Ld.DEFAULT_SPLIT_POSITION),[r,n]=me(Ld.DEFAULT_SECOND_SPLIT_POSITION);let i=0;return{splitPosition:e,setSplitPosition:t,secondSplitPosition:r,setSecondSplitPosition:n,handleSplitStart:(o,s)=>{i=s},handleSplitMove:(o,s)=>{const u=document.querySelector(`.${hi.CONTAINER} .${hi.MODAL_CONTAINER}`);if(!u)return;const c=u.getBoundingClientRect(),h=o/c.height*100;let p=i+h;s?p=Math.max(Ld.MIN_POSITION_GRID,Math.min(Ld.MAX_POSITION_GRID,p)):p=Math.max(Ld.MIN_POSITION_REGULAR,Math.min(Ld.MAX_POSITION_REGULAR,p)),t(p)},handleSplitEnd:()=>{i=0}}}function LU(e={}){const{onDragStart:t,onDragMove:r,onDragEnd:n,preventDefaults:i=!0,stopPropagation:o=!0}=e;let s=!1;const u=x=>({clientX:x.clientX,clientY:x.clientY,preventDefault:()=>{i&&"preventDefault"in x&&x.preventDefault()},stopPropagation:()=>{o&&"stopPropagation"in x&&x.stopPropagation()}}),c=x=>{if(!s)return;const C=u(x);r==null||r(C)},h=()=>{s&&(s=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h),n==null||n())},p=x=>{const C=u(x);i&&x.preventDefault(),o&&x.stopPropagation(),s=!0,t==null||t(C),document.addEventListener("mousemove",c),document.addEventListener("mouseup",h)},g=x=>{if(!s)return;i&&x.preventDefault();const C=x.touches[0];if(!C)return;const _=u(C);r==null||r(_)},m=()=>{s&&(s=!1,document.removeEventListener("touchmove",g),document.removeEventListener("touchend",m),n==null||n())},b=x=>{i&&x.preventDefault(),o&&x.stopPropagation();const C=x.touches[0];if(!C)return;const _=u(C);s=!0,t==null||t(_),document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",m)};return Nr(()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",m)}),{onMouseDown:p,onTouchStart:b}}function PU(e={}){const{initialWidth:t=parseInt(getComputedStyle(document.documentElement).getPropertyValue(e.cssProperty||"--right-bar-extended-view-width"),10),cssProperty:r="--right-bar-extended-view-width",onResize:n,minWidth:i=200,maxWidth:o=1600}=e,[s,u]=me(t);let c,h;const p=b=>{let x=h-(b-c);x=Math.max(i,Math.min(o,x)),u(x),document.documentElement.style.setProperty(r,`${x}px`),n==null||n(x)},{onMouseDown:g,onTouchStart:m}=LU({onDragStart:b=>{c=b.clientX,h=s()},onDragMove:b=>{p(b.clientX)},preventDefaults:!0,stopPropagation:!0});return{width:s,setWidth:u,onMouseDown:g,onTouchStart:m}}var AU=K("<div><div>");const DU=e=>{let t=!1,r=0,n;const i=p=>{p.preventDefault(),p.stopPropagation(),t=!0,r=p.clientY,n&&e.isGridView&&n.classList.add("dragging"),e.onSplitStart(p.clientY,e.splitPosition),document.addEventListener("mousemove",o),document.addEventListener("mouseup",s)},o=p=>{if(!t)return;const g=p.clientY-r;e.onSplitMove(g)},s=()=>{t&&(t=!1,n&&e.isGridView&&n.classList.remove("dragging"),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s),e.onSplitEnd())},u=p=>{p.preventDefault(),p.stopPropagation();const g=p.touches[0];g&&(t=!0,r=g.clientY,n&&e.isGridView&&n.classList.add("dragging"),e.onSplitStart(g.clientY,e.splitPosition),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",h))},c=p=>{if(!t)return;p.preventDefault();const g=p.touches[0];if(!g)return;const m=g.clientY-r;e.onSplitMove(m)},h=()=>{t&&(t=!1,n&&e.isGridView&&n.classList.remove("dragging"),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",h),e.onSplitEnd())};return Nr(()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",h)}),(()=>{var p=AU(),g=p.firstChild;p.$$touchstart=u,p.$$mousedown=i;var m=n;return typeof m=="function"?tn(m,p):n=p,Ae(b=>{var x=`${hi.SPLIT_HANDLE} ${hi.FIRST_SPLIT_HANDLE}`,C=`${e.splitPosition}%`,_=hi.SPLIT_HANDLE_INDICATOR;return x!==b.e&&Ge(p,b.e=x),C!==b.t&&((b.t=C)!=null?p.style.setProperty("top",C):p.style.removeProperty("top")),_!==b.a&&Ge(g,b.a=_),b},{e:void 0,t:void 0,a:void 0}),p})()};Dt(["mousedown","touchstart"]);var FU=K("<div><div class=resize-handle-dots>"),RU=K("<div class=dot>");const OU=e=>{const t=()=>e.dotCount??Fy.DEFAULT_DOT_COUNT,r=()=>e.animated??Fy.DEFAULT_ANIMATED,n=()=>Array.from({length:t()},(i,o)=>o);return(()=>{var i=FU(),o=i.firstChild;return F(o,()=>n().map(s=>RU())),Ae(()=>Ge(i,`resize-handle-icon ${r()?"animated":""} ${e.class||""}`)),i})()};var Pd=K("<div>"),NU=K("<div><div>");const zU=e=>{const{width:t,onMouseDown:r,onTouchStart:n}=PU({cssProperty:"--right-bar-extended-view-width",onResize:()=>e.resizeChart(P=>!P),minWidth:250,maxWidth:1e3}),[i,o]=me(0),s=()=>({watchListModalVisible:e.watchListModalVisible,paperTradingModalVisible:e.paperTradingModalVisible,orderbookModalVisible:e.orderBookModalVisible,tradesModalVisible:e.tradesModalVisible,objectTreeModalVisible:e.objectTreeModalVisible}),{visibleModalCount:u,isSplitView:c,isGridView:h,getPanelHeight:p,getPanelWidth:g}=TU(s),{splitPosition:m,handleSplitStart:b,handleSplitMove:x,handleSplitEnd:C}=IU();tt(()=>{if(e.chart&&e.paperTradingModalVisible&&e.currentSymbol()){const P=()=>{try{const A=e.chart.getDataList();if(A&&A.length>0){const N=A[A.length-1];o(N.close||0)}}catch(A){console.error("Error getting current price from chart:",A)}};P();const $=setInterval(P,EU);return()=>{clearInterval($)}}});const _=(P,$)=>{b(P,$)},k=P=>{x(P,h())},M=()=>{C()};Nr(()=>{console.log("Cleaning up right bar extended view modal")});const L=()=>h()?hi.GRID_VIEW:c()?hi.SPLIT_VIEW:hi.SINGLE_VIEW,D=()=>h()?{"--split-top":`${m()}fr`,"--split-bottom":`${100-m()}fr`}:{};return(()=>{var P=NU(),$=P.firstChild;return Hn($,"touchstart",n),Hn($,"mousedown",r),F($,Y(OU,{animated:!0})),F(P,Y(Pe,{get when(){return u()>0},get children(){var A=Pd();return F(A,Y(Pe,{get when(){return e.objectTreeModalVisible},get children(){var N=Pd();return F(N,Y(BD,{get locale(){return e.locale},currentSymbol:()=>e.currentSymbol(),get chart(){return e.chart},get chartComponentApis(){return e.chartComponentApis},get activeChart(){return e.activeChart}})),Ae(z=>{var B=`${hi.MODAL_PANEL} object-tree-panel`,Q={...p("objecttree",m())&&{height:p("objecttree",m())},width:g("objecttree")};return B!==z.e&&Ge(N,z.e=B),z.t=mn(N,Q,z.t),z},{e:void 0,t:void 0}),N}}),null),F(A,Y(Pe,{get when(){return e.watchListModalVisible},get children(){var N=Pd();return F(N,Y(cI,{get locale(){return e.locale},get watchListLimit(){return e.watchListLimit},get watchListAmount(){return e.watchListAmount},get subscribedSymbolsURL(){return e.subscribedTickersURL},get useExternalWatchListStorage(){return e.useExternalWatchListStorage},get setInterval(){return e.setInterval},get watchListHttp(){return e.watchListHttp},get watchListHttpInterval(){return e.watchListHttpInterval},get watchListHttpBatchSize(){return e.watchListHttpBatchSize},get watchListHttpRetryEnabled(){return e.watchListHttpRetryEnabled},get watchListHttpMaxRetries(){return e.watchListHttpMaxRetries},get enabledSymbolTypes(){return e.enabledSymbolTypes}})),Ae(z=>{var B=`${hi.MODAL_PANEL} watchlist-panel`,Q={...p("watchlist",m())&&{height:p("watchlist",m())},width:g("watchlist")};return B!==z.e&&Ge(N,z.e=B),z.t=mn(N,Q,z.t),z},{e:void 0,t:void 0}),N}}),null),F(A,Y(Pe,{get when(){return e.paperTradingModalVisible},get children(){var N=Pd();return F(N,Y(UP,{get symbol(){return e.currentSymbol()||{symbol:"",type:null}},get currentPrice(){return i()},get locale(){return e.locale},get priceTrackingConfig(){return{updateInterval:e.priceTrackingInterval,enableLogging:e.priceTrackingLogging}},get paperTradingUseExternalStorage(){return e.useExternalPaperTradingStorage},get paperTradingMaxTrades(){return e.paperTradingMaxTrades}})),Ae(z=>{var B=`${hi.MODAL_PANEL} paper-trading-panel`,Q={...p("papertrading",m())&&{height:p("papertrading",m())},width:g("papertrading")};return B!==z.e&&Ge(N,z.e=B),z.t=mn(N,Q,z.t),z},{e:void 0,t:void 0}),N}}),null),F(A,Y(Pe,{get when(){return e.tradesModalVisible},get children(){var N=Pd();return F(N,Y(rD,{get locale(){return e.locale},currentSymbol:()=>e.currentSymbol(),get tradesMaxRows(){return e.tradesMaxRows},get timeFormat(){return e.tradesTimeFormat}})),Ae(z=>{var B=`${hi.MODAL_PANEL} trades-panel`,Q={...p("trades",m())&&{height:p("trades",m())},width:g("trades")};return B!==z.e&&Ge(N,z.e=B),z.t=mn(N,Q,z.t),z},{e:void 0,t:void 0}),N}}),null),F(A,Y(Pe,{get when(){return e.orderBookModalVisible},get children(){var N=Pd();return F(N,Y(AA,{get locale(){return e.locale},currentSymbol:()=>e.currentSymbol(),get orderBookMaxRows(){return e.orderBookMaxRows},get orderBookDepthVisualization(){return e.orderBookDepthVisualization}})),Ae(z=>{var B=`${hi.MODAL_PANEL} orderbook-panel`,Q={...p("orderbook",m())&&{height:p("orderbook",m())},width:g("orderbook")};return B!==z.e&&Ge(N,z.e=B),z.t=mn(N,Q,z.t),z},{e:void 0,t:void 0}),N}}),null),F(A,Y(Pe,{get when(){return c()||h()},get children(){return Y(DU,{get splitPosition(){return m()},get isGridView(){return h()},onSplitStart:_,onSplitMove:k,onSplitEnd:M})}}),null),Ae(N=>{var z=`${hi.MODAL_CONTAINER} ${L()}`,B=D();return z!==N.e&&Ge(A,N.e=z),N.t=mn(A,B,N.t),N},{e:void 0,t:void 0}),A}}),null),Ae(A=>{var N=hi.CONTAINER,z=`${t()}px`,B=hi.RESIZABLE_HANDLE;return N!==A.e&&Ge(P,A.e=N),z!==A.t&&((A.t=z)!=null?P.style.setProperty("width",z):P.style.removeProperty("width")),B!==A.a&&Ge($,A.a=B),A},{e:void 0,t:void 0,a:void 0}),P})()};Dt(["mousedown","touchstart"]);const VU=3,BU=e=>{var t;let r,n,i,o,s,u,c,h,p,g;const m=((t=e.defaultOpenComponents)==null?void 0:t.slice(0,3))||[],[b,x]=me(m),{rightBarCollapsed:C,setRightBarCollapsed:_}=VH(e.chartComponentApis,e.resizeChart);if(e.watchListEnabled){const A=m.includes("watchlist");[r,n]=me(A)}if(e.isPaperTradingEnabled){const A=m.includes("papertrading");[i,o]=me(A)}if(e.isOrderBookEnabled){const A=m.includes("orderbook");[s,u]=me(A)}if(e.isTradesEnabled){const A=m.includes("trades");[c,h]=me(A)}if(e.isObjectTreeEnabled){const A=m.includes("objecttree");[p,g]=me(A)}const k=(A,N,z)=>!N||!z?null:B=>{const Q=z(),ne=typeof B=="function"?B(Q):B;x(ne?Z=>{const J=Z.filter(ue=>ue!==A);if(J.push(A),J.length>VU){const ue=J.shift();if(ue)switch(ue){case"watchlist":n&&n(!1);break;case"papertrading":o&&o(!1);break;case"orderbook":u&&u(!1);break;case"trades":h&&h(!1);break;case"objecttree":g&&g(!1);break}}return J}:Z=>Z.filter(J=>J!==A)),N(ne)},M=k("watchlist",n,r),L=k("papertrading",o,i),D=k("orderbook",u,s),P=k("trades",h,c),$=k("objecttree",g,p);return tt(()=>{((r==null?void 0:r())??!1)||((i==null?void 0:i())??!1)||((s==null?void 0:s())??!1)||((c==null?void 0:c())??!1)||((p==null?void 0:p())??!1)?(e.setRightBarExpandedViewVisible(!0),C()&&_(!1)):e.setRightBarExpandedViewVisible(!1),e.resizeChart(A=>!A)}),[Y(RB,{get isWatchListEnabled(){return e.watchListEnabled},get isPaperTradingEnabled(){return e.isPaperTradingEnabled},get watchListModalVisible(){return r!=null?r():!1},get paperTradingModalVisible(){return i!=null?i():!1},get isOrderBookEnabled(){return e.isOrderBookEnabled},get orderBookModalVisible(){return s!=null?s():!1},get isTradesEnabled(){return e.isTradesEnabled},get tradesModalVisible(){return c!=null?c():!1},get isObjectTreeEnabled(){return e.isObjectTreeEnabled},get objectTreeModalVisible(){return p!=null?p():!1},setWatchListModalVisible:M,setPaperTradingModalVisible:L,setOrderBookVisible:D,setTradesVisible:P,setObjectTreeVisible:$,get rightBarCollapsed(){return C()},setRightBarCollapsed:_}),Y(Pe,{get when(){return e.rightBarExpandedViewVisible()},get children(){return Y(zU,{get locale(){return e.locale},get watchListModalVisible(){return r!=null?r():!1},get paperTradingModalVisible(){return i!=null?i():!1},get orderBookModalVisible(){return s!=null?s():!1},get tradesModalVisible(){return c!=null?c():!1},get objectTreeModalVisible(){return p!=null?p():!1},get priceTrackingInterval(){return e.paperTradingPriceTrackingInterval},get priceTrackingLogging(){return e.paperTradingPriceTrackingLogging},get useExternalPaperTradingStorage(){return e.paperTradingUseExternalStorage},get paperTradingMaxTrades(){return e.paperTradingMaxTrades},get watchListLimit(){return e.watchListLimit},get watchListAmount(){return e.watchListAmount},get subscribedTickersURL(){return e.subscribedSymbolsURL??null},get resizeChart(){return e.resizeChart},get useExternalWatchListStorage(){return e.watchListUseExternalStorage},get chart(){return e.chart},get currentSymbol(){return e.currentSymbol},get chartComponentApis(){return e.chartComponentApis},get activeChart(){return e.activeChart},get setInterval(){return e.setInterval},get orderBookMaxRows(){return e.orderBookMaxRows},get orderBookDepthVisualization(){return e.orderBookDepthVisualization},get tradesMaxRows(){return e.tradesMaxRows??50},get tradesTimeFormat(){return e.tradesTimeFormat},get watchListHttp(){return e.watchListHttp},get watchListHttpInterval(){return e.watchListHttpInterval},get watchListHttpBatchSize(){return e.watchListHttpBatchSize},get watchListHttpRetryEnabled(){return e.watchListHttpRetryEnabled},get watchListHttpMaxRetries(){return e.watchListHttpMaxRetries},get enabledSymbolTypes(){return e.enabledSymbolTypes}})}})]},$U=e=>({[X.ONE]:1,[X.TWO]:2,[X.TWO_VERTICAL]:2,[X.THREE]:3,[X.THREE_VERTICAL]:3,[X.THREE_MIXED]:3,[X.THREE_MIXED_REVERSE]:3,[X.THREE_MIXED_BOTTOM]:3,[X.THREE_MIXED_TOP]:3,[X.FOUR]:4,[X.FOUR_VERTICAL]:4,[X.FOUR_HORIZONTAL]:4,[X.FOUR_MIXED]:4,[X.FOUR_MIXED_REVERSE]:4,[X.FOUR_MIXED_TOP]:4,[X.FOUR_MIXED_BOTTOM]:4,[X.FIVE_VERTICAL]:5,[X.FIVE_HORIZONTAL]:5,[X.FIVE_MIXED]:5,[X.FIVE_MIXED_REVERSE]:5,[X.FIVE_MIXED_TOP]:5,[X.SIX]:6,[X.SIX_HORIZONTAL]:6,[X.SIX_VERTICAL]:6,[X.SIX_MIXED]:6,[X.SEVEN_HORIZONTAL]:7,[X.SEVEN_VERTICAL]:7,[X.EIGHT]:8,[X.EIGHT_VERTICAL]:8,[X.EIGHT_HORIZONTAL]:8,[X.NINE]:9,[X.NINE_VERTICAL]:9,[X.NINE_HORIZONTAL]:9,[X.TEN]:10,[X.TEN_VERTICAL]:10,[X.TEN_HORIZONTAL]:10,[X.TWELVE]:12,[X.TWELVE_VERTICAL]:12,[X.TWELVE_HORIZONTAL]:12,[X.TWELVE_GRID]:12,[X.FOURTEEN]:14,[X.SIXTEEN]:16,[X.SIXTEEN_GRID]:16})[e]??e,WU=e=>({[X.ONE]:"one-charts",[X.TWO]:"two-charts",[X.TWO_VERTICAL]:"two-charts-vertical",[X.THREE]:"three-charts",[X.THREE_VERTICAL]:"three-charts-vertical",[X.THREE_MIXED]:"three-charts-mixed",[X.THREE_MIXED_REVERSE]:"three-charts-mixed-reverse",[X.THREE_MIXED_BOTTOM]:"three-charts-mixed-bottom",[X.THREE_MIXED_TOP]:"three-charts-mixed-top",[X.FOUR]:"four-charts",[X.FOUR_VERTICAL]:"four-charts-vertical",[X.FOUR_HORIZONTAL]:"four-charts-horizontal",[X.FOUR_MIXED]:"four-charts-mixed",[X.FOUR_MIXED_REVERSE]:"four-charts-mixed-reverse",[X.FOUR_MIXED_TOP]:"four-charts-mixed-top",[X.FOUR_MIXED_BOTTOM]:"four-charts-mixed-bottom",[X.FIVE_VERTICAL]:"five-charts-vertical",[X.FIVE_HORIZONTAL]:"five-charts-horizontal",[X.FIVE_MIXED]:"five-charts-mixed",[X.FIVE_MIXED_REVERSE]:"five-charts-mixed-reverse",[X.FIVE_MIXED_TOP]:"five-charts-mixed-top",[X.SIX]:"six-charts",[X.SIX_HORIZONTAL]:"six-charts-horizontal",[X.SIX_VERTICAL]:"six-charts-vertical",[X.SIX_MIXED]:"six-charts-mixed",[X.SEVEN_HORIZONTAL]:"seven-charts-horizontal",[X.SEVEN_VERTICAL]:"seven-charts-vertical",[X.EIGHT]:"eight-charts",[X.EIGHT_VERTICAL]:"eight-charts-vertical",[X.EIGHT_HORIZONTAL]:"eight-charts-horizontal",[X.NINE]:"nine-charts",[X.NINE_VERTICAL]:"nine-charts-vertical",[X.NINE_HORIZONTAL]:"nine-charts-horizontal",[X.TEN]:"ten-charts",[X.TEN_VERTICAL]:"ten-charts-vertical",[X.TEN_HORIZONTAL]:"ten-charts-horizontal",[X.TWELVE]:"twelve-charts",[X.TWELVE_VERTICAL]:"twelve-charts-vertical",[X.TWELVE_HORIZONTAL]:"twelve-charts-horizontal",[X.TWELVE_GRID]:"twelve-charts-grid",[X.FOURTEEN]:"fourteen-charts",[X.SIXTEEN]:"sixteen-charts",[X.SIXTEEN_GRID]:"sixteen-charts-grid"})[e]??"one-charts",J5=class D0{constructor(){be(this,"registeredDataFeeds",new Map)}static getInstance(){return D0.instance||(D0.instance=new D0),D0.instance}registerDataFeed(t,r,...n){if(this.registeredDataFeeds.has(t))throw new Error(`DataFeed with name "${t}" is already registered`);const i=new r(...n);this.validateDataFeedImplementation(i,t),this.registeredDataFeeds.set(t,r),console.log(`DataFeedRegistry: Registered datafeed "${t}"`)}createDataFeed(t,...r){const n=this.registeredDataFeeds.get(t);if(!n)throw new Error(`DataFeed with name "${t}" is not registered`);return new n(...r)}isRegistered(t){return this.registeredDataFeeds.has(t)}getRegisteredNames(){return Array.from(this.registeredDataFeeds.keys())}unregisterDataFeed(t){const r=this.registeredDataFeeds.delete(t);return r&&console.log(`DataFeedRegistry: Unregistered datafeed "${t}"`),r}clear(){this.registeredDataFeeds.clear(),console.log("DataFeedRegistry: Cleared all registered datafeeds")}validateDataFeedImplementation(t,r){const n=["searchSymbols","getHistoricalTimeSeries","getPrice","getOrderBook","subscribeSymbol","unsubscribeSymbol","unsubscribeAllForChart","subscribeOrderBookData","unsubscribeOrderBookData","closeWebsocket","clearAllListeners","debugChannels","getActiveSubscriptions"];for(const o of n)if(typeof t[o]!="function")throw new Error(`DataFeed "${r}" must implement method: ${o}`);const i=["subscribeTradeData","unsubscribeTradeData"];for(const o of i)t[o]&&typeof t[o]!="function"&&console.warn(`DataFeed "${r}" has invalid implementation for optional method: ${o}`)}};be(J5,"instance",null);let HU=J5;function UU(){return HU.getInstance()}function jU(e,t){return r=>{const n=e();if(console.log("IntervalHandler: handleSetInterval called for chart:",n),console.log("IntervalHandler: Available chart APIs:",Object.keys(t)),t[n.id]){const i=typeof r=="function"?r({multiplier:1,timespan:"minute",text:"1m"}):r;console.log("IntervalHandler: Setting interval on chart:",n,"to:",i),t[n.id].chartSpire.setInterval(i,n)}else console.error("IntervalHandler: Chart API not found for:",n)}}var XU=K("<div class=chartspire><div>");let Ep=!0,Ir='Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',Lr="normal";const[Fd,Up]=me(1);let e9=250;const zv="chartspire-theme";let Ao="en-US";const YU=localStorage.getItem(zv)??I("Light Theme 1",Ao),[Or,Ry]=me(YU),[lo,Oy]=me({id:"chart1"}),[Vv,qc]=me();class ZU{constructor(t){be(this,"_rootContainer",null),be(this,"_container"),be(this,"_chartApi",null),be(this,"_chartComponentApis",{}),be(this,"_dispose"),be(this,"_allChartIds",[]),be(this,"_visibleChartIds",()=>[]);var r,n;if(t.theme&&Ry(t.theme),Ao=t.locale??"en-US",t.fontFamily&&(Ir=t.fontFamily),t.fontWeight&&(Lr=t.fontWeight.toString()),t.customStyles&&YT(t.customStyles),vn.isString(t.container)){if(this._container=document.getElementById(t.container),this._container==null)throw new Error("Container is null")}else this._container=t.container;if(kv(),this._rootContainer=document.createElement("div"),this._rootContainer.className="chartspire-root-container",(r=this._container)==null||r.appendChild(this._rootContainer),this._container.classList.add("chartspire-ui"),(n=this._container)==null||n.setAttribute("data-theme",Or()),t.fontFamily?(this._container.style.setProperty("--chartspire-ui-font-family",t.fontFamily),console.log("ChartSpire: Font family set to:",t.fontFamily),console.log("ChartSpire: CSS custom property value:",this._container.style.getPropertyValue("--chartspire-ui-font-family"))):this._container.style.setProperty("--chartspire-ui-font-family",Ir),t.fontWeight?this._container.style.setProperty("--chartspire-ui-font-weight",t.fontWeight.toString()):this._container.style.setProperty("--chartspire-ui-font-weight",Lr),MU(this._container,Or),t.dataFeed){let i;if(typeof t.dataFeed=="string"){const o=UU();if(!o.isRegistered(t.dataFeed))throw new Error(`DataFeed "${t.dataFeed}" is not registered. Use DataFeedRegistry.registerDataFeed() to register it first.`);i=o.createDataFeed(t.dataFeed)}else i=t.dataFeed;Wr.initializeWithDataFeed(i)}Ep=t.layoutUseExternalStorage??!1,e9=t.multiChartDelay??500,this._dispose=Bd(i=>{let o=t.multiChartLimit??X.SIXTEEN;(o<1||o>16)&&(o=X.SIXTEEN,console.warn("Invalid multiChartLimit value. It must be between 1 and 16. Defaulting to 16."));const s=[{id:"chart1"},{id:"chart2"},{id:"chart3"},{id:"chart4"},{id:"chart5"},{id:"chart6"},{id:"chart7"},{id:"chart8"},{id:"chart9"},{id:"chart10"},{id:"chart11"},{id:"chart12"},{id:"chart13"},{id:"chart14"},{id:"chart15"},{id:"chart16"}].slice(0,o);this._allChartIds=s,Up(X.ONE);const u=Bt(()=>{const M=Fd(),L=$U(M);return s.slice(0,L)});this._visibleChartIds=u;const[c,h]=me(!1),[p,g]=me(!1);let[m,b]=me(Object.fromEntries(s.map(M=>[M.id,t.symbol])));const x=jU(lo,this._chartComponentApis);hv().initialize(m,b,u,lo,(M,L,D)=>{this.setSymbol(M,L,D)}),kU(s,Fd,lo);const C=M=>{M.id!==lo().id&&(console.debug("ChartSpire: Setting active chart to:",M.id),Oy(M))},[_,k]=me({chartId:{id:"chart1"},skipBroadcast:!0,interval:t.interval});return LE(()=>{const M=this;return(()=>{var L=XU(),D=L.firstChild;return tn(P=>M._rootContainer=P,L),F(D,Y(bn,{get each(){return u()},children:(P,$)=>Y(SU,{ref:A=>{M._chartApi=A,M.registerChartApi(A,P)},get rootContainer(){return M._rootContainer},get styles(){return t.styles??{}},get customStyles(){return t.customStyles},watermark:"options.watermark ?? (Logo as Node)",get locale(){return t.locale??"en-US"},get drawingBarVisible(){return t.drawingBarVisible??!0},get symbol(){var A;return((A=m())==null?void 0:A[P.id])??t.symbol},get interval(){return t.interval},get periods(){return t.periods??[{multiplier:1,timespan:Tn.MINUTE,text:qe.ONE_MIN},{multiplier:3,timespan:Tn.MINUTE,text:qe.THREE_MIN},{multiplier:5,timespan:Tn.MINUTE,text:qe.FIVE_MIN},{multiplier:15,timespan:Tn.MINUTE,text:qe.FIFTEEN_MIN},{multiplier:30,timespan:Tn.MINUTE,text:qe.THIRTY_MIN},{multiplier:1,timespan:Tn.HOUR,text:qe.ONE_HOUR},{multiplier:2,timespan:Tn.HOUR,text:qe.TWO_HOUR},{multiplier:4,timespan:Tn.HOUR,text:qe.FOUR_HOUR},{multiplier:1,timespan:Tn.DAY,text:qe.ONE_DAY},{multiplier:1,timespan:Tn.WEEK,text:qe.ONE_WEEK},{multiplier:1,timespan:Tn.MONTH,text:qe.ONE_MONTH}]},get timezone(){return t.timezone??"Etc/UTC"},get mainIndicators(){return t.mainIndicators??[]},get subIndicators(){return t.subIndicators??[]},maxMultiCharts:o,get dataFeed(){return Wr.getInstance().getDataFeed()},get layoutLimit(){return t.layoutLimit??20},get themeUseExternalStorage(){return t.themeUseExternalStorage??!1},onClick:()=>{C(P)},get isActiveChart(){return lo().id===P.id},get multiChartLimit(){return Fd()},onMultiChartClick:oF,chartIds:P,get theme(){return Or()},setTheme:Ry,onSymbolChange:A=>{},onIntervalChange:A=>{M.setInterval(A,P)},get rightBarExpandedViewVisible(){return c()},get resizeChart(){return p()},get candleCloseTimerEnabled(){return t.candleCloseTimerEnabled??!1},get fontFamily(){return t.fontFamily??"monospace"},get enabledSymbolTypes(){return t.enabledSymbolTypes},get intervalEnabled(){return t.intervalEnabled??!0},get layoutsEnabled(){return t.layoutsEnabled??!0},get themesEnabled(){return t.themesEnabled??!0},get themeGeneraterEnabled(){return t.themeGeneraterEnabled??!0},get timezoneEnabled(){return t.timezoneEnabled??!0},commonInterval:_,setCommonInterval:A=>{k(A)},get menuPagesEnabled(){return t.menuPagesEnabled??!1},get menuPages(){return t.menuPages??[]},get menuPageClickCallback(){return t.menuPageClickCallback??(()=>{})}})})),F(L,Y(BU,{get isPaperTradingEnabled(){return t.paperTradingEnabled??!1},get paperTradingPriceTrackingInterval(){return t.paperTradingPriceTrackingInterval},get paperTradingPriceTrackingLogging(){return t.paperTradingPriceTrackingLogging},get paperTradingUseExternalStorage(){return t.paperTradingUseExternalStorage??!1},get paperTradingMaxTrades(){return t.paperTradingMaxTrades},get defaultOpenComponents(){return t.defaultOpenComponents},get subscribedSymbolsURL(){return t.subscribedSymbolsURL??null},get watchListLimit(){return t.watchListLimit??50},get watchListAmount(){return t.watchListAmount??5},get watchListUseExternalStorage(){return t.watchListUseExternalStorage??!1},get isObjectTreeEnabled(){return t.objectTreeEnabled??!0},setInterval:x,rightBarExpandedViewVisible:c,setRightBarExpandedViewVisible:h,get locale(){return t.locale??"en-US"},resizeChart:g,get chart(){return M._chartComponentApis[lo().id].klineChart},currentSymbol:()=>{var P;const $=(P=M._chartComponentApis[lo().id])==null?void 0:P.chartSpire;return($==null?void 0:$.getSymbol(lo()))??t.symbol},get chartComponentApis(){return M._chartComponentApis},activeChart:lo,get isOrderBookEnabled(){return t.orderBookEnabled??!1},get orderBookMaxRows(){return t.orderBookMaxRows??10},get orderBookDepthVisualization(){return t.orderBookDepthVisualization??"cumulative"},get isTradesEnabled(){return t.tradesEnabled??!1},get tradesMaxRows(){return t.tradesMaxRows??50},get tradesTimeFormat(){return t.tradesTimeFormat??"24h"},get watchListEnabled(){return t.watchListEnabled??!1},get watchListHttp(){return t.watchListHttp??!1},get watchListHttpInterval(){return t.watchListHttpInterval??5e3},get watchListHttpBatchSize(){return t.watchListHttpBatchSize??10},get watchListHttpRetryEnabled(){return t.watchListHttpRetryEnabled??!0},get watchListHttpMaxRetries(){return t.watchListHttpMaxRetries??3},get enabledSymbolTypes(){return t.enabledSymbolTypes??[]}}),null),Ae(P=>{var $=`chartspire-ui-parent-flex ${WU(Fd())}`,A=c();return $!==P.e&&Ge(D,P.e=$),A!==P.t&&Be(D,"right-bar-extended-view-visible",P.t=A),P},{e:void 0,t:void 0}),L})()},this._container),i})}registerChartApi(t,r){const n=t.destroy,i=t.getUnderlyingChart;if(n){console.debug("ChartSpire: Registering chart API for:",r.id),this._chartComponentApis[r.id]={onCleanUp:n,chartSpire:t,klineChart:(i==null?void 0:i())||null};const o=()=>{const s=i==null?void 0:i();s&&this._chartComponentApis[r.id]?this._chartComponentApis[r.id].klineChart=s:!s&&this._chartComponentApis[r.id]&&setTimeout(o,100)};o()}}setTheme(t){var r;const n=[I("Light Theme 1",Ao),I("Light Theme 2",Ao),I("Midnight Theme",Ao),I("Dark Theme",Ao),I("Dark Gray Theme",Ao),I("Blue Theme",Ao),I("Red Theme",Ao),I("Green Theme",Ao),I("Yellow Theme",Ao),I("Pink Theme",Ao)];if(!n.includes(t)){console.error("Invalid theme: ",t," should be one of: ",n);return}(r=this._container)==null||r.setAttribute("data-theme",t)}getTheme(){return Or()}setStyles(t){Object.values(this._chartComponentApis).forEach(r=>{console.log("setting styles",t),r.chartSpire.setStyles(t)})}getStyles(){return this._chartComponentApis[lo().id].chartSpire.getStyles()}setCustomStyles(t){T0().updateCustomOverrides(t);const r=Or();Object.values(this._chartComponentApis).forEach(n=>{n.chartSpire.setStyles(Ui(r))})}getCustomStyles(){return T0().getCustomOverrides()}clearCustomStyles(){T0().clearCustomOverrides();const t=Or();Object.values(this._chartComponentApis).forEach(r=>{r.chartSpire.setStyles(Ui(t))})}hasCustomStyles(){return T0().hasCustomStyles()}setLocale(t){Object.values(this._chartComponentApis).forEach(r=>{console.log("setting locale",t),r.chartSpire.setLocale(t)})}getLocale(){var t;return((t=this._chartApi)==null?void 0:t.getLocale())??"en-US"}setFontFamily(t){Ir=t,this._container&&(this._container.style.setProperty("--chartspire-ui-font-family",t),console.log("ChartSpire: Font family updated to:",t),console.log("ChartSpire: CSS custom property value:",this._container.style.getPropertyValue("--chartspire-ui-font-family")))}getFontFamily(){return this._container&&this._container.style.getPropertyValue("--chartspire-ui-font-family")||'Roboto, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'}setFontWeight(t){Lr=t.toString(),this._container&&(this._container.style.setProperty("--chartspire-ui-font-weight",t.toString()),console.log("ChartSpire: Font weight updated to:",t),console.log("ChartSpire: CSS custom property value:",this._container.style.getPropertyValue("--chartspire-ui-font-weight")))}getFontWeight(){return this._container&&this._container.style.getPropertyValue("--chartspire-ui-font-weight")||"normal"}setTimezone(t){Object.values(this._chartComponentApis).forEach(r=>{r.chartSpire.setTimezone(t)})}getTimezone(){var t;return((t=this._chartApi)==null?void 0:t.getTimezone())??"America/New_York"}setSymbol(t,r,n){if(this._chartComponentApis[r.id]==null){console.error("Chart not found: ",r);return}if(n==null){console.error("Data feed is null");return}console.debug("ChartSpire setSymbol called with symbol:",t),this._chartComponentApis[r.id].chartSpire.setSymbol(t,r,n)}getSymbol(t){return this._chartComponentApis[t.id]==null?(console.error("Chart not found: ",t),null):this._chartComponentApis[t.id].chartSpire.getSymbol(t)}setInterval(t,r){if(this._chartComponentApis[r.id]==null){console.error("Chart not found: ",r);return}this._chartComponentApis[r.id].chartSpire.setInterval(t,r)}getInterval(t){return this._chartComponentApis[t.id]==null?(console.error("Chart not found: ",t),null):this._chartComponentApis[t.id].chartSpire.getInterval(t)}getActiveChart(){return this._chartApi}getChart(t){return this._chartComponentApis[t.id]==null?(console.error("Chart not found"),null):this._chartComponentApis[t.id].chartSpire}isActiveChart(t){return lo().id===t.id}setActiveChart(t){if(this._chartComponentApis[t.id]==null){console.error("Chart not found: ",t);return}Oy(t)}getMultiChart(){return Fd()}getAllChartIds(){return[...this._allChartIds]}getVisibleChartIds(){return[...this._visibleChartIds()]}destroy(){console.log("Destroying chart");const t=Object.keys(this._chartComponentApis).length;console.log(`Destroying ${t} charts`),Object.entries(this._chartComponentApis).forEach(([r,n])=>{n.onCleanUp()}),this._dispose(),nF(),this._container.classList.remove("chartspire-ui"),this._container.removeAttribute("data-theme"),this._container.innerHTML="",this._container=null,this._chartApi=null,this._chartComponentApis={}}syncAllSymbolsToActiveChart(){}syncAllIntervalsToActiveChart(){}}const KU=()=>(console.warn("No getStoreCallback set."),null),qU=()=>(console.warn("No updateStoreCallback set."),null),QU=()=>(console.warn("No deleteStoreCallback set."),null);class GU{async getAllLayouts(){try{return console.warn("Retrieving from Store"),Ep&&!KU()?(console.warn("No callback is set. "),{}):localStorage}catch(t){console.warn("Error getting all layouts: ",t)}return{}}async removeStorage(t){try{if(Ep){const r=QU();r&&await r(t)}else localStorage.removeItem(t)}catch(r){console.warn("Error removing storage: ",r)}}async addToStore(t,r){try{if(Ep){const n=qU();n&&await n(t,r)}else localStorage.setItem(t,JSON.stringify(r))}catch(n){console.warn("Error updating storage: ",n)}}getLayoutEntry(t,r){return Object.entries(r).map(([n,i])=>({key:n,value:i})).find(n=>n.key===t)}async getLayoutFromStore(t){try{const r=await this.getAllLayouts();if(r instanceof Storage)return JSON.parse(r.getItem(t));const n=this.getLayoutEntry(t,r);return n?n.value:null}catch(r){console.warn("Error getting layout from store: ",r)}return{indicatorStore:{indicators:[]},stylesStore:{},overlayStore:{overlay:{},tickerInfo:{}}}}}const[Ny,JU]=me(null),[ej,Bv]=me("default"),[tj,zy]=me(!1),Rd=()=>({indicatorStore:{indicators:[]},stylesStore:Or()==="Light Theme 1"||Or()==="Light Theme 2"?Ui("Light Theme 1"):Ui("Dark Theme"),overlayStore:[],paneOptionsStore:{paneOptions:Q5()}}),t9=class r9{constructor(t){be(this,"chart"),be(this,"storageProvider"),be(this,"stylesStore","stylesStore"),be(this,"indicatorStore","indicatorStore"),be(this,"overlayStore","overlayStore"),be(this,"paneOptionsStore","paneOptionsStore"),be(this,"defaultLayoutStore","default_mainStore"),this.chart=t,this.storageProvider=new GU}static getInstance(t){return this.instances.has(t)||this.instances.set(t,new r9(t)),this.instances.get(t)}get getSelectedLayoutName(){return(Ze(ej).replace(/\s+/g,"")??"default")+"_mainStore"}getDefaultLayout(){return this.defaultLayoutStore.replace("_mainStore","")}isDefaultLayout(){return this.getSelectedLayoutName===this.defaultLayoutStore}async getNameOfAllLayouts(){try{const t=[],r=await this.storageProvider.getAllLayouts();let n=0;t.push(this.getDefaultLayout()),r instanceof Storage?n=r.length:n=Object.keys(r).length;for(let i=0;i<n;i++)if(r instanceof Storage){const o=r.key(i);o!=null&&o.endsWith("_mainStore")&&t.push(o.replace("_mainStore",""))}else{const o=Object.keys(r)[i];o.endsWith("_mainStore")&&t.push(o.replace("_mainStore",""))}return t}catch(t){console.warn("Error getting the list of all names for layouts: ",t)}return[]}saveIndicators(){if(!(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore))try{const t=this.createIndicatorStoreFromChart();this.addDataToLayout(this.indicatorStore,t)}catch(t){console.warn("Error saving indicators:",t)}}async getIndicators(t){try{if(this.getSelectedLayoutName===this.defaultLayoutStore)return{indicators:[]};if(t){const r=t[this.indicatorStore];if(r)return r}}catch(r){console.warn("Error getting indicators: ",r)}return{indicators:[]}}saveStyles(){if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore)return;const t=this.getStylesFromChart();if(t)try{this.addDataToLayout(this.stylesStore,t)}catch(r){console.warn("Error saving styles:",r)}}async getStyles(t){if(this.getSelectedLayoutName===this.defaultLayoutStore)return null;try{if(t){const r=t[this.stylesStore];if(r)return r}}catch(r){console.warn("Error getting styles:",r)}return null}savePaneOptions(){if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore)return;const t={paneOptions:this.getPaneOptionsFromChart()};if(t)try{this.addDataToLayout(this.paneOptionsStore,t)}catch(r){console.warn("Error saving pane options:",r)}}async getPaneOptionsFromStore(t){if(this.getSelectedLayoutName===this.defaultLayoutStore)return{paneOptions:{}};try{if(t){const r=t[this.paneOptionsStore];if(r)return r}}catch(r){console.warn("Error getting pane options from store:",r)}return{paneOptions:{}}}removeNullValuesAndSpecificFields(t,r){const n={};for(const i in t){const o=t[i];r.includes(i)||o!==null&&(typeof o=="object"&&!Array.isArray(o)?n[i]=this.removeNullValuesAndSpecificFields(o,r):n[i]=o)}return n}async saveOverlay(t){if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore||t===null||Ny()===null)return;const r={overlay:this.removeNullValuesAndSpecificFields(t,["visible","lock","zLevel","mode","needDefaultPointFigure","needDefaultXAxisFigure","needDefaultYAxisFigure","modeSensitivity","totalStep","currentStep","groupId","_prevPressedPoints","logo","paneId","createPointFigures","createYAxisFigures","createXAxisFigures","onDrawStart","onDrawing","onDrawEnd","onPressedMoveStart","onPressedMoving","onPressedMoveEnd","onMoveStart","onMoving","onMoveEnd","onRightClick","onClick"]),symbolInfo:this.getActiveChartSymbol()};try{const n=await this.getLayoutFromStore()??Rd();let i=await this.getOverlays(n);Array.isArray(i)||(i=[]),i==null||i.push(r),this.addDataToLayout(this.overlayStore,i)}catch(n){console.warn("Error saving overlay:",n)}}async overrideOverlay(t){try{if(!this.chart||this.getSelectedLayoutName===this.defaultLayoutStore||t===null)return;const r=await this.getLayoutFromStore()??Rd();let n=await this.getOverlays(r);if(!n||n.length===0){console.warn("No overlays found, nothing to override");return}n.forEach(i=>{i.overlay.id===(t==null?void 0:t.id)&&(console.log("Found overlay in store, overriding... ",t==null?void 0:t.id),t.styles&&(i.overlay.styles=t.styles),t.extendData&&(i.overlay.extendData=t.extendData),t.points&&(console.log("Updating points for overlay: ",t.id),i.overlay.points=t.points))}),this.addDataToLayout(this.overlayStore,n)}catch(r){console.warn("Error overriding overlay: ",r)}}async deleteOverlay(t){if(!(!this.chart||!this.getSelectedLayoutName))try{this.chart.removeOverlay(t);const r=await this.getLayoutFromStore();if(r){console.log("Deleting overlay for symbol: ",this.getActiveChartSymbol());const n=r.overlayStore.filter(i=>i.overlay.id!==t.id);await this.addDataToLayout(this.overlayStore,n)}else console.warn("Unable to delete overlay, layout not found")}catch(r){console.warn("Error deleting overlay:",r)}}async getOverlays(t){if(this.getSelectedLayoutName===this.defaultLayoutStore)return[];if(t){const r=t[this.overlayStore];if(r)return r}return[]}async removeAllOverlays(t=!1){var r;if((r=this.chart.getOverlays())==null||r.forEach(n=>{this.chart.removeOverlay(n)}),t){const n=await this.getLayoutFromStore();n&&(nt.forEach(n.overlayStore,i=>{var o;i.symbolInfo.symbol===((o=this.getActiveChartSymbol())==null?void 0:o.symbol)&&(n.overlayStore=n.overlayStore.filter(s=>s!==i))}),this.addDataToLayout(this.overlayStore,n.overlayStore))}}async updateLayoutName(t){if(this.getSelectedLayoutName!==this.defaultLayoutStore)try{const r=await this.getLayoutFromStore()??Rd();if(r){const n=t.replace(/\s+/g,"")+"_mainStore",i={indicatorStore:r[this.indicatorStore],stylesStore:r[this.stylesStore],overlayStore:r[this.overlayStore],paneOptionsStore:r[this.paneOptionsStore]};await this.storageProvider.addToStore(n,i),await this.storageProvider.removeStorage(this.getSelectedLayoutName),Bv(t)}}catch(r){console.warn("Error updating store name:",r)}}getActiveChartSymbol(){return Ny()}async removeStorage(){this.getSelectedLayoutName!==this.getDefaultLayout()&&await this.storageProvider.removeStorage(this.getSelectedLayoutName)}async addDataToLayout(t,r){try{console.warn("Adding data to Store");let n;if(tj()?n=await this.getLayoutFromStore()??Rd():n=this.createLayoutFromChart(),n){const i=n instanceof Storage?JSON.parse(n):n;i&&(i[t]=r,await this.storageProvider.addToStore(this.getSelectedLayoutName,i))}}catch(n){console.warn("Error updating storage: ",n)}}async getLayoutFromStore(){return await this.storageProvider.getLayoutFromStore(this.getSelectedLayoutName)}getDefaultLayoutData(){return Rd()}createLayoutFromChart(){var t;const r=this.createIndicatorStoreFromChart(),n=this.getStylesFromChart(),i={paneOptions:this.getPaneOptionsFromChart()},o=[];return(t=this.chart.getOverlays())==null||t.forEach(s=>{o.push({overlay:s,symbolInfo:this.getActiveChartSymbol()})}),{indicatorStore:r,stylesStore:n,overlayStore:o,paneOptionsStore:i}}createIndicatorStoreFromChart(){const t=this.chart.getIndicators(),r=t.filter(i=>i.paneId==="candle_pane");t.forEach(i=>{V0.forEach(o=>{o===i.name&&r.push(i)})});const n=[];return nt.forEach(r,i=>{const o={id:i.id,name:i.name,paneId:i.paneId,calcParams:i.calcParams,visible:i.visible,zLevel:i.zLevel,precision:i.precision,shortName:i.shortName,shouldOhlc:i.shouldOhlc,shouldFormatBigNumber:i.shouldFormatBigNumber,extendData:i.extendData,series:i.series,minValue:i.minValue,maxValue:i.maxValue,styles:i.styles,figures:i.figures};n.push(o)}),{indicators:n}}getStylesFromChart(){return this.chart.getStyles()}getPaneOptionsFromChart(){const t=this.chart.getPaneOptions();return t===null?{}:Array.isArray(t)?t.length>0?t[0]:{}:t||{}}};be(t9,"instances",new Map);let vt=t9;class Vy{static getIconsForCandleTooltip(t){var r,n;const i=t.id||"unknown",o=Qc.getCandleTooltipCollapseState(i);return(((n=(r=t.getStyles().candle)==null?void 0:r.tooltip)==null?void 0:n.features)||[]).map(s=>s.id==="arrow_down"?{...s,...Vd.createArrowIcon(o)}:s)}}class Qc{static handleIconClick(t,r,n,i,o,s,u){const c=r.paneId,h=r.indicator,p=r.feature;if(h&&p){const g=h.name,m=p.id;switch(m){case"invisible":this.handleVisibilityToggle(t,g,c,!0);break;case"visible":this.handleVisibilityToggle(t,g,c,!1);break;case"setting":this.handleSettings(t,g,c,n);break;case"close":this.handleClose(t,g,c,i,o,s,u);break;case"arrow_down":this.handleArrowDown(t,g);break;default:console.warn(`Unknown tooltip icon: ${m}`)}}}static handleVisibilityToggle(t,r,n,i){t.overrideIndicator({name:r,visible:i,paneId:n});const o=Yg.klineToChartSpire(t.id);qc({chartId:{id:o},objectType:"indicator",objectOperation:i?"show":"hide",indicatorName:r})}static handleSettings(t,r,n,i){const o=t.getIndicators({name:r,paneId:n});if(o&&o.length>0){const s=o[0];s&&i({visible:!0,indicatorName:r,paneId:n,calcParams:s.calcParams,styles:s.styles})}}static handleClose(t,r,n,i,o,s,u){if(n==="candle_pane"){const h=i(),p=h.indexOf(r);if(p===-1)console.warn(`Indicator ${r} not found in main indicators array. Skipping state update.`),t.removeIndicator({name:r,paneId:"candle_pane"});else{const g=[...h];t.removeIndicator({name:r,paneId:"candle_pane"}),g.splice(p,1),o(g)}}else{const h=s();if(!(r in h))console.warn(`Indicator ${r} not found in sub indicators. Skipping state update.`),t.removeIndicator({name:r,paneId:n});else{const p={...h};t.removeIndicator({name:r,paneId:n}),delete p[r],u(p)}}vt.getInstance(t).saveIndicators();const c=Yg.klineToChartSpire(t.id);qc({chartId:{id:c},objectType:"indicator",objectOperation:"remove",indicatorName:r})}static handleArrowDown(t,r){const n=t.id||"unknown",i=this.getIndicatorCollapseState(r,n);this.setIndicatorCollapseState(r,!i,n);const o=t.getIndicators().find(s=>s.name===r);o&&t.overrideIndicator(o)}static handleCandleTooltipIconClick(t,r){const n=r.feature;if(n&&n.id==="arrow_down"){const i=t.id||"unknown",o=this.getCandleTooltipCollapseState(i);this.setCandleTooltipCollapseState(!o,i),this.updateCandleTooltipStyles(t,!o)}}static updateCandleTooltipStyles(t,r){var n,i,o,s,u,c,h,p,g;const m=t.id||"unknown",b=t.getStyles();if(r){const x=(o=(i=(n=b.candle)==null?void 0:n.tooltip)==null?void 0:i.legend)==null?void 0:o.template;x&&!this.originalCandleTemplates.has(m)&&this.originalCandleTemplates.set(m,x);const C=(k,M)=>{if(Array.isArray(x))return x.length>0?[x[0]]:[];if(typeof x=="function")try{const L=x(k,M);return Array.isArray(L)&&L.length>0?[L[0]]:[]}catch{return[]}return[]},_=Vy.getIconsForCandleTooltip(t);t.setStyles({candle:{tooltip:{...(s=b.candle)==null?void 0:s.tooltip,features:_,legend:{...(c=(u=b.candle)==null?void 0:u.tooltip)==null?void 0:c.legend,template:C}}}})}else{const x=this.originalCandleTemplates.get(m),C=Vy.getIconsForCandleTooltip(t);t.setStyles({candle:{tooltip:{...(h=b.candle)==null?void 0:h.tooltip,features:C,legend:{...(g=(p=b.candle)==null?void 0:p.tooltip)==null?void 0:g.legend,template:x}}}})}}static createKey(t,r){return`${t}:${r}`}static getIndicatorCollapseState(t,r){if(!r)return!1;const n=this.createKey(r,t);return this.collapsedIndicators.has(n)}static setIndicatorCollapseState(t,r,n){if(!n)return;const i=this.createKey(n,t);r?this.collapsedIndicators.add(i):this.collapsedIndicators.delete(i)}static getCandleTooltipCollapseState(t){if(!t)return!1;const r=this.createKey(t,"candle");return this.collapsedIndicators.has(r)}static setCandleTooltipCollapseState(t,r){if(!r)return;const n=this.createKey(r,"candle");t?this.collapsedIndicators.add(n):this.collapsedIndicators.delete(n)}static getCurrentCandleTooltipChartId(){return null}}be(Qc,"collapsedIndicators",new Set),be(Qc,"originalCandleTemplates",new Map);function n9({chart:e,mainIndicators:t,setMainIndicators:r,subIndicators:n,setSubIndicators:i,setIndicatorSettingModalParams:o}){return s=>{Qc.handleIconClick(e,s,o,t,r,n,i)}}class rj{static getIconsForIndicator(t,r){const n=t.getStyles().indicator.tooltip.features,i=[],o=t.id||"unknown",s=Qc.getIndicatorCollapseState(r.name,o),u=n.find(m=>m.id==="visible"),c=n.find(m=>m.id==="invisible"),h=n.find(m=>m.id==="setting"),p=n.find(m=>m.id==="close"),g=n.find(m=>m.id==="arrow_down");if(s){if(r.visible?(u&&i.push(this.applyIconPadding(u)),h&&i.push(this.applyIconPadding(h))):(c&&i.push(this.applyIconPadding(c)),h&&i.push(this.applyIconPadding(h))),g){const m={...g,...Vd.createArrowIcon(!0)};i.push(this.applyIconPadding(m))}return p&&i.push(this.applyIconPadding(p)),i}if(r.visible){if(u&&i.push(this.applyIconPadding(u)),h&&i.push(this.applyIconPadding(h)),g){const m={...g,...Vd.createArrowIcon(!1)};i.push(this.applyIconPadding(m))}p&&i.push(this.applyIconPadding(p))}else{if(c&&i.push(this.applyIconPadding(c)),h&&i.push(this.applyIconPadding(h)),g){const m={...g,...Vd.createArrowIcon(!1)};i.push(this.applyIconPadding(m))}p&&i.push(this.applyIconPadding(p))}return i}static applyIconPadding(t){return t.id==="arrow_down"&&(t.marginTop!==void 0||t.marginLeft!==void 0)?t:{...t,marginTop:1,marginLeft:4}}static getIconById(t,r){return t.getStyles().indicator.tooltip.features.find(n=>n.id===r)}static getAllIcons(t){return t.getStyles().indicator.tooltip.features}}class nj{static createDataSource(t){return({indicator:r,crosshair:n})=>{const i=t.id||"unknown",o=Qc.getIndicatorCollapseState(r.name,i)?[]:this.createLegends(t,r,n),s=rj.getIconsForIndicator(t,r);return{name:r.name,calcParamsText:"",features:s,legends:o}}}static createLegends(t,r,n){var i,o;const s=r.result,u=((o=(i=n.kLineData)==null?void 0:i.timestamp)==null?void 0:o.toString())??"",c=s[u],h=[];if(c){for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)&&c[p]!==void 0){const g=this.determineValueColor(t,r,h.length);h.push({title:p.toUpperCase()+": ",value:{text:c[p].toFixed(2),color:g}})}}return h}static determineValueColor(t,r,n){let i=t.getStyles().indicator.lines[n%t.getStyles().indicator.lines.length].color;const o=r.styles;return o&&(o.lines?i=o.lines[n%o.lines.length].color:o.circles&&(i=o.circles[n%o.circles.length].upColor)),i}}class $v{static applyStylesToChart(t,r){if(!t)return;const n=cE.createTooltipConfig(r),i=uE.createCandleTooltipConfig(r);t.setStyles({indicator:{tooltip:n},candle:{tooltip:i}})}static createIndicatorWithTooltip(t,r,n=!0,i,o){const s={name:r,visible:!0,createTooltipDataSource:nj.createDataSource(t)},u=(t==null?void 0:t.createIndicator(s,i,o))??null;return n&&vt.getInstance(t).saveIndicators(),u}static createIconClickHandler(t){return n9(t)}static createCandleTooltipIconClickHandler(t){return r=>{Qc.handleCandleTooltipIconClick(t,r)}}static updateTheme(t,r){this.applyStylesToChart(t,r)}}function Kg(e,t,r,n,i){return $v.createIndicatorWithTooltip(e,t,r,n,i)}const ij=(e,t,r)=>{let n=t,i=n;switch(e.timespan){case"minute":{n=n-n%(60*1e3),i=n-r*e.multiplier*60*1e3;break}case"hour":{n=n-n%(3600*1e3),i=n-r*e.multiplier*60*60*1e3;break}case"day":{n=n-n%(3600*1e3),i=n-r*e.multiplier*24*60*60*1e3;break}case"week":{const o=new Date(n).getDay(),s=o===0?6:o-1;n=n-s*60*60*24;const u=new Date(n);n=new Date(`${u.getFullYear()}-${u.getMonth()+1}-${u.getDate()}`).getTime(),i=r*e.multiplier*7*24*60*60*1e3;break}case"month":{const o=new Date(n),s=o.getFullYear(),u=o.getMonth()+1;n=new Date(`${s}-${u}-01`).getTime(),i=r*e.multiplier*30*24*60*60*1e3;const c=new Date(i);i=new Date(`${c.getFullYear()}-${c.getMonth()+1}-01`).getTime();break}case"year":{const o=new Date(n).getFullYear();n=new Date(`${o}-01-01`).getTime(),i=r*e.multiplier*365*24*60*60*1e3;const s=new Date(i);i=new Date(`${s.getFullYear()}-01-01`).getTime();break}}return[i,n]},oj=e=>{e.getIndicators().forEach(t=>{e.removeIndicator({id:t.id})})},Tp=new Map;function aj(e){return Tp.has(e)||Tp.set(e,{currentCandle:null,targetInterval:{multiplier:1,timespan:"minute",text:"1m"},lastTimestamp:0,initialized:!1,lastVolume:0,isFirstDataPoint:!0}),Tp.get(e)}function sj(e){Tp.set(e,{currentCandle:null,targetInterval:{multiplier:1,timespan:"minute",text:"1m"},lastTimestamp:0,initialized:!1,lastVolume:0,isFirstDataPoint:!0})}function lj(e,t,r){if(!r.currentCandle)return!0;const n=new Date(r.currentCandle.timestamp),i=new Date(e);switch(t.timespan){case"minute":const o=t.multiplier,s=n.getUTCHours()*60+n.getUTCMinutes(),u=i.getUTCHours()*60+i.getUTCMinutes();return Math.floor(s/o)!==Math.floor(u/o);case"hour":const c=t.multiplier,h=n.getUTCHours(),p=i.getUTCHours(),g=Math.floor(h/c)!==Math.floor(p/c),m=n.getUTCDate()!==i.getUTCDate();return!!(g||m);case"day":return Math.floor((i.getTime()-n.getTime())/(1440*60*1e3))>=t.multiplier;case"week":const b=_=>{const k=new Date(_.getTime());let M=k.getUTCDay();M===0&&(M=7);const L=M-1;return k.setUTCDate(k.getUTCDate()-L),k.setUTCHours(0,0,0,0),k},x=b(n),C=b(i);return x.getTime()!==C.getTime();case"month":return(i.getUTCFullYear()-n.getUTCFullYear())*12+(i.getUTCMonth()-n.getUTCMonth())>=t.multiplier;default:return console.warn(`Unknown interval: ${t.timespan}`),!0}}function i9(e,t){const r=new Date(e);r.toISOString();let n=new Date(e);switch(t.timespan){case"minute":const i=Math.floor(r.getUTCMinutes()/t.multiplier)*t.multiplier;n.setUTCMinutes(i,0,0);break;case"hour":const o=r.getUTCHours(),s=Math.floor(o/t.multiplier)*t.multiplier;n.setUTCHours(s,0,0,0);break;case"day":if(n.setUTCHours(0,0,0,0),t.multiplier>1){const h=Math.floor(r.getTime()/864e5)%t.multiplier;n.setTime(n.getTime()-h*24*60*60*1e3)}break;case"week":let u=r.getUTCDay();u===0&&(u=7);const c=u-1;if(n.setUTCDate(r.getUTCDate()-c),n.setUTCHours(0,0,0,0),t.multiplier>1){const h=new Date(Date.UTC(2e3,0,3)).getTime(),p=(Math.floor((n.getTime()-h)/6048e5)%t.multiplier+t.multiplier)%t.multiplier;p>0&&n.setTime(n.getTime()-p*6048e5)}break;case"month":if(n.setUTCDate(1),n.setUTCHours(0,0,0,0),t.multiplier>1){const h=r.getUTCMonth(),p=h%t.multiplier;n.setUTCMonth(h-p)}break;default:return e}return n.getTime()}function o9(e,t){try{const r=e.getDataList();return!r||r.length===0?(console.log(`No existing data found in chart for timestamp lookup: ${new Date(t).toISOString()}`),null):r.find(i=>i.timestamp===t)||null}catch(r){return console.error("Error finding existing candle:",r),null}}function cj(e,t,r,n){if(!n.initialized)try{const i=i9(t,r),o=o9(e,i);if(o)n.currentCandle={...o};else if(r.timespan==="week"){const s=(h=>{const p=new Date(h.getTime());let g=p.getUTCDay();return g===0&&(g=7),p.setUTCDate(p.getUTCDate()-(g-1)),p.setUTCHours(0,0,0,0),p})(new Date(t)),u=new Date(s.getTime()+10080*60*1e3),c=e.getDataList();if(c&&c.length>0){const h=c.find(p=>{const g=new Date(p.timestamp).getTime();return g>=s.getTime()&&g<u.getTime()});h&&(n.currentCandle={...h,timestamp:i})}}n.initialized=!0}catch(i){console.error("Error initializing from existing data:",i),n.initialized=!0}}function uj(e,t,r,n,i){if(r.timespan==="minute"&&r.multiplier===1){i?i(t):console.warn("candleAggregate called without callback for 1-minute data");return}const o=aj(n);o.targetInterval=r,o.initialized||cj(e,t.timestamp,r,o);const s=t.timestamp;o.lastTimestamp=s;const u=i9(s,r),c=t.volume||0,h=Math.max(0,c-o.lastVolume);if(o.lastVolume=c,!o.currentCandle||lj(s,r,o)){o.lastVolume=c,o.isFirstDataPoint=!0,o.currentCandle&&i&&i(o.currentCandle);const p=o9(e,u);if(p){o.currentCandle={...p},o.currentCandle.high=Math.max(p.high,t.high),o.currentCandle.low=Math.min(p.low,t.low),o.currentCandle.close=t.close;const g=p.volume||0;o.currentCandle.volume=g}else o.currentCandle={open:t.open,high:t.high,low:t.low,close:t.close,volume:c,timestamp:u};i&&i(o.currentCandle)}else if(o.currentCandle){const p=o.currentCandle;p.high=Math.max(p.high,t.high),p.low=Math.min(p.low,t.low),p.close=t.close,o.isFirstDataPoint||(p.volume=(p.volume||0)+h),i&&i(p)}o.isFirstDataPoint=!1}const By={multiplier:1,timespan:"minute",text:"1m"},a9=class Od{constructor(){be(this,"chartConfigs",new Map),be(this,"previousSymbols",new Map),be(this,"dataFeed",new fj)}static getInstance(){return Od.instance||(Od.instance=new Od),Od.instance}setDataFeed(t){this.dataFeed=t,console.log("ChartDataProvider: Data feed instance set")}getDataFeed(){return this.dataFeed}static initializeWithDataFeed(t){Od.getInstance().setDataFeed(t),console.log("ChartDataProvider initialized with data feed:",t.constructor.name)}createDataLoader(t,r,n,i,o,s){return{getBars:this.createGetBarsHandler(t,r,n,i,o,s),subscribeBar:this.createSubscribeBarHandler(t,s),unsubscribeBar:this.createUnsubscribeBarHandler(t,s)}}createGetBarsHandler(t,r,n,i,o,s){return async({callback:u})=>{o&&o(!0);try{if(!this.dataFeed){console.error(`ChartDataProvider [${t.id}]: No data feed available. Make sure setDataFeed() was called first.`),u([]);return}if(s&&this.handleReplayGetBars(t,u,o))return;let c=this.chartConfigs.get(t);if(c){const m=c.symbol;c.symbol=r,c.interval=n,c.candleType=i||null,c.dataFeed=this.dataFeed,console.debug(`ChartDataProvider [${t.id}]: Updated existing config, chart reference: ${c.chart?"preserved":"still null"}, oldTicker:`,m,"newTicker:",r)}else c={symbol:r,interval:n,candleType:i||null,dataFeed:this.dataFeed,chart:null},this.chartConfigs.set(t,c),console.debug(`ChartDataProvider [${t.id}]: Created new config, chart reference: null`);sj(t);const[h,p]=ij(n,new Date().getTime(),500);let g=await this.dataFeed.getHistoricalTimeSeries(r,n,h,p,r.type);if(i&&Ds(i)&&g.length>0&&(g=this.handleRenkoGetBars(t,g,i),g.length===0)){u([]);return}u(g)}catch(c){console.warn(`ChartDataProvider [${t.id}]: Error fetching data:`,c),u([])}finally{o&&o(!1)}}}createSubscribeBarHandler(t,r){return({callback:n})=>{const i=this.chartConfigs.get(t);if(!i){console.warn(`ChartDataProvider [${t.id}]: No config found for subscribeBar`);return}if(r){if(this.handleReplaySubscribe(t,n))return;console.warn(`ChartDataProvider [${t.id}]: Replay mode not handled`)}if(Ds(i.candleType)){if(this.handleRenkoSubscribe(t))return;console.warn(`ChartDataProvider [${t.id}]: Renko mode not handled`)}this.handleStandardSubscribe(t,n)}}createUnsubscribeBarHandler(t,r){return async()=>{console.warn("createUnsubscribeBarHandler called");const n=this.chartConfigs.get(t);if(console.debug(`ChartDataProvider [${t.id}]: Unsubscribe handler called, config:`,n),!n)return;const i=this.getPreviousSymbol(t);console.warn(`ChartDataProvider [${t.id}]: Unsubscribe handler called, previousSymbol:`,i,"currentConfig.ticker:",n.symbol),!(r&&await this.handleReplayUnsubscribe(t))&&await this.handleStandardUnsubscribe(t)}}updateChartReference(t,r){let n=this.chartConfigs.get(t);n?(n.chart=r,console.debug(`ChartDataProvider [${t.id}]: Updated chart reference in existing config`)):(console.error("ChartDataProvider: No config found for updateChartReference",t),n={symbol:{symbol:"",type:br.CRYPTO},interval:{multiplier:1,timespan:"minute",text:"1m"},candleType:null,dataFeed:this.dataFeed,chart:r},this.chartConfigs.set(t,n),console.debug(`ChartDataProvider [${t.id}]: Created new config with chart reference`))}cleanup(t){this.chartConfigs.delete(t),console.warn(`ChartDataProvider [${t.id}]: Configuration cleaned up`)}getConfig(t){return this.chartConfigs.get(t)}setPreviousSymbol(t,r){console.log("ChartDataProvider: Setting previous symbol for chart:",t,r);const n={...r};this.previousSymbols.set(t.id,n)}getPreviousSymbol(t){const r=this.previousSymbols.get(t.id);return console.debug(`ChartDataProvider [${t.id}]: getPreviousSymbol called, returning:`,r),r}getReplayInstance(t){return U0.getInstancesMap().get(t)||null}handleReplayGetBars(t,r,n){console.debug(`ChartDataProvider [${t.id}]: REPLAY MODE - Getting initial replay data`);const i=this.getReplayInstance(t);if(i){const o=i.getCurrentReplayData();return console.debug(`ChartDataProvider [${t.id}]: Returning ${o.length} initial replay data points`),r(o),n&&n(!1),!0}else return console.warn(`ChartDataProvider [${t.id}]: No replay instance found for replay mode`),!1}handleReplaySubscribe(t,r){console.log(`ChartDataProvider [${t.id}]: REPLAY MODE - Setting up replay subscription`);const n=this.getReplayInstance(t);return n?(n.setCurrentCallback(r),n.startReplayInterval(),console.debug(`ChartDataProvider [${t.id}]: Replay interval started`),!0):(console.warn(`ChartDataProvider [${t.id}]: No replay instance found for replay subscription`),!1)}async handleReplayUnsubscribe(t){console.warn(`ChartDataProvider [${t.id}]: REPLAY MODE - Cleaning up replay subscription`);const r=this.getReplayInstance(t);return r?(r.stopReplayInterval(),console.warn(`ChartDataProvider [${t.id}]: Replay interval stopped`),!0):!1}handleRenkoGetBars(t,r,n){const i=this.chartConfigs.get(t);if(!(i!=null&&i.chart))return console.error(`ChartDataProvider [${t.id}]: Chart reference is null for Renko processing. Make sure updateChartReference was called before creating the data loader.`),[];console.log(`ChartDataProvider [${t.id}]: Processing ${r.length} data points for Renko chart`);const o=D$(i.chart,r,t);return console.log(`ChartDataProvider [${t.id}]: Generated ${o.length} Renko bricks`),o}handleRenkoSubscribe(t){return console.warn(`ChartDataProvider [${t.id}]: Renko detected - live subscription disabled`),!0}handleStandardSubscribe(t,r){var n;const i=this.chartConfigs.get(t);if(!i){console.warn(`ChartDataProvider [${t.id}]: No config found for subscribeBar`);return}if(!i.chart){console.error(`ChartDataProvider [${t.id}]: Chart reference is null. Make sure updateChartReference was called before creating the data loader.`);return}(n=this.dataFeed)==null||n.subscribeSymbol(i.symbol,By,o=>{i.chart?uj(i.chart,o,i.interval,t,r):console.warn(`ChartDataProvider [${t.id}]: Chart reference became null during data processing`)},t.id)}async handleStandardUnsubscribe(t){var r;const n=this.chartConfigs.get(t);if(!n)return;const i=this.getPreviousSymbol(t)||n.symbol;i?await((r=this.dataFeed)==null?void 0:r.unsubscribeSymbol(i,By,t.id)):console.warn(`ChartDataProvider [${t.id}]: No symbol found for unsubscribe`)}};be(a9,"instance");let Wr=a9;function dj(e){const t=[{name:br.CRYPTO,class:s9}];(e!=null?t.filter(r=>r.name.toLowerCase()!==e.toLowerCase()):t).forEach(r=>{r.class.checkAndCloseIfNoSubscriptions()})}function hj(){const e=Wr.getInstance().getDataFeed();e&&(console.log("Closing websocket for ",e),e.closeWebsocket())}const Ll=class Se{async getPrice(t,r){try{if(r!==void 0&&r!==br.CRYPTO)return console.warn("BinanceDataFeed: getPrice only supports crypto symbols"),null;const n=`https://api.binance.com/api/v3/ticker/price?symbol=${t.symbol.toUpperCase()}`,i=await fetch(n);if(!i.ok)throw new Error(`Network response was not ok: ${i.statusText}`);const o=await i.json();if(!o.price)throw new Error("No price data in response");return parseFloat(o.price)}catch(n){return console.error("BinanceDataFeed: Failed to fetch price for",t.symbol,":",n),null}}async searchSymbols(t,r){try{if(r!==void 0&&r!==br.CRYPTO)return[];(t===void 0||t==="")&&(t="BTCUSDT");const n=`https://api.binance.com/api/v3/exchangeInfo?symbol=${t.toUpperCase()}`,i=await fetch(n);if(console.log("response",i),!i.ok)throw new Error(`Network response was not ok: ${i.statusText}`);const o=await i.json();if(console.log("result",o),!o.symbols||!Array.isArray(o.symbols))throw new Error("Invalid response format: 'symbols' not found or not an array.");return console.log(o.symbols),(o.symbols!=null?o.symbols:[]).map(s=>({symbol:s.symbol,exchange:"binance",logo:"binance-logo.svg",type:br.CRYPTO}))}catch(n){return console.error("Failed to fetch data from Binance API:",n),[]}}async getHistoricalTimeSeries(t,r,n,i,o){console.warn("Fetching historical time series for crypto");const s=1e3,u=Yc(br.CRYPTO,r);let c=[],h=s,p,g=Math.ceil(s/1e3);try{for(;h>0&&g>0;){const m=Math.min(1e3,h),b=await pj(t.symbol,u,m,p).catch(x=>(console.error("Failed to fetch candle data:",x),[]));if(!b||b.length===0){console.warn("No data returned, stopping further requests");break}if(c=[...b,...c],h-=b.length,g--,p=b[0][0],c.length>=s)break}return c.length<s&&console.warn(`Requested ${s} data points, but only fetched ${c.length}`),c.slice(0,s).map(m=>({timestamp:m[0],open:parseFloat(m[1]),high:parseFloat(m[2]),low:parseFloat(m[3]),close:parseFloat(m[4]),volume:parseFloat(m[5])}))}catch(m){return console.error("An error occurred during data fetching:",m),[]}}async subscribeSymbol(t,r,n,i){var o;if((t==null?void 0:t.symbol)==null){console.warn("Invalid symbol: Symbol must have a valid symbol.");return}if(r==null){console.warn("Invalid period: Period cannot be null or undefined.");return}if(i==null){console.warn("Invalid subscriberUID: subscriberUID cannot be null or undefined.");return}try{dj(br.CRYPTO),((o=Se._ws)==null?void 0:o.readyState)!==WebSocket.OPEN?await this.createWebSocket(t,r,i):(console.log("WebSocket is already connected, proceeding to subscribe"),await this.subscribe(t,r,i)),this.addListener(t,r,n,i)}catch(s){console.error("Failed to subscribe to symbol: ",s)}}subscribeAllTickers(t,r,n,i=500,o){const s=async u=>{await new Promise(c=>setTimeout(c,u))};t.length!==0&&this.subscribeSymbol(t[0],r,n,o).then(async()=>{console.log(`Subscribed to symbol: ${t[0].symbol}`),console.log("Applying initial delay of 3 seconds"),await s(3e3);for(let u=1;u<t.length;u++)setTimeout(()=>{this.subscribeSymbol(t[u],r,n,o).then(()=>{console.log(`Subscribed to symbol: ${t[u].symbol}`)})},(u-1)*i)})}async getOrderBook(t,r){try{if(r!==void 0&&r!==br.CRYPTO)return console.warn("BinanceDataFeed: getOrderBook only supports crypto symbols"),null;const n=`https://api.binance.com/api/v3/depth?symbol=${t.symbol.toUpperCase()}&limit=20`,i=await fetch(n);if(!i.ok)throw new Error(`Network response was not ok: ${i.statusText}`);const o=await i.json();if(!o.bids||!o.asks)throw new Error("No order book data in response");return{bids:o.bids,asks:o.asks,timestamp:Date.now()}}catch(n){return console.error("BinanceDataFeed: Failed to fetch order book for",t.symbol,":",n),null}}unsubscribeSymbol(t,r,n){!this.validateTickerPeriodUuid(t,r,n)||n==null||this.removeListener(t.symbol,r,n)&&this.unSubscribeToSymbol(t.symbol,r)}unsubscribeAllTickers(t,r,n,i){console.log("Unsubscribing all tickers"),t.forEach((o,s)=>{!this.validateTickerPeriodUuid(o,r,i)||i==null||setTimeout(()=>{console.log("Subscribed Symbols Before",Se._subscribedSymbolListenersMap.size),this.removeListener(o.symbol,r,i)&&this.unSubscribeToSymbol(o.symbol,r),Se.checkAndCloseIfNoSubscriptions()},s*n)})}closeWebsocket(){Se.closeWebsocket()}static closeWebsocket(){var t;console.warn("Closing websocket connection"),(t=Se._ws)==null||t.close(),Se._ws=void 0,Se._subscribedSymbolListenersMap.clear(),Se._subscribedSymbolsMap.clear(),Se._domListenersMap.clear(),Se._domSubscriptionsMap.clear(),Se._tradeListenersMap.clear(),Se._tradeSubscriptionsMap.clear()}async createWebSocket(t,r,n){var i,o;if(!(((i=Se._ws)==null?void 0:i.readyState)===WebSocket.OPEN||((o=Se._ws)==null?void 0:o.readyState)===WebSocket.CONNECTING)){console.warn("Creating new ws connection"),Se._ws=new WebSocket("wss://stream.binance.com:9443/ws");try{await this.waitForWebSocketToOpen(Se._ws),console.log("WebSocket connection established"),await this.subscribe(t,r,n)}catch(s){console.warn("Failed to establish Binance websocket connection: ",s)}}}async subscribe(t,r,n){var i,o,s,u;Se._ws==null&&await this.createWebSocket(t,r,n);const c=`${t.symbol.toLowerCase()}_${r.text}`;if(Se._subscribedSymbolsMap.set(c,(Se._subscribedSymbolsMap.get(c)??0)+1),console.log("Subscribed ",c," count: ",Se._subscribedSymbolsMap.get(c)),console.log("=== Active Subscriptions After Backend Subscribe ==="),this.debugChannels(),console.log("=== End Active Subscriptions ==="),Se._subscribedSymbolsMap.get(c)>1){console.log("No need to re-subscribe as we are already subscribed for ticker: ",t);return}try{const h=t.symbol.toLowerCase(),p=Yc(br.CRYPTO,r),g=JSON.stringify({method:"SUBSCRIBE",params:[`${h}@kline_${p}`],id:1});((i=Se._ws)==null?void 0:i.readyState)===WebSocket.OPEN?(console.log("WebSocket is open, sending subscription message"),(o=Se._ws)==null||o.send(g)):((s=Se._ws)==null?void 0:s.readyState)===WebSocket.CONNECTING?(console.log("WebSocket is still connecting, waiting for connection to be established"),await this.waitForWebSocketToOpen(Se._ws),(u=Se._ws)==null||u.send(g)):await this.createWebSocket(t,r,n),console.log(`Subscribed to ${h}@kline_${p}`)}catch(h){console.error("Failed to subscribe to symbol: ",h),Se._subscribedSymbolsMap.set(c,(Se._subscribedSymbolsMap.get(c)??0)-1)}}getActiveSubscriptions(){return Se._subscribedSymbolListenersMap.size+Se._domListenersMap.size+Se._tradeListenersMap.size}subscribeTradeData(t,r,n){if(!(t!=null&&t.symbol)){console.warn("Invalid ticker for trade subscription");return}if(!n){console.warn("Invalid uuid for trade subscription");return}try{this.subscribeToTradeSymbol(t,n),this.addTradeListener(t,r,n)}catch(i){console.error("Failed to subscribe to trade data:",i)}}unsubscribeTradeData(t,r){if(!(t!=null&&t.symbol)||!r){console.warn("Invalid ticker or uuid for trade unsubscription");return}try{this.removeTradeListener(t.symbol,r)&&this.unsubscribeFromTradeSymbol(t.symbol)}catch(n){console.error("Failed to unsubscribe from trade data:",n)}}unSubscribeToSymbol(t,r){var n;const i=`${t.toLowerCase()}_${r.text}`;if(Se._subscribedSymbolsMap.set(i,(Se._subscribedSymbolsMap.get(i)??1)-1),console.log("Unsubscribed ",i," count: ",Se._subscribedSymbolsMap.get(i)),Se._subscribedSymbolsMap.get(i)>=1){console.log("No need to un-subscribe as another chart is using this interval");return}const o=t.toLowerCase(),s=Yc(br.CRYPTO,r),u=JSON.stringify({method:"UNSUBSCRIBE",params:[`${o}@kline_${s}`],id:2});(n=Se._ws)==null||n.send(u),Se._subscribedSymbolsMap.delete(i),console.log(`Un subscribed to ${o}@kline_${s}`)}static checkAndCloseIfNoSubscriptions(){Se._subscribedSymbolListenersMap.size===0&&Se._domListenersMap.size===0&&Se._tradeListenersMap.size===0&&Se._ws!==void 0&&(console.log("Closing Binance websocket connection"),Se.closeWebsocket())}addListener(t,r,n,i){const o=`${t.symbol.toLowerCase()}_${r.text}_${i}`,s=u=>{const c=JSON.parse(u.data),h=c==null?void 0:c.k,p=Yc(br.CRYPTO,r);if(h!=null&&h.s.toLowerCase()===t.symbol.toLowerCase()&&h.i===p){const g=c.k;n({timestamp:g.t,open:parseFloat(g.o),high:parseFloat(g.h),low:parseFloat(g.l),close:parseFloat(g.c),volume:parseFloat(g.v),turnover:parseFloat(g.q)},t)}};Se._ws.addEventListener("message",s),Se._subscribedSymbolListenersMap.set(o,s),console.log("Adding Listener for: ",o," count: ",Se._subscribedSymbolListenersMap.size),console.log("=== Active Subscriptions After Adding Listener ==="),this.debugChannels(),console.log("=== End Active Subscriptions ===")}removeListener(t,r,n){const i=`${t.toLowerCase()}_${r.text}_${n}`,o=Se._subscribedSymbolListenersMap.get(i);return o!=null?(console.log("Removing Listener for: ",i),Se._ws.removeEventListener("message",o),Se._subscribedSymbolListenersMap.delete(i),console.log("=== Active Subscriptions After Removing Listener ==="),this.debugChannels(),console.log("=== End Active Subscriptions ==="),!0):!1}async waitForWebSocketToOpen(t){await new Promise((r,n)=>{t.readyState===WebSocket.OPEN?(console.log("WebSocket is open"),r()):(t.onopen=()=>{console.log("WebSocket connection opened"),r()},t.onerror=i=>{n(i),console.error("Binance WebSocket error: ",i)})})}validateTickerPeriodUuid(t,r,n){switch(!0){case(t==null?void 0:t.symbol)==null:return console.warn("Invalid symbol: Symbol must have a valid ticker."),!1;case r==null:return console.warn("Invalid period: Period cannot be null or undefined."),!1;case n==null:console.warn("Invalid subscriberUID: Uuid cannot be null");default:return!0}}clearAllListeners(){console.log("BinanceDataFeed: Clearing all listeners"),Se._subscribedSymbolListenersMap.clear(),Se._subscribedSymbolsMap.clear(),Se._domListenersMap.clear(),Se._domSubscriptionsMap.clear(),Se._tradeListenersMap.clear(),Se._tradeSubscriptionsMap.clear()}unsubscribeAllForChart(t){console.log(`BinanceDataFeed: unsubscribeAllForChart called for chart ${t}`);const r=[];for(const[o,s]of Se._subscribedSymbolListenersMap.entries())o.endsWith(`_${t}`)&&r.push(o);for(const o of r){const s=o.split("_");if(s.length>=3){const u=s[0],c=s[1],h=s[2],p={text:c,multiplier:parseInt(c)||1,timespan:c.includes("m")?"minute":c.includes("h")?"hour":c.includes("d")?"day":"minute"};this.removeListener(u,p,h)&&this.unSubscribeToSymbol(u,p),console.log(`BinanceDataFeed: Properly cleaned up ticker subscription ${o}`)}else Se._subscribedSymbolListenersMap.delete(o),console.log(`BinanceDataFeed: Removed subscription ${o} (fallback cleanup)`)}const n=[];for(const[o,s]of Se._domListenersMap.entries())o.endsWith(`_${t}`)&&n.push(o);for(const o of n){const s=o.split("_");if(s.length>=3){const u=s[0];this.removeDOMListener(u,t)&&this.unsubscribeFromDOMSymbol(u),console.log(`BinanceDataFeed: Properly cleaned up DOM subscription ${o}`)}else Se._domListenersMap.delete(o),console.log(`BinanceDataFeed: Removed DOM subscription ${o} (fallback cleanup)`)}const i=[];for(const[o,s]of Se._tradeListenersMap.entries())o.endsWith(`_${t}`)&&i.push(o);for(const o of i){const s=o.split("_");if(s.length>=3){const u=s[0];this.removeTradeListener(u,t)&&this.unsubscribeFromTradeSymbol(u),console.log(`BinanceDataFeed: Properly cleaned up trade subscription ${o}`)}else Se._tradeListenersMap.delete(o),console.log(`BinanceDataFeed: Removed trade subscription ${o} (fallback cleanup)`)}Se.checkAndCloseIfNoSubscriptions(),console.log(`BinanceDataFeed: Cleaned up ${r.length} ticker subscriptions, ${n.length} DOM subscriptions, and ${i.length} trade subscriptions for chart ${t}`),this.debugChannels()}debugChannels(){var t,r,n;console.log("=== BinanceDataFeed Debug: Active Subscriptions ==="),console.log(`WebSocket Status: ${((t=Se._ws)==null?void 0:t.readyState)===WebSocket.OPEN?"OPEN":((r=Se._ws)==null?void 0:r.readyState)===WebSocket.CONNECTING?"CONNECTING":((n=Se._ws)==null?void 0:n.readyState)===WebSocket.CLOSED?"CLOSED":"UNDEFINED"}`),console.log("Ticker Subscriptions (Backend):");for(const[i,o]of Se._subscribedSymbolsMap.entries())console.log(`  ${i}: ${o} backend subscriptions`);console.log("Ticker Listeners (Frontend):");for(const[i,o]of Se._subscribedSymbolListenersMap.entries())console.log(`  ${i}: listener registered`);console.log("DOM Subscriptions (Backend):");for(const[i,o]of Se._domSubscriptionsMap.entries())console.log(`  ${i}: ${o} backend subscriptions`);console.log("DOM Listeners (Frontend):");for(const[i,o]of Se._domListenersMap.entries())console.log(`  ${i}: listener registered`);console.log("Trade Subscriptions (Backend):");for(const[i,o]of Se._tradeSubscriptionsMap.entries())console.log(`  ${i}: ${o} backend subscriptions`);console.log("Trade Listeners (Frontend):");for(const[i,o]of Se._tradeListenersMap.entries())console.log(`  ${i}: listener registered`);console.log(`Total Active Listeners: ${this.getActiveSubscriptions()}`),console.log("=== End Debug ===")}subscribeOrderBookData(t,r,n){if(!(t!=null&&t.symbol)){console.warn("Invalid ticker for DOM subscription");return}if(!n){console.warn("Invalid uuid for DOM subscription");return}try{this.subscribeToDOMSymbol(t,n),this.addDOMListener(t,r,n)}catch(i){console.error("Failed to subscribe to DOM data:",i)}}unsubscribeOrderBookData(t,r){if(!(t!=null&&t.symbol)||!r){console.warn("Invalid ticker or uuid for DOM unsubscription");return}try{this.removeDOMListener(t.symbol,r)&&this.unsubscribeFromDOMSymbol(t.symbol)}catch(n){console.error("Failed to unsubscribe from DOM data:",n)}}async subscribeToDOMSymbol(t,r){var n,i,o,s,u,c;if(((n=Se._ws)==null?void 0:n.readyState)!==WebSocket.OPEN&&((i=Se._ws)==null?void 0:i.readyState)!==WebSocket.CONNECTING){console.warn("Creating new ws connection for DOM"),Se._ws=new WebSocket("wss://stream.binance.com:9443/ws");try{await this.waitForWebSocketToOpen(Se._ws),console.log("WebSocket connection established for DOM")}catch(p){console.warn("Failed to establish Binance websocket connection for DOM: ",p);return}}const h=`${t.symbol.toLowerCase()}_dom`;if(Se._domSubscriptionsMap.set(h,(Se._domSubscriptionsMap.get(h)??0)+1),console.log("DOM Subscribed ",h," count: ",Se._domSubscriptionsMap.get(h)),Se._domSubscriptionsMap.get(h)>1){console.log("No need to re-subscribe to DOM as we are already subscribed for symbol: ",t);return}try{const p=t.symbol.toLowerCase(),g=JSON.stringify({method:"SUBSCRIBE",params:[`${p}@depth20@1000ms`],id:Date.now()});((o=Se._ws)==null?void 0:o.readyState)===WebSocket.OPEN?(console.log("WebSocket is open, sending DOM subscription message:",g),(s=Se._ws)==null||s.send(g)):((u=Se._ws)==null?void 0:u.readyState)===WebSocket.CONNECTING&&(console.log("WebSocket is still connecting, waiting for connection to be established for DOM"),await this.waitForWebSocketToOpen(Se._ws),(c=Se._ws)==null||c.send(g)),console.log(`Subscribed to DOM for ${p}@depth20@1000ms`)}catch(p){console.error("Failed to subscribe to DOM symbol: ",p),Se._domSubscriptionsMap.set(h,(Se._domSubscriptionsMap.get(h)??0)-1)}}unsubscribeFromDOMSymbol(t){var r;const n=`${t.toLowerCase()}_dom`;if(Se._domSubscriptionsMap.set(n,(Se._domSubscriptionsMap.get(n)??1)-1),console.log("DOM Unsubscribed ",n," count: ",Se._domSubscriptionsMap.get(n)),Se._domSubscriptionsMap.get(n)>=1){console.log("No need to un-subscribe from DOM as another component is using this symbol");return}const i=t.toLowerCase(),o=JSON.stringify({method:"UNSUBSCRIBE",params:[`${i}@depth20@1000ms`],id:Date.now()});(r=Se._ws)==null||r.send(o),Se._domSubscriptionsMap.delete(n),console.log(`Un subscribed from DOM for ${i}@depth20@1000ms`)}addDOMListener(t,r,n){const i=`${t.symbol.toLowerCase()}_dom_${n}`,o=s=>{try{const u=JSON.parse(s.data);if(u.stream&&u.stream.includes(t.symbol.toLowerCase()),u.stream&&u.stream.includes("@depth20@")){const c=u.data,h={bids:c.bids||[],asks:c.asks||[],timestamp:c.lastUpdateId||Date.now()};r(h,t)}else if(u.e==="depthUpdate"&&u.s&&u.s.toLowerCase()===t.symbol.toLowerCase()){const c=u,h={bids:c.b||[],asks:c.a||[],timestamp:c.E};r(h,t)}else if(u.bids&&u.asks&&!u.e){const c={bids:u.bids||[],asks:u.asks||[],timestamp:Date.now()};r(c,t)}}catch(u){console.error("Error parsing DOM data:",u)}};Se._ws.addEventListener("message",o),Se._domListenersMap.set(i,o),console.log("Adding DOM Listener for: ",i," count: ",Se._domListenersMap.size)}removeDOMListener(t,r){const n=`${t.toLowerCase()}_dom_${r}`,i=Se._domListenersMap.get(n);return i!=null?(console.log("Removing DOM Listener for: ",n),Se._ws.removeEventListener("message",i),Se._domListenersMap.delete(n),!0):!1}async subscribeToTradeSymbol(t,r){var n,i,o,s,u,c;if(((n=Se._ws)==null?void 0:n.readyState)!==WebSocket.OPEN&&((i=Se._ws)==null?void 0:i.readyState)!==WebSocket.CONNECTING){console.warn("Creating new ws connection for trades"),Se._ws=new WebSocket("wss://stream.binance.com:9443/ws");try{await this.waitForWebSocketToOpen(Se._ws),console.log("WebSocket connection established for trades")}catch(p){console.warn("Failed to establish Binance websocket connection for trades: ",p);return}}const h=`${t.symbol.toLowerCase()}_trades`;if(Se._tradeSubscriptionsMap.set(h,(Se._tradeSubscriptionsMap.get(h)??0)+1),console.log("Trade Subscribed ",h," count: ",Se._tradeSubscriptionsMap.get(h)),Se._tradeSubscriptionsMap.get(h)>1){console.log("No need to re-subscribe to trades as we are already subscribed for symbol: ",t);return}try{const p=t.symbol.toLowerCase(),g=JSON.stringify({method:"SUBSCRIBE",params:[`${p}@trade`],id:Date.now()});((o=Se._ws)==null?void 0:o.readyState)===WebSocket.OPEN?(console.log("WebSocket is open, sending trade subscription message:",g),(s=Se._ws)==null||s.send(g)):((u=Se._ws)==null?void 0:u.readyState)===WebSocket.CONNECTING&&(console.log("WebSocket is still connecting, waiting for connection to be established for trades"),await this.waitForWebSocketToOpen(Se._ws),(c=Se._ws)==null||c.send(g)),console.log(`Subscribed to trades for ${p}@trade`)}catch(p){console.error("Failed to subscribe to trade symbol: ",p),Se._tradeSubscriptionsMap.set(h,(Se._tradeSubscriptionsMap.get(h)??0)-1)}}unsubscribeFromTradeSymbol(t){var r;const n=`${t.toLowerCase()}_trades`;if(Se._tradeSubscriptionsMap.set(n,(Se._tradeSubscriptionsMap.get(n)??1)-1),console.log("Trade Unsubscribed ",n," count: ",Se._tradeSubscriptionsMap.get(n)),Se._tradeSubscriptionsMap.get(n)>=1){console.log("No need to un-subscribe from trades as another component is using this symbol");return}const i=t.toLowerCase(),o=JSON.stringify({method:"UNSUBSCRIBE",params:[`${i}@trade`],id:Date.now()});(r=Se._ws)==null||r.send(o),Se._tradeSubscriptionsMap.delete(n),console.log(`Un subscribed from trades for ${i}@trade`)}addTradeListener(t,r,n){const i=`${t.symbol.toLowerCase()}_trades_${n}`,o=s=>{try{const u=JSON.parse(s.data);if(u.e==="trade"&&u.s&&u.s.toLowerCase()===t.symbol.toLowerCase()){console.log("Trade: Processing trade data for",u.s);const c=u,h={trades:[{id:String(c.t),price:c.p,quantity:c.q,timestamp:c.T,side:c.m?"sell":"buy"}],symbol:t.symbol,exchange:t.exchange||"binance",lastUpdated:c.T};console.log("Trade: Calling callback with trade data:",h),r(h,t)}}catch(u){console.error("Error parsing trade data:",u)}};Se._ws.addEventListener("message",o),Se._tradeListenersMap.set(i,o),console.log("Adding Trade Listener for: ",i," count: ",Se._tradeListenersMap.size)}removeTradeListener(t,r){const n=`${t.toLowerCase()}_trades_${r}`,i=Se._tradeListenersMap.get(n);return i!=null?(console.log("Removing Trade Listener for: ",n),Se._ws.removeEventListener("message",i),Se._tradeListenersMap.delete(n),!0):!1}};be(Ll,"_ws"),be(Ll,"_subscribedSymbolListenersMap",new Map),be(Ll,"_subscribedSymbolsMap",new Map),be(Ll,"_domListenersMap",new Map),be(Ll,"_domSubscriptionsMap",new Map),be(Ll,"_tradeListenersMap",new Map),be(Ll,"_tradeSubscriptionsMap",new Map);let s9=Ll;async function pj(e,t,r,n){let i=`https://api.binance.com/api/v3/klines?symbol=${e}&interval=${t}&limit=${r}`;return n!=null&&(i+=`&endTime=${n}`),await(await fetch(i)).json()}const Uc={baseUrl:"http://localhost:3000",endpoints:{search:"",historical:"",websocket:"",orderBook:"",price:""},headers:{"Content-Type":"application/json"},websocket:{enabled:!0,reconnectInterval:5e3,maxReconnectAttempts:3},debug:!1};class fj{constructor(t){be(this,"config"),be(this,"websocket",null),be(this,"reconnectAttempts",0),be(this,"clientId"),be(this,"channelSubscriptions",new Map),be(this,"subscriberCallbacks",new Map),be(this,"orderBookCallbacks",new Map),be(this,"pendingOrderBookSubscriptions",new Set),be(this,"tradeCallbacks",new Map),be(this,"pendingTradeSubscriptions",new Set);var r,n,i,o,s,u;this.config={...Uc,...t,endpoints:{...Uc.endpoints,...t==null?void 0:t.endpoints},headers:{...Uc.headers,...t==null?void 0:t.headers},websocket:{enabled:((r=t==null?void 0:t.websocket)==null?void 0:r.enabled)??((n=Uc.websocket)==null?void 0:n.enabled)??!0,reconnectInterval:((i=t==null?void 0:t.websocket)==null?void 0:i.reconnectInterval)??((o=Uc.websocket)==null?void 0:o.reconnectInterval)??5e3,maxReconnectAttempts:((s=t==null?void 0:t.websocket)==null?void 0:s.maxReconnectAttempts)??((u=Uc.websocket)==null?void 0:u.maxReconnectAttempts)??3},debug:(t==null?void 0:t.debug)??Uc.debug??!1},this.clientId=this.generateClientId()}generateClientId(){const t=Date.now(),r=Math.random().toString(36).substr(2,9);return`client_${t}_${r}`}async searchSymbols(t,r){this.log("DefaultDataFeed: searchSymbols ",t,r),(!t||t==="")&&(t=r===br.CRYPTO?"BTC":"AAPL");const n=this.getTypeIdentifier(r),i=`${this.config.baseUrl}/${this.config.endpoints.search}/${n}?symbol=${encodeURIComponent(t)}`;try{const o=await fetch(i,{method:"GET",headers:this.config.headers});if(!o.ok)return console.error(`UnifiedDataFeed: Search request failed with status ${o.status}`),[];const s=await o.json();return!(s!=null&&s.data)||!Array.isArray(s.data)?(console.warn("UnifiedDataFeed: No data received from search API"),[]):s.data.map(u=>this.transformSearchResult(u,r))}catch(o){return console.error("UnifiedDataFeed: Error fetching search data:",o),[]}}async getHistoricalTimeSeries(t,r,n,i,o){this.log("DefaultDataFeed: getHistoricalTimeSeries ",t,r,n,i,o);const s=t.type,u=this.getTypeIdentifier(s),c=Yc(s,r),h=`${this.config.baseUrl}/${this.config.endpoints.historical}/${u}?symbol=${encodeURIComponent(t.symbol)}&interval=${encodeURIComponent(c)}&from=${n}&to=${i}`;try{const p=await fetch(h,{method:"GET",headers:this.config.headers});if(!p.ok)return console.error(`UnifiedDataFeed: Historical data request failed with status ${p.status}`),[];const g=await p.json();return!(g!=null&&g.values)||!Array.isArray(g.values)?(console.warn("UnifiedDataFeed: No historical data received"),[]):g.values.map(m=>this.transformHistoricalData(m))}catch(p){return console.error("UnifiedDataFeed: Error fetching historical data:",p),[]}}async getPrice(t,r){this.log("DefaultDataFeed: getPrice ",t,r);const n=r||t.type,i=this.getTypeIdentifier(n),o=this.config.endpoints.price||"price",s=`${this.config.baseUrl}/${o}/${i}?symbol=${encodeURIComponent(t.symbol)}`;try{const u=await fetch(s,{method:"GET",headers:this.config.headers});if(!u.ok)return console.error(`UnifiedDataFeed: Price request failed with status ${u.status}`),null;const c=await u.json();if(typeof c=="number")return c;if((c==null?void 0:c.price)!==void 0)return Number(c.price);if((c==null?void 0:c.close)!==void 0)return Number(c.close);if(c!=null&&c.values&&Array.isArray(c.values)&&c.values.length>0){const h=c.values[c.values.length-1];return Number(h.close||h.c)}return console.warn("UnifiedDataFeed: No price data found in response"),null}catch(u){return console.error("UnifiedDataFeed: Error fetching price data:",u),null}}async getOrderBook(t,r){const n=r||t.type,i=this.getTypeIdentifier(n),o=`${this.config.baseUrl}${this.config.endpoints.orderBook}/${i}?symbol=${encodeURIComponent(t.symbol)}`;try{this.log("DefaultDataFeed: getOrderBook ",t,r);const s=await fetch(o,{method:"GET",headers:this.config.headers});if(!s.ok)return console.error(`UnifiedDataFeed: Order book request failed with status ${s.status}`),null;const u=await s.json();return!(u!=null&&u.bids)||!(u!=null&&u.asks)?(console.warn("UnifiedDataFeed: No order book data received"),null):{bids:u.bids,asks:u.asks,timestamp:u.timestamp}}catch(s){return console.error("UnifiedDataFeed: Error fetching order book data:",s),null}}subscribeSymbol(t,r,n,i){this.log("DefaultDataFeed: subscribeSymbol ",t,r,n,i);const o=(t.exchange||"default").toLowerCase(),s=`${t.symbol}_${o}_${r.multiplier}${r.timespan}`,u=i||`${t.symbol}_${Date.now()}`;this.subscriberCallbacks.set(u,n);let c=this.channelSubscriptions.get(s);if(c){if(c.handlers.find(h=>h.id===u)){console.warn(`UnifiedDataFeed: Handler ${u} already exists in channel ${s}, skipping duplicate`);return}c.handlers.push({id:u,callback:n}),this.log("DefaultDataFeed: subscribeSymbol channel already exists",t,r,n,i)}else c={symbol:t.symbol,period:r,ticker:{...t},handlers:[{id:u,callback:n}]},this.channelSubscriptions.set(s,c),this.createBackendSubscription(t,r,s),this.log("DefaultDataFeed: subscribeSymbol new channel",t,r,n,i);this.debugChannels()}unsubscribeSymbol(t,r,n){this.log("DefaultDataFeed: unsubscribeSymbol ",t,r,n);const i=(t.exchange||"default").toLowerCase(),o=`${t.symbol}_${i}_${r.multiplier}${r.timespan}`,s=n||`${t.symbol}_${Date.now()}`;this.subscriberCallbacks.delete(s);const u=this.channelSubscriptions.get(o);if(!u){console.warn(`UnifiedDataFeed: Channel ${o} not found for unsubscription`);return}const c=u.handlers.findIndex(h=>h.id===s);c!==-1?(u.handlers.splice(c,1),this.log("DefaultDataFeed: unsubscribeSymbol handler found",t,r,n)):console.warn(`UnifiedDataFeed: Handler ${s} not found in channel ${o}`),this.log("DefaultDataFeed: unsubscribeSymbol handler not found",t,r,n),u.handlers.length===0&&(this.log("DefaultDataFeed: unsubscribeSymbol no more handlers",t,r,n),this.removeBackendSubscription(u.backendSubscriptionId,t,r),this.channelSubscriptions.delete(o)),this.debugChannels()}unsubscribeAllForChart(t){this.log("DefaultDataFeed: unsubscribeAllForChart ",t);let r=0;const n=[];for(const[i,o]of this.channelSubscriptions.entries()){const s=o.handlers.findIndex(u=>u.id===t);s!==-1&&(this.log("DefaultDataFeed: unsubscribeAllForChart handler found",t,i),o.handlers.splice(s,1),r++,o.handlers.length===0?(this.log("DefaultDataFeed: unsubscribeAllForChart no more handlers",t,i),n.push(i)):this.log("DefaultDataFeed: unsubscribeAllForChart handler not found",t,i))}for(const i of n){const o=this.channelSubscriptions.get(i);if(o){this.log("DefaultDataFeed: unsubscribeAllForChart channel found",t,i);const s=i.split("_");if(s.length>=3){const u=s[0],c=s[1];s.slice(2).join("_");const h={symbol:u,exchange:c,type:this.getTypeIdentifier(o.ticker.type)},p={multiplier:1,timespan:"minute",text:"1m"};this.removeBackendSubscription(o.backendSubscriptionId,h,p)}this.channelSubscriptions.delete(i)}}this.log("DefaultDataFeed: unsubscribeAllForChart removedCount",t,r,n.length),this.debugChannels()}subscribeOrderBookData(t,r,n){var i;if(!((i=this.config.websocket)!=null&&i.enabled)){this.log("DefaultDataFeed: subscribeOrderBookData ",t,r,n);return}const o=t.type,s=(t.exchange||"default").toLowerCase(),u=`${t.symbol}_${s}_orderbook`,c=`${t.symbol}_orderbook_${n}`;if(this.log("DefaultDataFeed: subscribeOrderBookData start ",t,r,n),this.pendingOrderBookSubscriptions.has(c)){this.log("DefaultDataFeed: subscribeOrderBookData pending",t,r,n);return}this.orderBookCallbacks.set(c,r);const h={event:"subscribe",data:{type:this.getTypeIdentifier(o),symbol:t.symbol,dataType:"orderbook",subscriptionId:u,uuid:n,exchange:s,clientId:this.clientId}};this.log("DefaultDataFeed: subscribeOrderBookData send",t,r,n),this.sendWebSocketMessage(h)||(console.error("UnifiedDataFeed: WebSocket not available for order book, retrying in 1 second"),this.pendingOrderBookSubscriptions.add(c),setTimeout(()=>{this.log("DefaultDataFeed: subscribeOrderBookData retry",t,r,n),this.pendingOrderBookSubscriptions.delete(c),this.subscribeOrderBookData(t,r,n)},1e3))}unsubscribeOrderBookData(t,r){var n;if(this.log("DefaultDataFeed: unsubscribeOrderBookData start ",t,r),!((n=this.config.websocket)!=null&&n.enabled)){this.log("DefaultDataFeed: unsubscribeOrderBookData websocket disabled",t,r);return}const i=t.type,o=(t.exchange||"default").toLowerCase(),s=`${t.symbol}_${o}_orderbook`,u=`${t.symbol}_orderbook_${r}`;this.log("DefaultDataFeed: unsubscribeOrderBookData remove callback",t,r),this.orderBookCallbacks.delete(u);const c={event:"unsubscribe",data:{subscriptionId:s,type:this.getTypeIdentifier(i),symbol:t.symbol,dataType:"orderbook",uuid:r,exchange:o,clientId:this.clientId}};this.log("DefaultDataFeed: unsubscribeOrderBookData send",t,r),this.sendWebSocketMessage(c)}subscribeTradeData(t,r,n){var i;if(this.log("DefaultDataFeed: subscribeTradeData start ",t,r,n),!((i=this.config.websocket)!=null&&i.enabled)){this.log("DefaultDataFeed: subscribeTradeData websocket disabled",t,r,n);return}const o=t.type,s=(t.exchange||"default").toLowerCase(),u=`${t.symbol}_${s}_trades`,c=`${t.symbol}_trades_${n}`;if(this.log("DefaultDataFeed: subscribeTradeData ",t,r,n),this.pendingTradeSubscriptions.has(c)){this.log("DefaultDataFeed: subscribeTradeData pending",t,r,n);return}this.tradeCallbacks.set(c,r);const h={event:"subscribe",data:{type:this.getTypeIdentifier(o),symbol:t.symbol,dataType:"trades",subscriptionId:u,uuid:n,exchange:s,clientId:this.clientId}};this.log("DefaultDataFeed: subscribeTradeData send",t,r,n),this.sendWebSocketMessage(h)||(console.error("UnifiedDataFeed: WebSocket not available for trades, retrying in 1 second"),this.pendingTradeSubscriptions.add(c),setTimeout(()=>{this.log("DefaultDataFeed: subscribeTradeData retry",t,r,n),this.pendingTradeSubscriptions.delete(c),this.subscribeTradeData(t,r,n)},1e3))}unsubscribeTradeData(t,r){var n;if(this.log("DefaultDataFeed: unsubscribeTradeData start ",t,r),!((n=this.config.websocket)!=null&&n.enabled)){this.log("DefaultDataFeed: unsubscribeTradeData websocket disabled",t,r);return}const i=t.type,o=(t.exchange||"default").toLowerCase(),s=`${t.symbol}_${o}_trades`,u=`${t.symbol}_trades_${r}`;this.log("DefaultDataFeed: unsubscribeTradeData remove callback",t,r),this.tradeCallbacks.delete(u);const c={event:"unsubscribe",data:{subscriptionId:s,type:this.getTypeIdentifier(i),symbol:t.symbol,dataType:"trades",uuid:r,exchange:o,clientId:this.clientId}};this.log("DefaultDataFeed: unsubscribeTradeData send",t,r),this.sendWebSocketMessage(c)}closeWebsocket(){this.log("DefaultDataFeed: closeWebsocket start"),this.websocket&&((this.websocket.readyState===WebSocket.OPEN||this.websocket.readyState===WebSocket.CONNECTING)&&this.websocket.close(),this.websocket=null),this.reconnectAttempts=0,this.orderBookCallbacks.clear(),this.pendingOrderBookSubscriptions.clear(),this.tradeCallbacks.clear(),this.pendingTradeSubscriptions.clear(),this.channelSubscriptions.clear(),this.subscriberCallbacks.clear()}clearAllListeners(){this.log("DefaultDataFeed: clearAllListeners start"),this.closeWebsocket()}debugChannels(){this.log("================================= debugChannels Start =================================");for(const[t,r]of this.channelSubscriptions.entries())this.log("debugChannels ",t,r.handlers.length,r.backendSubscriptionId);this.log("================================= debugChannels End =================================")}getActiveSubscriptions(){return this.channelSubscriptions.size+this.orderBookCallbacks.size}sendWebSocketMessage(t){const r=this.getOrCreateWebSocket();if(r&&r.readyState===WebSocket.OPEN)return r.send(JSON.stringify(t)),!0;if(r&&r.readyState===WebSocket.CONNECTING){const n=()=>{r.send(JSON.stringify(t)),r.removeEventListener("open",n)};return r.addEventListener("open",n),!0}return!1}getOrCreateWebSocket(){var t;if(!((t=this.config.websocket)!=null&&t.enabled))return null;if(!this.websocket||this.websocket.readyState===WebSocket.CLOSED||this.websocket.readyState===WebSocket.CLOSING)try{const r=`${this.config.baseUrl.replace("http","ws")}/${this.config.endpoints.websocket||"/websocket"}`;this.websocket=new WebSocket(r),this.websocket.onopen=()=>{this.reconnectAttempts=0},this.websocket.onmessage=n=>{this.handleWebSocketMessage(n)},this.websocket.onerror=n=>{console.error("UnifiedDataFeed: WebSocket error:",n)},this.websocket.onclose=n=>{console.warn("UnifiedDataFeed: WebSocket closed with code:",n.code,"reason:",n.reason),this.handleWebSocketReconnect()}}catch(r){return console.error("UnifiedDataFeed: Failed to create WebSocket:",r),null}return this.websocket}handleWebSocketMessage(t){try{const r=JSON.parse(t.data);if(r.event){const n=r;switch(n.event){case"subscribed":case"subscription_acknowledged":this.handleSubscriptionResponse(n);break;case"unsubscribed":case"unsubscription_acknowledged":this.handleUnsubscriptionResponse(n);break;case"subscription_error":case"unsubscription_error":case"error":this.handleErrorMessage(n);break;case"market_data":this.handleMarketDataMessage(n);break;case"connected":case"disconnected":this.handleConnectionMessage(n);break;case"pong":break;default:this.handleMarketData(r)}}else this.handleMarketData(r)}catch(r){console.error("UnifiedDataFeed: Error parsing WebSocket message:",r)}}handleSubscriptionResponse(t){var r;this.log("DefaultDataFeed: handleSubscriptionResponse",t.event,(r=t.data)==null?void 0:r.symbol)}handleUnsubscriptionResponse(t){var r;this.log("DefaultDataFeed: handleUnsubscriptionResponse",t.event,(r=t.data)==null?void 0:r.symbol)}handleErrorMessage(t){var r;this.log("DefaultDataFeed: handleErrorMessage",t.event,(r=t.data)==null?void 0:r.error)}handleMarketDataMessage(t){this.handleMarketData(t.data)}handleConnectionMessage(t){this.log("DefaultDataFeed: handleConnectionMessage",t.event)}handleMarketData(t){if(!t)return;const r=t.type||"kline",n=t.exchange||"crypto",i=t.symbol,o=t.data||t;if(r==="kline"||o.e==="kline"&&o.k){const s=o.k||o,u=(i||s.s).toLowerCase(),c=n;for(const[h,p]of this.channelSubscriptions.entries()){const[g,m]=h.split("_");if(g.toLowerCase()===u&&(m===c||m==="default")){const b={timestamp:s.timestamp||s.t,open:parseFloat(s.open||s.o),high:parseFloat(s.high||s.h),low:parseFloat(s.low||s.l),close:parseFloat(s.close||s.c),volume:parseFloat(s.volume||s.v),turnover:parseFloat(s.turnover||s.q)};p.handlers.forEach(x=>{x.callback(b,p.ticker)})}}}else if(r==="orderbook"){const s=i.toLowerCase(),u={bids:o.bids||[],asks:o.asks||[],timestamp:o.timestamp||Date.now()};for(const[c,h]of this.orderBookCallbacks.entries()){const[p]=c.split("_");p.toLowerCase()===s&&h(u)}}else if(r==="trades"){const s=i.toLowerCase(),u=n;let c;o.trades&&Array.isArray(o.trades)?c=o.trades:c=[{id:o.tradeId||String(o.timestamp||Date.now()),price:String(o.price||0),quantity:String(o.quantity||0),timestamp:o.timestamp||Date.now(),side:o.side||"buy",tradeType:o.tradeType}];const h={trades:c,symbol:i,exchange:u,lastUpdated:o.timestamp||Date.now()};for(const[p,g]of this.tradeCallbacks.entries()){const[m]=p.split("_");m.toLowerCase()===s&&g(h)}}}handleWebSocketReconnect(){var t,r;const n=((t=this.config.websocket)==null?void 0:t.maxReconnectAttempts)||3;if(this.reconnectAttempts<n){const i=((r=this.config.websocket)==null?void 0:r.reconnectInterval)||5e3;setTimeout(()=>{this.reconnectAttempts+=1,this.getOrCreateWebSocket()},i)}else console.error("UnifiedDataFeed: Max reconnection attempts reached, clearing pending subscriptions"),this.pendingOrderBookSubscriptions.clear()}getTypeIdentifier(t){switch(t){case br.STOCKS:return"stocks";case br.CRYPTO:return"crypto";case br.FOREX:return"forex";case br.FUTURES:return"futures";case"all":return"all";default:return"all"}}createBackendSubscription(t,r,n){var i;if(!((i=this.config.websocket)!=null&&i.enabled))return;const o=n,s={event:"subscribe",data:{type:this.getTypeIdentifier(t.type),symbol:t.symbol,dataType:"kline",interval:Yc(t.type,r),subscriptionId:o,exchange:(t.exchange||"default").toLowerCase(),clientId:this.clientId}};if(this.sendWebSocketMessage(s)){const u=this.channelSubscriptions.get(n);u&&(u.backendSubscriptionId=o)}else console.error("UnifiedDataFeed: WebSocket not available for backend subscription, retrying in 1 second"),setTimeout(()=>{this.createBackendSubscription(t,r,n)},1e3)}removeBackendSubscription(t,r,n){if(!t)return;const i=(r.exchange||"default").toLowerCase(),o={event:"unsubscribe",data:{subscriptionId:t,type:this.getTypeIdentifier(r.type),symbol:r.symbol,dataType:"kline",interval:Yc(r.type,n),exchange:i,clientId:this.clientId}};this.sendWebSocketMessage(o)}transformSearchResult(t,r){const n=t.type||r;return{symbol:t.symbol,name:t.name,shortName:t.shortName||t.symbol,exchange:t.exchange,market:t.market||this.getMarketFromType(n),type:n||"UNKNOWN",pricePrecision:t.pricePrecision||this.getDefaultPrecision(n,"price"),volumePrecision:t.volumePrecision||this.getDefaultPrecision(n,"volume"),priceCurrency:t.priceCurrency,logo:t.logo}}transformHistoricalData(t){return{timestamp:new Date(t.datetime||t.timestamp).getTime(),open:parseFloat(t.open),high:parseFloat(t.high),low:parseFloat(t.low),close:parseFloat(t.close),volume:parseFloat(t.volume||0)}}getMarketFromType(t){switch(t){case br.STOCKS:return"Stock";case br.CRYPTO:return"Cryptocurrency";case br.FOREX:return"Foreign Exchange";case br.FUTURES:return"Futures";default:return"Unknown"}}getDefaultPrecision(t,r){if(r==="volume")return 0;switch(t){case br.CRYPTO:return 6;case br.FOREX:return 5;case br.STOCKS:case br.FUTURES:default:return 2}}log(t,...r){this.config.debug&&console.log(`DefaultDataFeed: ${t}`,...r)}}ov.forEach(e=>{Qy(e)});Kk.forEach(e=>{G8(e)});const gj=()=>{const e=F0.useRef(null),t=F0.useRef(null);return F0.useEffect(()=>{if(e.current){const r={container:e.current,rootContainer:e.current,locale:"en-US",setTheme:()=>{},symbol:{exchange:"binance",market:"Crypto",name:"Bitcoin",shortName:"BTCUSDT",symbol:"BTCUSDT",priceCurrency:"usd",type:br.CRYPTO},interval:{multiplier:1,timespan:"week",text:"W"},watchListEnabled:!0,watchListUseExternalStorage:!1,dataFeed:new s9,layoutUseExternalStorage:!1,layoutLimit:10,paperTradingEnabled:!0,paperTradingUseExternalStorage:!1,paperTradingPriceTrackingInterval:3e4,paperTradingMaxTrades:100,multiChartLimit:16,themeUseExternalStorage:!1,orderBookEnabled:!0,enabledSymbolTypes:[br.CRYPTO],tradesEnabled:!0,candleCloseTimerEnabled:!0,menuPagesEnabled:!0,menuPages:[{name:"Home",path:"/home"}]};t.current=new ZU(r)}return()=>{t.current&&(console.warn("chartRef.current.destroy() called in ChartSpireReact.tsx useEffect cleanup function"),t.current.destroy(),t.current=null)}},[]),Pl.jsx("div",{id:"container",ref:e})},$y={statusBar:{backgroundColor:"#ff6b6b",color:"white",padding:"8px 16px",textAlign:"center",fontWeight:"bold",fontSize:"14px",position:"absolute",top:0,left:0,right:0,zIndex:1000020,width:"100%",boxSizing:"border-box"},closeButton:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"18px",padding:"2px 6px"}};function vj(){const[e,t]=F0.useState(!0);return Pl.jsxs(Pl.Fragment,{children:[e&&Pl.jsxs("div",{style:$y.statusBar,children:["⚠️ Alpha v1.0.0-alpha16: Data from Binance API. This is a pre-release version for testing purposes only.",Pl.jsx("button",{style:$y.closeButton,onClick:()=>t(!1),title:"Hide status bar",children:"✕"})]}),Pl.jsx(gj,{})]})}V6.createRoot(document.getElementById("root")).render(Pl.jsx(F0.StrictMode,{children:Pl.jsx(vj,{})}));
